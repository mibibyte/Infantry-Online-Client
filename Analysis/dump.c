/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

_DWORD __stdcall sub_401005(_DWORD); // weak
int sub_40100A(void); // weak
int __thiscall sub_401023(_DWORD); // weak
_DWORD __stdcall sub_401028(_DWORD, _DWORD); // weak
int __thiscall sub_40104B(_DWORD); // weak
_DWORD __stdcall sub_40105A(_DWORD); // weak
int __thiscall sub_401064(_DWORD); // weak
_DWORD __stdcall sub_40106E(_DWORD, __int16, _DWORD); // weak
_DWORD __stdcall sub_40108C(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4010AF(_DWORD); // weak
_DWORD __stdcall sub_4010BE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4010C8(_DWORD); // weak
_DWORD __stdcall sub_4010D7(_DWORD); // weak
int sub_4010DC(void); // weak
_DWORD __stdcall sub_4010E1(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4010FA(_DWORD); // weak
_DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401113(_DWORD); // weak
int __stdcall sub_401118(int, int); // weak
int __thiscall sub_401127(_DWORD); // weak
_DWORD __stdcall sub_401136(_DWORD); // weak
_DWORD __cdecl sub_40113B(_DWORD, _DWORD, _DWORD, _DWORD); // weak
BOOL __stdcall sub_40114A(HWND, LPARAM); // idb
_DWORD __stdcall sub_40114F(_DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_401154(_DWORD); // weak
int __thiscall sub_401159(_DWORD); // weak
_DWORD __stdcall sub_401163(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_40116D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
INT_PTR __stdcall DialogFunc(HWND, UINT, WPARAM, LPARAM); // idb
int __thiscall sub_401181(_DWORD); // weak
_DWORD __stdcall sub_40118B(_DWORD); // weak
int __thiscall sub_401190(_DWORD); // weak
_DWORD __stdcall sub_4011BD(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4011D1(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4011D6(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4011E5(_DWORD); // weak
int __thiscall sub_4011EA(_DWORD); // weak
int __thiscall sub_4011F9(_DWORD); // weak
int sub_4011FE(); // weak
int __thiscall sub_401203(_DWORD); // weak
int sub_401208(void); // weak
int __thiscall sub_401217(_DWORD); // weak
_DWORD __stdcall sub_40121C(_DWORD); // weak
_DWORD __stdcall sub_401221(_DWORD); // weak
_DWORD __stdcall sub_40122B(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401230(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401244(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401249(_DWORD, _DWORD); // weak
int __thiscall sub_40125D(_DWORD); // weak
int __thiscall sub_401271(_DWORD); // weak
_DWORD __stdcall sub_401285(_DWORD); // weak
_DWORD __stdcall sub_40128A(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_40128F(_DWORD, _DWORD); // weak
int __thiscall sub_401294(_DWORD); // weak
_DWORD __stdcall sub_4012A8(_DWORD, _DWORD); // weak
int __thiscall sub_4012AD(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4012B7(_DWORD); // weak
_DWORD __stdcall sub_4012BC(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4012C1(_DWORD); // weak
int __cdecl sub_4012C6(double); // idb
int sub_4012CB(void); // weak
int __stdcall sub_4012D0(char *Source); // idb
_DWORD __stdcall sub_4012D5(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4012E4(_DWORD); // weak
int __stdcall sub_4012F8(int, char *, char *Source, int, int); // idb
int __thiscall sub_401311(_DWORD); // weak
int __thiscall sub_401316(_DWORD); // weak
_DWORD __stdcall sub_40131B(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_40133E(_DWORD); // weak
int __stdcall sub_401348(char *Source, int, int, int); // idb
_DWORD __stdcall sub_401357(_DWORD); // weak
_DWORD __stdcall sub_40136B(_DWORD); // weak
int __thiscall sub_40137A(_DWORD); // weak
_DWORD __stdcall sub_40137F(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_40139D(_DWORD); // weak
int __thiscall sub_4013A7(_DWORD); // weak
_DWORD __stdcall sub_4013B6(_DWORD); // weak
int __stdcall sub_4013BB(char *Filename); // idb
INT_PTR __stdcall sub_4013C0(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_4013C5(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4013E3(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4013E8(_DWORD); // weak
int __cdecl sub_4013ED(int, int); // weak
int __thiscall sub_4013F2(_DWORD); // weak
_DWORD __stdcall sub_4013FC(_DWORD); // weak
int sub_401401(void); // weak
int __thiscall sub_40140B(_DWORD); // weak
_DWORD __stdcall j_nullsub_5(_DWORD); // weak
int sub_401415(void); // weak
_DWORD __stdcall sub_40141A(_DWORD); // weak
_DWORD __stdcall sub_40143D(_DWORD); // weak
_DWORD __stdcall sub_401442(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401447(_DWORD); // weak
_DWORD __stdcall sub_401456(_DWORD); // weak
_DWORD __stdcall sub_40145B(_DWORD, _DWORD, __int16, __int16, _DWORD); // weak
_DWORD __stdcall sub_401460(_DWORD); // weak
_DWORD __stdcall sub_401465(_DWORD); // weak
_DWORD __stdcall sub_40146A(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_40146F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_401479(void); // weak
_DWORD __stdcall sub_401488(_DWORD, _DWORD, _DWORD, _DWORD, __int16); // weak
_DWORD __stdcall sub_401497(_DWORD); // weak
_DWORD __stdcall sub_40149C(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4014C9(_DWORD); // weak
int __thiscall sub_4014D8(_DWORD); // weak
_DWORD __stdcall sub_4014DD(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_4014EC(_DWORD, _DWORD); // weak
int __thiscall sub_4014FB(_DWORD); // weak
_DWORD __stdcall sub_401505(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_40150A(_DWORD); // weak
_DWORD __stdcall sub_401528(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_401532(char *Str2); // idb
_DWORD __stdcall sub_401537(_DWORD); // weak
int __thiscall sub_401541(_DWORD); // weak
int __stdcall sub_401569(char *Filename, int, int, int); // idb
_DWORD __stdcall sub_401578(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_40157D(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401582(_DWORD); // weak
_DWORD __stdcall sub_401591(_DWORD, _DWORD); // weak
_DWORD __cdecl sub_401596(_DWORD, _DWORD, char); // weak
int sub_40159B(void); // weak
_DWORD __stdcall sub_4015B4(_DWORD); // weak
int __thiscall sub_4015BE(_DWORD); // weak
int __stdcall sub_4015C8(void *Src, int); // idb
_DWORD __stdcall sub_4015D7(_DWORD, _DWORD); // weak
int __thiscall sub_4015E6(_DWORD); // weak
_DWORD __cdecl sub_4015FF(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401604(_DWORD, _DWORD); // weak
int __thiscall sub_401609(_DWORD); // weak
_DWORD __stdcall sub_40161D(_DWORD); // weak
int __thiscall sub_401631(_DWORD); // weak
int __thiscall sub_401640(_DWORD); // weak
int __thiscall sub_401645(_DWORD); // weak
_DWORD __stdcall sub_40164F(_DWORD); // weak
int sub_401654(); // weak
int __thiscall sub_401668(_DWORD); // weak
int __thiscall sub_40166D(_DWORD); // weak
int __fastcall sub_40167C(_DWORD, _DWORD); // weak
int __thiscall sub_401686(_DWORD); // weak
int __thiscall sub_40168B(_DWORD); // weak
int __stdcall sub_40169F(char *Filename); // idb
_DWORD __stdcall sub_4016A9(_DWORD, _DWORD, _DWORD); // weak
BOOL __stdcall EnumFunc(HWND, LPARAM); // idb
int sub_4016E5(void); // weak
_DWORD __stdcall sub_4016FE(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401703(_DWORD); // weak
_DWORD __stdcall sub_401721(_DWORD, _DWORD); // weak
int __thiscall sub_40173A(_DWORD); // weak
_DWORD __stdcall sub_401758(_DWORD); // weak
int __cdecl sub_401767(char *Dest, char *Source, size_t Count); // idb
INT_PTR __stdcall sub_40176C(HWND, UINT, WPARAM, LPARAM); // idb
int __thiscall sub_401771(_DWORD); // weak
_DWORD __stdcall sub_401780(_DWORD); // weak
_DWORD __stdcall sub_401785(_DWORD); // weak
_DWORD __stdcall sub_40178A(_DWORD); // weak
int sub_401794(void); // weak
_DWORD __stdcall sub_4017AD(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4017C6(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4017CB(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4017D5(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4017DA(_DWORD); // weak
_DWORD __stdcall sub_4017FD(_DWORD); // weak
int __thiscall j_nullsub_11(_DWORD); // weak
int __thiscall sub_401811(_DWORD); // weak
_DWORD __stdcall sub_40184D(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_401852(_DWORD); // weak
_DWORD __stdcall sub_401857(_DWORD); // weak
int __thiscall sub_401866(_DWORD); // weak
_DWORD __stdcall sub_401870(_DWORD); // weak
INT_PTR __stdcall sub_401875(HWND, UINT, WPARAM, LPARAM); // idb
int __thiscall sub_40187F(_DWORD); // weak
_DWORD __cdecl sub_401889(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_40189D(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4018A2(_DWORD, _DWORD, __int16); // weak
_DWORD __stdcall sub_4018CA(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4018CF(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4018ED(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4018F2(_DWORD); // weak
_DWORD __stdcall sub_401901(_DWORD); // weak
int __stdcall sub_401906(int, int, int, size_t Size); // idb
int __thiscall sub_40190B(void *Src); // idb
int __thiscall sub_40191F(_DWORD); // weak
_DWORD __stdcall sub_401929(_DWORD); // weak
int sub_40192E(void); // weak
_DWORD __stdcall sub_401938(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401956(_DWORD); // weak
int __thiscall sub_401965(_DWORD); // weak
int sub_40196A(); // weak
_DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_401974(void); // weak
_DWORD __stdcall sub_401979(_DWORD); // weak
_DWORD __stdcall sub_401983(_DWORD); // weak
_DWORD __stdcall sub_401988(_DWORD); // weak
_DWORD __stdcall sub_40198D(_DWORD); // weak
_DWORD __stdcall sub_401992(_DWORD); // weak
_DWORD __stdcall sub_40199C(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_4019B0(void); // weak
_DWORD __stdcall sub_4019BF(_DWORD, _DWORD); // weak
int __thiscall sub_4019CE(_DWORD); // weak
_DWORD __stdcall sub_4019D3(_DWORD); // weak
int __thiscall sub_4019DD(_DWORD); // weak
int __stdcall sub_4019E2(int, int, char *Source, int, int, int, int, int); // idb
_DWORD __stdcall sub_4019E7(_DWORD); // weak
int __thiscall sub_401A00(_DWORD); // weak
_DWORD __stdcall sub_401A0A(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401A19(_DWORD); // weak
_DWORD __stdcall sub_401A28(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401A2D(_DWORD, _DWORD); // weak
int sub_401A3C(void); // weak
_DWORD __cdecl sub_401A41(_DWORD, _DWORD, char); // weak
int __thiscall sub_401A46(_DWORD); // weak
_DWORD __stdcall sub_401A50(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_401A5A(void *Src, int); // idb
_DWORD __stdcall sub_401A69(_DWORD, _DWORD); // weak
_DWORD __cdecl sub_401A73(_DWORD, _DWORD); // weak
int __cdecl sub_401A78(int, void *Dst); // idb
_DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401A87(_DWORD); // weak
int __thiscall sub_401A8C(_DWORD); // weak
int __thiscall sub_401A91(_DWORD); // weak
int __thiscall sub_401A9B(_DWORD); // weak
int __thiscall sub_401AB4(_DWORD); // weak
_DWORD __stdcall sub_401AE1(_DWORD, _DWORD, _DWORD); // weak
int __thiscall j_nullsub_6(_DWORD); // weak
_DWORD __stdcall sub_401AEB(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401AF5(_DWORD); // weak
int __thiscall sub_401AFA(_DWORD); // weak
_DWORD __stdcall sub_401AFF(_DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_401B04(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401B09(_DWORD); // weak
_DWORD __stdcall sub_401B13(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401B18(_DWORD); // weak
int __thiscall sub_401B1D(_DWORD); // weak
int sub_401B40(void); // weak
_DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401B63(_DWORD); // weak
_DWORD __stdcall sub_401B68(_DWORD); // weak
_DWORD __stdcall sub_401B72(_DWORD); // weak
_DWORD __stdcall sub_401B77(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401B90(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401B9F(_DWORD); // weak
_DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_401BB8(void); // weak
_DWORD __stdcall sub_401BC2(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401BCC(_DWORD); // weak
_DWORD __stdcall sub_401BE0(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401BEA(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401C0D(_DWORD); // weak
_DWORD __stdcall sub_401C1C(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401C21(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401C35(_DWORD); // weak
_DWORD __stdcall sub_401C3A(_DWORD); // weak
_DWORD __stdcall sub_401C3F(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401C58(_DWORD); // weak
_DWORD __stdcall sub_401C5D(_DWORD); // weak
_DWORD __stdcall sub_401C62(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401C6C(_DWORD); // weak
int __thiscall sub_401C71(_DWORD); // weak
_DWORD __cdecl sub_401C80(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401C99(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401CA8(_DWORD, _DWORD); // weak
int __thiscall j_nullsub_7(_DWORD); // weak
int sub_401CC6(void); // weak
_DWORD __stdcall sub_401CCB(_DWORD); // weak
_DWORD __stdcall sub_401CD5(_DWORD); // weak
_DWORD __stdcall sub_401CE9(_DWORD); // weak
int __thiscall sub_401CEE(_DWORD); // weak
_DWORD __stdcall sub_401D0C(_DWORD); // weak
_DWORD __stdcall sub_401D16(_DWORD, _DWORD); // weak
int __thiscall sub_401D1B(_DWORD); // weak
int sub_401D20(void); // weak
int __fastcall sub_401D39(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401D3E(_DWORD); // weak
int sub_401D48(void); // weak
_DWORD __stdcall sub_401D4D(_DWORD); // weak
int __stdcall sub_401D52(int, UINT Msg, WPARAM wParam, LPARAM lParam); // idb
int __thiscall sub_401D57(_DWORD); // weak
int __thiscall sub_401D6B(_DWORD); // weak
_DWORD __stdcall sub_401D7F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401D84(_DWORD); // weak
int sub_401DB6(void); // weak
int __thiscall sub_401DC0(_DWORD); // weak
_DWORD __stdcall sub_401DD4(_DWORD, _DWORD); // weak
int __thiscall sub_401DE3(_DWORD); // weak
_DWORD __stdcall sub_401DE8(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401DF2(_DWORD); // weak
int __thiscall j_nullsub_8(_DWORD); // weak
_DWORD __stdcall sub_401E0B(_DWORD, _DWORD); // weak
int sub_401E15(void); // weak
int __thiscall sub_401E29(_DWORD); // weak
int __thiscall sub_401E33(_DWORD); // weak
_DWORD __stdcall sub_401E3D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401E4C(_DWORD); // weak
int __thiscall sub_401E51(_DWORD); // weak
int __stdcall sub_401E5B(void *Src, int); // idb
int __thiscall sub_401E65(_DWORD, _DWORD, _DWORD); // weak
int sub_401E6A(void); // weak
_DWORD __stdcall sub_401E74(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_401E8D(int, char *Str); // idb
_DWORD __stdcall sub_401E9C(_DWORD); // weak
int __thiscall sub_401EBA(_DWORD); // weak
int __cdecl sub_401EBF(int, int); // weak
int __thiscall sub_401EC4(_DWORD); // weak
_DWORD __stdcall sub_401ED3(_DWORD, _DWORD); // weak
int __cdecl sub_401ED8(char *EndPtr, int); // idb
_DWORD __stdcall sub_401EF1(_DWORD, _DWORD, _DWORD); // weak
int sub_401F05(void); // weak
int __thiscall sub_401F2D(_DWORD); // weak
_DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401F37(_DWORD); // weak
_DWORD __stdcall sub_401F3C(_DWORD); // weak
int __thiscall sub_401F4B(_DWORD); // weak
INT_PTR __stdcall sub_401F5A(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_401F64(_DWORD, _DWORD); // weak
int __thiscall sub_401F69(_DWORD); // weak
_DWORD __stdcall sub_401F6E(LPCSTR lpFileName); // weak
_DWORD __stdcall sub_401F87(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401FA5(_DWORD); // weak
_DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401FAF(_DWORD); // weak
_DWORD __stdcall sub_401FB4(_DWORD); // weak
_DWORD __stdcall sub_401FBE(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_401FC3(void *Dst); // idb
_DWORD __stdcall sub_401FCD(_DWORD); // weak
_DWORD __cdecl sub_401FD2(_DWORD); // weak
_DWORD __stdcall sub_401FD7(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_401FDC(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_401FE1(_DWORD); // weak
_DWORD __stdcall sub_401FEB(_DWORD); // weak
int __thiscall sub_401FF0(_DWORD); // weak
_DWORD __stdcall sub_401FFF(_DWORD, _DWORD, _DWORD); // weak
int sub_402004(void); // weak
int __thiscall sub_40203B(void *Src); // idb
int __thiscall sub_402040(_DWORD); // weak
_DWORD __stdcall sub_402045(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall j_nullsub_9(_DWORD); // weak
_DWORD __stdcall sub_402063(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_402077(_DWORD); // weak
_DWORD __cdecl sub_40207C(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_402086(_DWORD); // weak
_DWORD __stdcall sub_40208B(_DWORD); // weak
INT_PTR __stdcall off_402095(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_40209A(_DWORD); // weak
_DWORD __stdcall sub_4020B3(_DWORD); // weak
_DWORD __stdcall sub_4020D1(_DWORD, _DWORD); // weak
int __thiscall sub_4020DB(_DWORD); // weak
int sub_4020EF(void); // weak
_DWORD __stdcall sub_4020F9(_DWORD); // weak
_DWORD __cdecl sub_4020FE(_DWORD); // weak
_DWORD __stdcall sub_402108(_DWORD); // weak
int __cdecl sub_40210D(int, int); // weak
_DWORD __stdcall sub_402112(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_40211C(_DWORD); // weak
_DWORD __stdcall sub_402121(_DWORD); // weak
_DWORD __cdecl sub_40212B(_DWORD); // weak
int sub_402171(void); // weak
_DWORD __stdcall sub_40217B(_DWORD, _DWORD); // weak
INT_PTR __stdcall sub_402180(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_402199(_DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_4021B2(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4021C6(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4021CB(_DWORD); // weak
int __thiscall sub_4021D0(_DWORD); // weak
_DWORD __stdcall sub_4021E4(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_402207(_DWORD); // weak
_DWORD __stdcall sub_40220C(_DWORD, _DWORD); // weak
_DWORD __cdecl sub_402211(_DWORD, _DWORD, char); // weak
_DWORD __stdcall sub_402216(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402220(__int64); // weak
_DWORD __stdcall sub_402239(_DWORD); // weak
_DWORD __cdecl sub_40223E(_DWORD, _DWORD); // weak
int __thiscall sub_402243(_DWORD); // weak
_DWORD __stdcall sub_40226B(_DWORD); // weak
_DWORD __stdcall sub_40227A(_DWORD); // weak
_DWORD __stdcall sub_40227F(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_402284(_DWORD); // weak
_DWORD __stdcall sub_402289(_DWORD); // weak
_DWORD __stdcall sub_402298(_DWORD, _DWORD); // weak
int __stdcall sub_4022BB(char *Source, int, int, int, int, int); // idb
_DWORD __stdcall sub_4022CA(_DWORD, _DWORD); // weak
int sub_4022D9(void); // weak
_DWORD __stdcall sub_4022DE(_DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_4022E3(_DWORD, _DWORD, _DWORD, _DWORD, __int16); // weak
_DWORD __stdcall sub_4022E8(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4022F2(_DWORD); // weak
int __thiscall sub_4022FC(_DWORD); // weak
_DWORD __cdecl sub_40232E(_DWORD); // weak
int __thiscall sub_402338(_DWORD); // weak
_DWORD __stdcall sub_40233D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402360(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402365(_DWORD, _DWORD); // weak
int __stdcall sub_402374(char *Filename); // idb
int __thiscall sub_40237E(_DWORD); // weak
int __stdcall sub_402383(char *Str, int, int); // idb
int __thiscall sub_402388(_DWORD); // weak
_DWORD __stdcall sub_402392(_DWORD); // weak
int __thiscall j_nullsub_10(_DWORD); // weak
_DWORD __stdcall sub_40239C(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4023A1(_DWORD, __int16); // weak
int __thiscall sub_4023AB(_DWORD); // weak
int __thiscall sub_4023B0(_DWORD); // weak
int __thiscall sub_4023C4(_DWORD); // weak
int sub_4023C9(void); // weak
_DWORD __stdcall sub_4023CE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall j_nullsub_18(_DWORD); // weak
_DWORD __stdcall sub_4023D8(_DWORD); // weak
int __thiscall sub_4023DD(_DWORD); // weak
_DWORD __stdcall sub_4023F6(_DWORD); // weak
_DWORD __stdcall sub_4023FB(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_402400(_DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_402405(_DWORD, _DWORD); // weak
double __cdecl sub_40240A(_DWORD); // weak
_DWORD __stdcall sub_402414(_DWORD, _DWORD, _DWORD); // weak
int sub_402419(void); // weak
int sub_40241E(void); // weak
int __thiscall sub_402428(_DWORD); // weak
_DWORD __stdcall sub_40243C(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_402446(_DWORD); // weak
_DWORD __stdcall sub_40244B(_DWORD, _DWORD); // weak
int __thiscall sub_402455(_DWORD); // weak
_DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_40246E(_DWORD); // weak
int sub_402473(void); // weak
_DWORD __stdcall sub_40248C(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402496(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4024A5(_DWORD); // weak
int __thiscall sub_4024B4(_DWORD); // weak
int __thiscall sub_4024C8(_DWORD); // weak
_DWORD __stdcall sub_4024CD(_DWORD); // weak
_DWORD __stdcall sub_4024D2(_DWORD); // weak
int sub_4024D7(); // weak
int __thiscall sub_4024E1(_DWORD); // weak
int __thiscall sub_4024E6(int, int); // idb
_DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_4024F5(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4024FA(_DWORD); // weak
_DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_402509(void *Src, size_t Size); // idb
int sub_40250E(void); // weak
int __thiscall sub_402513(_DWORD); // weak
_DWORD __stdcall sub_402527(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_40252C(_DWORD); // weak
int __thiscall sub_40253B(_DWORD); // weak
_DWORD __stdcall sub_402540(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_40258B(_DWORD); // weak
_DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
INT_PTR __stdcall sub_402595(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_40259F(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_4025A4(_DWORD); // weak
int __thiscall sub_4025B8(_DWORD); // weak
_DWORD __stdcall sub_4025BD(char, _DWORD); // weak
_DWORD __stdcall sub_4025C2(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_4025C7(int, int, int, int, int, int, char *Source, int, int); // idb
_DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_4025D6(); // weak
INT_PTR __stdcall sub_4025DB(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_4025E0(_DWORD, _DWORD); // weak
int __thiscall sub_4025E5(_DWORD); // weak
_DWORD __stdcall sub_4025EA(_DWORD); // weak
int __thiscall sub_4025F4(_DWORD); // weak
int sub_4025FE(void); // weak
int __stdcall sub_402603(int, int, char *Source); // idb
int __cdecl sub_402617(UINT uID); // idb
_DWORD __stdcall sub_40261C(_DWORD, _DWORD); // weak
int __cdecl sub_402626(int, int); // weak
int __cdecl sub_40263F(char *Str, int); // idb
_DWORD __stdcall sub_40264E(_DWORD); // weak
int __thiscall sub_402653(_DWORD); // weak
_DWORD __stdcall sub_402658(_DWORD); // weak
int __thiscall sub_40265D(_DWORD); // weak
_DWORD __stdcall sub_40266C(_DWORD); // weak
_DWORD __stdcall sub_402671(_DWORD); // weak
_DWORD __stdcall sub_402676(_DWORD); // weak
_DWORD __stdcall sub_40267B(_DWORD, _DWORD); // weak
int __stdcall sub_402699(int, int, char *Source, int); // idb
_DWORD __stdcall sub_4026B2(_DWORD); // weak
_DWORD __stdcall sub_4026C6(_DWORD); // weak
_DWORD __stdcall sub_4026CB(_DWORD, __int16, _DWORD); // weak
_DWORD __stdcall sub_4026D0(_DWORD); // weak
int __thiscall sub_4026E4(_DWORD); // weak
int __thiscall sub_4026EE(_DWORD); // weak
_DWORD __stdcall sub_4026F8(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int sub_402702(void); // weak
_DWORD __stdcall sub_402707(_DWORD, _DWORD); // weak
int __thiscall sub_402716(_DWORD); // weak
int __stdcall sub_402725(char *Str1, int, int, size_t NewSize, int, int); // idb
int sub_40272A(void); // weak
int sub_40272F(void); // weak
_DWORD __stdcall sub_402739(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_40273E(char *Str1, int, int, int, int); // idb
_DWORD __stdcall sub_402743(_DWORD); // weak
_DWORD __stdcall sub_402748(_DWORD); // weak
int __cdecl sub_40274D(int, int); // weak
_DWORD __stdcall sub_402752(_DWORD, _DWORD); // weak
_DWORD __cdecl sub_40277A(_DWORD, _DWORD); // weak
int __thiscall sub_40277F(_DWORD); // weak
_DWORD __stdcall sub_402784(_DWORD); // weak
_DWORD __stdcall sub_402789(_DWORD, _DWORD, _DWORD); // weak
int sub_40278E(); // weak
int __stdcall sub_402793(char *Source, int); // idb
int __thiscall sub_40279D(_DWORD); // weak
int __thiscall sub_4027A2(_DWORD); // weak
int sub_4027A7(); // weak
int __thiscall sub_4027B1(_DWORD); // weak
int __thiscall sub_4027B6(_DWORD); // weak
_DWORD __stdcall sub_4027C0(_DWORD, _DWORD); // weak
int __cdecl sub_4027CA(int, int, int); // weak
int __thiscall sub_4027ED(_DWORD); // weak
_DWORD __stdcall sub_4027F2(_DWORD); // weak
int __thiscall sub_402806(_DWORD); // weak
_DWORD __stdcall sub_40281A(_DWORD); // weak
_DWORD __stdcall sub_402829(_DWORD); // weak
_DWORD __stdcall sub_40282E(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402838(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_40283D(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_402842(_DWORD); // weak
_DWORD __stdcall sub_402847(_DWORD); // weak
_DWORD __cdecl sub_40284C(_DWORD); // weak
_DWORD __stdcall sub_40285B(_DWORD, _DWORD, _DWORD); // weak
int sub_40286F(); // weak
INT_PTR __stdcall sub_40287E(HWND, UINT, WPARAM, LPARAM); // idb
_DWORD __stdcall sub_402883(_DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402897(_DWORD); // weak
int __thiscall sub_40289C(_DWORD); // weak
_DWORD __stdcall sub_4028A1(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_4028C4(int, int, int, int, int, int, char *Source, int, int); // idb
_DWORD __stdcall sub_4028C9(_DWORD, _DWORD); // weak
_DWORD __stdcall sub_4028CE(_DWORD); // weak
int __thiscall sub_4028D8(_DWORD); // weak
_DWORD __stdcall sub_4028E2(_DWORD); // weak
_DWORD __stdcall sub_4028EC(_DWORD); // weak
_DWORD __cdecl sub_4028FB(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD __stdcall sub_402900(_DWORD, _DWORD, _DWORD); // weak
int sub_402914(void); // weak
_DWORD __stdcall sub_402919(_DWORD); // weak
int sub_402923(void); // weak
int __thiscall sub_402941(_DWORD); // weak
_DWORD __stdcall sub_402955(_DWORD); // weak
_DWORD __stdcall sub_40295A(_DWORD); // weak
_DWORD __stdcall sub_40295F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_402969(_DWORD); // weak
int __cdecl sub_40296E(char *Format, char ArgList); // idb
_DWORD __stdcall sub_40298C(_DWORD); // weak
DWORD sub_404390();
char *__cdecl sub_404410(char *Dest, char *Source, size_t Count);
int __thiscall sub_404440(_DWORD *this, int a2);
int __thiscall sub_404530(LPCRITICAL_SECTION *this);
LPCRITICAL_SECTION __thiscall sub_404630(LPCRITICAL_SECTION *this);
signed int __thiscall sub_404670(LPCRITICAL_SECTION *this, __int64 a2);
_DWORD *__thiscall sub_4046D0(_DWORD *this, int a2);
int __thiscall sub_404B00(LPCRITICAL_SECTION *this);
__int16 __thiscall sub_404BD0(LPCRITICAL_SECTION *this);
int __thiscall sub_404CA0(LPCRITICAL_SECTION *this);
int __stdcall sub_404D70(__int16 a1);
int __thiscall sub_404DC0(void (***this)(void), int a2);
int sub_404E90();
// _DWORD __thiscall CHttpFilter::~CHttpFilter(CHttpFilter *__hidden this); weak
void *__thiscall sub_404FF0(void *Memory, char a2);
int __thiscall sub_405060(const CHAR *this, int a2, int a3, int a4);
int __stdcall sub_405290(_BYTE *a1);
int __stdcall sub_4052A0(int a1);
signed int sub_4052B0();
int __stdcall sub_405320(int a1, int a2);
int __thiscall sub_4054A0(int this, int a2, int a3);
int __thiscall sub_4055A0(char *this, int a2);
int __stdcall sub_405720(int a1, int a2);
int __thiscall sub_4057D0(char *this, int a2, int a3, char *Str1, int a5);
int __fastcall sub_405850(int ecx0, int edx0, int a1, int a2, int a3, int a4, int a5, int a6);
int sub_405870();
int __thiscall sub_405890(signed __int16 *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
size_t __stdcall sub_405930(int a1, int a2, void *Src, size_t Size);
int __stdcall sub_4059A0(int, void *Dst, int, int); // idb
int __thiscall sub_405A30(_DWORD *this);
int __fastcall sub_405A80(int a1, int a2, __int16 a3, int a4, void *Src, size_t Size, int a7, int a8);
int __thiscall sub_405C70(void *this, __int16 a2, __int16 a3);
int __thiscall sub_405CC0(_DWORD *this, char a2, int a3, int a4);
int __thiscall sub_405D20(void *this, __int16 a2);
int __thiscall sub_405D50(void *this);
int __thiscall sub_405D80(void (****this)(void), int a2, int a3);
int __thiscall sub_405E20(void (****this)(void), char a2, int a3, __int16 a4, __int16 a5);
int __thiscall sub_405E90(void *this, char *Source, __int16 a3);
int __thiscall sub_405F50(void *this, __int16 a2, __int16 a3, const char *a4);
int __thiscall sub_406010(_DWORD *this, _BYTE *a2);
signed int __fastcall sub_406080(_DWORD *a1, int a2, int a3, int a4);
int __thiscall sub_4061C0(void *this, int a2, __int16 a3, __int16 a4, __int16 a5);
int __thiscall sub_4062A0(void *this, __int16 a2, __int16 a3, __int16 a4, __int16 a5);
int __thiscall sub_406300(void *this, __int16 a2, char a3);
int __thiscall sub_406340(void *this, int a2, int a3);
int __thiscall sub_406380(void *this, int a2);
int __thiscall sub_4063C0(void *this, __int16 a2, __int16 a3);
int __thiscall sub_406410(void *this, char a2, char *Source);
int __thiscall sub_406490(void *this, __int16 a2);
int __thiscall sub_4064C0(void *this, __int16 a2);
int __thiscall sub_4064F0(void *this, int *a2);
int __thiscall sub_406540(void *this, __int16 a2);
int __thiscall sub_4065B0(void *this, int a2);
int __thiscall sub_406630(void *this, __int16 a2);
int __thiscall sub_406660(void *this, char a2, int a3, int a4, int a5);
int __thiscall sub_4066D0(void *this, __int16 a2, char a3, int a4);
int __fastcall sub_406720(char *this, int edx0, int a2, const char *a3, const char *a4, int a5);
int __thiscall sub_4069C0(void *this, __int16 a2, char a3, int a4, __int16 a5, __int16 a6, __int16 a7, __int16 a8);
int __thiscall sub_406A40(void *this, int a2);
int __thiscall sub_406A80(void *this, int a2, const void *a3);
int __thiscall sub_406B00(void *this, const void *a2);
int __thiscall sub_406B80(void *this, int *a2);
int __thiscall sub_406BD0(void *this, __int16 a2, int a3);
char __thiscall sub_406C10(LPCRITICAL_SECTION **this, int a2, char *a3, size_t a4);
char __thiscall sub_406C50(void *this, int a2, int a3);
int __thiscall sub_407060(_DWORD *this);
int __fastcall sub_407070(int a1, int a2);
char __fastcall sub_407090(_DWORD *a1, int a2, char *Src, unsigned int a4);
FILE *__thiscall sub_4082D0(void *this, char *Filename, int a3, int a4);
_DWORD *__thiscall sub_408450(_DWORD *this, const char *a2, char *a3);
void *__thiscall sub_408520(void *Memory, char a2);
int __thiscall sub_408560(char *this, int a2);
_DWORD *__thiscall sub_408670(_DWORD *this, const char *a2, int a3, int a4);
void __thiscall sub_408C30(LPCRITICAL_SECTION **this);
const char *__fastcall sub_408E10(int a1, int a2, const char *a3, __int16 a4, __int16 a5);
int __thiscall sub_408FE0(int *this, int a2, char *a3, char *Source, int a5, int a6);
int __thiscall sub_409160(_DWORD *this, int a2);
void *__thiscall sub_409380(_DWORD *this, void *Src, size_t Size);
int __stdcall sub_409470(int, void *Src, size_t Size); // idb
int __thiscall sub_409490(void *this, int *a2, int a3);
BOOL __thiscall sub_4094D0(void *this, char *Source, int a3, int a4, int a5);
void *__thiscall sub_4095B0(void *Memory, char a2);
signed int __thiscall sub_4095E0(_DWORD *this);
_DWORD *__thiscall sub_409B50(char *this, char *a2, int a3);
void __thiscall sub_409CE0(const char *this);
int __thiscall sub_409DA0(void *this, int a2);
signed int __thiscall sub_409E00(_DWORD *this, int a2, void *a3);
int __thiscall sub_409EB0(_DWORD *this, char *a2);
unsigned int __cdecl sub_409FD0(int a1, int a2);
int __thiscall sub_40A0C0(_DWORD *this, unsigned int a2);
int __stdcall sub_40A0E0(int a1, int a2);
int __thiscall sub_40A130(_DWORD *this);
int __thiscall sub_40A1F0(_DWORD *this);
int __thiscall sub_40A7F0(_DWORD *this, _DWORD *a2);
signed int sub_40A890();
int __thiscall sub_40A8A0(_DWORD *this);
int __thiscall sub_40BFB0(char *this, int a2, int a3);
int __thiscall sub_40C130(_DWORD *this, int a2, int a3, int a4, int a5);
__int16 __thiscall sub_40C190(int this, __int64 a2, char a3);
signed int __thiscall sub_40C2F0(_DWORD *this);
int __thiscall sub_40C400(void *this);
int __thiscall sub_40C410(void *this, int a2, int a3, int a4, int a5);
unsigned __int16 **__thiscall sub_40C450(_DWORD *this, unsigned __int16 *a2);
HANDLE __thiscall sub_40C600(_DWORD *this);
int __thiscall sub_40C860(_DWORD *this, int a2, int a3, _BYTE *a4);
void *__thiscall sub_40D120(void *Memory, char a2);
void *__thiscall sub_40D170(void *Memory, char a2);
void __thiscall sub_40D1A0(char *this, int a2, __int64 a3, int a4);
_DWORD *__thiscall sub_40DC40(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_40E0D0(signed __int16 *this, int a2, int a3, int a4);
int __cdecl sub_40E130(int a1);
int __cdecl sub_40E170(int a1);
void *__thiscall sub_40E1C0(void *Memory, char a2);
BOOL __thiscall sub_40E200(_DWORD *this, int a2);
int __thiscall sub_40E320(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_40E410(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14);
void *__thiscall sub_40E4A0(void *Memory, char a2);
int __thiscall sub_40E520(_DWORD *this);
signed int sub_40E580();
int __thiscall sub_40E590(_DWORD *this);
int __thiscall sub_40F490(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5);
signed int __thiscall sub_40F500(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_40F5B0(_DWORD *this, int a2);
int __thiscall sub_40F8F0(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_40F970(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_40F9F0(_DWORD **this, int a2);
int __thiscall sub_40FA40(_DWORD *this, int a2, int a3);
int __thiscall sub_40FC40(_DWORD *this);
signed int __thiscall sub_40FD40(_DWORD *this, int a2);
int __stdcall sub_40FFF0(int a1, int a2, int a3);
signed int __thiscall sub_410010(_DWORD *this, signed int a2, int a3);
int __thiscall sub_410590(_DWORD *this, int a2, int a3, int a4, void *a5);
void *__thiscall sub_410850(void *Memory, char a2);
int __thiscall sub_410880(_DWORD *this, _DWORD *a2);
int *__thiscall sub_410E30(int *this, int a2, int a3, int a4);
char *__thiscall sub_4110F0(int this, const char *a2, int a3, char *a4, int a5);
FILE *__thiscall sub_411150(const char *this);
int __cdecl sub_4111F0(int a1, int a2);
int __cdecl sub_411220(int a1, int a2);
int __cdecl sub_411250(int a1, int a2);
int __cdecl sub_411290(int a1, int a2);
char *__thiscall sub_4112C0(char *this, int a2, int a3, int a4, int a5, int a6, int a7, char *Source, int a9, int a10);
signed int __fastcall sub_411490(int a1, int a2);
_DWORD *__thiscall sub_4116C0(signed int *this);
_DWORD *__thiscall sub_4116E0(signed int *this);
_DWORD *__thiscall sub_411700(signed int *this);
int __thiscall sub_411740(_DWORD *this);
int __thiscall sub_411790(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, char *Source, int a9, int a10);
FILE *__thiscall sub_411890(const char *this);
char *__thiscall sub_411A50(char *this, char *Source, int a3, int a4, int a5, int a6, int a7);
void __thiscall sub_411B10(_DWORD *this);
int __fastcall sub_411CB0(int a1, int a2);
int __fastcall sub_411D20(int a1, int a2);
int __thiscall sub_411E70(void *this);
unsigned int __cdecl sub_412680(int a1, int a2, int a3, int a4);
void *__thiscall sub_412710(void *Memory, char a2);
signed int __stdcall sub_412740(int a1);
int __thiscall sub_412760(_DWORD *this);
// int __userpurge sub_412820@<eax>(int result@<eax>, int a2@<ecx>, _BYTE *a3, int a4, int a5);
void __thiscall sub_412900(_DWORD *this, char a2);
void *__thiscall sub_412AF0(_DWORD *this, int a2, int a3);
int __thiscall sub_412B80(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_412BC0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_412C00(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_412CA0(_DWORD *this, int a2);
_DWORD *__thiscall sub_412CB0(char *this);
int __thiscall sub_4134D0(_DWORD *this);
int __thiscall sub_413540(const char *this, char a2);
_BYTE *__thiscall sub_4135E0(int this, _BYTE *a2, int a3);
int __thiscall sub_413680(_DWORD *this, int a2);
int __thiscall sub_413690(int this);
int __thiscall sub_413AC0(_DWORD *this);
int __thiscall sub_413B30(_DWORD *this, int a2, int a3);
int __thiscall sub_413BA0(_DWORD *this, int a2);
// void __usercall sub_413BE0(int a1@<ecx>, int a2@<ebx>, int a3@<ebp>, int a4@<esi>, int a5, char *a6);
int __thiscall sub_413F60(_DWORD *this);
_DWORD *__thiscall sub_414010(_DWORD *this, int a2, int a3);
int __thiscall sub_414080(_DWORD *this, int a2);
int __thiscall sub_414090(char *this);
int __thiscall sub_414580(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_4145A0(void *this, int a2, int a3, int a4, int a5);
signed int __thiscall sub_4145C0(int this, int a2, int a3, int a4);
int __thiscall sub_414630(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_4146D0(_DWORD *this);
signed int __thiscall sub_414740(int *this, int a2);
int __thiscall sub_414930(int *this);
int __thiscall sub_414D00(_DWORD *this);
char *__thiscall sub_414DB0(_DWORD *this, char *a2, int a3);
signed int __thiscall sub_414F80(int this, int a2, int a3, int a4);
int __thiscall sub_415000(_DWORD *this, int a2, int a3, int a4, int a5);
BOOL __thiscall sub_4150E0(_DWORD *this, int a2);
int __thiscall sub_4150F0(_DWORD *this);
int __thiscall sub_415620(_DWORD *this);
void *__thiscall sub_415860(void *Memory, char a2);
int __thiscall sub_4158A0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_415910(char *this);
char *__thiscall sub_415BC0(char *this, int a2, int a3, char *Source, int a5, int a6, int a7, int a8, int a9);
void *__thiscall sub_415CD0(void *Memory, char a2);
_DWORD *__thiscall sub_415D00(_DWORD *this, int a2, char *a3, int a4, int a5);
void *__thiscall sub_415DE0(void *Memory, char a2);
char *__thiscall sub_415E10(char *this, char *a2, int a3, int a4, void *a5, const char *a6, int a7, int a8, int a9, int a10);
void *__thiscall sub_4163A0(void *Memory, char a2);
_DWORD *__thiscall sub_4163D0(_DWORD *this, int a2, int a3, int a4);
void *__thiscall sub_4164D0(void *Memory, char a2);
_DWORD *__thiscall sub_416500(_DWORD *this);
void *__thiscall sub_416670(void *Memory, char a2);
_DWORD *__thiscall sub_4166A0(_DWORD *this, int a2, char *a3, int a4, int a5, int a6, int a7, int a8, int a9);
double __cdecl sub_416910(int a1);
int __cdecl sub_416970(int a1);
int __thiscall sub_416A30(_DWORD *this, int a2, int a3);
int __thiscall sub_416A90(_DWORD *this, int a2, int a3);
unsigned int __thiscall sub_416AC0(_DWORD *this, int a2, int a3);
int __thiscall sub_416AF0(_DWORD *this, int a2, int a3);
int *__thiscall sub_416B60(int *this, int a2);
int __thiscall sub_416BB0(int *this, int a2);
int __cdecl sub_416C70(int, void *Dst); // idb
int __thiscall sub_416D60(int this, int a2);
int __cdecl sub_416DB0(int a1, int a2);
int __cdecl sub_416E00(int *a1, signed __int16 *a2);
int __thiscall sub_417030(char *this);
int __thiscall sub_4171C0(_DWORD *this);
signed int __thiscall sub_4174E0(_DWORD *this);
int __thiscall sub_4182B0(const char *this);
void __thiscall sub_4185D0(_DWORD *this, int *a2, int *a3);
int __thiscall sub_4189B0(_DWORD *this);
void __thiscall sub_418B70(_DWORD *this);
_DWORD *__stdcall sub_418CB0(int a1);
signed int __thiscall sub_418CF0(_DWORD *this, int a2);
void *sub_418D40();
int __thiscall sub_418D90(_DWORD *this);
int __thiscall sub_418F20(_DWORD *this);
int sub_419080();
_DWORD *__thiscall sub_419200(_DWORD *this, int a2);
void __thiscall sub_419270(_DWORD *this, int a2);
_DWORD *__thiscall sub_419370(_DWORD *this, int a2);
signed int __thiscall sub_4193B0(_DWORD *this);
int __thiscall sub_4194E0(_DWORD *this);
int __thiscall sub_419620(_DWORD *this);
int __thiscall sub_4196C0(_DWORD *this, int a2);
int __thiscall sub_4197E0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_419A00(_DWORD *this, int a2, int a3, int a4);
int __fastcall sub_419E90(_DWORD *a1, int a2, _DWORD *a3);
int __stdcall sub_419F60(int a1, int a2, int a3);
int __fastcall sub_41A0D0(int a1, int a2);
int __fastcall sub_41AA40(char *a1, void *a2, const char *a3, int a4, int a5);
int __thiscall sub_41AAC0(char *this);
signed int __thiscall sub_41AD30(_DWORD *this, char *a2, int a3, __int16 a4, __int16 a5, signed int a6);
int __thiscall sub_41AE00(_DWORD *this, _DWORD *a2);
void __thiscall sub_41AEA0(_DWORD *this, int a2);
// int __userpurge sub_41B040@<eax>(_DWORD **a1@<ecx>, int a2@<edi>, char *a3);
HWND __thiscall sub_41B1A0(_DWORD *this, HWND a2);
BOOL __thiscall sub_41B1F0(_DWORD *this);
_DWORD *__thiscall sub_41B230(_DWORD *this);
int __thiscall sub_41B2E0(int *this, int a2);
int __thiscall sub_41B330(_DWORD *this, int a2);
int __thiscall sub_41B390(_DWORD *this, int a2, int a3, int a4, int a5, int a6, signed int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19);
int __thiscall sub_41B9A0(_DWORD *this);
int sub_41BC40();
int __thiscall sub_41BC70(_DWORD *this);
int __thiscall sub_41BD00(_DWORD *this);
signed int __thiscall sub_41BE00(_DWORD **this, int a2);
signed int __thiscall sub_41BF00(_DWORD **this);
int __thiscall sub_41C050(int this);
void __thiscall sub_41C2E0(int this);
int __thiscall sub_41C470(char *this, int a2, int a3, char *Source);
void __thiscall sub_41C600(_DWORD *this, _DWORD *a2, _DWORD *a3, char *a4, int a5, int a6);
int __stdcall sub_41C6B0(int a1, int a2, int a3, int a4, int a5);
int __thiscall sub_41C800(_DWORD *this, _DWORD *a2, char *a3, int a4, int a5, int a6, int a7, int a8);
signed int __thiscall sub_41C910(_DWORD *this, int a2);
signed int __thiscall sub_41CA50(_DWORD *this, int a2);
unsigned __int16 *__thiscall sub_41CB30(int this, int a2);
int *__thiscall sub_41CBC0(_DWORD **this, const char *a2, int *a3);
signed int __thiscall sub_41CCC0(_DWORD *this, int a2);
int __cdecl sub_41CCF0(int a1, int a2, int a3, int a4, unsigned __int16 a5);
int __thiscall sub_41CDB0(_DWORD **this, char *a2, int a3);
int __stdcall sub_41CDC0(int a1, int a2);
int __thiscall sub_41CE00(_DWORD **this, char *a2, int a3, int a4, int a5);
int __cdecl sub_41CED0(_DWORD *a1, int *a2, char a3);
int __thiscall sub_41D010(void **this);
void __thiscall sub_41D3E0(_DWORD *this);
void __thiscall sub_41D820(_DWORD *this, _DWORD *a2);
// void __usercall sub_41D8B0(int *a1@<ecx>, int a2@<edi>);
// int __userpurge sub_41DAD0@<eax>(int a1@<ecx>, _DWORD *a2, int *a3, int a4, int a5, int a6);
int __fastcall sub_41E6A0(_DWORD *a1, int a2);
int __thiscall sub_41E940(_DWORD **this, const char *a2);
int __thiscall sub_41E980(_DWORD *this);
int __thiscall sub_41F150(_DWORD *this, int a2, int a3);
void __thiscall sub_41F320(_DWORD *this);
signed int __thiscall sub_41F570(_DWORD *this, const void *a2, signed int a3);
int __thiscall sub_41F620(char *this, char a2);
void __thiscall sub_41F650(_DWORD *this);
int __thiscall sub_41F6B0(int this, int a2);
void __thiscall sub_4201E0(int this, int a2, int a3, int a4);
void __thiscall sub_4203D0(_DWORD *this, int a2);
int __thiscall sub_4209A0(_DWORD *this, int a2);
void __thiscall sub_421060(_DWORD *this, _DWORD *a2);
void __thiscall sub_421540(_DWORD *this, int a2);
int __thiscall sub_4216C0(_DWORD *this);
int __thiscall sub_4231F0(_DWORD *this);
_DWORD *__thiscall sub_423B90(_DWORD *this);
// int __usercall sub_423CA0@<eax>(int a1@<ecx>, unsigned int a2@<ebx>, unsigned int a3@<ebp>);
void __thiscall sub_4257B0(_DWORD *this);
void sub_425AF0();
int __thiscall sub_425B00(int this);
int __thiscall sub_425B20(_DWORD **this, int a2);
SHORT __thiscall sub_425BD0(int this, int a2, int a3);
int __fastcall sub_425CA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6);
void __thiscall sub_425D80(_DWORD *this, int a2, int a3, int a4);
int __fastcall sub_425EA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6);
int __fastcall sub_425FA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6);
int __fastcall sub_4260A0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6);
void __thiscall sub_426170(_DWORD *this);
int __fastcall sub_4266C0(int a1, int a2, int a3, int a4);
int __thiscall sub_426900(_DWORD *this, unsigned int a2, const void *a3);
int __thiscall sub_426B30(_BYTE *this, LPCSTR lpFileName);
int __thiscall sub_427980(_DWORD *this);
int __thiscall sub_427A90(_DWORD *this, const void *a2);
int __thiscall sub_427D60(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_427D90(int **this);
int __stdcall sub_427DB0(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
void __thiscall sub_427E10(_DWORD *this, int a2, int a3);
int __thiscall sub_427F10(_DWORD *this, int a2, int a3);
int __stdcall sub_427FD0(int a1, int a2);
int __thiscall sub_428010(_DWORD *this, int a2, int a3);
int __thiscall sub_428090(_DWORD **this, void *Src, int a3);
int __thiscall sub_4281F0(_DWORD **this, void *Src, int a3);
void __thiscall sub_428350(_DWORD *this, char a2, int a3);
int __thiscall sub_428400(_DWORD **this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall sub_4284A0(_DWORD **this, int a2, int a3);
void __fastcall sub_4284C0(int a1, int a2, char *a3);
int __thiscall sub_4284E0(int this, int a2, int a3, int a4);
int __thiscall sub_4285A0(_DWORD *this, int a2);
int __thiscall sub_428630(_DWORD *this, int a2);
int __thiscall sub_428650(_DWORD *this, char *a2, int a3, int a4, int a5, int a6);
int __thiscall sub_428660(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_428760(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_4287E0(_DWORD *this, int a2);
int __thiscall sub_428820(_DWORD *this, unsigned int a2, __int16 a3, const char *a4);
unsigned int __thiscall sub_428920(_DWORD *this, unsigned int a2, int a3);
int __thiscall sub_428950(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
__int16 __thiscall sub_4289E0(_DWORD *this, unsigned int a2);
int __thiscall sub_4289F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13);
int __thiscall sub_428A60(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_428A70(_DWORD *this, int a2);
int __thiscall sub_428A80(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_428C60(_DWORD *this, int a2, int a3);
int __thiscall sub_428C70(_DWORD **this, const char *a2, int a3);
FILE *__thiscall sub_428E20(int this, int a2, const char *a3, unsigned int a4, int a5);
int __thiscall sub_429B40(char *this, char *a2, const char *a3, const char *a4);
unsigned int __thiscall sub_429D10(_DWORD *this, unsigned int a2, int a3);
unsigned int __thiscall sub_429DB0(_DWORD *this, unsigned int a2, int a3);
void __stdcall sub_429E00(signed __int16 *a1, signed __int16 *a2, _DWORD *a3, int a4);
int __thiscall sub_429E80(_DWORD *this, signed __int16 *a2, int a3);
int __thiscall sub_429ED0(void **this, int a2, int a3, int a4, size_t Size);
int __stdcall sub_42A0B0(HWND hWnd, int); // idb
int __stdcall sub_42A180(const char *a1);
int __thiscall sub_42A280(char *this, int a2);
_DWORD *__fastcall sub_42A520(int a1, int a2, int a3, char *a4, int a5, int a6);
_DWORD *__thiscall sub_42A630(_DWORD *this, int a2);
int __thiscall sub_42A690(_DWORD *this);
// _DWORD *__usercall sub_42A6D0@<eax>(__int64 a1@<edx:eax>, int *a2@<ecx>);
int __stdcall sub_42B010(HWND hDlg, int, __int16, int); // idb
int __stdcall sub_42B1A0(HWND hWnd, int, int nResult, int); // idb
int __stdcall sub_42B210(HWND hWnd, int, int nResult, int); // idb
int __stdcall sub_42BA80(HWND hDlg, int, int nResult, int); // idb
int __stdcall sub_42BF90(HWND hWnd, int, int nResult, int); // idb
int __stdcall sub_42C4B0(HWND hWnd, int, int nResult, int); // idb
int __stdcall sub_42C5D0(HWND hWnd, int, int nResult, int); // idb
int __stdcall sub_42CCC0(HWND hWnd, int, int nResult, int); // idb
int __stdcall DialogFunc_0(HWND hWnd, int, int nResult, int); // idb
int __cdecl sub_42CEE0(double); // idb
_DWORD *__thiscall sub_42D0A0(_DWORD *this);
void __thiscall sub_42D0B0(_DWORD *this);
int __thiscall sub_42D110(_DWORD *this);
BYTE *__thiscall sub_42D5F0(_DWORD *this);
BOOL __thiscall sub_42D960(_DWORD *this);
WPARAM __thiscall sub_42DA10(_DWORD **this);
int __stdcall sub_42DB10(int *a1, int a2);
void __thiscall sub_42E380(HWND *this, char *Str1, int a3, int a4, size_t NewSize, int a6, int a7);
signed int __stdcall sub_42E560(_DWORD *a1, int a2);
CHAR *__cdecl sub_42E600(UINT uID);
void sub_42E660();
int __fastcall sub_42E9C0(void *a1);
int __stdcall sub_42EB00(HWND hWnd, int); // idb
FILE *sub_42EB90(char *Format, ...);
char *__cdecl sub_42EC60(int a1, _BYTE *a2, int a3);
void *__thiscall sub_42ECF0(void *Memory, char a2);
int __thiscall sub_42ED20(int *this);
FILE *__thiscall sub_42F440(_DWORD *this);
signed int __thiscall sub_42F650(_DWORD *this);
BOOL sub_42F850();
BOOL __thiscall sub_42FA10(char *this);
int __thiscall sub_42FBC0(char *this, const CHAR *a2);
void __thiscall sub_431020(char *this);
int __cdecl sub_432010(int a1);
FILE *sub_434540();
LRESULT __thiscall sub_434690(_DWORD *this, int a2, UINT Msg, WPARAM wParam, LPARAM lParam);
int __thiscall sub_435C50(_DWORD *this);
int __stdcall sub_435D40(int a1, UINT a2, WPARAM a3, LPARAM a4);
_DWORD *__thiscall sub_435D80(_DWORD *this, HINSTANCE hInstance, int a3, int a4, int a5);
int __thiscall sub_436910(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_436940(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_436960(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_436980(void *this, int a2, int a3, int a4, int a5);
char __cdecl sub_4369E0(int a1, signed int a2);
_DWORD *__thiscall sub_436A60(_DWORD *this);
int __thiscall sub_436B90(signed __int16 *this, int a2);
int __thiscall sub_436BE0(signed __int16 *this, int a2);
int __thiscall sub_436C30(signed __int16 *this, int a2, _DWORD *a3);
int __thiscall sub_436CB0(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_437070(_DWORD *this, int a2, int a3);
signed int __thiscall sub_437170(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_437320(_DWORD *this, int a2, int a3, int a4, _DWORD *a5);
int __thiscall sub_437440(_DWORD *this, int a2);
BOOL __fastcall sub_437760(int a1, int a2);
_DWORD *__thiscall sub_437800(_DWORD *this, int a2, int a3);
char __thiscall sub_437890(_DWORD *this, int a2);
_BYTE *__thiscall sub_437970(signed __int16 *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_437BE0(_DWORD *this, int a2, int a3, int a4);
void __thiscall sub_437DF0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_437ED0(_DWORD *this, BOOL a2);
signed __int16 *__fastcall sub_437F00(_DWORD *a1, int a2, signed __int16 *a3, int a4);
signed int __thiscall sub_438120(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_4382B0(_DWORD *this, int a2);
int __thiscall sub_4385B0(int (__stdcall ****this)(signed int));
int __thiscall sub_438720(_DWORD *this, int a2, int a3, signed int a4);
int __thiscall sub_4387B0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_438A30(_DWORD *this, int a2, int a3, int a4, _DWORD *a5);
int __thiscall sub_438B10(_DWORD *this, int a2);
int __thiscall sub_438BF0(_DWORD *this, int a2);
int __thiscall sub_438CB0(_DWORD *this, int a2);
int __stdcall sub_438D10(int a1);
signed int __thiscall sub_438D40(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_439040(_DWORD *this, int a2, int a3);
signed int __thiscall sub_4391D0(_DWORD *this);
void __thiscall sub_439290(_DWORD *this);
signed __int16 *__thiscall sub_439470(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_439570(_DWORD *this, int a2);
void __thiscall sub_4395B0(_DWORD *this, _DWORD *a2, int a3, int a4);
int __cdecl sub_4397A0(int a1, int a2);
void *__thiscall sub_4397D0(void *Memory, char a2);
void *__thiscall sub_439800(void *Memory, char a2);
void __thiscall sub_439830(int this, int a2, int a3, int a4);
int __thiscall sub_439A50(_DWORD *this, _DWORD *a2);
void *__thiscall sub_439A90(void *Memory, char a2);
int __fastcall sub_439AC0(int a1, int a2, int a3);
void *__thiscall sub_439B70(void *Memory, char a2);
_DWORD *__thiscall sub_439BA0(_DWORD *this, signed __int16 *a2);
void *__thiscall sub_439E00(void *Memory, char a2);
int __thiscall sub_439E30(_DWORD *this, int a2, int a3, int a4);
int __fastcall sub_439FA0(int a1, int a2, int a3);
int __fastcall sub_439FE0(_DWORD *a1, int a2, int a3);
void *__thiscall sub_43A0A0(void *Memory, char a2);
int __thiscall sub_43A0D0(_DWORD *this, int a2);
void __thiscall sub_43A3C0(void *Src);
_DWORD *__thiscall sub_43A760(void *Src);
int __thiscall sub_43AE00(_DWORD *this);
int __thiscall sub_43AF40(_DWORD **this);
int sub_43B350();
int __thiscall sub_43B390(_DWORD **this);
int __thiscall sub_43B3A0(int this, int a2, int a3, int a4);
int __thiscall sub_43B440(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall sub_43B510(_DWORD **this, int a2, int a3, int a4, int a5);
char __thiscall sub_43B890(_DWORD *this, _BYTE *a2);
int __thiscall sub_43B8E0(_DWORD *this);
int __thiscall sub_43BA00(_DWORD **this);
signed int __thiscall sub_43BFB0(_DWORD *this, char a2);
int __thiscall sub_43C050(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_43C370(_DWORD *this);
void *__thiscall sub_43C8D0(void *Memory, char a2);
signed int __cdecl sub_43C910(_DWORD *a1, int a2, int a3);
void __thiscall sub_43C9D0(_DWORD *this);
int __fastcall sub_43C9E0(int a1, int a2, _DWORD *a3);
signed int __stdcall sub_43CA40(int a1, int a2, _DWORD *a3);
_DWORD *__thiscall sub_43CE10(_DWORD *this);
BOOL __thiscall sub_43CE20(_DWORD *this, int a2, int a3);
void __thiscall sub_43CE80(_DWORD *this, int a2, int a3, int a4, _DWORD *a5);
int __thiscall sub_43D130(_DWORD *this);
_DWORD *__thiscall sub_43D1C0(_DWORD *this);
int __thiscall sub_43D280(_DWORD *this, _DWORD *a2);
int __thiscall sub_43D2C0(_DWORD *this, int a2, int a3);
void *__stdcall sub_43DC00(int a1, int a2);
void *__thiscall sub_43DC40(_DWORD **this, int a2, int a3, int a4);
int __thiscall sub_43DDA0(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_43DDC0(_DWORD **this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_43DF70(char *this, int a2, int a3, int a4, int a5);
int sub_43E680();
void __thiscall sub_43EB20(_DWORD *this, int a2);
int sub_43FD30();
int __thiscall sub_43FD40(_DWORD *this);
int sub_43FDB0();
HINSTANCE __thiscall sub_43FDC0(int this, HINSTANCE a2, int a3, HINSTANCE a4);
void sub_440810();
void *__thiscall sub_440820(void *Memory, char a2);
_DWORD *__thiscall sub_440850(_DWORD *this, int a2, _DWORD *a3);
int __thiscall sub_440950(int this);
int __thiscall sub_440AA0(_DWORD *this);
int __thiscall sub_440C30(_DWORD *this, _DWORD *a2);
int __thiscall sub_440E10(_DWORD **this, int a2, int a3, int a4, int a5, unsigned __int16 a6);
int __thiscall sub_440F20(_DWORD **this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_441050(_DWORD **this, int a2, int a3, unsigned __int16 a4);
_DWORD *__stdcall sub_4411F0(int a1, int a2);
void *__stdcall sub_441280(int a1, int a2);
int __thiscall sub_4412C0(int this, int a2, int a3, int a4);
int __thiscall sub_441350(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_4413A0(void *this);
int __thiscall sub_4413B0(_DWORD *this);
int __thiscall sub_441480(_DWORD *this, int a2);
int sub_4414B0();
void *__thiscall sub_4414C0(_DWORD *this);
int __thiscall sub_441750(_DWORD *this, int a2, int a3);
int __thiscall sub_441860(_DWORD *this);
int __thiscall sub_441940(_DWORD *this, int a2);
int __thiscall sub_441960(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_441AB0(_DWORD **this);
_DWORD *__thiscall sub_442490(_DWORD *this, int a2, int a3);
void *__thiscall sub_442550(void *Memory, char a2);
BOOL __thiscall sub_442640(char *this);
BOOL __thiscall sub_4426D0(char *this);
int __thiscall sub_442870(_DWORD *this, int a2, int a3);
int __thiscall sub_442A70(_DWORD *this, char a2);
void __thiscall sub_442E00(char *this, int a2);
int __thiscall sub_442FF0(_DWORD *this, int a2, int a3, int a4, int a5);
void *__thiscall sub_443080(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_443170(void *this);
int __thiscall sub_443180(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall sub_443260(_DWORD *this, int a2);
BOOL __thiscall sub_4432D0(_DWORD *this);
int __thiscall sub_443310(int *this);
int __thiscall sub_443700(_DWORD *this, char *a2, int a3);
int __thiscall sub_443EB0(_DWORD *this, char *a2, int a3);
int __thiscall sub_4440B0(int *this, _DWORD *a2, _DWORD *a3);
unsigned int __thiscall sub_444B00(char *this, char *Source);
FILE *__thiscall sub_444B70(char *this, char *Filename);
FILE *__thiscall sub_444C80(char *this, char *Filename);
signed int __thiscall sub_444CF0(_DWORD *this, signed int a2);
char *__stdcall sub_444D40(int a1, int a2, char *Source, int a4);
void __thiscall sub_444EA0(_DWORD *this);
char *__thiscall sub_445100(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_445780(_DWORD *this, _DWORD *a2);
int __thiscall sub_445D20(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_446010(int *this);
int __thiscall sub_4489F0(int *this, char *Str1, int a3, int a4, int a5, int a6);
int __thiscall sub_448F90(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_449010(_DWORD *this, int a2);
int __thiscall sub_4495B0(char *this, int a2);
char *__thiscall sub_449C40(char *this, char *Source, int a3);
char __thiscall sub_44D750(char *this, int a2, int a3);
int __thiscall sub_44E220(_DWORD *this, int a2);
int __thiscall sub_44E250(_DWORD *this, int a2, int a3);
int __thiscall sub_44E270(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_44E2C0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_44E320(_DWORD *this, int a2, int a3, int a4, int a5);
signed int sub_44E380();
int __thiscall sub_44E390(_DWORD *this, char *a2, int a3, int a4);
char *__thiscall sub_44E540(char *this, char *Str, int a3, int a4);
signed int __thiscall sub_44E630(_DWORD *this, int a2);
int __thiscall sub_44E680(_DWORD *this, int a2, int a3);
signed int __thiscall sub_44E790(_DWORD *this, int a2, int a3);
int __thiscall sub_44E910(_DWORD *this, int a2, int a3);
int __thiscall sub_44E920(_DWORD *this);
int __thiscall sub_44F250(_DWORD **this, int a2);
signed int __thiscall sub_44F270(_DWORD **this, int a2, int a3);
int __thiscall sub_44F3A0(_DWORD **this, int a2, int a3);
int __thiscall sub_44F3C0(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5);
int __thiscall sub_44F3E0(_DWORD **this, int a2, int a3, int a4);
int __thiscall sub_44F400(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_44F420(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_44F440(_DWORD **this, int a2, int a3, int a4, int a5);
char *__cdecl sub_44F480(char *Str, int a2);
signed int __thiscall sub_44F4F0(_DWORD *this, int a2, int a3, int a4);
HINSTANCE __thiscall sub_44F580(int this, int a2);
void *__thiscall sub_4534F0(_DWORD *this, int a2);
int __thiscall sub_453550(_DWORD **this);
void __thiscall sub_4535A0(int this, int a2, int a3, char *Str);
_DWORD *__thiscall sub_4545A0(_DWORD *this, char *a2, int a3, _DWORD *a4);
int __thiscall sub_454790(_DWORD *this, _DWORD *a2);
void *__thiscall sub_457890(_DWORD *this, int a2, int a3);
int __thiscall sub_457B70(int *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_457BD0(_DWORD *this, int a2, _DWORD *a3);
int __thiscall sub_457C90(_DWORD *this);
void *__thiscall sub_457D80(void *Memory, char a2);
int __stdcall sub_457DF0(int a1, __int16 a2);
int __thiscall sub_457E70(_DWORD *this);
int __thiscall sub_4583C0(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_4585C0(_DWORD *this, int a2, int a3);
int __thiscall sub_458760(_DWORD *this, int a2, int a3, int a4, int a5);
char *__thiscall sub_458820(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_458A80(int this, int a2, int a3);
int __thiscall sub_458DD0(int this, int a2, int a3);
int __thiscall sub_459720(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_459770(_DWORD *this, int a2, int a3, int a4, int a5);
// int __userpurge sub_459820@<eax>(__int64 a1@<edx:eax>, _DWORD *a2@<ecx>, int a3);
signed int __thiscall sub_4598D0(_DWORD *this);
int __thiscall sub_459900(_DWORD *this, int a2);
int __thiscall sub_459970(_DWORD *this);
signed int __thiscall sub_4599A0(_DWORD *this);
int __thiscall sub_4599D0(_DWORD *this, int a2);
BOOL sub_459A40();
void *__thiscall sub_459A80(_DWORD *this);
unsigned __int16 *__fastcall sub_459C50(_DWORD *a1, int a2, _DWORD *a3, int a4, int a5);
int __fastcall sub_45A5F0(_DWORD *a1, int a2, _DWORD *a3, int a4, int a5);
int __thiscall sub_45AC90(void *this, _DWORD *a2);
_DWORD *__thiscall sub_45BAF0(_DWORD *this, int a2);
void __thiscall sub_45BC20(_DWORD *this);
int __thiscall sub_45BCD0(_DWORD *this, int a2);
int __thiscall sub_45BCF0(_DWORD *this, int a2, unsigned int a3, int a4);
_DWORD *__fastcall sub_45C2C0(int a1, int a2, int a3, int a4);
int __thiscall sub_45C6D0(_DWORD *this);
int __fastcall sub_45C830(int a1, int a2, int a3, int a4, int a5, int a6);
unsigned int __thiscall sub_45CDD0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_45CE20(_DWORD *this, int a2);
void sub_45D060();
_DWORD *__thiscall sub_45D070(_DWORD *this);
int __thiscall sub_45D0B0(_DWORD *this, int a2);
int __thiscall sub_45D0F0(_DWORD *this, int a2);
char *__thiscall sub_45D170(_DWORD *this, signed int a2);
int __thiscall sub_45D1F0(_DWORD *this, char *Str2);
void __thiscall sub_45D3A0(char *this);
int __thiscall sub_45D4B0(_DWORD *this, _WORD *a2);
int __thiscall sub_45D5E0(int this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_45D710(int this);
int __thiscall sub_45D790(int this);
int __thiscall sub_45D810(int this, _DWORD *a2);
void *__thiscall sub_45DB80(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_45DCA0(_DWORD *this);
BOOL __thiscall sub_45DCD0(_DWORD *this);
__int16 __fastcall sub_45DD20(signed int a1, int a2, _DWORD *a3);
int __thiscall sub_45DF00(_DWORD *this, int a2);
int __fastcall sub_45DF10(_DWORD *a1, int a2, int a3);
void sub_45DFF0();
int __cdecl sub_45E000(_DWORD *a1, int *a2, char a3);
int __thiscall sub_45E170(_DWORD *this);
int __thiscall sub_45E300(_DWORD *this, int a2);
_DWORD *__thiscall sub_45E350(_DWORD *this);
_DWORD *__thiscall sub_45E4F0(_DWORD *this, const void *a2, int a3);
void __thiscall sub_45E750(_DWORD *this);
int __thiscall sub_45E7B0(_DWORD *this, int a2, int a3);
int __thiscall sub_45E8E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_45E950(void *Dst);
void __thiscall sub_45E9C0(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_45EB40(void *this);
int __thiscall sub_45F000(char *this, int a2);
int __cdecl sub_45F0D0(int a1, int a2);
int __cdecl sub_45F130(int a1, int a2);
int __cdecl sub_45F1C0(signed __int16 *a1, int a2, int a3, int a4, int a5);
void __thiscall sub_45F320(_DWORD *this);
int __thiscall sub_45F3B0(_DWORD *this, int a2);
void __thiscall sub_45FBF0(signed int *this, _DWORD *a2);
void __thiscall sub_45FEA0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_460120(signed int *this);
void sub_460210();
signed int __thiscall sub_460220(int *this, int a2);
_DWORD *__thiscall sub_460F00(_DWORD *this, int a2, int a3, int a4, int a5, int a6, signed int a7, signed int a8, int a9, int a10, int a11, int a12, unsigned int a13, int a14, int a15, int a16, int a17, int a18);
void *__thiscall sub_461790(void *Memory, char a2);
int __thiscall sub_4618B0(_DWORD *this);
int __thiscall sub_4618E0(_DWORD *this, int a2);
int __thiscall sub_461910(_DWORD *this);
int __thiscall sub_461950(_DWORD **this, int *a2);
void __thiscall sub_461AF0(int *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_461C40(_DWORD *this, int a2, int a3, unsigned __int16 a4);
void __thiscall sub_462480(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_462680(void *this);
int __thiscall sub_462690(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_462770(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_4627C0(_DWORD *this, int a2);
int __thiscall sub_462870(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_462A30(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
void __thiscall sub_462BC0(int *this, int a2);
void __thiscall sub_463640(_DWORD *this);
signed int sub_4636A0();
signed int sub_4636B0();
int __thiscall sub_4636D0(_DWORD *this);
_DWORD *__thiscall sub_463720(_DWORD *this, _DWORD *a2);
int __thiscall sub_463750(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_463CF0(void *this, int a2, int a3, int a4, int a5);
signed int __thiscall sub_463D10(int this, int a2, int a3, int a4);
int __thiscall sub_463E30(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_463F50(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_463FB0(_DWORD *this, int a2);
int __thiscall sub_4640F0(int *this);
int __thiscall sub_464740(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_4647C0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall sub_4648D0(_DWORD *this, char *a2, const char *a3);
int __thiscall sub_464AE0(_DWORD *this);
int __thiscall sub_464F20(_DWORD *this, _DWORD *a2);
int __thiscall sub_465240(_DWORD *this, int a2, int a3);
int __thiscall sub_465340(const char *this, _DWORD *a2, int a3);
char *__thiscall sub_465B30(_DWORD *this, char *a2, int a3);
int __thiscall sub_465FF0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_466080(int this, int a2, int a3, int a4);
int __thiscall sub_466130(void *this);
int __thiscall sub_466140(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_4661B0(int this, int a2);
int __thiscall sub_4661F0(char *this, const char *a2);
char *__stdcall sub_466330(int File, char *Str);
int __stdcall sub_466450(FILE *File, int a2);
int __cdecl sub_466490(char *EndPtr, int); // idb
_DWORD *__thiscall sub_466630(_DWORD *this, int a2, _DWORD *a3, int a4);
int __thiscall sub_466750(_DWORD *this);
int __thiscall sub_466840(_DWORD *this);
void __thiscall sub_466FB0(_DWORD *this, int a2, int a3);
FILE *__thiscall sub_467000(_DWORD *this, int a2, int a3, char *Filename);
_DWORD *__thiscall sub_467400(_DWORD *this);
void *__thiscall sub_4674E0(void *Memory, char a2);
char __thiscall sub_467510(char *this, int a2, int a3, int a4, int a5);
void __thiscall sub_4679B0(_DWORD *this);
_DWORD *__thiscall sub_4679C0(_DWORD *this, int a2);
int __thiscall sub_467A30(_DWORD *this);
int __thiscall sub_467A50(_DWORD *this, int a2);
int __thiscall sub_467A70(int *this, int a2);
_DWORD *__thiscall sub_467AE0(_DWORD *this, int a2);
bool __thiscall sub_467B40(_DWORD *this);
bool __thiscall sub_467B50(_DWORD *this);
signed int __thiscall sub_467B80(char *this, int a2);
int __thiscall sub_467BC0(_DWORD *this, int a2, int a3);
int __thiscall sub_467BE0(_DWORD *this, int a2, int a3);
char *__thiscall sub_467C00(char *this);
signed int __fastcall sub_467F40(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
void __thiscall sub_4680E0(_DWORD *this, signed int a2);
void __thiscall sub_4689D0(int this);
// void __userpurge sub_468C90(int a1@<ecx>, int a2@<ebp>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7, int a8, int a9, unsigned __int16 a10);
void __fastcall sub_468DD0(_DWORD *a1, int a2, int a3, int a4, int a5);
signed int __thiscall sub_4692B0(int this, int *a2, int *a3, int *a4);
_DWORD *__thiscall sub_4693F0(_DWORD *this);
int __thiscall sub_469520(_DWORD *this, int a2, int a3, int a4, int a5);
int __fastcall sub_469570(int a1, int a2, int a3);
int __thiscall sub_469640(_DWORD *this, int a2);
int __thiscall sub_469760(int *this, int a2, __int16 a3, int a4);
int __thiscall sub_4697A0(int *this, int a2, int a3, int a4);
void *__thiscall sub_4697E0(_DWORD *this);
void __thiscall sub_469820(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
signed int __thiscall sub_469830(int *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall sub_4698C0(void **this);
signed int sub_469910();
int __thiscall sub_469920(_DWORD *this);
int __thiscall sub_46A8F0(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5);
signed int __thiscall sub_46A980(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_46AA50(_DWORD *this);
signed int __thiscall sub_46AD50(_DWORD *this);
int __thiscall sub_46B080(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_46B110(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_46B1B0(_DWORD **this, int a2);
int __thiscall sub_46B210(_DWORD *this, int a2, int a3);
int __thiscall sub_46B440(_DWORD *this);
void __thiscall sub_46B560(_DWORD *this, int a2);
int __thiscall sub_46B8B0(_DWORD *this, _DWORD *a2);
signed int __thiscall sub_46C180(_DWORD *this, signed int a2, int a3);
int __thiscall sub_46C750(_DWORD *this, int a2, int a3, int a4, void *a5);
int __thiscall sub_46CB00(const char *this, int a2);
const char *__thiscall sub_46CC80(char *this, int a2, int a3, int a4);
void *__thiscall sub_46CF60(void *Memory, char a2);
_BYTE *__cdecl sub_46CF90(const char *a1);
int __thiscall sub_46CFF0(_DWORD *this);
void __thiscall sub_46D040(_DWORD *this);
_DWORD *__thiscall sub_46D1A0(_DWORD *this, char *Filename);
void *__thiscall sub_46D320(void *this, int a1, int a2, int a3);
BOOL __thiscall sub_46D370(_DWORD *this, int a2);
int __thiscall sub_46D4F0(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_46D600(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall sub_46D850(void *Memory, char a2);
int __cdecl sub_46D880(int a1, int a2, int a3, int a4);
char *__thiscall sub_46D9D0(char *this, _DWORD *a2);
_DWORD *__thiscall sub_46DA30(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_46DAC0(_DWORD *this, int a2);
int __thiscall sub_46DB10(_DWORD *this);
int __thiscall sub_46DB60(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_46DCA0(_DWORD *this, int a2);
void *__thiscall sub_46DCF0(int this);
int __fastcall sub_46DD60(int a1, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_46DED0(_DWORD *this, int a2, int a3);
signed int __thiscall sub_46DFD0(char *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
signed int __thiscall sub_46E2F0(char *this, _DWORD *a2, int a3, int a4, _DWORD *a5, _DWORD *a6, _DWORD *a7, int a8, int a9);
int __thiscall sub_46E5A0(_DWORD *this);
int __thiscall sub_46E5E0(_DWORD *this, int a2, int a3, int a4, int a5);
void *__thiscall sub_46E650(_DWORD *this, int a2, int a3, int a4);
void *__thiscall sub_46E6F0(_DWORD *this);
int __thiscall sub_46E770(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_46E7C0(_DWORD *this);
int __thiscall sub_46E7F0(_DWORD *this);
int sub_46E8A0();
signed int sub_46E8B0();
int __thiscall sub_46E940(_DWORD *this, int a2, int a3, int a4);
int sub_46EA70();
int __thiscall sub_46EA90(_DWORD *this);
unsigned int __thiscall sub_46EB20(_DWORD *this);
BOOL __thiscall sub_46EC00(int this);
int __thiscall sub_46EC80(_DWORD *this);
int __thiscall sub_46EDB0(_DWORD *this);
int __thiscall sub_46EE50(_DWORD *this);
signed int __thiscall sub_46EEC0(_DWORD *this, int a2, int a3);
char *__thiscall sub_46EF70(_DWORD *this, char *Dest);
int __thiscall sub_46F0F0(_DWORD *this, int a2);
int __thiscall sub_46F110(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_46F150(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __thiscall sub_46F1B0(signed int *this);
int __thiscall sub_46F240(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_46F280(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_46F2C0(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_46F2F0(_DWORD *this);
int __thiscall sub_46F520(_DWORD *this);
int __thiscall sub_46F590(_DWORD *this);
signed int sub_46F780();
void *__thiscall sub_46F790(_DWORD *this);
int __thiscall sub_46F8A0(_DWORD *this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_46F8D0(_DWORD *this);
signed int __thiscall sub_46F8F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
int __thiscall sub_46FD50(_DWORD *this, double a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall sub_46FFA0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_470430(_DWORD *this);
int __thiscall sub_470440(_DWORD *this, unsigned int a2);
int __thiscall sub_470730(_DWORD *this, int a2);
void __thiscall sub_470960(_DWORD *this, int a2, int a3, int a4);
void __thiscall sub_470AC0(_DWORD *this, int a2, int a3, int a4);
_WORD *__thiscall sub_470E10(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_4714A0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_471570(_DWORD *this);
bool __thiscall sub_471730(_DWORD *this);
_DWORD *__thiscall sub_471760(_DWORD *this, int a2);
_DWORD *__thiscall sub_471870(_DWORD *this, int a2);
_DWORD *__thiscall sub_471970(_DWORD *this, int a2);
_DWORD *__thiscall sub_471A70(_DWORD *this, int a2);
int __thiscall sub_471AC0(_DWORD *this);
int __thiscall sub_471AE0(_DWORD *this);
int __thiscall sub_471B40(_DWORD *this);
BOOL __thiscall sub_471B50(_DWORD *this);
int __thiscall sub_471C10(_DWORD *this);
int __thiscall sub_471C70(signed __int16 *this);
int __thiscall sub_471F50(_DWORD *this, int a2, int a3, int a4, int a5);
unsigned int __thiscall sub_472060(_DWORD *this);
int __thiscall sub_472170(_DWORD *this);
int __thiscall sub_472180(_DWORD *this);
int __thiscall sub_472190(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_4722D0(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
int __thiscall sub_472910(_DWORD *this);
signed int __thiscall sub_472960(_DWORD *this, int *a2, int a3);
signed int __thiscall sub_472C80(_DWORD *this, int a2, int a3, void *a4, int a5, int a6);
void __thiscall sub_472F90(_DWORD *this, void *Src, int a3);
BOOL __thiscall sub_472FE0(_DWORD *this);
void __thiscall sub_473050(_DWORD *this, int a2, int a3, int a4, int a5, signed int a6, int a7, int a8);
int __thiscall sub_473610(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_473B40(_DWORD *this, int a2, int a3);
int __thiscall sub_473BD0(_DWORD *this, int a2, signed int a3, int a4, int a5);
int __thiscall sub_4740B0(_DWORD *this, int a2, signed int a3, int a4, int a5);
signed int __stdcall sub_474530(int a1);
void *__thiscall sub_474AE0(_DWORD *this, int a2);
int __cdecl sub_474B40(_BYTE *a1, unsigned __int16 *a2);
int __cdecl sub_474CA0(_DWORD *a1, int *a2, char a3);
signed int __thiscall sub_474DE0(_DWORD *this, int a2, int a3);
signed int __thiscall sub_474F90(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_475340(_DWORD *this, int a2, int a3, int a4);
void *__thiscall sub_475500(_DWORD *this, int a2);
_DWORD *__fastcall sub_475580(_DWORD *a1, int a2, int a3, int a4);
_DWORD *__thiscall sub_475900(void *Memory, char a2);
int __thiscall sub_475960(int *this, int a2);
int *__thiscall sub_475B30(int **this, signed int a2, __int16 a3, int a4, int a5, int a6);
int __thiscall sub_475EF0(_WORD *this, int a2);
_DWORD *__thiscall sub_475F40(_DWORD *this, signed __int16 *a2, int a3);
signed int __thiscall sub_476000(_DWORD *this);
int __thiscall sub_476070(_DWORD *this);
void __thiscall sub_4760A0(_DWORD *this, int a2, int a3, int a4);
void __thiscall sub_4761B0(_DWORD *this);
int __thiscall sub_4762F0(_DWORD *this, int a2, int a3, int a4);
void __thiscall sub_4763C0(_DWORD *this);
int __thiscall sub_476530(_DWORD *this);
void __thiscall sub_476580(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_476E00(_DWORD *this);
int __thiscall sub_476E10(_DWORD *this, int a2);
int __thiscall sub_476F50(_DWORD *this, int a2, int *a3, int *a4, int *a5, int *a6, signed int *a7, int *a8);
int __fastcall sub_477B90(_DWORD *a1, int a2, int a3, signed int a4);
int __thiscall sub_478160(signed __int16 *this, signed int a2, int a3, int a4, int a5, int a6, int a7);
void sub_4786F0();
_DWORD *__thiscall sub_478700(_DWORD *this, int a2, int a3, signed __int16 *a4);
void *__thiscall sub_478D70(void *Memory, char a2);
int __thiscall sub_478DA0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_478E70(_DWORD *this);
int __thiscall sub_479B30(_DWORD *this, int a2);
int __thiscall sub_47AB10(_DWORD *this);
int __thiscall sub_47AB50(_DWORD *this, signed __int16 *a2, int a3);
int __thiscall sub_47AC80(_DWORD *this, int a2, int a3, int a4, int a5, _DWORD *a6, _DWORD *a7, _DWORD *a8);
int __thiscall sub_47ADC0(_DWORD *this, int a2);
int __thiscall sub_47AE10(_DWORD *this);
int __thiscall sub_47AE90(_DWORD *this);
int __thiscall sub_47AEE0(_DWORD *this);
int __thiscall sub_47AF30(_DWORD *this);
int __thiscall sub_47AF50(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_47B020(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_47B090(_DWORD *this);
void __thiscall sub_47B0C0(_DWORD *this);
int __thiscall sub_47B1E0(_DWORD *this);
void *__thiscall sub_47B240(_DWORD *this);
const char *__thiscall sub_47B910(_DWORD *this);
void *__thiscall sub_47B9F0(_DWORD *this, int a2);
int __fastcall sub_47BC30(_DWORD *a1, int a2, int a3, int a4);
_DWORD *__thiscall sub_47BFA0(_DWORD *this, signed int a2, int a3, int a4, signed __int16 *a5, unsigned int a6, int a7);
int __thiscall sub_47C190(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_47C7B0(_DWORD *this, int a2, int a3, int a4);
void *__thiscall sub_47CB10(void *Memory, char a2);
int __thiscall sub_47CB60(_DWORD *this, int a2, int a3);
int __thiscall sub_47CBF0(_DWORD *this, signed __int16 *a2, int a3);
int __thiscall sub_47CC30(_DWORD *this);
signed int __thiscall sub_47CC90(_DWORD *this);
int sub_47CCD0();
int sub_47CCE0();
int __thiscall sub_47CCF0(_DWORD *this);
SHORT __thiscall sub_47CD30(_DWORD *this);
int sub_47CDD0();
void __thiscall sub_47CDE0(_DWORD *this);
int __thiscall sub_47CEE0(_DWORD *this, int a2);
int __thiscall sub_47D1E0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_47D280(_DWORD *this, int a2, int a3, int a4);
signed int __thiscall sub_47D320(_DWORD *this);
int __fastcall sub_47D460(int a1, int a2, int a3, int a4);
int sub_47D5B0();
int __thiscall sub_47D5C0(_DWORD *this);
_DWORD *__thiscall sub_47D6A0(_DWORD *this, int a2, int a3, signed __int16 *a4);
void *__thiscall sub_47D740(void *Memory, char a2);
signed int __thiscall sub_47D790(_DWORD *this, int a2);
int __thiscall sub_47D8A0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_47DF40(_DWORD *this);
int __thiscall sub_47E170(_DWORD *this, signed __int16 *a2, int a3);
int __thiscall sub_47E2B0(_DWORD *this, void *Src, int a3);
int __thiscall sub_47E2F0(_DWORD *this, signed int a2, int a3, int a4, signed __int16 *a5, int a6, int a7);
void *__thiscall sub_47E550(_DWORD *this);
_DWORD *__thiscall sub_47E6A0(_DWORD *this, int a2, int a3, int a4);
void *__thiscall sub_47E890(void *Memory, char a2);
int __thiscall sub_47E8E0(_DWORD *this, _DWORD *a2);
signed int sub_47F010();
int __thiscall sub_47F020(_DWORD *this, int a2, int a3);
int __thiscall sub_47F0A0(_DWORD *this);
int __thiscall sub_47F4C0(char *this, int a2, int a3);
int __thiscall sub_47F6A0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_47F730(int this, int a2, int a3, int a4);
int __thiscall sub_47F7C0(char *this, int a2, int a3, int a4, int a5);
int __thiscall sub_47F900(void *this);
int __thiscall sub_47F910(_DWORD **this, int a2, int a3, int a4, int a5);
int __thiscall sub_47F970(_DWORD **this);
int __thiscall sub_47F980(_DWORD *this);
_DWORD *__thiscall sub_47FA60(_DWORD *this, char *Filename, int a3, int a4, int a5);
void *__thiscall sub_47FCE0(void *Memory, char a2);
void __cdecl sub_47FD20(int a1, int a2, int *a3, int a4, int a5, int a6, int a7);
void sub_480060();
// HRESULT __stdcall DirectDrawCreate(GUID *lpGUID, LPDIRECTDRAW *lplpDD, IUnknown *pUnkOuter);
// ULONG __stdcall GetAdaptersInfo(PIP_ADAPTER_INFO AdapterInfo, PULONG SizePointer);
void __thiscall sub_480310(_DWORD *this);
int __thiscall sub_480320(_DWORD *this);
void __thiscall sub_480330(_BYTE *this);
int __thiscall sub_480340(_DWORD *this);
void *__thiscall sub_480360(void *Memory, char a2);
char __thiscall sub_480390(SOCKET **this, u_short hostshort, int a3, int a4, char *cp);
int __thiscall sub_4804E0(SOCKET **this);
int __thiscall sub_480500(_DWORD *this, char *buf, int len, int a4, int a5);
bool __thiscall sub_4805D0(void *this, char *buf, int len, int a4, u_short hostshort);
int __thiscall sub_480640(SOCKET **this, int a2, int a3, int a4, int a5);
char __thiscall sub_4806A0(_DWORD *this, _DWORD *a2);
int __thiscall sub_480700(_DWORD *this);
bool __stdcall sub_480760(int a1, char *cp);
BOOL __stdcall sub_4807B0(_DWORD *a1, char a2);
struct _RTL_CRITICAL_SECTION **__thiscall sub_4808A0(struct _RTL_CRITICAL_SECTION **this);
void __thiscall sub_4808C0(LPCRITICAL_SECTION *this);
void __thiscall sub_4808E0(LPCRITICAL_SECTION *this);
void __thiscall sub_4808F0(LPCRITICAL_SECTION *this);
int __stdcall sub_480900(_DWORD *a1);
int __thiscall sub_480930(void (***this)(void));
char __thiscall sub_480960(_DWORD *this);
// int __thiscall unknown_libname_1(_DWORD); weak
_DWORD *__thiscall sub_480980(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_480990(_DWORD *this, _DWORD *a2);
char *__thiscall sub_4809A0(unsigned __int8 *this, char *Dest, int a3);
bool __thiscall sub_480A30(_DWORD *this, _DWORD *a2);
int __thiscall sub_480AE0(void *this);
DWORD __thiscall sub_480AF0(_DWORD *this);
void __thiscall sub_480B50(LPCRITICAL_SECTION *this);
_DWORD *__thiscall sub_480BD0(_DWORD *this);
_DWORD *__thiscall sub_480C40(_DWORD *this);
void __thiscall sub_480D30(_DWORD *this);
void __thiscall sub_480DB0(LPCRITICAL_SECTION *this);
_DWORD *__thiscall sub_480E10(_DWORD *this);
void *__thiscall sub_480E80(void *Memory, char a2);
void *__thiscall sub_480EA0(void *Memory, char a2);
void *__thiscall sub_480F00(void *Memory, char a2);
void *__thiscall sub_480F50(void *Memory, char a2);
int __cdecl sub_480F70(__int16 a1, __int16 a2);
int __cdecl sub_480F90(int a1, int a2);
int __cdecl sub_480FB0(int *a1);
int __cdecl sub_480FE0(_BYTE *a1, int a2, int a3);
int __cdecl sub_481090(int a1, int a2, int a3);
signed int __cdecl sub_481100(_BYTE *a1, unsigned int a2);
signed int __cdecl sub_481160(unsigned __int8 *a1, int *a2);
_DWORD *__cdecl sub_4811C0(void *Src, size_t Size, void *a3, size_t a4);
int __thiscall sub_481570(char *this);
int __thiscall sub_481580(char *this);
int __thiscall sub_481590(_DWORD *this);
int __thiscall sub_4815A0(_DWORD *this, int a2);
int __thiscall sub_4815F0(char *this);
int __thiscall sub_481600(char *this);
int __thiscall sub_481610(_DWORD *this);
int __thiscall sub_481620(_DWORD *this, int a2);
int __thiscall sub_481670(char *this);
int __thiscall sub_481680(char *this);
int __thiscall sub_481690(_DWORD *this);
int __thiscall sub_4816A0(_DWORD *this, int a2);
int __thiscall sub_4816F0(char *this);
int __thiscall sub_481700(char *this);
int __thiscall sub_481710(_DWORD *this);
int __thiscall sub_481720(_DWORD *this, int a2);
void *__thiscall sub_481770(void *Memory, char a2);
void *__thiscall sub_481790(void *Memory, char a2);
void *__thiscall sub_4817B0(void *Memory, char a2);
void *__thiscall sub_4817D0(void *Memory, char a2);
signed int __cdecl sub_4817F0(_BYTE *a1, __int64 a2);
int __cdecl sub_481880(unsigned __int8 *a1);
signed int __cdecl sub_481910(_BYTE *a1, int a2);
int __cdecl sub_481970(_BYTE *a1);
_BYTE *__cdecl sub_481A00(_BYTE *a1, char *a2, int a3);
void __thiscall sub_481A90(LPCRITICAL_SECTION *this);
void __thiscall sub_481AC0(LPCRITICAL_SECTION *this);
int __thiscall sub_481B90(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5);
int __thiscall sub_481C40(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5);
int __thiscall sub_481CF0(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5);
int __thiscall sub_481DA0(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5);
bool __stdcall sub_481E50(_BYTE *a1);
int __thiscall sub_481E80(LPCRITICAL_SECTION *this);
_DWORD *__thiscall sub_481F90(LPCRITICAL_SECTION *this, _DWORD *a2);
void __thiscall sub_4820E0(LPCRITICAL_SECTION *this, char a2);
void __thiscall sub_482110(LPCRITICAL_SECTION *this);
void __thiscall sub_482190(LPCRITICAL_SECTION *this, int a2);
void __thiscall sub_4822E0(_DWORD *this, void *Src, size_t Size);
int __thiscall sub_482350(LPCRITICAL_SECTION *this);
unsigned __int64 __thiscall sub_4823C0(_DWORD *this);
unsigned __int64 __thiscall sub_4824B0(_DWORD *this);
int __stdcall sub_4825A0(int, int, int); // weak
int __stdcall sub_4825C0(int, int, int); // weak
int __stdcall sub_4825E0(int, int, int); // weak
int __stdcall sub_482600(int, int, int); // weak
int __stdcall sub_482620(int, int, int); // weak
int __stdcall sub_482640(int, int, int); // weak
int __stdcall sub_482660(int, int, int); // weak
int __stdcall sub_4826D0(int, int, int); // weak
int __stdcall sub_482740(int, int, int); // weak
int __thiscall sub_4827C0(_DWORD *this, int *a2, int *a3, int a4);
int __thiscall sub_482840(_DWORD *this);
void __thiscall sub_4829F0(LPCRITICAL_SECTION *this, int a2, void *Dst);
int __cdecl sub_482A90(int a1);
void __thiscall sub_482D50(LPCRITICAL_SECTION *this);
void __thiscall sub_482DD0(LPCRITICAL_SECTION *this);
void __thiscall sub_482E50(LPCRITICAL_SECTION *this, int a2, int a3);
void __thiscall sub_482EE0(LPCRITICAL_SECTION *this, int a2, int a3, int a4);
void *__thiscall sub_482F70(_DWORD *this, int a2, char a3, int a4);
void __thiscall sub_483180(LPCRITICAL_SECTION *this);
void __thiscall sub_483270(_DWORD *this, void *Src, signed int Size);
void __thiscall sub_483360(_DWORD *this, void *Src, size_t Size, char a4);
void __thiscall sub_483560(LPCRITICAL_SECTION *this);
void __thiscall sub_483640(_DWORD *this, int a2, __int16 a3);
int __thiscall sub_4836C0(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5, char a6);
void __thiscall sub_483870(LPCRITICAL_SECTION *this, int a2, int a3);
char __thiscall sub_483A00(_DWORD *this, int a2, int a3, size_t Size, void *a5, size_t a6);
void __thiscall sub_483CF0(_DWORD *this, void *Src, size_t Size, int a4);
void __thiscall sub_483D60(LPCRITICAL_SECTION *this, int a2, int a3);
void __thiscall sub_483DF0(_DWORD *this);
char __thiscall sub_483E60(LPCRITICAL_SECTION *this, int a2, int a3, size_t Size);
char __thiscall sub_483F30(LPCRITICAL_SECTION *this, int a2, int a3);
void __thiscall sub_484010(int this, __int64 a2);
void __thiscall sub_484920(int this);
int __thiscall sub_485030(void (***this)(void), void **a2);
void __thiscall sub_485440(LPCRITICAL_SECTION *this, char a2);
int *__thiscall sub_485510(int *this, int a2, char a3, int *a4, int a5);
int *__thiscall sub_485640(int *this, int a2, void **a3);
int __thiscall sub_485840(void (***this)(void));
int __thiscall sub_485930(int *this, int a2);
int __thiscall sub_485BB0(int *this, int a2, int a3, int a4);
void __thiscall sub_485C50(LPCRITICAL_SECTION *this, int a2, unsigned int a3, int a4);
void __thiscall sub_485CB0(int this);
void *__thiscall sub_485CD0(void *Memory, char a2);
void __thiscall sub_485CF0(int this, __int64 a2);
int __cdecl sub_485DA0(int a1);
int __stdcall sub_485E20(char a1, int a2);
size_t __stdcall sub_485E90(int a1, void *Dst, void *Src, size_t Size);
size_t __stdcall sub_485EB0(int a1, void *Dst, void *Src, size_t Size);
size_t __stdcall sub_485ED0(int a1, void *Dst, void *Src, size_t Size);
size_t __stdcall sub_485EF0(int a1, void *Dst, void *Src, size_t Size);
void __thiscall sub_486010(LPCRITICAL_SECTION *this);
int __thiscall sub_486280(LPCRITICAL_SECTION *this);
void __thiscall sub_486440(int this, int a2, int a3, char a4, int a5);
int __thiscall sub_4864F0(_DWORD *this, char a2, int a3);
_DWORD *__thiscall sub_486660(_DWORD *this, void (***a2)(void), int a3);
void __thiscall sub_486770(LPCRITICAL_SECTION *this);
void __thiscall sub_486880(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2);
void __thiscall sub_486B10(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION *a2);
int __thiscall sub_486CF0(LPCRITICAL_SECTION *this, char a2, int a3);
int __thiscall sub_486E10(LPCRITICAL_SECTION *this, unsigned int a2);
_DWORD *__thiscall sub_486EE0(int this, void *Src, size_t Size, void *a4, size_t a5);
void __thiscall sub_486FE0(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2);
void __thiscall sub_487040(LPCRITICAL_SECTION *this, int a2);
void __thiscall sub_487070(LPCRITICAL_SECTION *this, LONG a2);
_DWORD *__thiscall sub_4872F0(_DWORD *this, void *Src, size_t Size, char a4, int a5, int a6, int a7);
void __thiscall sub_487370(int this);
_DWORD *__thiscall sub_487400(_DWORD *this, int a2);
void __thiscall sub_487A70(LPCRITICAL_SECTION *this, int a2);
int *__thiscall sub_487B20(LPCRITICAL_SECTION *this, char *Source, int a3, int a4);
int __thiscall sub_487CB0(int this);
void __thiscall sub_487F10(LPCRITICAL_SECTION *this, void *Src, size_t Size, char a4, int a5);
int __thiscall sub_4881B0(LPCRITICAL_SECTION *this);
int __thiscall sub_488260(LPCRITICAL_SECTION *this);
void __thiscall sub_488300(int this, int a2, void *Src, size_t Size);
void __thiscall sub_488380(int this, LPCRITICAL_SECTION *a2);
void __thiscall sub_4883D0(int this, LPCRITICAL_SECTION *a2);
void __thiscall sub_488420(int this, int a2, void *Src, size_t Size);
void __thiscall sub_4884A0(int this, int a2, void *Src, size_t Size, int a5);
void __thiscall sub_488530(int this, int a2);
void __thiscall sub_488620(LPCRITICAL_SECTION *this);
void __thiscall sub_4889A0(void *this, char **a2);
void __thiscall sub_488C00(int this, void *Memory);
int __thiscall sub_488CA0(void (***this)(void), signed int a2);
char __thiscall sub_488ED0(void (***this)(void), signed int a2, char a3);
int __thiscall sub_4894A0(void *this);
int __thiscall sub_489580(_DWORD *this, int a2);
void __thiscall sub_489670(_DWORD *this);
int __thiscall sub_489720(_DWORD *this, int a2);
int __thiscall sub_489800(_DWORD *this, int a2);
signed int __thiscall sub_489A00(signed int *this, int a2, unsigned int a3);
char __thiscall sub_489A70(int *this, int a2);
int __thiscall sub_489B00(_DWORD *this, unsigned int a2);
signed int __thiscall sub_489BA0(signed int *this, int a2, unsigned int a3);
char __thiscall sub_489C10(int *this, int a2);
int __thiscall sub_489CA0(_DWORD *this, unsigned int a2);
void *__thiscall sub_489D50(void *Memory, char a2);
void *__thiscall sub_489D70(void *Memory, char a2);
void *__thiscall sub_489D90(void *Memory, char a2);
void *__thiscall sub_489DB0(void *Memory, char a2);
int __thiscall sub_489E20(_DWORD *this, int a2);
void __thiscall sub_489E80(_DWORD *this, int a2);
void __thiscall sub_489F90(_DWORD *this, int a2);
void __thiscall sub_48A0A0(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2);
void __thiscall sub_48A220(_DWORD *this);
int __thiscall sub_48A2A0(int *this, int a2);
void *__thiscall sub_48A3D0(void *Memory, char a2);
void __thiscall sub_48A3F0(_DWORD *this);
void __thiscall sub_48A470(_DWORD *this);
void *__thiscall sub_48A540(void *Memory, char a2);
char sub_48A560();
int __thiscall sub_48A570(_DWORD *this);
int __thiscall sub_48A580(_DWORD *this);
int __thiscall sub_48A590(_DWORD *this);
int __thiscall sub_48A5A0(_DWORD *this, int a2);
void __thiscall sub_48A5B0(int *this, void *Src, size_t Size, char a4);
int __thiscall sub_48A650(_DWORD *this);
int __thiscall sub_48A660(_DWORD *this);
int __thiscall sub_48A670(_DWORD *this);
char sub_48A690();
void __thiscall sub_48A6A0(_DWORD *this);
int __thiscall sub_48A6B0(_DWORD *this);
int __thiscall sub_48A6C0(_DWORD *this);
int __thiscall sub_48A6D0(_DWORD *this);
int __thiscall sub_48A6E0(_DWORD *this);
int __thiscall sub_48A6F0(_DWORD *this, int a2);
void *__thiscall sub_48A700(int this, void *Src, size_t Size, void *a4, size_t a5);
_DWORD *__thiscall sub_48A750(_DWORD *this);
void __thiscall sub_48A770(_DWORD *this);
_DWORD *__thiscall sub_48A780(_DWORD *this, void *Src, int Size);
void __thiscall sub_48A810(void *this);
int __thiscall sub_48A8A0(_DWORD *this);
struct _RTL_CRITICAL_SECTION_DEBUG *__thiscall sub_48A960(struct _RTL_CRITICAL_SECTION_DEBUG *this, LPCRITICAL_SECTION *a2, size_t Size);
void __thiscall sub_48A9F0(_DWORD *this);
void __thiscall sub_48AA60(void *this);
void *__thiscall sub_48AAE0(void *Memory, char a2);
void *__thiscall sub_48AB00(void *Memory, char a2);
void *__thiscall sub_48AB20(void *Memory, char a2);
void *__thiscall sub_48AB40(void *Memory, char a2);
void __thiscall sub_48AB60(LPCRITICAL_SECTION *this);
void __thiscall sub_48AB80(LPCRITICAL_SECTION *this);
void __thiscall sub_48ABB0(LPCRITICAL_SECTION *this);
LPCRITICAL_SECTION __thiscall sub_48AC40(LPCRITICAL_SECTION *this);
signed __int64 __thiscall sub_48AC70(_DWORD *this, int a2);
// _DWORD __thiscall Concurrency::details::_ReaderWriterLock::_ReaderWriterLock(Concurrency::details::_ReaderWriterLock *__hidden this); idb
void __thiscall sub_48AD00(void *); // idb
void __thiscall sub_48AD10(void *); // idb
void __thiscall sub_48AD20(void *); // idb
_DWORD *__thiscall sub_48AD40(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_48B010(_DWORD *this, int a2);
void __thiscall sub_48B080(_DWORD *this, _DWORD *a2);
void __thiscall sub_48B190(int this, int a2, _BYTE *a3, signed int a4);
void __thiscall sub_48B2F0(int this, __int64 a2);
void __thiscall sub_48B470(_DWORD *this);
void __thiscall sub_48B5A0(_DWORD *this);
void *__thiscall sub_48B640(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5);
char __thiscall sub_48B760(_DWORD *this, int a2);
signed int __thiscall sub_48B910(_DWORD *this);
void __thiscall sub_48C060(int this, unsigned __int8 *a2, signed int a3);
void __thiscall sub_48C400(int this, _BYTE *a2, signed int a3);
void *__thiscall sub_48C4D0(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5);
void *__thiscall sub_48C600(void *Memory, char a2);
int __thiscall sub_48C620(_DWORD *this, int a2);
void sub_48C760();
BOOL __cdecl sub_48C770(int a1);
void *__cdecl sub_48C8B0(char *a1);
_BYTE *__cdecl sub_48C8E0(_BYTE *a1, char *a2, int a3);
_BYTE *__cdecl sub_48C930(_BYTE *a1, char *a2, int a3);
int __cdecl sub_48C990(int a1, int a2, int a3);
int __cdecl sub_48CA10(int, void *Dst); // idb
int __cdecl sub_48CBB0(void *a1);
int __cdecl sub_48CD30(LPCSTR lpFileName, int); // idb
int __cdecl sub_48CDA0(int a1, unsigned int a2, int a3, int a4, int (__cdecl *a5)(int, unsigned int), _DWORD *a6);
BOOL __cdecl sub_48CEB0(char **a1, char *a2);
_BYTE *__cdecl sub_48D0B0(_BYTE *a1);
char *__cdecl sub_48D100(char *Str, char *SubStr, void *Src);
char *__cdecl sub_48D1A0(char *a1, char *a2);
int __cdecl sub_48D270(char *Filename); // idb
BOOL sub_48D310();
FILE *__cdecl sub_48D3E0(char *a1, char *Filename);
int (__cdecl *sub_48D4A0(char *Format, ...))(_DWORD);
int __cdecl sub_48D500(int a1);
char *__cdecl sub_48D510(void *Src, void *Dst);
_DWORD *__cdecl sub_48D6B0(unsigned int a1, int a2);
void __cdecl sub_48D810(int a1, int a2, size_t Size, int a4);
void __cdecl sub_48DA00(int a1, double *a2, double *a3, double *a4);
int __cdecl sub_48DB20(double, double, double); // idb
char *__cdecl sub_48DC70(char *Dest, char *Source, size_t Count);
int sub_48DD10(); // weak
void __cdecl sub_48DD20(void *Src, int a2, size_t Size, int a4);
_DWORD *__cdecl sub_48DD90(unsigned int a1, signed int a2, int (__cdecl *a3)(_DWORD, _DWORD));
void __cdecl sub_48DDC0(int *a1, int a2, signed int a3, signed int a4, signed int a5);
char *__cdecl sub_48DF30(int a1);
_DWORD *__thiscall sub_48DFB0(_DWORD *this, void *Dst);
int __thiscall sub_48E1B0(char *this, int a2);
int __fastcall sub_48E1F0(int a1, int a2, int a3);
int __thiscall sub_48E2A0(signed __int16 *this, char *a2);
signed int __stdcall sub_48E3B0(int a1);
int __thiscall sub_48E3C0(char *this, char *Dest);
int __thiscall sub_48E3E0(_DWORD *this);
int __thiscall sub_48E510(_DWORD *this, int a2);
int __thiscall sub_48E6A0(_DWORD **this, int a2);
signed int __thiscall sub_48E6E0(_DWORD *this, int a2, int a3, int a4, int a5);
FILE *__thiscall sub_48EA00(_DWORD *this, char *Filename);
_DWORD *__thiscall sub_48EBC0(_DWORD *this, char *Filename, int a3);
void *__thiscall sub_48EC20(void *Memory, char a2);
int __cdecl sub_48EC80(int, void *Dst); // idb
int __cdecl sub_48ECE0(int, void *Dst); // idb
_DWORD *__thiscall sub_48EDE0(_DWORD *this);
int __thiscall sub_48EEF0(char *this);
int __thiscall sub_48EFB0(_DWORD *this, int a2);
int __fastcall sub_48F090(int a1, int a2, int a3);
int __thiscall sub_48F200(signed __int16 *this, char *Dest);
int __thiscall sub_48F2D0(char *this, char *Dest);
signed int __stdcall sub_48F2F0(int a1, int a2);
int sub_48F300();
int sub_48F310();
int __fastcall sub_48F350(int a1, int a2, int a3);
signed int sub_48F420();
int __thiscall sub_48F430(_DWORD *this, char *Dest);
int __thiscall sub_48F470(char *this, char *Dest);
signed int sub_48F4C0();
int __thiscall sub_48F4D0(signed __int16 *this, char *a2);
signed int __thiscall sub_48F610(_DWORD *this, int a2);
int __thiscall sub_48F6A0(signed __int16 *this, char *a2);
int __thiscall sub_48F8E0(char *this, char *a2);
int __thiscall sub_48F960(int this, int a2);
signed int __thiscall sub_48FA60(int this, int a2, int a3);
signed int sub_48FAC0();
int __thiscall sub_48FB00(_DWORD *this, int a2);
signed int sub_48FB70();
int __fastcall sub_48FB80(int a1, int a2, int a3);
int __thiscall sub_48FC50(signed __int16 *this, char *Dest);
int __thiscall sub_48FD40(char *this, char *Dest);
int __thiscall sub_48FDE0(_DWORD *this, int a2);
int __fastcall sub_48FE50(int a1, int a2, int a3);
signed int sub_48FF20();
int __thiscall sub_48FF30(signed __int16 *this, char *Dest);
int __thiscall sub_48FFF0(char *this, char *Dest);
int __thiscall sub_490090(_DWORD *this, int a2);
int __fastcall sub_490100(int a1, int a2, int a3);
signed int sub_4901D0();
int __thiscall sub_4901E0(signed __int16 *this, char *Dest);
int __thiscall sub_4902D0(char *this, char *Dest);
int __thiscall sub_490370(_DWORD *this, int a2);
signed int sub_4903B0();
signed __int16 *__thiscall sub_4903C0(signed __int16 *this, char *Dest);
signed int __thiscall sub_490520(char *this, int a2, int a3);
int __fastcall sub_4905A0(int a1, int a2, int a3);
int __thiscall sub_490670(char *this, char *Dest);
int __thiscall sub_490700(signed __int16 *this, char *Dest);
signed int __thiscall sub_490770(_DWORD *this, int *a2, int a3);
signed int sub_4907D0();
signed int sub_490810();
int __thiscall sub_490820(signed __int16 *this, char *Dest);
signed int __thiscall sub_4908A0(_DWORD *this, int a2, int a3);
signed int sub_490930();
int __thiscall sub_490940(signed __int16 *this, char *a2);
int __thiscall sub_490A20(char *this, char *Dest);
signed int __thiscall sub_490A40(_WORD *this, int a2, int a3);
signed int sub_490B20();
int __thiscall sub_490B30(signed __int16 *this, char *a2);
int __thiscall sub_490C20(char *this, char *Dest);
signed int __stdcall sub_490C40(int a1, int a2);
int __thiscall sub_490CC0(_DWORD *this, int a2);
int __thiscall sub_490E30(signed __int16 *this, char *a2);
int __thiscall sub_491230(char *this, char *Dest);
signed int sub_4912E0();
int __fastcall sub_4912F0(int a1, int a2, int a3);
int __thiscall sub_4913F0(_DWORD *this, int a2);
int __thiscall sub_491430(signed __int16 *this, char *a2);
int __thiscall sub_491720(char *this, char *Dest);
signed int sub_491740();
signed int sub_491750();
int __fastcall sub_491760(int a1, int a2, int a3);
int __thiscall sub_491830(_DWORD *this);
int __thiscall sub_491990(char *this, int a2);
int __thiscall sub_491A00(_DWORD *this, const char *a2);
int __thiscall sub_491AE0(_DWORD *this, int a2);
unsigned int __fastcall sub_491B60(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_491EE0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_491FD0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_4920F0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492530(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_4926F0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492820(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_4929C0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492B40(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492BB0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492C30(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492CD0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492D90(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_492DB0(_DWORD *a1, int a2, void *Dst);
_DWORD *__fastcall sub_493580(_DWORD *a1, int a2, void *Dst);
_DWORD *__thiscall sub_493870(_DWORD *this, void *Dst);
FILE *__thiscall sub_493BB0(_DWORD *this, char *Filename);
_DWORD *__thiscall sub_493CB0(_DWORD *this, char *Filename, int a3);
void __thiscall sub_493D00(_DWORD *this);
int __cdecl sub_493D40(_DWORD *a1, int *a2, char a3);
char *__thiscall sub_493E40(void *Memory, char a2);
char *__thiscall sub_493E80(void *Memory, char a2);
char *__thiscall sub_493EC0(void *Memory, char a2);
char *__thiscall sub_493F00(void *Memory, char a2);
char *__thiscall sub_493F40(void *Memory, char a2);
char *__thiscall sub_493F80(void *Memory, char a2);
char *__thiscall sub_493FC0(void *Memory, char a2);
char *__thiscall sub_494000(void *Memory, char a2);
char *__thiscall sub_494040(void *Memory, char a2);
char *__thiscall sub_494080(void *Memory, char a2);
char *__thiscall sub_4940C0(void *Memory, char a2);
char *__thiscall sub_494100(void *Memory, char a2);
char *__thiscall sub_494140(void *Memory, char a2);
char *__thiscall sub_494180(void *Memory, char a2);
char *__thiscall sub_4941C0(void *Memory, char a2);
PHKEY __thiscall sub_494200(PHKEY phkResult, LPCSTR lpSubKey);
LONG __thiscall sub_494260(HKEY *this);
LONG __thiscall sub_4942C0(HKEY *this, LPCSTR lpSubKey, char a3);
LONG __thiscall sub_494310(HKEY *this, LPCSTR lpValueName, BYTE Data);
LPCSTR __thiscall sub_494330(_DWORD *this, LPCSTR lpValueName, BYTE Data);
LONG __thiscall sub_494390(HKEY *this, LPCSTR lpValueName, BYTE *lpData);
LPBYTE __thiscall sub_4943D0(HKEY *this, LPCSTR lpValueName, BYTE *a3, LPBYTE lpData, DWORD cbData);
LPBYTE __thiscall sub_494440(HKEY *this, LPCSTR lpValueName, LPBYTE lpData, DWORD cbData);
LONG __thiscall sub_494480(HKEY *this, LPCSTR lpValueName, BYTE *lpData, DWORD cbData);
int __cdecl sub_4944A0(void *Buf1, LPBYTE lpData, DWORD cbData); // idb
LONG sub_494760(void *Buf1, ...);
void sub_494930();
int __cdecl sub_4949C0(int a1, _BYTE *a2, char *a3, _DWORD **a4, _DWORD **a5, _DWORD **a6);
int __cdecl sub_494AA0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
unsigned int __cdecl sub_494B50(int a1, int a2);
BOOL __cdecl sub_494C40(void *Src, int a2, int a3);
int __cdecl sub_494FB0(int a1, int a2);
char *__cdecl sub_495030(char *a1, int a2, int a3);
BOOL __cdecl sub_4950E0(void *Src, int a2, int a3);
BOOL __cdecl sub_495320(int a1, int a2, int a3, int a4);
int __cdecl sub_4953E0(int a1, int a2, int a3, signed __int16 *a4, int a5);
int sub_4955C0(); // weak
int __cdecl sub_4955D0(void *Dst, LPCSTR lpFileName, int, int); // idb
signed int __thiscall sub_49A3A0(void *this, int a2, int a3, int a4, int a5);
int __stdcall sub_49A3D0(int a1, int a2);
int __thiscall sub_49A3E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_49A440(_DWORD *this, int a2, int a3, int *a4, int *a5);
_DWORD *__thiscall sub_49A490(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall sub_49A4D0(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_49A510(_DWORD *this, int a2, int a3, _DWORD *a4, _DWORD *a5);
signed int __thiscall sub_49A560(_DWORD *this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_49A5F0(_DWORD *this, int a2, _DWORD *a3, int a4);
int __thiscall sub_49A640(_DWORD *this);
int __thiscall sub_49A6C0(_DWORD *this, int a2, int a3, _DWORD *a4, _DWORD *a5);
signed int __thiscall sub_49A770(_DWORD *this, int a2, _DWORD *a3);
void *__thiscall sub_49A810(void *Memory, char a2);
void *__thiscall sub_49A830(void *Memory, char a2);
void *__thiscall sub_49A850(void *Memory, char a2);
void *__thiscall sub_49A870(void *Memory, char a2);
void __thiscall sub_49A890(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_49A970(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_49AB20(_DWORD *this, int a2, int a3, int a4);
unsigned int __thiscall sub_49AB50(_DWORD *this, const char *a2);
int __thiscall sub_49AB80(int *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8);
unsigned int __thiscall sub_49AD10(_DWORD *this, const char *a2);
int __thiscall sub_49AD40(_DWORD *this, char *a2);
int __thiscall sub_49ADA0(_DWORD *this, char *a2, int a3);
__int16 __thiscall sub_49AE10(_DWORD *this, int a2);
int __thiscall sub_49AE50(_DWORD *this, void *Dst, void *Src, int a4);
int __thiscall sub_49AF00(_DWORD *this, int a2, char *a3, int a4, int a5, int a6);
int __thiscall sub_49AFF0(_DWORD *this, int a2, const char *a3, int a4, int a5, int a6);
int __thiscall sub_49B100(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __thiscall sub_49B190(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __thiscall sub_49B230(_DWORD *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8);
int __thiscall sub_49B310(_DWORD *this, char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8);
int __thiscall sub_49B490(_DWORD *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8);
int __thiscall sub_49B4F0(_DWORD *this, char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8);
_DWORD *__thiscall sub_49B540(void *Memory, char a2);
signed int __cdecl sub_49B580(int *a1, int *a2, _DWORD *a3);
signed int __cdecl sub_49B600(int *a1, _DWORD *a2);
_DWORD *__thiscall sub_49B650(_DWORD *this);
_DWORD *__thiscall sub_49B6A0(_DWORD *this, int a2);
void __thiscall sub_49B710(_DWORD *this);
int __thiscall sub_49B720(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_49B750(_DWORD *this);
int __thiscall sub_49B770(_DWORD *this, int *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_49B7D0(_DWORD *this, int *a2, int a3, int a4, int a5);
int __thiscall sub_49B820(_DWORD *this, int a2, int *a3, int a4, int a5, int a6);
int __thiscall sub_49B870(_DWORD *this, int a2, int a3);
__int16 __thiscall sub_49B950(_DWORD *this, int a2, int a3, __int16 a4);
void __thiscall sub_49B990(_DWORD *this, int a2, int a3, int a4);
void __thiscall sub_49BA70(_DWORD *this, int *a2, _DWORD *a3, int *a4, char a5);
void __thiscall sub_49BC20(_DWORD *this, int a2, int a3, _DWORD *a4, int *a5, unsigned int a6, int a7);
int __thiscall sub_49BE30(_DWORD *this, unsigned int a2, unsigned int a3, int *a4);
int __thiscall sub_49C240(void *this, int a2, int *a3, int a4);
void __thiscall sub_49C2F0(int *this, int a2, int *a3);
_DWORD *__thiscall sub_49C4A0(_DWORD *this, _DWORD *a2);
int __thiscall sub_49C4C0(_DWORD *this, int a2, int a3, int a4, int a5);
signed int __thiscall sub_49C510(_DWORD *this, _DWORD *a2);
int __thiscall sub_49C5D0(_DWORD *this, int a2, int a3);
int __thiscall sub_49C610(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_49C6B0(_DWORD *this);
int __thiscall sub_49C6D0(_DWORD **this, int a2);
int __thiscall sub_49C6F0(_DWORD **this, int a2);
int __thiscall sub_49C710(_DWORD *this, int a2, int *a3);
int __thiscall sub_49C830(_DWORD *this, HDC a2);
int __thiscall sub_49C8F0(void *this, _BYTE *a2, int a3);
int __thiscall sub_49C940(void *this, _BYTE *a2, int a3);
void __thiscall sub_49CA00(_DWORD **this);
signed int __thiscall sub_49CA30(_DWORD *this);
int __thiscall sub_49CB40(_DWORD *this, int a2, __int16 a3, char *Filename);
int __thiscall sub_49CD70(_DWORD *this, int a2);
void *__thiscall sub_49CDC0(_DWORD **this, void *Dst);
int __thiscall sub_49CE00(int this);
int __thiscall sub_49CE40(void *this, int a2, int a3);
int __thiscall sub_49CFB0(int *this, int a2, int a3, int a4);
int __thiscall sub_49D3A0(_DWORD *this, int a2);
LONG __thiscall sub_49D400(HWND *this);
BOOL __thiscall sub_49D470(_DWORD *this);
int __thiscall sub_49D4A0(_DWORD *this);
LONG __thiscall sub_49D4C0(_DWORD *this, LONG *a2, LONG *a3);
_DWORD *__thiscall sub_49D510(_DWORD *this, _DWORD *a2);
int __thiscall sub_49D530(_DWORD **this);
int __thiscall sub_49D560(_DWORD *this);
int __thiscall sub_49D6F0(_DWORD *this);
int __thiscall sub_49D700(HWND *this);
int __thiscall sub_49D770(_DWORD *this);
int __thiscall sub_49D7B0(struct tagRECT *this);
LONG __thiscall sub_49D9E0(_DWORD *this, LONG *a2, LONG *a3);
_DWORD *__thiscall sub_49DA20(_DWORD *this, _DWORD *a2);
int sub_49DA50();
int sub_49DA60();
int __thiscall sub_49DA70(_DWORD **this);
int __thiscall sub_49DAB0(_DWORD *this);
// int __usercall sub_49DB30@<eax>(int a1@<ecx>, int a2@<edi>);
int __thiscall sub_49E1F0(_DWORD *this);
int __thiscall sub_49E200(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
signed int __thiscall sub_49E2C0(_DWORD *this, int *a2);
int __thiscall sub_49E420(_DWORD *this, _DWORD *a2);
// signed int __usercall sub_49E480@<eax>(int a1@<ecx>, int a2@<edi>);
int __thiscall sub_49E4A0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall sub_49E610(_DWORD *this, _DWORD *a2);
int __thiscall sub_49E640(_DWORD *this, _DWORD *a2);
int __thiscall sub_49E670(_DWORD *this, _DWORD *a2, int *a3);
int __thiscall sub_49E780(_DWORD *this, _DWORD *a2, _DWORD *a3, int *a4, _DWORD *a5);
int __thiscall sub_49E980(int this, _DWORD *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_49EA00(int this, int a2, int a3);
int __thiscall sub_49EA30(int this, int a2, int a3, int a4);
int __thiscall sub_49EA60(int this, int a2, int a3, int a4);
int __thiscall sub_49EA90(int this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_49EAD0(int this, int a2, _DWORD *a3, int a4, int a5, int a6);
int __thiscall sub_49EB50(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_49EB90(_DWORD *this, _DWORD *a2, int a3, int a4, int a5);
int __thiscall sub_49EBF0(int this, int a2, int a3, _DWORD *a4);
int __thiscall sub_49EC60(int this, int a2, _DWORD *a3);
int __thiscall sub_49ECD0(int this, int a2, _DWORD *a3);
int __thiscall sub_49ED40(_DWORD **this);
int __thiscall sub_49ED50(int this, int a2, int a3, int a4, int a5);
int __thiscall sub_49EDA0(_DWORD **this, int a2, int a3);
int __thiscall sub_49EDD0(_DWORD *this, _DWORD *a2);
int __thiscall sub_49EE30(int *this, _DWORD *a2, int a3, int a4, int a5);
int __thiscall sub_49EEA0(_DWORD *this);
int __thiscall sub_49EF20(_DWORD **this);
_DWORD *__thiscall sub_49EF40(_DWORD *this);
int __thiscall sub_49EF90(_DWORD **this, int a2);
_DWORD *__thiscall sub_49EFB0(_DWORD **this);
int __thiscall sub_49EFE0(_DWORD **this);
int __thiscall sub_49F000(_DWORD **this);
int __thiscall sub_49F020(_DWORD **this, int a2, int a3);
int __thiscall sub_49F040(_DWORD **this, int a2, int a3);
int __thiscall sub_49F060(_DWORD **this, int a2);
_DWORD *__thiscall sub_49F080(_DWORD **this);
signed int __thiscall sub_49F0B0(_DWORD *this, __int16 a2, int a3, int a4, int a5, int *a6);
int __thiscall sub_49F5F0(_DWORD *this, int a2, int a3, int *a4);
void *__thiscall sub_49F860(char *this, HWND hWnd, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall sub_49FA40(HWND *this);
int __thiscall sub_49FB70(HWND *this, int a2);
_DWORD *__thiscall sub_49FBC0(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_49FCA0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, _DWORD *a8, int a9);
_DWORD *__thiscall sub_49FE20(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall sub_49FEF0(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_49FF60(_DWORD *this, int a2, int a3);
int __thiscall sub_4A0100(_DWORD *this, int a2, int a3, int *a4);
void __thiscall sub_4A01E0(int *this, int a2, int *a3);
int __thiscall sub_4A02B0(_DWORD *this, int a2, int *a3);
void __thiscall sub_4A0380(_DWORD *this, int a2, int a3, _DWORD *a4, int *a5, unsigned int a6, int a7);
_DWORD *__thiscall sub_4A0460(_DWORD *this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_4A04F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, struct IDirectDraw *a7);
_DWORD *__thiscall sub_4A0800(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_4A0990(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
void *__thiscall sub_4A0AB0(void *Memory, char a2);
void *__thiscall sub_4A0AD0(void *Memory, char a2);
void *__thiscall sub_4A0AF0(void *Memory, char a2);
void *__thiscall sub_4A0B10(void *Memory, char a2);
void *__thiscall sub_4A0B30(void *Memory, char a2);
void *__thiscall sub_4A0B60(void *Memory, char a2);
void *__thiscall sub_4A0B90(void *Memory, char a2);
void *__thiscall sub_4A0BB0(void *Memory, char a2);
void *__thiscall sub_4A0BD0(void *Memory, char a2);
size_t __thiscall sub_4A0C30(_DWORD *this, FILE *File);
char *__thiscall sub_4A0E40(void **this);
int __thiscall sub_4A10E0(int this, int a2);
int __thiscall sub_4A11C0(_DWORD *this, int a2, int a3, int a4, int a5, unsigned __int16 a6);
int *__fastcall sub_4A1230(int a1, int a2, int *a3, int a4, int *a5, unsigned int a6, int a7);
void __thiscall sub_4A2E20(signed __int16 *this, int a2);
void __thiscall sub_4A30E0(signed __int16 *this, int a2);
int __thiscall sub_4A3460(_DWORD *this, int a2);
int __thiscall sub_4A3500(_DWORD *this, int a2);
char *__thiscall sub_4A3600(_DWORD *this, int a2);
int __cdecl sub_4A38F0(int a1, int a2, int a3);
int sub_4A3920();
int __cdecl sub_4A3940(int a1);
void sub_4A3950();
int __cdecl sub_4A39F0(char a1, unsigned __int8 a2);
int __cdecl sub_4A3A10(int a1);
int sub_4A3A20();
int __cdecl sub_4A3AB0(_WORD *a1, int a2);
int __cdecl sub_4A3D00(int a1, int a2);
int sub_4A3DA0();
void __cdecl sub_4A3F00(void *a1);
int __cdecl sub_4A3F50(unsigned __int16 *a1, int a2, int a3);
void __thiscall sub_4A4050(int this, _DWORD *a2);
int __thiscall sub_4A41E0(_DWORD *this, int a2, int a3);
void __thiscall sub_4A4210(_DWORD *this);
void __thiscall sub_4A4380(signed __int16 *this, int a2);
char *__thiscall sub_4A4460(signed __int16 *this, int a2);
void __thiscall sub_4A4520(signed __int16 *this, int a2);
int __cdecl sub_4A45C0(int a1);
void *__cdecl sub_4A4770(int a1, int a2);
unsigned __int16 *__cdecl sub_4A4970(int a1, int a2, int a3);
void *__thiscall sub_4A49D0(_DWORD *this, FILE *File);
void *__fastcall sub_4A4B90(int a1, int a2, int a3);
int __fastcall sub_4A4DC0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *Src, int a10);
int __thiscall sub_4A50B0(int this, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8, void *Src, int a10);
_DWORD *__thiscall sub_4A5420(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_4A5790(_DWORD *this, FILE *File, int Offset, int a4);
_DWORD *__thiscall sub_4A5890(_DWORD *this, int a2, char *Str1, int a4);
void *__thiscall sub_4A5990(void *Memory, char a2);
int __thiscall sub_4A59B0(_DWORD *this);
int __fastcall sub_4A59F0(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
__int64 __thiscall sub_4A5A50(_DWORD *this, unsigned int a2);
int __thiscall sub_4A5AF0(_DWORD *this, float a2, float a3, float a4, int a5, int a6);
void *__cdecl sub_4A5B70(_DWORD *a1, size_t *a2, int a3, int a4);
int __thiscall sub_4A5F60(_DWORD *this);
int __thiscall sub_4A5FA0(_DWORD *this, int a2);
signed int __thiscall sub_4A5FF0(_DWORD *this, int a2, int a3, int a4, int a5);
void *__thiscall sub_4A61A0(char *this, size_t *a2, int a3);
int __thiscall sub_4A62C0(_DWORD *this, int a2, int a3);
unsigned int __thiscall sub_4A6340(_DWORD *this, int a2);
int __thiscall sub_4A6390(_DWORD *this, int a2);
// struct Concurrency::IThreadProxy *__thiscall Concurrency::details::InternalContextBase::GetProxy(Concurrency::details::InternalContextBase *__hidden this); idb
_DWORD *__thiscall sub_4A6420(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_4A66D0(_DWORD *this, signed int a2);
signed int __thiscall sub_4A6740(_DWORD *this, signed int a2, signed int a3, signed int a4, int a5, int a6, int a7);
void __thiscall sub_4A6970(_DWORD *this);
int __thiscall sub_4A6B90(_DWORD *this);
int __thiscall sub_4A6BF0(_DWORD *this, signed int a2);
_DWORD *__thiscall sub_4A6C30(void *Dst, int a2, int a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall sub_4A6D20(void *Dst, int a2, int a3, int a4, int a5, int a6);
signed int __thiscall sub_4A6E00(_DWORD *this);
signed int __thiscall sub_4A6E90(int *this, int a2, int a3, int a4, signed int a5, signed int a6, signed int a7, int a8);
signed int __thiscall sub_4A7120(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall sub_4A71E0(_DWORD *this);
bool __thiscall sub_4A7210(_DWORD *this, int a2);
int __thiscall sub_4A7240(_DWORD *this, int a2, int a3, int a4);
// int __thiscall unknown_libname_2(_DWORD); weak
int __thiscall sub_4A72E0(int *this);
int __thiscall sub_4A7300(_DWORD *this, int a2);
void __thiscall sub_4A7320(int *this, int a2);
int __thiscall sub_4A7390(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_4A73C0(_DWORD *this);
int __thiscall sub_4A73E0(int *this);
_DWORD *__thiscall sub_4A7410(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
void *__thiscall sub_4A7470(void *Memory, char a2);
int sub_4A7490(); // weak
int sub_4A74A0();
int __stdcall j_WSACleanup();
int __thiscall sub_4A7520(_DWORD *this);
int __thiscall sub_4A7590(_DWORD *this, int *a2, _DWORD *a3, _WORD *a4);
int __fastcall sub_4A7690(_DWORD *a1, int a2, char *buf, int len, int a5, __int16 a6);
int __cdecl sub_4A7790(int a1, unsigned int **a2);
int sub_4A77C0(); // weak
int *__thiscall sub_4A7870(char *this, int *a2, int a3);
unsigned int __thiscall sub_4A78B0(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_4A79F0(_DWORD *this, int a2, int a3, int a4, int a5);
int __cdecl sub_4A7BB0(int, struct in_addr in); // idb
int sub_4A7BF0(); // weak
_DWORD *__thiscall sub_4A7C00(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, signed int a9, int a10);
void *__thiscall sub_4A7F20(unsigned int *this, int a2);
void *__thiscall sub_4A7FA0(_DWORD *this, int a2);
int __thiscall sub_4A8060(_DWORD *this);
void __fastcall sub_4A80B0(int a1, int a2, void *Src, size_t Size);
void __fastcall sub_4A81C0(int a1, int a2, signed int a3);
void *__thiscall sub_4A8280(_DWORD *this, int a2, int a3, int a4, int a5, __int16 a6, int a7, int a8, int a9, int a10, int a11);
void *__fastcall sub_4A8450(int a1, int a2);
void __fastcall sub_4A8500(int a1, int a2, void *Src, size_t Size);
void __thiscall sub_4A85D0(_DWORD *this, int a2, void *Src, size_t Size);
void __fastcall sub_4A8710(int *a1, int a2);
void __fastcall sub_4A8870(int a1, int a2);
struct hostent *__thiscall sub_4A88E0(_DWORD *this, char *cp, u_short hostshort, int a4);
void __fastcall sub_4A8A10(_DWORD *a1, int a2);
// void __usercall sub_4A8BF0(__int64 a1@<edx:eax>, _DWORD *a2@<ecx>);
signed int __thiscall sub_4A8D80(_DWORD *this, int a2, int a3, int a4);
void __fastcall sub_4A8DF0(_DWORD *a1, int a2, int a3);
int __thiscall sub_4A8E90(_DWORD *this, void *Src, size_t Size);
void __fastcall sub_4A8F80(_DWORD *a1, int a2, int a3);
void __thiscall sub_4A8FB0(_DWORD *this, void *Memory, int a3, int a4);
int __thiscall sub_4A9380(_DWORD **this, int a2, void *Src, size_t Size);
void __thiscall sub_4A93E0(_DWORD *this, void *Memory, int a3);
void __fastcall sub_4A9490(int a1, int a2, void *Memory, int a4);
void __thiscall sub_4A9500(unsigned int *this, void *Memory, int a3, int a4, int a5);
signed int __fastcall sub_4A96A0(unsigned int *a1, int a2);
int __stdcall sub_4A9730(int a1, int a2, int a3, int (__thiscall *a4)(int));
int __thiscall sub_4A97B0(SOCKET *this);
int __thiscall sub_4A97C0(SOCKET *this);
int __thiscall sub_4A9900(_DWORD *this, _DWORD *a2, _DWORD *a3);
int __fastcall sub_4A9920(SOCKET *a1, int a2, void *Src, size_t Size);
int __thiscall sub_4A99B0(_DWORD *this, int a2);
SOCKET __fastcall sub_4A99C0(SOCKET *a1, int a2, _DWORD *a3);
SOCKET *__thiscall sub_4A9C60(SOCKET *this, char *a2, SOCKET a3, SOCKET a4);
HHOOK sub_4A9CE0();
void __thiscall sub_4A9D00(int *this, int a2);
int __thiscall sub_4A9DE0(_DWORD *this, int a2);
int __stdcall sub_4A9E00(int a1, int a2, int a3);
int __thiscall sub_4A9E20(char *this, int a2, _DWORD *a3, _DWORD *a4, _DWORD *a5);
int __thiscall sub_4A9E50(_DWORD *this, int nVirtKey);
int __thiscall sub_4A9F90(_DWORD *this);
signed int sub_4A9FA0();
void *__thiscall sub_4A9FB0(int *this, int a2);
int __stdcall sub_4AA1F0(int *a1, int *a2, int *a3);
int __thiscall sub_4AA2F0(char *this, int a2);
int __thiscall sub_4AA300(int this);
char *__stdcall sub_4AA370(int a1, int a2, int a3);
LRESULT __stdcall fn(int code, WPARAM wParam, LPARAM lParam); // idb
HHOOK sub_4AA4A0();
_DWORD *__thiscall sub_4AA520(void *Dst, int a2, int a3);
void __thiscall sub_4AA570(_DWORD *this);
void __thiscall sub_4AA5A0(int *this, int a2);
_DWORD *__thiscall sub_4AA5E0(_DWORD *this, int a2, int a3, int a4, int a5);
int __stdcall sub_4AA630(int a1);
char *__stdcall sub_4AA690(int a1);
int *__thiscall sub_4AA6C0(_DWORD *this, int a2, int a3);
int __cdecl nullsub_1(_DWORD); // weak
int __cdecl nullsub_2(_DWORD); // weak
int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD); // weak
int *__thiscall sub_4AA7C0(int *this);
void __thiscall sub_4AA7F0(void **this);
int __thiscall sub_4AA830(int *this);
BOOL __thiscall sub_4AA8C0(_DWORD *this);
void __thiscall sub_4AA8F0(_DWORD *this);
BOOL __thiscall sub_4AA930(_DWORD *this, int a2, _DWORD *a3, int a4, int a5);
BOOL __thiscall sub_4AA990(_DWORD *this, int a2, _DWORD *a3, int a4, int a5);
BOOL __cdecl sub_4AAA00(int a1, signed __int16 *a2, _DWORD *a3);
void sub_4AAB10();
char *__thiscall sub_4AAB20(char *this, int a2);
// void __userpurge sub_4AAE30(int a1@<ecx>, int a2@<edi>, int a3, int a4, int a5, _DWORD *a6, int a7);
signed int __thiscall sub_4AB0E0(_DWORD *this, signed int a2, signed int a3, int *a4, int *a5, int *a6, int *a7, int a8, int a9);
signed int __thiscall sub_4ABD20(_DWORD *this, int a2, int a3, int a4, signed int a5, signed int a6, int *a7, int *a8, int *a9, int *a10, int a11, int a12);
void __stdcall sub_4ABE10(void *Memory, int a2);
int __thiscall sub_4ABE90(int *this, _DWORD *a2, int a3, int *a4, int a5, int a6);
int sub_4AC3D0(); // weak
_DWORD *__cdecl sub_4AC470(_DWORD *a1, unsigned int a2);
int __cdecl sub_4AC4A0(_DWORD *a1, int a2, signed __int16 **a3, int a4, int a5, int a6, unsigned int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15);
void sub_4AC7D0();
int __thiscall sub_4AC7E0(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
char *__thiscall sub_4AC960(char *this, int a2, char *Filename, int a4, int a5, int a6);
void __thiscall sub_4ACEA0(void **this);
_DWORD *__thiscall sub_4ACFE0(_DWORD *this, void *Dst);
int __thiscall sub_4AD0D0(signed __int16 *this, char *Dest);
_BYTE *__stdcall sub_4AD120(_BYTE *a1);
int __thiscall sub_4AD150(int this, int a2);
_DWORD *__thiscall sub_4AD220(_DWORD *this, void *Dst);
signed int sub_4AD310();
int __fastcall sub_4AD320(int a1, int a2, int a3);
int __thiscall sub_4AD3E0(_DWORD *this, char *Dest);
int __thiscall sub_4AD410(char *this, char *Dest);
_DWORD *__thiscall sub_4AD430(_DWORD *this, void *Dst);
int __thiscall sub_4AD5B0(char *this, int (__thiscall ***a2)(_DWORD, int, int));
int __thiscall sub_4AD640(signed __int16 *this, char *a2);
int __thiscall sub_4AD790(char *this, char *Dest);
signed int sub_4AD800();
int __fastcall sub_4AD810(int a1, int a2, int a3);
_DWORD *__thiscall sub_4AD8E0(_DWORD *this, void *Dst);
int __thiscall sub_4ADAB0(char *this, int (__thiscall ***a2)(_DWORD, int, int));
int __thiscall sub_4ADB20(signed __int16 *this, char *a2);
int __thiscall sub_4ADCB0(char *this, char *Dest);
signed int sub_4ADD10();
int __fastcall sub_4ADD20(int a1, int a2, int a3);
_DWORD *__thiscall sub_4ADDF0(_DWORD *this, void *Dst);
int __thiscall sub_4ADF60(int this, int a2);
int __thiscall sub_4ADFC0(signed __int16 *this, char *a2);
int __thiscall sub_4AE0D0(char *this, char *Dest);
signed int sub_4AE130();
_DWORD *__thiscall sub_4AE140(_DWORD *this, void *Dst);
int __thiscall sub_4AE300(char *this, int (__thiscall ***a2)(_DWORD, int, int));
int __thiscall sub_4AE3A0(signed __int16 *this, char *a2);
int __thiscall sub_4AE4C0(char *this, char *Dest);
signed int sub_4AE520();
int __fastcall sub_4AE530(int a1, int a2, int a3);
_DWORD *__thiscall sub_4AE600(_DWORD *this, void *Dst);
int __thiscall sub_4AE730(signed __int16 *this, char *a2);
_BYTE *__stdcall sub_4AE7F0(_BYTE *a1);
int __fastcall sub_4AE810(int a1, int a2, int a3);
_DWORD *__thiscall sub_4AE8E0(_DWORD *this, void *Dst);
int __thiscall sub_4AE9A0(char *this, int a2);
int __thiscall sub_4AE9E0(signed __int16 *this, char *a2);
int __thiscall sub_4AEA90(char *this, char *Dest);
signed int sub_4AEAF0();
int __fastcall sub_4AEB00(int a1, int a2, int a3);
_DWORD *__thiscall sub_4AEBC0(_DWORD *this, void *Dst);
int __thiscall sub_4AEEE0(char *this, int (__thiscall ***a2)(_DWORD, int, int));
int __thiscall sub_4AEF70(signed __int16 *this, char *a2);
int __thiscall sub_4AF1D0(char *this, char *Dest);
signed int sub_4AF240();
int __fastcall sub_4AF250(int a1, int a2, int a3);
_DWORD *__thiscall sub_4AF320(_DWORD *this, void *Dst);
int __thiscall sub_4AF510(signed __int16 *this, char *a2);
_BYTE *__stdcall sub_4AF610(_BYTE *a1);
_DWORD *__thiscall sub_4AF630(_DWORD *this, void *Dst);
int __thiscall sub_4AF6F0(signed __int16 *this, char *a2);
_BYTE *__stdcall sub_4AF790(_BYTE *a1);
signed int sub_4AF7A0();
int __thiscall sub_4AF7B0(_DWORD *this);
_DWORD *__thiscall sub_4AF7E0(_DWORD *this, void *Dst);
int __thiscall sub_4AFA40(_DWORD **this, int a2);
int __thiscall sub_4AFBA0(_DWORD *this, __int16 a2, __int16 a3);
FILE *__thiscall sub_4AFBE0(_DWORD *this, char *Filename);
_DWORD *__thiscall sub_4AFD10(_DWORD *this, char *Filename, int a3);
void __thiscall sub_4AFD60(_DWORD *this);
int __cdecl sub_4AFDA0(_DWORD *a1, int *a2, char a3);
void *__thiscall sub_4AFEA0(void *Memory, char a2);
void *__thiscall sub_4AFEC0(void *Memory, char a2);
void *__thiscall sub_4AFEE0(void *Memory, char a2);
void *__thiscall sub_4AFF00(void *Memory, char a2);
void *__thiscall sub_4AFF20(void *Memory, char a2);
void *__thiscall sub_4AFF40(void *Memory, char a2);
void *__thiscall sub_4AFF60(void *Memory, char a2);
void *__thiscall sub_4AFF80(void *Memory, char a2);
void *__thiscall sub_4AFFA0(void *Memory, char a2);
void *__thiscall sub_4AFFC0(void *Memory, char a2);
void *__thiscall sub_4AFFE0(void *Memory, char a2);
_DWORD *__thiscall sub_4B0000(_DWORD *this, void *Dst);
int __thiscall sub_4B0890(_DWORD *this, int (__thiscall ***a2)(_DWORD, int, int));
int __fastcall sub_4B0910(int a1, int a2, int a3);
_DWORD __stdcall sub_4B09C0(_DWORD); // weak
int __thiscall sub_4B0F80(char *this, char *Dest);
int __thiscall sub_4B0FB0(_DWORD *this, void *Dst);
int __fastcall sub_4B1720(int a1, int a2, int a3);
signed int sub_4B17F0();
int __thiscall sub_4B1800(_DWORD *this, char *a2);
int __thiscall sub_4B1B20(char *this, char *Dest);
_DWORD *__thiscall sub_4B1B80(_DWORD *this, void *Dst);
int __fastcall sub_4B1E40(int a1, int a2, int a3);
signed int sub_4B1F10();
int __thiscall sub_4B1F20(_DWORD *this, char *Dest);
int __thiscall sub_4B20A0(char *this, char *Dest);
_DWORD *__thiscall sub_4B20E0(_DWORD *this, void *Dst);
int __fastcall sub_4B25A0(int a1, int a2, int a3);
int __thiscall sub_4B2680(_DWORD *this, char *a2);
int __thiscall sub_4B2910(char *this, char *Dest);
_DWORD *__thiscall sub_4B2940(_DWORD *this, void *Dst);
_BYTE *__stdcall sub_4B29A0(_BYTE *a1);
_DWORD *__thiscall sub_4B29B0(_DWORD *this, void *Dst);
signed int sub_4B2AC0();
int __thiscall sub_4B2AD0(_DWORD *this, char *Dest);
int __thiscall sub_4B2B10(char *this, char *Dest);
int __fastcall sub_4B2B30(int a1, int a2, int a3);
int __thiscall sub_4B2C00(_DWORD *this);
int __thiscall sub_4B2C80(_DWORD **this, int a2);
_DWORD *__thiscall sub_4B2CC0(_DWORD *this, void *Dst);
int __cdecl sub_4B2F10(_DWORD *a1, int a2);
int __thiscall sub_4B2F30(int *this, char a2);
void __thiscall sub_4B2F70(int *this, void (__thiscall ***a2)(_DWORD, signed int));
signed int __thiscall sub_4B30B0(_DWORD *this, unsigned int a2, int a3);
FILE *__thiscall sub_4B3390(int *this, char *Filename);
int *__thiscall sub_4B3450(int *this, char *Filename, int a3);
void __thiscall sub_4B3480(int *this);
int __cdecl sub_4B34C0(_DWORD *a1, int *a2, char a3);
void *__thiscall sub_4B35C0(void *Memory, char a2);
void *__thiscall sub_4B35F0(void *Memory, char a2);
void *__thiscall sub_4B3620(void *Memory, char a2);
void *__thiscall sub_4B3650(void *Memory, char a2);
void *__thiscall sub_4B3680(void *Memory, char a2);
void *__thiscall sub_4B36B0(void *Memory, char a2);
_DWORD *__thiscall sub_4B36E0(_DWORD *this, int a2);
int __thiscall sub_4B3700(_DWORD *this, char *Str1, int a3, int a4, int a5);
void __thiscall sub_4B3970(_DWORD *this);
int __thiscall sub_4B39E0(_DWORD *this, const char *a2, int a3, int a4);
_DWORD *__thiscall sub_4B3A80(_DWORD *this);
int __thiscall sub_4B3AA0(_DWORD *this, int a2, int a3);
int __thiscall sub_4B3AF0(_DWORD *this, char *Str1, int a3);
void __thiscall sub_4B3D60(_DWORD *this);
int __cdecl sub_4B3DD0(int, void *Dst, size_t Size); // idb
_DWORD *__thiscall sub_4B3E10(_DWORD *this, int a2, int a3, _DWORD *a4, int a5);
void __thiscall sub_4B4100(void (__stdcall ****this)(signed int));
int __thiscall sub_4B4130(_DWORD *this, int a2);
void __thiscall sub_4B4170(_DWORD *this);
int __thiscall sub_4B41D0(_DWORD *this);
int __thiscall sub_4B4240(_DWORD *this);
int __thiscall sub_4B4260(_DWORD *this, int a2);
signed int __thiscall sub_4B42D0(_DWORD *this, int a2);
int __stdcall sub_4B43D0(int, int); // weak
LPVOID *__thiscall sub_4B4410(LPVOID *ppv, int a2, int a3);
FILE *__thiscall sub_4B4550(const CHAR *this, int a2);
int __thiscall sub_4B4680(_DWORD *this);
int __thiscall sub_4B4690(_DWORD *this);
int __thiscall sub_4B4700(_DWORD *this, int a2);
int __thiscall sub_4B4710(_DWORD *this, int a2);
int __cdecl sub_4B4780(int, char *Str2); // idb
FILE *__thiscall sub_4B4790(const char *this);
void __thiscall sub_4B47F0(int *this);
int __thiscall sub_4B48B0(int *this, int a2);
int __thiscall sub_4B4980(_DWORD *this, int a2);
int __thiscall sub_4B4990(int this, int a2, int a3);
FILE *__thiscall sub_4B4AB0(const CHAR *this, int a2);
FILE *__thiscall sub_4B4C20(const char *this);
char *__thiscall sub_4B4D00(char *this, char *Source, int a3);
int __thiscall sub_4B4D60(_DWORD *this);
int __thiscall sub_4B4D70(int this, int a2);
int __thiscall sub_4B4E20(int this, int a2);
char *__thiscall sub_4B4E70(char *this, char *Source, int a3);
int __thiscall sub_4B4F10(int *this);
int sub_4B4FD0(); // weak
void __thiscall sub_4B4FE0(void **this);
int __stdcall sub_4B5050(int a1);
signed int __thiscall sub_4B5060(signed __int16 *this, int a2, int a3, int a4, int a5, int a6, signed int a7);
signed int __thiscall sub_4B5710(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall sub_4B5860(_DWORD *this, int a2, int *a3, int *a4, int *a5, int a6);
int __thiscall sub_4B59C0(_DWORD *this, int *a2, int *a3, int a4, int a5, int a6, int a7);
_DWORD *__cdecl sub_4B5BB0(int a1, int a2);
int sub_4B5CC0(); // weak
_DWORD *__thiscall sub_4B5CD0(void *DstBuf, char *Filename, int a3);
int __thiscall sub_4B62B0(signed __int16 *this, int a2, int *a3, int *a4, signed int a5, int a6, int a7);
int __thiscall sub_4B66B0(_DWORD *this, int a2, int a3, int a4, int *a5, int *a6, int a7, int a8, int a9, int a10);
char __cdecl sub_4B6860(char *Filename, int a2, int a3);
void __cdecl sub_4B69D0(int *a1, int *a2);
_DWORD **__cdecl sub_4B7000(_DWORD *a1, _DWORD **a2, int a3, int a4);
void *__cdecl sub_4B75C0(int a1, int a2, int a3, size_t NewSize);
char *__thiscall sub_4B7620(const char *this, char *a2);
int __thiscall sub_4B7860(int *this);
FILE *__thiscall sub_4B78C0(_BYTE *this, FILE *File);
int __thiscall sub_4B79C0(int *this, char *Str2, int a3, int a4);
void __thiscall sub_4B7DD0(_DWORD *this);
char *__thiscall sub_4B7F30(int *this, char *Str2, char *a3, char *Source, char *Dest, size_t Count, char a7);
int __thiscall sub_4B80F0(int *this, char *a2, const char *a3, int a4, char a5);
int __stdcall sub_4B8220(int, int, double, char); // idb
int __thiscall sub_4B8360(int *this, int a2, char *Str2, char *a4, char *Source, char a6);
int __thiscall sub_4B8440(void **this);
int __thiscall sub_4B8510(_DWORD *this, char *Str1);
int __thiscall sub_4B85C0(_DWORD *this, char *Str1, int a3);
void __thiscall sub_4B8700(char *Filename);
char *__thiscall sub_4B8820(char *Filename, int a2, int a3);
FILE *__thiscall sub_4B88C0(_DWORD *this, char *Str1, int a3);
int __cdecl sub_4B8900(int DstBuf, int); // idb
int __cdecl sub_4B89B0(int DstBuf, int); // idb
int __cdecl sub_4B8A60(void *Memory); // idb
// signed int __usercall sub_4B8B00@<eax>(int a1@<edx>, int a2@<ecx>, _DWORD *a3);
int __cdecl sub_4B8B60(int DstBuf, int); // idb
// signed int __usercall sub_4B8C20@<eax>(int a1@<eax>);
// int __usercall sub_4B8CB0@<eax>(int result@<eax>, int a2@<edx>, int a3@<esi>);
// signed int __usercall sub_4B8CE0@<eax>(int a1@<ebx>, unsigned __int8 *a2@<esi>, _BYTE *a3);
int __cdecl sub_4B8D90(int DstBuf); // idb
int __cdecl sub_4B8EF0(int DstBuf); // idb
int __cdecl sub_4B9160(int DstBuf, int, int); // idb
// signed int __usercall sub_4B9220@<eax>(int a1@<eax>, int *a2);
_DWORD *__cdecl sub_4B92B0(int FileHandle);
_DWORD *__cdecl sub_4B9420(int a1, int a2);
signed int __cdecl sub_4B9570(int a1, int a2, int a3);
int __cdecl sub_4B98E0(int DstBuf, int, int); // idb
int __cdecl sub_4B99F0(int DstBuf); // idb
signed int __cdecl sub_4B9F00(signed int a1);
size_t *__cdecl sub_4B9F30(size_t NumOfElements, void *Src);
void __cdecl sub_4B9FC0(void *Memory);
char *__cdecl sub_4BA270(int a1, size_t Size, void *Src);
void __cdecl sub_4BA300(int a1);
void __cdecl sub_4BA450(void *Memory);
signed int __cdecl sub_4BA4D0(int a1, int *a2, int a3, int a4, unsigned int a5);
signed int __cdecl sub_4BA580(int a1, int *a2, int a3, int a4);
int __cdecl sub_4BA5A0(unsigned int a1);
signed int __cdecl sub_4BA5C0(int a1, int *a2, int a3, int a4);
// int __usercall sub_4BA7F0@<eax>(int result@<eax>, __int16 a2@<cx>);
// int __usercall sub_4BA820@<eax>(int a1@<eax>);
signed int __cdecl sub_4BA870(_DWORD *a1, unsigned int a2);
signed int __cdecl sub_4BAC80(int a1);
// signed int __usercall sub_4BAF50@<eax>(int a1@<esi>);
// unsigned int __usercall sub_4BAFD0@<eax>(unsigned int a1@<eax>, _DWORD *a2@<edi>);
// int __usercall sub_4BB150@<eax>(_DWORD *a1@<esi>, int a2);
// void *__usercall sub_4BB220@<eax>(int *a1@<esi>);
signed int __cdecl sub_4BB370(int *a1, int a2);
signed int __cdecl sub_4BBD40(_DWORD *a1);
signed int __cdecl sub_4BC140(_DWORD *a1, unsigned int a2, int a3, signed int a4, int a5, unsigned int a6, _BYTE *a7, int a8);
signed int __cdecl sub_4BC360(_DWORD *a1, unsigned int a2, _BYTE *a3, int a4);
signed int __cdecl sub_4BC390(_DWORD *a1);
signed int __cdecl sub_4BC3E0(_DWORD *a1, signed int a2, _BYTE *a3, int a4);
signed int __cdecl sub_4BC4B0(_DWORD *a1, _BYTE *a2, int a3);
// _DWORD *__usercall sub_4BC4D0@<eax>(_DWORD *result@<eax>);
// signed int __usercall sub_4BC4F0@<eax>(int a1@<eax>, int a2@<ebx>);
signed int __cdecl sub_4BC5E0(int a1, int a2);
signed int __cdecl sub_4BDA40(_DWORD *a1);
// unsigned int __usercall sub_4BDB50@<eax>(unsigned int *a1@<edi>, int a2@<esi>, unsigned int a3);
int __cdecl sub_4BDE00(unsigned int a1, unsigned __int8 *a2, unsigned int a3);
_WORD *__fastcall sub_4BDF50(int a1, int a2);
// int __usercall sub_4BDFC0@<eax>(int result@<eax>, int a2@<edi>, int a3);
// _DWORD *__usercall sub_4BE090@<eax>(_DWORD *result@<eax>, int *a2@<ecx>);
// signed int __usercall sub_4BE2B0@<eax>(signed int result@<eax>, int a2@<ecx>, _WORD *a3);
// int __usercall sub_4BE3A0@<eax>(int result@<eax>, int a2@<edx>, int a3@<ecx>);
// int __usercall sub_4BE8B0@<eax>(int a1@<eax>, int a2, int a3, int a4);
// int __usercall sub_4BEBB0@<eax>(int result@<eax>, int a2, int a3);
bool __thiscall sub_4BEFC0(int this);
// int __usercall sub_4BF070@<eax>(int result@<eax>);
// int __usercall sub_4BF0F0@<eax>(int result@<eax>);
// _DWORD *__usercall sub_4BF170@<eax>(int a1@<eax>, _BYTE *a2@<edx>, int a3@<ecx>, int a4);
_WORD *__cdecl sub_4BF200(int a1);
// signed int __usercall sub_4BF270@<eax>(int a1@<edx>, int a2@<ebx>, int a3@<edi>);
// signed int __usercall sub_4BF300@<eax>(_DWORD *a1@<esi>, int *a2);
// signed int __usercall sub_4BF500@<eax>(int a1@<eax>);
_DWORD *__cdecl sub_4BF5D0(int a1, _BYTE *a2, int a3, int a4);
int __cdecl sub_4BF670(int a1);
_WORD *__cdecl sub_4BF860(int a1, _BYTE *a2, int a3, int a4);
int __cdecl sub_4BFFF0(int a1, int a2, unsigned int a3);
void *__cdecl sub_4C0050(int a1, int a2, int a3);
void __cdecl sub_4C0070(int a1, void *Memory);
_DWORD *__cdecl sub_4C0080(_DWORD *a1, int a2);
signed int __cdecl sub_4C0540(int a1, int a2, unsigned int a3, int *a4, unsigned int *a5, _WORD *a6);
// char *__cdecl strchr(const char *Str, int Val);
// char *__cdecl strrchr(const char *Str, int Ch);
// char *__cdecl strncpy(char *Dest, const char *Source, size_t Count);
// _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *); weak
// void __cdecl srand(unsigned int Seed);
// int __cdecl rand();
void __thiscall sub_4C120A(struct type_info *this);
void *__thiscall sub_4C1218(void *Memory, char a2);
int __thiscall sub_4C12A1(char *this);
void __cdecl j__free(void *Memory);
// int sprintf(char *Dest, const char *Format, ...);
// int sprintf_s(char *DstBuf, size_t SizeInBytes, const char *Format, ...);
// void *__cdecl memset(void *Dst, int Val, size_t Size);
// _DWORD __thiscall _LocaleUpdate::_LocaleUpdate(_LocaleUpdate *this, struct localeinfo_struct *); idb
// int __cdecl _stricmp(const char *Str1, const char *Str2);
// void *__cdecl memcpy(void *Dst, const void *Src, size_t Size);
// int __cdecl fclose(FILE *File);
// size_t __cdecl fread(void *DstBuf, size_t ElementSize, size_t Count, FILE *File);
void __thiscall sub_4C1E5E(void *this);
void *__thiscall sub_4C1E69(void *Memory, char a2);
// void *__cdecl operator new(size_t Size); idb
// int __cdecl _filelength(int);
// int __cdecl _fileno(FILE *File);
// FILE *__cdecl fopen(const char *Filename, const char *Mode);
int __cdecl j__atol(const char *Str);
// void __cdecl free(void *Memory);
// void *__cdecl malloc(size_t Size);
signed int __cdecl sub_4C2474(_DWORD *a1);
signed int __cdecl sub_4C24AB(_DWORD *a1);
signed int __cdecl sub_4C2523(_DWORD *a1);
// void __cdecl __noreturn exit(int Code);
// void __cdecl __noreturn _exit(int Code);
// __time64_t __cdecl _time64(__time64_t *Time);
// int __cdecl feof(FILE *File);
// size_t __cdecl fwrite(const void *Str, size_t Size, size_t Count, FILE *File);
// void *__cdecl realloc(void *Memory, size_t NewSize);
int __cdecl sub_4C2E5B(FILE *File); // idb
int sub_4C30C1();
int __cdecl sub_4C30E3(int, FILE *File); // idb
int sub_4C3359();
int sub_4C3361(FILE *File, int a2, ...);
int __cdecl sub_4C352E(int, int, FILE *File); // idb
// int __cdecl isalpha(int C);
// int __cdecl isdigit(int C);
// int __cdecl isspace(int C);
// int __cdecl toupper(int C);
// void *__cdecl memcpy_0(void *Dst, const void *Src, size_t Size);
// int __cdecl _access(const char *, int);
int __thiscall sub_4C444A(void *this);
// int __cdecl vsprintf_s(char *DstBuf, size_t SizeInBytes, const char *Format, va_list ArgList);
// int __cdecl remove(const char *Filename);
// int __cdecl system(const char *Command);
// struct tm *__cdecl _localtime64(const __time64_t *Time);
// char *__cdecl strstr(const char *Str, const char *SubStr);
// char *__cdecl asctime(const struct tm *Tm);
// int __cdecl _memicmp(const void *Buf1, const void *Buf2, size_t Size);
// char *__cdecl _strlwr(char *String);
void *__cdecl operator new(size_t Size); // idb
// double __cdecl strtod(const char *Str, char **EndPtr);
// char *__cdecl strtok(char *Str, const char *Delim);
// int __cdecl _beginthreadex(LPSECURITY_ATTRIBUTES lpThreadAttributes, DWORD dwStackSize, int, int, DWORD dwCreationFlags, LPDWORD lpThreadId); idb
// void __stdcall `eh vector constructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *), void (__thiscall *)(void *)); idb
// void __stdcall `eh vector destructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *)); idb
signed int __cdecl sub_4C5DCA(_DWORD *a1);
signed int __cdecl sub_4C5DFE(_DWORD *a1);
signed int __cdecl sub_4C5E32(_DWORD *a1);
int *sub_4C5F08();
int *sub_4C5F0E();
int *sub_4C5F14();
void ***sub_4C5F1A();
// int __cdecl _vsprintf_l(char *DstBuf, const char *Format, _locale_t, va_list ArgList);
int __cdecl sub_4C60E2(char *DstBuf, char *Format, va_list ArgList); // idb
// _DWORD __cdecl _vscprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD); weak
int __cdecl sub_4C614E(int a1, int a2);
int __cdecl sub_4C6166(int a1, int a2, int a3);
int __cdecl sub_4C6180(int a1, int a2);
int __cdecl sub_4C6198(int a1, int a2, int a3);
// double __cdecl floor(double);
signed int __cdecl sub_4C657A(int a1, int a2);
void __cdecl j_j__free(void *Memory);
// int __cdecl fseek(FILE *File, int Offset, int Origin);
// int __cdecl rename(const char *OldFilename, const char *NewFilename);
// double __cdecl _atof_l(const char *String, _locale_t Locale);
double __cdecl sub_4C6A07(char *String);
// int __cdecl strncmp(const char *Str1, const char *Str2, size_t MaxCount);
// FILE *__cdecl _fdopen(int FileHandle, const char *Mode);
signed int __cdecl sub_4C6CD0(signed int a1);
void **sub_4C775D();
// _DWORD __cdecl _lock_file(_DWORD); weak
// _DWORD __cdecl _lock_file2(_DWORD, _DWORD); weak
// _DWORD __cdecl _unlock_file();
// _DWORD __cdecl _unlock_file2(_DWORD, _DWORD); weak
// void *__cdecl calloc(size_t NumOfElements, size_t SizeOfElements);
void __thiscall sub_4C7A74(void *this);
void *__thiscall sub_4C7A7F(void *Memory, char a2);
// _DWORD __cdecl _encode_pointer(_DWORD); weak
// int _encoded_null(void); weak
// _DWORD __cdecl _decode_pointer(_DWORD); weak
int sub_4C8D83();
// int _getptd(void); weak
// void __cdecl type_info::_Type_info_dtor(struct type_info *); idb
int __cdecl sub_4C9C9C(int a1);
int __cdecl sub_4C9CA6(int, FILE *File); // idb
// int __cdecl _output_l(int, int, struct localeinfo_struct *, int); idb
int __cdecl sub_4CA866(int a1);
// int __cdecl _invoke_watson(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int *__cdecl _errno();
// unsigned int *__cdecl __doserrno();
// _DWORD __cdecl _dosmaperr(_DWORD); weak
int sub_4CB808();
// _DWORD __cdecl flsall(_DWORD); weak
int sub_4CC7B5();
int __cdecl sub_4CC9E6(FILE *File); // idb
// int __cdecl _read(int, void *, unsigned int);
// _DWORD __thiscall std::exception::exception(std::exception *this, const char *const *); idb
// _DWORD __thiscall std::exception::exception(std::exception *this, const struct std::exception *); idb
void __thiscall sub_4CD364(void *this);
std::exception *__thiscall sub_4CD3C3(std::exception *this, char *a2);
std::exception *__thiscall sub_4CD3DC(std::exception *this, struct std::exception *a2);
void *__thiscall sub_4CD43A(void *Memory, char a2);
void *__thiscall sub_4CD456(void *Memory, char a2);
void *__thiscall sub_4CD478(void *Memory, char a2);
void *__thiscall sub_4CD49A(void *Memory, char a2);
int __cdecl sub_4CD4BC(int a1);
int __cdecl sub_4CD579(int, HANDLE hHandle); // idb
signed int __cdecl sub_4CD5F6(signed int a1);
signed int __cdecl sub_4CD677(signed int a1);
// _DWORD __cdecl __lock_fhandle(_DWORD); weak
void __cdecl sub_4CD788(int a1);
// void __usercall sub_4CDA31(int a1@<ebp>, int a2@<edi>, int a3@<esi>);
DWORD __cdecl sub_4CDA59(int a1, LONG lDistanceToMove, DWORD dwMoveMethod);
DWORD __cdecl sub_4CDACB(int a1, LONG lDistanceToMove, DWORD dwMoveMethod);
_DWORD *sub_4CE0E7();
// unsigned int __cdecl strtoxl(struct localeinfo_struct *, const char *, const char **, int, int); idb
unsigned int __cdecl sub_4CE5C7(char *a1, char **a2, int a3, struct localeinfo_struct *a4);
// unsigned __int64 __cdecl strtoxq(struct localeinfo_struct *, const char *, const char **, int, int); idb
unsigned __int64 __cdecl sub_4CE8E4(char *a1, char **a2, int a3, struct localeinfo_struct *a4);
// _DWORD __cdecl _unlock(_DWORD); weak
// _DWORD __cdecl _mtinitlocknum(_DWORD); weak
// _DWORD __cdecl _lock(_DWORD); weak
int (*sub_4CFC2B())(void);
void __cdecl sub_4CFC4F(); // idb
int sub_4D006F();
int __cdecl sub_4D047B(int a1);
int __cdecl sub_4D0589(int a1);
// _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD); weak
DWORD __cdecl sub_4D06D8(int a1, int a2, DWORD nNumberOfBytesToWrite);
DWORD __cdecl sub_4D0CFA(int a1, int a2, DWORD nNumberOfBytesToWrite);
// int __cdecl _stbuf(FILE *File); idb
// int __cdecl _ftbuf(int, FILE *File); idb
int __cdecl sub_4D1AD1(int, FILE *File, int, int, int); // idb
int __cdecl sub_4D1C1F(FILE *File, int, int, int); // idb
int __cdecl sub_4D1C3D(FILE *File, int, int, int); // idb
int __cdecl sub_4D1C5B(FILE *File, int, int, int); // idb
// int __cdecl isleadbyte(int C);
// int __fastcall _cintrindisp2(_DWORD, _DWORD); weak
// int __cdecl _output_s_l(int, int, struct localeinfo_struct *, int); idb
// int __cdecl _output_p_l(FILE *File, int, struct localeinfo_struct *, int); idb
int sub_4D5180();
// int __cdecl _malloc_crt(size_t Size); idb
// int __cdecl _calloc_crt(size_t Size, int); idb
// _DWORD __cdecl cvtdate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// BOOL __usercall sub_4D5ACB@<eax>(_DWORD *a1@<edi>);
// _DWORD __cdecl vprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD); weak
int __cdecl sub_4D7CA9(int a1, int a2, int a3);
int __cdecl sub_4D7CC3(int a1, int a2, int a3);
int __cdecl sub_4D7CDD(int a1, int a2, int a3);
char *__cdecl sub_4D7D3F(FILE *File);
// _DWORD __cdecl __strgtold12_l(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
DWORD __cdecl sub_4D8ED2(int a1, int a2, int a3, DWORD dwMoveMethod);
// __int64 __cdecl _lseeki64(int, __int64, int);
signed int __cdecl sub_4D9327(int a1, int a2);
signed int __cdecl sub_4D9429(_DWORD *a1);
void sub_4D985B();
signed int sub_4DA120();
char __thiscall sub_4DA124(_BYTE *this);
int __thiscall sub_4DA143(_DWORD *this);
int __thiscall sub_4DA19B(_DWORD *this);
int __cdecl sub_4DEC09(int a1, int a2, int a3);
// _DWORD __cdecl _getbuf(_DWORD); weak
int __cdecl sub_4DF272(signed int a1);
int sub_4E0866();
// int __cdecl _putwch_nolock(__int16 Buffer); idb
int sub_4E5371();
// int __cdecl mbtowc(wchar_t *DstCh, const char *SrcCh, size_t SrcSizeInBytes);
int __cdecl sub_4E54A4(int, int, struct localeinfo_struct *); // idb
int __cdecl sub_4E5617(int, int, struct localeinfo_struct *); // idb
HANDLE __cdecl sub_4E60A6(int a1, LPCSTR lpApplicationName, int a3, LPVOID lpEnvironment);
signed int __cdecl sub_4E6FC0(unsigned __int16 *a1, int *a2);
signed int __cdecl sub_4E7502(unsigned __int16 *a1, int *a2);
int sub_4E7D60();
// HRESULT __stdcall DirectSoundCreate(LPGUID, LPDIRECTSOUND *, LPUNKNOWN);
// int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
// unsigned int __stdcall inet_addr(const char *cp);
// u_long __stdcall htonl(u_long hostlong);
// u_short __stdcall htons(u_short hostshort);
// int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
// int __stdcall ioctlsocket(SOCKET s, int cmd, u_long *argp);
// SOCKET __stdcall socket(int af, int type, int protocol);
// int __stdcall closesocket(SOCKET s);
// int __stdcall WSAGetLastError();
// int __stdcall recvfrom(SOCKET s, char *buf, int len, int flags, struct sockaddr *from, int *fromlen);
// int __stdcall sendto(SOCKET s, const char *buf, int len, int flags, const struct sockaddr *to, int tolen);
// struct hostent *__stdcall gethostbyname(const char *name);
// int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
// char *__stdcall inet_ntoa(struct in_addr in);
// int __stdcall connect(SOCKET s, const struct sockaddr *name, int namelen);
// int __stdcall send(SOCKET s, const char *buf, int len, int flags);
// int __stdcall recv(SOCKET s, char *buf, int len, int flags);
// void __usercall sub_508C60(int a1@<ebp>);
int __cdecl SEH_404530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_508C90();
int __cdecl SEH_404B00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_508CC0();
int __cdecl SEH_404BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_508CF0();
int __cdecl SEH_404CA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __userpurge sub_508D20@<eax>(int a1@<ebp>, int a2);
void sub_508D28();
int __cdecl SEH_404DC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508D60(int a1@<ebp>);
int __cdecl SEH_4082D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508D9B(int a1@<ebp>);
int __cdecl SEH_408670(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508DF0(int a1@<ebp>);
int __cdecl SEH_408C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_508E20@<eax>(int a1@<ebp>);
int __cdecl SEH_40A130(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508E5B(int a1@<ebp>);
// void __usercall sub_508E66(int a1@<ebp>);
// void __usercall sub_508E71(int a1@<ebp>);
// void __usercall sub_508E7C(int a1@<ebp>);
// void __usercall sub_508E92(int a1@<ebp>);
// void __usercall sub_508E9D(int a1@<ebp>);
// void __usercall sub_508EA8(int a1@<ebp>);
// void __usercall sub_508EB3(int a1@<ebp>);
// void __usercall sub_508EBE(int a1@<ebp>);
// void __usercall sub_508EC9(int a1@<ebp>);
int __cdecl SEH_40A1F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508F20(int a1@<ebp>);
int __cdecl SEH_40A8A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508F70(int a1@<ebp>);
int __cdecl SEH_40BFB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508FA0(int a1@<ebp>);
int __cdecl SEH_40C2F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_508FD0(int a1@<ebp>);
int __cdecl SEH_40C860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509020(int a1@<ebp>);
// void __usercall sub_50902E(int a1@<ebp>);
// void __usercall sub_50903C(int a1@<ebp>);
// void __usercall sub_50904A(int a1@<ebp>);
// void __usercall sub_509058(int a1@<ebp>);
int __cdecl SEH_40D1A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_5090C0@<eax>(int a1@<ebp>);
int __cdecl SEH_40DC40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5090F0(int a1@<ebp>);
// void __usercall sub_5090FB(int a1@<ebp>);
int __cdecl SEH_40F5B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_509130@<eax>(int a1@<ebp>);
int __cdecl SEH_40FC40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509160(int a1@<ebp>);
int __cdecl SEH_410010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509190(int a1@<ebp>);
int __cdecl SEH_410590(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5091C0(int a1@<ebp>);
// void __usercall sub_5091CB(int a1@<ebp>);
// void __usercall sub_5091D6(int a1@<ebp>);
// void __usercall sub_5091E1(int a1@<ebp>);
// void __usercall sub_5091EC(int a1@<ebp>);
// void __usercall sub_5091F7(int a1@<ebp>);
// void __usercall sub_509202(int a1@<ebp>);
int __cdecl SEH_410880(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_509250@<eax>(int a1@<ebp>);
int __cdecl SEH_410E30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509280(int a1@<ebp>);
int __cdecl SEH_4112C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5092B0(int a1@<ebp>);
int __cdecl SEH_411790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5092E0(int a1@<ebp>);
int __cdecl SEH_411D20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509310(int a1@<ebp>);
int __cdecl SEH_411E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50935E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5093A0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_412760(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5093D0(int a1@<ebp>);
// void __usercall sub_5093DB(int a1@<ebp>);
// void __usercall sub_5093E6(int a1@<ebp>);
int __cdecl SEH_412CB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509430(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_4134D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509460(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_413AC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509490(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_413F60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5094C0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_4146D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5094F0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_414D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509520(int a1@<ebp>);
// void __usercall sub_50952B(int a1@<ebp>);
// void __usercall sub_509536(int a1@<ebp>);
// void __usercall sub_509541(int a1@<ebp>);
int __cdecl SEH_415620(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509580(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_415BC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5095B0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_415D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5095E0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
// void __usercall sub_5095EB(int a1@<ebp>);
// void __usercall sub_5095F9(int a1@<ebp>);
int __cdecl SEH_415E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509650(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_4163D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_509680(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_416500(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_5096B0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl SEH_4166A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509740(int a1@<ebp>);
int __cdecl SEH_41B390(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509770(int a1@<ebp>);
int __cdecl SEH_41BE00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5097A0(int a1@<ebp>);
int __cdecl SEH_41BF00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5097D0(int a1@<ebp>);
// void __usercall sub_5097DB(int a1@<ebp>);
int __cdecl SEH_41C050(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509810(int a1@<ebp>);
int __cdecl SEH_41C2E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509840(int a1@<ebp>);
int __cdecl SEH_41C470(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509870(int a1@<ebp>);
// void __usercall sub_50987E(int a1@<ebp>);
// void __usercall sub_50988C(int a1@<ebp>);
// void __usercall sub_50989A(int a1@<ebp>);
// void __usercall sub_5098A8(int a1@<ebp>);
// void __usercall sub_5098B6(int a1@<ebp>);
// void __usercall sub_5098C4(int a1@<ebp>);
// void __usercall sub_5098D2(int a1@<ebp>);
// void __usercall sub_5098E0(int a1@<ebp>);
// void __usercall sub_5098EE(int a1@<ebp>);
int __cdecl SEH_41F6B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509960(int a1@<ebp>);
int __cdecl SEH_4203D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_5099B0(int a1@<ebp>);
int __cdecl SEH_421060(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509A00(int a1@<ebp>);
int __cdecl SEH_423B90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509A30(int a1@<ebp>);
// void __usercall sub_509A3B(int a1@<ebp>);
// void __usercall sub_509A46(int a1@<ebp>);
// void __usercall sub_509A51(int a1@<ebp>);
// void __usercall sub_509A5C(int a1@<ebp>);
// void __usercall sub_509A67(int a1@<ebp>);
// void __usercall sub_509A72(int a1@<ebp>);
int __cdecl SEH_426170(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509AC0(int a1@<ebp>);
int __cdecl SEH_426900(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509B10(int a1@<ebp>);
// void __usercall sub_509B1E(int a1@<ebp>);
// void __usercall sub_509B2C(int a1@<ebp>);
// void __usercall sub_509B3A(int a1@<ebp>);
// void __usercall sub_509B48(int a1@<ebp>);
// void __usercall sub_509B56(int a1@<ebp>);
// void __usercall sub_509B64(int a1@<ebp>);
// void __usercall sub_509B72(int a1@<ebp>);
// void __usercall sub_509B80(int a1@<ebp>);
// void __usercall sub_509B8E(int a1@<ebp>);
int __cdecl SEH_426B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509C00(int a1@<ebp>);
int __cdecl SEH_428090(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509C30(int a1@<ebp>);
int __cdecl SEH_4281F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509C60(int a1@<ebp>);
int __cdecl SEH_428C70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509C90(int a1@<ebp>);
// void __usercall sub_509C9E(int a1@<ebp>);
int __cdecl SEH_428E20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509CF0(int a1@<ebp>);
int __cdecl SEH_429B40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509D40(int a1@<ebp>);
int __cdecl SEH_429ED0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509D90(int a1@<ebp>);
int __cdecl SEH_42A520(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509DC0(int a1@<ebp>);
// void __usercall sub_509DCE(int a1@<ebp>);
// void __usercall sub_509DDC(int a1@<ebp>);
// void __usercall sub_509DEA(int a1@<ebp>);
int __cdecl SEH_42D110(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509E40(int a1@<ebp>);
int __cdecl SEH_42D960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509E70(int a1@<ebp>);
int __cdecl SEH_42E660(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509EA0(int a1@<ebp>);
// void __usercall sub_509EAE(int a1@<ebp>);
// void __usercall sub_509EBC(int a1@<ebp>);
// void __usercall sub_509ECA(int a1@<ebp>);
// void __usercall sub_509ED8(int a1@<ebp>);
// void __usercall sub_509EE6(int a1@<ebp>);
int __cdecl SEH_42ED20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509F50(int a1@<ebp>);
// void __usercall sub_509F5E(int a1@<ebp>);
// void __usercall sub_509F6C(int a1@<ebp>);
int __cdecl SEH_42FBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_509FC0(int a1@<ebp>);
// void __usercall sub_509FCE(int a1@<ebp>);
int __cdecl SEH_431020(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A020(int a1@<ebp>);
// void __usercall sub_50A02E(int a1@<ebp>);
int __cdecl SEH_435D80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50A080@<eax>(int a1@<ebp>);
int __cdecl SEH_43AE00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A0B0(int a1@<ebp>);
// void __usercall sub_50A0BB(int a1@<ebp>);
// void __usercall sub_50A0C6(int a1@<ebp>);
// void __usercall sub_50A0D1(int a1@<ebp>);
// void __usercall sub_50A0DC(int a1@<ebp>);
// void __usercall sub_50A0E7(int a1@<ebp>);
// void __usercall sub_50A0F2(int a1@<ebp>);
// void __usercall sub_50A0FD(int a1@<ebp>);
// void __usercall sub_50A108(int a1@<ebp>);
// void __usercall sub_50A113(int a1@<ebp>);
int __cdecl SEH_43AF40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50A160@<eax>(int a1@<ebp>);
// void __usercall sub_50A16B(int a1@<ebp>);
// void __usercall sub_50A179(int a1@<ebp>);
// void __usercall sub_50A187(int a1@<ebp>);
// void __usercall sub_50A195(int a1@<ebp>);
// void __usercall sub_50A1A3(int a1@<ebp>);
// void __usercall sub_50A1B1(int a1@<ebp>);
// void __usercall sub_50A1BF(int a1@<ebp>);
// void __usercall sub_50A1CD(int a1@<ebp>);
// void __usercall sub_50A1DB(int a1@<ebp>);
int __cdecl SEH_43C370(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50A250@<eax>(int a1@<ebp>);
int __cdecl SEH_43D130(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A280(int a1@<ebp>);
int __cdecl SEH_43D1C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A2B0(int a1@<ebp>);
// void __usercall sub_50A2BE(int a1@<ebp>);
int __cdecl SEH_43D2C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A310(int a1@<ebp>);
// void __usercall sub_50A31E(int a1@<ebp>);
// void __usercall sub_50A32C(int a1@<ebp>);
int __cdecl SEH_43DF70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A380(int a1@<ebp>);
// void __usercall sub_50A38E(int a1@<ebp>);
// void __usercall sub_50A39C(int a1@<ebp>);
// void __usercall sub_50A3AA(int a1@<ebp>);
int __cdecl SEH_43EB20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A400(int a1@<ebp>);
int __cdecl SEH_43FDC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50A450(int a1@<ebp>, int a2, int a3);
int __cdecl SEH_440850(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A480(int a1@<ebp>);
// void __usercall sub_50A48B(int a1@<ebp>);
// void __usercall sub_50A496(int a1@<ebp>);
int __cdecl SEH_440AA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A4D0(int a1@<ebp>);
// void __usercall sub_50A4DB(int a1@<ebp>);
int __cdecl SEH_440C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50A510@<eax>(int a1@<ebp>);
int __cdecl SEH_441860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50A540(int a1@<ebp>, int a2, int a3);
int __cdecl SEH_442490(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A5A7(int a1@<ebp>);
// void __usercall sub_50A5B2(int a1@<ebp>);
// void __usercall sub_50A5BD(int a1@<ebp>);
// void __usercall sub_50A5C8(int a1@<ebp>);
// void __usercall sub_50A5D3(int a1@<ebp>);
int __cdecl SEH_445780(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A620(int a1@<ebp>);
int __cdecl SEH_445D20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A650(int a1@<ebp>);
// void __usercall sub_50A65E(int a1@<ebp>);
int __cdecl SEH_449010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A6B0(int a1@<ebp>);
// void __usercall sub_50A6BE(int a1@<ebp>);
int __cdecl SEH_449C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A710(int a1@<ebp>);
int __cdecl SEH_44E920(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50A760(int a1@<ebp>);
// void __usercall sub_50A76E(int a1@<ebp>);
// void __usercall sub_50A77C(int a1@<ebp>);
// void __usercall sub_50A78A(int a1@<ebp>);
// void __usercall sub_50A798(int a1@<ebp>);
// void __usercall sub_50A7A6(int a1@<ebp>);
// void __usercall sub_50A7B4(int a1@<ebp>);
// void __usercall sub_50A7C2(int a1@<ebp>);
// void __usercall sub_50A7D0(int a1@<ebp>);
// void __usercall sub_50A7DE(int a1@<ebp>);
// void __usercall sub_50A7EC(int a1@<ebp>);
// void __usercall sub_50A7FA(int a1@<ebp>);
// void __usercall sub_50A808(int a1@<ebp>);
// void __usercall sub_50A816(int a1@<ebp>);
// void __usercall sub_50A824(int a1@<ebp>);
// void __usercall sub_50A832(int a1@<ebp>);
// void __usercall sub_50A840(int a1@<ebp>);
// void __usercall sub_50A84E(int a1@<ebp>);
// void __usercall sub_50A85C(int a1@<ebp>);
// void __usercall sub_50A86A(int a1@<ebp>);
// void __usercall sub_50A878(int a1@<ebp>);
// void __usercall sub_50A886(int a1@<ebp>);
// void __usercall sub_50A894(int a1@<ebp>);
// void __usercall sub_50A8A2(int a1@<ebp>);
// void __usercall sub_50A8B0(int a1@<ebp>);
// void __usercall sub_50A8BE(int a1@<ebp>);
// void __usercall sub_50A8CC(int a1@<ebp>);
// void __usercall sub_50A8DA(int a1@<ebp>);
// void __usercall sub_50A8E8(int a1@<ebp>);
// void __usercall sub_50A8F6(int a1@<ebp>);
// void __usercall sub_50A904(int a1@<ebp>);
// void __usercall sub_50A912(int a1@<ebp>);
// void __usercall sub_50A920(int a1@<ebp>);
// void __usercall sub_50A92E(int a1@<ebp>);
// void __usercall sub_50A93C(int a1@<ebp>);
// void __usercall sub_50A94A(int a1@<ebp>);
// void __usercall sub_50A958(int a1@<ebp>);
// void __usercall sub_50A966(int a1@<ebp>);
// void __usercall sub_50A974(int a1@<ebp>);
// void __usercall sub_50A982(int a1@<ebp>);
// void __usercall sub_50A990(int a1@<ebp>);
// void __usercall sub_50A99E(int a1@<ebp>);
// void __usercall sub_50A9AC(int a1@<ebp>);
// void __usercall sub_50A9BA(int a1@<ebp>);
// void __usercall sub_50A9C8(int a1@<ebp>);
int __cdecl SEH_44F580(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AAB0(int a1@<ebp>);
// void __usercall sub_50AABE(int a1@<ebp>);
// void __usercall sub_50AACC(int a1@<ebp>);
// void __usercall sub_50AADA(int a1@<ebp>);
// void __usercall sub_50AAE8(int a1@<ebp>);
// void __usercall sub_50AAF6(int a1@<ebp>);
// void __usercall sub_50AB04(int a1@<ebp>);
// void __usercall sub_50AB12(int a1@<ebp>);
// void __usercall sub_50AB20(int a1@<ebp>);
// void __usercall sub_50AB2E(int a1@<ebp>);
int __cdecl SEH_4535A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50ABA0(int a1@<ebp>);
// void __usercall sub_50ABAE(int a1@<ebp>);
// void __usercall sub_50ABBC(int a1@<ebp>);
// void __usercall sub_50ABCA(int a1@<ebp>);
// void __usercall sub_50ABD8(int a1@<ebp>);
// void __usercall sub_50ABE6(int a1@<ebp>);
// void __usercall sub_50ABF4(int a1@<ebp>);
// void __usercall sub_50AC02(int a1@<ebp>);
// void __usercall sub_50AC10(int a1@<ebp>);
// void __usercall sub_50AC1E(int a1@<ebp>);
// void __usercall sub_50AC2C(int a1@<ebp>);
// void __usercall sub_50AC3A(int a1@<ebp>);
// void __usercall sub_50AC48(int a1@<ebp>);
// void __usercall sub_50AC56(int a1@<ebp>);
// void __usercall sub_50AC64(int a1@<ebp>);
// void __usercall sub_50AC72(int a1@<ebp>);
// void __usercall sub_50AC80(int a1@<ebp>);
// void __usercall sub_50AC8E(int a1@<ebp>);
// void __usercall sub_50AC9C(int a1@<ebp>);
// void __usercall sub_50ACAA(int a1@<ebp>);
// void __usercall sub_50ACB8(int a1@<ebp>);
// void __usercall sub_50ACC6(int a1@<ebp>);
// void __usercall sub_50ACD4(int a1@<ebp>);
// void __usercall sub_50ACE2(int a1@<ebp>);
int __cdecl SEH_454790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50AD80(int a1@<ebp>, int a2, int a3);
int __cdecl SEH_457BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50ADB0@<eax>(int a1@<ebp>);
int __cdecl SEH_457C90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50ADE0(int a1@<ebp>);
// void __usercall sub_50ADEB(int a1@<ebp>);
// void __usercall sub_50ADF6(int a1@<ebp>);
int __cdecl SEH_457E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AE70(int a1@<ebp>);
int __cdecl SEH_4583C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AEA0(int a1@<ebp>);
int __cdecl SEH_458A80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AED0(int a1@<ebp>);
int __cdecl SEH_458DD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AF20(int a1@<ebp>);
int __cdecl SEH_45BCF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AF70(int a1@<ebp>);
int __cdecl SEH_45E7B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AFA0(int a1@<ebp>);
int __cdecl SEH_45F320(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50AFD0(int a1@<ebp>);
int __cdecl SEH_45F3B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B000(int a1@<ebp>);
int __cdecl SEH_460220(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B030(int a1@<ebp>);
// void __usercall sub_50B038(int a1@<ebp>);
int __cdecl SEH_460F00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B070(int a1@<ebp>);
int __cdecl SEH_462BC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B0C0(int a1@<ebp>);
// void __usercall sub_50B0CB(int a1@<ebp>);
// void __usercall sub_50B0D6(int a1@<ebp>);
// void __usercall sub_50B0E1(int a1@<ebp>);
// void __usercall sub_50B0EC(int a1@<ebp>);
// void __usercall sub_50B0F7(int a1@<ebp>);
// void __usercall sub_50B102(int a1@<ebp>);
// void __usercall sub_50B10D(int a1@<ebp>);
// void __usercall sub_50B118(int a1@<ebp>);
// void __usercall sub_50B123(int a1@<ebp>);
// void __usercall sub_50B12E(int a1@<ebp>);
int __cdecl SEH_463750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B180(int a1@<ebp>);
// void __usercall sub_50B18B(int a1@<ebp>);
// void __usercall sub_50B196(int a1@<ebp>);
// void __usercall sub_50B1A1(int a1@<ebp>);
// void __usercall sub_50B1AC(int a1@<ebp>);
// void __usercall sub_50B1B7(int a1@<ebp>);
int __cdecl SEH_464AE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B200(int a1@<ebp>);
// void __usercall sub_50B20B(int a1@<ebp>);
int __cdecl SEH_464F20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B240(int a1@<ebp>);
int __cdecl SEH_465B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50B270(int a1@<ebp>, int a2, int a3, int a4);
int __cdecl SEH_466630(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B2A0@<eax>(int a1@<ebp>);
int __cdecl SEH_466750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B2D0@<eax>(int a1@<ebp>);
int __cdecl SEH_467400(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B300(int a1@<ebp>);
// void __usercall sub_50B30B(int a1@<ebp>);
int __cdecl SEH_467510(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B340(int a1@<ebp>);
int __cdecl SEH_4680E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B370(int a1@<ebp>);
int __cdecl SEH_4693F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B3A0(int a1@<ebp>);
int __cdecl SEH_46AA50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B3F0(int a1@<ebp>);
int __cdecl SEH_46AD50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B420@<eax>(int a1@<ebp>);
int __cdecl SEH_46B440(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B450(int a1@<ebp>);
// void __usercall sub_50B45B(int a1@<ebp>);
// void __usercall sub_50B471(int a1@<ebp>);
// void __usercall sub_50B47C(int a1@<ebp>);
// void __usercall sub_50B487(int a1@<ebp>);
// void __usercall sub_50B492(int a1@<ebp>);
// void __usercall sub_50B49D(int a1@<ebp>);
// void __usercall sub_50B4A8(int a1@<ebp>);
// void __usercall sub_50B4B3(int a1@<ebp>);
// void __usercall sub_50B4BE(int a1@<ebp>);
// void __usercall sub_50B4C9(int a1@<ebp>);
int __cdecl SEH_46B8B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B520(int a1@<ebp>);
int __cdecl SEH_46C180(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B550(int a1@<ebp>);
int __cdecl SEH_46C750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B580@<eax>(int a1@<ebp>);
int __cdecl SEH_46CC80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B5B0(int a1@<ebp>);
int __cdecl SEH_46D040(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B5E0(int a1@<ebp>);
int __cdecl SEH_46D600(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B610(int a1@<ebp>);
int __cdecl SEH_46E940(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B640(int a1@<ebp>);
int __cdecl SEH_472960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B670(int a1@<ebp>);
int __cdecl SEH_472C80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B700(int a1@<ebp>);
int __cdecl SEH_478160(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B730@<eax>(int a1@<ebp>);
int __cdecl SEH_478700(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B760(int a1@<ebp>);
// void __usercall sub_50B76B(int a1@<ebp>);
// void __usercall sub_50B776(int a1@<ebp>);
// void __usercall sub_50B781(int a1@<ebp>);
int __cdecl SEH_479B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B7C0@<eax>(int a1@<ebp>);
int __cdecl SEH_47C7B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B7F0@<eax>(int a1@<ebp>);
int __cdecl SEH_47E6A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B820(int a1@<ebp>);
// void __usercall sub_50B82B(int a1@<ebp>);
// void __usercall sub_50B836(int a1@<ebp>);
int __cdecl SEH_47E8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B870(int a1@<ebp>);
int __cdecl SEH_47F4C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B8A0(int a1@<ebp>);
int __cdecl SEH_47F7C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50B8D0@<eax>(int a1@<ebp>);
int __cdecl SEH_47F980(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50B900(int a1@<ebp>, int a2, int a3, int a4, int a5);
int __cdecl SEH_47FA60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B940(int a1@<ebp>);
// void __usercall sub_50B94B(int a1@<ebp>);
// void __usercall sub_50B956(int a1@<ebp>);
int __cdecl SEH_47FD20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B990(int a1@<ebp>);
int __cdecl SEH_480DB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B9C0(int a1@<ebp>);
int __cdecl SEH_480E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50B9F0(int a1@<ebp>);
int __cdecl SEH_480B50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BA13(int a1@<ebp>);
int __cdecl SEH_480BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BA36(int a1@<ebp>);
// void __usercall sub_50BA41(int a1@<ebp>);
int __cdecl SEH_480C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BA7D(int a1@<ebp>);
int __cdecl SEH_480D30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BAA0(int a1@<ebp>);
// void __usercall sub_50BAAB(int a1@<ebp>);
// void __usercall sub_50BAB6(int a1@<ebp>);
// void __usercall sub_50BAC1(int a1@<ebp>);
// void __usercall sub_50BACC(int a1@<ebp>);
int __cdecl SEH_4811C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50BB00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50BB29(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50BB51(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BB70();
int __cdecl SEH_481B90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BBA0();
int __cdecl SEH_481C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BBD0();
int __cdecl SEH_481CF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BC00();
int __cdecl SEH_481DA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BC30();
int __cdecl SEH_481E80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BC60();
int __cdecl SEH_481F90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BC90(int a1);
int __cdecl SEH_482190(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BCB3(int a1, int a2);
int __cdecl SEH_4829F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50BCE1(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BD0F();
int __cdecl SEH_482D50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BD32();
int __cdecl SEH_482DD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BD55(int a1, int a2);
int __cdecl SEH_482E50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BD78(int a1, int a2, int a3);
int __cdecl SEH_482EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BD9B(int a1@<ebp>);
// void __usercall sub_50BDA3(int a1@<ebp>);
// void __usercall sub_50BDB1(int a1@<ebp>);
void sub_50BDBF();
// void __usercall sub_50BDC7(int a1@<ebp>);
int __cdecl SEH_483180(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BDEA();
int __cdecl SEH_483560(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BE0D(int a1, int a2);
int __cdecl SEH_483870(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BE30(int a1@<ebp>);
int __cdecl SEH_483A00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BE6C(int a1, int a2);
int __cdecl SEH_483D60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BE8F(int a1, int a2, int a3);
int __cdecl SEH_483E60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50BEB2();
int __cdecl SEH_483F30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50BED5(int a1@<ebp>);
int __cdecl SEH_484010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BF11(int a1);
void __stdcall sub_50BF1C(int a1);
int __cdecl SEH_485030(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50BF55(int a1);
void __stdcall sub_50BF5D(int a1, int a2, int a3, int a4);
int __cdecl SEH_485440(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50BF80(int a1@<ebp>, int a2, int a3, int a4, int a5);
// void __userpurge sub_50BF88(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50BF96(int a1@<ebp>, int a2, int a3);
void __stdcall sub_50BFA4(int a1, int a2);
void __stdcall sub_50BFAC(int a1, int a2);
int __cdecl SEH_485510(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50BFCF(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50BFD7(int a1@<ebp>, int a2);
// void __userpurge sub_50BFE5(int a1@<ebp>, int a2);
void __stdcall sub_50BFF3(int a1);
void sub_50BFFB();
void sub_50C003();
void __stdcall sub_50C00B(int a1);
int __cdecl SEH_485640(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C02E(int a1);
void sub_50C036();
int __cdecl SEH_485840(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50C060();
int __cdecl SEH_486010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C08E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C0BC(int a1@<ebp>);
int __cdecl SEH_486660(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50C0DF();
int __cdecl SEH_486770(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C102(int a1);
int __cdecl SEH_486880(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C12D(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C150(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C16B(int a1);
int __cdecl SEH_486B10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C196(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C1B1(int a1, int a2);
int __cdecl SEH_486CF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C1D4(int a1);
int __cdecl SEH_486E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C1F7(int a1, int a2, int a3, int a4);
// void __usercall sub_50C1FF(int a1@<ebp>);
int __cdecl SEH_486EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C225(int a1);
int __cdecl SEH_487070(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C25B(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50C27E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C299(int a1@<ebp>);
int __cdecl SEH_487370(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50C2BC(int a1@<ebp>, int a2);
// void __usercall sub_50C2C4(int a1@<ebp>);
// void __usercall sub_50C2D2(int a1@<ebp>);
// void __userpurge sub_50C2E0(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C2EE(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C2FC(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C30A(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C318(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C326(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C334(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C342(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C350(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C35E(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_50C36C(int a1@<ebp>, int a2, int a3);
// void __usercall sub_50C37A(int a1@<ebp>);
// void __usercall sub_50C388(int a1@<ebp>);
// void __usercall sub_50C396(int a1@<ebp>);
// void __usercall sub_50C3A4(int a1@<ebp>);
// void __usercall sub_50C3B2(int a1@<ebp>);
// void __usercall sub_50C3C0(int a1@<ebp>);
// void __usercall sub_50C3CE(int a1@<ebp>);
// void __usercall sub_50C3D9(int a1@<ebp>);
// void __usercall sub_50C3E4(int a1@<ebp>);
// void __usercall sub_50C3EF(int a1@<ebp>);
// void __usercall sub_50C3FA(int a1@<ebp>);
// void __usercall sub_50C405(int a1@<ebp>);
int __cdecl SEH_487400(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C42B(int a1);
int __cdecl SEH_487A70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C44E(int a1, int a2, int a3);
// void __usercall sub_50C459(int a1@<ebp>);
int __cdecl SEH_487B20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C495(int a1@<ebp>);
int __cdecl SEH_487CB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C4BB(int a1, int a2, int a3, int a4);
void sub_50C4C3();
// void __usercall sub_50C4CB(int a1@<ebp>);
int __cdecl SEH_487F10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50C4F1();
int __cdecl SEH_4881B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50C514();
int __cdecl SEH_488260(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C537(int a1);
int __cdecl SEH_488530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C55A(int a1@<ebp>);
// void __usercall sub_50C562(int a1@<ebp>);
// void __usercall sub_50C570(int a1@<ebp>);
// void __usercall sub_50C57E(int a1@<ebp>);
// void __usercall sub_50C58C(int a1@<ebp>);
// void __usercall sub_50C59A(int a1@<ebp>);
// void __usercall sub_50C5A8(int a1@<ebp>);
// void __usercall sub_50C5B6(int a1@<ebp>);
// void __usercall sub_50C5C4(int a1@<ebp>);
// void __usercall sub_50C5D2(int a1@<ebp>);
// void __usercall sub_50C5E0(int a1@<ebp>);
// void __usercall sub_50C5EE(int a1@<ebp>);
// void __usercall sub_50C5FC(int a1@<ebp>);
// void __usercall sub_50C60A(int a1@<ebp>);
// void __usercall sub_50C618(int a1@<ebp>);
// void __usercall sub_50C626(int a1@<ebp>);
// void __usercall sub_50C634(int a1@<ebp>);
// void __usercall sub_50C642(int a1@<ebp>);
// void __usercall sub_50C650(int a1@<ebp>);
// void __usercall sub_50C65E(int a1@<ebp>);
void sub_50C66C();
void sub_50C674();
void sub_50C67C();
// void __usercall sub_50C684(int a1@<ebp>);
int __cdecl SEH_488620(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C6A7(int a1@<ebp>);
void __stdcall sub_50C6B2(int a1);
int __cdecl SEH_4889A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C6E2(int a1);
void __stdcall sub_50C6EA(int a1, int a2);
int __cdecl SEH_488CA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C70D(int a1, int a2);
void __stdcall sub_50C715(int a1);
void __stdcall sub_50C71D(int a1);
int __cdecl SEH_488ED0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void __stdcall sub_50C740(int a1);
int __cdecl SEH_48A0A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50C770(int a1@<ebp>, int a2, int a3);
int __cdecl SEH_48A780(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C793(int a1@<ebp>);
int __cdecl SEH_48A810(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C7B6(int a1@<ebp>);
int __cdecl SEH_48A8A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50C7D9(int a1@<ebp>, int a2, int a3);
int __cdecl SEH_48A960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C7FC(int a1@<ebp>);
int __cdecl SEH_48A9F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50C820(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_50C82E(int a1@<ebp>);
// void __usercall sub_50C839(int a1@<ebp>);
int __cdecl SEH_48AD40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50C85F(int a1@<ebp>, int a2, int a3, int a4);
int __cdecl SEH_48B470(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C890(int a1@<ebp>);
int __cdecl SEH_48EA00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50C8D0@<eax>(int a1@<ebp>);
// void __usercall sub_50C8DB(int a1@<ebp>);
// void __usercall sub_50C8E6(int a1@<ebp>);
// void __usercall sub_50C8F1(int a1@<ebp>);
int __cdecl SEH_48EDE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50C920(int a1@<ebp>);
// void __usercall sub_50C92B(int a1@<ebp>);
// void __usercall sub_50C936(int a1@<ebp>);
// void __usercall sub_50C941(int a1@<ebp>);
int __cdecl SEH_48EEF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50C970@<eax>(int a1@<ebp>);
int __cdecl SEH_491B60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50C9AF@<eax>(int a1@<ebp>);
int __cdecl SEH_491EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50C9E8@<eax>(int a1@<ebp>);
int __cdecl SEH_491FD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50CA0B@<eax>(int a1@<ebp>);
int __cdecl SEH_4920F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_492530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_4926F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_492820(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_4929C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_492B40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_492BB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50CB0D@<eax>(int a1@<ebp>);
int __cdecl SEH_492C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50CB30@<eax>(int a1@<ebp>);
int __cdecl SEH_492CD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl SEH_492DB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50CB76@<eax>(int a1@<ebp>);
int __cdecl SEH_493580(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CB99(int a1@<ebp>);
// void __usercall sub_50CBA4(int a1@<ebp>);
// void __usercall sub_50CBAF(int a1@<ebp>);
// void __usercall sub_50CBBA(int a1@<ebp>);
// void __usercall sub_50CBC5(int a1@<ebp>);
// void __usercall sub_50CBD0(int a1@<ebp>);
// void __usercall sub_50CBDB(int a1@<ebp>);
// void __usercall sub_50CBE6(int a1@<ebp>);
// void __usercall sub_50CBF1(int a1@<ebp>);
// void __usercall sub_50CBFC(int a1@<ebp>);
// void __usercall sub_50CC07(int a1@<ebp>);
// void __usercall sub_50CC12(int a1@<ebp>);
// void __usercall sub_50CC1D(int a1@<ebp>);
int __cdecl SEH_493870(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CC50(int a1@<ebp>);
int __cdecl SEH_4955D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CC90(int a1@<ebp>);
int __cdecl SEH_49A640(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CCC0(int a1@<ebp>);
int __cdecl SEH_49CFB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50CCEF(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __cdecl SEH_49D560(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CD28(int a1@<ebp>);
int __cdecl SEH_49DAB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50CD4B(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __cdecl SEH_49EEA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50CD6E(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __cdecl SEH_49F860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CD91(int a1@<ebp>);
int __cdecl SEH_49FA40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CDB4(int a1@<ebp>);
int __cdecl SEH_49FBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CDD7(int a1@<ebp>);
int __cdecl SEH_49FCA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50CDFA(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7);
// void __usercall sub_50CE05(int a1@<ebp>);
int __cdecl SEH_4A04F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CE41(int a1@<ebp>);
// void __usercall sub_50CE4C(int a1@<ebp>);
int __cdecl SEH_4A0800(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50CE72(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __cdecl SEH_4A0990(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CEA0(int a1@<ebp>);
int __cdecl SEH_4A4210(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CEC3(int a1@<ebp>);
int __cdecl SEH_4A5420(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CEFC(int a1@<ebp>);
int __cdecl SEH_4A5790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CF1F(int a1@<ebp>);
int __cdecl SEH_4A5890(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CF50(int a1@<ebp>);
int __cdecl SEH_4A7C00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CF83(int a1@<ebp>);
// void __usercall sub_50CF8E(int a1@<ebp>);
int __cdecl SEH_4A8280(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CFC0(int a1@<ebp>);
int __cdecl SEH_4A9D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50CFF0(int a1@<ebp>);
// void __usercall sub_50CFFB(int a1@<ebp>);
// void __usercall sub_50D009(int a1@<ebp>);
// void __usercall sub_50D017(int a1@<ebp>);
// void __usercall sub_50D025(int a1@<ebp>);
// void __usercall sub_50D033(int a1@<ebp>);
// void __usercall sub_50D041(int a1@<ebp>);
// void __usercall sub_50D04F(int a1@<ebp>);
int __cdecl SEH_4AC960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D08B(int a1@<ebp>);
int __cdecl SEH_4ACEA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D0B0(int a1@<ebp>, int a2);
int __cdecl SEH_4AD220(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D0E9(int a1@<ebp>, int a2);
int __cdecl SEH_4AD430(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D10C(int a1@<ebp>, int a2);
int __cdecl SEH_4AD8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D12F(int a1@<ebp>, int a2);
int __cdecl SEH_4ADDF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D152(int a1@<ebp>, int a2);
int __cdecl SEH_4AE140(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D175(int a1@<ebp>, int a2);
int __cdecl SEH_4AE600(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D198(int a1@<ebp>, int a2);
int __cdecl SEH_4AE8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D1BB(int a1@<ebp>, int a2);
int __cdecl SEH_4AEBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D1DE(int a1@<ebp>, int a2);
int __cdecl SEH_4AF320(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D201(int a1@<ebp>, int a2);
int __cdecl SEH_4AF630(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D224(int a1@<ebp>);
// void __usercall sub_50D22F(int a1@<ebp>);
// void __usercall sub_50D23A(int a1@<ebp>);
// void __usercall sub_50D245(int a1@<ebp>);
// void __usercall sub_50D250(int a1@<ebp>);
// void __usercall sub_50D25B(int a1@<ebp>);
// void __usercall sub_50D266(int a1@<ebp>);
// void __usercall sub_50D271(int a1@<ebp>);
// void __usercall sub_50D27C(int a1@<ebp>);
// void __usercall sub_50D287(int a1@<ebp>);
int __cdecl SEH_4AF7E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D2B0(int a1@<ebp>, int a2);
int __cdecl SEH_4B0FB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D2D3(int a1@<ebp>, int a2);
int __cdecl SEH_4B1B80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D2F6(int a1@<ebp>, int a2);
int __cdecl SEH_4B20E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __userpurge sub_50D319(int a1@<ebp>, int a2);
int __cdecl SEH_4B29B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D352(int a1@<ebp>);
// void __usercall sub_50D35D(int a1@<ebp>);
// void __usercall sub_50D368(int a1@<ebp>);
// void __usercall sub_50D373(int a1@<ebp>);
// void __usercall sub_50D37E(int a1@<ebp>);
int __cdecl SEH_4B2CC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D3B0(int a1@<ebp>);
// void __usercall sub_50D3BE(int a1@<ebp>);
int __cdecl SEH_4B3700(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D400(int a1@<ebp>);
// void __usercall sub_50D40E(int a1@<ebp>);
int __cdecl SEH_4B3AF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// void __usercall sub_50D450(int a1@<ebp>);
int __cdecl SEH_4B3E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50D480@<eax>(int a1@<ebp>);
int __cdecl SEH_4B4E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
// int __usercall sub_50D4A3@<eax>(int a1@<ebp>);
int __cdecl SEH_4B4F10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
int __cdecl sub_50D4C6(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4);
void sub_50EC90();
void sub_50ECA0();
void sub_50ECB0();
void __cdecl sub_50ECBA(); // idb
// LONG __stdcall RegSetValueExA(HKEY hKey, LPCSTR lpValueName, DWORD Reserved, DWORD dwType, const BYTE *lpData, DWORD cbData);
// LONG __stdcall RegCloseKey(HKEY hKey);
// LONG __stdcall RegCreateKeyExA(HKEY hKey, LPCSTR lpSubKey, DWORD Reserved, LPSTR lpClass, DWORD dwOptions, REGSAM samDesired, LPSECURITY_ATTRIBUTES lpSecurityAttributes, PHKEY phkResult, LPDWORD lpdwDisposition);
// LONG __stdcall RegQueryValueExA(HKEY hKey, LPCSTR lpValueName, LPDWORD lpReserved, LPDWORD lpType, LPBYTE lpData, LPDWORD lpcbData);
// void __stdcall InitCommonControls();
// HDC __stdcall CreateCompatibleDC(HDC);
// int __stdcall GetObjectA(HGDIOBJ, int, LPVOID);
// BOOL __stdcall StretchBlt(HDC, int, int, int, int, HDC, int, int, int, int, DWORD);
// COLORREF __stdcall SetPixel(HDC, int, int, COLORREF);
// BOOL __stdcall DeleteDC(HDC);
// HGDIOBJ __stdcall GetStockObject(int);
// HBRUSH __stdcall CreateSolidBrush(COLORREF);
// HGDIOBJ __stdcall SelectObject(HDC, HGDIOBJ);
// BOOL __stdcall Rectangle(HDC, int, int, int, int);
// BOOL __stdcall DeleteObject(HGDIOBJ);
// COLORREF __stdcall SetTextColor(HDC, COLORREF);
// UINT __stdcall SetTextAlign(HDC, UINT);
// int __stdcall SetBkMode(HDC, int);
// BOOL __stdcall TextOutA(HDC, int, int, LPCSTR, int);
// int __stdcall GetDeviceCaps(HDC, int);
// COLORREF __stdcall GetPixel(HDC, int, int);
// BOOL __stdcall CreateProcessA(LPCSTR lpApplicationName, LPSTR lpCommandLine, LPSECURITY_ATTRIBUTES lpProcessAttributes, LPSECURITY_ATTRIBUTES lpThreadAttributes, BOOL bInheritHandles, DWORD dwCreationFlags, LPVOID lpEnvironment, LPCSTR lpCurrentDirectory, LPSTARTUPINFOA lpStartupInfo, LPPROCESS_INFORMATION lpProcessInformation);
// BOOL __stdcall GetVersionExA(LPOSVERSIONINFOA lpVersionInformation);
// BOOL __stdcall GlobalUnlock(HGLOBAL hMem);
// LPVOID __stdcall GlobalLock(HGLOBAL hMem);
// HGLOBAL __stdcall GlobalAlloc(UINT uFlags, DWORD dwBytes);
// void __stdcall GetLocalTime(LPSYSTEMTIME lpSystemTime);
// BOOL __stdcall GetConsoleMode(HANDLE hConsoleHandle, LPDWORD lpMode);
// UINT __stdcall GetConsoleCP();
// int __stdcall WideCharToMultiByte(UINT CodePage, DWORD dwFlags, LPCWSTR lpWideCharStr, int cchWideChar, LPSTR lpMultiByteStr, int cchMultiByte, LPCSTR lpDefaultChar, LPBOOL lpUsedDefaultChar);
// HMODULE __stdcall LoadLibraryA(LPCSTR lpLibFileName);
// BOOL __stdcall GetVolumeInformationA(LPCSTR lpRootPathName, LPSTR lpVolumeNameBuffer, DWORD nVolumeNameSize, LPDWORD lpVolumeSerialNumber, LPDWORD lpMaximumComponentLength, LPDWORD lpFileSystemFlags, LPSTR lpFileSystemNameBuffer, DWORD nFileSystemNameSize);
// DWORD __stdcall SetFilePointer(HANDLE hFile, LONG lDistanceToMove, PLONG lpDistanceToMoveHigh, DWORD dwMoveMethod);
// BOOL __stdcall SetStdHandle(DWORD nStdHandle, HANDLE hHandle);
// void __stdcall GlobalMemoryStatus(LPMEMORYSTATUS lpBuffer);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// BOOL __stdcall WriteProcessMemory(HANDLE hProcess, LPVOID lpBaseAddress, LPVOID lpBuffer, DWORD nSize, LPDWORD lpNumberOfBytesWritten);
// HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// BOOL __stdcall SetFileAttributesA(LPCSTR lpFileName, DWORD dwFileAttributes);
// HANDLE __stdcall GetCurrentProcess();
// BOOL __stdcall SetPriorityClass(HANDLE hProcess, DWORD dwPriorityClass);
// BOOL __stdcall SetThreadPriority(HANDLE hThread, int nPriority);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// FARPROC __stdcall GetProcAddress(HMODULE hModule, LPCSTR lpProcName);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// HANDLE __stdcall FindFirstFileA(LPCSTR lpFileName, LPWIN32_FIND_DATAA lpFindFileData);
// BOOL __stdcall FindNextFileA(HANDLE hFindFile, LPWIN32_FIND_DATAA lpFindFileData);
// DWORD __stdcall GetTickCount();
// BOOL __stdcall FindClose(HANDLE hFindFile);
// void __stdcall Sleep(DWORD dwMilliseconds);
// BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount);
// DWORD __stdcall GetLastError();
// DWORD __stdcall GetCurrentThreadId();
// HRSRC __stdcall FindResourceA(HMODULE hModule, LPCSTR lpName, LPCSTR lpType);
// HGLOBAL __stdcall LoadResource(HMODULE hModule, HRSRC hResInfo);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// BOOL __stdcall QueryPerformanceFrequency(LARGE_INTEGER *lpFrequency);
// BOOL __stdcall GetFileTime(HANDLE hFile, LPFILETIME lpCreationTime, LPFILETIME lpLastAccessTime, LPFILETIME lpLastWriteTime);
// LPVOID __stdcall LockResource(HGLOBAL hResData);
// BOOL __stdcall GetExitCodeProcess(HANDLE hProcess, LPDWORD lpExitCode);
// HINSTANCE __stdcall ShellExecuteA(HWND hwnd, LPCSTR lpOperation, LPCSTR lpFile, LPCSTR lpParameters, LPCSTR lpDirectory, INT nShowCmd);
// BOOL __stdcall GetClientRect(HWND hWnd, LPRECT lpRect);
// BOOL __stdcall ScreenToClient(HWND hWnd, LPPOINT lpPoint);
// SHORT __stdcall GetAsyncKeyState(int vKey);
// HANDLE __stdcall LoadImageA(HINSTANCE, LPCSTR, UINT, int, int, UINT);
// BOOL __stdcall ClientToScreen(HWND hWnd, LPPOINT lpPoint);
// BOOL __stdcall UnhookWindowsHookEx(HHOOK hhk);
// LRESULT __stdcall CallNextHookEx(HHOOK hhk, int nCode, WPARAM wParam, LPARAM lParam);
// HHOOK __stdcall SetWindowsHookExA(int idHook, HOOKPROC lpfn, HINSTANCE hmod, DWORD dwThreadId);
// BOOL __stdcall IntersectRect(LPRECT lprcDst, const RECT *lprcSrc1, const RECT *lprcSrc2);
// LRESULT __stdcall SendMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// LONG __stdcall GetWindowLongA(HWND hWnd, int nIndex);
// BOOL __stdcall SetWindowPos(HWND hWnd, HWND hWndInsertAfter, int X, int Y, int cx, int cy, UINT uFlags);
// HANDLE __stdcall GetClipboardData(UINT uFormat);
// BOOL __stdcall OpenClipboard(HWND hWndNewOwner);
// HANDLE __stdcall SetClipboardData(UINT uFormat, HANDLE hMem);
// BOOL __stdcall CloseClipboard();
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
// ATOM __stdcall RegisterClassA(const WNDCLASSA *lpWndClass);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// UINT __stdcall RegisterWindowMessageA(LPCSTR lpString);
// BOOL __stdcall IsIconic(HWND hWnd);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// DWORD __stdcall CheckMenuItem(HMENU hMenu, UINT uIDCheckItem, UINT uCheck);
// void __stdcall PostQuitMessage(int nExitCode);
// HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
// BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
// BOOL __stdcall IsZoomed(HWND hWnd);
// BOOL __stdcall GetWindowRect(HWND hWnd, LPRECT lpRect);
// BOOL __stdcall EnableMenuItem(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
// BOOL __stdcall AdjustWindowRect(LPRECT lpRect, DWORD dwStyle, BOOL bMenu);
// HWND __stdcall GetDesktopWindow();
// HDC __stdcall GetDC(HWND hWnd);
// int __stdcall ReleaseDC(HWND hWnd, HDC hDC);
// HMENU __stdcall CreatePopupMenu();
// BOOL __stdcall AppendMenuA(HMENU hMenu, UINT uFlags, UINT uIDNewItem, LPCSTR lpNewItem);
// BOOL __stdcall InsertMenuA(HMENU hMenu, UINT uPosition, UINT uFlags, UINT uIDNewItem, LPCSTR lpNewItem);
// int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int nBufferMax);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// LONG __stdcall DispatchMessageA(const MSG *lpMsg);
// int __stdcall GetSystemMetrics(int nIndex);
// BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
// HWND __stdcall SetFocus(HWND hWnd);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// BOOL __stdcall PeekMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax, UINT wRemoveMsg);
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// BOOL __stdcall EnableWindow(HWND hWnd, BOOL bEnable);
// BOOL __stdcall CheckRadioButton(HWND hDlg, int nIDFirstButton, int nIDLastButton, int nIDCheckButton);
// LONG __stdcall SendDlgItemMessageA(HWND hDlg, int nIDDlgItem, UINT Msg, WPARAM wParam, LPARAM lParam);
// UINT __stdcall IsDlgButtonChecked(HWND hDlg, int nIDButton);
// UINT __stdcall GetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPSTR lpString, int nMaxCount);
// BOOL __stdcall CheckDlgButton(HWND hDlg, int nIDButton, UINT uCheck);
// BOOL __stdcall SetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPCSTR lpString);
// BOOL __stdcall EnumWindows(WNDENUMPROC lpEnumFunc, LPARAM lParam);
// int __stdcall GetWindowTextA(HWND hWnd, LPSTR lpString, int nMaxCount);
// BOOL __stdcall GetCursorPos(LPPOINT lpPoint);
// BOOL __stdcall ReleaseCapture();
// HWND __stdcall SetCapture(HWND hWnd);
// HMENU __stdcall GetMenu(HWND hWnd);
// BOOL __stdcall SetMenu(HWND hWnd, HMENU hMenu);
// BOOL __stdcall SystemParametersInfoA(UINT uiAction, UINT uiParam, PVOID pvParam, UINT fWinIni);
// SHORT __stdcall GetKeyState(int nVirtKey);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// HCURSOR __stdcall SetCursor(HCURSOR hCursor);
// int __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString);
// BOOL __stdcall EndDialog(HWND hDlg, int nResult);
// BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// HWND __stdcall GetDlgItem(HWND hDlg, int nIDDlgItem);
// LONG __stdcall SetWindowLongA(HWND hWnd, int nIndex, LONG dwNewLong);
// BOOL __stdcall PlaySoundA(LPCSTR pszSound, HMODULE hmod, DWORD fdwSound);
// int __stdcall WSACleanup();
// int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
// int __stdcall gethostname(char *name, int namelen);
// int __stdcall getsockname(SOCKET s, struct sockaddr *name, int *namelen);
// int __stdcall sendto(SOCKET s, const char *buf, int len, int flags, const struct sockaddr *to, int tolen);
// int __stdcall recvfrom(SOCKET s, char *buf, int len, int flags, struct sockaddr *from, int *fromlen);
// int __stdcall WSAGetLastError();
// int __stdcall closesocket(SOCKET s);
// SOCKET __stdcall socket(int af, int type, int protocol);
// int __stdcall ioctlsocket(SOCKET s, int cmd, u_long *argp);
// int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
// int __stdcall getsockopt(SOCKET s, int level, int optname, char *optval, int *optlen);
// u_short __stdcall htons(u_short hostshort);
// u_long __stdcall htonl(u_long hostlong);
// unsigned int __stdcall inet_addr(const char *cp);
// int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
// struct hostent *__stdcall gethostbyname(const char *name);
// u_short __stdcall ntohs(u_short netshort);
// HRESULT __stdcall CoCreateInstance(const CLSID *const rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, const IID *const riid, LPVOID *ppv);
// HRESULT __stdcall CoInitialize(LPVOID pvReserved);
// void __stdcall CoUninitialize();

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN sub_401032; // weak
_UNKNOWN sub_401087; // weak
_UNKNOWN sub_401096; // weak
_UNKNOWN sub_4010C3; // weak
_UNKNOWN sub_4010D2; // weak
_UNKNOWN sub_40129E; // weak
_UNKNOWN sub_4012A3; // weak
_UNKNOWN sub_401343; // weak
_UNKNOWN sub_4013AC; // weak
_UNKNOWN sub_4013B1; // weak
_UNKNOWN sub_401523; // weak
_UNKNOWN sub_4015D2; // weak
_UNKNOWN sub_401659; // weak
_UNKNOWN sub_40170D; // weak
_UNKNOWN sub_401735; // weak
_UNKNOWN sub_40181B; // weak
_UNKNOWN j_j___stricmp_0; // weak
_UNKNOWN sub_401A96; // weak
_UNKNOWN j_j___stricmp; // weak
_UNKNOWN sub_401B86; // weak
_UNKNOWN sub_401B8B; // weak
_UNKNOWN sub_401C30; // weak
_UNKNOWN sub_401D66; // weak
_UNKNOWN sub_401EA6; // weak
_UNKNOWN sub_401EAB; // weak
_UNKNOWN sub_401F14; // weak
_UNKNOWN sub_401F91; // weak
_UNKNOWN sub_40201D; // weak
_UNKNOWN sub_402054; // weak
_UNKNOWN sub_402153; // weak
_UNKNOWN sub_4021BC; // weak
_UNKNOWN sub_402234; // weak
_UNKNOWN sub_402293; // weak
_UNKNOWN sub_4022A2; // weak
_UNKNOWN sub_402423; // weak
_UNKNOWN sub_402441; // weak
_UNKNOWN sub_40255E; // weak
_UNKNOWN sub_40262B; // weak
_UNKNOWN sub_402635; // weak
_UNKNOWN sub_40263A; // weak
_UNKNOWN sub_402770; // weak
_UNKNOWN sub_4027DE; // weak
_UNKNOWN sub_402824; // weak
_UNKNOWN sub_402833; // weak
_UNKNOWN loc_404490; // weak
_UNKNOWN loc_4044C0; // weak
_UNKNOWN loc_412700; // weak
_UNKNOWN loc_416BA0; // weak
// extern _UNKNOWN loc_4E4F20; weak
void *Agent::`vftable' = &sub_401C44; // weak
BYTE Source = 0u; // idb
void (__noreturn *off_510D88)() = &_purecall; // weak
void *LocalAgent::`vftable' = &sub_4020C2; // weak
int (__stdcall *off_510F40)(int) = &nullsub_12; // weak
void *ServerAgent::`vftable' = &sub_401F1E; // weak
int (__thiscall *off_510FAC)(void *Memory, char) = &sub_402031; // weak
void *MenuTarget::`vftable' = &_purecall; // weak
void *InputTarget::`vftable' = &sub_40229D; // weak
int (__stdcall *off_51120C)(int, int, int, int) = &sub_4020C7; // weak
int (__stdcall *off_51123C)(int, int, int) = &sub_4022C0; // weak
void *MainScreen::`vftable' = &sub_40229D; // weak
int (__stdcall *off_5114B8)(int, int, int) = &j_nullsub_13; // weak
int (__thiscall *off_511668)(void *Memory, char) = &sub_40193D; // weak
int (__thiscall *off_511680)(void *Memory, char) = &sub_401947; // weak
void (__noreturn *off_511698)() = &_purecall; // weak
_UNKNOWN unk_5116A0; // weak
_UNKNOWN unk_5116A4; // weak
_UNKNOWN unk_5116A8; // weak
_UNKNOWN unk_5116AC; // weak
int (__stdcall *off_511720)(int, int) = &sub_401915; // weak
void *CharacterScreen::`vftable' = &sub_4014B0; // weak
int (__stdcall *off_51175C)(int, int, int) = &sub_40281F; // weak
void *FloatBase::`vftable' = &sub_40229D; // weak
int (__stdcall *off_511800)(int, int, int, int) = &sub_40229D; // weak
void *FloatInput::`vftable' = &sub_40229D; // weak
__int16 word_511880 = 95; // weak
void *FloatWait::`vftable' = &sub_40229D; // weak
int (__stdcall *off_5118C8)(int, int, int, int) = &sub_40229D; // weak
int (__stdcall *off_511908)(int, int, int, int) = &sub_40229D; // weak
void *FloatSkillDialogBox::`vftable' = &sub_40229D; // weak
void (__noreturn *off_5119C0[3])() = { &_purecall, &_purecall, &_purecall }; // weak
_UNKNOWN unk_511B9C; // weak
int (__stdcall *off_511D0C[2])(int, int) = { &sub_401EDD, &sub_4015F0 }; // weak
int (__stdcall *off_511D20)(int, int, int) = &sub_402536; // weak
void *Game::`vftable' = &sub_4013CA; // weak
char Delim[] = { ',', '\0' }; // idb
int (__thiscall *off_512618)(void *Memory, char) = &sub_401D2A; // weak
char aInfupExe[] = "infup.exe"; // idb
void *ActiveLio::`vftable' = &sub_40101E; // weak
int (__thiscall *off_513988)(void *Memory, char) = &sub_401DB1; // weak
void *Switch::`vftable' = &sub_4015AF; // weak
int (__thiscall *off_5139C0)(void *Memory, char) = &sub_4025B3; // weak
void *ActiveSound::`vftable' = &sub_401B2C; // weak
int (__thiscall *off_5139F8)(void *Memory, char) = &sub_40148D; // weak
void *LoginWindow::`vftable' = &sub_4021C1; // weak
void *MainManager::`vftable' = &j_nullsub_14; // weak
void *MainManager::`vftable' = &sub_40202C; // weak
int (__stdcall *off_513D40)(int, int) = &sub_4016DB; // weak
void *MapManager::`vftable' = &j_nullsub_15; // weak
int (__stdcall *off_513D7C)(int, int, int) = &j_nullsub_16; // weak
_UNKNOWN unk_513DA4; // weak
void *MessageManager::`vftable' = &sub_401389; // weak
void *MessageManager::`vftable' = &sub_40197E; // weak
int (__stdcall *off_513EC8)(int, int, int, int) = &sub_40163B; // weak
_UNKNOWN unk_513EF4; // weak
void *InteriorMenu::`vftable' = &sub_40204F; // weak
int (__stdcall *off_51589C)(int, int) = &sub_402801; // weak
void *MainMenuScreen::`vftable' = &sub_401A0F; // weak
int (__thiscall *off_515CDC)(int, int, int, char *Str) = &sub_401A4B; // weak
void *NotepadManager::`vftable' = &sub_40271B; // weak
void *NotepadManager::`vftable' = &sub_401C49; // weak
int (__stdcall *off_515F9C)(int, int, int) = &sub_401D89; // weak
void *ProjectileWeapon::`vftable' = &sub_401D9D; // weak
int (__stdcall *off_516048)(int, int, int, int) = &sub_40229D; // weak
int (__stdcall *off_516088)(int, int, int, int) = &sub_401E10; // weak
int (__stdcall *off_516100)(int, int) = &sub_401429; // weak
void *ScoreScreen::`vftable' = &sub_40240F; // weak
int (__stdcall *off_51613C)(int, int, char *Filename) = &sub_4026D5; // weak
int (__stdcall *off_516458)(int, int) = &sub_4024DC; // weak
void *StoreScreen::`vftable' = &sub_4024BE; // weak
void *StoreScreen::`vftable' = &j_nullsub_13; // weak
int (__stdcall *off_5164D0)(int, int, int) = &sub_401F0A; // weak
int (__thiscall *off_516508)(void *Memory, char) = &sub_401E2E; // weak
void *Vehicle::`vftable' = &sub_402202; // weak
int (__thiscall *off_51681C)(void *Memory, char) = &sub_401DBB; // weak
void *DependentVehicle::`vftable' = &sub_40209F; // weak
void *SpectatorVehicle::`vftable' = &sub_4017A8; // weak
int (__thiscall *off_516D3C)(void *Memory, char) = &sub_40268F; // weak
void *ViewFileScreen::`vftable' = &sub_4026DA; // weak
void *ViewFileScreen::`vftable' = &sub_401802; // weak
void *ViewFileScreen::`vftable' = &j_nullsub_13; // weak
_UNKNOWN unk_517424; // weak
CLSID rclsid = { 635832804u, 45657u, 4559u, { 191u, 199u, 68u, 69u, 83u, 84u, 0u, 0u } }; // idb
IID riid = { 3212410928u, 18490u, 19874u, { 170u, 153u, 93u, 100u, 237u, 54u, 151u, 0u } }; // idb
_UNKNOWN unk_517FC4; // weak
_UNKNOWN unk_517FD4; // weak
void *UdpLibrary::UdpRefCount::`vftable' = &sub_480310; // weak
void *UdpLibrary::UdpDriver::`vftable' = &sub_480360; // weak
void *UdpLibrary::UdpGuardedRefCount::`vftable' = &sub_48AB60; // weak
void *UdpLibrary::UdpPlatformThreadObject::`vftable' = &sub_48AB60; // weak
void *UdpLibrary::UdpPlatformDriver::`vftable' = &sub_480F50; // weak
void *UdpLibrary::FixedLogicalPacket<128>::`vftable' = &sub_480310; // weak
void *UdpLibrary::FixedLogicalPacket<256>::`vftable' = &sub_480310; // weak
void *UdpLibrary::FixedLogicalPacket<512>::`vftable' = &sub_480310; // weak
void *UdpLibrary::FixedLogicalPacket<1024>::`vftable' = &sub_480310; // weak
void *UdpLibrary::UdpConnection::`vftable' = &sub_48AB60; // weak
int (*off_518620[4])() = { &sub_48AB60, &sub_48AB80, &sub_480330, &sub_480340 }; // weak
void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable' = &sub_489D50; // weak
void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable' = &sub_489D70; // weak
void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable' = &sub_489D90; // weak
void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable' = &sub_489DB0; // weak
void *UdpLibrary::UdpManager::`vftable' = &sub_48AB60; // weak
void *UdpLibrary::LogicalPacket::`vftable' = &sub_480310; // weak
void *UdpLibrary::SimpleLogicalPacket::`vftable' = &sub_480310; // weak
void *UdpLibrary::GroupLogicalPacket::`vftable' = &sub_480310; // weak
void *UdpLibrary::PooledLogicalPacket::`vftable' = &sub_48A6A0; // weak
void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable' = &sub_48C600; // weak
void *Skill::`vftable' = &sub_48EC20; // weak
void *Item::`vftable' = &sub_493E40; // weak
void *NestedItem::`vftable' = &sub_493E80; // weak
void *CashItem::`vftable' = &sub_493EC0; // weak
void *UseItem::`vftable' = &sub_493F00; // weak
void *RepairItem::`vftable' = &sub_493F40; // weak
void *ControlItem::`vftable' = &sub_493F80; // weak
void *WarpItem::`vftable' = &sub_493FC0; // weak
void *MultiUseItem::`vftable' = &sub_494000; // weak
void *VehicleMakerItem::`vftable' = &sub_494040; // weak
void *ItemMakerItem::`vftable' = &sub_494080; // weak
void *UpgradeItem::`vftable' = &sub_4940C0; // weak
void *SkillItem::`vftable' = &sub_494100; // weak
void *AmmoItem::`vftable' = &sub_494140; // weak
void *ProjectileItem::`vftable' = &sub_494180; // weak
void *UtilityItem::`vftable' = &sub_4941C0; // weak
_UNKNOWN unk_518FE4; // weak
_UNKNOWN unk_518FE8; // weak
_UNKNOWN unk_518FEC; // weak
_UNKNOWN unk_518FF0; // weak
char byte_519021 = '\0'; // idb
char byte_519022 = '\0'; // idb
char byte_519023 = '\0'; // idb
char byte_51903E = '\0'; // idb
char byte_51903F = '\0'; // idb
char byte_51904A = '\0'; // idb
char byte_51904B = '\0'; // idb
char byte_51905E = '\0'; // idb
char byte_51905F = '\0'; // idb
char byte_51906A = '\0'; // idb
char byte_51906B = '\0'; // idb
char byte_51907E = '\0'; // idb
char byte_51907F = '\0'; // idb
char byte_51908A = '\0'; // idb
char byte_51908B = '\0'; // idb
char byte_51909E = '\0'; // idb
char byte_51909F = '\0'; // idb
char byte_5190AA = '\0'; // idb
char byte_5190AB = '\0'; // idb
char byte_5190BE = '\0'; // idb
char byte_5190BF = '\0'; // idb
char byte_5190CA = '\0'; // idb
char byte_5190CB = '\0'; // idb
char byte_5190D3 = '\0'; // idb
char byte_5190DE = '\0'; // idb
char byte_5190DF = '\0'; // idb
char byte_5190EE = '\0'; // idb
char byte_5190EF = '\0'; // idb
void *off_51ADD8 = (void *)0x534F4C; // weak
void *off_51ADEC = (void *)0x534F4C; // weak
void *off_51ADFC = (void *)0x534F4C; // weak
void *off_51AE0C = (void *)0x534F4C; // weak
void *HitTester::`vftable' = &sub_49A810; // weak
void *RectHitTester::`vftable' = &sub_49A850; // weak
void *ParentRectHitTester::`vftable' = &sub_49A870; // weak
void *FontManager::`vftable' = &sub_49B540; // weak
void *Surface::`vftable' = &sub_4A0AB0; // weak
void *WindowPrimarySurface::`vftable' = &sub_4A0AF0; // weak
void *MemorySurface::`vftable' = &sub_4A0B10; // weak
void *FramedMemorySurface::`vftable' = &sub_4A0B30; // weak
void *VirtualSurface::`vftable' = &sub_4A0B60; // weak
void *ComboPrimarySurface::`vftable' = &sub_4A0BB0; // weak
void *FullScreenPrimarySurface::`vftable' = &sub_4A0BD0; // weak
void *SubSurface::`vftable' = &sub_4A0B90; // weak
CHAR Type[] = { 'C', 'F', 'S', '\0' }; // idb
void *CompressedFramedSurface::`vftable' = &sub_4A5990; // weak
void *SimpleAnimateObject::`vftable' = &sub_4A7470; // weak
void *Lio::`vftable' = &sub_4AFEA0; // weak
void *NestedLio::`vftable' = &sub_4AFEC0; // weak
void *DoorLio::`vftable' = &sub_4AFEE0; // weak
void *SwitchLio::`vftable' = &sub_4AFF00; // weak
void *SoundLio::`vftable' = &sub_4AFF20; // weak
void *PortalLio::`vftable' = &sub_4AFF40; // weak
void *WarpLio::`vftable' = &sub_4AFF60; // weak
void *ParallaxLio::`vftable' = &sub_4AFF80; // weak
void *FlagLio::`vftable' = &sub_4AFFA0; // weak
void *HideLio::`vftable' = &sub_4AFFC0; // weak
void *TextLio::`vftable' = &sub_4AFFE0; // weak
void *VItem::`vftable' = &sub_4B35C0; // weak
void *CarVItem::`vftable' = &sub_4B35F0; // weak
void *DependentVItem::`vftable' = &sub_4B3620; // weak
void *ComputerVItem::`vftable' = &sub_4B3650; // weak
void *SpectatorVItem::`vftable' = &sub_4B3680; // weak
void *NestedVItem::`vftable' = &sub_4B36B0; // weak
void *SortedStringList::`vftable' = &sub_4B4710; // weak
void *SortedStringStringList::`vftable' = &sub_4B48B0; // weak
__int16 word_51F1F8[] = { 0 }; // weak
__int16 word_51F1FA[] = { 0 }; // weak
__int16 word_51F1FC[] = { 0 }; // weak
__int16 word_51F1FE[] = { 0 }; // weak
int (__cdecl *off_51F200[30])(int, int) =
{
  &sub_4BB370,
  (int (__cdecl *)(int, int))0x40004,
  (int (__cdecl *)(int, int))0x40008,
  &loc_4BB550,
  (int (__cdecl *)(int, int))0x50004,
  (int (__cdecl *)(int, int))0x80010,
  &loc_4BB550,
  (int (__cdecl *)(int, int))0x60004,
  (int (__cdecl *)(int, int))0x200020,
  &loc_4BB550,
  (int (__cdecl *)(int, int))0x40004,
  (int (__cdecl *)(int, int))0x100010,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x100008,
  (int (__cdecl *)(int, int))0x200020,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x100008,
  (int (__cdecl *)(int, int))0x800080,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x200008,
  (int (__cdecl *)(int, int))0x1000080,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x800020,
  (int (__cdecl *)(int, int))0x4000102,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x1020020,
  (int (__cdecl *)(int, int))0x10000102,
  &loc_4BB8C0,
  (int (__cdecl *)(int, int))0x2E322E31,
  (int (__cdecl *)(int, int))0x31
}; // idb
_UNKNOWN unk_51F278; // weak
_UNKNOWN unk_51FA78; // weak
__int16 word_51FAF8[20] = { 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15, 0 }; // idb
int dword_51FB20[] = { 0 }; // weak
char byte_51FB91[] = { '\0' }; // weak
char byte_51FB92[] = { '\0' }; // weak
char byte_51FB93[] = { '\0' }; // weak
char byte_51FB94[20] =
{
  '\x10',
  '\x11',
  '\x12',
  '\0',
  '\b',
  '\a',
  '\t',
  '\x06',
  '\n',
  '\x05',
  '\v',
  '\x04',
  '\f',
  '\x03',
  '\r',
  '\x02',
  '\x0E',
  '\x01',
  '\x0F',
  '\0'
}; // idb
int dword_51FBA8[50] =
{
  0,
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  3,
  4,
  4,
  5,
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  2,
  3,
  7,
  0
}; // idb
_UNKNOWN unk_51FC70; // weak
_UNKNOWN unk_5200F0; // weak
char byte_520168[256] =
{
  '\0',
  '\x01',
  '\x02',
  '\x03',
  '\x04',
  '\x04',
  '\x05',
  '\x05',
  '\x06',
  '\x06',
  '\x06',
  '\x06',
  '\a',
  '\a',
  '\a',
  '\a',
  '\b',
  '\b',
  '\b',
  '\b',
  '\b',
  '\b',
  '\b',
  '\b',
  '\t',
  '\t',
  '\t',
  '\t',
  '\t',
  '\t',
  '\t',
  '\t',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\n',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\v',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\f',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\r',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F'
}; // idb
char byte_520268[] = { '\0' }; // weak
char byte_520368[256] =
{
  '\0',
  '\x01',
  '\x02',
  '\x03',
  '\x04',
  '\x05',
  '\x06',
  '\a',
  '\b',
  '\b',
  '\t',
  '\t',
  '\n',
  '\n',
  '\v',
  '\v',
  '\f',
  '\f',
  '\f',
  '\f',
  '\r',
  '\r',
  '\r',
  '\r',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0E',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x0F',
  '\x10',
  '\x10',
  '\x10',
  '\x10',
  '\x10',
  '\x10',
  '\x10',
  '\x10',
  '\x11',
  '\x11',
  '\x11',
  '\x11',
  '\x11',
  '\x11',
  '\x11',
  '\x11',
  '\x12',
  '\x12',
  '\x12',
  '\x12',
  '\x12',
  '\x12',
  '\x12',
  '\x12',
  '\x13',
  '\x13',
  '\x13',
  '\x13',
  '\x13',
  '\x13',
  '\x13',
  '\x13',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x14',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x15',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x16',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x17',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x18',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x19',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1A',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1B',
  '\x1C'
}; // idb
int dword_520468[30] =
{
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  10,
  12,
  14,
  16,
  20,
  24,
  28,
  32,
  40,
  48,
  56,
  64,
  80,
  96,
  112,
  128,
  160,
  192,
  224,
  0,
  0
}; // idb
int dword_5204E0[30] =
{
  0,
  1,
  2,
  3,
  4,
  6,
  8,
  12,
  16,
  24,
  32,
  48,
  64,
  96,
  128,
  192,
  256,
  384,
  512,
  768,
  1024,
  1536,
  2048,
  3072,
  4096,
  6144,
  8192,
  12288,
  16384,
  24576
}; // idb
int dword_520558[256] =
{
  0,
  1996959894,
  3993919788,
  2567524794,
  124634137,
  1886057615,
  3915621685,
  2657392035,
  249268274,
  2044508324,
  3772115230,
  2547177864,
  162941995,
  2125561021,
  3887607047,
  2428444049,
  498536548,
  1789927666,
  4089016648,
  2227061214,
  450548861,
  1843258603,
  4107580753,
  2211677639,
  325883990,
  1684777152,
  4251122042,
  2321926636,
  335633487,
  1661365465,
  4195302755,
  2366115317,
  997073096,
  1281953886,
  3579855332,
  2724688242,
  1006888145,
  1258607687,
  3524101629,
  2768942443,
  901097722,
  1119000684,
  3686517206,
  2898065728,
  853044451,
  1172266101,
  3705015759,
  2882616665,
  651767980,
  1373503546,
  3369554304,
  3218104598,
  565507253,
  1454621731,
  3485111705,
  3099436303,
  671266974,
  1594198024,
  3322730930,
  2970347812,
  795835527,
  1483230225,
  3244367275,
  3060149565,
  1994146192,
  31158534,
  2563907772,
  4023717930,
  1907459465,
  112637215,
  2680153253,
  3904427059,
  2013776290,
  251722036,
  2517215374,
  3775830040,
  2137656763,
  141376813,
  2439277719,
  3865271297,
  1802195444,
  476864866,
  2238001368,
  4066508878,
  1812370925,
  453092731,
  2181625025,
  4111451223,
  1706088902,
  314042704,
  2344532202,
  4240017532,
  1658658271,
  366619977,
  2362670323,
  4224994405,
  1303535960,
  984961486,
  2747007092,
  3569037538,
  1256170817,
  1037604311,
  2765210733,
  3554079995,
  1131014506,
  879679996,
  2909243462,
  3663771856,
  1141124467,
  855842277,
  2852801631,
  3708648649,
  1342533948,
  654459306,
  3188396048,
  3373015174,
  1466479909,
  544179635,
  3110523913,
  3462522015,
  1591671054,
  702138776,
  2966460450,
  3352799412,
  1504918807,
  783551873,
  3082640443,
  3233442989,
  3988292384,
  2596254646,
  62317068,
  1957810842,
  3939845945,
  2647816111,
  81470997,
  1943803523,
  3814918930,
  2489596804,
  225274430,
  2053790376,
  3826175755,
  2466906013,
  167816743,
  2097651377,
  4027552580,
  2265490386,
  503444072,
  1762050814,
  4150417245,
  2154129355,
  426522225,
  1852507879,
  4275313526,
  2312317920,
  282753626,
  1742555852,
  4189708143,
  2394877945,
  397917763,
  1622183637,
  3604390888,
  2714866558,
  953729732,
  1340076626,
  3518719985,
  2797360999,
  1068828381,
  1219638859,
  3624741850,
  2936675148,
  906185462,
  1090812512,
  3747672003,
  2825379669,
  829329135,
  1181335161,
  3412177804,
  3160834842,
  628085408,
  1382605366,
  3423369109,
  3138078467,
  570562233,
  1426400815,
  3317316542,
  2998733608,
  733239954,
  1555261956,
  3268935591,
  3050360625,
  752459403,
  1541320221,
  2607071920,
  3965973030,
  1969922972,
  40735498,
  2617837225,
  3943577151,
  1913087877,
  83908371,
  2512341634,
  3803740692,
  2075208622,
  213261112,
  2463272603,
  3855990285,
  2094854071,
  198958881,
  2262029012,
  4057260610,
  1759359992,
  534414190,
  2176718541,
  4139329115,
  1873836001,
  414664567,
  2282248934,
  4279200368,
  1711684554,
  285281116,
  2405801727,
  4167216745,
  1634467795,
  376229701,
  2685067896,
  3608007406,
  1308918612,
  956543938,
  2808555105,
  3495958263,
  1231636301,
  1047427035,
  2932959818,
  3654703836,
  1088359270,
  936918000,
  2847714899,
  3736837829,
  1202900863,
  817233897,
  3183342108,
  3401237130,
  1404277552,
  615818150,
  3134207493,
  3453421203,
  1423857449,
  601450431,
  3009837614,
  3294710456,
  1567103746,
  711928724,
  3020668471,
  3272380065,
  1510334235,
  755167117
}; // idb
int dword_520958[256] =
{
  0,
  421212481,
  842424962,
  724390851,
  1684849924,
  2105013317,
  1448781702,
  1329698503,
  3369699848,
  3519200073,
  4210026634,
  3824474571,
  2897563404,
  3048111693,
  2659397006,
  2274893007,
  1254232657,
  1406739216,
  2029285587,
  1643069842,
  783210325,
  934667796,
  479770071,
  92505238,
  2182846553,
  2600511768,
  2955803355,
  2838940570,
  3866582365,
  4285295644,
  3561045983,
  3445231262,
  2508465314,
  2359236067,
  2813478432,
  3198777185,
  4058571174,
  3908292839,
  3286139684,
  3670389349,
  1566420650,
  1145479147,
  1869335592,
  1987116393,
  959540142,
  539646703,
  185010476,
  303839341,
  3745920755,
  3327985586,
  3983561841,
  4100678960,
  3140154359,
  2721170102,
  2300350837,
  2416418868,
  396344571,
  243568058,
  631889529,
  1018359608,
  1945336319,
  1793607870,
  1103436669,
  1490954812,
  4034481925,
  3915546180,
  3259968903,
  3679722694,
  2484439553,
  2366552896,
  2787371139,
  3208174018,
  950060301,
  565965900,
  177645455,
  328046286,
  1556873225,
  1171730760,
  1861902987,
  2011255754,
  3132841300,
  2745199637,
  2290958294,
  2442530455,
  3738671184,
  3352078609,
  3974232786,
  4126854035,
  1919080284,
  1803150877,
  1079293406,
  1498383519,
  370020952,
  253043481,
  607678682,
  1025720731,
  1711106983,
  2095471334,
  1472923941,
  1322268772,
  26324643,
  411738082,
  866634785,
  717028704,
  2904875439,
  3024081134,
  2668790573,
  2248782444,
  3376948395,
  3495106026,
  4219356713,
  3798300520,
  792689142,
  908347575,
  487136116,
  68299317,
  1263779058,
  1380486579,
  2036719216,
  1618931505,
  3890672638,
  4278043327,
  3587215740,
  3435896893,
  2206873338,
  2593195963,
  2981909624,
  2829542713,
  998479947,
  580430090,
  162921161,
  279890824,
  1609522511,
  1190423566,
  1842954189,
  1958874764,
  4082766403,
  3930137346,
  3245109441,
  3631694208,
  2536953671,
  2385372678,
  2768287173,
  3155920004,
  1900120602,
  1750776667,
  1131931800,
  1517083097,
  355290910,
  204897887,
  656092572,
  1040194781,
  3113746450,
  2692952403,
  2343461520,
  2461357009,
  3723805974,
  3304059991,
  4022511508,
  4141455061,
  2919742697,
  3072101800,
  2620513899,
  2234183466,
  3396041197,
  3547351212,
  4166851439,
  3779471918,
  1725839073,
  2143618976,
  1424512099,
  1307796770,
  45282277,
  464110244,
  813994343,
  698327078,
  3838160568,
  4259225593,
  3606301754,
  3488152955,
  2158586812,
  2578602749,
  2996767038,
  2877569151,
  740041904,
  889656817,
  506086962,
  120682355,
  1215357364,
  1366020341,
  2051441462,
  1667084919,
  3422213966,
  3538019855,
  4190942668,
  3772220557,
  2945847882,
  3062702859,
  2644537544,
  2226864521,
  52649286,
  439905287,
  823476164,
  672009861,
  1733269570,
  2119477507,
  1434057408,
  1281543041,
  2167981343,
  2552493150,
  3004082077,
  2853541596,
  3847487515,
  4233048410,
  3613549209,
  3464057816,
  1239502615,
  1358593622,
  2077699477,
  1657543892,
  764250643,
  882293586,
  532408465,
  111204816,
  1585378284,
  1197851309,
  1816695150,
  1968414767,
  974272232,
  587794345,
  136598634,
  289367339,
  2527558116,
  2411481253,
  2760973158,
  3179948583,
  4073438432,
  3956313505,
  3237863010,
  3655790371,
  347922877,
  229101820,
  646611775,
  1066513022,
  1892689081,
  1774917112,
  1122387515,
  1543337850,
  3697634229,
  3313392372,
  3998419255,
  4148705398,
  3087642289,
  2702352368,
  2319436851,
  2468674930
}; // idb
int dword_520D58[256] =
{
  0,
  29518391,
  59036782,
  38190681,
  118073564,
  114017003,
  76381362,
  89069189,
  236147128,
  265370511,
  228034006,
  206958561,
  152762724,
  148411219,
  178138378,
  190596925,
  472294256,
  501532999,
  530741022,
  509615401,
  456068012,
  451764635,
  413917122,
  426358261,
  305525448,
  334993663,
  296822438,
  275991697,
  356276756,
  352202787,
  381193850,
  393929805,
  944588512,
  965684439,
  1003065998,
  973863097,
  1061482044,
  1049003019,
  1019230802,
  1023561829,
  912136024,
  933002607,
  903529270,
  874031361,
  827834244,
  815125939,
  852716522,
  856752605,
  611050896,
  631869351,
  669987326,
  640506825,
  593644876,
  580921211,
  551983394,
  556069653,
  712553512,
  733666847,
  704405574,
  675154545,
  762387700,
  749958851,
  787859610,
  792175277,
  1889177024,
  1901651959,
  1931368878,
  1927033753,
  2006131996,
  1985040171,
  1947726194,
  1976933189,
  2122964088,
  2135668303,
  2098006038,
  2093965857,
  2038461604,
  2017599123,
  2047123658,
  2076625661,
  1824272048,
  1836991623,
  1866005214,
  1861914857,
  1807058540,
  1786244187,
  1748062722,
  1777547317,
  1655668488,
  1668093247,
  1630251878,
  1625932113,
  1705433044,
  1684323811,
  1713505210,
  1742760333,
  1222101792,
  1226154263,
  1263738702,
  1251046777,
  1339974652,
  1310460363,
  1281013650,
  1301863845,
  1187289752,
  1191637167,
  1161842422,
  1149379777,
  1103966788,
  1074747507,
  1112139306,
  1133218845,
  1425107024,
  1429406311,
  1467333694,
  1454888457,
  1408811148,
  1379576507,
  1350309090,
  1371438805,
  1524775400,
  1528845279,
  1499917702,
  1487177649,
  1575719220,
  1546255107,
  1584350554,
  1605185389,
  3778354048,
  3774312887,
  3803303918,
  3816007129,
  3862737756,
  3892238699,
  3854067506,
  3833203973,
  4012263992,
  4007927823,
  3970080342,
  3982554209,
  3895452388,
  3924658387,
  3953866378,
  3932773565,
  4245928176,
  4241609415,
  4271336606,
  4283762345,
  4196012076,
  4225268251,
  4187931714,
  4166823541,
  4076923208,
  4072833919,
  4035198246,
  4047918865,
  4094247316,
  4123732899,
  4153251322,
  4132437965,
  3648544096,
  3636082519,
  3673983246,
  3678331705,
  3732010428,
  3753090955,
  3723829714,
  3694611429,
  3614117080,
  3601426159,
  3572488374,
  3576541825,
  3496125444,
  3516976691,
  3555094634,
  3525581405,
  3311336976,
  3298595879,
  3336186494,
  3340255305,
  3260503756,
  3281337595,
  3251864226,
  3222399125,
  3410866088,
  3398419871,
  3368647622,
  3372945905,
  3427010420,
  3448139075,
  3485520666,
  3456284973,
  2444203584,
  2423127159,
  2452308526,
  2481530905,
  2527477404,
  2539934891,
  2502093554,
  2497740997,
  2679949304,
  2659102159,
  2620920726,
  2650438049,
  2562027300,
  2574714131,
  2603727690,
  2599670141,
  2374579504,
  2353749767,
  2383274334,
  2412743529,
  2323684844,
  2336421851,
  2298759554,
  2294686645,
  2207933576,
  2186809023,
  2149495014,
  2178734801,
  2224278612,
  2236720739,
  2266437690,
  2262135309,
  2850214048,
  2820717207,
  2858812622,
  2879680249,
  2934667388,
  2938704459,
  2909776914,
  2897069605,
  2817622296,
  2788420399,
  2759153014,
  2780249921,
  2700618180,
  2704950259,
  2742877610,
  2730399645,
  3049550800,
  3020298727,
  3057690558,
  3078802825,
  2999835404,
  3004150075,
  2974355298,
  2961925461,
  3151438440,
  3121956959,
  3092510214,
  3113327665,
  3168701108,
  3172786307,
  3210370778,
  3197646061
}; // idb
int dword_521158[256] =
{
  0,
  3099354981,
  2852767883,
  313896942,
  2405603159,
  937357362,
  627793884,
  2648127673,
  3316918511,
  2097696650,
  1874714724,
  3607201537,
  1255587768,
  4067088605,
  3772741427,
  1482887254,
  1343838111,
  3903140090,
  4195393300,
  1118632049,
  3749429448,
  1741137837,
  1970407491,
  3452858150,
  2511175536,
  756094997,
  1067759611,
  2266550430,
  449832999,
  2725482306,
  2965774508,
  142231497,
  2687676222,
  412010587,
  171665333,
  2995192016,
  793786473,
  2548850444,
  2237264098,
  1038456711,
  1703315409,
  3711623348,
  3482275674,
  1999841343,
  3940814982,
  1381529571,
  1089329165,
  4166106984,
  4029413537,
  1217896388,
  1512189994,
  3802027855,
  2135519222,
  3354724499,
  3577784189,
  1845280792,
  899665998,
  2367928107,
  2677414085,
  657096608,
  3137160985,
  37822588,
  284462994,
  2823350519,
  2601801789,
  598228824,
  824021174,
  2309093331,
  343330666,
  2898962447,
  3195996129,
  113467524,
  1587572946,
  3860600759,
  4104763481,
  1276501820,
  3519211397,
  1769898208,
  2076913422,
  3279374443,
  3406630818,
  1941006535,
  1627703081,
  3652755532,
  1148164341,
  4241751952,
  3999682686,
  1457141531,
  247015245,
  3053797416,
  2763059142,
  470583459,
  2178658330,
  963106687,
  735213713,
  2473467892,
  992409347,
  2207944806,
  2435792776,
  697522413,
  3024379988,
  217581361,
  508405983,
  2800865210,
  4271038444,
  1177467017,
  1419450215,
  3962007554,
  1911572667,
  3377213406,
  3690561584,
  1665525589,
  1799331996,
  3548628985,
  3241568279,
  2039091058,
  3831314379,
  1558270126,
  1314193216,
  4142438437,
  2928380019,
  372764438,
  75645176,
  3158189981,
  568925988,
  2572515393,
  2346768303,
  861712586,
  3982079547,
  1441124702,
  1196457648,
  4293663189,
  1648042348,
  3666298377,
  3358779879,
  1888390786,
  686661332,
  2421291441,
  2196002399,
  978858298,
  2811169155,
  523464422,
  226935048,
  3040519789,
  3175145892,
  100435649,
  390670639,
  2952089162,
  841119475,
  2325614998,
  2553003640,
  546822429,
  2029308235,
  3225988654,
  3539796416,
  1782671013,
  4153826844,
  1328167289,
  1570739863,
  3844338162,
  1298864389,
  4124540512,
  3882013070,
  1608431339,
  3255406162,
  2058742071,
  1744848601,
  3501990332,
  2296328682,
  811816591,
  584513889,
  2590678532,
  129869501,
  3204563416,
  2914283062,
  352848211,
  494030490,
  2781751807,
  3078325777,
  264757620,
  2450577869,
  715964072,
  941166918,
  2158327331,
  3636881013,
  1618608400,
  1926213374,
  3396585883,
  1470427426,
  4011365959,
  4255988137,
  1158766284,
  1984818694,
  3471935843,
  3695453837,
  1693991400,
  4180638033,
  1100160564,
  1395044826,
  3952793279,
  3019491049,
  189112716,
  435162722,
  2706139399,
  1016811966,
  2217162459,
  2526189877,
  774831696,
  643086745,
  2666061564,
  2354934034,
  887166583,
  2838900430,
  294275499,
  54519365,
  3145957664,
  3823145334,
  1532818963,
  1240029693,
  4048895640,
  1820460577,
  3560857924,
  3331051178,
  2117577167,
  3598663992,
  1858283101,
  2088143283,
  3301633750,
  1495127663,
  3785470218,
  4078182116,
  1269332353,
  332098007,
  2876706482,
  3116540252,
  25085497,
  2628386432,
  605395429,
  916469259,
  2384220526,
  2254837415,
  1054503362,
  745528876,
  2496903497,
  151290352,
  2981684885,
  2735556987,
  464596510,
  1137851976,
  4218313005,
  3923506883,
  1365741990,
  3434129695,
  1946996346,
  1723425172,
  3724871409
}; // idb
_UNKNOWN unk_5225B0; // weak
_UNKNOWN unk_5225F0; // weak
_UNKNOWN unk_522630; // weak
_UNKNOWN unk_522670; // weak
void *type_info::`vftable' = &sub_4C1218; // weak
void *std::bad_alloc::`vftable' = &sub_4C1E69; // weak
void *std::bad_exception::`vftable' = &sub_4C7A7F; // weak
void *std::exception::`vftable' = &sub_4CD43A; // weak
void *std::bad_cast::`vftable' = &sub_4CD456; // weak
void *std::bad_typeid::`vftable' = &sub_4CD478; // weak
_UNKNOWN unk_52A51C; // weak
_UNKNOWN unk_532608; // weak
_UNKNOWN unk_532708; // weak
_UNKNOWN unk_532810; // weak
_UNKNOWN unk_532910; // weak
void *off_538378 = &unk_511B7C; // weak
char *off_5383E0[17] =
{
  "None",
  "X-Axis",
  "Y-Axis",
  "Z-Axis",
  "U-Axis (slider 1)",
  "V-Axis (slider 2)",
  "X-Rotation-Axis",
  "Y-Rotation-Axis",
  "Z-Rotation-Axis",
  "X-Axis (Joy2)",
  "Y-Axis (Joy2)",
  "Z-Axis (Joy2)",
  "U-Axis (slider 1)(Joy2)",
  "V-Axis (slider 2)(Joy2)",
  "X-Rotation-Axis (Joy2)",
  "Y-Rotation-Axis (Joy2)",
  "Z-Rotation-Axis (Joy2)"
}; // weak
char *off_538404[8] =
{
  "X-Axis (Joy2)",
  "Y-Axis (Joy2)",
  "Z-Axis (Joy2)",
  "U-Axis (slider 1)(Joy2)",
  "V-Axis (slider 2)(Joy2)",
  "X-Rotation-Axis (Joy2)",
  "Y-Rotation-Axis (Joy2)",
  "Z-Rotation-Axis (Joy2)"
}; // weak
char *off_538434[9] =
{
  "Nothing",
  "Fire Highlighted Weapon",
  "Fire First Weapon",
  "Fire Second Weapon",
  "Fire Third Weapon",
  "Move Forwards",
  "Move Backwards",
  "Hyper-Move Forward",
  "Cycle Weapon"
}; // weak
_UNKNOWN unk_538458; // weak
int dword_538460 = 1; // weak
char *off_538698[3] =
{
  "Left-click on column header to sort/reverse-sort by that column",
  "Right-click on column header to divide by that column (to get ratios)",
  "Use Numpad-Plus and Numpad-Minus to multiply ratio by various factors (in ratio mode)"
}; // weak
int dword_538754[7] = { 4, 5, 6, 7, 8, 3, 0 }; // idb
int dword_538798[7] = { 4, 5, 6, 7, 8, 3, 0 }; // idb
int dword_538800[7] = { 4, 5, 6, 7, 8, 3, 0 }; // idb
int dword_5389C8[256] =
{
  0,
  1996959894,
  3993919788,
  2567524794,
  124634137,
  1886057615,
  3915621685,
  2657392035,
  249268274,
  2044508324,
  3772115230,
  2547177864,
  162941995,
  2125561021,
  3887607047,
  2428444049,
  498536548,
  1789927666,
  4089016648,
  2227061214,
  450548861,
  1843258603,
  4107580753,
  2211677639,
  325883990,
  1684777152,
  4251122042,
  2321926636,
  335633487,
  1661365465,
  4195302755,
  2366115317,
  997073096,
  1281953886,
  3579855332,
  2724688242,
  1006888145,
  1258607687,
  3524101629,
  2768942443,
  901097722,
  1119000684,
  3686517206,
  2898065728,
  853044451,
  1172266101,
  3705015759,
  2882616665,
  651767980,
  1373503546,
  3369554304,
  3218104598,
  565507253,
  1454621731,
  3485111705,
  3099436303,
  671266974,
  1594198024,
  3322730930,
  2970347812,
  795835527,
  1483230225,
  3244367275,
  3060149565,
  1994146192,
  31158534,
  2563907772,
  4023717930,
  1907459465,
  112637215,
  2680153253,
  3904427059,
  2013776290,
  251722036,
  2517215374,
  3775830040,
  2137656763,
  141376813,
  2439277719,
  3865271297,
  1802195444,
  476864866,
  2238001368,
  4066508878,
  1812370925,
  453092731,
  2181625025,
  4111451223,
  1706088902,
  314042704,
  2344532202,
  4240017532,
  1658658271,
  366619977,
  2362670323,
  4224994405,
  1303535960,
  984961486,
  2747007092,
  3569037538,
  1256170817,
  1037604311,
  2765210733,
  3554079995,
  1131014506,
  879679996,
  2909243462,
  3663771856,
  1141124467,
  855842277,
  2852801631,
  3708648649,
  1342533948,
  654459306,
  3188396048,
  3373015174,
  1466479909,
  544179635,
  3110523913,
  3462522015,
  1591671054,
  702138776,
  2966460450,
  3352799412,
  1504918807,
  783551873,
  3082640443,
  3233442989,
  3988292384,
  2596254646,
  62317068,
  1957810842,
  3939845945,
  2647816111,
  81470997,
  1943803523,
  3814918930,
  2489596804,
  225274430,
  2053790376,
  3826175755,
  2466906013,
  167816743,
  2097651377,
  4027552580,
  2265490386,
  503444072,
  1762050814,
  4150417245,
  2154129355,
  426522225,
  1852507879,
  4275313526,
  2312317920,
  282753626,
  1742555852,
  4189708143,
  2394877945,
  397917763,
  1622183637,
  3604390888,
  2714866558,
  953729732,
  1340076626,
  3518719985,
  2797360999,
  1068828381,
  1219638859,
  3624741850,
  2936675148,
  906185462,
  1090812512,
  3747672003,
  2825379669,
  829329135,
  1181335161,
  3412177804,
  3160834842,
  628085408,
  1382605366,
  3423369109,
  3138078467,
  570562233,
  1426400815,
  3317316542,
  2998733608,
  733239954,
  1555261956,
  3268935591,
  3050360625,
  752459403,
  1541320221,
  2607071920,
  3965973030,
  1969922972,
  40735498,
  2617837225,
  3943577151,
  1913087877,
  83908371,
  2512341634,
  3803740692,
  2075208622,
  213261112,
  2463272603,
  3855990285,
  2094854071,
  198958881,
  2262029012,
  4057260610,
  1759359992,
  534414190,
  2176718541,
  4139329115,
  1873836001,
  414664567,
  2282248934,
  4279200368,
  1711684554,
  285281116,
  2405801727,
  4167216745,
  1634467795,
  376229701,
  2685067896,
  3608007406,
  1308918612,
  956543938,
  2808555105,
  3495958263,
  1231636301,
  1047427035,
  2932959818,
  3654703836,
  1088359270,
  936918000,
  2847714899,
  3736837829,
  1202900863,
  817233897,
  3183342108,
  3401237130,
  1404277552,
  615818150,
  3134207493,
  3453421203,
  1423857449,
  601450431,
  3009837614,
  3294710456,
  1567103746,
  711928724,
  3020668471,
  3272380065,
  1510334235,
  755167117
}; // idb
int dword_539000[] = { 2 }; // weak
int dword_53A208[256] =
{
  0,
  1996959894,
  3993919788,
  2567524794,
  124634137,
  1886057615,
  3915621685,
  2657392035,
  249268274,
  2044508324,
  3772115230,
  2547177864,
  162941995,
  2125561021,
  3887607047,
  2428444049,
  498536548,
  1789927666,
  4089016648,
  2227061214,
  450548861,
  1843258603,
  4107580753,
  2211677639,
  325883990,
  1684777152,
  4251122042,
  2321926636,
  335633487,
  1661365465,
  4195302755,
  2366115317,
  997073096,
  1281953886,
  3579855332,
  2724688242,
  1006888145,
  1258607687,
  3524101629,
  2768942443,
  901097722,
  1119000684,
  3686517206,
  2898065728,
  853044451,
  1172266101,
  3705015759,
  2882616665,
  651767980,
  1373503546,
  3369554304,
  3218104598,
  565507253,
  1454621731,
  3485111705,
  3099436303,
  671266974,
  1594198024,
  3322730930,
  2970347812,
  795835527,
  1483230225,
  3244367275,
  3060149565,
  1994146192,
  31158534,
  2563907772,
  4023717930,
  1907459465,
  112637215,
  2680153253,
  3904427059,
  2013776290,
  251722036,
  2517215374,
  3775830040,
  2137656763,
  141376813,
  2439277719,
  3865271297,
  1802195444,
  476864866,
  2238001368,
  4066508878,
  1812370925,
  453092731,
  2181625025,
  4111451223,
  1706088902,
  314042704,
  2344532202,
  4240017532,
  1658658271,
  366619977,
  2362670323,
  4224994405,
  1303535960,
  984961486,
  2747007092,
  3569037538,
  1256170817,
  1037604311,
  2765210733,
  3554079995,
  1131014506,
  879679996,
  2909243462,
  3663771856,
  1141124467,
  855842277,
  2852801631,
  3708648649,
  1342533948,
  654459306,
  3188396048,
  3373015174,
  1466479909,
  544179635,
  3110523913,
  3462522015,
  1591671054,
  702138776,
  2966460450,
  3352799412,
  1504918807,
  783551873,
  3082640443,
  3233442989,
  3988292384,
  2596254646,
  62317068,
  1957810842,
  3939845945,
  2647816111,
  81470997,
  1943803523,
  3814918930,
  2489596804,
  225274430,
  2053790376,
  3826175755,
  2466906013,
  167816743,
  2097651377,
  4027552580,
  2265490386,
  503444072,
  1762050814,
  4150417245,
  2154129355,
  426522225,
  1852507879,
  4275313526,
  2312317920,
  282753626,
  1742555852,
  4189708143,
  2394877945,
  397917763,
  1622183637,
  3604390888,
  2714866558,
  953729732,
  1340076626,
  3518719985,
  2797360999,
  1068828381,
  1219638859,
  3624741850,
  2936675148,
  906185462,
  1090812512,
  3747672003,
  2825379669,
  829329135,
  1181335161,
  3412177804,
  3160834842,
  628085408,
  1382605366,
  3423369109,
  3138078467,
  570562233,
  1426400815,
  3317316542,
  2998733608,
  733239954,
  1555261956,
  3268935591,
  3050360625,
  752459403,
  1541320221,
  2607071920,
  3965973030,
  1969922972,
  40735498,
  2617837225,
  3943577151,
  1913087877,
  83908371,
  2512341634,
  3803740692,
  2075208622,
  213261112,
  2463272603,
  3855990285,
  2094854071,
  198958881,
  2262029012,
  4057260610,
  1759359992,
  534414190,
  2176718541,
  4139329115,
  1873836001,
  414664567,
  2282248934,
  4279200368,
  1711684554,
  285281116,
  2405801727,
  4167216745,
  1634467795,
  376229701,
  2685067896,
  3608007406,
  1308918612,
  956543938,
  2808555105,
  3495958263,
  1231636301,
  1047427035,
  2932959818,
  3654703836,
  1088359270,
  936918000,
  2847714899,
  3736837829,
  1202900863,
  817233897,
  3183342108,
  3401237130,
  1404277552,
  615818150,
  3134207493,
  3453421203,
  1423857449,
  601450431,
  3009837614,
  3294710456,
  1567103746,
  711928724,
  3020668471,
  3272380065,
  1510334235,
  755167117
}; // idb
int dword_53A608 = 1; // weak
int dword_53A7C4 = 1; // weak
char *off_53A7C8 = "Kinetic"; // idb
void *off_53A9E8 = &unk_51DC67; // weak
int dword_53B1E8[4] = { 3, 6, 5, 4 }; // idb
int dword_53B3F0[] = { 0 }; // weak
char aR[2] = "r"; // idb
char aGifver_0[] = "GIFVER"; // idb
char aGifver[] = "GIFVER"; // idb
int dword_53B4DC[42] =
{
  0,
  1,
  3,
  7,
  15,
  31,
  63,
  127,
  255,
  511,
  1023,
  2047,
  4095,
  1598441799,
  1380075852,
  156848705,
  1347240521,
  1444945987,
  1769173605,
  874540655,
  539766830,
  1769096457,
  777199715,
  2036421152,
  1684959085,
  1632438572,
  958406770,
  825242144,
  538979376,
  976433440,
  809120304,
  1126697524,
  1866670121,
  1769109872,
  544499815,
  926497073,
  1769096480,
  777199715,
  2036421152,
  1684959085,
  10,
  5485840
}; // idb
char a121_0[6] = "1.2.1"; // weak
char a121[6] = "1.2.1"; // weak
char byte_53B8CC = '1'; // weak
char aIncorrectHeade[23] = "incorrect header check"; // weak
char aUnknownCompres[27] = "unknown compression method"; // weak
char aInvalidWindowS[20] = "invalid window size"; // weak
char aUnknownCompres_0[27] = "unknown compression method"; // weak
char aUnknownHeaderF[25] = "unknown header flags set"; // weak
char aHeaderCrcMisma[20] = "header crc mismatch"; // weak
char aInvalidBlockTy[19] = "invalid block type"; // weak
char aInvalidStoredB[29] = "invalid stored block lengths"; // weak
char aTooManyLengthO[36] = "too many length or distance symbols"; // weak
char aInvalidCodeLen[25] = "invalid code lengths set"; // weak
char aInvalidBitLeng[26] = "invalid bit length repeat"; // weak
char aInvalidBitLeng_0[26] = "invalid bit length repeat"; // weak
char aInvalidLiteral[28] = "invalid literal/lengths set"; // weak
char aInvalidDistanc[22] = "invalid distances set"; // weak
char aInvalidLiteral_0[28] = "invalid literal/length code"; // weak
char aInvalidDistanc_0[22] = "invalid distance code"; // weak
char aInvalidDistanc_1[30] = "invalid distance too far back"; // weak
char aIncorrectDataC[21] = "incorrect data check"; // weak
char aIncorrectLengt[23] = "incorrect length check"; // weak
void *off_53BACC = &unk_51FC70; // weak
void *off_53BAE0 = &unk_5200F0; // weak
_UNKNOWN unk_53BAF4; // weak
char aStreamError[13] = "stream error"; // weak
char aInsufficientMe[20] = "insufficient memory"; // weak
char aBufferError[13] = "buffer error"; // weak
char aInvalidDistanc_2[30] = "invalid distance too far back"; // weak
char aInvalidDistanc_3[22] = "invalid distance code"; // weak
char aInvalidLiteral_1[28] = "invalid literal/length code"; // weak
int dword_53BC98 = 2; // weak
int dword_53BCA0 = 28800; // weak
int dword_53BCA4 = 1; // weak
int dword_53BCA8 = 4294963696; // weak
void **off_53BD30[2] = { &off_53BCB0, &off_53BCF0 }; // weak
void *off_53BD58 = &unk_577B20; // weak
int dword_53BFFC = 4294967295; // weak
_UNKNOWN unk_53C9D8; // weak
_UNKNOWN unk_53CC20; // weak
int dword_53CC80 = 4294967295; // weak
int dword_53CC84 = 0; // weak
int dword_53CC88 = 0; // weak
int dword_53CC8C = 4294967295; // weak
int dword_53CC90 = 0; // weak
int dword_53CC94 = 0; // weak
int dword_53CF44 = 1024; // weak
int dword_53CF48 = 4294966273; // weak
int dword_53CF4C = 53; // weak
int dword_53CF50 = 11; // weak
int dword_53CF54 = 64; // weak
int dword_53CF58 = 1023; // weak
int dword_53CF5C = 128; // weak
int dword_53CF60 = 4294967169; // weak
int dword_53CF64 = 24; // weak
int dword_53CF68 = 8; // weak
int dword_53CF6C = 32; // weak
int dword_53CF70 = 127; // weak
int dword_53E528[14] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; // idb
_UNKNOWN unk_53E560; // weak
int dword_53E660 = 0; // weak
int dword_53E664 = 0; // weak
int dword_53E668 = 0; // weak
int dword_53E6AC = 0; // weak
int nResult = 0; // idb
int dword_53E6B8[70] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
_UNKNOWN unk_53E7D0; // weak
_UNKNOWN unk_53E8C8; // weak
char byte_5508C8[17664]; // idb
double dbl_562808[240]; // idb
char dword_562F88[]; // idb
char byte_563088[256]; // idb
double dbl_563188[240]; // idb
void *dword_563908; // idb
void *dword_56390C; // idb
int dword_563910; // weak
void *Memory; // idb
void *dword_563918; // idb
int dword_56391C; // weak
int dword_563920; // weak
CHAR byte_56AFC8[4916]; // idb
int dword_56C2FC; // weak
int dword_56C300; // weak
char Str[616]; // idb
_UNKNOWN unk_56C570; // weak
int dword_56C6A4; // weak
_UNKNOWN unk_56C6A8; // weak
_UNKNOWN unk_56C6B4; // weak
_UNKNOWN unk_56C6C0; // weak
int dword_56C6D0[]; // weak
int dword_56C6D4; // weak
int dword_56C6D8; // weak
int dword_56C6DC; // weak
int dword_56C6E0; // weak
int dword_56C6E4; // weak
int dword_56C6E8; // weak
int dword_56C6EC; // weak
int dword_56C6F0; // weak
int dword_56C6F4; // weak
int dword_56C6F8; // weak
int dword_56C6FC; // weak
int dword_56C700; // weak
int dword_56C704; // weak
int dword_56C708; // weak
int dword_56C70C; // weak
char byte_56C710; // weak
int (__cdecl *dword_56C718)(_DWORD, _DWORD); // weak
void *Dst; // idb
void *Src; // idb
size_t Size; // idb
LARGE_INTEGER Frequency; // idb
int (__cdecl *dword_56C730)(_DWORD); // weak
_UNKNOWN unk_56C738; // weak
int dword_56C938[48]; // idb
int dword_56C9F8; // weak
int dword_56C9FC; // weak
int dword_56CA00; // weak
int dword_56CA04; // weak
int dword_56CA08; // weak
int dword_56CA0C; // weak
int dword_56CA10; // weak
int dword_56CA14; // weak
int dword_56CA18; // weak
int dword_56CA1C; // weak
int dword_56CA3C; // weak
int dword_56CA40; // weak
int dword_56CA44; // weak
int dword_56CA48; // weak
int dword_56CA4C; // weak
int dword_56CA50; // weak
int dword_56CABC; // weak
int dword_56CAC0; // weak
int dword_56CAC4; // weak
int dword_56CAC8; // weak
int dword_56CACC; // weak
int dword_56CAD0; // weak
int dword_56CB38; // weak
_UNKNOWN dword_56CB3C; // weak
int dword_56CB40; // weak
int dword_56CB44; // weak
_UNKNOWN unk_56CC48; // weak
int dword_56DBE8; // weak
char byte_56DBF0[2048]; // idb
int dword_56E3F0; // weak
int dword_56E3F8[216]; // idb
_UNKNOWN unk_56E758; // weak
_UNKNOWN unk_56E7D8; // weak
__int16 word_56E7F8[2048]; // idb
int dword_56F7F8[2048]; // idb
int dword_5717F8; // weak
int dword_5717FC; // weak
int dword_571800; // weak
int dword_571804; // weak
int dword_571808; // weak
int dword_57180C; // weak
int dword_571810; // weak
int dword_571814; // weak
int dword_571818; // weak
int dword_57181C; // weak
_UNKNOWN unk_571820; // weak
int dword_574820; // weak
int dword_574824; // weak
void *dword_574828[2048]; // idb
int dword_576828; // weak
int dword_57682C; // weak
int dword_576830[128]; // idb
int dword_576A30; // weak
int dword_576A34; // weak
int dword_576A38; // weak
int dword_576A3C; // weak
int dword_576A40; // weak
int dword_576A44; // weak
int dword_576A48; // weak
int dword_576A4C; // weak
int dword_576A50; // weak
int dword_576A54; // weak
HHOOK hhk; // idb
int dword_576A5C; // weak
int dword_576A60; // weak
int dword_576A64; // weak
char Dest[]; // idb
int dword_576AE8; // weak
int dword_576AEC; // weak
int dword_576AF0; // weak
int dword_576AF4; // weak
int dword_576AF8; // weak
int dword_576AFC; // weak
_UNKNOWN dword_576B04; // weak
int dword_576B18; // weak
int dword_576B1C; // weak
int dword_576B24; // weak
int dword_5771F4; // weak
int dword_5771F8; // weak
int dword_57723C; // weak
int dword_5773A8; // weak
int Target; // idb
int dword_5773B8; // weak
struct _TIME_ZONE_INFORMATION TimeZoneInformation; // idb
int dword_57747C; // weak
int dword_5775D8; // weak
int dword_5775DC; // weak
int dword_5775E0; // weak
int dword_5775E4; // weak
int dword_5775E8; // weak
int dword_577600; // idb
int dword_57760C; // weak
UINT uNumber; // idb
int dword_5776A0[64]; // idb
int dword_5777C8; // weak
int dword_578B20; // weak


//----- (00404390) --------------------------------------------------------
DWORD sub_404390()
{
  LARGE_INTEGER PerformanceCount; // [esp+0h] [ebp-8h]

  if ( !Frequency.QuadPart )
    return GetTickCount() / 0xA;
  QueryPerformanceCounter(&PerformanceCount);
  return 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
}

//----- (00404410) --------------------------------------------------------
char *__cdecl sub_404410(char *Dest, char *Source, size_t Count)
{
  strncpy(Dest, Source, Count);
  Dest[Count - 1] = 0;
  return Dest;
}

//----- (00404440) --------------------------------------------------------
int __thiscall sub_404440(_DWORD *this, int a2)
{
  signed int v2; // eax
  int result; // eax

  v2 = abs(a2);
  if ( v2 <= 5100 )
    result = this[v2 + 2002];
  else
    result = 0;
  return result;
}

//----- (00404530) --------------------------------------------------------
int __thiscall sub_404530(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  int v3; // eax
  struct _RTL_CRITICAL_SECTION *v4; // edx
  int v5; // ebx

  v1 = this;
  v2 = this + 144;
  sub_4808E0(this + 144);
  v3 = ((int (*)(void))v1[132]->DebugInfo[1].ProcessLocksList.Blink)();
  v1[142] = (LPCRITICAL_SECTION)v3;
  v1[143] = v4;
  v5 = v3;
  sub_4808F0(v2);
  return v5;
}

//----- (00404630) --------------------------------------------------------
LPCRITICAL_SECTION __thiscall sub_404630(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  LPCRITICAL_SECTION v3; // ebx
  LPCRITICAL_SECTION v4; // esi

  v1 = this;
  v2 = this + 144;
  sub_4808E0(this + 144);
  v3 = v1[142];
  v4 = v1[143];
  sub_4808F0(v2);
  return v3;
}

//----- (00404670) --------------------------------------------------------
signed int __thiscall sub_404670(LPCRITICAL_SECTION *this, __int64 a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // ebx
  __int64 v4; // rdi
  unsigned __int8 v5; // of
  __int64 v6; // rdi
  signed int result; // eax

  v2 = this;
  v3 = this + 144;
  sub_4808E0(this + 144);
  v4 = *((_QWORD *)v2 + 71);
  sub_4808F0(v3);
  v5 = __OFSUB__(v4, a2);
  v6 = v4 - a2;
  result = v6;
  if ( v6 >= 0 && (!((unsigned __int8)((v6 < 0) ^ v5) | (HIDWORD(v6) == 0)) || (unsigned int)v6 > 0x7FFFFFFF) )
    result = 0x7FFFFFFF;
  return result;
}

//----- (004046D0) --------------------------------------------------------
_DWORD *__thiscall sub_4046D0(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // edx

  result = this;
  this[4] = 0x10000;
  this[5] = 0x10000;
  this[1] = 10;
  this[20] = 10;
  this[15] = -1;
  this[23] = -1;
  this[38] = 400;
  this[37] = 400;
  this[10] = 5000;
  this[24] = 5000;
  v3 = this + 36;
  *this = 0;
  this[6] = 4;
  this[14] = 50;
  this[16] = 512;
  this[17] = 100;
  *((_BYTE *)this + 72) = 0;
  this[19] = 0;
  this[89] = 0;
  this[90] = 0;
  this[91] = 0;
  this[7] = 0;
  this[8] = 0;
  this[11] = 0;
  this[2] = 0;
  this[3] = 0;
  this[21] = 1000;
  this[22] = 0;
  *((_BYTE *)this + 36) = 1;
  *((_BYTE *)this + 37) = 1;
  *((_BYTE *)this + 38) = 0;
  this[12] = 90000;
  *((_BYTE *)this + 100) = 1;
  *((_BYTE *)this + 101) = 0;
  this[26] = 1000;
  this[13] = 0;
  *((_BYTE *)this + 112) = 0;
  this[86] = 0;
  *((_BYTE *)this + 348) = 0;
  this[27] = 20;
  this[88] = 20971520;
  this[84] = 0;
  this[85] = 0;
  this[36] = 204800;
  *((_BYTE *)this + 188) = 0;
  *((_BYTE *)this + 189) = 1;
  *((_BYTE *)this + 190) = 1;
  this[39] = 0;
  this[42] = 300;
  this[43] = 125;
  this[44] = 8000;
  this[46] = 0;
  this[45] = 0;
  this[41] = 0;
  this[40] = 0;
  switch ( a2 )
  {
    case 1:
      this[4] = 0x400000;
      this[5] = 0x400000;
      this[89] = 2;
      this[10] = 500;
      this[17] = 10000;
      this[1] = 2000;
      this[21] = 20000;
      this[22] = 1000;
      *((_BYTE *)this + 37) = 0;
      this[38] = 1000;
      *v3 = 0x100000;
      this[37] = 1000;
      this[45] = 0x2000;
      this[42] = 150;
      goto LABEL_8;
    case 2:
      this[4] = 0x100000;
      this[5] = 0x100000;
      this[10] = 500;
      this[17] = 10;
      this[21] = 2000;
      this[22] = 100;
      *((_BYTE *)this + 37) = 0;
      this[38] = 1000;
      *v3 = 0x100000;
      this[37] = 1000;
      this[45] = 0x2000;
      this[42] = 150;
      goto LABEL_7;
    case 3:
      this[4] = 0x200000;
      this[5] = 0x200000;
      this[89] = 2;
      this[10] = 2500;
      this[17] = 10000;
      this[1] = 2000;
      this[21] = 20000;
      this[22] = 1000;
      goto LABEL_9;
    case 4:
      this[89] = 2;
      this[10] = 2500;
      this[17] = 10;
      this[1] = 2;
      this[21] = 2000;
      this[22] = 10;
      goto LABEL_9;
    case 5:
      this[4] = 0x1000000;
      this[5] = 0x1000000;
      *((_BYTE *)this + 37) = 0;
      this[10] = 1500;
      this[21] = 50000;
      this[22] = 5000;
      this[88] = 209715200;
      this[24] = 50000;
      this[38] = 32000;
      *v3 = 52428800;
      this[37] = 32000;
      this[45] = 300000;
      this[46] = 100;
LABEL_7:
      this[1] = 2;
      this[89] = 2;
LABEL_8:
      this[16] = 1460;
LABEL_9:
      this[7] = 30000;
      this[11] = 90000;
      break;
    default:
      break;
  }
  qmemcpy(this + 48, v3, 0x30u);
  qmemcpy(this + 60, v3, 0x30u);
  qmemcpy(this + 72, v3, 0x30u);
  return result;
}

//----- (00404B00) --------------------------------------------------------
int __thiscall sub_404B00(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  int result; // eax
  int v4; // esi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  if ( v1[35] )
  {
    v4 = sub_402220(*((_QWORD *)v1 + 53));
    sub_4808F0(v2);
    result = v4;
  }
  else
  {
    sub_4808F0(v2);
    result = 0;
  }
  return result;
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (00404BD0) --------------------------------------------------------
__int16 __thiscall sub_404BD0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  int v3; // edx
  LPCRITICAL_SECTION v4; // ecx
  __int16 result; // ax
  __int16 v6; // si

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v4 = v1[35];
  if ( v4 )
  {
    v6 = sub_40167C(v4, v3) + *((_WORD *)v1 + 234);
    sub_4808F0(v2);
    result = v6;
  }
  else
  {
    sub_4808F0(v2);
    result = 0;
  }
  return result;
}
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);

//----- (00404CA0) --------------------------------------------------------
int __thiscall sub_404CA0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  int v3; // edx
  LPCRITICAL_SECTION v4; // ecx
  int result; // eax
  int v6; // esi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v4 = v1[35];
  if ( v4 )
  {
    v6 = (int)v1[117] + sub_40167C(v4, v3);
    sub_4808F0(v2);
    result = v6;
  }
  else
  {
    sub_4808F0(v2);
    result = 0;
  }
  return result;
}
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);

//----- (00404D70) --------------------------------------------------------
int __stdcall sub_404D70(__int16 a1)
{
  __int16 v1; // ax

  v1 = sub_401974();
  return sub_480F70(a1, v1);
}
// 401974: using guessed type int sub_401974(void);

//----- (00404DC0) --------------------------------------------------------
int __thiscall sub_404DC0(void (***this)(void), int a2)
{
  LPCRITICAL_SECTION *v2; // esi

  v2 = (LPCRITICAL_SECTION *)this;
  (**this)();
  sub_4808E0(v2 + 137);
  sub_483870(v2, a2, 6);
  sub_4808F0(v2 + 137);
  return ((int (*)(void))(*v2)->LockCount)();
}

//----- (00404E90) --------------------------------------------------------
int sub_404E90()
{
  struct _IP_ADAPTER_INFO *v0; // ecx
  ULONG SizePointer; // [esp+0h] [ebp-14408h]
  struct _IP_ADAPTER_INFO AdapterInfo; // [esp+4h] [ebp-14404h]

  SizePointer = 82944;
  if ( GetAdaptersInfo(&AdapterInfo, &SizePointer) )
    return 0;
  v0 = &AdapterInfo;
  while ( v0->AddressLength != 6 || v0->Type != 6 )
  {
    v0 = v0->Next;
    if ( !v0 )
      return 0;
  }
  return v0->Address[5] | ((v0->Address[4] | ((v0->Address[3] | ((v0->Address[2] | ((v0->Address[1] | (v0->Address[0] << 8)) << 8)) << 8)) << 8)) << 8);
}

//----- (00404FF0) --------------------------------------------------------
void *__thiscall sub_404FF0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Agent::`vftable';
  dword_56391C = 0;
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 510C74: using guessed type void *Agent::`vftable';
// 56391C: using guessed type int dword_56391C;

//----- (00405060) --------------------------------------------------------
int __thiscall sub_405060(const CHAR *this, int a2, int a3, int a4)
{
  signed __int16 *v4; // esi
  _DWORD *v5; // eax
  int v6; // edi
  int v7; // ebx
  signed int v8; // edi
  signed __int16 *v9; // eax
  int v10; // eax
  bool v11; // zf
  signed int v13; // [esp+8h] [ebp-4h]

  v4 = (signed __int16 *)this;
  sub_401F6E(this + 260);
  v5 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 1507) && *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 8000) > 0 )
  {
    v13 = 30;
    do
    {
      v6 = v5[1507];
      v7 = *(_DWORD *)(v6 + 4 * (rand() % *(_DWORD *)(v6 + 8000)));
      if ( !*(_DWORD *)(v7 + 136) )
      {
        v8 = 0;
        if ( v4[261] > 0 )
        {
          v9 = v4 + 262;
          while ( *v9 != *(_DWORD *)(v7 + 128) )
          {
            ++v8;
            v9 += 2;
            if ( v8 >= v4[261] )
              goto LABEL_11;
          }
          v4[2 * v8 + 263] += rand() % 200;
        }
LABEL_11:
        v10 = v4[261];
        if ( v8 == v10 )
        {
          v4[2 * v10 + 262] = *(_WORD *)(v7 + 128);
          v4[2 * v4[261]++ + 263] = rand() % 200 + 1;
        }
      }
      v11 = v13-- == 1;
      v5 = dword_563908;
    }
    while ( !v11 );
  }
  v4[1278] = *((_WORD *)v5 + 28737);
  sub_402707(v4 + 1229, 1);
  sub_401447(v4 + 258);
  sub_4025BD(7, -1);
  return sub_4023CE(-1, -1, -1, 0, 0, -1, 0, 0, 0);
}
// 401447: using guessed type _DWORD __stdcall sub_401447(_DWORD);
// 401F6E: using guessed type _DWORD __stdcall sub_401F6E(LPCSTR lpFileName);
// 4023CE: using guessed type _DWORD __stdcall sub_4023CE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4025BD: using guessed type _DWORD __stdcall sub_4025BD(char, _DWORD);
// 402707: using guessed type _DWORD __stdcall sub_402707(_DWORD, _DWORD);

//----- (00405290) --------------------------------------------------------
int __stdcall sub_405290(_BYTE *a1)
{
  *a1 = 0;
  return 0;
}

//----- (004052A0) --------------------------------------------------------
int __stdcall sub_4052A0(int a1)
{
  return 0;
}

//----- (004052B0) --------------------------------------------------------
signed int sub_4052B0()
{
  return 1;
}

//----- (00405320) --------------------------------------------------------
int __stdcall sub_405320(int a1, int a2)
{
  char *v2; // ebx
  signed int v3; // ebp
  unsigned int v4; // kr00_4
  int v5; // eax
  int v6; // esi
  char *v7; // edi
  char Dst; // [esp+10h] [ebp-7590h]
  int v10; // [esp+12h] [ebp-758Eh]
  int v11; // [esp+16h] [ebp-758Ah]
  int v12; // [esp+1Ah] [ebp-7586h]
  int v13; // [esp+1Eh] [ebp-7582h]
  int v14; // [esp+2Ah] [ebp-7576h]
  int v15; // [esp+2Eh] [ebp-7572h]
  int v16; // [esp+36h] [ebp-756Ah]
  __int16 v17; // [esp+68h] [ebp-7538h]
  char Dest; // [esp+6Ch] [ebp-7534h]

  v2 = &Dest;
  v3 = 0;
  do
  {
    sprintf(v2, "User%d", v3);
    v4 = strlen(v2);
    memset(&Dst, 0, 0x5Au);
    v5 = rand();
    v6 = v5 % 500;
    v15 = v5 % 500;
    v14 = rand() % 500;
    v12 = v14 * (rand() % 300);
    v13 = v6 * (rand() % 300);
    v11 = rand() % 500;
    v10 = rand() % 500;
    v7 = &v2[v4 + 1];
    ++v3;
    v2 += v4 + 91;
    v16 = rand() % 1500;
    qmemcpy(v7, &Dst, 0x58u);
    *((_WORD *)v7 + 44) = v17;
  }
  while ( v3 < 80 );
  return sub_40184D(a1, "Fake Chart,Alias,Squad", &Dest, v2 - &Dest);
}
// 40184D: using guessed type _DWORD __stdcall sub_40184D(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004054A0) --------------------------------------------------------
int __thiscall sub_4054A0(int this, int a2, int a3)
{
  signed int v3; // edx
  signed __int16 *v4; // esi
  __int16 v5; // di
  signed int v6; // eax
  int v7; // eax

  v3 = 0;
  if ( *(_WORD *)(this + 522) > 0 )
  {
    v4 = (signed __int16 *)(this + 524);
    while ( *v4 != a2 )
    {
      ++v3;
      v4 += 2;
      if ( v3 >= *(signed __int16 *)(this + 522) )
        goto LABEL_7;
    }
    *(_WORD *)(this + 4 * v3 + 526) += a3;
  }
LABEL_7:
  v5 = *(_WORD *)(this + 522);
  if ( v3 == v5 && v5 < 100 )
  {
    *(_WORD *)(this + 4 * v5 + 524) = a2;
    *(_WORD *)(this + 4 * (signed __int16)(*(_WORD *)(this + 522))++ + 526) = a3;
  }
  v6 = abs(a2);
  if ( v6 <= 5100 )
  {
    v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v6 + 8008);
    if ( v7 )
      *(_DWORD *)(this + 516) -= a3 * *(_DWORD *)(v7 + 144);
  }
  sub_401447(this + 516);
  return sub_40295A(1);
}
// 401447: using guessed type _DWORD __stdcall sub_401447(_DWORD);
// 40295A: using guessed type _DWORD __stdcall sub_40295A(_DWORD);

//----- (004055A0) --------------------------------------------------------
int __thiscall sub_4055A0(char *this, int a2)
{
  __int16 v2; // di
  char *v3; // esi
  int v4; // eax
  signed int v5; // ecx
  signed __int16 *v6; // ebx
  unsigned int v7; // edx
  __int16 v8; // bx
  __int16 v9; // dx
  int result; // eax

  v2 = a2;
  v3 = this;
  v4 = sub_48E510(*((_DWORD **)dword_563908 + 1512), a2);
  if ( v4 )
    *(_DWORD *)(v3 + 1018) -= sub_48E6E0(
                                *((_DWORD **)dword_563908 + 1512),
                                (int)dword_563908 + 27892,
                                v4,
                                (int)(v3 + 1026),
                                *((signed __int16 *)v3 + 512));
  v5 = 0;
  if ( *((_WORD *)v3 + 512) > 0 )
  {
    v6 = (signed __int16 *)(v3 + 1026);
    do
    {
      if ( a2 >= 0 )
      {
        if ( *v6 == a2 )
          break;
      }
      else
      {
        v7 = (signed int)((unsigned __int64)(274877907i64 * *v6) >> 32) >> 6;
        if ( v7 + (v7 >> 31) == a2 )
        {
          v8 = *(_WORD *)&v3[2 * v5 + 1026];
          if ( -v8 % 1000 < 999 )
            *(_WORD *)&v3[2 * v5 + 1026] = v8 - 1;
          break;
        }
      }
      ++v5;
      ++v6;
    }
    while ( v5 < *((signed __int16 *)v3 + 512) );
  }
  v9 = *((_WORD *)v3 + 512);
  result = v9;
  if ( v5 == v9 && v9 < 500 )
  {
    if ( a2 < 0 )
      v2 = 1000 * a2 - 1;
    *(_WORD *)&v3[2 * v9 + 1026] = v2;
    ++*((_WORD *)v3 + 512);
  }
  return result;
}

//----- (00405720) --------------------------------------------------------
int __stdcall sub_405720(int a1, int a2)
{
  return sub_401028(a1, a2);
}
// 401028: using guessed type _DWORD __stdcall sub_401028(_DWORD, _DWORD);

//----- (004057D0) --------------------------------------------------------
int __thiscall sub_4057D0(char *this, int a2, int a3, char *Str1, int a5)
{
  BYTE *v5; // esi
  char *v6; // edi

  v5 = (BYTE *)a3;
  v6 = this;
  if ( !a3 )
    v5 = &Source;
  if ( !_stricmp(Str1, "*warp") )
    sub_4023CE(-1, -1, -1, 0, 0, -1, 0, 0, 0);
  return sub_40146F(dword_563908, v6 + 2490, a2, v5, Str1, a5);
}
// 40146F: using guessed type int __thiscall sub_40146F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4023CE: using guessed type _DWORD __stdcall sub_4023CE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00405850) --------------------------------------------------------
int __fastcall sub_405850(int ecx0, int edx0, int a1, int a2, int a3, int a4, int a5, int a6)
{
  return sub_401D39(ecx0, edx0);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00405870) --------------------------------------------------------
int sub_405870()
{
  return 0;
}

//----- (00405890) --------------------------------------------------------
int __thiscall sub_405890(signed __int16 *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  sub_402112(a2, this[1277], a3, a4, a5, a6, a7, a8, 0, 0, 0, 0);
  sub_4025BD(7, -1);
  return sub_4023CE(-1, -1, -1, 0, 0, -1, 0, 0, 0);
}
// 402112: using guessed type _DWORD __stdcall sub_402112(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4023CE: using guessed type _DWORD __stdcall sub_4023CE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4025BD: using guessed type _DWORD __stdcall sub_4025BD(char, _DWORD);

//----- (00405930) --------------------------------------------------------
size_t __stdcall sub_405930(int a1, int a2, void *Src, size_t Size)
{
  size_t v4; // esi
  size_t result; // eax
  size_t v6; // eax

  v4 = Size;
  if ( sub_4BA580(a2 + 1, (int *)&Size, (int)Src, Size) )
  {
    *(_BYTE *)a2 = 0;
    memcpy((void *)(a2 + 1), Src, v4);
    result = v4 + 1;
  }
  else
  {
    v6 = Size;
    *(_BYTE *)a2 = 1;
    result = v6 + 1;
  }
  return result;
}

//----- (004059A0) --------------------------------------------------------
int __stdcall sub_4059A0(int a1, void *Dst, int a3, int a4)
{
  int v4; // esi
  int result; // eax
  int v6; // ST08_4
  signed int v7; // eax

  if ( *(_BYTE *)a3 )
  {
    v6 = a3 + 1;
    a3 = 0x2000;
    v7 = sub_4BA5C0((int)Dst, &a3, v6, a4 - 1);
    result = v7 == 0 ? a3 : 0;
  }
  else
  {
    v4 = a4;
    memcpy(Dst, (const void *)(a3 + 1), a4 - 1);
    result = v4 - 1;
  }
  return result;
}

//----- (00405A30) --------------------------------------------------------
int __thiscall sub_405A30(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // esi
  bool v3; // zf
  void (__stdcall *v4)(signed int, char *, signed int); // edx
  char v5; // [esp+7h] [ebp-1h]

  result = 0;
  v2 = this;
  v3 = this[3] == 0;
  this[243] = 0;
  this[244] = 0;
  if ( !v3 )
  {
    v4 = *(void (__stdcall **)(signed int, char *, signed int))(*this + 168);
    v5 = 38;
    v4(4, &v5, 1);
    result = sub_485840((void (***)(void))v2[3]);
  }
  return result;
}

//----- (00405A80) --------------------------------------------------------
int __fastcall sub_405A80(int a1, int a2, __int16 a3, int a4, void *Src, size_t Size, int a7, int a8)
{
  void (****v8)(void); // ebp
  int v10; // edx
  int v11; // ecx
  int v12; // eax
  char *i; // esi
  __int16 v14; // cx
  signed int v15; // eax
  _DWORD *v16; // edi
  char v17; // [esp+Ch] [ebp-804h]
  __int16 v18; // [esp+Dh] [ebp-803h]
  __int16 v19; // [esp+Fh] [ebp-801h]
  unsigned __int16 v20; // [esp+11h] [ebp-7FFh]
  __int16 v21; // [esp+13h] [ebp-7FDh]
  __int16 v22; // [esp+15h] [ebp-7FBh]
  int v23; // [esp+17h] [ebp-7F9h]
  char Dst[2033]; // [esp+1Bh] [ebp-7F5h]

  v8 = (void (****)(void))a1;
  if ( !*(_DWORD *)(a1 + 12) )
    return sub_401D39(0, a2);
  v17 = 28;
  v20 = sub_401974();
  v23 = sub_401D39(v11, v10);
  v19 = sub_491AE0(*((_DWORD **)dword_563908 + 1507), v23);
  v21 = a3;
  v22 = a4;
  v18 = ((signed int)((unsigned __int64)(274877907i64
                                       * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1)
                                                                        + 4 * *((_DWORD *)dword_563908 + 2679)))) >> 32) >> 6)
      + ((unsigned int)((unsigned __int64)(274877907i64
                                         * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1)
                                                                          + 4 * *((_DWORD *)dword_563908 + 2679)))) >> 32) >> 31);
  memcpy(Dst, Src, Size);
  v12 = 0;
  for ( i = &Dst[Size]; v12 < a8; ++v12 )
  {
    v14 = *(_WORD *)(a7 + 2 * v12);
    if ( v14 > 0 )
    {
      *(_WORD *)i = v14;
      i += 2;
    }
  }
  v15 = abs(a4);
  if ( v15 <= 5100
    && (v16 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1507) + 4 * v15 + 8008)) != 0
    && (*(int (__thiscall **)(_DWORD *))(*v16 + 8))(v16) )
  {
    ((void (__thiscall *)(void (****)(void), int, char *, int))(*v8)[42])(v8, v16[112] != 0 ? 4 : 0, &v17, i - &v17);
  }
  else
  {
    ((void (__thiscall *)(void (****)(void), _DWORD, char *, int))(*v8)[42])(v8, 0, &v17, i - &v17);
  }
  sub_485840(v8[3]);
  return v20;
}
// 401974: using guessed type int sub_401974(void);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 405A80: using guessed type char Dst[2033];

//----- (00405C70) --------------------------------------------------------
int __thiscall sub_405C70(void *this, __int16 a2, __int16 a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-8h]
  __int16 v6; // [esp+1h] [ebp-7h]
  __int16 v7; // [esp+3h] [ebp-5h]

  v7 = a3;
  v6 = a2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 13;
  return v3(4, &v5, 5);
}

//----- (00405CC0) --------------------------------------------------------
int __thiscall sub_405CC0(_DWORD *this, char a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  void (__thiscall *v6)(_DWORD *, signed int, char *, signed int); // edx
  char v8; // [esp+4h] [ebp-8h]
  char v9; // [esp+5h] [ebp-7h]
  bool v10; // [esp+6h] [ebp-6h]
  int v11; // [esp+7h] [ebp-5h]

  v4 = this;
  v11 = a3;
  v9 = a2;
  v5 = *this;
  v10 = a4 != 0;
  v6 = *(void (__thiscall **)(_DWORD *, signed int, char *, signed int))(v5 + 168);
  v8 = 26;
  v6(this, 4, &v8, 7);
  return sub_485840((void (***)(void))v4[3]);
}

//----- (00405D20) --------------------------------------------------------
int __thiscall sub_405D20(void *this, __int16 a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-4h]
  __int16 v5; // [esp+1h] [ebp-3h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 34;
  return v2(4, &v4, 3);
}

//----- (00405D50) --------------------------------------------------------
int __thiscall sub_405D50(void *this)
{
  int (__stdcall *v1)(signed int, char *, signed int); // eax
  void *v3; // [esp-2h] [ebp-4h]

  v3 = this;
  v1 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  HIBYTE(v3) = 41;
  return v1(4, (char *)&v3 + 3, 1);
}

//----- (00405D80) --------------------------------------------------------
int __thiscall sub_405D80(void (****this)(void), int a2, int a3)
{
  int v3; // edx
  void (****v4)(void); // edi
  int v5; // ecx
  int v6; // ecx
  void (**v7)(void); // edx
  char v9; // [esp+8h] [ebp-18h]
  bool v10; // [esp+9h] [ebp-17h]
  int v11; // [esp+Ah] [ebp-16h]
  int v12; // [esp+Eh] [ebp-12h]
  int v13; // [esp+12h] [ebp-Eh]
  int v14; // [esp+16h] [ebp-Ah]
  int v15; // [esp+1Ah] [ebp-6h]
  char v16; // [esp+1Eh] [ebp-2h]

  v3 = *(_DWORD *)(a2 + 8);
  v11 = *(_DWORD *)a2;
  v4 = this;
  v5 = *(_DWORD *)(a2 + 4);
  v14 = *(_DWORD *)(a2 + 12);
  v13 = v3;
  LOBYTE(v3) = *(_BYTE *)(a2 + 20);
  v12 = v5;
  v6 = *(_DWORD *)(a2 + 16);
  v10 = a3 != 0;
  v16 = v3;
  v7 = (*v4)[42];
  v15 = v6;
  v9 = 27;
  ((void (__thiscall *)(void (****)(void), signed int, char *, signed int))v7)(v4, 4, &v9, 23);
  sub_401460(a2);
  return sub_485840(v4[3]);
}
// 401460: using guessed type _DWORD __stdcall sub_401460(_DWORD);

//----- (00405E20) --------------------------------------------------------
int __thiscall sub_405E20(void (****this)(void), char a2, int a3, __int16 a4, __int16 a5)
{
  void (****v5)(void); // esi
  void (**v6)(void); // edx
  char v8; // [esp+4h] [ebp-Ch]
  char v9; // [esp+5h] [ebp-Bh]
  int v10; // [esp+6h] [ebp-Ah]
  __int16 v11; // [esp+Ah] [ebp-6h]
  __int16 v12; // [esp+Ch] [ebp-4h]

  v9 = a2;
  v5 = this;
  v12 = a5;
  v11 = a4;
  v6 = (*this)[42];
  v10 = a3;
  v8 = 39;
  ((void (__thiscall *)(void (****)(void), signed int, char *, signed int))v6)(this, 4, &v8, 10);
  return sub_485840(v5[3]);
}

//----- (00405E90) --------------------------------------------------------
int __thiscall sub_405E90(void *this, char *Source, __int16 a3)
{
  void *v3; // esi
  char v5; // [esp+4h] [ebp-2004h]
  __int16 v6; // [esp+5h] [ebp-2003h]
  char Dest; // [esp+7h] [ebp-2001h]
  char v8; // [esp+2003h] [ebp-5h]

  v3 = this;
  v5 = 31;
  v6 = a3;
  strncpy(&Dest, Source, 0x1FFDu);
  v8 = 0;
  return (*(int (__thiscall **)(void *, signed int, char *, unsigned int))(*(_DWORD *)v3 + 168))(
           v3,
           4,
           &v5,
           strlen(&Dest) + 4);
}

//----- (00405F50) --------------------------------------------------------
int __thiscall sub_405F50(void *this, __int16 a2, __int16 a3, const char *a4)
{
  char v5; // [esp+8h] [ebp-804h]
  __int16 v6; // [esp+9h] [ebp-803h]
  __int16 v7; // [esp+Bh] [ebp-801h]
  char v8; // [esp+Dh] [ebp-7FFh]

  v6 = a2;
  v5 = 4;
  v7 = a3;
  strcpy(&v8, a4);
  return (*(int (__stdcall **)(signed int, char *, unsigned int))(*(_DWORD *)this + 168))(4, &v5, strlen(a4) + 6);
}

//----- (00406010) --------------------------------------------------------
int __thiscall sub_406010(_DWORD *this, _BYTE *a2)
{
  _DWORD *v2; // esi
  char *v3; // eax
  _BYTE *v4; // edx
  char v5; // cl
  int result; // eax
  char *v7; // eax
  int v8; // edx
  char v9; // cl

  v2 = this;
  if ( this[3] )
  {
    v7 = (char *)(this + 249);
    v8 = a2 - (_BYTE *)(this + 249);
    do
    {
      v9 = *v7;
      v7[v8] = *v7;
      ++v7;
    }
    while ( v9 );
    result = v2[248];
  }
  else
  {
    v3 = (char *)sub_402617(9u);
    v4 = a2;
    do
    {
      v5 = *v3;
      *v4++ = *v3++;
    }
    while ( v5 );
    result = v2[248];
  }
  return result;
}

//----- (00406080) --------------------------------------------------------
signed int __fastcall sub_406080(_DWORD *a1, int a2, int a3, int a4)
{
  _DWORD *v4; // ebx
  int v6; // eax
  int v7; // esi
  LPCRITICAL_SECTION *v8; // edi
  int v9; // esi
  int v10; // [esp+4h] [ebp-Ch]
  LARGE_INTEGER PerformanceCount; // [esp+8h] [ebp-8h]

  v4 = a1;
  if ( !a1[3] )
    return 0;
  v10 = sub_401D39(a1, a2);
  while ( 1 )
  {
    if ( Frequency.QuadPart )
    {
      QueryPerformanceCounter(&PerformanceCount);
      v6 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
    }
    else
    {
      v6 = GetTickCount() / 0xA;
    }
    if ( abs(v6 - v10) >= a4 )
      break;
    v7 = v4[3];
    v8 = (LPCRITICAL_SECTION *)(v7 + 548);
    sub_4808E0((LPCRITICAL_SECTION *)(v7 + 548));
    v9 = *(_DWORD *)(v7 + 132);
    sub_4808F0(v8);
    if ( v9 != 1 || GetAsyncKeyState(27) < 0 )
      break;
    if ( (*(int (__thiscall **)(_DWORD *, signed int))(*v4 + 160))(v4, 1) == a3 )
      return 1;
  }
  return 0;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004061C0) --------------------------------------------------------
int __thiscall sub_4061C0(void *this, int a2, __int16 a3, __int16 a4, __int16 a5)
{
  void *v5; // edi
  signed int v6; // eax
  _DWORD *v7; // esi
  int result; // eax
  char v9; // [esp+8h] [ebp-Ch]
  __int16 v10; // [esp+9h] [ebp-Bh]
  __int16 v11; // [esp+Bh] [ebp-9h]
  __int16 v12; // [esp+Dh] [ebp-7h]
  __int16 v13; // [esp+Fh] [ebp-5h]

  v13 = a2;
  v11 = a4;
  v5 = this;
  v10 = a3;
  v6 = abs(a2);
  v9 = 6;
  v12 = a5;
  if ( v6 <= 5100
    && (v7 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1507) + 4 * v6 + 8008)) != 0
    && (*(int (__thiscall **)(_DWORD *))(*v7 + 8))(v7) )
  {
    result = (*(int (__thiscall **)(void *, int, char *, signed int))(*(_DWORD *)v5 + 168))(
               v5,
               v7[112] != 0 ? 4 : 0,
               &v9,
               9);
  }
  else
  {
    result = (*(int (__thiscall **)(void *, _DWORD, char *, signed int))(*(_DWORD *)v5 + 168))(v5, 0, &v9, 9);
  }
  return result;
}

//----- (004062A0) --------------------------------------------------------
int __thiscall sub_4062A0(void *this, __int16 a2, __int16 a3, __int16 a4, __int16 a5)
{
  int (__stdcall *v5)(signed int, char *, signed int); // eax
  char v7; // [esp+0h] [ebp-Ch]
  __int16 v8; // [esp+1h] [ebp-Bh]
  __int16 v9; // [esp+3h] [ebp-9h]
  __int16 v10; // [esp+5h] [ebp-7h]
  __int16 v11; // [esp+7h] [ebp-5h]

  v8 = a3;
  v11 = a2;
  v10 = a5;
  v9 = a4;
  v5 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v7 = 20;
  return v5(4, &v7, 9);
}

//----- (00406300) --------------------------------------------------------
int __thiscall sub_406300(void *this, __int16 a2, char a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-4h]
  char v6; // [esp+1h] [ebp-3h]
  __int16 v7; // [esp+2h] [ebp-2h]

  v6 = a3;
  v7 = a2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 8;
  return v3(4, &v5, 4);
}

//----- (00406340) --------------------------------------------------------
int __thiscall sub_406340(void *this, int a2, int a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-Ch]
  int v6; // [esp+1h] [ebp-Bh]
  int v7; // [esp+5h] [ebp-7h]

  v7 = a3;
  v6 = a2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 5;
  return v3(4, &v5, 9);
}

//----- (00406380) --------------------------------------------------------
int __thiscall sub_406380(void *this, int a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-8h]
  int v5; // [esp+1h] [ebp-7h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 7;
  return v2(4, &v4, 5);
}

//----- (004063C0) --------------------------------------------------------
int __thiscall sub_4063C0(void *this, __int16 a2, __int16 a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-8h]
  __int16 v6; // [esp+1h] [ebp-7h]
  __int16 v7; // [esp+3h] [ebp-5h]

  v7 = a3;
  v6 = a2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 14;
  return v3(4, &v5, 5);
}

//----- (00406410) --------------------------------------------------------
int __thiscall sub_406410(void *this, char a2, char *Source)
{
  void *v3; // esi
  int (__thiscall *v4)(void *, signed int, char *, signed int); // edx
  char v6; // [esp+4h] [ebp-48h]
  char v7; // [esp+5h] [ebp-47h]
  char Dest; // [esp+6h] [ebp-46h]
  char v9; // [esp+45h] [ebp-7h]

  v3 = this;
  v6 = 17;
  v7 = a2;
  strncpy(&Dest, Source, 0x40u);
  v4 = *(int (__thiscall **)(void *, signed int, char *, signed int))(*(_DWORD *)v3 + 168);
  v9 = 0;
  return v4(v3, 4, &v6, 66);
}

//----- (00406490) --------------------------------------------------------
int __thiscall sub_406490(void *this, __int16 a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-4h]
  __int16 v5; // [esp+1h] [ebp-3h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 16;
  return v2(4, &v4, 3);
}

//----- (004064C0) --------------------------------------------------------
int __thiscall sub_4064C0(void *this, __int16 a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-4h]
  __int16 v5; // [esp+1h] [ebp-3h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 40;
  return v2(4, &v4, 3);
}

//----- (004064F0) --------------------------------------------------------
int __thiscall sub_4064F0(void *this, int *a2)
{
  int v2; // edx
  int (__stdcall *v3)(signed int, char *, signed int); // edx
  char v5; // [esp+0h] [ebp-14h]
  int v6; // [esp+1h] [ebp-13h]
  int v7; // [esp+5h] [ebp-Fh]
  int v8; // [esp+9h] [ebp-Bh]
  int v9; // [esp+Dh] [ebp-7h]

  v6 = *a2;
  v7 = a2[1];
  v2 = a2[2];
  v9 = a2[3];
  v8 = v2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 15;
  return v3(4, &v5, 17);
}

//----- (00406540) --------------------------------------------------------
int __thiscall sub_406540(void *this, __int16 a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-204h]
  __int16 v5; // [esp+1h] [ebp-203h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 32;
  return v2(4, &v4, 3);
}

//----- (004065B0) --------------------------------------------------------
int __thiscall sub_4065B0(void *this, int a2)
{
  int v2; // edx
  int (__stdcall *v3)(signed int, char *, signed int); // edx
  char v5; // [esp+0h] [ebp-204h]
  int v6; // [esp+Bh] [ebp-1F9h]
  int v7; // [esp+Fh] [ebp-1F5h]
  __int16 v8; // [esp+13h] [ebp-1F1h]

  v6 = *(_DWORD *)a2;
  v2 = *(_DWORD *)(a2 + 4);
  v8 = *(_WORD *)(a2 + 8);
  v7 = v2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 23;
  return v3(4, &v5, 21);
}

//----- (00406630) --------------------------------------------------------
int __thiscall sub_406630(void *this, __int16 a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-4h]
  __int16 v5; // [esp+1h] [ebp-3h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 10;
  return v2(4, &v4, 3);
}

//----- (00406660) --------------------------------------------------------
int __thiscall sub_406660(void *this, char a2, int a3, int a4, int a5)
{
  void *v5; // esi
  int v6; // eax
  int (__thiscall *v7)(void *, signed int, char *, signed int); // edx
  char v9; // [esp+4h] [ebp-14h]
  char v10; // [esp+5h] [ebp-13h]
  int v11; // [esp+6h] [ebp-12h]
  int v12; // [esp+Ah] [ebp-Eh]
  int v13; // [esp+Eh] [ebp-Ah]
  int v14; // [esp+12h] [ebp-6h]

  v5 = this;
  v14 = a4;
  v9 = 36;
  v13 = a3;
  v10 = a2;
  v11 = a5;
  v6 = sub_401D39(a3, a2);
  v7 = *(int (__thiscall **)(void *, signed int, char *, signed int))(*(_DWORD *)v5 + 168);
  v12 = v6;
  return v7(v5, 4, &v9, 18);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004066D0) --------------------------------------------------------
int __thiscall sub_4066D0(void *this, __int16 a2, char a3, int a4)
{
  int (__stdcall *v4)(signed int, char *, signed int); // edx
  char v6; // [esp+0h] [ebp-8h]
  char v7; // [esp+1h] [ebp-7h]
  __int16 v8; // [esp+2h] [ebp-6h]
  bool v9; // [esp+4h] [ebp-4h]

  v8 = a2;
  v9 = a4 != 0;
  v7 = a3;
  v4 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v6 = 9;
  return v4(4, &v6, 5);
}

//----- (00406720) --------------------------------------------------------
int __fastcall sub_406720(char *this, int edx0, int a2, const char *a3, const char *a4, int a5)
{
  char *v6; // ebp
  int result; // eax
  char *v8; // ecx
  _BYTE *v9; // edx
  char v10; // al
  unsigned int v11; // kr08_4
  char *v12; // eax
  char v13; // cl
  char v14; // [esp+Ch] [ebp-204h]
  char v15; // [esp+Dh] [ebp-203h]
  char v16; // [esp+Eh] [ebp-202h]
  char v17; // [esp+Fh] [ebp-201h]
  char v18[508]; // [esp+10h] [ebp-200h]

  v6 = this;
  if ( *a4 == 42
    || sub_401D39(this, edx0) - *((_DWORD *)this + 242) >= 150
    || strcmp(v6 + 1512, a4)
    || strcmp(v6 + 1768, a3)
    || (result = *((_DWORD *)v6 + 377), result != a2) )
  {
    strcpy(v6 + 1512, a4);
    v8 = v6 + 1768;
    v9 = v6 + 1768;
    do
    {
      v10 = *v8;
      *v9++ = *v8++;
    }
    while ( v10 );
    *((_DWORD *)v6 + 242) = sub_401D39(v8, v9);
    *((_DWORD *)v6 + 377) = a2;
    v15 = a2;
    v14 = 24;
    v16 = a5;
    strcpy(&v17, a3);
    v11 = strlen(a3);
    strcpy(&v18[v11], a4);
    v12 = &v18[v11 + 1 + strlen(a4)];
    if ( a2 != 1
      || *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 12404) < 20
      || *((_DWORD *)dword_563908 + 7112)
      || (v13 = *a4, *a4 == 42)
      || v13 == 63
      || v13 == 58 )
    {
      result = (*(int (__thiscall **)(char *, signed int, char *, int))(*(_DWORD *)v6 + 168))(v6, 4, &v14, v12 - &v14);
    }
    else
    {
      result = (*(int (__thiscall **)(char *, _DWORD, char *, int))(*(_DWORD *)v6 + 168))(v6, 0, &v14, v12 - &v14);
    }
  }
  if ( *a4 != 63 )
    result = sub_40146F(dword_563908, *((_DWORD *)dword_563908 + 6897) + 32, a2, a3, a4, a5);
  return result;
}
// 40146F: using guessed type int __thiscall sub_40146F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 406720: using guessed type char var_200[508];

//----- (004069C0) --------------------------------------------------------
int __thiscall sub_4069C0(void *this, __int16 a2, char a3, int a4, __int16 a5, __int16 a6, __int16 a7, __int16 a8)
{
  int (__stdcall *v8)(signed int, char *, signed int); // edx
  char v10; // [esp+0h] [ebp-10h]
  char v11; // [esp+1h] [ebp-Fh]
  int v12; // [esp+2h] [ebp-Eh]
  __int16 v13; // [esp+6h] [ebp-Ah]
  __int16 v14; // [esp+8h] [ebp-8h]
  __int16 v15; // [esp+Ah] [ebp-6h]
  __int16 v16; // [esp+Ch] [ebp-4h]
  __int16 v17; // [esp+Eh] [ebp-2h]

  v14 = a2;
  v12 = a4;
  v11 = a3;
  v16 = a6;
  v15 = a5;
  v13 = a8;
  v17 = a7;
  v8 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v10 = 33;
  return v8(4, &v10, 16);
}

//----- (00406A40) --------------------------------------------------------
int __thiscall sub_406A40(void *this, int a2)
{
  int (__stdcall *v2)(signed int, char *, signed int); // edx
  char v4; // [esp+0h] [ebp-8h]
  int v5; // [esp+1h] [ebp-7h]

  v2 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = a2;
  v4 = 18;
  return v2(4, &v4, 5);
}

//----- (00406A80) --------------------------------------------------------
int __thiscall sub_406A80(void *this, int a2, const void *a3)
{
  int (__thiscall *v3)(void *, signed int, char *, signed int); // edx
  char v5; // [esp+8h] [ebp-1C0h]
  int v6; // [esp+9h] [ebp-1BFh]
  char v7; // [esp+Dh] [ebp-1BBh]

  v3 = *(int (__thiscall **)(void *, signed int, char *, signed int))(*(_DWORD *)this + 168);
  v6 = a2;
  v5 = 19;
  qmemcpy(&v7, a3, 0x1B0u);
  return v3(this, 4, &v5, 437);
}

//----- (00406B00) --------------------------------------------------------
int __thiscall sub_406B00(void *this, const void *a2)
{
  int (__thiscall *v2)(void *, signed int, char *, signed int); // edx
  char v4; // [esp+8h] [ebp-1C0h]
  char v5; // [esp+9h] [ebp-1BFh]

  v2 = *(int (__thiscall **)(void *, signed int, char *, signed int))(*(_DWORD *)this + 168);
  v4 = 2;
  qmemcpy(&v5, a2, 0x1B0u);
  return v2(this, 4, &v4, 433);
}

//----- (00406B80) --------------------------------------------------------
int __thiscall sub_406B80(void *this, int *a2)
{
  int v2; // edx
  int (__stdcall *v3)(signed int, char *, signed int); // edx
  char v5; // [esp+0h] [ebp-Ch]
  int v6; // [esp+1h] [ebp-Bh]
  int v7; // [esp+5h] [ebp-7h]

  v2 = *a2;
  v7 = a2[1];
  v6 = v2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 25;
  return v3(4, &v5, 9);
}

//----- (00406BD0) --------------------------------------------------------
int __thiscall sub_406BD0(void *this, __int16 a2, int a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-8h]
  __int16 v6; // [esp+1h] [ebp-7h]
  int v7; // [esp+3h] [ebp-5h]

  v7 = a3;
  v6 = a2;
  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v5 = 43;
  return v3(4, &v5, 7);
}

//----- (00406C10) --------------------------------------------------------
char __thiscall sub_406C10(LPCRITICAL_SECTION **this, int a2, char *a3, size_t a4)
{
  char v4; // al

  v4 = *a3;
  if ( *a3 >= 0 && v4 <= 46 )
    this[v4 + 63] = (LPCRITICAL_SECTION *)((char *)this[v4 + 63] + 1);
  return sub_483E60(this[3], a2, (int)a3, a4);
}

//----- (00406C50) --------------------------------------------------------
char __thiscall sub_406C50(void *this, int a2, int a3)
{
  void *v3; // esi
  char *v4; // eax
  char v5; // al

  v3 = this;
  v4 = (char *)(*(int (__thiscall **)(int))(*(_DWORD *)a3 + 24))(a3);
  if ( v4 )
  {
    v5 = *v4;
    if ( v5 >= 0 && v5 <= 46 )
      ++*((_DWORD *)v3 + v5 + 63);
  }
  return sub_483F30(*((LPCRITICAL_SECTION **)v3 + 3), a2, a3);
}

//----- (00407060) --------------------------------------------------------
int __thiscall sub_407060(_DWORD *this)
{
  return this[3];
}

//----- (00407070) --------------------------------------------------------
int __fastcall sub_407070(int a1, int a2)
{
  int v2; // ecx
  int result; // eax

  v2 = *(_DWORD *)(a1 + 12);
  if ( v2 )
    result = sub_402284(v2);
  else
    result = sub_401D39(0, a2);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402284: using guessed type int __thiscall sub_402284(_DWORD);

//----- (00407090) --------------------------------------------------------
char __fastcall sub_407090(_DWORD *a1, int a2, char *Src, unsigned int a4)
{
  unsigned int v4; // ebx
  int v5; // eax
  _DWORD *v6; // esi
  bool v7; // zf
  signed int v8; // edi
  unsigned int v9; // eax
  int v10; // edx
  int v11; // ecx
  int v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // ecx
  int v16; // eax
  int v17; // ecx
  int v18; // eax
  int v19; // ecx
  int v20; // eax
  char *v21; // eax
  char *v22; // ecx
  char v23; // al
  char *i; // edx
  int v25; // eax
  void (__thiscall *v26)(_DWORD *, signed int, unsigned int *, signed int); // edx
  unsigned int v27; // eax
  char *v28; // eax
  char v29; // cl
  char v30; // cl
  unsigned int j; // edx
  const char *v32; // ebx
  const char *v33; // ecx
  _BYTE *v34; // edi
  char v35; // al
  unsigned int v36; // eax
  unsigned int v37; // ebx
  int v38; // ebx
  const char *v39; // edi
  char *v40; // eax
  char v41; // cl
  _BYTE *v42; // ebx
  int v43; // esi
  char *v44; // eax
  char v45; // cl
  int v46; // eax
  BYTE v47; // cl
  char *v48; // edi
  char v49; // al
  unsigned int v50; // eax
  char *v51; // edi
  char v52; // cl
  char *v53; // edi
  char v54; // al
  char *v55; // edi
  char v56; // al
  int v57; // eax
  char v58; // cl
  char v60; // [esp+0h] [ebp-2CD0h]
  unsigned int v61; // [esp+10h] [ebp-2CC0h]
  signed __int16 *v62; // [esp+10h] [ebp-2CC0h]
  signed __int16 *v63; // [esp+10h] [ebp-2CC0h]
  int v64; // [esp+10h] [ebp-2CC0h]
  unsigned int v65; // [esp+10h] [ebp-2CC0h]
  unsigned int v66; // [esp+14h] [ebp-2CBCh]
  unsigned int v67; // [esp+1Ch] [ebp-2CB4h]
  int v68; // [esp+20h] [ebp-2CB0h]
  int v69; // [esp+24h] [ebp-2CACh]
  int v70; // [esp+28h] [ebp-2CA8h]
  int v71; // [esp+2Ch] [ebp-2CA4h]
  int Buf1; // [esp+30h] [ebp-2CA0h]
  char v73; // [esp+1C8h] [ebp-2B08h]
  char v74; // [esp+222h] [ebp-2AAEh]
  char Dst; // [esp+616h] [ebp-26BAh]
  char v76; // [esp+7C8h] [ebp-2508h]
  char v77; // [esp+8C7h] [ebp-2409h]
  int v78; // [esp+8C8h] [ebp-2408h]
  BYTE Data[4]; // [esp+10C8h] [ebp-1C08h]
  char v80; // [esp+14C8h] [ebp-1808h]
  int v81; // [esp+14C9h] [ebp-1807h]
  char v82[2043]; // [esp+14CDh] [ebp-1803h]
  char v83[4100]; // [esp+1CC8h] [ebp-1008h]

  v4 = (unsigned int)Src;
  v5 = *Src;
  v6 = a1;
  v7 = a1[244] == 0;
  v8 = a4;
  v67 = (unsigned int)a1;
  a1[247] = v5;
  if ( !v7 )
  {
    switch ( v5 )
    {
      case 2:
        if ( a4 >= 0x6C )
        {
          v66 = a4 / 0x6C;
          v64 = (int)(Src + 1);
          v8 = a4 % 0x6C;
          do
          {
            sub_402707(v64, *(char *)(v64 + 106));
            v64 += 108;
            --v66;
          }
          while ( v66 );
        }
        break;
      case 3:
        sub_40227A(*(signed __int16 *)(Src + 1));
        break;
      case 4:
        a1[243] = 1;
        a1[246] = 1;
        break;
      case 5:
        sub_402789(Src + 6, *(_DWORD *)(Src + 2), Src[1]);
        break;
      case 6:
        sub_401ED3(*(_DWORD *)(Src + 1), Src + 5);
        break;
      case 8:
        sub_401E5B(Src, a4 / 0x23);
        break;
      case 9:
        sub_401460(Src + 1);
        break;
      case 11:
        sub_4012D5(*(signed __int16 *)(Src + 1), *(signed __int16 *)(Src + 3), Src + 7, a4 - 7);
        break;
      case 12:
        sub_4026CB(*(signed __int16 *)(Src + 1), *(_WORD *)(Src + 3), Src + 5);
        break;
      case 13:
        memset(&Dst, 0, 0x1B0u);
        qmemcpy(&v74, Src + 499, 0x3F4u);
        qmemcpy(&Buf1, Src + 1, 0x198u);
        qmemcpy(&v73, Src + 409, 0x5Au);
        sub_401447(&Buf1);
        v6 = (_DWORD *)v67;
        v8 = a4;
        break;
      case 15:
        sub_402112(
          *((signed __int16 *)Src + 2),
          *((signed __int16 *)Src + 1),
          Src[1],
          *(_DWORD *)(Src + 6),
          *((signed __int16 *)Src + 9),
          *((signed __int16 *)Src + 10),
          *((signed __int16 *)Src + 11),
          *((signed __int16 *)Src + 12),
          *((signed __int16 *)Src + 5),
          *((signed __int16 *)Src + 6),
          *((signed __int16 *)Src + 7),
          *((signed __int16 *)Src + 8));
        break;
      case 16:
        v61 = (unsigned int)(Src + 1);
        if ( Src + 1 < &Src[a4] )
        {
          do
          {
            sub_401852(v61);
            v61 += 10;
          }
          while ( v61 < (unsigned int)&Src[a4] );
        }
        break;
      case 17:
        sub_402405(*(signed __int16 *)(Src + 1), *(signed __int16 *)(Src + 3));
        break;
      case 18:
        qmemcpy(&Buf1, (const void *)(*((_DWORD *)dword_563908 + 78) + 60), 0x796u);
        qmemcpy(&Buf1, Src + 1, 0x198u);
        goto LABEL_36;
      case 19:
        qmemcpy(&Buf1, (const void *)(*((_DWORD *)dword_563908 + 78) + 60), 0x796u);
        qmemcpy(&v73, Src + 1, 0x5Au);
LABEL_36:
        sub_401447(&Buf1);
        v6 = (_DWORD *)v67;
        v8 = a4;
        break;
      case 20:
        sub_4025BD(Src[1], *(signed __int16 *)(Src + 11));
        sub_4023CE(
          *((signed __int16 *)Src + 2),
          *((signed __int16 *)Src + 3),
          *((signed __int16 *)Src + 4),
          *((signed __int16 *)Src + 1),
          Src[10],
          *(signed __int16 *)(Src + 13),
          *(signed __int16 *)(Src + 15),
          *(signed __int16 *)(Src + 17),
          *(signed __int16 *)(Src + 19));
        break;
      case 21:
        sub_40295A(Src[1]);
        break;
      case 22:
        sub_4023DD(dword_563908);
        break;
      case 24:
        sub_401FDC(Src + 6, Src[1], *(_DWORD *)(Src + 2));
        break;
      case 25:
        if ( a4 >= 4 )
        {
          v62 = (signed __int16 *)(Src + 2);
          v66 = a4 >> 2;
          v8 = a4 - 4 * (a4 >> 2);
          do
          {
            sub_401028(*v62, *((char *)v62 - 1));
            v62 += 2;
            --v66;
          }
          while ( v66 );
        }
        break;
      case 26:
        if ( a4 >= 0xB )
        {
          v63 = (signed __int16 *)(Src + 1);
          v66 = a4 / 0xB;
          v8 = a4 % 0xB;
          do
          {
            sub_4018ED(*v63, v63 + 1);
            v63 = (signed __int16 *)((char *)v63 + 11);
            --v66;
          }
          while ( v66 );
        }
        break;
      case 27:
        if ( a1[243] )
        {
          v13 = a1[3];
          v14 = sub_401AF5(*((unsigned __int16 *)Src + 3));
          v15 = *((signed __int16 *)Src + 1);
          v16 = v14 / 10;
          v66 = -1;
          if ( v15 < 0 )
          {
            v66 = -v15;
            v15 = 0;
          }
          sub_401F87(
            *((signed __int16 *)Src + 5),
            *((signed __int16 *)Src + 2),
            v16,
            (unsigned __int8)Src[1],
            v15,
            v66,
            0,
            Src + 12,
            a4 - 12,
            *(_DWORD *)(Src + 6));
        }
        break;
      case 28:
        sub_401B90(Src[1], *(_DWORD *)(Src + 2), *(_DWORD *)(Src + 6));
        break;
      case 30:
        sub_401442(Src[1], Src + 2, (a4 - 2) >> 1);
        break;
      case 31:
        sub_402289(Src + 1);
        break;
      case 33:
        sub_4011D6(*(signed __int16 *)(Src + 1), *(signed __int16 *)(Src + 3));
        break;
      case 34:
        sub_401F37(*(signed __int16 *)(Src + 1));
        break;
      case 35:
        v21 = &Src[strlen(Src + 3) + 4];
        v7 = Src[1] == 6;
        v22 = v21;
        v76 = 0;
        if ( v7 )
        {
          v23 = *v21;
          for ( i = &v76; *v22 != 58; ++i )
          {
            if ( !v23 )
              break;
            ++v22;
            *i = v23;
            v23 = *v22;
          }
          *i = 0;
          if ( *v22 )
            ++v22;
        }
        sub_40146F(dword_563908, Src + 3, Src[1], &v76, v22, Src[2]);
        break;
      case 36:
        sub_401D4D(*(signed __int16 *)(Src + 1));
        break;
      case 37:
        if ( (signed int)a4 > 0 )
        {
          do
          {
            sub_4012AD(
              dword_563908,
              *(signed __int16 *)(v4 + 1),
              *(signed __int16 *)(v4 + 3),
              *(signed __int16 *)(v4 + 5),
              v4 + 8,
              *(unsigned __int8 *)(v4 + 7));
            v25 = *(unsigned __int8 *)(v4 + 7) + 8;
            v8 -= v25;
            v4 += v25;
          }
          while ( v8 > 0 );
        }
        break;
      case 40:
        if ( a1[243] )
        {
          v17 = a1[3];
          v18 = sub_401AF5(*((unsigned __int16 *)Src + 4));
          v19 = *((signed __int16 *)Src + 2);
          v20 = v18 / 10;
          v66 = -1;
          if ( v19 < 0 )
          {
            v66 = -v19;
            v19 = 0;
          }
          sub_401F87(
            *((signed __int16 *)Src + 6),
            *((signed __int16 *)Src + 3),
            v20,
            (unsigned __int8)Src[1],
            v19,
            v66,
            *((signed __int16 *)Src + 1),
            Src + 14,
            a4 - 14,
            *((_DWORD *)Src + 2));
        }
        break;
      case 41:
        sub_402838(
          *((signed __int16 *)Src + 1),
          *((signed __int16 *)Src + 2),
          *((signed __int16 *)Src + 3),
          (unsigned __int8)Src[1],
          Src[12],
          *((signed __int16 *)Src + 5),
          *((signed __int16 *)Src + 4));
        break;
      case 42:
        sub_4025BD(Src[1], *((signed __int16 *)Src + 1));
        break;
      case 43:
        v66 = (unsigned int)(Src + 4);
        v9 = (unsigned int)&Src[strlen(Src + 3) + 4];
        sub_401528(*(signed __int16 *)(Src + 1), Src + 3, v9, a4 - (v9 - (_DWORD)Src));
        break;
      case 44:
        sub_4025BD(Src[1], *((signed __int16 *)Src + 6));
        v10 = *((signed __int16 *)Src + 2);
        v11 = *((signed __int16 *)Src + 3);
        v70 = *((signed __int16 *)Src + 4);
        v12 = *((signed __int16 *)Src + 1);
        v69 = v11;
        v68 = v10;
        v71 = *((signed __int16 *)Src + 5);
        sub_401721(&v68, v12);
        break;
      case 45:
        sub_40184D(Src[1], Src + 2, Src + 130, a4 - 130);
        break;
      case 46:
        sub_401FD7(*(signed __int16 *)(Src + 1), *(signed __int16 *)(Src + 3));
        break;
      case 47:
        sub_401BEA(Src + 1, Src + 129, Src + 257);
        break;
      case 48:
        sub_402540(Src + 1, a4 - 1);
        break;
      case 49:
        sub_401CA8(*(_DWORD *)(Src + 1), *(_DWORD *)(Src + 5));
        break;
      case 50:
        sub_402496(*(_DWORD *)(Src + 1), Src + 5);
        break;
      case 51:
        sub_4012C1(*(signed __int16 *)(Src + 1));
        break;
      case 52:
        sub_401230(Src + 1, Src + 3);
        break;
      case 53:
        sub_4028A1(Src + 1, Src + 3, Src + 5, *(_DWORD *)(Src + 9));
        break;
      case 54:
        sub_401906((int)(Src + 1), (int)(Src + 129), (int)(Src + 161), a4 - 161);
        break;
      case 55:
        sub_4015C8(Src, a4 / 0x43);
        break;
      case 56:
        sub_40296E("Got a cSCPacketRequestMovementPacketCount\n", v60);
        v26 = *(void (__thiscall **)(_DWORD *, signed int, unsigned int *, signed int))(*v6 + 168);
        *(unsigned int *)((char *)&v66 + 1) = v6[32];
        LOBYTE(v66) = 44;
        v26(v6, 4, &v66, 5);
        break;
      default:
        break;
    }
  }
  v27 = v6[247];
  switch ( v27 )
  {
    case 1u:
      v6[248] = *(char *)(v4 + 1);
      v40 = (char *)(v4 + 4);
      do
      {
        v41 = *v40;
        *((_BYTE *)v6 + (_DWORD)v40 - v4 + 14328) = *v40;
        ++v40;
      }
      while ( v41 );
      v42 = (_BYTE *)(v4 + 28);
      v43 = (char *)(v6 + 249) - v42;
      do
      {
        LOBYTE(v27) = *v42;
        v42[v43] = *v42;
        ++v42;
      }
      while ( (_BYTE)v27 );
      break;
    case 7u:
      v28 = (char *)(v4 + 2);
      do
      {
        v29 = *v28;
        *((_BYTE *)v6 + (_DWORD)v28 - v4 + 446) = *v28;
        ++v28;
      }
      while ( v29 );
      v27 = v4 + 68;
      do
      {
        v30 = *(_BYTE *)v27;
        *((_BYTE *)v6 + v27 - v4 + 636) = *(_BYTE *)v27;
        ++v27;
      }
      while ( v30 );
      v6[240] = *(signed __int16 *)(v4 + 66);
      v6[241] = *(char *)(v4 + 1);
      break;
    case 0x17u:
      v44 = (char *)(v4 + 5);
      do
      {
        v45 = *v44;
        v83[(_DWORD)v44 - 5 - v4] = *v44;
        ++v44;
      }
      while ( v45 );
      LOBYTE(v78) = 0;
      sub_48CA10((int)&Buf1, v83);
      while ( strlen((const char *)&Buf1) >= 5 )
      {
        if ( sub_4944A0(&Buf1, Data, 0x400u) )
        {
          if ( !Data[0] )
            strcpy((char *)Data, "---");
          if ( (_BYTE)v78 )
          {
            v48 = &v77;
            do
              v49 = (v48++)[1];
            while ( v49 );
            *(_WORD *)v48 = 58;
            v50 = strlen((const char *)Data) + 1;
            v51 = &v77;
            do
              v52 = (v51++)[1];
            while ( v52 );
            qmemcpy(v51, Data, v50);
          }
          else
          {
            v46 = 0;
            do
            {
              v47 = Data[v46];
              *((_BYTE *)&v78 + v46++) = v47;
            }
            while ( v47 );
          }
        }
        else if ( (_BYTE)v78 )
        {
          v53 = &v77;
          do
            v54 = (v53++)[1];
          while ( v54 );
          *(_WORD *)v53 = 58;
          v55 = &v77;
          do
            v56 = (v55++)[1];
          while ( v56 );
          *(_DWORD *)v55 = 2763306;
        }
        else
        {
          v78 = 2763306;
        }
        sub_48CA10((int)&Buf1, v83);
      }
      v81 = *(_DWORD *)(v4 + 1);
      v80 = 22;
      v57 = 0;
      do
      {
        v58 = *((_BYTE *)&v78 + v57);
        v82[v57++] = v58;
      }
      while ( v58 );
      LOBYTE(v27) = (*(int (__stdcall **)(signed int, char *, unsigned int))(*(_DWORD *)v67 + 168))(
                      4,
                      &v80,
                      strlen((const char *)&v78) + 6);
      break;
    case 0x1Du:
      v6[244] = 1;
      break;
    case 0x20u:
      if ( v8 > 1 )
      {
        v27 = v4;
        v67 = v4 + v8;
        while ( v27 < v67 )
        {
          v66 = v27;
          v27 += 33;
          v38 = 0;
          v65 = v27;
          if ( v6[3582] > 0 )
          {
            v39 = (const char *)(v6 + 510);
            while ( _stricmp((const char *)(v66 + 1), v39) )
            {
              ++v38;
              v39 += 48;
              if ( v38 >= v6[3582] )
                goto LABEL_96;
            }
            v6[12 * v38 + 521] = *(_DWORD *)(v66 + 29);
LABEL_96:
            v27 = v65;
          }
        }
      }
      break;
    case 0x26u:
      LOBYTE(v27) = sub_402725(
                      (char *)(v4 + 10),
                      *(char *)(v4 + 1),
                      *(_DWORD *)(v4 + 6),
                      *(_DWORD *)(v4 + 2),
                      v4 + 74,
                      v8 - 74);
      break;
    case 0x27u:
      v6[3582] = 0;
      if ( v8 > 1 )
      {
        for ( j = v8 + v4; v4 < j; ++v6[3582] )
        {
          v32 = (const char *)(v4 + 1);
          v33 = v32;
          v34 = &v6[12 * v6[3582] + 510];
          do
          {
            v35 = *v33;
            *v34++ = *v33++;
          }
          while ( v35 );
          v36 = (unsigned int)&v32[strlen(v32) + 1];
          v37 = v36;
          v6[12 * v6[3582] + 518] = *(_DWORD *)v36;
          v6[12 * v6[3582] + 519] = *(char *)(v36 + 4);
          v6[12 * v6[3582] + 520] = 0;
          v27 = 48 * v6[3582];
          v4 = v37 + 5;
          *(_DWORD *)((char *)v6 + v27 + 2084) = 0;
        }
      }
      break;
    default:
      return v27;
  }
  return v27;
}
// 401028: using guessed type _DWORD __stdcall sub_401028(_DWORD, _DWORD);
// 4011D6: using guessed type _DWORD __stdcall sub_4011D6(_DWORD, _DWORD);
// 401230: using guessed type _DWORD __stdcall sub_401230(_DWORD, _DWORD);
// 4012AD: using guessed type int __thiscall sub_4012AD(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4012C1: using guessed type _DWORD __stdcall sub_4012C1(_DWORD);
// 4012D5: using guessed type _DWORD __stdcall sub_4012D5(_DWORD, _DWORD, _DWORD, _DWORD);
// 401442: using guessed type _DWORD __stdcall sub_401442(_DWORD, _DWORD, _DWORD);
// 401447: using guessed type _DWORD __stdcall sub_401447(_DWORD);
// 401460: using guessed type _DWORD __stdcall sub_401460(_DWORD);
// 40146F: using guessed type int __thiscall sub_40146F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401528: using guessed type _DWORD __stdcall sub_401528(_DWORD, _DWORD, _DWORD, _DWORD);
// 401721: using guessed type _DWORD __stdcall sub_401721(_DWORD, _DWORD);
// 40184D: using guessed type _DWORD __stdcall sub_40184D(_DWORD, _DWORD, _DWORD, _DWORD);
// 401852: using guessed type _DWORD __cdecl sub_401852(_DWORD);
// 4018ED: using guessed type _DWORD __stdcall sub_4018ED(_DWORD, _DWORD);
// 401AF5: using guessed type _DWORD __stdcall sub_401AF5(_DWORD);
// 401B90: using guessed type _DWORD __stdcall sub_401B90(_DWORD, _DWORD, _DWORD);
// 401BEA: using guessed type _DWORD __stdcall sub_401BEA(_DWORD, _DWORD, _DWORD);
// 401CA8: using guessed type _DWORD __stdcall sub_401CA8(_DWORD, _DWORD);
// 401D4D: using guessed type _DWORD __stdcall sub_401D4D(_DWORD);
// 401ED3: using guessed type _DWORD __stdcall sub_401ED3(_DWORD, _DWORD);
// 401F37: using guessed type _DWORD __stdcall sub_401F37(_DWORD);
// 401F87: using guessed type _DWORD __stdcall sub_401F87(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401FD7: using guessed type _DWORD __stdcall sub_401FD7(_DWORD, _DWORD);
// 401FDC: using guessed type _DWORD __stdcall sub_401FDC(_DWORD, _DWORD, _DWORD);
// 402112: using guessed type _DWORD __stdcall sub_402112(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40227A: using guessed type _DWORD __stdcall sub_40227A(_DWORD);
// 402289: using guessed type _DWORD __stdcall sub_402289(_DWORD);
// 4023CE: using guessed type _DWORD __stdcall sub_4023CE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4023DD: using guessed type int __thiscall sub_4023DD(_DWORD);
// 402405: using guessed type _DWORD __cdecl sub_402405(_DWORD, _DWORD);
// 402496: using guessed type _DWORD __stdcall sub_402496(_DWORD, _DWORD);
// 402540: using guessed type _DWORD __stdcall sub_402540(_DWORD, _DWORD);
// 4025BD: using guessed type _DWORD __stdcall sub_4025BD(char, _DWORD);
// 4026CB: using guessed type _DWORD __stdcall sub_4026CB(_DWORD, __int16, _DWORD);
// 402707: using guessed type _DWORD __stdcall sub_402707(_DWORD, _DWORD);
// 402789: using guessed type _DWORD __stdcall sub_402789(_DWORD, _DWORD, _DWORD);
// 402838: using guessed type _DWORD __stdcall sub_402838(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4028A1: using guessed type _DWORD __stdcall sub_4028A1(_DWORD, _DWORD, _DWORD, _DWORD);
// 40295A: using guessed type _DWORD __stdcall sub_40295A(_DWORD);
// 407090: using guessed type char var_1008[4100];
// 407090: using guessed type char var_1803[2043];

//----- (004082D0) --------------------------------------------------------
FILE *__thiscall sub_4082D0(void *this, char *Filename, int a3, int a4)
{
  FILE *result; // eax
  FILE *v5; // edi
  _DWORD *v6; // ebx
  int v7; // eax
  int v8; // ebp
  _DWORD *v9; // eax
  char *v10; // esi
  void *v11; // [esp+14h] [ebp-10h]

  v11 = this;
  result = fopen(Filename, "rb");
  v5 = result;
  v6 = 0;
  if ( result )
  {
    v7 = _fileno(result);
    v8 = _filelength(v7);
    v9 = operator new(0x1Cu);
    if ( v9 )
      v6 = sub_48A780(v9, 0, v8 + 289);
    v10 = (char *)(*(int (__thiscall **)(_DWORD *))(*v6 + 24))(v6);
    fread(v10 + 289, v8, 1u, v5);
    fclose(v5);
    *v10 = 35;
    strcpy(v10 + 257, (const char *)a4);
    strcpy(v10 + 129, (const char *)a3);
    (*(void (__stdcall **)(signed int, _DWORD *))(*(_DWORD *)v11 + 164))(6, v6);
    result = (FILE *)(*(int (**)(void))(*v6 + 4))();
  }
  return result;
}

//----- (00408450) --------------------------------------------------------
_DWORD *__thiscall sub_408450(_DWORD *this, const char *a2, char *a3)
{
  char *v3; // eax
  _DWORD *v4; // esi
  int v5; // edx
  char v6; // cl

  v3 = a3;
  v4 = this;
  *this = &LocalAgent::`vftable';
  v5 = (char *)(this + 65) - a3;
  dword_56391C = (int)this;
  do
  {
    v6 = *v3;
    v3[v5] = *v3;
    ++v3;
  }
  while ( v6 );
  memset((char *)v4 + 2458, 0, 0x6Au);
  memset(v4 + 129, 0, 0x796u);
  strcpy((char *)v4 + 2490, a2);
  v4[129] = 1000000;
  *(_DWORD *)((char *)v4 + 1018) = 1000000;
  *(_DWORD *)((char *)v4 + 1014) = 1000000;
  *((_WORD *)v4 + 1278) = 0;
  *((_WORD *)v4 + 1277) = 0;
  *((_WORD *)v4 + 1279) = 0;
  *((_WORD *)v4 + 261) = 0;
  return v4;
}
// 510E74: using guessed type void *LocalAgent::`vftable';
// 56391C: using guessed type int dword_56391C;

//----- (00408520) --------------------------------------------------------
void *__thiscall sub_408520(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Agent::`vftable';
  dword_56391C = 0;
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 510C74: using guessed type void *Agent::`vftable';
// 56391C: using guessed type int dword_56391C;

//----- (00408560) --------------------------------------------------------
int __thiscall sub_408560(char *this, int a2)
{
  char *v2; // ebp
  int v3; // eax
  const char *v4; // ebx
  int v5; // edi
  char *v6; // eax
  int v7; // esi
  int v8; // edi

  v2 = this;
  v3 = sub_48E510(*((_DWORD **)dword_563908 + 1512), a2);
  if ( *(_DWORD *)(v3 + 196) == -1 )
  {
    v4 = (const char *)(v3 + 64);
    if ( v3 != -64 )
    {
      do
      {
        if ( !*v4 )
          break;
        v5 = j__atol(v4);
        v6 = strchr(v4, 38);
        v4 = v6;
        if ( v6 )
          v4 = v6 + 1;
        if ( v5 >= 0 )
        {
          sub_401B63(v5);
        }
        else
        {
          v7 = v5 / 1000;
          if ( -v5 % 1000 > 0 )
          {
            v8 = -v5 % 1000;
            do
            {
              sub_401B63(v7);
              --v8;
            }
            while ( v8 );
          }
        }
      }
      while ( v4 );
    }
  }
  else
  {
    sub_401B63(a2);
  }
  sub_401447(v2 + 516);
  return sub_40295A(1);
}
// 401447: using guessed type _DWORD __stdcall sub_401447(_DWORD);
// 401B63: using guessed type _DWORD __stdcall sub_401B63(_DWORD);
// 40295A: using guessed type _DWORD __stdcall sub_40295A(_DWORD);

//----- (00408670) --------------------------------------------------------
_DWORD *__thiscall sub_408670(_DWORD *this, const char *a2, int a3, int a4)
{
  _DWORD *v4; // esi
  char *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  int v9; // edi
  int *v10; // eax
  int v11; // edx
  int v12; // ecx
  int v13; // eax
  int v14; // edi
  LPCRITICAL_SECTION *v15; // ebp
  int v16; // edi
  int v17; // edi
  LPCRITICAL_SECTION *v18; // ebp
  int v19; // edi
  int v20; // ecx
  int v21; // edi
  int v22; // edx
  signed int v24; // [esp+14h] [ebp-290h]
  int v25; // [esp+14h] [ebp-290h]
  LARGE_INTEGER PerformanceCount; // [esp+18h] [ebp-28Ch]
  _DWORD *v27; // [esp+20h] [ebp-284h]
  char v28; // [esp+24h] [ebp-280h]
  int v29; // [esp+28h] [ebp-27Ch]
  int v30; // [esp+2Ch] [ebp-278h]
  int v31; // [esp+34h] [ebp-270h]
  int v32; // [esp+38h] [ebp-26Ch]
  int v33; // [esp+3Ch] [ebp-268h]
  int v34; // [esp+40h] [ebp-264h]
  int v35; // [esp+5Ch] [ebp-248h]
  int v36; // [esp+60h] [ebp-244h]
  int v37; // [esp+64h] [ebp-240h]
  int v38; // [esp+68h] [ebp-23Ch]
  char v39; // [esp+6Ch] [ebp-238h]
  int v40; // [esp+70h] [ebp-234h]
  int v41; // [esp+B4h] [ebp-1F0h]
  int v42; // [esp+B8h] [ebp-1ECh]
  int v43; // [esp+BCh] [ebp-1E8h]
  int v44; // [esp+C4h] [ebp-1E0h]
  int v45; // [esp+C8h] [ebp-1DCh]
  char v46; // [esp+E0h] [ebp-1C4h]
  int v47; // [esp+E4h] [ebp-1C0h]
  int v48; // [esp+E8h] [ebp-1BCh]
  int v49; // [esp+ECh] [ebp-1B8h]
  int v50; // [esp+F4h] [ebp-1B0h]
  int v51; // [esp+F8h] [ebp-1ACh]
  char v52; // [esp+110h] [ebp-194h]
  int v53; // [esp+114h] [ebp-190h]
  int v54; // [esp+118h] [ebp-18Ch]
  int v55; // [esp+11Ch] [ebp-188h]
  int v56; // [esp+124h] [ebp-180h]
  int v57; // [esp+128h] [ebp-17Ch]
  char v58; // [esp+140h] [ebp-164h]
  int v59; // [esp+174h] [ebp-130h]
  int v60; // [esp+188h] [ebp-11Ch]
  int v61; // [esp+18Ch] [ebp-118h]
  int v62; // [esp+190h] [ebp-114h]
  char Str; // [esp+194h] [ebp-110h]
  int v64; // [esp+2A0h] [ebp-4h]

  v4 = this;
  v27 = this;
  this[1] = &off_510D88;
  *this = &off_510FAC;
  this[1] = &ServerAgent::`vftable';
  dword_56391C = (int)this;
  v64 = 0;
  this[248] = 4;
  *((_BYTE *)this + 996) = 0;
  this[243] = 0;
  this[3582] = 0;
  *((_BYTE *)this + 14332) = 0;
  this[3647] = 0;
  this[3648] = 0;
  this[110] = 0;
  this[111] = 0;
  memset(this + 3649, 0, 0x200u);
  memset(v4 + 3777, 0, 0x200u);
  v4[508] = a3;
  v4[509] = a4;
  v4[244] = 0;
  v4[246] = 0;
  *((_BYTE *)v4 + 448) = 0;
  *((_BYTE *)v4 + 704) = 0;
  v4[240] = 0;
  v4[241] = 0;
  strcpy(&Str, a2);
  v24 = 2002;
  v5 = strrchr(&Str, 44);
  if ( v5 )
  {
    *v5 = 0;
    v24 = j__atol(v5 + 1);
  }
  sub_40118B(0);
  v39 = 0;
  v40 = 45000;
  v60 = 0;
  v61 = 0;
  v62 = 0;
  v38 = 10;
  v32 = 0x10000;
  v34 = 1100;
  v29 = 3;
  v36 = 300;
  v35 = 30;
  v37 = 496;
  v31 = 0x8000;
  v33 = 1000;
  v30 = 0;
  v59 = 1;
  v43 = 50;
  v41 = 10000;
  v42 = 50;
  v46 = 0;
  v45 = 0;
  v44 = 0;
  v49 = 50;
  v47 = 5000;
  v48 = 50;
  v52 = 0;
  v51 = 0;
  v50 = 0;
  v55 = 50;
  v53 = 10000;
  v54 = 50;
  v58 = 0;
  v57 = 0;
  v56 = 0;
  v6 = operator new(0x3C0u);
  PerformanceCount.s.LowPart = (DWORD)v6;
  LOBYTE(v64) = 1;
  if ( v6 )
    v7 = sub_487400(v6, (int)&v28);
  else
    v7 = 0;
  LOBYTE(v64) = 0;
  v4[2] = v7;
  v8 = operator new(4u);
  if ( v8 )
  {
    *v8 = &off_510F40;
    PerformanceCount.s.LowPart = (DWORD)v8;
  }
  else
  {
    PerformanceCount.s.LowPart = 0;
  }
  v9 = v4[2];
  v4[4] = PerformanceCount.s.LowPart;
  sub_4808E0((LPCRITICAL_SECTION *)(v9 + 616));
  *(_DWORD *)(v9 + 16) = PerformanceCount.s.LowPart;
  sub_4808F0((LPCRITICAL_SECTION *)(v9 + 616));
  v10 = sub_487B20((LPCRITICAL_SECTION *)v4[2], &Str, v24, 0);
  v4[3] = v10;
  if ( v10 )
  {
    v25 = sub_401D39(v12, v11);
    while ( 1 )
    {
      if ( Frequency.QuadPart )
      {
        QueryPerformanceCounter(&PerformanceCount);
        v13 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
      }
      else
      {
        v13 = GetTickCount() / 0xA;
      }
      if ( abs(v13 - v25) >= 1500 )
        break;
      if ( GetAsyncKeyState(27) < 0 )
        break;
      v14 = v4[3];
      v15 = (LPCRITICAL_SECTION *)(v14 + 548);
      sub_4808E0((LPCRITICAL_SECTION *)(v14 + 548));
      v16 = *(_DWORD *)(v14 + 132);
      sub_4808F0(v15);
      if ( v16 == 1 )
        break;
      sub_488ED0((void (***)(void))v4[2], 500, 1);
      Sleep(0xAu);
    }
    v17 = v4[3];
    v18 = (LPCRITICAL_SECTION *)(v17 + 548);
    sub_4808E0((LPCRITICAL_SECTION *)(v17 + 548));
    v19 = *(_DWORD *)(v17 + 132);
    sub_4808F0(v18);
    if ( v19 == 1 )
    {
      v21 = v4[3];
      sub_4808E0((LPCRITICAL_SECTION *)(v21 + 552));
      *(_DWORD *)(v21 + 508) = v4 + 1;
      sub_4808F0((LPCRITICAL_SECTION *)(v21 + 552));
    }
    else
    {
      v20 = v4[3];
      sub_4013FC(0);
      (*(void (**)(void))(*(_DWORD *)v4[3] + 4))();
      v4[3] = 0;
    }
  }
  else
  {
    MessageBoxA(*((HWND *)dword_563918 + 3), "Could not resolve address to IP", "Error", 0);
  }
  v4[506] = sub_401D48();
  v4[507] = v22;
  memset(v4 + 5, 0, 0xE8u);
  memset(v4 + 63, 0, 0xB8u);
  return v4;
}
// 40118B: using guessed type _DWORD __stdcall sub_40118B(_DWORD);
// 4013FC: using guessed type _DWORD __stdcall sub_4013FC(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401D48: using guessed type int sub_401D48(void);
// 510D88: using guessed type void (__noreturn *off_510D88)();
// 510F40: using guessed type int (__stdcall *off_510F40)(int);
// 510F8C: using guessed type void *ServerAgent::`vftable';
// 510FAC: using guessed type int (__thiscall *off_510FAC)(void *Memory, char);
// 56391C: using guessed type int dword_56391C;

//----- (00408C30) --------------------------------------------------------
void __thiscall sub_408C30(LPCRITICAL_SECTION **this)
{
  LPCRITICAL_SECTION **v1; // esi
  bool v2; // zf
  int v3; // edx
  int v4; // ecx
  int v5; // ebp
  int v6; // eax
  LPCRITICAL_SECTION *v7; // ecx
  LPCRITICAL_SECTION *v8; // ecx
  char v9[5]; // [esp+17h] [ebp-49h]
  LARGE_INTEGER PerformanceCount; // [esp+1Ch] [ebp-44h]
  int Dst; // [esp+24h] [ebp-3Ch]
  int v12; // [esp+5Ch] [ebp-4h]

  v1 = this;
  *(_DWORD *)&v9[1] = this;
  *this = (LPCRITICAL_SECTION *)&off_510FAC;
  this[1] = (LPCRITICAL_SECTION *)&ServerAgent::`vftable';
  v2 = this[3] == 0;
  v12 = 0;
  if ( !v2 )
  {
    v9[0] = 3;
    this[66] = (LPCRITICAL_SECTION *)((char *)this[66] + 1);
    sub_483E60(this[3], 4, (int)v9, 1u);
    sub_4829F0(v1[3], 4, &Dst);
    v5 = sub_401D39(v4, v3);
    while ( Dst > 0 )
    {
      if ( Frequency.QuadPart )
      {
        QueryPerformanceCounter(&PerformanceCount);
        v6 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
      }
      else
      {
        v6 = GetTickCount() / 0xA;
      }
      if ( abs(v6 - v5) >= 150 )
        break;
      sub_488ED0((void (***)(void))v1[2], 500, 1);
      sub_4829F0(v1[3], 4, &Dst);
    }
    v7 = v1[3];
    sub_4013FC(0);
    ((void (*)(void))(*v1[3])->LockCount)();
    v1[3] = 0;
  }
  v8 = v1[2];
  if ( v8 )
  {
    ((void (*)(void))(*v8)->LockCount)();
    v1[2] = 0;
  }
  if ( v1[4] )
  {
    j__free(v1[4]);
    v1[4] = 0;
  }
  *v1 = (LPCRITICAL_SECTION *)&Agent::`vftable';
  dword_56391C = 0;
}
// 4013FC: using guessed type _DWORD __stdcall sub_4013FC(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 510C74: using guessed type void *Agent::`vftable';
// 510F8C: using guessed type void *ServerAgent::`vftable';
// 510FAC: using guessed type int (__thiscall *off_510FAC)(void *Memory, char);
// 56391C: using guessed type int dword_56391C;

//----- (00408E10) --------------------------------------------------------
const char *__fastcall sub_408E10(int a1, int a2, const char *a3, __int16 a4, __int16 a5)
{
  const char *result; // eax
  int v6; // esi
  unsigned int v7; // edx
  int v8; // edi
  unsigned int v9; // ebp
  __int64 v10; // rax
  signed __int64 v11; // rax
  void (__thiscall *v12)(int, signed int, char *, signed int); // edx
  int Dst; // [esp+Ch] [ebp-54h]
  char v14; // [esp+3Ch] [ebp-24h]
  char v15; // [esp+3Dh] [ebp-23h]
  int v16; // [esp+3Eh] [ebp-22h]
  int v17; // [esp+42h] [ebp-1Eh]
  __int16 v18; // [esp+46h] [ebp-1Ah]
  __int16 v19; // [esp+48h] [ebp-18h]
  char Dest; // [esp+4Ah] [ebp-16h]
  char v21; // [esp+59h] [ebp-7h]

  result = a3;
  v6 = a1;
  if ( *(_DWORD *)(a1 + 12) )
  {
    v8 = sub_40167C(*(_DWORD *)(a1 + 8), a2);
    v9 = v7;
    do
    {
      LODWORD(v10) = sub_40167C(*(_DWORD *)(v6 + 8), v7);
      v11 = v10 - __PAIR__(v9, v8);
      if ( v11 > 0x7FFFFFFF )
        break;
      if ( (signed int)v11 >= 5000 )
        break;
      sub_488ED0(*(void (****)(void))(v6 + 8), 500, 1);
      sub_4829F0(*(LPCRITICAL_SECTION **)(v6 + 12), 4, &Dst);
    }
    while ( Dst );
    sub_401F6E((LPCSTR)(v6 + 14332));
    v14 = 37;
    v15 = *((_BYTE *)dword_563918 + 9048);
    v16 = sub_4020FE(0);
    v17 = sub_4949C0(
            0,
            (_BYTE *)dword_563908 + 27892,
            *((char **)dword_563908 + 1507),
            *((_DWORD ***)dword_563908 + 1511),
            *((_DWORD ***)dword_563908 + 1531),
            *((_DWORD ***)dword_563908 + 1512));
    v19 = a5;
    v18 = a4;
    if ( a3 )
    {
      strncpy(&Dest, a3, 0x10u);
      v21 = 0;
    }
    else
    {
      Dest = 0;
    }
    v12 = *(void (__thiscall **)(int, signed int, char *, signed int))(*(_DWORD *)v6 + 168);
    *(_DWORD *)(v6 + 972) = 0;
    *(_DWORD *)(v6 + 976) = 0;
    v12(v6, 4, &v14, 30);
    result = (const char *)sub_401249(4, 24000);
    if ( !result )
      *(_DWORD *)(v6 + 992) = 4;
  }
  return result;
}
// 401249: using guessed type _DWORD __stdcall sub_401249(_DWORD, _DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);
// 401F6E: using guessed type _DWORD __stdcall sub_401F6E(LPCSTR lpFileName);
// 4020FE: using guessed type _DWORD __cdecl sub_4020FE(_DWORD);

//----- (00408FE0) --------------------------------------------------------
int __thiscall sub_408FE0(int *this, int a2, char *a3, char *Source, int a5, int a6)
{
  int result; // eax
  int *v7; // esi
  int v8; // edx
  int v9; // ecx
  int v10; // eax
  int v11; // edx
  int v12; // eax
  void (__thiscall *v13)(int *, signed int, char *, signed int); // edx
  char Dst; // [esp+14h] [ebp-1004h]
  bool v15; // [esp+15h] [ebp-1003h]
  __int16 v16; // [esp+16h] [ebp-1002h]
  int v17; // [esp+18h] [ebp-1000h]
  char Dest; // [esp+1Ch] [ebp-FFCh]
  char v19; // [esp+3Bh] [ebp-FDDh]
  char v20; // [esp+3Ch] [ebp-FDCh]
  char v21; // [esp+5Bh] [ebp-FBDh]
  char v22; // [esp+5Ch] [ebp-FBCh]
  char v23; // [esp+9Bh] [ebp-F7Dh]
  int v24; // [esp+9Ch] [ebp-F7Ch]
  int v25; // [esp+A0h] [ebp-F78h]
  int v26; // [esp+A4h] [ebp-F74h]
  int v27; // [esp+A8h] [ebp-F70h]
  int v28; // [esp+ACh] [ebp-F6Ch]

  result = a5;
  v7 = this;
  if ( this[3] )
  {
    memset(&Dst, 0, 0xA6u);
    Dst = 1;
    strncpy(&Dest, Source, 0x20u);
    v19 = 0;
    strncpy(&v22, a3, 0x40u);
    v23 = 0;
    strncpy(&v20, (const char *)a5, 0x20u);
    v8 = v7[508];
    v24 = a2;
    v9 = v7[506];
    v15 = a6 != 0;
    v10 = v7[509];
    v27 = v9;
    v25 = v8;
    v11 = v7[507];
    v26 = v10;
    v12 = *v7;
    v28 = v11;
    v13 = *(void (__thiscall **)(int *, signed int, char *, signed int))(v12 + 168);
    v21 = 0;
    v17 = 0;
    v16 = 155;
    v13(v7, 4, &Dst, 166);
    result = sub_401249(1, 6000);
  }
  return result;
}
// 401249: using guessed type _DWORD __stdcall sub_401249(_DWORD, _DWORD);

//----- (00409160) --------------------------------------------------------
int __thiscall sub_409160(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // edi
  int result; // eax
  LPCRITICAL_SECTION *v5; // ebp
  int v6; // edi
  int v7; // edx
  int v8; // ebp
  int v9; // eax
  void *v10; // edi
  int v11; // ST08_4
  LPCRITICAL_SECTION *v12; // ecx
  int v13; // edi
  unsigned int v14; // edx
  unsigned int v15; // ebp
  int v16; // eax
  void (__thiscall *v17)(_DWORD *, signed int, char *, signed int); // edx
  char v18; // [esp+Ch] [ebp-8h]
  int v19; // [esp+Dh] [ebp-7h]

  v2 = this;
  v3 = this[3];
  if ( !v3 )
    return 0;
  v5 = (LPCRITICAL_SECTION *)(v3 + 548);
  sub_4808E0((LPCRITICAL_SECTION *)(v3 + 548));
  v6 = *(_DWORD *)(v3 + 132);
  sub_4808F0(v5);
  result = 0;
  if ( v6 == 1 )
  {
    v8 = a2;
    LOBYTE(result) = a2 == -1;
    v2[247] = 0;
    v2[245] = result;
    while ( v8 == -1 || v8 > 0 )
    {
      if ( !v2[3648] )
      {
        if ( !sub_488ED0((void (***)(void))v2[2], 500, 1) )
          break;
        if ( !v2[3648] )
          continue;
      }
      if ( v8 > 0 )
        --v8;
      v9 = v2[3647] % 128;
      v10 = (void *)v2[v9 + 3649];
      v11 = v2[v9 + 3777];
      v2[v9 + 3649] = 0;
      v2[v9 + 3777] = 0;
      ++v2[3647];
      --v2[3648];
      sub_401A5A(v10, v11);
      free(v10);
    }
    if ( v2[246] )
    {
      v12 = (LPCRITICAL_SECTION *)v2[3];
      v2[246] = 0;
      sub_482110(v12);
    }
    if ( v2[243] )
    {
      v13 = sub_40167C(v2[2], v7);
      v15 = v14;
      v16 = sub_40137A(v2[3]) / 10;
      if ( ((signed __int64)(__PAIR__(v15, v13) - *((_QWORD *)v2 + 55)) > 0x7FFFFFFF || v13 - v2[110] > 1000)
        && (unsigned int)(v16 - 201) <= 0x4D56 )
      {
        v17 = *(void (__thiscall **)(_DWORD *, signed int, char *, signed int))(*v2 + 168);
        v19 = v16;
        v2[110] = v13;
        v2[111] = v15;
        v18 = 21;
        v17(v2, 4, &v18, 5);
      }
    }
    result = v2[247];
  }
  else
  {
    *((_BYTE *)v2 + 996) = 0;
    v2[248] = 4;
  }
  return result;
}
// 40137A: using guessed type int __thiscall sub_40137A(_DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);

//----- (00409380) --------------------------------------------------------
void *__thiscall sub_409380(_DWORD *this, void *Src, size_t Size)
{
  char v3; // al
  _DWORD *v4; // esi
  void *result; // eax
  int v6; // ecx
  int v7; // edi
  void *v8; // eax

  v3 = *(_BYTE *)Src;
  v4 = this;
  if ( *(_BYTE *)Src >= 0 && v3 <= 58 )
    ++this[v3 + 5];
  if ( this[245] && !this[3648] )
    return (void *)sub_401A5A(Src, Size);
  if ( this[3648] == 128 )
  {
    v6 = this[3];
    sub_4013FC(0);
    (*(void (**)(void))(*(_DWORD *)v4[3] + 4))();
    v4[3] = 0;
  }
  v7 = (v4[3648] + v4[3647]) % 128;
  v8 = malloc(Size);
  v4[v7 + 3649] = v8;
  v4[v7 + 3777] = Size;
  result = memcpy(v8, Src, Size);
  ++v4[3648];
  return result;
}
// 4013FC: using guessed type _DWORD __stdcall sub_4013FC(_DWORD);

//----- (00409470) --------------------------------------------------------
int __stdcall sub_409470(int a1, void *Src, size_t Size)
{
  return sub_402509(Src, Size);
}

//----- (00409490) --------------------------------------------------------
int __thiscall sub_409490(void *this, int *a2, int a3)
{
  int (__stdcall *v3)(signed int, char *, signed int); // eax
  char v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+1h] [ebp-7h]

  v3 = *(int (__stdcall **)(signed int, char *, signed int))(*(_DWORD *)this + 168);
  v6 = *a2;
  v5 = 42;
  return v3(4, &v5, 6);
}

//----- (004094D0) --------------------------------------------------------
BOOL __thiscall sub_4094D0(void *this, char *Source, int a3, int a4, int a5)
{
  void *v5; // edi
  void (__thiscall *v6)(void *, signed int, char *, signed int); // edx
  char v8; // [esp+0h] [ebp-4Ch]
  int v9; // [esp+1h] [ebp-4Bh]
  char Dest; // [esp+5h] [ebp-47h]
  char v11; // [esp+44h] [ebp-8h]

  v5 = this;
  v8 = 11;
  v9 = a3;
  strncpy(&Dest, Source, 0x40u);
  v6 = *(void (__thiscall **)(void *, signed int, char *, signed int))(*(_DWORD *)v5 + 168);
  v11 = 0;
  v6(v5, 4, &v8, 69);
  dword_53E664 = a4;
  dword_53E668 = a5;
  strcpy((char *)&unk_53E560, Source);
  return DialogBoxParamA(*((HINSTANCE *)dword_563918 + 4), (LPCSTR)0x6C, *((HWND *)dword_563918 + 3), off_402095, 0) != 0;
}
// 53E664: using guessed type int dword_53E664;
// 53E668: using guessed type int dword_53E668;

//----- (004095B0) --------------------------------------------------------
void *__thiscall sub_4095B0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_401E15();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 401E15: using guessed type int sub_401E15(void);

//----- (004095E0) --------------------------------------------------------
signed int __thiscall sub_4095E0(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int result; // eax
  void (__stdcall *v3)(signed int, char *, signed int); // edx
  HCURSOR (__stdcall *v4)(HINSTANCE, LPCSTR); // ebx
  HCURSOR v5; // eax
  int v6; // edi
  int v7; // eax
  bool v8; // zf
  HCURSOR v9; // eax
  HCURSOR v10; // eax
  char *v11; // ebp
  char *v12; // ebx
  int v13; // edi
  int v14; // eax
  int v15; // ebp
  HCURSOR v16; // eax
  HCURSOR v17; // eax
  int v18; // ecx
  int v19; // edx
  _DWORD *v20; // eax
  int v21; // ebp
  int v22; // eax
  int v23; // ebx
  int *v24; // edi
  HCURSOR v25; // eax
  FILE *v26; // eax
  int v27; // [esp+18h] [ebp-2928h]
  int v28; // [esp+18h] [ebp-2928h]
  int v29; // [esp+18h] [ebp-2928h]
  char v30; // [esp+1Fh] [ebp-2921h]
  int v31; // [esp+20h] [ebp-2920h]
  LARGE_INTEGER PerformanceCount; // [esp+24h] [ebp-291Ch]
  char Str2; // [esp+2Ch] [ebp-2914h]
  char Dest; // [esp+12Ch] [ebp-2814h]
  char v35; // [esp+22Ch] [ebp-2714h]
  char v36; // [esp+22Dh] [ebp-2713h]

  v1 = this;
  if ( !this[3] )
    return 0;
  v3 = *(void (__stdcall **)(signed int, char *, signed int))(*this + 168);
  v30 = 12;
  v3(4, &v30, 1);
  v4 = LoadCursorA;
  v5 = LoadCursorA(0, (LPCSTR)0x7F02);
  SetCursor(v5);
  result = sub_401249(39, 2000);
  if ( result )
  {
    v27 = 0;
    if ( v1[3582] > 0 )
    {
      v6 = (int)(v1 + 510);
      do
      {
        v7 = sub_48D270((char *)v6);
        v8 = v7 == *(_DWORD *)(v6 + 32);
        *(_DWORD *)(v6 + 40) = v7;
        if ( !v8 && *(_DWORD *)(v6 + 36) )
        {
          v9 = LoadCursorA(0, (LPCSTR)0x7F00);
          SetCursor(v9);
          sprintf(&Dest, "Do you wish to upgrade this file: %s", v6);
          if ( MessageBoxA(*((HWND *)dword_563918 + 3), &Dest, "Optional Upgrade", 0x24u) == 7 )
            *(_DWORD *)(v6 + 40) = *(_DWORD *)(v6 + 32);
          v10 = LoadCursorA(0, (LPCSTR)0x7F02);
          SetCursor(v10);
        }
        v6 += 48;
        ++v27;
      }
      while ( v27 < v1[3582] );
    }
    v31 = 0;
    sprintf(&Str2, "%s.exe", dword_562F88);
    v11 = &v35;
    v28 = 0;
    if ( v1[3582] > 0 )
    {
      v12 = &v36;
      v13 = (int)(v1 + 510);
      do
      {
        v14 = *(_DWORD *)(v13 + 40);
        if ( v14 != *(_DWORD *)(v13 + 32) )
        {
          *((_DWORD *)v12 + 7) = v14;
          *v11 = 30;
          strcpy(v12, (const char *)v13);
          v11 += 33;
          v12 += 33;
        }
        if ( !_stricmp((const char *)v13, &Str2) && !*(_DWORD *)(v13 + 36) )
          v31 = 1;
        v13 += 48;
        ++v28;
      }
      while ( v28 < v1[3582] );
      v4 = LoadCursorA;
    }
    v15 = v11 - &v35;
    if ( v15 > 0 )
    {
      (*(void (__thiscall **)(_DWORD *, signed int, char *, int))(*v1 + 168))(v1, 4, &v35, v15);
      v16 = v4(0, (LPCSTR)0x7F02);
      SetCursor(v16);
      if ( !sub_401249(32, 2000) )
        return 0;
      v17 = v4(0, (LPCSTR)0x7F00);
      SetCursor(v17);
      v18 = v1[3582];
      v19 = 0;
      v29 = 0;
      if ( v18 > 0 )
      {
        v20 = v1 + 518;
        do
        {
          if ( v20[2] != *v20 )
            v19 += v20[3];
          v20 += 12;
          --v18;
        }
        while ( v18 );
        v29 = v19;
      }
      v21 = 0;
      if ( Frequency.QuadPart )
      {
        QueryPerformanceCounter(&PerformanceCount);
        v22 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
      }
      else
      {
        v22 = GetTickCount() / 0xA;
      }
      v23 = 0;
      dword_53E660 = v22;
      if ( v1[3582] > 0 )
      {
        v24 = v1 + 520;
        do
        {
          if ( *v24 != *(v24 - 2) )
          {
            if ( !sub_401348((char *)v24 - 40, *v24, v21, v29) )
              return 0;
            v21 += v24[1];
          }
          ++v23;
          v24 += 12;
        }
        while ( v23 < v1[3582] );
      }
      v4 = LoadCursorA;
    }
    v25 = v4(0, (LPCSTR)0x7F00);
    SetCursor(v25);
    if ( v31 )
    {
      if ( !byte_563088[0] )
      {
        v26 = fopen(&Str2, "rb+");
        if ( v26 )
        {
          fclose(v26);
          MessageBoxA(
            0,
            "Not currently running the correct version of the program, please relaunch program from the Station Launchpad"
            ".  If error persists, make sure that NONE of the files in your game directory are marked read-only.",
            "Error",
            0);
          exit(0);
        }
      }
    }
    result = 1;
  }
  return result;
}
// 401249: using guessed type _DWORD __stdcall sub_401249(_DWORD, _DWORD);
// 53E660: using guessed type int dword_53E660;

//----- (00409B50) --------------------------------------------------------
_DWORD *__thiscall sub_409B50(char *this, char *a2, int a3)
{
  char *v3; // eax
  _DWORD *v4; // esi
  const char *v5; // edi
  int v6; // edx
  char v7; // cl
  void *v8; // eax
  size_t v9; // ST1C_4
  FILE *v10; // eax
  FILE *v11; // ebp
  int v12; // eax
  int v13; // edx
  _BYTE *v14; // ecx
  int v15; // eax

  v3 = a2;
  v4 = this;
  v5 = this + 4;
  v6 = this + 4 - a2;
  do
  {
    v7 = *v3;
    v3[v6] = *v3;
    ++v3;
  }
  while ( v7 );
  *v4 = a3;
  v4[130] = 0;
  v8 = malloc(440 * a3);
  v9 = 440 * *v4;
  v4[129] = v8;
  memset(v8, 0, v9);
  v10 = fopen(v5, "rb");
  v11 = v10;
  if ( v10 )
  {
    if ( !feof(v10) )
    {
      do
      {
        v12 = v4[130];
        if ( v12 >= *v4 )
          break;
        fread((void *)(v4[129] + 440 * v12), 1u, 4u, v11);
        fread((void *)(440 * v4[130] + v4[129] + 8), 1u, 0x1B0u, v11);
        v13 = v4[129] + 440 * v4[130];
        v14 = (_BYTE *)(v13 + 8);
        v15 = -1;
        if ( v13 + 8 < (unsigned int)(v13 + 440) )
        {
          do
            v15 = dword_53A208[(unsigned __int8)(v15 ^ *v14++)] ^ (v15 >> 8) & 0xFFFFFF;
          while ( (unsigned int)v14 < v13 + 440 );
        }
        *(_DWORD *)(v13 + 4) = ~v15;
        ++v4[130];
      }
      while ( !feof(v11) );
    }
    fclose(v11);
  }
  return v4;
}

//----- (00409CE0) --------------------------------------------------------
void __thiscall sub_409CE0(const char *this)
{
  const char *v1; // esi
  FILE *v2; // ebx
  int v3; // ebp
  int v4; // edi

  v1 = this;
  v2 = fopen(this + 4, "wb");
  if ( v2 )
  {
    v3 = 0;
    if ( *((_DWORD *)v1 + 130) > 0 )
    {
      v4 = 0;
      do
      {
        fwrite((const void *)(v4 + *((_DWORD *)v1 + 129)), 1u, 4u, v2);
        fwrite((const void *)(*((_DWORD *)v1 + 129) + v4 + 8), 1u, 0x1B0u, v2);
        ++v3;
        v4 += 440;
      }
      while ( v3 < *((_DWORD *)v1 + 130) );
    }
    fclose(v2);
  }
  if ( *((_DWORD *)v1 + 129) )
  {
    free(*((void **)v1 + 129));
    *((_DWORD *)v1 + 129) = 0;
  }
}

//----- (00409DA0) --------------------------------------------------------
int __thiscall sub_409DA0(void *this, int a2)
{
  int *v2; // esi
  void *v3; // eax
  int v4; // ecx
  int result; // eax

  v2 = (int *)this;
  *(_DWORD *)this = a2;
  v3 = realloc(*((void **)this + 129), 440 * a2);
  v4 = *v2;
  v2[129] = (int)v3;
  result = v2[130];
  if ( result >= v4 )
    v2[130] = v4;
  else
    v2[130] = result;
  return result;
}

//----- (00409E00) --------------------------------------------------------
signed int __thiscall sub_409E00(_DWORD *this, int a2, void *a3)
{
  _DWORD *v3; // ebx
  int v4; // ecx
  int v5; // esi
  _DWORD *v6; // eax

  v3 = this;
  v4 = this[130];
  v5 = 0;
  if ( v4 <= 0 )
    return 0;
  v6 = (_DWORD *)(v3[129] + 4);
  while ( *v6 != a2 )
  {
    ++v5;
    v6 += 110;
    if ( v5 >= v4 )
      return 0;
  }
  *(_DWORD *)(440 * v5 + v3[129]) = _time64(0);
  if ( a3 )
    qmemcpy(a3, (const void *)(440 * v5 + v3[129] + 8), 0x1B0u);
  return 1;
}

//----- (00409EB0) --------------------------------------------------------
int __thiscall sub_409EB0(_DWORD *this, char *a2)
{
  const void *v2; // esi
  int v3; // eax
  _DWORD *v4; // ebp
  char *i; // ecx
  int v6; // edi
  int v7; // edx
  int v8; // ebx
  int result; // eax
  int v10; // ecx
  int v11; // eax
  int v12; // edi
  int v13; // [esp+10h] [ebp-8h]

  v2 = a2;
  v3 = -1;
  v4 = this;
  for ( i = a2; i < a2 + 432; ++i )
    v3 = dword_53A208[(unsigned __int8)(v3 ^ *i)] ^ (v3 >> 8) & 0xFFFFFF;
  v6 = 0;
  v7 = 0;
  v13 = ~v3;
  if ( v4[130] <= 0 )
  {
LABEL_10:
    v11 = v4[130];
    if ( v11 < *v4 )
    {
      v6 = v4[130];
      v4[130] = v11 + 1;
    }
    v12 = 440 * v6;
    *(_DWORD *)(v4[129] + v12 + 4) = v13;
    *(_DWORD *)(v12 + v4[129]) = _time64(0);
    result = v4[129];
    qmemcpy((void *)(result + v12 + 8), v2, 0x1B0u);
  }
  else
  {
    v8 = v4[129];
    result = 0;
    v10 = 0;
    while ( *(_DWORD *)(v10 + v8 + 4) != v13 )
    {
      if ( *(_DWORD *)(v10 + v8) < *(_DWORD *)(result + v8) )
      {
        v6 = v7;
        result = v10;
      }
      ++v7;
      v10 += 440;
      if ( v7 >= v4[130] )
      {
        v2 = a2;
        goto LABEL_10;
      }
    }
  }
  return result;
}

//----- (00409FD0) --------------------------------------------------------
unsigned int __cdecl sub_409FD0(int a1, int a2)
{
  unsigned int result; // eax

  if ( a1 == 2 )
    result = ((unsigned int)(unsigned __int8)a2 >> 3) | 4 * (BYTE1(a2) & 0xF8 | 32 * (BYTE2(a2) & 0xF8));
  else
    result = ((unsigned int)(unsigned __int8)a2 >> 3) | 8 * (BYTE1(a2) & 0xFC | 32 * (BYTE2(a2) & 0xF8));
  return result;
}

//----- (0040A0C0) --------------------------------------------------------
int __thiscall sub_40A0C0(_DWORD *this, unsigned int a2)
{
  int result; // eax

  if ( a2 > 0x1387 )
    result = 0;
  else
    result = this[a2 + 3102];
  return result;
}

//----- (0040A0E0) --------------------------------------------------------
int __stdcall sub_40A0E0(int a1, int a2)
{
  return sub_40273E((char *)&Source, 5, (int)&Source, a1, a2);
}

//----- (0040A130) --------------------------------------------------------
int __thiscall sub_40A130(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  void (__stdcall ***v3)(signed int); // ecx

  v1 = this;
  *this = &off_51123C;
  this[1] = &off_51120C;
  v2 = (void (__stdcall ***)(signed int))this[254];
  if ( v2 )
  {
    (**v2)(1);
    v1[254] = 0;
  }
  v3 = (void (__stdcall ***)(signed int))v1[8];
  if ( v3 )
  {
    (**v3)(1);
    v1[8] = 0;
  }
  return sub_4027A2(v1);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 51120C: using guessed type int (__stdcall *off_51120C)(int, int, int, int);
// 51123C: using guessed type int (__stdcall *off_51123C)(int, int, int);

//----- (0040A1F0) --------------------------------------------------------
int __thiscall sub_40A1F0(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v5; // ST10_4
  int v6; // ST0C_4
  int v7; // eax
  int v8; // edi
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // ST10_4
  void (__stdcall *v12)(_DWORD *); // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // ST10_4
  void (__stdcall *v16)(_DWORD *); // eax
  int v17; // edi
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // ST10_4
  void (__stdcall *v21)(_DWORD *); // eax
  int v22; // edi
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // ST10_4
  void (__stdcall *v26)(_DWORD *); // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // ST10_4
  void (__stdcall *v30)(_DWORD *); // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // ST10_4
  void (__stdcall *v34)(_DWORD *); // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // ST10_4
  void (__stdcall *v38)(_DWORD *); // eax
  int v39; // edi
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  _DWORD *v42; // ST10_4
  void (__stdcall *v43)(_DWORD *); // eax
  int v44; // edi
  _DWORD *v45; // eax
  _DWORD *v46; // eax
  _DWORD *v47; // ST10_4
  void (__stdcall *v48)(_DWORD *); // eax
  int v49; // ebx
  unsigned int v50; // edx
  int v51; // edi
  _DWORD *v52; // eax
  _DWORD *v53; // eax
  _DWORD *v54; // ST10_4
  void (__stdcall *v55)(_DWORD *); // eax
  int v56; // kr00_4
  unsigned int v57; // edx
  int v58; // edi
  _DWORD *v59; // eax
  _DWORD *v60; // eax
  _DWORD *v61; // ST10_4
  int (__stdcall *v62)(_DWORD *); // eax
  int v64; // [esp+24h] [ebp-18h]
  int v65; // [esp+28h] [ebp-14h]
  _DWORD *v66; // [esp+2Ch] [ebp-10h]
  int v67; // [esp+38h] [ebp-4h]

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[8];
  if ( v2 )
  {
    (**v2)(1);
    v1[8] = 0;
  }
  v1[9] = 0;
  v3 = operator new(0x420u);
  v66 = v3;
  v67 = 0;
  if ( v3 )
    v4 = sub_49A5F0(v3, 1, v1 + 3, 0);
  else
    v4 = 0;
  v1[8] = v4;
  v5 = *((signed __int16 *)dword_563908 + 15401);
  v6 = *((signed __int16 *)dword_563908 + 15400);
  v67 = -1;
  v7 = sub_402617(0x23u);
  sub_401F32(&v64, &v65, v7, v6, v5);
  v8 = v1[5] - v64 - 12;
  v9 = operator new(0x18u);
  v66 = v9;
  v67 = 1;
  if ( v9 )
    v10 = sub_49A490(v9, v8, 11, v64, v65, 5);
  else
    v10 = 0;
  v11 = v10;
  v12 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v12(v11);
  sub_401F32(
    &v64,
    &v65,
    "Export...",
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v13 = operator new(0x18u);
  v66 = v13;
  v67 = 2;
  if ( v13 )
    v14 = sub_49A490(v13, 16, 11, v64, v65, 6);
  else
    v14 = 0;
  v15 = v14;
  v16 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v16(v15);
  v17 = v64 + 20;
  sub_401F32(
    &v64,
    &v65,
    "Import...",
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v18 = operator new(0x18u);
  v66 = v18;
  v67 = 3;
  if ( v18 )
    v19 = sub_49A490(v18, v17, 11, v64, v65, 7);
  else
    v19 = 0;
  v20 = v19;
  v21 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v21(v20);
  v22 = v17 + v64 + 4;
  sub_401F32(
    &v64,
    &v65,
    "Send Friend...",
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v23 = operator new(0x18u);
  v66 = v23;
  v67 = 4;
  if ( v23 )
    v24 = sub_49A490(v23, v22, 11, v64, v65, 9);
  else
    v24 = 0;
  v25 = v24;
  v26 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v26(v25);
  v27 = operator new(0x18u);
  v66 = v27;
  v67 = 5;
  if ( v27 )
    v28 = sub_49A490(v27, 12, 44, v1[13] + 70, 18, 8);
  else
    v28 = 0;
  v29 = v28;
  v30 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v30(v29);
  v31 = operator new(0x18u);
  v66 = v31;
  v67 = 6;
  if ( v31 )
    v32 = sub_49A490(v31, 12, 78, 18, v1[13] + 2, 2);
  else
    v32 = 0;
  v33 = v32;
  v34 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v34(v33);
  v35 = operator new(0x18u);
  v66 = v35;
  v67 = 7;
  if ( v35 )
    v36 = sub_49A490(v35, 46, 78, v1[13] + 2, v1[13] + 2, 1);
  else
    v36 = 0;
  v37 = v36;
  v38 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v38(v37);
  v39 = v1[13] + 64;
  v40 = operator new(0x18u);
  v66 = v40;
  v67 = 8;
  if ( v40 )
    v41 = sub_49A490(v40, v39, 78, 18, v1[13] + 2, 3);
  else
    v41 = 0;
  v42 = v41;
  v43 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v43(v42);
  v44 = v1[13] + 2 * *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1517) + 2052) + 174) + 126;
  sub_401F32(
    &v64,
    &v65,
    "Refresh Banner List",
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v45 = operator new(0x18u);
  v66 = v45;
  v67 = 9;
  if ( v45 )
    v46 = sub_49A490(v45, 12, v44, v64, v65, 10);
  else
    v46 = 0;
  v47 = v46;
  v48 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v48(v47);
  v49 = v44 + v65 + 4;
  v50 = (signed int)((unsigned __int64)(1808407283i64 * (v1[5] - v1[3] - 32)) >> 32) >> 3;
  v51 = v50 + (v50 >> 31);
  v52 = operator new(0x18u);
  v66 = v52;
  v67 = 10;
  if ( v52 )
    v53 = sub_49A490(v52, 16, v49, 19 * v51, v1[6], 11);
  else
    v53 = 0;
  v54 = v53;
  v55 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  v55(v54);
  v56 = v1[3] + v1[5];
  v57 = (signed int)((unsigned __int64)(954437177i64 * (signed int)v1[14]) >> 32) >> 2;
  v58 = v57 + (v57 >> 31);
  v59 = operator new(0x18u);
  v66 = v59;
  v67 = 11;
  if ( v59 )
    v60 = sub_49A490(v59, v56 / 2, 78, 18 * v58, 12 * v58, 4);
  else
    v60 = 0;
  v61 = v60;
  v62 = *(int (__stdcall **)(_DWORD *))(*(_DWORD *)v1[8] + 16);
  v67 = -1;
  return v62(v61);
}
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040A7F0) --------------------------------------------------------
int __thiscall sub_40A7F0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  int v3; // ecx
  unsigned int v4; // edx
  void (__stdcall ***v5)(signed int); // ecx

  v2 = this;
  if ( a2 )
  {
    this[3] = *a2;
    this[4] = a2[1];
    this[5] = a2[2];
    this[6] = a2[3];
  }
  v3 = this[5] - this[3];
  v2[13] = 2 * v3 / 5 - 64;
  v4 = 3 * v3 + ((unsigned __int64)(-5522100807i64 * v3) >> 32);
  v5 = (void (__stdcall ***)(signed int))v2[254];
  v2[14] = ((signed int)v4 >> 2) + (v4 >> 31);
  if ( v5 )
  {
    (**v5)(1);
    v2[254] = 0;
  }
  return sub_401C6C(v2);
}
// 401C6C: using guessed type int __thiscall sub_401C6C(_DWORD);

//----- (0040A890) --------------------------------------------------------
signed int sub_40A890()
{
  return 7;
}

//----- (0040A8A0) --------------------------------------------------------
int __thiscall sub_40A8A0(_DWORD *this)
{
  double *v1; // esi
  int *v2; // edi
  int v3; // ecx
  int v4; // edx
  int v5; // eax
  int v6; // edi
  int v7; // ecx
  int v8; // ST104_4
  int v9; // ST100_4
  int v10; // eax
  int v11; // ecx
  __int16 v12; // di
  __int16 v13; // cx
  int v14; // ST100_4
  int v15; // STF8_4
  int v16; // STF4_4
  int v17; // eax
  int v18; // eax
  __int16 v19; // dx
  __int16 v20; // ax
  int v21; // eax
  int v22; // edi
  int v23; // eax
  __int16 v24; // dx
  __int16 v25; // ax
  int v26; // eax
  int v27; // edx
  int v28; // eax
  __int16 v29; // di
  __int16 v30; // ax
  int v31; // eax
  int v32; // ecx
  int v33; // ecx
  unsigned int v34; // edx
  int v35; // ebx
  int v36; // eax
  int v37; // eax
  __int16 v38; // dx
  __int16 v39; // ax
  __int16 v40; // dx
  unsigned __int16 v41; // di
  int v42; // eax
  bool v43; // sf
  unsigned __int8 v44; // of
  int v45; // ecx
  int v46; // ebx
  bool v47; // zf
  int v48; // eax
  __int16 v49; // dx
  __int16 v50; // ax
  __int16 v51; // dx
  signed int v52; // edi
  int v53; // ebx
  _DWORD *v54; // eax
  _DWORD *v55; // eax
  _DWORD *v56; // ecx
  void (__thiscall *v57)(_DWORD *, _DWORD, _DWORD); // eax
  int v58; // edi
  int v59; // eax
  __int16 v60; // dx
  unsigned __int16 v61; // ax
  __int16 v62; // dx
  int v63; // eax
  int v64; // ecx
  int v65; // eax
  int v66; // eax
  int v67; // ebx
  int v68; // eax
  __int16 v69; // dx
  __int16 v70; // ax
  __int16 v71; // dx
  signed int v72; // edi
  double v73; // st7
  double v74; // st6
  int v75; // edi
  signed int v76; // eax
  int v77; // ebx
  int v78; // ecx
  _DWORD *v79; // ecx
  int v80; // ecx
  double v81; // st7
  int v82; // edi
  signed int v83; // eax
  int v84; // ebx
  int v85; // ecx
  int v86; // ecx
  double v87; // st7
  signed int v88; // eax
  int v89; // ecx
  double v90; // st7
  double v91; // st7
  int v92; // eax
  int v93; // edi
  double v94; // ST100_8
  double v95; // STF8_8
  double v96; // st7
  int v97; // eax
  int v98; // ecx
  double v99; // ST100_8
  double v100; // STF8_8
  double v101; // st7
  int v102; // eax
  __int16 v103; // dx
  __int16 v104; // ax
  __int16 v105; // dx
  unsigned __int16 v106; // bx
  int v107; // edi
  int v108; // eax
  int v109; // ebx
  int v110; // eax
  int v111; // eax
  int v112; // edi
  __int16 v113; // dx
  __int16 v114; // ax
  int v115; // eax
  int v116; // eax
  int v117; // ecx
  int v118; // eax
  int v119; // edx
  __int64 v120; // rtt
  int v121; // ecx
  unsigned __int16 *v122; // eax
  signed int v123; // ebx
  signed int v124; // edi
  int v125; // eax
  unsigned int v126; // edx
  int v127; // ebx
  int v128; // ecx
  signed int v129; // eax
  int v130; // eax
  int v131; // eax
  __int16 v132; // dx
  __int16 v133; // ax
  __int16 v134; // dx
  unsigned __int16 v135; // dx
  void (__stdcall *v136)(_DWORD, int *); // eax
  unsigned __int16 v137; // di
  int v138; // ecx
  int v139; // edi
  int v140; // ecx
  int v141; // ebx
  int v142; // ecx
  double v144; // [esp+144h] [ebp-108h]
  int v145; // [esp+14Ch] [ebp-100h]
  int v146; // [esp+150h] [ebp-FCh]
  int v147; // [esp+154h] [ebp-F8h]
  int v148; // [esp+158h] [ebp-F4h]
  int v149; // [esp+15Ch] [ebp-F0h]
  int v150; // [esp+160h] [ebp-ECh]
  int v151; // [esp+164h] [ebp-E8h]
  int v152; // [esp+168h] [ebp-E4h]
  int v153; // [esp+16Ch] [ebp-E0h]
  int v154; // [esp+170h] [ebp-DCh]
  int v155; // [esp+174h] [ebp-D8h]
  int v156; // [esp+178h] [ebp-D4h]
  int v157; // [esp+17Ch] [ebp-D0h]
  int v158; // [esp+180h] [ebp-CCh]
  int v159; // [esp+184h] [ebp-C8h]
  int v160; // [esp+188h] [ebp-C4h]
  double v161; // [esp+18Ch] [ebp-C0h]
  int v162; // [esp+194h] [ebp-B8h]
  int v163; // [esp+198h] [ebp-B4h]
  int v164; // [esp+1A0h] [ebp-ACh]
  int v165; // [esp+1A4h] [ebp-A8h]
  int v166; // [esp+1A8h] [ebp-A4h]
  int v167; // [esp+1ACh] [ebp-A0h]
  int v168; // [esp+1B0h] [ebp-9Ch]
  int v169; // [esp+1B4h] [ebp-98h]
  int v170; // [esp+1B8h] [ebp-94h]
  int v171; // [esp+1BCh] [ebp-90h]
  int v172; // [esp+1C0h] [ebp-8Ch]
  char Dest; // [esp+1C4h] [ebp-88h]
  int v174; // [esp+248h] [ebp-4h]

  v1 = (double *)this;
  v2 = this + 3;
  sub_401BE0(this[7], this + 3);
  v3 = *v2;
  v4 = *((_DWORD *)v1 + 4);
  v5 = *((_DWORD *)v1 + 5);
  v6 = *((_DWORD *)v1 + 6);
  v165 = v3;
  v7 = *((_DWORD *)v1 + 7);
  v166 = v4;
  v167 = v5;
  v168 = v6 - 16;
  (*(void (__stdcall **)(int *))(*(_DWORD *)v7 + 64))(&v165);
  v8 = *((signed __int16 *)dword_563908 + 15401);
  v9 = *((signed __int16 *)dword_563908 + 15400);
  v10 = sub_402617(0x23u);
  sub_401F32(&v153, &v160, v10, v9, v8);
  v11 = *((_DWORD *)v1 + 9);
  if ( v11 == 5 )
    v12 = *((_WORD *)dword_563908 + 15404);
  else
    v12 = *((_WORD *)dword_563908 + 15402);
  if ( v11 == 5 )
    v13 = *((_WORD *)dword_563908 + 15403);
  else
    v13 = *((_WORD *)dword_563908 + 15401);
  v14 = *((_DWORD *)v1 + 5) - v153 - 12;
  v15 = v13;
  v16 = *((signed __int16 *)dword_563908 + 15400);
  v17 = sub_402617(0x23u);
  sub_4011E0(*((_DWORD *)v1 + 7), v17, v16, v15, v12, v14, 11);
  v18 = *((_DWORD *)v1 + 9);
  if ( v18 == 6 )
    v19 = *((_WORD *)dword_563908 + 15404);
  else
    v19 = *((_WORD *)dword_563908 + 15402);
  if ( v18 == 6 )
    v20 = *((_WORD *)dword_563908 + 15403);
  else
    v20 = *((_WORD *)dword_563908 + 15401);
  v21 = sub_4011E0(*((_DWORD *)v1 + 7), "Export...", *((signed __int16 *)dword_563908 + 15400), v20, v19, 16, 11);
  v153 = v21;
  v22 = v21 + 20;
  v23 = *((_DWORD *)v1 + 9);
  if ( v23 == 7 )
    v24 = *((_WORD *)dword_563908 + 15404);
  else
    v24 = *((_WORD *)dword_563908 + 15402);
  if ( v23 == 7 )
    v25 = *((_WORD *)dword_563908 + 15403);
  else
    v25 = *((_WORD *)dword_563908 + 15401);
  v26 = sub_4011E0(*((_DWORD *)v1 + 7), "Import...", *((signed __int16 *)dword_563908 + 15400), v25, v24, v22, 11);
  v153 = v26;
  v27 = v22 + v26 + 4;
  v28 = *((_DWORD *)v1 + 9);
  if ( v28 == 9 )
    v29 = *((_WORD *)dword_563908 + 15404);
  else
    v29 = *((_WORD *)dword_563908 + 15402);
  if ( v28 == 9 )
    v30 = *((_WORD *)dword_563908 + 15403);
  else
    v30 = *((_WORD *)dword_563908 + 15401);
  v31 = sub_4011E0(*((_DWORD *)v1 + 7), "Send Friend...", *((signed __int16 *)dword_563908 + 15400), v30, v29, v27, 11);
  v32 = *((_DWORD *)v1 + 5);
  v153 = v31;
  v171 = v32 - 12;
  v33 = *((_DWORD *)v1 + 7);
  v169 = 12;
  v170 = 37;
  v172 = 39;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v33 + 40))(*((unsigned __int16 *)dword_563908 + 76), &v169);
  v34 = (signed int)((unsigned __int64)(1717986919i64 * (*((_DWORD *)v1 + 13) + 70)) >> 32) >> 2;
  v35 = v34 + (v34 >> 31);
  v148 = 0;
  do
  {
    HIDWORD(v144) = v35 * v148 + 12;
    if ( v148 == 9 )
      v36 = *((_DWORD *)v1 + 13) + 82;
    else
      v36 = v35 + v35 * v148 + 12;
    v146 = v36;
    v37 = *((_DWORD *)v1 + v148 + 28);
    v38 = (unsigned __int8)(*((_WORD *)v1 + 2 * v148 + 56) >> 8) | (unsigned __int16)(32
                                                                                    * ((*((_DWORD *)v1 + v148 + 28) >> 16) & 0xF8));
    v145 = 44;
    v147 = 62;
    v39 = (unsigned __int8)v37 >> 3;
    if ( dword_576828 == 2 )
      v40 = v38 & 0xFFF8;
    else
      v40 = 2 * (v38 & 0xFFFC);
    v41 = v39 | 4 * v40;
    (*(void (__stdcall **)(_DWORD, char *))(**((_DWORD **)v1 + 7) + 40))(v41, (char *)&v144 + 4);
    (*(void (__stdcall **)(_DWORD, char *, signed int))(**((_DWORD **)v1 + 7) + 56))(
      *((unsigned __int16 *)dword_563908 + 82),
      (char *)&v144 + 4,
      1);
    if ( !v41 )
    {
      v42 = sub_49AD40(*((_DWORD **)dword_563908 + 1516), "clear");
      sub_49B310(
        *((_DWORD **)dword_563908 + 1516),
        "clear",
        5,
        *((_DWORD **)v1 + 7),
        (HIDWORD(v144) + v146 - v42) / 2,
        v145 + 7,
        3,
        0);
    }
    v44 = __OFSUB__(v148 + 1, 10);
    v43 = v148++ - 9 < 0;
  }
  while ( v43 ^ v44 );
  v45 = *((_DWORD *)v1 + 7);
  v147 = *((_DWORD *)v1 + 13) + 80;
  HIDWORD(v144) = 12;
  v146 = 30;
  v145 = 78;
  (*(void (__stdcall **)(_DWORD, char *, signed int))(*(_DWORD *)v45 + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  (*(void (__stdcall **)(_DWORD, _DWORD))(**((_DWORD **)v1 + 7) + 92))(0, 0);
  v46 = 0;
  v47 = *((_DWORD *)v1 + 13) == 0;
  v43 = *((_DWORD *)v1 + 13) < 0;
  v148 = 0;
  if ( !v43 && !v47 )
  {
    do
    {
      v48 = sub_48DB20(v1[8], v1[9], (double)v148 / (double)*((signed int *)v1 + 13));
      v49 = BYTE1(v48) | (unsigned __int16)(32 * (BYTE2(v48) & 0xF8));
      v50 = (unsigned __int8)v48 >> 3;
      if ( dword_576828 == 2 )
        v51 = v49 & 0xFFF8;
      else
        v51 = 2 * (v49 & 0xFFFC);
      v52 = 0;
      v151 = (unsigned __int16)(v50 | 4 * v51);
      do
        (*(void (__stdcall **)(int, int, int))(**((_DWORD **)v1 + 7) + 24))(
          v52++ + HIDWORD(v144) + 1,
          v46 + v145 + 1,
          v151);
      while ( v52 < 16 );
      v44 = __OFSUB__(++v46, *((_DWORD *)v1 + 13));
      v43 = v46 - *((_DWORD *)v1 + 13) < 0;
      v148 = v46;
    }
    while ( v43 ^ v44 );
  }
  (*(void (**)(void))(**((_DWORD **)v1 + 7) + 96))();
  v53 = 0;
  if ( !*((_DWORD *)v1 + 254) )
  {
    v54 = operator new(0xCCu);
    LODWORD(v161) = v54;
    v174 = 0;
    if ( v54 )
      v55 = sub_49FBC0(v54, *((_DWORD *)dword_563908 + 89), *((_DWORD *)v1 + 13), *((_DWORD *)v1 + 13), 0);
    else
      v55 = 0;
    *((_DWORD *)v1 + 254) = v55;
    v56 = v55;
    v57 = *(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*v55 + 92);
    v174 = -1;
    v57(v56, 0, 0);
    v47 = *((_DWORD *)v1 + 13) == 0;
    v43 = *((_DWORD *)v1 + 13) < 0;
    v152 = 0;
    if ( !v43 && !v47 )
    {
      do
      {
        v58 = 0;
        v47 = *((_DWORD *)v1 + 13) == 0;
        v43 = *((_DWORD *)v1 + 13) < 0;
        v150 = 0;
        if ( !v43 && !v47 )
        {
          v161 = (double)v152 * 360.0;
          do
          {
            v59 = sub_48DB20(
                    v161 / (double)*((signed int *)v1 + 13),
                    (double)v150 / (double)*((signed int *)v1 + 13),
                    0.7);
            v60 = BYTE1(v59) | (unsigned __int16)(32 * (BYTE2(v59) & 0xF8));
            v61 = (unsigned __int8)v59 >> 3;
            if ( dword_576828 == 2 )
              v62 = v60 & 0xFFF8;
            else
              v62 = 2 * (v60 & 0xFFFC);
            (*(void (__stdcall **)(int, int, int))(**((_DWORD **)v1 + 254) + 24))(
              v53,
              v58++,
              v61 | (unsigned __int16)(4 * v62));
            v44 = __OFSUB__(v58, *((_DWORD *)v1 + 13));
            v43 = v58 - *((_DWORD *)v1 + 13) < 0;
            v150 = v58;
          }
          while ( v43 ^ v44 );
        }
        v44 = __OFSUB__(++v53, *((_DWORD *)v1 + 13));
        v43 = v53 - *((_DWORD *)v1 + 13) < 0;
        v152 = v53;
      }
      while ( v43 ^ v44 );
    }
    (*(void (**)(void))(**((_DWORD **)v1 + 254) + 96))();
  }
  v63 = *((_DWORD *)v1 + 13);
  v147 = v63 + 80;
  v146 = v63 + 48;
  v64 = *((_DWORD *)v1 + 7);
  HIDWORD(v144) = 46;
  v145 = 78;
  (*(void (__stdcall **)(_DWORD, char *, signed int))(*(_DWORD *)v64 + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  (*(void (__stdcall **)(_DWORD, _DWORD, int, int, _DWORD, _DWORD))(**((_DWORD **)v1 + 254) + 4))(
    0,
    *((_DWORD *)v1 + 7),
    HIDWORD(v144) + 1,
    v145 + 1,
    0,
    0);
  v65 = *((_DWORD *)v1 + 13);
  v147 = v65 + 80;
  HIDWORD(v144) = v65 + 64;
  v146 = v65 + 82;
  v145 = 78;
  v66 = *((unsigned __int16 *)dword_563908 + 82);
  v149 = v146;
  (*(void (__stdcall **)(int, char *, signed int))(**((_DWORD **)v1 + 7) + 56))(v66, (char *)&v144 + 4, 1);
  (*(void (__stdcall **)(_DWORD, _DWORD))(**((_DWORD **)v1 + 7) + 92))(0, 0);
  v67 = 0;
  v47 = *((_DWORD *)v1 + 13) == 0;
  v43 = *((_DWORD *)v1 + 13) < 0;
  v148 = 0;
  if ( !v43 && !v47 )
  {
    do
    {
      v68 = sub_48DB20(v1[11], v1[12], (double)v148 / (double)*((signed int *)v1 + 13));
      v69 = BYTE1(v68) | (unsigned __int16)(32 * (BYTE2(v68) & 0xF8));
      v70 = (unsigned __int8)v68 >> 3;
      if ( dword_576828 == 2 )
        v71 = v69 & 0xFFF8;
      else
        v71 = 2 * (v69 & 0xFFFC);
      v72 = 0;
      v151 = (unsigned __int16)(v70 | 4 * v71);
      do
        (*(void (__stdcall **)(int, int, int))(**((_DWORD **)v1 + 7) + 24))(
          v72++ + HIDWORD(v144) + 1,
          v67 + v145 + 1,
          v151);
      while ( v72 < 16 );
      v44 = __OFSUB__(++v67, *((_DWORD *)v1 + 13));
      v43 = v67 - *((_DWORD *)v1 + 13) < 0;
      v148 = v67;
    }
    while ( v43 ^ v44 );
  }
  (*(void (**)(void))(**((_DWORD **)v1 + 7) + 96))();
  v73 = (double)*((signed int *)v1 + 13);
  v74 = v73 * v1[11];
  v150 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1517) + 2052) + 174);
  v75 = 47 - (signed int)(v74 / -360.0);
  v76 = (signed int)(v73 * v1[12]);
  v146 = v75 + 6;
  v77 = v76 + 79;
  v147 = v76 + 80;
  v78 = *((_DWORD *)v1 + 7);
  HIDWORD(v144) = v75 - 5;
  v145 = v76 + 79;
  (*(void (__stdcall **)(_DWORD, char *))(*(_DWORD *)v78 + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  v79 = (_DWORD *)*((_DWORD *)dword_563908 + 1517);
  v151 = v150 / 2;
  sub_49B230(v79, "R", 0, *((_DWORD **)v1 + 7), HIDWORD(v144) + 12, v145 - v150 / 2 + 1, 3, 0);
  v80 = *((_DWORD *)v1 + 7);
  v145 = v77 - 5;
  HIDWORD(v144) = 47 - (signed int)(v74 / -360.0);
  v147 = v77 + 6;
  v146 = v75 + 1;
  (*(void (__stdcall **)(_DWORD, char *))(*(_DWORD *)v80 + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  v81 = (double)*((signed int *)v1 + 13);
  v82 = 47 - (signed int)(v81 * v1[8] / -360.0);
  v83 = (signed int)(v81 * v1[9]);
  v146 = v82 + 6;
  v84 = v83 + 79;
  v147 = v83 + 80;
  v85 = *((_DWORD *)v1 + 7);
  HIDWORD(v144) = v82 - 5;
  v145 = v83 + 79;
  (*(void (__stdcall **)(_DWORD, char *))(*(_DWORD *)v85 + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  sub_49B230(*((_DWORD **)dword_563908 + 1517), "L", 0, *((_DWORD **)v1 + 7), HIDWORD(v144) + 12, v145 - v151 + 1, 3, 0);
  HIDWORD(v144) = v82;
  v145 = v84 - 5;
  v86 = *((_DWORD *)v1 + 7);
  v147 = v84 + 6;
  v146 = v82 + 1;
  (*(void (__stdcall **)(_DWORD, char *))(*(_DWORD *)v86 + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  HIDWORD(v144) = 8;
  v87 = (double)*((signed int *)v1 + 13);
  v146 = 34;
  v88 = (signed int)(v87 * v1[10]);
  v89 = *((_DWORD *)v1 + 7);
  v145 = v88 + 79;
  v147 = v88 + 80;
  (*(void (__stdcall **)(_DWORD, char *))(*(_DWORD *)v89 + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  v90 = (double)*((signed int *)v1 + 13);
  v146 = v149 + 4;
  v91 = v90 * v1[13];
  HIDWORD(v144) = v149 - 22;
  v145 = (signed int)v91 + 79;
  v147 = (signed int)v91 + 80;
  (*(void (__stdcall **)(_DWORD, char *))(**((_DWORD **)v1 + 7) + 40))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4);
  v92 = *((_DWORD *)v1 + 13);
  v93 = v92 + 96;
  v94 = v1[10];
  v95 = v1[9];
  HIDWORD(v144) = 12;
  v96 = v1[8];
  v146 = v92 / 2 + 46;
  v145 = v92 + 96;
  v147 = v92 + 114;
  v97 = sub_48DB20(v96, v95, v94);
  if ( dword_576828 == 2 )
    v98 = (unsigned __int16)(((unsigned __int8)v97 >> 3) | 4
                                                         * ((BYTE1(v97) | (unsigned __int16)(32 * (BYTE2(v97) & 0xF8))) & 0xFFF8));
  else
    v98 = (unsigned __int16)(((unsigned __int8)v97 >> 3) | 8
                                                         * ((BYTE1(v97) | (unsigned __int16)(32 * (BYTE2(v97) & 0xF8))) & 0xFFFC));
  v148 = v98;
  (*(void (__stdcall **)(_DWORD, char *))(**((_DWORD **)v1 + 7) + 40))((unsigned __int16)v98, (char *)&v144 + 4);
  (*(void (__stdcall **)(_DWORD, char *, signed int))(**((_DWORD **)v1 + 7) + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  if ( !(_WORD)v148 )
    sub_49B310(*((_DWORD **)dword_563908 + 1517), "clear", 5, *((_DWORD **)v1 + 7), HIDWORD(v144) + 6, v145 + 5, 3, 0);
  v99 = v1[13];
  v100 = v1[12];
  v101 = v1[11];
  HIDWORD(v144) = *((_DWORD *)v1 + 13) / 2 + 46;
  v146 = v149;
  v145 = v93;
  v147 = v93 + 18;
  v102 = sub_48DB20(v101, v100, v99);
  v103 = BYTE1(v102) | (unsigned __int16)(32 * (BYTE2(v102) & 0xF8));
  v104 = (unsigned __int8)v102 >> 3;
  if ( dword_576828 == 2 )
    v105 = v103 & 0xFFF8;
  else
    v105 = 2 * (v103 & 0xFFFC);
  v106 = v104 | 4 * v105;
  (*(void (__stdcall **)(_DWORD, char *))(**((_DWORD **)v1 + 7) + 40))(v106, (char *)&v144 + 4);
  (*(void (__stdcall **)(_DWORD, char *, signed int))(**((_DWORD **)v1 + 7) + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  if ( !v106 )
    sub_49B310(*((_DWORD **)dword_563908 + 1517), "clear", 5, *((_DWORD **)v1 + 7), HIDWORD(v144) + 6, v145 + 5, 3, 0);
  v107 = v93 + 22;
  v108 = sub_48DB20(v1[8], v1[9], v1[10]);
  sprintf(
    &Dest,
    "R=%d G=%d B=%d",
    8 * ((unsigned int)BYTE2(v108) >> 3),
    8 * ((unsigned int)BYTE1(v108) >> 3),
    8 * ((unsigned int)(unsigned __int8)v108 >> 3));
  sub_49B310(*((_DWORD **)dword_563908 + 1517), &Dest, 0, *((_DWORD **)v1 + 7), 12, v147 + 4, 3, 0);
  sprintf(
    &Dest,
    "H=%d S=%d V=%d",
    (signed int)(240.0 * v1[8] / 360.0),
    (signed int)(v1[9] * 240.0),
    (signed int)(v1[10] * 240.0));
  v109 = v150;
  sub_49B310(*((_DWORD **)dword_563908 + 1517), &Dest, 0, *((_DWORD **)v1 + 7), 12, v150 + v147 + 4, 3, 0);
  if ( *(_DWORD *)(*((_DWORD *)v1 + 7) + 4) >= 800 )
  {
    v110 = sub_48DB20(v1[11], v1[12], v1[13]);
    sprintf(
      &Dest,
      "R=%d G=%d B=%d",
      8 * ((unsigned int)BYTE2(v110) >> 3),
      8 * ((unsigned int)BYTE1(v110) >> 3),
      8 * ((unsigned int)(unsigned __int8)v110 >> 3));
    sub_49B4F0(*((_DWORD **)dword_563908 + 1517), &Dest, 0, *((_DWORD **)v1 + 7), v149, v147 + 4, 3, 0);
    sprintf(
      &Dest,
      "H=%d S=%d V=%d",
      (signed int)(240.0 * v1[11] / 360.0),
      (signed int)(v1[12] * 240.0),
      (signed int)(v1[13] * 240.0));
    sub_49B4F0(*((_DWORD **)dword_563908 + 1517), &Dest, 0, *((_DWORD **)v1 + 7), v149, v109 + v147 + 4, 3, 0);
  }
  v111 = *((_DWORD *)v1 + 9);
  v112 = v107 + 2 * v109 + 8;
  if ( v111 == 10 )
    v113 = *((_WORD *)dword_563908 + 15404);
  else
    v113 = *((_WORD *)dword_563908 + 15402);
  if ( v111 == 10 )
    v114 = *((_WORD *)dword_563908 + 15403);
  else
    v114 = *((_WORD *)dword_563908 + 15401);
  sub_4011E0(
    *((_DWORD *)v1 + 7),
    "Refresh Banner List",
    *((signed __int16 *)dword_563908 + 15400),
    v114,
    v113,
    12,
    v112);
  sub_401F32(
    &v153,
    &v160,
    &Source,
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v115 = **((_DWORD **)v1 + 7);
  v152 = v112 + v160 + 4;
  (*(void (__stdcall **)(_DWORD, _DWORD))(v115 + 92))(0, 0);
  v116 = 0;
  v117 = (*((_DWORD *)v1 + 5) - *((_DWORD *)v1 + 3) - 32) / 19;
  v47 = *((_DWORD *)v1 + 255) == 0;
  v43 = *((_DWORD *)v1 + 255) < 0;
  v151 = (*((_DWORD *)v1 + 5) - *((_DWORD *)v1 + 3) - 32) / 19;
  v148 = 0;
  if ( !v43 && !v47 )
  {
    v149 = (int)(v1 + 128);
    while ( 1 )
    {
      v120 = v116;
      v118 = v116 / v117;
      v119 = v120 % v117;
      v121 = *((_DWORD *)v1 + 7);
      LODWORD(v161) = 19 * v119 + 16;
      v162 = 19 * v119 + 36;
      HIDWORD(v161) = v152 + 13 * v118;
      v163 = HIDWORD(v161) + 14;
      (*(void (__stdcall **)(_DWORD, double *, signed int))(*(_DWORD *)v121 + 56))(
        *((unsigned __int16 *)dword_563908 + 92),
        &v161,
        1);
      v122 = (unsigned __int16 *)v149;
      v123 = 0;
      do
      {
        v124 = 0;
        v150 = (int)v122;
        do
        {
          (*(void (__stdcall **)(int, int, _DWORD))(**((_DWORD **)v1 + 7) + 24))(
            LODWORD(v161) + v123 + 1,
            v124++ + HIDWORD(v161) + 1,
            *v122);
          v122 = (unsigned __int16 *)(v150 + 2);
          v150 += 2;
        }
        while ( v124 < 12 );
        ++v123;
      }
      while ( v123 < 18 );
      v149 += 496;
      v116 = v148 + 1;
      v44 = __OFSUB__(v148 + 1, *((_DWORD *)v1 + 255));
      v43 = v148++ + 1 - *((_DWORD *)v1 + 255) < 0;
      if ( !(v43 ^ v44) )
        break;
      v117 = v151;
    }
  }
  (*(void (**)(void))(**((_DWORD **)v1 + 7) + 96))();
  v125 = *((_DWORD *)v1 + 3) + *((_DWORD *)v1 + 5);
  v151 = 18;
  v126 = (signed int)((unsigned __int64)(954437177i64 * *((signed int *)v1 + 14)) >> 32) >> 2;
  LODWORD(v161) = v125 / 2;
  v152 = v125 / 2;
  v154 = v125 / 2;
  v127 = v126 + (v126 >> 31);
  v150 = v125 / 2 + 96;
  v128 = (int)(v1 + 19);
  do
  {
    v149 = 0;
    v129 = 78;
    v148 = v128;
    do
    {
      v157 = v129;
      v130 = v127 + v129;
      v156 = v154;
      v164 = v130;
      v159 = v130;
      v131 = *(_DWORD *)v148;
      v158 = v127 + v154;
      v132 = BYTE1(v131) | (unsigned __int16)(32 * (BYTE2(v131) & 0xF8));
      v133 = (unsigned __int8)v131 >> 3;
      if ( dword_576828 == 2 )
        v134 = v132 & 0xFFF8;
      else
        v134 = 2 * (v132 & 0xFFFC);
      v135 = v133 | 4 * v134;
      v136 = *(void (__stdcall **)(_DWORD, int *))(**((_DWORD **)v1 + 7) + 40);
      v137 = v135;
      v155 = v135;
      v136(v135, &v156);
      (*(void (__stdcall **)(_DWORD, int *, signed int))(**((_DWORD **)v1 + 7) + 56))(
        *((unsigned __int16 *)dword_563908 + 92),
        &v156,
        1);
      v138 = *((_DWORD *)v1 + 7);
      if ( v137 )
      {
        v156 = v152;
        v158 = v152 + 4;
        v157 = 12 * v127 + 4 * v149 + 90;
        v159 = 12 * v127 + 4 * v149 + 94;
        (*(void (__stdcall **)(int, int *))(*(_DWORD *)v138 + 40))(v155, &v156);
        (*(void (__stdcall **)(int, int, int))(**((_DWORD **)v1 + 7) + 24))(v150, v149 + 12 * v127 + 90, v155);
      }
      else
      {
        (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v138 + 24))(
          (v156 + v158) / 2,
          (v157 + v159) / 2,
          *((unsigned __int16 *)dword_563908 + 86));
      }
      v148 += 4;
      v129 = v164;
      v44 = __OFSUB__(v149 + 1, 12);
      v43 = v149++ - 11 < 0;
    }
    while ( v43 ^ v44 );
    v154 += v127;
    v152 += 4;
    v128 = v148;
    ++v150;
    --v151;
  }
  while ( v151 );
  v139 = LODWORD(v161);
  v140 = *((_DWORD *)v1 + 7);
  HIDWORD(v144) = LODWORD(v161) - 1;
  v146 = LODWORD(v161) - 1 + 74;
  v141 = 12 * v127 + 89;
  v145 = v141;
  v147 = v141 + 50;
  (*(void (__stdcall **)(_DWORD, char *, signed int))(*(_DWORD *)v140 + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  v142 = *((_DWORD *)v1 + 7);
  HIDWORD(v144) = v139 + 95;
  v146 = v139 + 115;
  v145 = v141;
  v147 = v141 + 14;
  (*(void (__stdcall **)(_DWORD, char *, signed int))(*(_DWORD *)v142 + 56))(
    *((unsigned __int16 *)dword_563908 + 82),
    (char *)&v144 + 4,
    1);
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int, signed int))(**((_DWORD **)v1 + 7) + 68))(
           *((_DWORD *)v1 + 7),
           0,
           0,
           -1,
           -1);
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401BE0: using guessed type _DWORD __stdcall sub_401BE0(_DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (0040BFB0) --------------------------------------------------------
int __thiscall sub_40BFB0(char *this, int a2, int a3)
{
  char *v3; // esi
  int result; // eax
  _DWORD *v5; // eax
  int v6; // ecx

  v3 = this;
  result = GetKeyState(16) & 0x8000;
  if ( !result && a2 == 27 )
  {
    if ( *((_DWORD *)v3 + 14) )
    {
      v5 = dword_563908;
      if ( *((_DWORD *)dword_563908 + 355) )
      {
        v6 = *((_DWORD *)dword_563908 + 355);
        if ( v6 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 36))(1);
          v5 = dword_563908;
        }
        v5[355] = 0;
      }
      if ( operator new(0x1644u) )
      {
        result = sub_402504(
                   0,
                   *((_DWORD *)dword_563908 + 1518),
                   v3 - 4,
                   "Save changes to banner?",
                   "Yes,No,Cancel",
                   4,
                   0,
                   0,
                   0);
        *((_DWORD *)dword_563908 + 355) = result;
      }
      else
      {
        result = 0;
        *((_DWORD *)dword_563908 + 355) = 0;
      }
    }
    else
    {
      result = (**((int (__thiscall ***)(int, signed int, _DWORD, signed int))v3 - 1))((int)(v3 - 4), 4, 0, 1);
    }
  }
  return result;
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040C130) --------------------------------------------------------
int __thiscall sub_40C130(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int result; // eax

  v5 = this;
  (*(void (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  v6 = v5[11] + a5;
  result = v6 / 120;
  v5[11] = v6 % 120;
  return result;
}

//----- (0040C190) --------------------------------------------------------
__int16 __thiscall sub_40C190(int this, __int64 a2, char a3)
{
  int v3; // esi
  _DWORD *v4; // ebx
  int v5; // ST64_4
  _DWORD *v6; // edi
  int v7; // eax
  int v8; // eax
  double v9; // st7
  int v10; // ecx
  int v11; // edi
  int v12; // ebx
  double v14; // [esp+18h] [ebp-50h]
  double v15; // [esp+20h] [ebp-48h]

  v3 = this;
  v4 = (_DWORD *)(this + 40);
  v5 = *(_DWORD *)(this + 32);
  v6 = (_DWORD *)(this + 36);
  v7 = (*(int (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(this + 28) + 4))(
         a2,
         HIDWORD(a2),
         this + 36,
         this + 40);
  *(_DWORD *)(v3 + 32) = v7;
  if ( v5 != v7 && (v7 == 7 || v7 == 6 || v7 == 5 || v7 == 9 || v7 == 10) )
    sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  LOWORD(v8) = 4;
  if ( *(_DWORD *)(v3 + 32) == 4 && !(a3 & 4) )
  {
    if ( GetKeyState(1) < 0 )
    {
      v15 = *(double *)(v3 + 76);
      v14 = *(double *)(v3 + 68);
      v9 = *(double *)(v3 + 60);
LABEL_14:
      v10 = *(_DWORD *)(v3 + 52) / 18;
      v11 = *v6 / v10;
      v12 = *v4 / v10;
      v8 = sub_48DB20(v9, v14, v15);
      *(_DWORD *)(v3 + 4 * (v12 + 12 * v11) + 148) = v8;
      *(_DWORD *)(v3 + 56) = 1;
      return v8;
    }
    LOWORD(v8) = GetKeyState(2);
    if ( (v8 & 0x8000u) != 0 )
    {
      v15 = *(double *)(v3 + 100);
      v14 = *(double *)(v3 + 92);
      v9 = *(double *)(v3 + 84);
      goto LABEL_14;
    }
  }
  return v8;
}

//----- (0040C2F0) --------------------------------------------------------
signed int __thiscall sub_40C2F0(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v3; // eax
  int v4; // ecx
  int v5; // eax

  v1 = this;
  if ( !this[15] )
    return 1;
  v3 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 355) )
  {
    v4 = *((_DWORD *)dword_563908 + 355);
    if ( v4 )
    {
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v4 + 36))(1);
      v3 = dword_563908;
    }
    v3[355] = 0;
  }
  if ( operator new(0x1644u) )
    v5 = sub_402504(0, *((_DWORD *)dword_563908 + 1518), v1, "Save changes to banner?", "Yes,No,Cancel", 4, 0, 0, 0);
  else
    v5 = 0;
  *((_DWORD *)dword_563908 + 355) = v5;
  return 0;
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040C400) --------------------------------------------------------
int __thiscall sub_40C400(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (0040C410) --------------------------------------------------------
int __thiscall sub_40C410(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (0040C450) --------------------------------------------------------
unsigned __int16 **__thiscall sub_40C450(_DWORD *this, unsigned __int16 *a2)
{
  unsigned __int16 *v2; // edx
  _DWORD *v3; // esi
  unsigned __int16 **result; // eax
  signed int v5; // ebp
  unsigned int v6; // ecx
  unsigned int v7; // ecx
  unsigned int v8; // ecx
  unsigned int v9; // ecx
  unsigned int v10; // ecx
  unsigned int v11; // ecx
  signed int v12; // [esp+10h] [ebp-4h]

  v2 = a2;
  v3 = this;
  result = (unsigned __int16 **)(this + 39);
  v12 = 18;
  do
  {
    v5 = 2;
    do
    {
      v3[15] = 1;
      v6 = *v2;
      BYTE2(a2) = BYTE1(v6) & 0xF8;
      BYTE1(a2) = 4 * (v6 >> 5);
      LOBYTE(a2) = 8 * v6;
      *(result - 1) = a2;
      v3[15] = 1;
      v7 = v2[1];
      BYTE2(a2) = BYTE1(v7) & 0xF8;
      BYTE1(a2) = 4 * (v7 >> 5);
      LOBYTE(a2) = 8 * v7;
      *result = a2;
      v3[15] = 1;
      v8 = v2[2];
      BYTE2(a2) = BYTE1(v8) & 0xF8;
      BYTE1(a2) = 4 * (v8 >> 5);
      LOBYTE(a2) = 8 * v8;
      result[1] = a2;
      v3[15] = 1;
      v9 = v2[3];
      BYTE2(a2) = BYTE1(v9) & 0xF8;
      BYTE1(a2) = 4 * (v9 >> 5);
      LOBYTE(a2) = 8 * v9;
      result[2] = a2;
      v3[15] = 1;
      v10 = v2[4];
      BYTE2(a2) = BYTE1(v10) & 0xF8;
      BYTE1(a2) = 4 * (v10 >> 5);
      LOBYTE(a2) = 8 * v10;
      result[3] = a2;
      v3[15] = 1;
      v11 = v2[5];
      BYTE2(a2) = BYTE1(v11) & 0xF8;
      BYTE1(a2) = 4 * (v11 >> 5);
      LOBYTE(a2) = 8 * v11;
      result[4] = a2;
      result += 6;
      v2 += 6;
      --v5;
    }
    while ( v5 );
    --v12;
  }
  while ( v12 );
  return result;
}

//----- (0040C600) --------------------------------------------------------
HANDLE __thiscall sub_40C600(_DWORD *this)
{
  _DWORD *v1; // ebp
  HANDLE result; // eax
  void *v3; // ebx
  FILE *v4; // eax
  FILE *v5; // edi
  char *v6; // esi
  signed int v7; // esi
  unsigned __int8 v8; // bl
  unsigned __int8 v9; // ST35_1
  unsigned __int8 v10; // bl
  __int16 v11; // ax
  __int16 v12; // ax
  int v13; // ecx
  signed int v14; // esi
  signed int v15; // [esp+8h] [ebp-188h]
  HANDLE v16; // [esp+10h] [ebp-180h]
  __int16 DstBuf; // [esp+14h] [ebp-17Ch]
  char v18; // [esp+24h] [ebp-16Ch]
  int v19; // [esp+28h] [ebp-168h]
  int v20; // [esp+2Ch] [ebp-164h]
  __int16 v21; // [esp+32h] [ebp-15Eh]
  int v22; // [esp+34h] [ebp-15Ch]
  struct _WIN32_FIND_DATAA FindFileData; // [esp+4Ch] [ebp-144h]

  v1 = this;
  this[255] = 0;
  result = FindFirstFileA("*.bmp", &FindFileData);
  v3 = result;
  v16 = result;
  if ( result != (HANDLE)-1 )
  {
    do
    {
      v4 = fopen(FindFileData.cFileName, "rb");
      v5 = v4;
      if ( v4 )
      {
        fread(&DstBuf, 1u, 0xEu, v4);
        fread(&v18, 1u, 0x28u, v5);
        if ( DstBuf == 19778 && v21 == 24 && !v22 )
        {
          v6 = (char *)&v1[124 * v1[255] + 364];
          strncpy(v6, FindFileData.cFileName, 0x40u);
          v6[63] = 0;
          if ( v19 == 18 && v20 == 12 )
          {
            v15 = 11;
            do
            {
              v7 = 0;
              do
              {
                v8 = sub_4C2E5B(v5);
                v9 = sub_4C2E5B(v5);
                v10 = v8 >> 3;
                v11 = v9 | (unsigned __int16)(32 * (sub_4C2E5B(v5) & 0xF8));
                if ( dword_576828 == 2 )
                  v12 = v11 & 0xFFF8;
                else
                  v12 = 2 * (v11 & 0xFFFC);
                v13 = v15 + v7 + 248 * v1[255];
                v7 += 12;
                *((_WORD *)v1 + v13 + 512) = v10 | (unsigned __int16)(4 * v12);
              }
              while ( v7 < 216 );
              v14 = 2;
              do
              {
                sub_4C2E5B(v5);
                --v14;
              }
              while ( v14 );
              --v15;
            }
            while ( v15 >= 0 );
            ++v1[255];
            v3 = v16;
          }
        }
        fclose(v5);
      }
    }
    while ( v1[255] < 500 && FindNextFileA(v3, &FindFileData) );
    result = (HANDLE)FindClose(v3);
  }
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (0040C860) --------------------------------------------------------
int __thiscall sub_40C860(_DWORD *this, int a2, int a3, _BYTE *a4)
{
  int result; // eax
  _DWORD *v5; // ebx
  int v6; // ecx
  char *v7; // esi
  _DWORD *v8; // edx
  signed int v9; // ebp
  signed int v10; // edi
  char v11; // cl
  char *v12; // eax
  char v13; // cl
  FILE *v14; // eax
  FILE *v15; // edi
  int v16; // ebx
  unsigned __int8 *v17; // esi
  signed int v18; // ebp
  signed int v19; // esi
  int v20; // ecx
  char v21; // cl
  char *v22; // eax
  char v23; // cl
  FILE *v24; // eax
  FILE *v25; // edi
  int v26; // ebx
  _BYTE *v27; // esi
  signed int v28; // ebp
  signed int v29; // esi
  int v30; // ecx
  int v31; // ecx
  int *v32; // ecx
  unsigned __int16 *v33; // esi
  signed int v34; // edi
  unsigned int v35; // eax
  unsigned int v36; // edx
  char *v37; // esi
  int *v38; // ecx
  signed int v39; // edi
  int v40; // eax
  int v41; // ecx
  int v42; // ecx
  int v43; // esi
  void *v44; // ST38_4
  int v45; // ST1C_4
  const char *v46; // [esp-8h] [ebp-61Ch]
  int v47; // [esp+14h] [ebp-600h]
  signed int v48; // [esp+14h] [ebp-600h]
  signed int v49; // [esp+14h] [ebp-600h]
  signed int v50; // [esp+18h] [ebp-5FCh]
  signed int v51; // [esp+18h] [ebp-5FCh]
  __int16 Str; // [esp+1Ch] [ebp-5F8h]
  int v53; // [esp+1Eh] [ebp-5F6h]
  __int16 v54; // [esp+22h] [ebp-5F2h]
  __int16 v55; // [esp+24h] [ebp-5F0h]
  int v56; // [esp+26h] [ebp-5EEh]
  int DstBuf; // [esp+2Ch] [ebp-5E8h]
  int v58; // [esp+30h] [ebp-5E4h]
  int v59; // [esp+34h] [ebp-5E0h]
  __int16 v60; // [esp+38h] [ebp-5DCh]
  __int16 v61; // [esp+3Ah] [ebp-5DAh]
  int v62; // [esp+3Ch] [ebp-5D8h]
  int v63; // [esp+40h] [ebp-5D4h]
  int v64; // [esp+44h] [ebp-5D0h]
  int v65; // [esp+48h] [ebp-5CCh]
  int v66; // [esp+4Ch] [ebp-5C8h]
  int v67; // [esp+50h] [ebp-5C4h]
  char Filename[512]; // [esp+54h] [ebp-5C0h]
  char v69; // [esp+254h] [ebp-3C0h]
  char v70; // [esp+403h] [ebp-211h]
  char v71[512]; // [esp+404h] [ebp-210h]
  int v72; // [esp+610h] [ebp-4h]

  result = a2 - 4;
  v5 = this;
  switch ( a2 )
  {
    case 4:
      result = (int)a4;
      if ( (unsigned int)a4 <= 1 )
      {
        if ( !a4 && *((_DWORD *)dword_563908 + 6897) )
        {
          v37 = &v69;
          v38 = this + 38;
          v51 = 18;
          do
          {
            v39 = 12;
            do
            {
              v40 = *v38;
              *(_WORD *)v37 = ((unsigned __int8)*v38 >> 3) | 8
                                                           * ((BYTE1(v40) | (unsigned __int16)(32
                                                                                             * (((unsigned int)*v38 >> 16) & 0xF8))) & 0xFFFC);
              v37 += 2;
              ++v38;
              --v39;
            }
            while ( v39 );
            --v51;
          }
          while ( v51 );
          (*(void (__stdcall **)(char *))(*(_DWORD *)dword_56391C + 136))(&v69);
          v41 = *((_DWORD *)dword_563908 + 6897);
          sub_4020F9(&v69);
          v42 = *((_DWORD *)dword_563918 + 2131);
          sub_40139D(&v69);
        }
        v43 = 0;
        if ( v5[2] >= 0 )
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          v44 = operator new(0x2Cu);
          v72 = 0;
          if ( v44 )
            v43 = sub_401591(*((_DWORD *)dword_563908 + 89), v5 + 3);
          v45 = v5[2];
          v72 = -1;
          sub_401154(v45);
          *((_DWORD *)dword_563908 + 1535) = v43;
          result = (*(int (__thiscall **)(_DWORD *, signed int))(*v5 + 4))(v5, 1);
        }
        else
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          result = (*(int (__thiscall **)(_DWORD *, signed int))(*v5 + 4))(v5, 1);
        }
      }
      break;
    case 6:
      result = (int)a4;
      if ( a4 && *a4 )
      {
        do
        {
          v11 = *(_BYTE *)result;
          *(_BYTE *)(Filename - a4 + result) = *(_BYTE *)result;
          ++result;
        }
        while ( v11 );
        if ( !sub_48D1A0(Filename, ".bmp") )
        {
          v12 = (char *)&v67 + 3;
          do
            v13 = (v12++)[1];
          while ( v13 );
          strcpy(v12, ".bmp");
        }
        v14 = fopen(Filename, "wb");
        v15 = v14;
        if ( !v14 )
        {
          v46 = "Could not open specified file for writing.";
          goto LABEL_25;
        }
        Str = 19778;
        v54 = 0;
        v55 = 0;
        v56 = 54;
        v53 = 726;
        DstBuf = 40;
        v58 = 18;
        v59 = 12;
        v60 = 1;
        v61 = 24;
        v62 = 0;
        v63 = 672;
        v64 = 300;
        v65 = 300;
        v66 = 0;
        v67 = 0;
        fwrite(&Str, 1u, 0xEu, v14);
        fwrite(&DstBuf, 1u, 0x28u, v15);
        v48 = 11;
        v16 = (int)v5 + 197;
        do
        {
          v17 = (unsigned __int8 *)v16;
          v18 = 18;
          do
          {
            sub_4C30E3(*(v17 - 1), v15);
            sub_4C30E3(*v17, v15);
            sub_4C30E3(v17[1], v15);
            v17 += 48;
            --v18;
          }
          while ( v18 );
          v19 = 2;
          do
          {
            sub_4C30E3(0, v15);
            --v19;
          }
          while ( v19 );
          v16 -= 4;
          --v48;
        }
        while ( v48 >= 0 );
        result = fclose(v15);
      }
      break;
    case 7:
      result = (int)a4;
      if ( a4 && *a4 )
      {
        do
        {
          v21 = *(_BYTE *)result;
          *(_BYTE *)(v71 - a4 + result) = *(_BYTE *)result;
          ++result;
        }
        while ( v21 );
        if ( !sub_48D1A0(v71, ".bmp") )
        {
          v22 = &v70;
          do
            v23 = (v22++)[1];
          while ( v23 );
          strcpy(v22, ".bmp");
        }
        v24 = fopen(v71, "rb");
        v25 = v24;
        if ( v24 )
        {
          fread(&Str, 1u, 0xEu, v24);
          fread(&DstBuf, 1u, 0x28u, v25);
          if ( Str != 19778 || v61 != 24 || v62 )
          {
            v31 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B(
              "Specified file was not a valid import format.  File must be an uncompressed 24-bit .bmp file.",
              -1);
            result = fclose(v25);
          }
          else if ( v58 != 18 || v59 != 12 )
          {
            sprintf(Filename, "Specified file was not the correct size.  Image must be %d x %d pixels in size.", 18, 12);
            v30 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B(Filename, -1);
            result = fclose(v25);
          }
          else
          {
            v5[15] = 1;
            v49 = 11;
            v26 = (int)v5 + 197;
            do
            {
              v27 = (_BYTE *)v26;
              v28 = 18;
              do
              {
                *(v27 - 1) = sub_4C2E5B(v25);
                *v27 = sub_4C2E5B(v25);
                v27[1] = sub_4C2E5B(v25);
                v27 += 48;
                --v28;
              }
              while ( v28 );
              v29 = 2;
              do
              {
                sub_4C2E5B(v25);
                --v29;
              }
              while ( v29 );
              v26 -= 4;
              --v49;
            }
            while ( v49 >= 0 );
            result = fclose(v25);
          }
        }
        else
        {
          v46 = "Could not open specified file.";
LABEL_25:
          v20 = *((_DWORD *)dword_563908 + 1509);
          result = sub_40244B(v46, -1);
        }
      }
      break;
    case 9:
      if ( !a4 )
      {
        v6 = *((_DWORD *)dword_563908 + 1504);
        result = sub_40105A(a3);
        if ( result )
        {
          v7 = Filename;
          v8 = v5 + 38;
          v9 = 18;
          do
          {
            v10 = 12;
            do
            {
              *(_WORD *)v7 = ((unsigned __int8)*v8 >> 3) | 8
                                                         * (((unsigned __int8)(*(_WORD *)v8 >> 8) | (unsigned __int16)(32 * ((*v8 >> 16) & 0xF8))) & 0xFFFC);
              v7 += 2;
              ++v8;
              --v10;
            }
            while ( v10 );
            --v9;
          }
          while ( v9 );
          result = (*(int (__stdcall **)(_DWORD, char *))(*(_DWORD *)dword_56391C + 140))(
                     *(signed __int16 *)(result + 96),
                     Filename);
        }
      }
      break;
    case 11:
      if ( !a4 )
      {
        v32 = this + 38;
        v33 = (unsigned __int16 *)&v5[124 * a3 + 256];
        v50 = 18;
        do
        {
          v34 = 12;
          do
          {
            v35 = *v33;
            if ( dword_576828 == 2 )
            {
              BYTE2(v47) = (v35 >> 7) & 0xF8;
              LOBYTE(v36) = 2 * (v35 >> 5);
            }
            else
            {
              BYTE2(v47) = BYTE1(v35) & 0xF8;
              v36 = v35 >> 5;
            }
            LOBYTE(v47) = 8 * v35;
            BYTE1(v47) = 4 * v36;
            result = v47;
            *v32 = v47;
            ++v33;
            ++v32;
            --v34;
            v5[15] = 1;
          }
          while ( v34 );
          --v50;
        }
        while ( v50 );
      }
      break;
    default:
      return result;
  }
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 40139D: using guessed type _DWORD __stdcall sub_40139D(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 4020F9: using guessed type _DWORD __stdcall sub_4020F9(_DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;
// 576828: using guessed type int dword_576828;
// 40C860: using guessed type char Filename[512];
// 40C860: using guessed type char var_210[512];

//----- (0040D120) --------------------------------------------------------
void *__thiscall sub_40D120(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_402914();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 402914: using guessed type int sub_402914(void);

//----- (0040D170) --------------------------------------------------------
void *__thiscall sub_40D170(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4027A2(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0040D1A0) --------------------------------------------------------
void __thiscall sub_40D1A0(char *this, int a2, __int64 a3, int a4)
{
  char *v4; // esi
  int v5; // eax
  int v6; // eax
  double *v7; // edi
  double *v8; // ecx
  double *v9; // edx
  int v10; // ecx
  int v11; // edi
  int v12; // ebx
  int v13; // eax
  double v14; // st7
  double v15; // st6
  double v16; // st6
  double v17; // st7
  double v18; // st7
  int v19; // edi
  int v20; // ecx
  _DWORD *v21; // eax
  int v22; // ecx
  void *v23; // ST5C_4
  _DWORD *v24; // eax
  int v25; // ecx
  signed int v26; // edi
  _DWORD *v27; // eax
  int v28; // ecx
  void *v29; // ST5C_4
  _DWORD *v30; // eax
  int v31; // ecx
  _DWORD *v32; // eax
  int v33; // ecx
  int v34; // ecx
  double v35; // st7
  double v36; // st6
  double v37; // st6
  double v38; // st7
  double v39; // st7
  double v40; // st7
  char Dest; // [esp+60h] [ebp-248h]
  char v42; // [esp+160h] [ebp-148h]
  int v43; // [esp+2A4h] [ebp-4h]

  v4 = this;
  (*(void (__thiscall **)(char *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, a2, a3, HIDWORD(a3));
  v5 = *((_DWORD *)v4 + 8);
  if ( v5 && v5 >= 0 )
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  if ( a4 )
  {
    if ( a4 == 1 )
    {
      switch ( *((_DWORD *)v4 + 8) )
      {
        case 1:
          v35 = (double)*((signed int *)v4 + 12);
          v36 = (double)(*((_DWORD *)v4 + 9) - 1) * 360.0 / v35;
          *(double *)(v4 + 84) = v36;
          if ( v36 > 359.999 )
            *(double *)(v4 + 84) = 359.999;
          if ( *(double *)(v4 + 84) < 0.0 )
            *(double *)(v4 + 84) = 0.0;
          v37 = (double)(*((_DWORD *)v4 + 10) - 1) / v35;
          *(double *)(v4 + 92) = v37;
          if ( v37 > 1.0 )
            *(double *)(v4 + 92) = 1.0;
          if ( *(double *)(v4 + 92) < 0.0 )
            *(double *)(v4 + 92) = 0.0;
          if ( 0.0 == *(double *)(v4 + 100) )
          {
            v38 = 0.7;
            goto LABEL_87;
          }
          break;
        case 2:
          v17 = (double)(*((_DWORD *)v4 + 10) - 1);
LABEL_89:
          v39 = v17 / (double)*((signed int *)v4 + 12);
          *(double *)(v4 + 76) = v39;
          if ( v39 > 1.0 )
            *(double *)(v4 + 76) = 1.0;
          if ( *(double *)(v4 + 76) < 0.0 )
            *(double *)(v4 + 76) = 0.0;
          break;
        case 3:
          v40 = (double)(*((_DWORD *)v4 + 10) - 1) / (double)*((signed int *)v4 + 12);
          *(double *)(v4 + 100) = v40;
          if ( v40 > 1.0 )
            *(double *)(v4 + 100) = 1.0;
          v38 = 0.0;
          if ( *(double *)(v4 + 100) < 0.0 )
LABEL_87:
            *(double *)(v4 + 100) = v38;
          break;
        case 4:
          v34 = *((_DWORD *)v4 + 13) / 18;
          v11 = *((_DWORD *)v4 + 9) / v34;
          v12 = *((_DWORD *)v4 + 10) / v34;
          if ( a3 & 0x400000000i64 )
          {
            sub_48DA00(
              *(_DWORD *)&v4[4 * (v12 + 12 * v11) + 148],
              (double *)(v4 + 84),
              (double *)(v4 + 92),
              (double *)(v4 + 100));
            if ( *(double *)(v4 + 84) < 0.0 )
              *(double *)(v4 + 84) = 0.0;
          }
          else
          {
            v13 = sub_48DB20(*(double *)(v4 + 84), *(double *)(v4 + 92), *(double *)(v4 + 100));
LABEL_76:
            *(_DWORD *)&v4[4 * (v12 + 12 * v11) + 148] = v13;
            *((_DWORD *)v4 + 14) = 1;
          }
          break;
        case 8:
          v6 = *((_DWORD *)v4 + 9) / ((*((_DWORD *)v4 + 12) + 70) / 10);
          if ( v6 > 9 )
            v6 = 9;
          v7 = (double *)(v4 + 84);
          v8 = (double *)(v4 + 100);
          v9 = (double *)(v4 + 92);
LABEL_70:
          sub_48DA00(*(_DWORD *)&v4[4 * v6 + 108], v7, v9, v8);
          if ( *v7 < 0.0 )
            *v7 = 0.0;
          break;
        default:
          return;
      }
    }
  }
  else
  {
    switch ( *((_DWORD *)v4 + 8) )
    {
      case 1:
        v14 = (double)*((signed int *)v4 + 12);
        v15 = (double)(*((_DWORD *)v4 + 9) - 1) * 360.0 / v14;
        *(double *)(v4 + 60) = v15;
        if ( v15 > 359.999 )
          *(double *)(v4 + 60) = 359.999;
        if ( *(double *)(v4 + 60) < 0.0 )
          *(double *)(v4 + 60) = 0.0;
        v16 = (double)(*((_DWORD *)v4 + 10) - 1) / v14;
        *(double *)(v4 + 68) = v16;
        if ( v16 > 1.0 )
          *(double *)(v4 + 68) = 1.0;
        if ( *(double *)(v4 + 68) < 0.0 )
          *(double *)(v4 + 68) = 0.0;
        if ( 0.0 == *(double *)(v4 + 76) )
          *(double *)(v4 + 76) = 0.7;
        return;
      case 2:
        v17 = (double)(*((_DWORD *)v4 + 10) - 1);
        goto LABEL_89;
      case 3:
        v18 = (double)(*((_DWORD *)v4 + 10) - 1) / (double)*((signed int *)v4 + 12);
        *(double *)(v4 + 100) = v18;
        if ( v18 > 1.0 )
          *(double *)(v4 + 100) = 1.0;
        if ( *(double *)(v4 + 100) < 0.0 )
          *(double *)(v4 + 100) = 0.0;
        return;
      case 4:
        v10 = *((_DWORD *)v4 + 13) / 18;
        v11 = *((_DWORD *)v4 + 9) / v10;
        v12 = *((_DWORD *)v4 + 10) / v10;
        if ( !(a3 & 0x400000000i64) )
        {
          v13 = sub_48DB20(*(double *)(v4 + 60), *(double *)(v4 + 68), *(double *)(v4 + 76));
          goto LABEL_76;
        }
        sub_48DA00(
          *(_DWORD *)&v4[4 * (v12 + 12 * v11) + 148],
          (double *)(v4 + 60),
          (double *)(v4 + 68),
          (double *)(v4 + 76));
        if ( *(double *)(v4 + 60) < 0.0 )
          *(double *)(v4 + 60) = 0.0;
        break;
      case 5:
        if ( *((_DWORD *)v4 + 14) )
        {
          v32 = dword_563908;
          if ( *((_DWORD *)dword_563908 + 355) )
          {
            v33 = *((_DWORD *)dword_563908 + 355);
            if ( v33 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v33 + 36))(1);
              v32 = dword_563908;
            }
            v32[355] = 0;
          }
          v43 = 4;
          if ( operator new(0x1644u) )
            *((_DWORD *)dword_563908 + 355) = sub_402504(
                                                0,
                                                *((_DWORD *)dword_563908 + 1518),
                                                v4 - 4,
                                                "Save changes to banner?",
                                                "Yes,No,Cancel",
                                                4,
                                                0,
                                                0,
                                                0);
          else
LABEL_63:
            *((_DWORD *)dword_563908 + 355) = 0;
        }
        else
        {
          (**((void (__thiscall ***)(int, signed int, _DWORD, signed int))v4 - 1))((int)(v4 - 4), 4, 0, 1);
        }
        return;
      case 6:
        v24 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v25 = *((_DWORD *)dword_563908 + 355);
          if ( v25 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v25 + 36))(1);
            v24 = dword_563908;
          }
          v24[355] = 0;
        }
        v43 = 1;
        if ( !operator new(0x420u) )
          goto LABEL_63;
        *((_DWORD *)dword_563908 + 355) = sub_4019E2(
                                            *((_DWORD *)dword_563908 + 1519),
                                            (int)"Export Filename (24bit.bmp)",
                                            (char *)&Source,
                                            0,
                                            0,
                                            (int)(v4 - 4),
                                            6,
                                            0);
        return;
      case 7:
        v30 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v31 = *((_DWORD *)dword_563908 + 355);
          if ( v31 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v31 + 36))(1);
            v30 = dword_563908;
          }
          v30[355] = 0;
        }
        v43 = 3;
        if ( !operator new(0x420u) )
          goto LABEL_63;
        *((_DWORD *)dword_563908 + 355) = sub_4019E2(
                                            *((_DWORD *)dword_563908 + 1519),
                                            (int)"Import Filename (24bit.bmp)",
                                            (char *)&Source,
                                            0,
                                            0,
                                            (int)(v4 - 4),
                                            7,
                                            0);
        return;
      case 8:
        v6 = *((_DWORD *)v4 + 9) / ((*((_DWORD *)v4 + 12) + 70) / 10);
        if ( v6 > 9 )
          v6 = 9;
        v7 = (double *)(v4 + 60);
        v8 = (double *)(v4 + 76);
        v9 = (double *)(v4 + 68);
        goto LABEL_70;
      case 9:
        v19 = sub_401686(*((_DWORD *)dword_563908 + 1500));
        if ( !v19 )
          return;
        v20 = *((_DWORD *)dword_563908 + 1509);
        sub_40244B(
          "Note: When sending banners to other players, they must be on the banner-edit screen to receive them.",
          -1);
        sprintf(&Dest, "Send banner to ticked player (%s)?", v19 + 32);
        v21 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v22 = *((_DWORD *)dword_563908 + 355);
          if ( v22 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v22 + 36))(1);
            v21 = dword_563908;
          }
          v21[355] = 0;
        }
        v23 = operator new(0x1644u);
        v43 = 0;
        if ( !v23 )
          goto LABEL_63;
        *((_DWORD *)dword_563908 + 355) = sub_402504(
                                            0,
                                            *((_DWORD *)dword_563908 + 1518),
                                            v4 - 4,
                                            &Dest,
                                            "Yes,No",
                                            9,
                                            *(signed __int16 *)(v19 + 96),
                                            0,
                                            0);
        return;
      case 0xA:
        sub_402338(v4 - 4);
        return;
      case 0xB:
        v26 = ((signed int)((unsigned __int64)(1808407283i64 * *((signed int *)v4 + 9)) >> 32) >> 3)
            + (*((_DWORD *)v4 + 4) - *((_DWORD *)v4 + 2) - 32) / 19 * (*((_DWORD *)v4 + 10) / 13)
            + ((unsigned int)((unsigned __int64)(1808407283i64 * *((signed int *)v4 + 9)) >> 32) >> 31);
        if ( v26 < *((_DWORD *)v4 + 254) )
        {
          v27 = dword_563908;
          if ( *((_DWORD *)dword_563908 + 355) )
          {
            v28 = *((_DWORD *)dword_563908 + 355);
            if ( v28 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v28 + 36))(1);
              v27 = dword_563908;
            }
            v27[355] = 0;
          }
          sprintf(&v42, "Load this banner into editor (%s)?", &v4[496 * v26 + 1452]);
          v29 = operator new(0x1644u);
          v43 = 2;
          if ( v29 )
            *((_DWORD *)dword_563908 + 355) = sub_402504(
                                                0,
                                                *((_DWORD *)dword_563908 + 1518),
                                                v4 - 4,
                                                &v42,
                                                "Yes,No",
                                                11,
                                                v26,
                                                0,
                                                0);
          else
            *((_DWORD *)dword_563908 + 355) = 0;
        }
        return;
      default:
        return;
    }
  }
}
// 401686: using guessed type int __thiscall sub_401686(_DWORD);
// 402338: using guessed type int __thiscall sub_402338(_DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040DC40) --------------------------------------------------------
_DWORD *__thiscall sub_40DC40(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi
  signed int v5; // eax
  _DWORD *v6; // esi
  signed int v7; // edx
  unsigned int v8; // ecx
  unsigned int v9; // ebx
  unsigned int v10; // ecx
  unsigned int v11; // ebx
  unsigned int v12; // ecx
  unsigned int v13; // ebx
  unsigned int v14; // ecx
  unsigned int v15; // ebx
  unsigned int v16; // ecx
  unsigned int v17; // ebx
  unsigned int v18; // ecx
  unsigned int v19; // ebx

  v4 = this;
  this[1] = &InputTarget::`vftable';
  *this = &off_51123C;
  this[1] = &off_51120C;
  this[2] = a4;
  this[7] = a2;
  this[8] = 0;
  this[254] = 0;
  this[12] = 0;
  this[15] = 0;
  memset(this + 38, 0, 0x360u);
  *((double *)v4 + 8) = 180.0;
  v4[255] = 0;
  *((double *)v4 + 9) = 0.6;
  *((double *)v4 + 10) = 0.7;
  *((double *)v4 + 11) = 240.0;
  *((double *)v4 + 12) = 0.3;
  *((double *)v4 + 13) = 0.7;
  if ( *((_DWORD *)dword_563908 + 6897) )
  {
    v5 = 154;
    v6 = v4 + 39;
    do
    {
      v7 = 2;
      do
      {
        v8 = *(unsigned __int16 *)(*((_DWORD *)dword_563908 + 6897) + v5 - 2);
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v8 >> 7) & 0xF8;
          LOBYTE(v9) = 2 * (v8 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v8) & 0xF8;
          v9 = v8 >> 5;
        }
        LOBYTE(a4) = 8 * v8;
        BYTE1(a4) = 4 * v9;
        *(v6 - 1) = a4;
        v10 = *(unsigned __int16 *)(v5 + *((_DWORD *)dword_563908 + 6897));
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v10 >> 7) & 0xF8;
          LOBYTE(v11) = 2 * (v10 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v10) & 0xF8;
          v11 = v10 >> 5;
        }
        LOBYTE(a4) = 8 * v10;
        BYTE1(a4) = 4 * v11;
        *v6 = a4;
        v12 = *(unsigned __int16 *)(*((_DWORD *)dword_563908 + 6897) + v5 + 2);
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v12 >> 7) & 0xF8;
          LOBYTE(v13) = 2 * (v12 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v12) & 0xF8;
          v13 = v12 >> 5;
        }
        LOBYTE(a4) = 8 * v12;
        BYTE1(a4) = 4 * v13;
        v6[1] = a4;
        v14 = *(unsigned __int16 *)(*((_DWORD *)dword_563908 + 6897) + v5 + 4);
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v14 >> 7) & 0xF8;
          LOBYTE(v15) = 2 * (v14 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v14) & 0xF8;
          v15 = v14 >> 5;
        }
        LOBYTE(a4) = 8 * v14;
        BYTE1(a4) = 4 * v15;
        v6[2] = a4;
        v16 = *(unsigned __int16 *)(*((_DWORD *)dword_563908 + 6897) + v5 + 6);
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v16 >> 7) & 0xF8;
          LOBYTE(v17) = 2 * (v16 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v16) & 0xF8;
          v17 = v16 >> 5;
        }
        LOBYTE(a4) = 8 * v16;
        BYTE1(a4) = 4 * v17;
        v6[3] = a4;
        v18 = *(unsigned __int16 *)(*((_DWORD *)dword_563908 + 6897) + v5 + 8);
        if ( dword_576828 == 2 )
        {
          BYTE2(a4) = (v18 >> 7) & 0xF8;
          LOBYTE(v19) = 2 * (v18 >> 5);
        }
        else
        {
          BYTE2(a4) = BYTE1(v18) & 0xF8;
          v19 = v18 >> 5;
        }
        LOBYTE(a4) = 8 * v18;
        BYTE1(a4) = 4 * v19;
        v6[4] = a4;
        v5 += 12;
        v6 += 6;
        --v7;
      }
      while ( v7 );
    }
    while ( v5 < 586 );
  }
  *((_BYTE *)v4 + 114) = 0;
  *((_BYTE *)v4 + 113) = 0;
  *((_BYTE *)v4 + 112) = 0;
  *((_BYTE *)v4 + 118) = -1;
  *((_BYTE *)v4 + 117) = -1;
  *((_BYTE *)v4 + 116) = -1;
  *((_BYTE *)v4 + 122) = -128;
  *((_BYTE *)v4 + 121) = -128;
  *((_BYTE *)v4 + 120) = -128;
  *((_BYTE *)v4 + 126) = 8;
  *((_BYTE *)v4 + 125) = 8;
  *((_BYTE *)v4 + 124) = 8;
  *((_BYTE *)v4 + 130) = -1;
  *((_BYTE *)v4 + 129) = 0;
  *((_BYTE *)v4 + 128) = 0;
  *((_BYTE *)v4 + 134) = 0;
  *((_BYTE *)v4 + 133) = -1;
  *((_BYTE *)v4 + 132) = 0;
  *((_BYTE *)v4 + 138) = 0;
  *((_BYTE *)v4 + 137) = 0;
  *((_BYTE *)v4 + 136) = -1;
  *((_BYTE *)v4 + 142) = 0;
  *((_BYTE *)v4 + 141) = -1;
  *((_BYTE *)v4 + 140) = -1;
  *((_BYTE *)v4 + 146) = -1;
  *((_BYTE *)v4 + 145) = -1;
  *((_BYTE *)v4 + 144) = 0;
  *((_BYTE *)v4 + 150) = -1;
  *((_BYTE *)v4 + 149) = 0;
  *((_BYTE *)v4 + 148) = -1;
  sub_401CD5(a3);
  return v4;
}
// 401CD5: using guessed type _DWORD __stdcall sub_401CD5(_DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 51120C: using guessed type int (__stdcall *off_51120C)(int, int, int, int);
// 51123C: using guessed type int (__stdcall *off_51123C)(int, int, int);
// 576828: using guessed type int dword_576828;

//----- (0040E0D0) --------------------------------------------------------
int __thiscall sub_40E0D0(signed __int16 *this, int a2, int a3, int a4)
{
  int v4; // esi
  int result; // eax

  v4 = a4;
  if ( a4 || (v4 = this[85]) != 0 )
    result = a2 * this[89] + this[89] * (a3 % v4) / v4;
  else
    result = a2 * this[89];
  return result;
}

//----- (0040E130) --------------------------------------------------------
int __cdecl sub_40E130(int a1)
{
  int result; // eax

  result = a1;
  if ( dword_53A7C4 )
    result = 7 * a1 / 10;
  return result;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0040E170) --------------------------------------------------------
int __cdecl sub_40E170(int a1)
{
  int result; // eax

  if ( dword_53A7C4 )
    result = 7 * a1 / 10;
  else
    result = 0;
  return result;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0040E1C0) --------------------------------------------------------
void *__thiscall sub_40E1C0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4A71E0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0040E200) --------------------------------------------------------
BOOL __thiscall sub_40E200(_DWORD *this, int a2)
{
  int v2; // edx
  int v3; // ebp
  int v4; // esi
  int v5; // edi
  int v6; // ebx
  int v7; // esi
  unsigned int v8; // edx
  int v9; // ebp
  int v10; // eax
  int v11; // ebx
  bool v12; // sf

  v2 = this[9];
  v3 = this[8];
  v4 = this[10];
  v5 = this[7];
  v6 = this[9];
  if ( v4 > 0 )
  {
    v7 = (100 - 100 * this[14] / v4) & ((100 - 100 * this[14] / v4 <= 0) - 1);
    v5 = v5 * v7 / 100;
    v8 = (signed int)((unsigned __int64)(1374389535i64 * v3 * v7) >> 32) >> 5;
    v3 = v8 + (v8 >> 31);
    v2 = this[9];
    v6 = v6 * v7 / 100;
  }
  this[14] += a2;
  v9 = a2 * v3;
  this[4] += a2 * v5;
  if ( dword_53A7C4 )
  {
    v10 = 7 * v9 / 10;
    v2 = this[9];
  }
  else
  {
    v10 = v9;
  }
  this[5] += v10;
  v11 = a2 * v6;
  v12 = v11 + this[6] < 0;
  this[6] += v11;
  if ( v12 )
  {
    this[6] = -this[6];
    this[9] = -v2;
  }
  return this[14] >= this[13];
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0040E320) --------------------------------------------------------
int __thiscall sub_40E320(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // edi
  int result; // eax
  int v6; // esi
  int v7; // ebx
  __int16 v8; // ST20_2
  int v9; // ST1C_4
  int v10; // ST18_4
  int v11; // eax

  v4 = this[4] / 10000 - a3;
  if ( dword_53A7C4 )
    result = 7 * (this[6] / 10000) / 10;
  else
    result = 0;
  v6 = this[5] / 10000 - a4 - result;
  if ( v4 >= -64 && v4 <= *(_DWORD *)(a2 + 4) && v6 >= -64 && v6 <= *(_DWORD *)(a2 + 8) )
  {
    v7 = this[3];
    v8 = result;
    v9 = this[16];
    v10 = this[15];
    v11 = sub_401B59(this[11], this[14], this[12]);
    result = sub_4A50B0(v7, v11, a2, v4, v6, v10, v9, v8, 0, 0);
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0040E410) --------------------------------------------------------
_DWORD *__thiscall sub_40E410(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14)
{
  _DWORD *result; // eax

  result = this;
  this[3] = a2;
  this[16] = a13;
  this[4] = a3;
  this[5] = a4;
  this[6] = a5;
  this[7] = a6;
  this[8] = a7;
  this[9] = a8;
  this[11] = a9;
  this[12] = a10;
  this[13] = a11;
  *this = &off_511680;
  this[14] = 0;
  this[15] = a12 | 0x100;
  this[10] = a14;
  return result;
}
// 511680: using guessed type int (__thiscall *off_511680)(void *Memory, char);

//----- (0040E4A0) --------------------------------------------------------
void *__thiscall sub_40E4A0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &off_511680;
  sub_4A71E0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 511680: using guessed type int (__thiscall *off_511680)(void *Memory, char);

//----- (0040E520) --------------------------------------------------------
int __thiscall sub_40E520(_DWORD *this)
{
  int result; // eax

  result = this[6898];
  if ( result )
    result = *(_DWORD *)(*(_DWORD *)(result + 72) + 1060);
  return result;
}

//----- (0040E580) --------------------------------------------------------
signed int sub_40E580()
{
  return 2;
}

//----- (0040E590) --------------------------------------------------------
int __thiscall sub_40E590(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // ebx
  _DWORD *v3; // edi
  int v4; // ST28_4
  int v5; // ST24_4
  int v6; // eax
  int v7; // edx
  __int16 v8; // bp
  __int16 v9; // dx
  int v10; // ST24_4
  int v11; // ST1C_4
  int v12; // ST18_4
  int v13; // eax
  int v14; // eax
  int v15; // ebx
  char *v16; // eax
  int v17; // ebp
  int v18; // ebx
  _DWORD *v19; // ST18_4
  char *v20; // eax
  int v21; // eax
  _DWORD *v22; // ecx
  int v23; // ebx
  int v24; // ebp
  int v25; // ebp
  int v26; // ebp
  int v27; // ebx
  int v28; // eax
  int v29; // ebp
  int v30; // ebx
  int v31; // ST20_4
  _DWORD *v32; // ST18_4
  char *v33; // eax
  int v34; // ecx
  int v35; // edx
  int v36; // eax
  int v37; // ecx
  int v38; // ebp
  int v39; // ecx
  int v40; // eax
  int v41; // edx
  int v42; // ecx
  int v43; // ecx
  int v44; // ecx
  void (__stdcall *v45)(int, int *); // edx
  int v46; // ST24_4
  int v47; // ecx
  int v48; // ecx
  int v49; // ecx
  int v50; // ebp
  int v51; // ST20_4
  _DWORD *v52; // ST18_4
  char *v53; // eax
  int v54; // eax
  int v55; // ecx
  int v56; // eax
  int v57; // ecx
  int v58; // eax
  __int16 v59; // dx
  __int16 v60; // ax
  _DWORD *v61; // ST18_4
  char *v62; // eax
  int v63; // ebp
  int v64; // ebx
  int v65; // ST3C_4
  int v66; // ST1C_4
  _DWORD *v67; // ST18_4
  char *v68; // eax
  int v69; // ST1C_4
  _DWORD *v70; // ST18_4
  char *v71; // eax
  int v72; // edx
  int v73; // edi
  _DWORD *v74; // eax
  int v75; // ebp
  int v76; // ecx
  int v77; // edx
  int v78; // ecx
  int v79; // eax
  int v80; // edi
  int v81; // edx
  int v82; // ecx
  int v83; // edi
  int v84; // ecx
  int v85; // ecx
  int v86; // ecx
  int v87; // ecx
  int v88; // ecx
  int v90; // [esp+3Ch] [ebp-37Ch]
  int v91; // [esp+3Ch] [ebp-37Ch]
  int v92; // [esp+3Ch] [ebp-37Ch]
  int v93; // [esp+40h] [ebp-378h]
  char *v94; // [esp+40h] [ebp-378h]
  int v95; // [esp+40h] [ebp-378h]
  int v96; // [esp+40h] [ebp-378h]
  int v97; // [esp+44h] [ebp-374h]
  _DWORD *v98; // [esp+44h] [ebp-374h]
  int v99; // [esp+48h] [ebp-370h]
  int v100; // [esp+48h] [ebp-370h]
  int v101; // [esp+4Ch] [ebp-36Ch]
  int v102; // [esp+4Ch] [ebp-36Ch]
  int v103; // [esp+50h] [ebp-368h]
  int v104; // [esp+50h] [ebp-368h]
  int *v105; // [esp+50h] [ebp-368h]
  int v106; // [esp+54h] [ebp-364h]
  int v107; // [esp+58h] [ebp-360h]
  int v108; // [esp+5Ch] [ebp-35Ch]
  int v109; // [esp+60h] [ebp-358h]
  int v110; // [esp+64h] [ebp-354h]
  int v111; // [esp+68h] [ebp-350h]
  int v112; // [esp+6Ch] [ebp-34Ch]
  int v113; // [esp+70h] [ebp-348h]
  int v114; // [esp+74h] [ebp-344h]
  int v115; // [esp+78h] [ebp-340h]
  int v116; // [esp+7Ch] [ebp-33Ch]
  int v117; // [esp+80h] [ebp-338h]
  int v118; // [esp+84h] [ebp-334h]
  int v119; // [esp+88h] [ebp-330h]
  int v120; // [esp+8Ch] [ebp-32Ch]
  char v121; // [esp+90h] [ebp-328h]
  char v122; // [esp+94h] [ebp-324h]
  char v123; // [esp+A4h] [ebp-314h]
  char Dest; // [esp+B4h] [ebp-304h]
  char v125; // [esp+1B4h] [ebp-204h]
  char v126; // [esp+2B4h] [ebp-104h]

  v1 = this;
  v2 = this + 3;
  sub_401BE0(this[7], this + 3);
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[7] + 64))(v1 + 3);
  (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v1[7] + 92))(0, 0);
  v3 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
  (*(void (**)(void))(*(_DWORD *)v1[1040] + 40))();
  (*(void (**)(void))(*(_DWORD *)v1[3348] + 40))();
  v4 = *((signed __int16 *)dword_563908 + 15401);
  v5 = *((signed __int16 *)dword_563908 + 15400);
  v6 = sub_402617(0x23u);
  sub_401F32(&v116, &v121, v6, v5, v4);
  v7 = v1[11];
  if ( v7 == 4 )
    v8 = *((_WORD *)dword_563908 + 15404);
  else
    v8 = *((_WORD *)dword_563908 + 15402);
  if ( v7 == 4 )
    v9 = *((_WORD *)dword_563908 + 15403);
  else
    v9 = *((_WORD *)dword_563908 + 15401);
  v10 = v1[5] - v116 - 12;
  v11 = v9;
  v12 = *((signed __int16 *)dword_563908 + 15400);
  v13 = sub_402617(0x23u);
  sub_4011E0(v1[7], v13, v12, v11, v8, v10, 11);
  v14 = *v2;
  v15 = v1[4];
  v110 = v14 + 12;
  v15 += 11;
  v16 = (char *)sub_402617(0x83u);
  v17 = sub_49AD40(v3, v16);
  v103 = sub_49AD40(v3, "0000000") + v17 + 40;
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v110, v15, v103);
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v103 + v110, v15, 28);
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v103 + v110 + 28, v15, 28);
  v93 = v103 + v110 + 60;
  sprintf(&Dest, "%d", *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 562));
  v18 = (*(signed __int16 *)(*((_DWORD *)dword_563908 + 511) + 174) - *(signed __int16 *)(v3[513] + 174)) / 2 + v15;
  v19 = (_DWORD *)v1[7];
  v20 = (char *)sub_402617(0x83u);
  v21 = sub_49B310(v3, v20, 2, v19, v110 + 16, v18, 3, 0);
  sub_49B310(v3, &Dest, 0, (_DWORD *)v1[7], v110 + 16 + v21 + 8, v18, 3, 0);
  v22 = dword_563908;
  if ( *(_DWORD *)((char *)dword_563908 + 53834) )
  {
    v23 = v1[4] + 11;
    sprintf(&v125, "%s:", (char *)dword_563908 + 53842);
    sub_495030(&v126, (int)dword_563908 + 27892, *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 562));
    v24 = sub_49AD40(v3, &v126);
    v25 = sub_49AD40(v3, &v125) + v24 + 40;
    sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v93, v23, v25);
    v26 = v93 + v25;
    sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v26, v23, 28);
    sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v26 + 28, v23, 28);
    v27 = (*(signed __int16 *)(*((_DWORD *)dword_563908 + 511) + 174) - *(signed __int16 *)(v3[513] + 174)) / 2 + v23;
    v28 = sub_49B310(v3, &v125, 2, (_DWORD *)v1[7], v103 + v110 + 76, v27, 3, 0);
    sub_49B310(v3, &v126, 0, (_DWORD *)v1[7], v103 + v110 + 76 + v28 + 8, v27, 3, 0);
    v22 = dword_563908;
  }
  v97 = abs(*(signed __int16 *)(*(_DWORD *)(v22[515] + 360) + 18));
  v29 = v1[4] + 40;
  v30 = v1[3] + 16;
  sub_40196F(v1[7], v22[515], v30, v29, v1[1041]);
  v31 = v29 + (v97 - *(signed __int16 *)(v3[513] + 174)) / 2;
  v32 = (_DWORD *)v1[7];
  v33 = (char *)sub_402617(0x69u);
  sub_49B310(v3, v33, 7, v32, v30 + 4, v31, 3, 0);
  v34 = v1[1039];
  v35 = v1[1036];
  v90 = *(signed __int16 *)(*(_DWORD *)(v1[9] + 2052) + 174);
  v36 = v1[1038];
  v110 = v97 + v29;
  v37 = v36 + v34;
  v38 = v97 + v29 + 4;
  v101 = v35;
  if ( v35 >= v37 )
    v101 = v37;
  v39 = v36;
  v99 = v36;
  if ( v36 < v101 )
  {
    v94 = (char *)&v1[8 * v36 + 12];
    while ( 1 )
    {
      v40 = 0;
      if ( v39 == v1[1037] )
      {
        v41 = v1[9];
        v113 = v30 + v1[1041];
        v111 = v30;
        v112 = v38 - 1;
        v42 = v1[7];
        v114 = *(signed __int16 *)(*(_DWORD *)(v41 + 2052) + 174) + v38;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v42 + 40))(*((unsigned __int16 *)dword_563908 + 100), &v111);
        v40 = 14;
      }
      sub_49B310((_DWORD *)v1[9], v94, v40, (_DWORD *)v1[7], v30 + 2, v38, 3, 0);
      v94 += 32;
      v38 += v90 + 2;
      if ( ++v99 >= v101 )
        break;
      v39 = v99;
    }
  }
  v43 = (v90 + 2) * v1[1039];
  v108 = v30 + 1;
  v107 = v110;
  v109 = v110 + v43;
  v44 = v1[7];
  v106 = v30;
  v45 = *(void (__stdcall **)(int, int *))(*(_DWORD *)v44 + 40);
  v46 = *((unsigned __int16 *)dword_563908 + 94);
  v115 = v90 + 2;
  v45(v46, &v106);
  v47 = v1[7];
  v106 = v1[1041] + v30 - 1;
  v108 = v106 + 1;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v47 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v106);
  v48 = v1[1041] + v30 - 1;
  v107 += (v90 + 2) * v1[1039];
  v108 = v48;
  v49 = v1[7];
  v109 = v107 + 1;
  v106 = v30;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v49 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v106);
  if ( v1[3090] > 0 )
  {
    v50 = v1[6] - 38;
    v51 = v1[6] - 38;
    v52 = (_DWORD *)v1[7];
    v53 = (char *)sub_402617(0x81u);
    v54 = sub_49B310(v3, v53, 2, v52, v30, v51, 3, 0);
    v55 = v1[4 * v1[v1[1037] + 3091] + 1043];
    v56 = v54 + 8;
    v91 = v56;
    if ( v55 >= 0 )
    {
      sprintf(&Dest, "%d", v55);
      sub_49B310(
        v3,
        &Dest,
        v1[4 * v1[v1[1037] + 3091] + 1043] > *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 562),
        (_DWORD *)v1[7],
        v30 + v91,
        v50,
        3,
        0);
    }
    else
    {
      sub_49B310(v3, (char *)&unk_5116AC, 1, (_DWORD *)v1[7], v30 + v56, v50, 3, 0);
    }
    v57 = v91 + sub_49AD40(v3, "0000000") + v30 + 8;
    v58 = v1[11];
    v95 = v57;
    v59 = v58 == 3 ? *((_WORD *)dword_563908 + 15404) : *((_WORD *)dword_563908 + 15402);
    v60 = v58 == 3 ? *((_WORD *)dword_563908 + 15403) : *((_WORD *)dword_563908 + 15401);
    v104 = sub_4011E0(v1[7], &unk_5116A8, *((signed __int16 *)dword_563908 + 15400), v60, v59, v57, v50);
    if ( !sub_401190(dword_563908) && *((_DWORD *)dword_563908 + 2705) % 100 < 70 )
    {
      v61 = (_DWORD *)v1[7];
      v62 = (char *)sub_402617(0x8Bu);
      sub_49B310((_DWORD *)v1[9], v62, 1, v61, v104 + v95 + 16, v50, 3, 0);
    }
  }
  v63 = v1[4] + 40;
  v64 = v30 + v1[1041] + 30;
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 515), v64, v63, v1[3349]);
  v65 = v63 + (v97 - *(signed __int16 *)(v3[513] + 174)) / 2;
  v105 = (int *)*((_DWORD *)dword_563908
                + (*((_DWORD *)dword_563918 + 2342) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2342) - 1)
                + 1516);
  v66 = v64 + sub_49AB50(v105, (const char *)&unk_5116A4);
  v67 = (_DWORD *)v1[7];
  v96 = v66;
  v68 = (char *)sub_402617(0x82u);
  sub_49B310(v3, v68, 7, v67, v66, v65, 3, 0);
  v69 = v1[3349] + v64 - 2;
  v70 = (_DWORD *)v1[7];
  v71 = (char *)sub_402617(0x84u);
  sub_49B4F0(v3, v71, 7, v70, v69, v65, 3, 0);
  v72 = v1[v1[1037] + 3219];
  v73 = v97 + v63 + 4;
  v102 = v1[3090];
  if ( v1[3090] >= v72 + v1[3347] )
    v102 = v72 + v1[3347];
  v100 = v1[v1[1037] + 3219];
  if ( v72 < v102 )
  {
    v74 = &v1[4 * v72 + 1042];
    v92 = v72 + 1;
    v98 = &v1[4 * v72 + 1042];
    while ( 1 )
    {
      v75 = 0;
      if ( !v74[3] )
        v75 = 1;
      if ( v72 == v1[v1[1037] + 3091] )
      {
        v76 = v1[9];
        v113 = v64 + v1[3349];
        v111 = v96;
        v112 = v73 - 1;
        v77 = *(signed __int16 *)(*(_DWORD *)(v76 + 2052) + 174) + v73;
        v78 = v1[7];
        v114 = v77;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v78 + 40))(
          *((unsigned __int16 *)dword_563908 + v75 + 100),
          &v111);
        v74 = v98;
        v75 = 14;
      }
      if ( *(_DWORD *)(*v74 + 192) < 0 )
        break;
      if ( v74[2] > 0 )
      {
        sub_49B4F0(
          v105,
          (char *)&unk_5116A0,
          4,
          (_DWORD *)v1[7],
          v96,
          v73 + (*(signed __int16 *)(*(_DWORD *)(v1[9] + 2052) + 174) - *(signed __int16 *)(v105[513] + 174)) / 2,
          3,
          0);
        goto LABEL_43;
      }
LABEL_44:
      sub_49B310((_DWORD *)v1[9], (char *)(*v74 + 8), v75, (_DWORD *)v1[7], v96 + 4, v73, 3, 0);
      if ( *(_DWORD *)(*v98 + 192) < 0 || !v98[2] )
      {
        v79 = v98[1];
        if ( v79 >= 0 )
        {
          sprintf(&v123, "%d", v79);
          sub_49AB80((int *)v1[9], &v123, v75, (_DWORD *)v1[7], v1[3349] + v64 - 2, v73, 3, 0);
        }
        else
        {
          sub_49B4F0((_DWORD *)v1[9], (char *)&unk_5116AC, v75, (_DWORD *)v1[7], v1[3349] + v64 - 2, v73, 3, 0);
        }
      }
      v80 = *(signed __int16 *)(*(_DWORD *)(v1[9] + 2052) + 174) + v73;
      if ( !(v92 % 5) )
      {
        v81 = v1[3349];
        v82 = v1[7];
        v120 = v80 + 1;
        v119 = v64 + v81;
        v117 = v64;
        v118 = v80;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v82 + 40))(*((unsigned __int16 *)dword_563908 + 92), &v117);
      }
      v98 += 4;
      ++v92;
      v73 = v80 + 2;
      if ( ++v100 >= v102 )
        goto LABEL_52;
      v74 = v98;
      v72 = v100;
    }
    sprintf(&v122, "%d", v74[2]);
    sub_49AB80(
      v105,
      &v122,
      4,
      (_DWORD *)v1[7],
      v96,
      v73 + (*(signed __int16 *)(*(_DWORD *)(v1[9] + 2052) + 174) - *(signed __int16 *)(v105[513] + 174)) / 2,
      3,
      0);
LABEL_43:
    v74 = v98;
    goto LABEL_44;
  }
LABEL_52:
  v83 = v115;
  v84 = v115 * v1[3347];
  v108 = v64 + 1;
  v107 = v110;
  v109 = v110 + v84;
  v85 = v1[7];
  v106 = v64;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v85 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v106);
  v86 = v1[7];
  v106 = v1[3349] + v64 - 1;
  v108 = v106 + 1;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v86 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v106);
  v87 = v1[3349] + v64 - 1;
  v107 += v83 * v1[3347];
  v108 = v87;
  v88 = v1[7];
  v109 = v107 + 1;
  v106 = v64;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v88 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v106);
  (*(void (**)(void))(*(_DWORD *)v1[7] + 96))();
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[7] + 68))(
           v1[7],
           0,
           0,
           -1,
           -1);
}
// 401190: using guessed type int __thiscall sub_401190(_DWORD);
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40196F: using guessed type _DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401BE0: using guessed type _DWORD __stdcall sub_401BE0(_DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040F490) --------------------------------------------------------
int __thiscall sub_40F490(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5)
{
  int (__stdcall ****v5)(_DWORD, _DWORD, _DWORD, _DWORD); // esi
  int result; // eax

  v5 = this;
  if ( this[3347] )
    result = (**this[3347])(a2, a3, a4, a5);
  if ( v5[1039] )
    result = (**v5[1039])(a2, a3, a4, a5);
  return result;
}

//----- (0040F500) --------------------------------------------------------
signed int __thiscall sub_40F500(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ebp
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // edi
  int v8; // ecx
  int v9; // ebp
  signed int result; // eax

  v4 = a4;
  v5 = this;
  v6 = this[3347];
  v7 = a3;
  if ( v6 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v6 + 4))(a2, a3, a4);
  v8 = v5[1039];
  if ( v8 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v8 + 4))(a2, v7, v4);
  v9 = v5[10];
  result = (*(int (__stdcall **)(int, int, int *, int *))(*(_DWORD *)v5[9] + 4))(a2, v7, &a3, &a4);
  v5[10] = result;
  if ( v9 != result && (result == 3 || result == 4) )
    result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  return result;
}

//----- (0040F5B0) --------------------------------------------------------
int __thiscall sub_40F5B0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax
  _DWORD *v4; // ecx
  int v5; // edx
  int v6; // ebp
  int v7; // eax
  _DWORD *v8; // edx
  int v9; // edi
  int v10; // eax
  int v11; // ecx
  _DWORD *v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // eax

  v2 = this;
  result = sub_401190(dword_563908);
  if ( !result )
  {
    v4 = (_DWORD *)*((_DWORD *)dword_563908 + 359);
    return sub_4A7120(v4, 0, 0, 0, 0);
  }
  if ( v2[3090] <= 0 )
    return result;
  v5 = 4 * v2[v2[1037] + 3091];
  v6 = v2[v5 + 1043];
  v7 = (int)&v2[v5];
  v8 = dword_563908;
  v9 = *((_DWORD *)dword_563908 + 78);
  if ( v6 > *(_DWORD *)(v9 + 562)
    || !*(_DWORD *)(v7 + 4180)
    || (v10 = *(_DWORD *)(v7 + 4168), *(_DWORD *)(v10 + 192) >= 0) && v2[4 * (v2[v2[1037] + 3091] + 261)] > 0 )
  {
    v4 = (_DWORD *)*((_DWORD *)dword_563908 + 359);
    return sub_4A7120(v4, 0, 0, 0, 0);
  }
  if ( a2 || !*(_DWORD *)(v10 + 272) || *(_WORD *)(v9 + 568) <= 1 )
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
    v12 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v13 = *((_DWORD *)dword_563908 + 355);
      if ( v13 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v13 + 36))(1);
        v12 = dword_563908;
      }
      v12[355] = 0;
    }
    if ( operator new(0x218u) )
    {
      v14 = sub_402617(0x71u);
      v15 = sub_40146A(*((_DWORD *)dword_563908 + 1519), v14, 1500, 1);
    }
    else
    {
      v15 = 0;
    }
    *((_DWORD *)dword_563908 + 355) = v15;
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 64))(*(_DWORD *)(v2[4 * v2[v2[1037] + 3091] + 1042]
                                                                                     + 192));
  }
  else
  {
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v11 = *((_DWORD *)dword_563908 + 355);
      if ( v11 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v11 + 36))(1);
        v8 = dword_563908;
      }
      v8[355] = 0;
    }
    if ( operator new(0x1644u) )
    {
      result = sub_402504(
                 0,
                 *((_DWORD *)dword_563908 + 1518),
                 v2,
                 "Buying this will replace some existing skills/attributes, continue?",
                 "Yes,No",
                 0,
                 0,
                 0,
                 0);
      *((_DWORD *)dword_563908 + 355) = result;
    }
    else
    {
      result = 0;
      *((_DWORD *)dword_563908 + 355) = 0;
    }
  }
  return result;
}
// 401190: using guessed type int __thiscall sub_401190(_DWORD);
// 40146A: using guessed type _DWORD __stdcall sub_40146A(_DWORD, _DWORD, _DWORD, _DWORD);
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0040F8F0) --------------------------------------------------------
int __thiscall sub_40F8F0(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int result; // eax

  v5 = this;
  result = ((int (__thiscall *)(_DWORD **, int, int, int, int))(*this)[2])(this, a2, a3, a4, a5);
  if ( v5[3347] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[3347] + 12))(a2, a3, a4, a5);
  if ( v5[1039] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[1039] + 12))(a2, a3, a4, a5);
  return result;
}

//----- (0040F970) --------------------------------------------------------
int __thiscall sub_40F970(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int result; // eax

  v5 = this;
  if ( this[3347] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[3347] + 16))(a2, a3, a4, a5);
  if ( v5[1039] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[1039] + 16))(a2, a3, a4, a5);
  return result;
}

//----- (0040F9F0) --------------------------------------------------------
int __thiscall sub_40F9F0(_DWORD **this, int a2)
{
  _DWORD **v2; // esi
  int result; // eax

  v2 = this;
  if ( this[3348] )
    result = (*(int (__stdcall **)(int))(*this[3348] + 36))(a2);
  if ( v2[1040] )
    result = (*(int (__stdcall **)(int))(*v2[1040] + 36))(a2);
  return result;
}

//----- (0040FA40) --------------------------------------------------------
int __thiscall sub_40FA40(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // eax
  bool v5; // sf
  _DWORD *v6; // eax
  signed int v7; // eax
  int v8; // edx
  bool v9; // zf
  unsigned __int8 v10; // of
  signed int *v11; // edx
  int v12; // edx
  int v13; // esi
  int v14; // eax
  int v15; // ecx
  int v16; // eax
  int v17; // edi
  int v18; // edx
  int v19; // edx
  int v20; // esi
  int v21; // ecx

  if ( a2 )
  {
    result = a2 - 1;
    if ( a2 == 1 )
    {
      this[this[1035] + 3217] += a3;
      v4 = this[1035];
      v5 = this[v4 + 3217] < 0;
      v6 = &this[v4 + 3217];
      if ( v5 )
        *v6 = 0;
      v7 = this[3088] - this[3345] < 0 ? 0 : this[3088] - this[3345];
      v8 = this[1035];
      v10 = __OFSUB__(this[v8 + 3217], v7);
      v9 = this[v8 + 3217] == v7;
      v5 = this[v8 + 3217] - v7 < 0;
      v11 = &this[v8 + 3217];
      if ( !((unsigned __int8)(v5 ^ v10) | v9) )
        *v11 = v7;
      v12 = this[this[1035] + 3217];
      v13 = v12 + this[3345];
      v14 = this[3088];
      if ( v14 < v13 )
        v13 = this[3088];
      v15 = this[3346];
      result = sub_401C67(0, v14, v12, v13, 0);
    }
  }
  else
  {
    v5 = a3 + this[1036] < 0;
    this[1036] += a3;
    if ( v5 )
      this[1036] = 0;
    v16 = this[1034];
    v17 = this[1037];
    v18 = (v16 - v17) & ((v16 - v17 < 0) - 1);
    if ( this[1036] > v18 )
      this[1036] = v18;
    v19 = this[1036];
    v20 = v17 + v19;
    if ( v16 < v17 + v19 )
      v20 = v16;
    v21 = this[1038];
    result = sub_401C67(0, v16, v19, v20, 0);
  }
  return result;
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040FC40) --------------------------------------------------------
int __thiscall sub_40FC40(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void *v3; // edi
  void (__stdcall ***v4)(signed int); // ecx
  int v5; // ecx

  v1 = this;
  *this = &off_51175C;
  this[1] = &CharacterScreen::`vftable';
  this[2] = &off_511720;
  v2 = (void *)this[3348];
  if ( v2 )
  {
    sub_402040(v2);
    j__free(v2);
    v1[3348] = 0;
  }
  v3 = (void *)v1[1040];
  if ( v3 )
  {
    sub_402040(v1[1040]);
    j__free(v3);
    v1[1040] = 0;
  }
  v4 = (void (__stdcall ***)(signed int))v1[10];
  if ( v4 )
  {
    (**v4)(1);
    v1[10] = 0;
  }
  v5 = *((_DWORD *)dword_563908 + 1509);
  sub_401CCB(0);
  return sub_4027A2(v1);
}
// 401CCB: using guessed type _DWORD __stdcall sub_401CCB(_DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 511720: using guessed type int (__stdcall *off_511720)(int, int);
// 51172C: using guessed type void *CharacterScreen::`vftable';
// 51175C: using guessed type int (__stdcall *off_51175C)(int, int, int);

//----- (0040FD40) --------------------------------------------------------
signed int __thiscall sub_40FD40(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  int i; // ebp
  int v5; // edi
  int v6; // eax
  BOOL v7; // eax
  int v8; // eax
  int v9; // ecx
  signed int result; // eax

  v2 = this;
  this[1037] = a2;
  this[3090] = 0;
  v3 = *((_DWORD *)dword_563908 + 1512);
  for ( i = 0; i < *(_DWORD *)(v3 + 8000); ++i )
  {
    v5 = *(_DWORD *)(v3 + 4 * i);
    if ( !strcmp((const char *)(v5 + 40), (const char *)&v2[8 * v2[1037] + 12]) )
    {
      v2[4 * v2[3090] + 1042] = v5;
      v2[4 * v2[3090] + 1043] = sub_48E6E0(
                                  *((_DWORD **)dword_563908 + 1512),
                                  (int)dword_563908 + 27892,
                                  v5,
                                  *((_DWORD *)dword_563908 + 78) + 570,
                                  *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 568));
      v6 = *(_DWORD *)(v5 + 196);
      if ( v6 == -2 )
      {
        v2[4 * v2[3090] + 1045] = 0;
      }
      else
      {
        if ( v6 == -1 )
        {
          v7 = *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 568) == 0;
        }
        else
        {
          if ( *((_DWORD *)dword_563908 + 6898) )
            v8 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060);
          else
            v8 = 0;
          v7 = sub_494C40((void *)(v5 + 64), *((_DWORD *)dword_563908 + 78) + 60, v8);
        }
        v2[4 * v2[3090] + 1045] = v7;
      }
      v2[4 * (v2[3090]++ + 261)] = sub_494FB0(*(_DWORD *)(v5 + 192), *((_DWORD *)dword_563908 + 78) + 60);
    }
    v3 = *((_DWORD *)dword_563908 + 1512);
  }
  v9 = v2[1037];
  if ( v2[v9 + 3091] >= v2[3090] )
  {
    v2[v9 + 3091] = 0;
    v2[v2[1037] + 3219] = 0;
  }
  sub_48DD20(v2 + 1042, v2[3090], 0x10u, (int)&sub_40255E);
  result = (signed int)dword_563908;
  if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
  {
    result = v2[v2[1037] + 3091];
    if ( result < v2[3090] )
      result = sub_4020D1(4, *(_DWORD *)(v2[4 * result + 1042] + 192));
  }
  return result;
}
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);

//----- (0040FFF0) --------------------------------------------------------
int __stdcall sub_40FFF0(int a1, int a2, int a3)
{
  int result; // eax

  if ( !a1 && !a3 )
    result = sub_40281A(1);
  return result;
}
// 40281A: using guessed type _DWORD __stdcall sub_40281A(_DWORD);

//----- (00410010) --------------------------------------------------------
signed int __thiscall sub_410010(_DWORD *this, signed int a2, int a3)
{
  _DWORD *v3; // esi
  bool v4; // zf
  signed int result; // eax
  int v6; // edi
  _DWORD *v7; // ecx
  int v8; // eax
  int v9; // eax
  int v10; // ecx
  int v11; // edi
  _DWORD *v12; // ecx
  int v13; // eax
  int v14; // ecx
  bool v15; // sf
  unsigned __int8 v16; // of
  _DWORD *v17; // eax
  int v18; // ecx
  int v19; // ecx
  int v20; // edx
  int v21; // eax
  int v22; // eax
  int v23; // ecx

  v3 = this;
  if ( *((_DWORD *)dword_56390C + 1548) || *((_DWORD *)dword_56390C + 1549) || *((_DWORD *)dword_56390C + 1569) )
    return sub_40281A(0);
  v4 = (unsigned __int16)(GetKeyState(16) & 0x8000) == 0;
  result = a2;
  if ( v4 )
  {
    switch ( a2 )
    {
      case 27:
        if ( v3[7] )
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          result = (signed int)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          if ( v3 != (_DWORD *)4 )
            result = (*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        else
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          if ( operator new(0x2Cu) )
            v11 = sub_401591(*((_DWORD *)dword_563908 + 89), v3 + 2);
          else
            v11 = 0;
          result = sub_401154(6);
          *((_DWORD *)dword_563908 + 1535) = v11;
          if ( v3 != (_DWORD *)4 )
            result = (*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        return result;
      case 35:
        v3[v3[1036] + 3090] = v3[3089] - 1;
        v12 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        goto LABEL_35;
      case 36:
        v3[v3[1036] + 3090] = 0;
        v12 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        goto LABEL_35;
      case 38:
        --v3[v3[1036] + 3090];
        v12 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        goto LABEL_35;
      case 40:
        ++v3[v3[1036] + 3090];
        v12 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
LABEL_35:
        sub_4A7120(v12, 0, 0, 0, 0);
        break;
      default:
        break;
    }
    v13 = v3[1036];
    v14 = v3[3089];
    v16 = __OFSUB__(v3[v13 + 3090], v14);
    v15 = v3[v13 + 3090] - v14 < 0;
    v17 = &v3[v13 + 3090];
    if ( !(v15 ^ v16) )
      *v17 = v14 - 1;
    v18 = v3[1036];
    if ( v3[v18 + 3090] < 0 )
      v3[v18 + 3090] = 0;
    v19 = v3[1036];
    v20 = v3[3346];
    v21 = v3[v19 + 3090];
    if ( v21 >= v20 + v3[v19 + 3218] )
      v3[v19 + 3218] = v21 - v20 + 1 < 0 ? 0 : v21 - v20 + 1;
    v22 = v3[1036];
    v23 = v3[v22 + 3090];
    if ( v23 < v3[v22 + 3218] )
      v3[v22 + 3218] = v23;
    (*(void (__thiscall **)(_DWORD *, signed int, _DWORD))v3[1])(v3 + 1, 1, 0);
    result = (signed int)dword_563908;
    if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
    {
      result = v3[v3[1036] + 3090];
      if ( result < v3[3089] )
        result = sub_4020D1(4, *(_DWORD *)(v3[4 * result + 1041] + 192));
    }
  }
  else
  {
    switch ( a2 )
    {
      case 35:
        v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        v6 = v3[1035] - 1;
        goto LABEL_12;
      case 36:
        v6 = 0;
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        goto LABEL_13;
      case 38:
        result = v3[1036];
        if ( result <= 0 )
          return result;
        v6 = result - 1;
        v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        goto LABEL_12;
      case 40:
        result = v3[1036];
        v6 = result + 1;
        if ( result + 1 < v3[1035] )
        {
          v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
LABEL_12:
          result = sub_4A7120(v7, 0, 0, 0, 0);
          if ( v6 != -1 )
          {
LABEL_13:
            v8 = v3[1035];
            if ( v6 > v8 )
              v6 = v8 - 1;
            if ( v6 < 0 )
              v6 = 0;
            sub_4026C6(v6);
            v9 = v3[1038];
            v10 = v3[1036];
            if ( v10 >= v9 + v3[1037] )
              v3[1037] = v10 - v9 + 1 < 0 ? 0 : v10 - v9 + 1;
            if ( v10 < v3[1037] )
              v3[1037] = v10;
            result = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD))v3[1])(v3 + 1, 0, 0);
          }
        }
        break;
      default:
        return result;
    }
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 4026C6: using guessed type _DWORD __stdcall sub_4026C6(_DWORD);
// 40281A: using guessed type _DWORD __stdcall sub_40281A(_DWORD);

//----- (00410590) --------------------------------------------------------
int __thiscall sub_410590(_DWORD *this, int a2, int a3, int a4, void *a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // ebp
  int v8; // edi
  int v9; // ecx
  int result; // eax
  int v11; // edi
  int v12; // edi
  int v13; // edi
  bool v14; // zf

  v5 = this;
  v6 = this[3347];
  v7 = a4;
  v8 = a3;
  if ( v6 )
    (*(void (__stdcall **)(int, int, int, void *))(*(_DWORD *)v6 + 8))(a2, a3, a4, a5);
  v9 = v5[1039];
  if ( v9 )
    (*(void (__stdcall **)(int, int, int, void *))(*(_DWORD *)v9 + 8))(a2, v8, v7, a5);
  result = (*(int (__stdcall **)(int, int, int *, int *))(*(_DWORD *)v5[9] + 4))(a2, v8, &a3, &a4);
  v5[10] = result;
  switch ( result )
  {
    case 1:
      result = a4 / (*(signed __int16 *)(*(_DWORD *)(v5[8] + 2052) + 174) + 2);
      v12 = v5[1037] + result;
      if ( v12 < v5[1035] )
      {
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        result = sub_4026C6(v12);
      }
      break;
    case 2:
      result = a4 / (*(signed __int16 *)(*(_DWORD *)(v5[8] + 2052) + 174) + 2);
      v13 = v5[v5[1036] + 3218] + result;
      if ( v13 < v5[3089] )
      {
        result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        v14 = a5 == 0;
        v5[v5[1036] + 3090] = v13;
        if ( v14 && *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
          result = sub_4020D1(4, *(_DWORD *)(v5[4 * v13 + 1041] + 192));
      }
      break;
    case 3:
      result = sub_40281A(0);
      break;
    case 4:
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      a5 = operator new(0x2Cu);
      if ( a5 )
        v11 = sub_401591(*((_DWORD *)dword_563908 + 89), v5 + 2);
      else
        v11 = 0;
      sub_401154(6);
      result = (int)dword_563908;
      *((_DWORD *)dword_563908 + 1535) = v11;
      if ( v5 != (_DWORD *)4 )
        result = (*(int (__stdcall **)(signed int))(*(v5 - 1) + 4))(1);
      break;
    default:
      return result;
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 4026C6: using guessed type _DWORD __stdcall sub_4026C6(_DWORD);
// 40281A: using guessed type _DWORD __stdcall sub_40281A(_DWORD);

//----- (00410850) --------------------------------------------------------
void *__thiscall sub_410850(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_40241E();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 40241E: using guessed type int sub_40241E(void);

//----- (00410880) --------------------------------------------------------
int __thiscall sub_410880(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void *v3; // edi
  void *v4; // edi
  void (__stdcall ***v5)(signed int); // ecx
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // ST20_4
  int v9; // ST1C_4
  int v10; // eax
  int v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // ST20_4
  void (__stdcall *v15)(_DWORD *); // eax
  _DWORD *v16; // edi
  char *v17; // eax
  int v18; // eax
  int v19; // edi
  bool v20; // zf
  bool v21; // sf
  char *v22; // ebp
  int v23; // eax
  int v24; // ecx
  int v25; // ebp
  int v26; // eax
  int v27; // ebx
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // ST20_4
  void (__stdcall *v31)(_DWORD *); // eax
  int v32; // eax
  char *v33; // eax
  int v34; // edi
  int v35; // edi
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _DWORD *v38; // ST20_4
  void (__stdcall *v39)(_DWORD *); // eax
  int v40; // ecx
  int v41; // edi
  int v42; // ebp
  _DWORD *v43; // eax
  _DWORD *v44; // eax
  _DWORD *v45; // ST20_4
  void (__stdcall *v46)(_DWORD *); // eax
  int v47; // eax
  void (__thiscall **v48)(_DWORD, _DWORD, _DWORD); // edx
  void (__thiscall *v49)(_DWORD, _DWORD, _DWORD); // eax
  int (__thiscall ***v50)(_DWORD, signed int, _DWORD); // esi
  int v52; // [esp+14h] [ebp-20h]
  int v53; // [esp+18h] [ebp-1Ch]
  _DWORD *v54; // [esp+1Ch] [ebp-18h]
  int v55; // [esp+20h] [ebp-14h]
  void *v56; // [esp+24h] [ebp-10h]
  int v57; // [esp+30h] [ebp-4h]
  int v58; // [esp+38h] [ebp+4h]
  int v59; // [esp+38h] [ebp+4h]
  void *v60; // [esp+38h] [ebp+4h]

  v2 = this;
  sub_4026C6(this[1037]);
  if ( a2 )
  {
    v2[3] = *a2;
    v2[4] = a2[1];
    v2[5] = a2[2];
    v2[6] = a2[3];
  }
  v3 = (void *)v2[3348];
  if ( v3 )
  {
    sub_402040(v2[3348]);
    j__free(v3);
    v2[3348] = 0;
  }
  v4 = (void *)v2[1040];
  if ( v4 )
  {
    sub_402040(v2[1040]);
    j__free(v4);
    v2[1040] = 0;
  }
  v5 = (void (__stdcall ***)(signed int))v2[10];
  if ( v5 )
  {
    (**v5)(1);
    v2[10] = 0;
  }
  v55 = v2[5] - v2[3];
  v58 = v2[6] - v2[4];
  v6 = operator new(0x420u);
  v54 = v6;
  v57 = 0;
  if ( v6 )
    v7 = sub_49A5F0(v6, 1, v2 + 3, 0);
  else
    v7 = 0;
  v2[10] = v7;
  v8 = *((signed __int16 *)dword_563908 + 15401);
  v9 = *((signed __int16 *)dword_563908 + 15400);
  v57 = -1;
  v10 = sub_402617(0x23u);
  sub_401F32(&v52, &v53, v10, v9, v8);
  v11 = v2[5] - v52 - 12;
  v12 = operator new(0x18u);
  v54 = v12;
  v57 = 1;
  if ( v12 )
    v13 = sub_49A490(v12, v11, 11, v52, v53, 4);
  else
    v13 = 0;
  v14 = v13;
  v15 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[10] + 16);
  v57 = -1;
  v15(v14);
  v54 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
  v16 = v54;
  v17 = (char *)sub_402617(0x69u);
  v18 = sub_49AD40(v16, v17);
  v19 = 0;
  v20 = v2[1036] == 0;
  v21 = v2[1036] < 0;
  v2[1041] = v18 + 8;
  if ( !v21 && !v20 )
  {
    v22 = (char *)(v2 + 12);
    do
    {
      v23 = sub_49AD40((_DWORD *)v2[9], v22);
      if ( v23 > v2[1041] )
        v2[1041] = v23;
      ++v19;
      v22 += 32;
    }
    while ( v19 < v2[1036] );
  }
  v2[1041] += 4;
  v24 = v2[9];
  v25 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 515) + 360) + 18));
  v26 = (v58 - (v25 + 44) - 50) / (*(signed __int16 *)(*(_DWORD *)(v24 + 2052) + 174) + 2);
  if ( v26 < 1 )
    v26 = 1;
  v2[1039] = v26;
  v27 = v26 * (*(signed __int16 *)(*(_DWORD *)(v24 + 2052) + 174) + 2);
  v28 = operator new(0x18u);
  v56 = v28;
  v57 = 2;
  if ( v28 )
    v29 = sub_49A490(v28, 16, v25 + 44, v2[1041], v27, 1);
  else
    v29 = 0;
  v30 = v29;
  v31 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[10] + 16);
  v57 = -1;
  v31(v30);
  v56 = operator new(0x7Cu);
  v57 = 3;
  if ( v56 )
    v32 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 0, v2 + 2, v2[7], 0, v2[1041] + 16, v25 + 44, v27, 1);
  else
    v32 = 0;
  v57 = -1;
  v2[1040] = v32;
  v59 = v58 - 38;
  v33 = (char *)sub_402617(0x81u);
  v34 = sub_49AD40(v54, v33) + 8;
  v35 = sub_49AD40(v54, "0000000") + v34 + 24;
  sub_401F32(
    &v52,
    &v53,
    &unk_5116A8,
    *((signed __int16 *)dword_563908 + 15400),
    *((signed __int16 *)dword_563908 + 15401));
  v36 = operator new(0x18u);
  v56 = v36;
  v57 = 4;
  if ( v36 )
    v37 = sub_49A490(v36, v35, v59, v52, v53, 3);
  else
    v37 = 0;
  v38 = v37;
  v39 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[10] + 16);
  v57 = -1;
  v39(v38);
  v40 = v2[1039];
  v41 = v2[1041] + 46;
  v2[3349] = v55 - v41 - 31;
  v42 = v25 + 44;
  v2[3347] = v40;
  v43 = operator new(0x18u);
  v57 = 5;
  if ( v43 )
    v44 = sub_49A490(v43, v41, v42, v2[3349], v27, 2);
  else
    v44 = 0;
  v45 = v44;
  v46 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[10] + 16);
  v57 = -1;
  v46(v45);
  v60 = operator new(0x7Cu);
  v57 = 6;
  if ( v60 )
    v47 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 1, v2 + 2, v2[7], 0, v41 + v2[3349], v42, v27, 1);
  else
    v47 = 0;
  v48 = (void (__thiscall **)(_DWORD, _DWORD, _DWORD))v2[2];
  v2[3348] = v47;
  v49 = *v48;
  v50 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v2 + 2);
  v57 = -1;
  v49(v50, 0, 0);
  return (**v50)(v50, 1, 0);
}
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4026C6: using guessed type _DWORD __stdcall sub_4026C6(_DWORD);

//----- (00410E30) --------------------------------------------------------
int *__thiscall sub_410E30(int *this, int a2, int a3, int a4)
{
  int *v4; // esi
  int v5; // eax
  int v6; // ecx
  const char *v7; // eax
  int v8; // ebx
  int v9; // edi
  const char *v10; // ebp
  const char *v11; // ecx
  int *v12; // edx
  char v13; // al
  int v14; // ecx
  const char *v16; // [esp+28h] [ebp+4h]
  int i; // [esp+2Ch] [ebp+8h]

  v4 = this;
  this[1] = (int)&InputTarget::`vftable';
  this[2] = (int)&off_511698;
  this[8] = a2;
  *this = (int)&off_51175C;
  this[1] = (int)&CharacterScreen::`vftable';
  this[2] = (int)&off_511720;
  this[7] = a3;
  this[9] = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  this[10] = 0;
  this[3348] = 0;
  this[1040] = 0;
  this[11] = 0;
  memset(this + 3091, 0, 0x200u);
  memset(v4 + 3219, 0, 0x200u);
  v4[1036] = 0;
  v5 = *((_DWORD *)dword_563908 + 1512);
  v6 = 0;
  for ( i = 0; i < *(_DWORD *)(v5 + 8000); ++i )
  {
    v7 = (const char *)(*(_DWORD *)(v5 + 4 * v6) + 40);
    v16 = v7;
    if ( *v7 != 35 )
    {
      v8 = v4[1036];
      v9 = 0;
      if ( v8 > 0 )
      {
        v10 = (const char *)(v4 + 12);
        while ( strcmp(v7, v10) )
        {
          ++v9;
          v10 += 32;
          if ( v9 >= v8 )
            break;
          v7 = v16;
        }
        v7 = v16;
      }
      if ( v9 == v8 )
      {
        v11 = v7;
        v12 = &v4[8 * v8 + 12];
        do
        {
          v13 = *v11;
          *(_BYTE *)v12 = *v11++;
          v12 = (int *)((char *)v12 + 1);
        }
        while ( v13 );
        ++v4[1036];
      }
    }
    v5 = *((_DWORD *)dword_563908 + 1512);
    v6 = i + 1;
  }
  sub_48DD20(v4 + 12, v4[1036], 0x20u, (int)&sub_401AC8);
  v4[1037] = 0;
  v4[1038] = 0;
  sub_402121(a4);
  if ( v4[3090] > 0 )
  {
    v14 = *((_DWORD *)dword_563908 + 1509);
    sub_4020D1(4, *(_DWORD *)(v4[1042] + 192));
  }
  return v4;
}
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 402121: using guessed type _DWORD __stdcall sub_402121(_DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 511720: using guessed type int (__stdcall *off_511720)(int, int);
// 51172C: using guessed type void *CharacterScreen::`vftable';
// 51175C: using guessed type int (__stdcall *off_51175C)(int, int, int);

//----- (004110F0) --------------------------------------------------------
char *__thiscall sub_4110F0(int this, const char *a2, int a3, char *a4, int a5)
{
  char *result; // eax
  char v6; // dl

  strcpy((char *)(this + 8004), a2);
  *(_DWORD *)(this + 8516) = a3;
  result = a4;
  do
  {
    v6 = *result;
    result[this + 8260 - (_DWORD)a4] = *result;
    ++result;
  }
  while ( v6 );
  *(_DWORD *)(this + 8520) = a5;
  return result;
}

//----- (00411150) --------------------------------------------------------
FILE *__thiscall sub_411150(const char *this)
{
  const char *v1; // edi
  FILE *result; // eax
  FILE *v3; // ebx
  int i; // esi
  _DWORD *v5; // eax

  v1 = this;
  result = fopen(this + 8524, "wt");
  v3 = result;
  if ( result )
  {
    for ( i = 0; i < *((_DWORD *)v1 + 2000); ++i )
    {
      v5 = *(_DWORD **)&v1[4 * i];
      sub_4C3361(
        v3,
        (int)"\"%s\",\"%s\",%d,%d,%d,\"%s\",%d,%d\n",
        v5 + 22,
        *(_DWORD *)&v1[4 * i],
        v5[16],
        v5[18],
        v5[19],
        v5 + 38,
        v5[20],
        v5[21]);
    }
    result = (FILE *)fclose(v3);
  }
  return result;
}

//----- (004111F0) --------------------------------------------------------
int __cdecl sub_4111F0(int a1, int a2)
{
  int v2; // edx
  int v3; // eax

  v2 = 0;
  if ( *(_DWORD *)(a1 + 540) >= 0 )
    v2 = *(_DWORD *)(a1 + 68);
  v3 = 0;
  if ( *(_DWORD *)(a2 + 540) >= 0 )
    v3 = *(_DWORD *)(a2 + 68);
  return v3 - v2;
}

//----- (00411220) --------------------------------------------------------
int __cdecl sub_411220(int a1, int a2)
{
  int v2; // edx
  int v3; // eax

  v2 = 0;
  if ( *(_DWORD *)(a1 + 540) >= 0 )
    v2 = *(_DWORD *)(a1 + 80);
  v3 = 0;
  if ( *(_DWORD *)(a2 + 540) >= 0 )
    v3 = *(_DWORD *)(a2 + 80);
  return v3 - v2;
}

//----- (00411250) --------------------------------------------------------
int __cdecl sub_411250(int a1, int a2)
{
  signed int v2; // eax
  signed int v3; // edx

  v2 = 100000;
  if ( *(_DWORD *)(a1 + 540) >= 0 )
    v2 = *(_DWORD *)(a1 + 540);
  v3 = 100000;
  if ( *(_DWORD *)(a2 + 540) >= 0 )
    v3 = *(_DWORD *)(a2 + 540);
  return v2 - v3;
}

//----- (00411290) --------------------------------------------------------
int __cdecl sub_411290(int a1, int a2)
{
  return _stricmp((const char *)(a1 + 88), (const char *)(a2 + 88));
}

//----- (004112C0) --------------------------------------------------------
char *__thiscall sub_4112C0(char *this, int a2, int a3, int a4, int a5, int a6, int a7, char *Source, int a9, int a10)
{
  char *v10; // esi
  SOCKET *v11; // eax
  SOCKET *v12; // eax
  int v13; // edx

  v10 = strcpy(this, (const char *)a2);
  *((_DWORD *)v10 + 16) = a3;
  *((_DWORD *)v10 + 21) = a10;
  *((_DWORD *)v10 + 20) = a9;
  *((_DWORD *)v10 + 17) = a4;
  *((_DWORD *)v10 + 18) = a5;
  strcpy(v10 + 88, (const char *)a7);
  strncpy(v10 + 152, Source, 0x180u);
  v10[535] = 0;
  v11 = (SOCKET *)operator new(0x124u);
  if ( v11 )
    v12 = sub_4A9C60(v11, v10, *((_DWORD *)v10 + 16) + 1, 0);
  else
    v12 = 0;
  *((_DWORD *)v10 + 134) = v12;
  sub_4A99B0(v12, 100);
  sub_4A9920(*((SOCKET **)v10 + 134), v13, 0, 0);
  *((_DWORD *)v10 + 135) = -1;
  return v10;
}

//----- (00411490) --------------------------------------------------------
signed int __fastcall sub_411490(int a1, int a2)
{
  _DWORD *v2; // esi
  unsigned int *v3; // ecx
  __int64 v4; // rax
  int v5; // ecx
  bool v6; // sf
  unsigned __int8 v7; // of
  char *v8; // eax
  char v9; // cl
  int v10; // edx
  void *v11; // edi
  signed int v12; // ebx
  int i; // ebp
  int v14; // edi
  signed int v15; // eax
  int v16; // ecx
  int v17; // ecx
  int v18; // edi
  __int64 v19; // rax
  int v20; // ecx
  int v21; // edx
  int v23; // [esp+10h] [ebp-2Ch]
  char Src; // [esp+14h] [ebp-28h]
  char v25[35]; // [esp+15h] [ebp-27h]

  v2 = (_DWORD *)a1;
  v3 = *(unsigned int **)(a1 + 8804);
  if ( !v3 )
    goto LABEL_13;
  sub_4A96A0(v3, a2);
  if ( *(_DWORD *)(v2[2202] + 12) == 2 )
  {
    if ( !v2[2203] )
    {
      v8 = (char *)(v2 + 2195);
      dword_53E6AC = (int)v2;
      v2[2203] = 1;
      Src = 1;
      do
      {
        v9 = *v8;
        v8[v25 - (char *)(v2 + 2195)] = *v8;
        ++v8;
      }
      while ( v9 );
      sub_4A9380((_DWORD **)v2[2202], 0, &Src, 0x21u);
      goto LABEL_13;
    }
    if ( !dword_53E6AC )
      goto LABEL_11;
    v4 = sub_401D39(v5, HIDWORD(v4)) - v2[2204];
    LODWORD(v4) = (HIDWORD(v4) ^ v4) - HIDWORD(v4);
    v7 = __OFSUB__((_DWORD)v4, 2400);
    v6 = (signed int)v4 - 2400 < 0;
  }
  else
  {
    v4 = sub_401D39(v5, HIDWORD(v4)) - v2[2204];
    LODWORD(v4) = (HIDWORD(v4) ^ v4) - HIDWORD(v4);
    v7 = __OFSUB__((_DWORD)v4, 700);
    v6 = (signed int)v4 - 700 < 0;
  }
  if ( v6 ^ v7 )
    goto LABEL_13;
LABEL_11:
  sub_4A8450(v2[2202], SHIDWORD(v4));
  v11 = (void *)v2[2201];
  v2[2202] = 0;
  if ( v11 )
  {
    sub_4A8870((int)v11, v10);
    j__free(v11);
    v2[2201] = 0;
  }
LABEL_13:
  v12 = 0;
  for ( i = 0; i < v2[2000]; ++i )
  {
    v14 = v2[i];
    v15 = sub_4A99C0(*(SOCKET **)(v14 + 536), (int)&v23, &v23);
    if ( v15 >= 0 )
    {
      v16 = v23;
      if ( *(_DWORD *)(v14 + 68) != v15 || *(_DWORD *)(v14 + 540) != v23 )
      {
        *(_DWORD *)(v14 + 68) = v15;
        *(_DWORD *)(v14 + 540) = v16;
        v12 = 1;
      }
    }
  }
  v17 = v2[2000];
  if ( v17 > 0 )
  {
    v18 = 20;
    if ( 60 / v17 >= 20 )
      v18 = 60 / v17;
    v19 = sub_401D39(v17, 60 % v17) - v2[2199];
    if ( (signed int)((HIDWORD(v19) ^ v19) - HIDWORD(v19)) > v18 )
    {
      v2[2199] = sub_401D39(v20, HIDWORD(v19));
      v21 = (v2[2200] + 1) % v2[2000];
      v2[2200] = v21;
      sub_4A9920(*(SOCKET **)(v2[v21] + 536), v21, 0, 0);
    }
  }
  return v12;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 53E6AC: using guessed type int dword_53E6AC;
// 411490: using guessed type char var_27[35];

//----- (004116C0) --------------------------------------------------------
_DWORD *__thiscall sub_4116C0(signed int *this)
{
  return sub_48DD90((unsigned int)this, this[2000], sub_40274D);
}
// 40274D: using guessed type int __cdecl sub_40274D(int, int);

//----- (004116E0) --------------------------------------------------------
_DWORD *__thiscall sub_4116E0(signed int *this)
{
  return sub_48DD90((unsigned int)this, this[2000], sub_401EBF);
}
// 401EBF: using guessed type int __cdecl sub_401EBF(int, int);

//----- (00411700) --------------------------------------------------------
_DWORD *__thiscall sub_411700(signed int *this)
{
  return sub_48DD90((unsigned int)this, this[2000], sub_40210D);
}
// 40210D: using guessed type int __cdecl sub_40210D(int, int);

//----- (00411740) --------------------------------------------------------
int __thiscall sub_411740(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // edi

  v1 = this;
  sub_402806(this);
  for ( result = 0; result < v1[2000]; *(_DWORD *)(v3 + 68) = 0 )
  {
    *(_DWORD *)(v1[result] + 540) = -1;
    v3 = v1[result++];
  }
  return result;
}
// 402806: using guessed type int __thiscall sub_402806(_DWORD);

//----- (00411790) --------------------------------------------------------
int __thiscall sub_411790(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, char *Source, int a9, int a10)
{
  _DWORD *v10; // esi
  int result; // eax

  v10 = this;
  if ( operator new(0x220u) )
    result = sub_4028C4(a2, a3, a4, a5, a6, a7, Source, a9, a10);
  else
    result = 0;
  v10[v10[2000]++] = result;
  return result;
}

//----- (00411890) --------------------------------------------------------
FILE *__thiscall sub_411890(const char *this)
{
  FILE *result; // eax
  FILE *v2; // edi
  void *v3; // eax
  void *v4; // esi
  int v5; // edi
  int v6; // ebp
  int v7; // ebx
  int v8; // ST40_4
  int v9; // eax
  FILE *v10; // [esp+Ch] [ebp-2268h]
  int v11; // [esp+10h] [ebp-2264h]
  int v12; // [esp+30h] [ebp-2244h]
  int v13; // [esp+70h] [ebp-2204h]
  int v14; // [esp+270h] [ebp-2004h]

  result = fopen(this + 8524, "rt");
  v2 = result;
  v10 = result;
  if ( result )
  {
    if ( !feof(result) )
    {
      do
      {
        LOBYTE(v14) = 0;
        v3 = (void *)sub_4C352E((int)&v14, 0x2000, v2);
        v4 = v3;
        if ( v3 )
        {
          sub_48CA10((int)&v12, v3);
          sub_48CA10((int)&v11, v4);
          v5 = sub_48CBB0(v4);
          v6 = sub_48CBB0(v4);
          v7 = sub_48CBB0(v4);
          sub_48CA10((int)&v13, v4);
          v8 = sub_48CBB0(v4);
          v9 = sub_48CBB0(v4);
          sub_4025C7((int)&v11, v5, -1, v6, v7, (int)&v12, (char *)&v13, v8, v9);
          v2 = v10;
        }
      }
      while ( !feof(v2) );
    }
    result = (FILE *)fclose(v2);
  }
  return result;
}

//----- (00411A50) --------------------------------------------------------
char *__thiscall sub_411A50(char *this, char *Source, int a3, int a4, int a5, int a6, int a7)
{
  char *v7; // esi
  int v8; // edi

  v7 = this;
  v8 = (int)(this + 8780);
  strncpy(this + 8780, Source, 0x10u);
  *(_BYTE *)(v8 + 15) = 0;
  *((_DWORD *)v7 + 2201) = 0;
  *((_DWORD *)v7 + 2202) = 0;
  *((_DWORD *)v7 + 2203) = 0;
  *((_DWORD *)v7 + 2204) = 0;
  *((_DWORD *)v7 + 2000) = 0;
  strcpy(v7 + 8524, (const char *)a3);
  *((_DWORD *)v7 + 2200) = -1;
  *((_DWORD *)v7 + 2199) = 0;
  sub_40189D(a4, a5, a6, a7);
  sub_402004();
  return v7;
}
// 40189D: using guessed type _DWORD __stdcall sub_40189D(_DWORD, _DWORD, _DWORD, _DWORD);
// 402004: using guessed type int sub_402004(void);

//----- (00411B10) --------------------------------------------------------
void __thiscall sub_411B10(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // ebx
  SOCKET **v3; // esi
  SOCKET *v4; // ebp

  v1 = this;
  v2 = 0;
  if ( this[2000] <= 0 )
  {
    this[2000] = 0;
  }
  else
  {
    do
    {
      v3 = (SOCKET **)v1[v2];
      if ( v3 )
      {
        v4 = v3[134];
        if ( v4 )
        {
          sub_4A97B0(v3[134]);
          j__free(v4);
        }
        j__free(v3);
      }
      ++v2;
    }
    while ( v2 < v1[2000] );
    v1[2000] = 0;
  }
}

//----- (00411CB0) --------------------------------------------------------
int __fastcall sub_411CB0(int a1, int a2)
{
  int v2; // esi
  int v3; // edx
  void *v4; // edi

  v2 = a1;
  if ( *(_DWORD *)(a1 + 8804) )
  {
    sub_4A8450(*(_DWORD *)(a1 + 8808), a2);
    v4 = *(void **)(v2 + 8804);
    *(_DWORD *)(v2 + 8808) = 0;
    if ( v4 )
    {
      sub_4A8870((int)v4, v3);
      j__free(v4);
      *(_DWORD *)(v2 + 8804) = 0;
    }
  }
  return sub_401866(v2);
}
// 401866: using guessed type int __thiscall sub_401866(_DWORD);

//----- (00411D20) --------------------------------------------------------
int __fastcall sub_411D20(int a1, int a2)
{
  int v2; // esi
  int v3; // ecx
  void *v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  u_short v7; // ST1C_2
  struct hostent *v8; // eax
  int v9; // edx
  int v10; // ecx
  void *v11; // edi
  int result; // eax

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 8808);
  if ( v3 )
    sub_4A8450(v3, a2);
  v4 = *(void **)(v2 + 8804);
  if ( v4 )
  {
    sub_4A8870(*(_DWORD *)(v2 + 8804), a2);
    j__free(v4);
    *(_DWORD *)(v2 + 8804) = 0;
  }
  v5 = operator new(0x6Cu);
  if ( v5 )
    v6 = sub_4A7C00(v5, 0, 0, (int)&sub_4027CA, 4, 0, 4096, 0x2000, 20, 1024);
  else
    v6 = 0;
  v7 = *(_DWORD *)(v2 + 8516);
  *(_DWORD *)(v2 + 8804) = v6;
  v8 = sub_4A88E0(v6, (char *)(v2 + 8004), v7, 1);
  *(_DWORD *)(v2 + 8808) = v8;
  if ( !v8 )
  {
    v11 = *(void **)(v2 + 8804);
    if ( v11 )
    {
      sub_4A8870(*(_DWORD *)(v2 + 8804), v9);
      j__free(v11);
      *(_DWORD *)(v2 + 8804) = 0;
    }
  }
  *(_DWORD *)(v2 + 8812) = 0;
  result = sub_401D39(v10, v9);
  *(_DWORD *)(v2 + 8816) = result;
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00411E70) --------------------------------------------------------
int __thiscall sub_411E70(void *this)
{
  int result; // eax
  signed int v2; // ebp
  int v3; // ebx
  unsigned int *v4; // edi
  _DWORD *v5; // eax
  int v6; // eax
  int v7; // edx
  int v8; // ecx
  struct hostent *v9; // esi
  int v10; // ebp
  int v11; // eax
  __int64 v12; // rax
  char *v13; // eax
  char v14; // cl
  int v15; // edx
  int v16; // ecx
  LONGLONG v17; // [esp-10h] [ebp-6Ch]
  char *v18; // [esp-Ch] [ebp-68h]
  LARGE_INTEGER v19; // [esp-8h] [ebp-64h]
  int v20; // [esp+14h] [ebp-48h]
  int v21; // [esp+18h] [ebp-44h]
  LARGE_INTEGER PerformanceCount; // [esp+1Ch] [ebp-40h]
  _DWORD *v23; // [esp+24h] [ebp-38h]
  char Src; // [esp+28h] [ebp-34h]
  char v25[35]; // [esp+29h] [ebp-33h]
  int v26; // [esp+58h] [ebp-4h]

  result = 0;
  v2 = 0;
  v3 = (int)this;
  v20 = 0;
  v21 = 0;
  do
  {
    v4 = 0;
    if ( result )
      break;
    v5 = operator new(0x6Cu);
    v23 = v5;
    v26 = 0;
    if ( v5 )
      v4 = sub_4A7C00(v5, 0, 0, (int)sub_4027CA, 4, 0, 4096, 0x2000, 20, 1024);
    v6 = *(_DWORD *)(v3 + 4 * v2 + 8516);
    v18 = (char *)((v2 << 8) + v3 + 8004);
    v26 = -1;
    v9 = sub_4A88E0(v4, v18, v6, 1);
    if ( v9 )
    {
      v10 = sub_401D39(v8, v7);
      while ( 1 )
      {
        if ( Frequency.QuadPart )
        {
          QueryPerformanceCounter(&PerformanceCount);
          v19 = Frequency;
          v17 = 100 * PerformanceCount.QuadPart;
          v11 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
        }
        else
        {
          v11 = GetTickCount() / 0xA;
        }
        v12 = v11 - v10;
        if ( (signed int)((HIDWORD(v12) ^ v12) - HIDWORD(v12)) >= 700 || GetAsyncKeyState(27) < 0 )
          break;
        if ( v9->h_addr_list == (char **)2 )
          goto LABEL_15;
        sub_4A96A0(v4, SHIDWORD(v12));
      }
      if ( v9->h_addr_list != (char **)2 )
        goto LABEL_23;
LABEL_15:
      v13 = (char *)(v3 + 8780);
      v20 = 1;
      Src = 1;
      do
      {
        v14 = *v13;
        v25[(_DWORD)v13 - 8780 - v3] = *v13;
        ++v13;
      }
      while ( v14 );
      sub_4A9380(v9, 0, &Src, 0x21u);
      sub_401D39(v16, v15);
      dword_53E6AC = v3;
      if ( v3 )
      {
        while ( v9->h_addr_list == (char **)2 )
        {
          if ( GetAsyncKeyState(27) < 0 )
          {
            v21 = 2;
            break;
          }
          sub_4A96A0(v4, SHIDWORD(v12));
          if ( !dword_53E6AC )
            break;
        }
      }
LABEL_23:
      sub_4A8450((int)v9, SHIDWORD(v12));
      v2 = v21;
    }
    if ( v4 )
    {
      sub_4A8870((int)v4, v7);
      j__free(v4);
    }
    result = v20;
    v21 = ++v2;
  }
  while ( v2 < 2 );
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 4027CA: using guessed type int __cdecl sub_4027CA(int, int, int);
// 53E6AC: using guessed type int dword_53E6AC;
// 411E70: using guessed type char var_33[35];

//----- (00412680) --------------------------------------------------------
unsigned int __cdecl sub_412680(int a1, int a2, int a3, int a4)
{
  int v4; // edx
  unsigned int v5; // eax
  unsigned int result; // eax

  v4 = a4 >> 3;
  v5 = 32 * (a2 & 0xFFFFFFF8);
  if ( a1 == 2 )
    result = v4 | 4 * (a3 & 0xFFFFFFF8 | v5);
  else
    result = v4 | 8 * (a3 & 0xFFFFFFFC | v5);
  return result;
}

//----- (00412710) --------------------------------------------------------
void *__thiscall sub_412710(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &FloatBase::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 5117C0: using guessed type void *FloatBase::`vftable';

//----- (00412740) --------------------------------------------------------
signed int __stdcall sub_412740(int a1)
{
  return 1;
}

//----- (00412760) --------------------------------------------------------
int __thiscall sub_412760(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int (__stdcall ***v3)(signed int); // ecx
  int (__stdcall ***v4)(signed int); // ecx

  v1 = this;
  *this = &off_511800;
  result = sub_401113(dword_563908);
  v3 = (int (__stdcall ***)(signed int))v1[833];
  if ( v3 )
  {
    result = (**v3)(1);
    v1[833] = 0;
  }
  v4 = (int (__stdcall ***)(signed int))v1[835];
  if ( v4 )
  {
    result = (**v4)(1);
    v1[835] = 0;
  }
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 511800: using guessed type int (__stdcall *off_511800)(int, int, int, int);

//----- (00412820) --------------------------------------------------------
int __userpurge sub_412820@<eax>(int result@<eax>, int a2@<ecx>, _BYTE *a3, int a4, int a5)
{
  signed int v5; // edx
  _BYTE *v6; // eax
  int v7; // edx
  _BYTE *i; // esi

  v5 = *(_DWORD *)(a2 + 3328);
  if ( v5 < 40 )
  {
    v6 = a3;
    v7 = a2 + 76 * v5;
    *(_WORD *)(v7 + 360) = -1;
    for ( i = (_BYTE *)(v7 + 288); *v6; ++i )
    {
      if ( *v6 == 126 )
      {
        ++v6;
        *(_WORD *)(76 * *(_DWORD *)(a2 + 3328) + a2 + 360) = (_WORD)i - 76 * *(_WORD *)(a2 + 3328) - a2 - 288;
      }
      *i = *v6++;
    }
    *i = 0;
    *(_DWORD *)(76 * *(_DWORD *)(a2 + 3328) + a2 + 352) = a4;
    result = 76 * *(_DWORD *)(a2 + 3328);
    *(_DWORD *)(result + a2 + 356) = a5;
    ++*(_DWORD *)(a2 + 3328);
  }
  return result;
}

//----- (00412900) --------------------------------------------------------
void __thiscall sub_412900(_DWORD *this, char a2)
{
  _DWORD *v2; // esi
  int v3; // ebp
  int v4; // ecx
  _WORD *v5; // edi
  int v6; // ebx
  int v7; // ebx
  int v8; // eax
  int v9; // edi
  int v10; // ecx
  _BYTE *v11; // eax

  v2 = this;
  if ( this[834] )
  {
    v3 = 0;
    if ( this[832] > 0 )
    {
      v4 = -360 - (_DWORD)this;
      v5 = v2 + 90;
      do
      {
        if ( *((_BYTE *)v5 - 72) && *v5 >= 0 && !*((_DWORD *)v5 - 1) )
        {
          v6 = toupper(*((char *)v2 + (_DWORD)v5 + v4 + (signed __int16)*v5 + 288));
          if ( toupper(a2) == v6 )
          {
            v2[834] = 1;
            sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
            v8 = v2[19 * v3 + 88];
            goto LABEL_27;
          }
          v4 = -360 - (_DWORD)v2;
        }
        ++v3;
        v5 += 38;
      }
      while ( v3 < v2[832] );
    }
    v7 = -1;
    if ( isalpha(a2) && v2[67] == 2 )
      v7 = toupper(a2) - 65;
    if ( isdigit(a2) && v2[67] == 1 && (v7 = a2 - 49, v7 == -1) )
    {
      v7 = 10;
    }
    else if ( v7 < 0 )
    {
      return;
    }
    v9 = 0;
    v10 = 0;
    if ( v2[832] > 0 )
    {
      v11 = v2 + 72;
      do
      {
        if ( *v11 )
        {
          if ( v10 == v7 )
          {
            v2[834] = 1;
            sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
            v8 = v2[19 * v9 + 88];
LABEL_27:
            (**(void (__stdcall ***)(_DWORD, _DWORD, int))v2[2])(v2[70], v2[71], v8);
            return;
          }
          ++v10;
        }
        ++v9;
        v11 += 76;
      }
      while ( v9 < v2[832] );
    }
  }
}

//----- (00412AF0) --------------------------------------------------------
void *__thiscall sub_412AF0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  void *result; // eax

  v3 = this;
  this[834] = 1;
  result = dword_56390C;
  if ( *((_DWORD *)dword_56390C + 1569) )
  {
    if ( !this[89] )
    {
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      result = (void *)(**(int (__stdcall ***)(_DWORD, _DWORD, _DWORD))v3[2])(v3[70], v3[71], v3[88]);
    }
  }
  return result;
}

//----- (00412B80) --------------------------------------------------------
int __thiscall sub_412B80(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[836] == -2 )
    v5[834] = 1;
  return result;
}

//----- (00412BC0) --------------------------------------------------------
int __thiscall sub_412BC0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[836] == -2 )
    v5[834] = 1;
  return result;
}

//----- (00412C00) --------------------------------------------------------
int __thiscall sub_412C00(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[836] >= 0 )
  {
    if ( v5[2] )
    {
      v5[834] = 1;
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      result = (**(int (__stdcall ***)(_DWORD, _DWORD, _DWORD))v5[2])(v5[70], v5[71], v5[19 * v5[836] + 88]);
    }
  }
  return result;
}

//----- (00412CA0) --------------------------------------------------------
int __thiscall sub_412CA0(_DWORD *this, int a2)
{
  return this[834];
}

//----- (00412CB0) --------------------------------------------------------
_DWORD *__thiscall sub_412CB0(char *this)
{
  char *v1; // esi
  _DWORD *v2; // ecx
  int v3; // ebx
  int v4; // eax
  int v5; // ecx
  int v6; // ebx
  bool v7; // zf
  int v8; // edi
  char *v9; // ebp
  int v10; // eax
  int v11; // eax
  int v12; // edi
  int v13; // edx
  int v14; // ebx
  int v15; // ecx
  int v16; // eax
  int v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  unsigned __int16 v20; // dx
  unsigned __int16 v21; // cx
  int v22; // ebp
  int v23; // ebx
  int v24; // edi
  int v25; // eax
  _DWORD *v26; // ecx
  _DWORD *v27; // ecx
  _DWORD *v28; // ecx
  _DWORD *v29; // ecx
  int v30; // ebp
  int v31; // edi
  _DWORD *v32; // ecx
  int v33; // ebx
  signed int v34; // ebx
  _DWORD *v35; // eax
  _DWORD *result; // eax
  bool v37; // sf
  int v38; // edx
  _DWORD *v39; // ecx
  int v40; // edx
  int v41; // ecx
  int v42; // eax
  int v43; // ecx
  int v44; // ebp
  char v45; // al
  char *v46; // ebx
  int v47; // edi
  int v48; // ecx
  _DWORD *v49; // eax
  _DWORD *v50; // eax
  _DWORD *v51; // ST24_4
  void (__stdcall *v52)(_DWORD *); // eax
  _DWORD *v53; // ecx
  unsigned __int8 v54; // of
  int v55; // [esp+3Ch] [ebp-64h]
  int v56; // [esp+40h] [ebp-60h]
  int v57; // [esp+44h] [ebp-5Ch]
  int v58; // [esp+48h] [ebp-58h]
  int v59; // [esp+4Ch] [ebp-54h]
  _DWORD *v60; // [esp+50h] [ebp-50h]
  _DWORD *v61; // [esp+54h] [ebp-4Ch]
  int v62; // [esp+58h] [ebp-48h]
  int v63; // [esp+5Ch] [ebp-44h]
  int v64; // [esp+60h] [ebp-40h]
  _DWORD *v65; // [esp+64h] [ebp-3Ch]
  int v66; // [esp+68h] [ebp-38h]
  int v67; // [esp+6Ch] [ebp-34h]
  int v68; // [esp+70h] [ebp-30h]
  int v69; // [esp+74h] [ebp-2Ch]
  int v70; // [esp+78h] [ebp-28h]
  int v71; // [esp+7Ch] [ebp-24h]
  char Dest; // [esp+80h] [ebp-20h]
  int v73; // [esp+9Ch] [ebp-4h]

  v1 = this;
  v2 = (_DWORD *)*((_DWORD *)this + 1);
  v62 = *(signed __int16 *)(v2[513] + 174) + 4;
  v3 = sub_49AD40(v2, v1 + 12);
  v4 = *((_DWORD *)v1 + 832);
  v5 = v62 * *((_DWORD *)v1 + 832);
  v6 = v3 + 16;
  v7 = v1[12] == 0;
  v63 = v6;
  v59 = v5;
  if ( !v7 )
  {
    v5 += v62 + 4;
    v59 = v5;
  }
  v8 = 0;
  if ( v4 > 0 )
  {
    v9 = v1 + 288;
    do
    {
      v10 = sub_49AD40(*((_DWORD **)v1 + 1), v9);
      if ( v10 > v6 )
      {
        v63 = v10;
        v6 = v10;
      }
      ++v8;
      v9 += 76;
    }
    while ( v8 < *((_DWORD *)v1 + 832) );
    v5 = v59;
  }
  v11 = *((_DWORD *)v1 + 67);
  if ( v11 == 1 || v11 == 2 )
  {
    v6 += 8;
    v63 = v6;
  }
  if ( *((_DWORD *)v1 + 68) == -1 )
    *((_DWORD *)v1 + 68) = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4) - v6 - 8) / 2;
  if ( *((_DWORD *)v1 + 69) == -1 )
    *((_DWORD *)v1 + 69) = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 8) - v5 - 8) / 3;
  v12 = *((_DWORD *)v1 + 68);
  v13 = *((_DWORD *)v1 + 69);
  v14 = v12 + v6 + 8;
  v15 = v13 + v5 + 8;
  v66 = *((_DWORD *)v1 + 68);
  v67 = v13;
  v68 = v14;
  v69 = v15;
  v16 = *(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4) - v14 - 4;
  if ( v16 < 0 )
  {
    v12 += v16;
    v66 = v12;
    v68 = v16 + v14;
  }
  v17 = *(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 8) - v15 - 4;
  if ( v17 < 0 )
  {
    v13 += v17;
    v67 = v13;
    v69 = v17 + v15;
  }
  *((_DWORD *)v1 + 68) = v12;
  *((_DWORD *)v1 + 69) = v13;
  v18 = operator new(0xCCu);
  v65 = v18;
  v73 = 0;
  if ( v18 )
    v19 = sub_49FBC0(v18, *((_DWORD *)dword_563908 + 89), v68 - v66, v69 - v67, 1);
  else
    v19 = 0;
  *((_DWORD *)v1 + 833) = v19;
  v73 = -1;
  if ( dword_576828 == 2 )
  {
    v20 = 27354;
    v21 = 8458;
  }
  else
  {
    v20 = -10854;
    v21 = 16906;
  }
  v22 = v21;
  v23 = v20;
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD))(*v19 + 60))(v19, v20, v21, 0);
  v24 = *(_DWORD *)(*((_DWORD *)v1 + 833) + 4) - 8;
  v25 = sub_49AD40(*((_DWORD **)v1 + 1), v1 + 12);
  v26 = (_DWORD *)*((_DWORD *)v1 + 833);
  *((_DWORD *)v1 + 837) = 2 * (v24 - v25);
  v55 = 0;
  v56 = 0;
  v57 = 1;
  v58 = v26[2];
  (*(void (__stdcall **)(int, int *))(*v26 + 40))(v23, &v55);
  v27 = (_DWORD *)*((_DWORD *)v1 + 833);
  v55 = 0;
  v56 = 0;
  v57 = v27[1];
  v58 = 1;
  (*(void (__stdcall **)(int, int *))(*v27 + 40))(v23, &v55);
  v28 = (_DWORD *)*((_DWORD *)v1 + 833);
  v55 = 0;
  v56 = v28[2] - 1;
  v57 = v28[1];
  v58 = v28[2];
  (*(void (__stdcall **)(int, int *))(*v28 + 40))(v22, &v55);
  v29 = (_DWORD *)*((_DWORD *)v1 + 833);
  v55 = v29[1] - 1;
  v56 = 0;
  v57 = v29[1];
  v58 = v29[2];
  (*(void (__stdcall **)(int, int *))(*v29 + 40))(v22, &v55);
  v7 = v1[12] == 0;
  v30 = v62;
  v31 = 4;
  v61 = (_DWORD *)4;
  if ( !v7 )
  {
    v32 = (_DWORD *)*((_DWORD *)v1 + 833);
    v55 = 4;
    v57 = v32[1] - 4;
    v33 = v62 + 4;
    v56 = v62 + 2;
    v58 = v62 + 4;
    (*(void (__stdcall **)(_DWORD, int *))(*v32 + 40))(*((unsigned __int16 *)dword_563908 + 80), &v55);
    v61 = (_DWORD *)(v33 + 4);
    v31 = v33 + 4;
  }
  v34 = dword_576828 != 2 ? 23243 : 11627;
  v70 = 0;
  v71 = dword_576828 != 2 ? 23243 : 11627;
  v35 = operator new(0x420u);
  v65 = v35;
  v73 = 1;
  if ( v35 )
    result = sub_49A5F0(v35, 1, &v66, 999);
  else
    result = 0;
  v7 = *((_DWORD *)v1 + 832) == 0;
  v37 = *((_DWORD *)v1 + 832) < 0;
  v73 = -1;
  *((_DWORD *)v1 + 835) = result;
  v59 = 0;
  if ( !v37 && !v7 )
  {
    v64 = v31 + 2;
    v38 = (int)(v1 + 288);
    v60 = v1 + 288;
    v65 = (_DWORD *)(-288 - (_DWORD)v1);
    do
    {
      if ( *(_BYTE *)v38 )
      {
        v42 = *((_DWORD *)v1 + 67);
        v43 = v70++ + 1;
        v44 = 4;
        if ( (unsigned int)(v42 - 1) <= 1 )
        {
          if ( !*(_DWORD *)(v38 + 68) )
          {
            Dest = 0;
            if ( v42 != 1 || v43 > 10 )
            {
              if ( v42 == 2 && v43 < 27 )
                sprintf(&Dest, "%c", v43 + 64);
            }
            else
            {
              sprintf(&Dest, "%d", v43 != 10 ? v43 : 0);
            }
            sub_49B230(*((_DWORD **)dword_563908 + 1516), &Dest, 10, *((_DWORD **)v1 + 833), 4, v64, 3, 0);
            v38 = (int)v60;
          }
          v44 = 12;
        }
        v45 = *(_BYTE *)v38;
        v46 = (char *)v38;
        if ( *(_BYTE *)v38 )
        {
          v47 = -288 - (_DWORD)v65 - (_DWORD)v1;
          do
          {
            if ( v47 != *((signed __int16 *)v60 + 36) || (v48 = 10, v60[17]) )
              v48 = 14;
            ++v46;
            v44 += sub_49B100(*((_DWORD **)v1 + 1), v45, v48, *((_DWORD *)v1 + 833), v44, v64, v60[17] != 0 ? 6 : 3, 0);
            v45 = *v46;
            ++v47;
          }
          while ( *v46 );
          v31 = (int)v61;
          v38 = (int)v60;
        }
        if ( !*(_DWORD *)(v38 + 68) )
        {
          v49 = operator new(0x18u);
          v61 = v49;
          v73 = 2;
          if ( v49 )
            v50 = sub_49A490(v49, 4, v31, v63, v62, v59);
          else
            v50 = 0;
          v51 = v50;
          v52 = *(void (__stdcall **)(_DWORD *))(**((_DWORD **)v1 + 835) + 16);
          v73 = -1;
          v52(v51);
          v38 = (int)v60;
        }
        LOWORD(v34) = v71;
        v30 = v62;
      }
      else
      {
        v39 = (_DWORD *)*((_DWORD *)v1 + 833);
        v40 = *((_DWORD *)v1 + 1);
        v55 = 4;
        v57 = v39[1] - 4;
        v56 = v31 + *(signed __int16 *)(*(_DWORD *)(v40 + 2052) + 174) / 2;
        v58 = v56 + 1;
        (*(void (__stdcall **)(_DWORD, int *))(*v39 + 40))(*((unsigned __int16 *)dword_563908 + 92), &v55);
        v41 = *((_DWORD *)v1 + 833);
        ++v56;
        ++v58;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v41 + 40))(*((unsigned __int16 *)dword_563908 + 90), &v55);
        v38 = (int)v60;
      }
      if ( *(_BYTE *)v38 && v59 < *((_DWORD *)v1 + 832) - 1 )
      {
        if ( *(_BYTE *)(v38 + 76) )
        {
          v53 = (_DWORD *)*((_DWORD *)v1 + 833);
          v55 = 4;
          v57 = v53[1] - 4;
          v56 = v31 + v30 - 1;
          v58 = v31 + v30;
          (*(void (__stdcall **)(_DWORD, int *))(*v53 + 40))((unsigned __int16)v34, &v55);
          v38 = (int)v60;
        }
      }
      v64 += v30;
      result = (_DWORD *)(v59 + 1);
      v31 += v30;
      v38 += 76;
      v54 = __OFSUB__(v59 + 1, *((_DWORD *)v1 + 832));
      v37 = v59 + 1 - *((_DWORD *)v1 + 832) < 0;
      v61 = (_DWORD *)v31;
      ++v59;
      v60 = (_DWORD *)v38;
    }
    while ( v37 ^ v54 );
  }
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (004134D0) --------------------------------------------------------
int __thiscall sub_4134D0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax

  v1 = this;
  *this = &FloatInput::`vftable';
  result = sub_401113(dword_563908);
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 511844: using guessed type void *FloatInput::`vftable';

//----- (00413540) --------------------------------------------------------
int __thiscall sub_413540(const char *this, char a2)
{
  const char *v2; // esi
  unsigned int v3; // edi
  int result; // eax

  v2 = this;
  v3 = strlen(this + 524);
  result = *((_DWORD *)v2 + 1);
  if ( a2 >= 32
    && a2 < *(_DWORD *)(result + 2060) + (signed int)*(signed __int16 *)(*(_DWORD *)(result + 2052) + 168)
    && v3 < 0x1FF )
  {
    if ( !*((_DWORD *)v2 + 259) || (result = isdigit(a2)) != 0 )
    {
      if ( a2 != 32 || (signed int)v3 >= 1 )
      {
        v2[v3 + 524] = a2;
        v2[v3 + 525] = 0;
      }
    }
  }
  return result;
}

//----- (004135E0) --------------------------------------------------------
_BYTE *__thiscall sub_4135E0(int this, _BYTE *a2, int a3)
{
  _BYTE *result; // eax

  result = a2;
  if ( a2 == (_BYTE *)8 )
  {
    result = (_BYTE *)strlen((const char *)(this + 524));
    if ( (signed int)result > 0 )
      result[this + 523] = 0;
  }
  else if ( a2 == (_BYTE *)13 )
  {
    result = *(_BYTE **)(this + 8);
    *(_DWORD *)(this + 1052) = 1;
    if ( result )
      result = (_BYTE *)(**(int (__thiscall ***)(_BYTE *, _DWORD, _DWORD, int))result)(
                          result,
                          *(_DWORD *)(this + 1044),
                          *(_DWORD *)(this + 1048),
                          this + 524);
  }
  else if ( a2 == (_BYTE *)27 )
  {
    *(_DWORD *)(this + 1052) = 1;
  }
  return result;
}

//----- (00413680) --------------------------------------------------------
int __thiscall sub_413680(_DWORD *this, int a2)
{
  return this[263];
}

//----- (00413690) --------------------------------------------------------
int __thiscall sub_413690(int this)
{
  _DWORD *v1; // esi
  int v2; // edi
  int v3; // eax
  int v4; // ebx
  __int64 v5; // rax
  int v6; // ebp
  unsigned __int16 v7; // cx
  unsigned __int16 v8; // ax
  int v9; // ebx
  int v10; // ebp
  _DWORD *v11; // ebp
  int v12; // eax
  unsigned int v13; // ecx
  char *i; // edx
  char v15; // bl
  int v16; // eax
  unsigned int v17; // ecx
  int v18; // esi
  int v19; // eax
  _DWORD **v20; // ecx
  int v22; // [esp+40h] [ebp-428h]
  int v23; // [esp+44h] [ebp-424h]
  int v24; // [esp+48h] [ebp-420h]
  int v25; // [esp+4Ch] [ebp-41Ch]
  int v26; // [esp+50h] [ebp-418h]
  int v27; // [esp+54h] [ebp-414h]
  int v28; // [esp+58h] [ebp-410h]
  int v29; // [esp+5Ch] [ebp-40Ch]
  int v30; // [esp+60h] [ebp-408h]
  char v31; // [esp+64h] [ebp-404h]

  v1 = (_DWORD *)*((_DWORD *)dword_563908 + 89);
  v2 = this;
  v3 = sub_49AD40(*(_DWORD **)(this + 4), (char *)(this + 12));
  v4 = v3 + 20;
  v5 = v1[1] - (v3 + 20);
  v6 = 2 * *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)(v2 + 4) + 2052) + 174) + 24;
  v30 = *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)(v2 + 4) + 2052) + 174);
  v26 = ((signed int)v5 - HIDWORD(v5)) >> 1;
  v27 = (v1[2] - v6) / 3;
  v28 = v4 + v26;
  v29 = v6 + v27;
  if ( dword_576828 == 2 )
  {
    v7 = 27354;
    v8 = 8458;
  }
  else
  {
    v7 = -10854;
    v8 = 16906;
  }
  v9 = v8;
  v10 = v7;
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 60))(v7, v8, &v26);
  v22 = v26;
  v23 = v27;
  v25 = v29;
  v24 = v26 + 2;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v1 + 40))(v1, v10, &v22);
  v22 = v26;
  v23 = v27;
  v25 = v27 + 2;
  v24 = v28;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v1 + 40))(v1, v10, &v22);
  v22 = v26;
  v23 = v29 - 2;
  v24 = v28;
  v25 = v29;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v1 + 40))(v1, v9, &v22);
  v24 = v28;
  v25 = v29;
  v22 = v28 - 2;
  v23 = v27;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v1 + 40))(v1, v9, &v22);
  sub_49B310(*(_DWORD **)(v2 + 4), (char *)(v2 + 12), 14, v1, v26 + 10, v27 + 10, 3, 0);
  v22 = v26 + 10;
  v23 = v27 + v30 + 11;
  v24 = v28 - 10;
  v25 = v27 + v30 + 13;
  (*(void (__thiscall **)(_DWORD *, _DWORD, int *))(*v1 + 40))(v1, 0, &v22);
  v11 = *(_DWORD **)(v2 + 4);
  v12 = v28 - v11[774] - v26 - 20;
  v13 = v2 + strlen((const char *)(v2 + 524)) + 524;
  for ( i = &v31; v13 > v2 + 524; ++i )
  {
    v15 = *(_BYTE *)(v13-- - 1);
    *i = v15;
  }
  *i = 0;
  v16 = sub_49ADA0(v11, &v31, v12);
  v17 = strlen((const char *)(v2 + 524));
  v18 = v29 - v30 - 10;
  v19 = sub_49B310(
          *(_DWORD **)(v2 + 4),
          (char *)(v17 - v16 + v2 + 524),
          10,
          *((_DWORD **)dword_563908 + 89),
          v26 + 10,
          v18,
          3,
          0);
  v20 = (_DWORD **)dword_563908;
  if ( *((_DWORD *)dword_563908 + 2705) % 60 < 40 )
  {
    sub_49B230(
      *(_DWORD **)(v2 + 4),
      (const char *)&word_511880,
      10,
      *((_DWORD **)dword_563908 + 89),
      v26 + v19 + 10,
      v18,
      3,
      0);
    v20 = (_DWORD **)dword_563908;
  }
  v22 = v28;
  v24 = v28 + 8;
  v25 = v29 + 8;
  v23 = v27 + 8;
  (*(void (__stdcall **)(signed int, _DWORD, int *))(*v20[89] + 44))(2, 0, &v22);
  v22 = v26 + 8;
  v23 = v29;
  v25 = v29 + 8;
  v24 = v28;
  return (*(int (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v22);
}
// 511880: using guessed type __int16 word_511880;
// 576828: using guessed type int dword_576828;

//----- (00413AC0) --------------------------------------------------------
int __thiscall sub_413AC0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax

  v1 = this;
  *this = &FloatWait::`vftable';
  result = sub_401113(dword_563908);
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 511888: using guessed type void *FloatWait::`vftable';

//----- (00413B30) --------------------------------------------------------
int __thiscall sub_413B30(_DWORD *this, int a2, int a3)
{
  int result; // eax

  if ( this[1] )
  {
    result = this[133];
    if ( result >= this[132] && a2 == 27 )
    {
      this[131] = 1;
      result = PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 0, 0);
    }
  }
  else if ( a2 == 27 )
  {
    this[131] = 1;
  }
  return result;
}

//----- (00413BA0) --------------------------------------------------------
int __thiscall sub_413BA0(_DWORD *this, int a2)
{
  if ( *((_DWORD *)dword_563908 + 6443) != 1 )
    this[131] = 1;
  this[133] += a2;
  return this[131];
}

//----- (00413BE0) --------------------------------------------------------
void __usercall sub_413BE0(int a1@<ecx>, int a2@<ebx>, int a3@<ebp>, int a4@<esi>, int a5, char *a6)
{
  int v6; // edi
  _DWORD *v7; // esi
  int v8; // ebx
  int v9; // eax
  int v10; // ebp
  char *v11; // eax
  int v12; // ecx
  int v13; // ebx
  unsigned __int16 v14; // dx
  unsigned __int16 v15; // ax
  int v16; // ebx
  int v17; // ebp
  int v18; // ST18_4
  char *v19; // eax
  int v20; // [esp+1Ch] [ebp-3Ch]
  int v21; // [esp+20h] [ebp-38h]
  int v22; // [esp+24h] [ebp-34h]
  char *v23; // [esp+38h] [ebp-20h]
  int v24; // [esp+3Ch] [ebp-1Ch]
  char *v25; // [esp+40h] [ebp-18h]
  int v26; // [esp+44h] [ebp-14h]
  int v27; // [esp+48h] [ebp-10h]
  int v28; // [esp+4Ch] [ebp-Ch]
  char *v29; // [esp+50h] [ebp-8h]
  int v30; // [esp+54h] [ebp-4h]
  int retaddr; // [esp+58h] [ebp+0h]

  v6 = a1;
  if ( *(_DWORD *)(a1 + 532) >= 50 )
  {
    v22 = a2;
    v21 = a3;
    v20 = a4;
    v7 = (_DWORD *)*((_DWORD *)dword_563908 + 89);
    v8 = sub_49AD40(*(_DWORD **)(a1 + 8), (char *)(a1 + 12));
    v9 = *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)(v6 + 8) + 2052) + 174);
    v10 = v9 + 20;
    if ( *(_DWORD *)(v6 + 532) >= *(_DWORD *)(v6 + 528) )
    {
      v10 += v9;
      v11 = (char *)sub_402617(0x72u);
      v12 = sub_49AD40(*(_DWORD **)(v6 + 8), v11);
      if ( v8 <= v12 )
        v8 = v12;
    }
    v13 = v8 + 20;
    v27 = (v7[1] - v13) / 2;
    v28 = (v7[2] - v10) / 3;
    v29 = (char *)(v13 + v27);
    v30 = v10 + v28;
    if ( dword_576828 == 2 )
    {
      v14 = 27354;
      v15 = 8458;
    }
    else
    {
      v14 = -10854;
      v15 = 16906;
    }
    v16 = v15;
    v17 = v14;
    (*(void (__stdcall **)(_DWORD, _DWORD, int *, int, int, int))(**((_DWORD **)dword_563908 + 89) + 60))(
      v14,
      v15,
      &v27,
      v20,
      v21,
      v22);
    v26 = v30;
    v27 = retaddr;
    v29 = a6;
    v28 = v30 + 2;
    (*(void (__thiscall **)(_DWORD *, int, int *))(*v7 + 40))(v7, v17, &v26);
    v26 = v30;
    v27 = retaddr;
    v29 = (char *)(retaddr + 2);
    v28 = a5;
    (*(void (__thiscall **)(_DWORD *, int, int *))(*v7 + 40))(v7, v17, &v26);
    v26 = v30;
    v27 = (int)(a6 - 2);
    v28 = a5;
    v29 = a6;
    (*(void (__thiscall **)(_DWORD *, int, int *))(*v7 + 40))(v7, v16, &v26);
    v28 = a5;
    v29 = a6;
    v26 = a5 - 2;
    v27 = retaddr;
    (*(void (__thiscall **)(_DWORD *, int, int *))(*v7 + 40))(v7, v16, &v26);
    sub_49B310(*(_DWORD **)(v6 + 8), (char *)(v6 + 12), 14, v7, (int)&v23[v30 + 10], retaddr + 10, 3, 0);
    if ( *(_DWORD *)(v6 + 532) >= *(_DWORD *)(v6 + 528) )
    {
      v18 = v30 + v24 + 10;
      v19 = (char *)sub_402617(0x72u);
      sub_49B310(*(_DWORD **)(v6 + 8), v19, 8, v7, v18, (int)&v25[retaddr + 10], 3, 0);
    }
    v26 = a5;
    v28 = a5 + 8;
    v29 = a6 + 8;
    v27 = retaddr + 8;
    (*(void (__cdecl **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v26);
    v23 = (char *)(v27 + 8);
    v24 = v30;
    v26 = v30 + 8;
    v25 = v29;
    (*(void (__stdcall **)(signed int, _DWORD, char **))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v23);
  }
}
// 413BE0: could not find valid save-restore pair for ebx
// 413BE0: could not find valid save-restore pair for ebp
// 413BE0: could not find valid save-restore pair for esi
// 576828: using guessed type int dword_576828;

//----- (00413F60) --------------------------------------------------------
int __thiscall sub_413F60(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  int result; // eax

  v1 = this;
  *this = &off_5118C8;
  v2 = (void (__stdcall ***)(signed int))this[1419];
  if ( v2 )
  {
    (**v2)(1);
    v1[1419] = 0;
  }
  result = sub_401113(dword_563908);
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 5118C8: using guessed type int (__stdcall *off_5118C8)(int, int, int, int);

//----- (00414010) --------------------------------------------------------
_DWORD *__thiscall sub_414010(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax
  int (__stdcall ***v4)(_DWORD, _DWORD, signed int); // ecx
  int (__stdcall ***v5)(_DWORD, _DWORD, _DWORD); // ecx

  result = this;
  if ( a2 == 13 )
  {
    v5 = (int (__stdcall ***)(_DWORD, _DWORD, _DWORD))this[1414];
    result[1424] = 1;
    if ( v5 )
      result = (_DWORD *)(**v5)(result[1415], result[1416], 0);
  }
  else if ( a2 == 27 )
  {
    v4 = (int (__stdcall ***)(_DWORD, _DWORD, signed int))this[1414];
    result[1424] = 1;
    if ( v4 )
      result = (_DWORD *)(**v4)(result[1415], result[1416], -1);
  }
  return result;
}

//----- (00414080) --------------------------------------------------------
int __thiscall sub_414080(_DWORD *this, int a2)
{
  return this[1424];
}

//----- (00414090) --------------------------------------------------------
int __thiscall sub_414090(char *this)
{
  char *v1; // esi
  _DWORD *v2; // edi
  int *v3; // ebp
  unsigned __int16 v4; // dx
  unsigned __int16 v5; // ax
  int v6; // ebx
  char *v7; // eax
  int v8; // edx
  int v9; // ecx
  int v10; // edx
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // ecx
  int v15; // edx
  int v16; // ebx
  int v17; // edx
  void (__thiscall *v18)(_DWORD *, _DWORD, int *); // edx
  int v19; // ebx
  bool v20; // zf
  bool v21; // sf
  unsigned __int8 v22; // of
  char *v23; // eax
  char v24; // cl
  int v25; // edi
  signed int v26; // ebx
  int v27; // eax
  int v28; // edx
  __int16 v29; // ax
  int v30; // edx
  int v31; // ecx
  int v32; // edx
  int v33; // ecx
  int v35; // [esp+1Ch] [ebp-25Ch]
  int v36; // [esp+20h] [ebp-258h]
  int v37; // [esp+24h] [ebp-254h]
  int v38; // [esp+28h] [ebp-250h]
  int v39; // [esp+2Ch] [ebp-24Ch]
  int v40; // [esp+40h] [ebp-238h]
  int v41; // [esp+44h] [ebp-234h]
  int v42; // [esp+48h] [ebp-230h]
  int v43; // [esp+4Ch] [ebp-22Ch]
  char *v44; // [esp+50h] [ebp-228h]
  int v45; // [esp+54h] [ebp-224h]
  int v46; // [esp+58h] [ebp-220h]
  int v47; // [esp+5Ch] [ebp-21Ch]
  int v48; // [esp+60h] [ebp-218h]
  int v49; // [esp+64h] [ebp-214h]
  int v50; // [esp+68h] [ebp-210h]
  int v51; // [esp+6Ch] [ebp-20Ch]
  char v52; // [esp+70h] [ebp-208h]
  int v53; // [esp+74h] [ebp-204h]
  char Dst[256]; // [esp+174h] [ebp-104h]

  v39 = 3;
  v38 = 3;
  v37 = 0;
  v1 = this;
  v2 = (_DWORD *)*((_DWORD *)dword_563908 + 89);
  sub_401F32(0, &v52, 0, 3, 3);
  v46 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v1 + 1413) + 2052) + 174);
  v3 = (int *)(v1 + 5680);
  v45 = *((_DWORD *)v1 + 1422) - *((_DWORD *)v1 + 1420);
  if ( dword_576828 == 2 )
  {
    v4 = 27354;
    v5 = 12687;
  }
  else
  {
    v4 = -10854;
    v5 = 25359;
  }
  v6 = v5;
  v7 = (char *)v4;
  v8 = **((_DWORD **)dword_563908 + 89);
  v44 = v7;
  (*(void (__stdcall **)(char *, int, char *))(v8 + 60))(v7, v6, v1 + 5680);
  v9 = *((_DWORD *)v1 + 1421);
  v10 = *((_DWORD *)v1 + 1423);
  v40 = *v3;
  v41 = v9;
  v42 = v40 + 2;
  v43 = v10;
  (*(void (__thiscall **)(_DWORD *, char *, int *))(*v2 + 40))(v2, v44, &v40);
  v11 = *v3;
  v12 = *((_DWORD *)v1 + 1422);
  v41 = *((_DWORD *)v1 + 1421);
  v40 = v11;
  v42 = v12;
  v43 = v41 + 2;
  (*(void (__thiscall **)(_DWORD *, char *, int *))(*v2 + 40))(v2, v44, &v40);
  v13 = *((_DWORD *)v1 + 1423);
  v40 = *v3;
  v14 = *((_DWORD *)v1 + 1422);
  v43 = v13;
  v41 = v13 - 2;
  v42 = v14;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v2 + 40))(v2, v6, &v40);
  v15 = *((_DWORD *)v1 + 1421);
  v42 = *((_DWORD *)v1 + 1422);
  v43 = *((_DWORD *)v1 + 1423);
  v40 = v42 - 2;
  v41 = v15;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v2 + 40))(v2, v6, &v40);
  v16 = *((_DWORD *)v1 + 1421) + 10;
  if ( v1[4] )
  {
    sub_49B310(*((_DWORD **)dword_563908 + 1520), v1 + 4, 3, v2, *v3 + (v45 - *((_DWORD *)v1 + 1411)) / 2, v16, 3, 0);
    v17 = *((_DWORD *)v1 + 1422);
    v48 = *v3 + 10;
    v50 = v17 - 10;
    v18 = *(void (__thiscall **)(_DWORD *, _DWORD, int *))(*v2 + 40);
    v49 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1520) + 2052) + 174) + v16 + 2;
    v51 = v49 + 2;
    v18(v2, *((unsigned __int16 *)dword_563908 + 79), &v48);
  }
  v19 = *((_DWORD *)v1 + 1410) + v16;
  v20 = *((_DWORD *)v1 + 1409) == 0;
  v21 = *((_DWORD *)v1 + 1409) < 0;
  v47 = 0;
  if ( !v21 && !v20 )
  {
    v44 = v1 + 260;
    do
    {
      sub_49B310(*((_DWORD **)v1 + 1413), v44, 14, v2, *v3 + 10, v19, 3, 0);
      v19 += v46;
      v44 += 256;
      v22 = __OFSUB__(v47 + 1, *((_DWORD *)v1 + 1409));
      v21 = v47++ + 1 - *((_DWORD *)v1 + 1409) < 0;
    }
    while ( v21 ^ v22 );
  }
  v23 = v1 + 5380;
  do
  {
    v24 = *v23;
    v23[Dst - (v1 + 5380)] = *v23;
    ++v23;
  }
  while ( v24 );
  v25 = *v3 + (v45 - *((_DWORD *)v1 + 1417)) / 2;
  v46 = *((_DWORD *)v1 + 1421) + *((_DWORD *)v1 + 1412) + *((_DWORD *)v1 + 1410) + 14;
  v26 = 0;
  do
  {
    sub_48CA10((int)&v53, Dst);
    if ( !(_BYTE)v53 )
      break;
    v27 = *((_DWORD *)v1 + 1418);
    v28 = v27 == v26 ? *((unsigned __int16 *)dword_563908 + 15404) : *((unsigned __int16 *)dword_563908 + 15402);
    v45 = v28;
    v29 = v27 == v26 ? *((_WORD *)dword_563908 + 15403) : *((_WORD *)dword_563908 + 15401);
    v39 = v46;
    v38 = v25;
    v37 = (signed __int16)v45;
    v30 = *((signed __int16 *)dword_563908 + 15400);
    v36 = v29;
    v35 = v30;
    ++v26;
    v25 += sub_4011E0(*((_DWORD *)dword_563908 + 89), &v53, v30, v29, (signed __int16)v45, v25, v46) + 5;
  }
  while ( v26 < 10 );
  v31 = *((_DWORD *)v1 + 1423);
  v40 = *((_DWORD *)v1 + 1422);
  v42 = v40 + 8;
  v41 = *((_DWORD *)v1 + 1421) + 8;
  v43 = v31 + 8;
  (*(void (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v40);
  v32 = *((_DWORD *)v1 + 1422);
  v33 = *v3;
  v41 = *((_DWORD *)v1 + 1423);
  v42 = v32;
  v40 = v33 + 8;
  v43 = v41 + 8;
  return (*(int (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v40);
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;
// 414090: using guessed type char Dst[256];

//----- (00414580) --------------------------------------------------------
int __thiscall sub_414580(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (004145A0) --------------------------------------------------------
int __thiscall sub_4145A0(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (004145C0) --------------------------------------------------------
signed int __thiscall sub_4145C0(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  signed int result; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 5672);
  result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**(_DWORD **)(this + 5676) + 4))(a2, a3, 0, 0);
  *(_DWORD *)(v4 + 5672) = result;
  if ( result >= 0 && result != v5 )
    result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  return result;
}

//----- (00414630) --------------------------------------------------------
int __thiscall sub_414630(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax
  bool v7; // zf

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[1418] >= 0 )
  {
    v7 = v5[1414] == 0;
    v5[1424] = 1;
    if ( !v7 )
    {
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      result = (**(int (__stdcall ***)(_DWORD, _DWORD, _DWORD))v5[1414])(v5[1415], v5[1416], v5[1418]);
    }
  }
  return result;
}

//----- (004146D0) --------------------------------------------------------
int __thiscall sub_4146D0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax

  v1 = this;
  *this = &off_511908;
  result = sub_401113(dword_563908);
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 511908: using guessed type int (__stdcall *off_511908)(int, int, int, int);

//----- (00414740) --------------------------------------------------------
signed int __thiscall sub_414740(int *this, int a2)
{
  int *v2; // esi
  signed int v3; // ebp
  int v4; // edi
  int *v5; // ebx
  bool v6; // zf
  int v7; // eax
  signed int result; // eax

  v2 = this;
  sub_4A9F90(dword_56390C);
  v3 = sub_4A9FA0();
  v4 = 0;
  if ( v3 <= 0 )
  {
LABEL_24:
    v2[5] += a2;
    if ( v2[5] >= v2[4] )
      v2[3] = 1;
    return v2[3];
  }
  v5 = v2 + 6;
  while ( 1 )
  {
    if ( *((_DWORD *)dword_563918 + 2343) )
    {
      if ( v4 == 17 || v4 == 16 )
        goto LABEL_23;
      v6 = v4 == 18;
    }
    else
    {
      if ( v4 == 163 || v4 == 162 || v4 == 161 || v4 == 160 || v4 == 165 )
        goto LABEL_23;
      v6 = v4 == 164;
    }
    if ( !v6 )
    {
      v7 = sub_4A9E50(dword_56390C, v4);
      if ( *v5 )
      {
        if ( v7 )
          goto LABEL_23;
      }
      else if ( !v7 )
      {
        goto LABEL_23;
      }
      *v5 = v7;
      if ( !v2[522] )
      {
        if ( !v7 )
          goto LABEL_23;
        v2[522] = 1;
      }
      if ( !v7 )
      {
        sub_4AA5E0(dword_56390C, v2[2], v2[519], v2[520], v2[521]);
        goto LABEL_28;
      }
      v2[v2[518]++ + 519] = v4;
      sub_4AA1F0(v2 + 519, v2 + 520, v2 + 521);
      if ( v2[518] == 3 )
        break;
    }
LABEL_23:
    ++v4;
    ++v5;
    if ( v4 >= v3 )
      goto LABEL_24;
  }
  sub_4AA5E0(dword_56390C, v2[2], v2[519], v2[520], v2[521]);
LABEL_28:
  result = 1;
  v2[3] = 1;
  return result;
}

//----- (00414930) --------------------------------------------------------
int __thiscall sub_414930(int *this)
{
  int *v1; // edi
  int v2; // eax
  char *v3; // eax
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // ebp
  __int64 v7; // rax
  int v8; // ebx
  unsigned __int16 v9; // dx
  unsigned __int16 v10; // ax
  int v11; // ebx
  int v12; // ebp
  int v13; // ebp
  int v14; // ST1C_4
  int v15; // ST18_4
  char *v16; // eax
  int v17; // eax
  int v18; // ecx
  int v19; // ebx
  int v21; // [esp+38h] [ebp-228h]
  int v22; // [esp+3Ch] [ebp-224h]
  int v23; // [esp+40h] [ebp-220h]
  int v24; // [esp+44h] [ebp-21Ch]
  int v25; // [esp+48h] [ebp-218h]
  int v26; // [esp+4Ch] [ebp-214h]
  int v27; // [esp+50h] [ebp-210h]
  int v28; // [esp+54h] [ebp-20Ch]
  int v29; // [esp+58h] [ebp-208h]
  char Dest; // [esp+5Ch] [ebp-204h]
  char v31; // [esp+15Ch] [ebp-104h]

  v1 = this;
  v2 = sub_4A9DE0(dword_56390C, this[2]);
  v3 = sub_4AA690(v2);
  sprintf(&Dest, "Press New Key(s) (old=%s)", v3);
  v4 = (_DWORD *)*((_DWORD *)dword_563908 + 89);
  v5 = sub_49AD40((_DWORD *)v1[1], &Dest);
  v6 = v5 + 20;
  v7 = v4[1] - (v5 + 20);
  v8 = 2 * *(signed __int16 *)(*(_DWORD *)(v1[1] + 2052) + 174) + 20;
  v29 = *(signed __int16 *)(*(_DWORD *)(v1[1] + 2052) + 174);
  v25 = ((signed int)v7 - HIDWORD(v7)) >> 1;
  v26 = (v4[2] - v8) / 3;
  v27 = v6 + v25;
  v28 = v8 + v26;
  if ( dword_576828 == 2 )
  {
    v9 = 27354;
    v10 = 8458;
  }
  else
  {
    v9 = -10854;
    v10 = 16906;
  }
  v11 = v10;
  v12 = v9;
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 60))(v9, v10, &v25);
  v21 = v25;
  v22 = v26;
  v24 = v28;
  v23 = v25 + 2;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v4 + 40))(v4, v12, &v21);
  v21 = v25;
  v22 = v26;
  v24 = v26 + 2;
  v23 = v27;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v4 + 40))(v4, v12, &v21);
  v21 = v25;
  v22 = v28 - 2;
  v23 = v27;
  v24 = v28;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v4 + 40))(v4, v11, &v21);
  v23 = v27;
  v24 = v28;
  v21 = v27 - 2;
  v22 = v26;
  (*(void (__thiscall **)(_DWORD *, int, int *))(*v4 + 40))(v4, v11, &v21);
  sub_49B310((_DWORD *)v1[1], &Dest, 14, v4, v25 + 10, v26 + 10, 3, 0);
  v13 = v29;
  v14 = v26 + v29 + 10;
  v15 = v25 + 10;
  v16 = sub_4AA370(v1[519], v1[520], v1[521]);
  v17 = sub_49B310((_DWORD *)v1[1], v16, 3, v4, v15, v14, 3, 0);
  v18 = v1[4] - v1[5];
  v19 = v17;
  sprintf(&v31, "(%d.%02d)", v18 / 100, v18 % 100);
  sub_49B310((_DWORD *)v1[1], &v31, 8, v4, v19 + v25 + 26, v26 + v13 + 10, 3, 0);
  v21 = v27;
  v23 = v27 + 8;
  v22 = v26 + 8;
  v24 = v28 + 8;
  (*(void (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v21);
  v21 = v25 + 8;
  v22 = v28;
  v24 = v28 + 8;
  v23 = v27;
  return (*(int (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v21);
}
// 576828: using guessed type int dword_576828;

//----- (00414D00) --------------------------------------------------------
int __thiscall sub_414D00(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  int result; // eax

  v1 = this;
  *this = &FloatSkillDialogBox::`vftable';
  sub_401221(0);
  v2 = (void (__stdcall ***)(signed int))v1[1];
  if ( v2 )
  {
    (**v2)(1);
    v1[1] = 0;
  }
  result = sub_401113(dword_563908);
  *v1 = &FloatBase::`vftable';
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 401221: using guessed type _DWORD __stdcall sub_401221(_DWORD);
// 5117C0: using guessed type void *FloatBase::`vftable';
// 511974: using guessed type void *FloatSkillDialogBox::`vftable';

//----- (00414DB0) --------------------------------------------------------
char *__thiscall sub_414DB0(_DWORD *this, char *a2, int a3)
{
  _DWORD *v3; // esi
  char *result; // eax
  _DWORD *v5; // ecx
  signed int v6; // edx

  v3 = this;
  if ( *((_DWORD *)dword_56390C + 1587) )
    this[2] = 1;
  result = a2;
  switch ( (unsigned int)a2 )
  {
    case 0xDu:
    case 0x20u:
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      v3[2] = 1;
      v5 = (_DWORD *)*((_DWORD *)dword_563908 + 1512);
      v6 = v5[2000];
      result = 0;
      if ( v6 > 0 )
      {
        while ( *(_DWORD *)(*v5 + 272) != 1 || result != (char *)v3[4] )
        {
          ++result;
          ++v5;
          if ( (signed int)result >= v6 )
            return result;
        }
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 64))(*(_DWORD *)(*v5 + 192));
        result = (char *)dword_563908;
        if ( *(_DWORD *)((char *)dword_563908 + 53786) )
        {
          result = (char *)sub_4014FB(*((_DWORD *)dword_563908 + 6897));
          if ( result )
            result = (char *)sub_401CEE(dword_563908);
        }
      }
      break;
    case 0x1Bu:
      this[2] = 1;
      break;
    case 0x26u:
      result = (char *)this[4];
      if ( (signed int)result > 0 )
      {
        this[4] = result - 1;
        result = (char *)sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      }
      break;
    case 0x28u:
      result = (char *)this[4];
      if ( (signed int)result < this[5] - 1 )
      {
        this[4] = result + 1;
        result = (char *)sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      }
      break;
    default:
      return result;
  }
  return result;
}
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401CEE: using guessed type int __thiscall sub_401CEE(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00414F80) --------------------------------------------------------
signed int __thiscall sub_414F80(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  signed int result; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 12);
  result = (*(int (__stdcall **)(int, int, int, int))(**(_DWORD **)(this + 4) + 4))(a2, a3, this + 24, this + 28);
  *(_DWORD *)(v4 + 12) = result;
  if ( result != v5 && (result == 2 || result == 3) )
    result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  return result;
}

//----- (00415000) --------------------------------------------------------
int __thiscall sub_415000(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  (*(void (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[3] == 1 )
  {
    result = v5[7] / (signed int)*(signed __int16 *)(*(_DWORD *)(v5[8] + 2052) + 174);
    if ( result < v5[5] )
    {
      v5[4] = result;
      result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
    }
  }
  else if ( v5[3] == 2 )
  {
    result = (*(int (__thiscall **)(_DWORD *, signed int, _DWORD))(*v5 + 24))(v5, 13, 0);
  }
  else
  {
    result = v5[3] - 3;
    if ( v5[3] == 3 )
      result = (*(int (__thiscall **)(_DWORD *, signed int, _DWORD))(*v5 + 24))(v5, 27, 0);
  }
  return result;
}

//----- (004150E0) --------------------------------------------------------
BOOL __thiscall sub_4150E0(_DWORD *this, int a2)
{
  return this[2] != 0;
}

//----- (004150F0) --------------------------------------------------------
int __thiscall sub_4150F0(_DWORD *this)
{
  int v1; // edi
  _DWORD *v2; // ebx
  int v3; // ecx
  int v4; // kr08_4
  int v5; // eax
  int v6; // esi
  int v7; // ebp
  int v8; // eax
  int v9; // edi
  _DWORD *v10; // ecx
  int result; // eax
  int v12; // esi
  int v13; // eax
  int v14; // edi
  int v15; // edx
  __int64 v16; // rax
  int v17; // edi
  int v18; // edx
  int v19; // ebp
  int v20; // ST34_4
  unsigned __int16 v21; // ax
  int v22; // edx
  int v23; // ecx
  int v24; // eax
  int v25; // edi
  __int16 v26; // ax
  int v27; // eax
  int v28; // ecx
  int v29; // eax
  int v30; // ecx
  int v31; // edi
  int v32; // eax
  char *v33; // esi
  _DWORD *v34; // ecx
  unsigned int v35; // eax
  char *v36; // esi
  int v37; // eax
  int v38; // eax
  int v39; // [esp+10h] [ebp-82Ch]
  int v40; // [esp+10h] [ebp-82Ch]
  int v41; // [esp+14h] [ebp-828h]
  int v42; // [esp+18h] [ebp-824h]
  int v43; // [esp+1Ch] [ebp-820h]
  int v44; // [esp+20h] [ebp-81Ch]
  int v45; // [esp+24h] [ebp-818h]
  int v46; // [esp+28h] [ebp-814h]
  int v47; // [esp+2Ch] [ebp-810h]
  int v48; // [esp+30h] [ebp-80Ch]
  int v49; // [esp+34h] [ebp-808h]
  char Dst; // [esp+38h] [ebp-804h]

  v1 = *((_DWORD *)dword_563908 + 89);
  v2 = this;
  v3 = *((_DWORD *)dword_563908 + 6945);
  v4 = *(_DWORD *)(v1 + 4) - *(signed __int16 *)(v3 + 172);
  v5 = *(_DWORD *)(v1 + 8) - *(signed __int16 *)(v3 + 174);
  v6 = v5 / 2;
  v7 = v4 / 2;
  v42 = v4 / 2;
  v44 = v5 / 2;
  sub_4A50B0(v3, 0, v1, v4 / 2, v5 / 2, 3, *((_DWORD *)dword_563908 + 6946), 0, 0, 0);
  v8 = v2[3];
  if ( v8 == 2 )
  {
    sub_4A50B0(
      *((_DWORD *)dword_563908 + 6949),
      0,
      *((_DWORD *)dword_563908 + 89),
      v7 + *(_DWORD *)((char *)dword_563908 + 53754),
      v6 + *(_DWORD *)((char *)dword_563908 + 53758),
      3,
      0,
      0,
      0,
      0);
  }
  else if ( v8 == 3 )
  {
    sub_4A50B0(
      *((_DWORD *)dword_563908 + 6953),
      0,
      *((_DWORD *)dword_563908 + 89),
      v7 + *(_DWORD *)((char *)dword_563908 + 53762),
      v6 + *(_DWORD *)((char *)dword_563908 + 53766),
      3,
      0,
      0,
      0,
      0);
  }
  v9 = 0;
  v2[5] = 0;
  v10 = dword_563908;
  v41 = v6 + *(_DWORD *)((char *)dword_563908 + 53442);
  result = *((_DWORD *)dword_563908 + 1512);
  v43 = 0;
  if ( *(_DWORD *)(result + 8000) > 0 )
  {
    do
    {
      v12 = *(_DWORD *)(result + 4 * v9);
      if ( *(_DWORD *)(v12 + 272) == 1 )
      {
        if ( v9 == v2[4] )
        {
          v13 = sub_49AD40((_DWORD *)v2[9], (char *)(v12 + 8));
          v14 = *(_DWORD *)((char *)dword_563908 + 53438);
          v15 = v13;
          v39 = v13;
          if ( *(_DWORD *)((char *)dword_563908 + 53782) )
          {
            v16 = v14 + *(_DWORD *)((char *)dword_563908 + 53446) - v13;
            LODWORD(v16) = v16 - HIDWORD(v16);
            v15 = v39;
            v17 = v7 + ((signed int)v16 >> 1);
          }
          else
          {
            v17 = v14 + v7 + 2;
          }
          if ( *(_DWORD *)((char *)dword_563908 + 53782) )
          {
            v46 = v7 + *(_DWORD *)((char *)dword_563908 + 53438);
            v48 = v7 + *(_DWORD *)((char *)dword_563908 + 53446);
          }
          else
          {
            v46 = v17 - 2;
            v48 = v17 - 2 + v15 + 4;
          }
          v18 = v2[9];
          v47 = v41;
          v49 = v41 + *(signed __int16 *)(*(_DWORD *)(v18 + 2052) + 174);
          v19 = **((_DWORD **)dword_563908 + 89);
          v20 = *((_DWORD *)dword_563908 + 89);
          v21 = sub_40223E(dword_576828, *(_DWORD *)((char *)dword_563908 + 53778));
          (*(void (__thiscall **)(int, _DWORD, int *))(v19 + 40))(v20, v21, &v46);
          sub_49B310(
            (_DWORD *)v2[9],
            (char *)(v12 + 8),
            *((signed __int16 *)dword_563908 + 26898),
            *((_DWORD **)dword_563908 + 89),
            v17,
            v41,
            3,
            0);
          v24 = *(_DWORD *)(v12 + 336);
          if ( v24 )
          {
            v25 = *(signed __int16 *)(v24 + 170);
            v26 = *(_WORD *)(v12 + 332);
            if ( v26 )
              v25 = v26;
            v27 = sub_401D39(v23, v22);
            v28 = *(_DWORD *)(v12 + 336);
            if ( v25 || (v25 = *(signed __int16 *)(v28 + 170), *(_WORD *)(v28 + 170)) )
              v29 = *(signed __int16 *)(v28 + 178) * (v27 % v25) / v25;
            else
              v29 = 0;
            sub_4A50B0(
              v28,
              v29,
              *((_DWORD *)dword_563908 + 89),
              v42 + *(_DWORD *)((char *)dword_563908 + 53770),
              v44 + *(_DWORD *)((char *)dword_563908 + 53774),
              *(_DWORD *)(v12 + 340) | 0x100,
              *(_DWORD *)(v12 + 328),
              0,
              0,
              0);
          }
          v30 = *(_DWORD *)((char *)dword_563908 + 53454);
          v31 = v44 + *(_DWORD *)((char *)dword_563908 + 53458);
          v45 = v30 + v42;
          v32 = sub_49AE50((_DWORD *)v2[10], &Dst, *(void **)(v12 + 4), *(_DWORD *)((char *)dword_563908 + 53462) - v30);
          v33 = &Dst;
          if ( v32 > 0 )
          {
            v34 = (_DWORD *)v2[10];
            v40 = v32;
            do
            {
              sub_49B310(
                v34,
                v33,
                *((signed __int16 *)dword_563908 + 26900),
                *((_DWORD **)dword_563908 + 89),
                v45,
                v31,
                3,
                0);
              v35 = (unsigned int)&v33[strlen(v33) + 1];
              v34 = (_DWORD *)v2[10];
              v33 = (char *)v35;
              v31 += *(signed __int16 *)(v34[513] + 174);
              --v40;
            }
            while ( v40 );
          }
          v7 = v4 / 2;
          v9 = v43;
        }
        else
        {
          v36 = (char *)(v12 + 8);
          v37 = sub_49AD40((_DWORD *)v2[8], v36);
          if ( *(_DWORD *)((char *)dword_563908 + 53782) )
            v38 = v7 + (*(_DWORD *)((char *)dword_563908 + 53438) + *(_DWORD *)((char *)dword_563908 + 53446) - v37) / 2;
          else
            v38 = *(_DWORD *)((char *)dword_563908 + 53438) + v7 + 2;
          sub_49B310(
            (_DWORD *)v2[8],
            v36,
            *((signed __int16 *)dword_563908 + 26896),
            *((_DWORD **)dword_563908 + 89),
            v38,
            v41,
            3,
            0);
        }
        v41 += *(signed __int16 *)(*(_DWORD *)(v2[8] + 2052) + 174);
        ++v2[5];
        v10 = dword_563908;
      }
      result = v10[1512];
      v43 = ++v9;
    }
    while ( v9 < *(_DWORD *)(result + 8000) );
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (00415620) --------------------------------------------------------
int __thiscall sub_415620(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // ST08_4
  void (__stdcall *v8)(_DWORD *); // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // ST08_4
  void (__stdcall *v12)(_DWORD *); // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // ST08_4
  int (__stdcall *v16)(_DWORD *); // eax
  int v18; // [esp+10h] [ebp-1Ch]
  int v19; // [esp+14h] [ebp-18h]
  int v20; // [esp+18h] [ebp-14h]
  int v21; // [esp+1Ch] [ebp-10h]
  int v22; // [esp+28h] [ebp-4h]

  v1 = this;
  v18 = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4)
       - (signed int)*(signed __int16 *)(*((_DWORD *)dword_563908 + 6945) + 172))
      / 2;
  v19 = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 8)
       - (signed int)*(signed __int16 *)(*((_DWORD *)dword_563908 + 6945) + 174))
      / 2;
  v20 = v18 + *(signed __int16 *)(*((_DWORD *)dword_563908 + 6945) + 172);
  v2 = (void (__stdcall ***)(signed int))this[1];
  v21 = v19 + *(signed __int16 *)(*((_DWORD *)dword_563908 + 6945) + 174);
  if ( v2 )
  {
    (**v2)(1);
    v1[1] = 0;
  }
  v3 = operator new(0x420u);
  v22 = 0;
  if ( v3 )
    v4 = sub_49A5F0(v3, 1, &v18, -1);
  else
    v4 = 0;
  v22 = -1;
  v1[1] = v4;
  v5 = operator new(0x18u);
  v22 = 1;
  if ( v5 )
    v6 = sub_49A4D0(v5, (char *)dword_563908 + 53438, 1);
  else
    v6 = 0;
  v7 = v6;
  v8 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[1] + 16);
  v22 = -1;
  v8(v7);
  v9 = operator new(0x18u);
  v22 = 2;
  if ( v9 )
    v10 = sub_49A4D0(v9, (char *)dword_563908 + 53470, 2);
  else
    v10 = 0;
  v11 = v10;
  v12 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[1] + 16);
  v22 = -1;
  v12(v11);
  v13 = operator new(0x18u);
  v22 = 3;
  if ( v13 )
    v14 = sub_49A4D0(v13, (char *)dword_563908 + 53486, 3);
  else
    v14 = 0;
  v15 = v14;
  v16 = *(int (__stdcall **)(_DWORD *))(*(_DWORD *)v1[1] + 16);
  v22 = -1;
  return v16(v15);
}

//----- (00415860) --------------------------------------------------------
void *__thiscall sub_415860(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_401401();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 401401: using guessed type int sub_401401(void);

//----- (004158A0) --------------------------------------------------------
int __thiscall sub_4158A0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  bool v5; // zf
  int result; // eax

  v4 = this;
  v5 = this[835] == 0;
  this[836] = -1;
  if ( v5 )
    sub_4016E5();
  result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v4[835] + 4))(a2, a3, 0, 0);
  if ( result == -1 )
  {
    v4[836] = -2;
  }
  else if ( result != 999 )
  {
    v4[836] = result;
  }
  return result;
}
// 4016E5: using guessed type int sub_4016E5(void);

//----- (00415910) --------------------------------------------------------
int __thiscall sub_415910(char *this)
{
  char *v1; // esi
  int v2; // eax
  int v3; // ecx
  int v4; // ecx
  int v5; // eax
  int v6; // edx
  int v7; // ebx
  int v8; // edi
  int v9; // ecx
  int v10; // ST38_4
  int result; // eax
  int v12; // ecx
  bool v13; // zf
  int v14; // edi
  int v15; // eax
  int v16; // edx
  int v17; // eax
  int v18; // [esp+3Ch] [ebp-10h]
  int v19; // [esp+40h] [ebp-Ch]
  int v20; // [esp+44h] [ebp-8h]
  int v21; // [esp+48h] [ebp-4h]

  v1 = this;
  if ( !*((_DWORD *)this + 833) )
    sub_4016E5();
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**((_DWORD **)v1 + 833) + 4))(
    0,
    *((_DWORD *)dword_563908 + 89),
    *((_DWORD *)v1 + 68),
    *((_DWORD *)v1 + 69),
    0,
    0);
  v2 = *((_DWORD *)v1 + 68);
  v18 = v2 + 6;
  v3 = *((_DWORD *)v1 + 833);
  v20 = *(_DWORD *)(v3 + 4) + v2 + 6;
  v19 = *((_DWORD *)v1 + 69) + *(_DWORD *)(v3 + 8);
  v21 = v19 + 6;
  (*(void (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v18);
  v4 = *((_DWORD *)v1 + 833);
  v18 = *((_DWORD *)v1 + 68) + *(_DWORD *)(v4 + 4);
  v20 = v18 + 6;
  v5 = *((_DWORD *)v1 + 69);
  v19 = v5 + 6;
  v21 = v5 + *(_DWORD *)(v4 + 8);
  (*(void (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 44))(2, 0, &v18);
  v6 = *(_DWORD *)(*((_DWORD *)v1 + 1) + 2052);
  v7 = *(signed __int16 *)(v6 + 174) + 4;
  v8 = *((_DWORD *)v1 + 69) + 4;
  if ( v1[12] )
  {
    v9 = 0;
    if ( *((_DWORD *)v1 + 837) > 0 )
    {
      v10 = *((_DWORD *)v1 + 837);
      v9 = sub_401D39(0, v6) / 2 % v10;
      if ( v9 > v10 / 2 )
        v9 = *((_DWORD *)v1 + 837) - v9;
    }
    sub_49B310(
      *((_DWORD **)v1 + 1),
      v1 + 12,
      10,
      *((_DWORD **)dword_563908 + 89),
      v9 + *((_DWORD *)v1 + 68) + 4,
      v8,
      3,
      0);
    v8 += v7 + 4;
  }
  result = *((_DWORD *)v1 + 836);
  if ( result >= 0 )
  {
    v12 = *((_DWORD *)v1 + 68);
    v13 = *((_DWORD *)v1 + 67) == 0;
    v14 = v7 * result + v8 + 1;
    v15 = *((_DWORD *)v1 + 1);
    v18 = v12 + 4;
    v19 = v14;
    v16 = *(signed __int16 *)(*(_DWORD *)(v15 + 2052) + 174) + v14 + 1;
    v17 = *((_DWORD *)v1 + 833);
    v21 = v16;
    v20 = *(_DWORD *)(v17 + 4) + v12 - 4;
    if ( !v13 )
      v18 += 8;
    (*(void (__stdcall **)(signed int, _DWORD, int *))(**((_DWORD **)dword_563908 + 89) + 60))(10, 0, &v18);
    result = sub_49B310(
               *((_DWORD **)v1 + 1),
               &v1[76 * *((_DWORD *)v1 + 836) + 288],
               0,
               *((_DWORD **)dword_563908 + 89),
               v18,
               v19 + 1,
               3,
               0);
  }
  return result;
}
// 4016E5: using guessed type int sub_4016E5(void);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00415BC0) --------------------------------------------------------
char *__thiscall sub_415BC0(char *this, int a2, int a3, char *Source, int a5, int a6, int a7, int a8, int a9)
{
  char *v9; // esi
  char *v10; // eax
  int v11; // edx
  char v12; // cl

  v9 = this;
  *((_DWORD *)this + 1) = a2;
  v10 = (char *)a3;
  *(_DWORD *)this = &FloatInput::`vftable';
  v11 = (int)&this[-a3 + 12];
  do
  {
    v12 = *v10;
    v10[v11] = *v10;
    ++v10;
  }
  while ( v12 );
  strncpy(v9 + 524, Source, 0x200u);
  v9[1035] = 0;
  *((_DWORD *)v9 + 259) = a5;
  *((_DWORD *)v9 + 260) = a6;
  *((_DWORD *)v9 + 2) = a7;
  *((_DWORD *)v9 + 261) = a8;
  *((_DWORD *)v9 + 262) = a9;
  *((_DWORD *)v9 + 263) = 0;
  sub_4024D2(v9);
  return v9;
}
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 511844: using guessed type void *FloatInput::`vftable';

//----- (00415CD0) --------------------------------------------------------
void *__thiscall sub_415CD0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_402473();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 402473: using guessed type int sub_402473(void);

//----- (00415D00) --------------------------------------------------------
_DWORD *__thiscall sub_415D00(_DWORD *this, int a2, char *a3, int a4, int a5)
{
  _DWORD *v5; // esi
  char *v6; // eax
  int v7; // edx
  char v8; // cl

  v5 = this;
  this[1] = a5;
  v6 = a3;
  *this = &FloatWait::`vftable';
  this[2] = a2;
  v7 = (char *)(this + 3) - a3;
  do
  {
    v8 = *v6;
    v6[v7] = *v6;
    ++v6;
  }
  while ( v8 );
  v5[131] = 0;
  v5[132] = a4;
  v5[133] = 0;
  *((_DWORD *)dword_563908 + 6443) = 1;
  sub_4024D2(v5);
  return v5;
}
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 511888: using guessed type void *FloatWait::`vftable';

//----- (00415DE0) --------------------------------------------------------
void *__thiscall sub_415DE0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4019B0();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4019B0: using guessed type int sub_4019B0(void);

//----- (00415E10) --------------------------------------------------------
char *__thiscall sub_415E10(char *this, char *a2, int a3, int a4, void *a5, const char *a6, int a7, int a8, int a9, int a10)
{
  char *v10; // esi
  char *v11; // eax
  char *v12; // edi
  char v13; // cl
  bool v14; // zf
  int v15; // ebp
  char *v16; // eax
  char v17; // cl
  signed int v18; // edi
  int v19; // eax
  int v20; // ebx
  int v21; // eax
  int v22; // ebp
  const char *v23; // edx
  const char *v24; // eax
  int v25; // edi
  char v26; // cl
  int v27; // eax
  int v28; // eax
  int v29; // ebp
  int v30; // eax
  int v31; // ecx
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  int v34; // ecx
  int v35; // eax
  int v36; // ebx
  int v37; // edi
  char *v38; // eax
  char v39; // cl
  int v40; // ebp
  _DWORD *v41; // eax
  _DWORD *v42; // eax
  int v43; // edx
  void (__stdcall *v44)(size_t); // eax
  int *v46; // [esp-10h] [ebp-224Ch]
  int v47; // [esp-Ch] [ebp-2248h]
  signed int v48; // [esp-8h] [ebp-2244h]
  size_t v49; // [esp-4h] [ebp-2240h]
  void *Src; // [esp+14h] [ebp-2228h]
  char *v51; // [esp+18h] [ebp-2224h]
  _DWORD *v52; // [esp+1Ch] [ebp-2220h]
  int v53; // [esp+20h] [ebp-221Ch]
  int v54; // [esp+24h] [ebp-2218h]
  char *v55; // [esp+28h] [ebp-2214h]
  int v56; // [esp+2Ch] [ebp-2210h]
  char Dst[256]; // [esp+12Ch] [ebp-2110h]
  char v58; // [esp+22Ch] [ebp-2010h]
  int v59; // [esp+2238h] [ebp-4h]

  v10 = this;
  v55 = this;
  Src = a5;
  v11 = a2;
  v12 = this + 4;
  v59 = 0;
  *(_DWORD *)this = &off_5118C8;
  this[4] = 0;
  if ( a2 )
  {
    do
    {
      v13 = *v11;
      v11[v12 - a2] = *v11;
      ++v11;
    }
    while ( v13 );
  }
  *((_DWORD *)v10 + 1414) = a4;
  *((_DWORD *)v10 + 1413) = a3;
  strcpy(v10 + 5380, a6);
  v14 = *v12 == 0;
  *((_DWORD *)v10 + 1415) = a7;
  *((_DWORD *)v10 + 1416) = a8;
  *((_DWORD *)v10 + 1409) = 0;
  *((_DWORD *)v10 + 1410) = 0;
  *((_DWORD *)v10 + 1411) = 0;
  if ( !v14 )
  {
    *((_DWORD *)v10 + 1410) = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1520) + 2052) + 174) + 5;
    *((_DWORD *)v10 + 1411) = sub_49AD40(*((_DWORD **)dword_563908 + 1520), v12);
  }
  v15 = 4 * *(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4) / 5;
  v16 = v10 + 5380;
  v51 = (char *)(Dst - (v10 + 5380));
  do
  {
    v17 = *v16;
    v16[Dst - (v10 + 5380)] = *v16;
    ++v16;
  }
  while ( v17 );
  *((_DWORD *)v10 + 1417) = 0;
  v18 = 0;
  do
  {
    sub_48CA10((int)&v56, Dst);
    if ( !(_BYTE)v56 )
      break;
    sub_401F32(&v54, &v52, &v56, 3, 3);
    *((_DWORD *)v10 + 1417) += v54 + 5;
    ++v18;
  }
  while ( v18 < 10 );
  v19 = sub_49AD40(*((_DWORD **)v10 + 1413), (char *)Src);
  v20 = a9;
  if ( !a9 )
  {
    if ( v19 <= *((_DWORD *)v10 + 1417) )
      v19 = *((_DWORD *)v10 + 1417);
    v20 = v19 + 20;
  }
  if ( v20 >= v15 )
    v20 = v15;
  v49 = v20 - 20;
  v21 = sub_49AE50(*((_DWORD **)v10 + 1413), &v58, Src, v20 - 20);
  v22 = 0;
  *((_DWORD *)v10 + 1409) = v21;
  v23 = &v58;
  if ( v21 > 0 )
  {
    Src = v10 + 260;
    do
    {
      v24 = v23;
      v25 = (_BYTE *)Src - v23;
      do
      {
        v26 = *v24;
        v24[v25] = *v24;
        ++v24;
      }
      while ( v26 );
      Src = (char *)Src + 256;
      ++v22;
      v23 += strlen(v23) + 1;
    }
    while ( v22 < *((_DWORD *)v10 + 1409) );
  }
  v27 = *((_DWORD *)v10 + 1409);
  if ( v27 <= a10 )
    v27 = a10;
  v28 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v10 + 1413) + 2052) + 174) * v27;
  v49 = 3;
  v48 = 3;
  v47 = 0;
  v46 = &v53;
  *((_DWORD *)v10 + 1412) = v28;
  sub_401F32(0, v46, v47, v48, v49);
  v29 = *((_DWORD *)v10 + 1412) + *((_DWORD *)v10 + 1410) + v53 + 24;
  *((_DWORD *)v10 + 1420) = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4) - v20) / 2;
  v30 = (*(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 8) - v29) / 3;
  v31 = v20 + *((_DWORD *)v10 + 1420);
  v49 = 1056;
  *((_DWORD *)v10 + 1421) = v30;
  *((_DWORD *)v10 + 1422) = v31;
  *((_DWORD *)v10 + 1423) = v29 + v30;
  v32 = operator new(v49);
  v52 = v32;
  LOBYTE(v59) = 1;
  if ( v32 )
    v33 = sub_49A5F0(v32, 1, (_DWORD *)v10 + 1420, -1);
  else
    v33 = 0;
  v34 = *((_DWORD *)v10 + 1412);
  *((_DWORD *)v10 + 1419) = v33;
  v35 = v20 - *((_DWORD *)v10 + 1417);
  LOBYTE(v59) = 0;
  v36 = *((_DWORD *)v10 + 1410) + v34 + 14;
  *((_DWORD *)v10 + 1418) = -1;
  v37 = v35 / 2;
  v38 = v10 + 5380;
  do
  {
    v39 = *v38;
    v38[(_DWORD)v51] = *v38;
    ++v38;
  }
  while ( v39 );
  v40 = 0;
  do
  {
    sub_48CA10((int)&v56, Dst);
    if ( !(_BYTE)v56 )
      break;
    sub_401F32(&Src, &v51, &v56, 3, 3);
    v41 = operator new(0x18u);
    v52 = v41;
    LOBYTE(v59) = 2;
    v42 = v41 ? sub_49A490(v41, v37, v36, (int)Src, (int)v51, v40) : 0;
    v43 = **((_DWORD **)v10 + 1419);
    v49 = (size_t)v42;
    v44 = *(void (__stdcall **)(size_t))(v43 + 16);
    LOBYTE(v59) = 0;
    v44(v49);
    ++v40;
    v37 += (int)Src + 5;
  }
  while ( v40 < 10 );
  *((_DWORD *)v10 + 1424) = 0;
  sub_4024D2(v10);
  return v10;
}
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 5118C8: using guessed type int (__stdcall *off_5118C8)(int, int, int, int);
// 415E10: using guessed type char Dst[256];

//----- (004163A0) --------------------------------------------------------
void *__thiscall sub_4163A0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_401F05();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 401F05: using guessed type int sub_401F05(void);

//----- (004163D0) --------------------------------------------------------
_DWORD *__thiscall sub_4163D0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  signed int v6; // ebp
  int *v7; // ebx

  v4 = this;
  this[1] = a2;
  *this = &off_511908;
  this[2] = a3;
  this[519] = 0;
  this[520] = 0;
  this[521] = 0;
  v5 = 0;
  this[518] = 0;
  this[4] = a4;
  this[3] = 0;
  this[5] = 0;
  this[522] = 0;
  sub_4A9F90(dword_56390C);
  v6 = sub_4A9FA0();
  if ( v6 > 0 )
  {
    v7 = v4 + 6;
    do
    {
      *v7 = sub_4A9E50(dword_56390C, v5++);
      ++v7;
    }
    while ( v5 < v6 );
  }
  sub_4024D2(v4);
  return v4;
}
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 511908: using guessed type int (__stdcall *off_511908)(int, int, int, int);

//----- (004164D0) --------------------------------------------------------
void *__thiscall sub_4164D0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_40192E();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 40192E: using guessed type int sub_40192E(void);

//----- (00416500) --------------------------------------------------------
_DWORD *__thiscall sub_416500(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  signed __int16 *v3; // ecx
  int v4; // eax
  int v5; // eax

  v1 = this;
  v2 = 0;
  *this = &FloatSkillDialogBox::`vftable';
  this[4] = 0;
  this[1] = 0;
  this[5] = 0;
  this[3] = -1;
  this[2] = 0;
  v3 = (signed __int16 *)dword_563908;
  v4 = *((_DWORD *)dword_563908 + 1512);
  if ( *(_DWORD *)(v4 + 8000) > 0 )
  {
    do
    {
      v5 = *(_DWORD *)(v4 + 4 * v2);
      if ( *(_DWORD *)(v5 + 272) == 1 )
      {
        if ( sub_494FB0(*(_DWORD *)(v5 + 192), *((_DWORD *)v3 + 78) + 60) > 0 )
        {
          v1[4] = v2;
          v3 = (signed __int16 *)dword_563908;
          break;
        }
        v3 = (signed __int16 *)dword_563908;
      }
      v4 = *((_DWORD *)v3 + 1512);
      ++v2;
    }
    while ( v2 < *(_DWORD *)(v4 + 8000) );
  }
  v1[8] = *(_DWORD *)&v3[2 * v3[26895] + 3032];
  v1[9] = *((_DWORD *)dword_563908 + *((signed __int16 *)dword_563908 + 26897) + 1516);
  v1[10] = *((_DWORD *)dword_563908 + *((signed __int16 *)dword_563908 + 26899) + 1516);
  sub_401A91(v1);
  sub_4024D2(v1);
  sub_401221(1);
  return v1;
}
// 401221: using guessed type _DWORD __stdcall sub_401221(_DWORD);
// 401A91: using guessed type int __thiscall sub_401A91(_DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 511974: using guessed type void *FloatSkillDialogBox::`vftable';

//----- (00416670) --------------------------------------------------------
void *__thiscall sub_416670(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_401D20();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 401D20: using guessed type int sub_401D20(void);

//----- (004166A0) --------------------------------------------------------
_DWORD *__thiscall sub_4166A0(_DWORD *this, int a2, char *a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  _DWORD *v9; // esi
  char *v10; // eax
  char v11; // cl

  v9 = this;
  *this = &off_511800;
  sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
  sub_4024D2(v9);
  v10 = a3;
  *((_BYTE *)v9 + 12) = 0;
  if ( a3 )
  {
    do
    {
      v11 = *v10;
      v10[(char *)(v9 + 3) - a3] = *v10;
      ++v10;
    }
    while ( v11 );
  }
  v9[67] = a9;
  v9[68] = a5;
  v9[2] = a4;
  v9[69] = a6;
  v9[71] = a8;
  v9[70] = a7;
  v9[832] = 0;
  v9[833] = 0;
  v9[836] = -1;
  v9[834] = 0;
  v9[835] = 0;
  v9[837] = 0;
  v9[1] = a2;
  return v9;
}
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 511800: using guessed type int (__stdcall *off_511800)(int, int, int, int);

//----- (00416910) --------------------------------------------------------
double __cdecl sub_416910(int a1)
{
  return (double)((a1 + 180000) % 240000) * 0.00002617993877916667;
}

//----- (00416970) --------------------------------------------------------
int __cdecl sub_416970(int a1)
{
  int result; // eax

  result = a1;
  if ( dword_53A7C4 )
    result = 10 * a1 / 7;
  return result;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00416A30) --------------------------------------------------------
int __thiscall sub_416A30(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int result; // eax

  if ( a2 < 0 || a3 < 0 || (v3 = this[1], a2 >= v3) || a3 >= this[2] )
    result = 0;
  else
    result = this[(*(_BYTE *)(3 * (a2 + a3 * v3) + this[1292]) & 0x7F) + 520];
  return result;
}

//----- (00416A90) --------------------------------------------------------
int __thiscall sub_416A90(_DWORD *this, int a2, int a3)
{
  return *(_BYTE *)(3 * (a2 + a3 * this[1]) + this[1292] + 2) & 0x1F;
}

//----- (00416AC0) --------------------------------------------------------
unsigned int __thiscall sub_416AC0(_DWORD *this, int a2, int a3)
{
  return (unsigned int)*(unsigned __int8 *)(3 * (a2 + a3 * this[1]) + this[1292] + 2) >> 5;
}

//----- (00416AF0) --------------------------------------------------------
int __thiscall sub_416AF0(_DWORD *this, int a2, int a3)
{
  return this[(*(_BYTE *)(3 * (a2 + a3 * this[1]) + this[1292]) & 0x7F) + 520];
}

//----- (00416B60) --------------------------------------------------------
int *__thiscall sub_416B60(int *this, int a2)
{
  int *v2; // esi
  int v3; // ST04_4

  v2 = this;
  *this = 0;
  nullsub_1(this);
  v3 = *v2;
  *v2 = a2 ^ 0x12345678;
  nullsub_3(v2, v3, a2 ^ 0x12345678);
  return v2;
}
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (00416BB0) --------------------------------------------------------
int __thiscall sub_416BB0(int *this, int a2)
{
  int v2; // ST04_4

  v2 = *this;
  *this = a2 ^ 0x12345678;
  nullsub_3(this, v2, a2 ^ 0x12345678);
  return a2;
}
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (00416C70) --------------------------------------------------------
int __cdecl sub_416C70(int a1, void *Dst)
{
  int v2; // edi
  char v3; // bl
  char v4; // ST34_1
  int result; // eax
  int v6; // [esp+14h] [ebp+4h]

  v2 = a1;
  sub_48CA10(a1, Dst);
  sub_48CA10(a1 + 24, Dst);
  *(_WORD *)(a1 + 48) = sub_48CBB0(Dst);
  *(_WORD *)(a1 + 50) = sub_48CBB0(Dst);
  v3 = sub_48CBB0(Dst);
  v4 = sub_48CBB0(Dst);
  v6 = (unsigned __int8)sub_48CBB0(Dst);
  BYTE1(v6) = v4;
  BYTE2(v6) = v3;
  *(_DWORD *)(v2 + 52) = v6;
  result = sub_48CBB0(Dst);
  *(_WORD *)(v2 + 56) = result;
  return result;
}

//----- (00416D60) --------------------------------------------------------
int __thiscall sub_416D60(int this, int a2)
{
  void (__thiscall *v2)(int, signed int, _DWORD); // edx
  int (__thiscall ***v3)(_DWORD, signed int, _DWORD); // esi

  v2 = **(void (__thiscall ***)(int, signed int, _DWORD))(this + 8);
  v3 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(this + 8);
  *(_DWORD *)(this + 60) = 1;
  v2(this + 8, 1, 0);
  return (**v3)(v3, 2, 0);
}

//----- (00416DB0) --------------------------------------------------------
int __cdecl sub_416DB0(int a1, int a2)
{
  int result; // eax

  result = 0;
  if ( a1 )
    result = (*(unsigned __int16 *)(a1 + 192) + 3) | ((*(signed __int16 *)(a2 + 48) | (*(signed __int16 *)(a2 + 50) << 7)) << 16) | 0x100;
  return result;
}

//----- (00416E00) --------------------------------------------------------
int __cdecl sub_416E00(int *a1, signed __int16 *a2)
{
  int *v2; // edi
  int v3; // eax
  int v4; // ebp
  int v5; // eax
  int v6; // ecx
  bool v7; // zf
  int v8; // edx
  int result; // eax
  char v10; // bl
  int v11; // edx
  int v12; // ecx
  int v13; // [esp+Ch] [ebp-20h]
  int v14; // [esp+10h] [ebp-1Ch]
  int v15; // [esp+14h] [ebp-18h]
  int v16; // [esp+18h] [ebp-14h]
  int v17; // [esp+1Ch] [ebp-10h]
  int v18; // [esp+20h] [ebp-Ch]
  int v19; // [esp+24h] [ebp-8h]
  int v20; // [esp+28h] [ebp-4h]
  char v21; // [esp+30h] [ebp+4h]

  v2 = a1;
  v3 = *a1;
  v21 = *(_BYTE *)(*a1 + 199);
  if ( v21 == 5 && *(_BYTE *)(*(_DWORD *)a2 + 199) == 5 )
    return 0;
  if ( v2[9] < *((_DWORD *)a2 + 7) )
    return 0;
  if ( v2[7] > *((_DWORD *)a2 + 9) )
    return 0;
  v19 = v2[10];
  v17 = *((_DWORD *)a2 + 8);
  if ( v2[10] < *((_DWORD *)a2 + 8) )
    return 0;
  v20 = v2[8];
  v16 = *((_DWORD *)a2 + 10);
  if ( v2[8] > *((_DWORD *)a2 + 10) )
    return 0;
  v13 = *((signed __int16 *)v2 + 7);
  v4 = *((signed __int16 *)v2 + 5) + *(signed __int16 *)(v3 + 172) / 2;
  v5 = a2[7];
  v6 = a2[5] + *(signed __int16 *)(*(_DWORD *)a2 + 172) / 2;
  v8 = v13 - v5;
  v7 = v13 == v5;
  v18 = a2[7];
  v15 = *(_DWORD *)a2;
  v14 = v13 - v5;
  result = v13 - v5;
  if ( v7 )
  {
    result = v4 - v6;
    if ( v4 == v6 )
    {
      result = abs(*v2) - abs(*(_DWORD *)a2);
      if ( !result )
        result = *((signed __int16 *)v2 + 4) - a2[4];
      v8 = v14;
    }
  }
  if ( !v21 || !*(_BYTE *)(v15 + 199) )
  {
    if ( v21 == 1 || (v10 = *(_BYTE *)(v15 + 199), v10 == 1) )
    {
      if ( v13 <= v16 && v13 >= v17 && v18 <= v19 && v18 >= v20 )
      {
        v12 = v13 + v6 - v18 - v4;
        if ( v12 )
          result = v12;
      }
    }
    else if ( (v21 == 2 || v10 == 2) && v13 <= v16 && v13 >= v17 && v18 <= v19 && v18 >= v20 )
    {
      v11 = v4 + v8 - v6;
      if ( v11 )
        result = v11;
    }
  }
  return result;
}

//----- (00417030) --------------------------------------------------------
int __thiscall sub_417030(char *this)
{
  _DWORD *v1; // ebp
  signed int v2; // ebx
  const char *v3; // edi
  signed int v4; // esi
  int result; // eax
  _WORD *v6; // ecx
  signed int v7; // esi
  int v8; // edi
  int v9; // ebx
  __int16 v10; // ax
  signed int v11; // eax
  int v12; // eax
  int v13; // edx
  int v14; // ST08_4
  int v15; // esi
  int v16; // eax
  int v17; // ecx
  int v18; // ecx
  signed int v19; // [esp+10h] [ebp-4h]

  v1 = this;
  v2 = 0;
  v3 = this + 27876;
  v4 = 0;
  while ( 1 )
  {
    result = _stricmp((const char *)dword_563918 + v4 + 10568, v3);
    if ( !result )
      break;
    v4 += 1084;
    ++v2;
    if ( v4 >= 32520 )
      return result;
  }
  v19 = v2;
  if ( v2 < 30 )
  {
    v6 = dword_563918;
    v7 = 0;
    v8 = 542 * v2;
    v9 = 1084 * v2 + 10608;
    do
    {
      v10 = *(_WORD *)((char *)v6 + v9);
      if ( !v10 )
        break;
      v11 = abs(v10);
      if ( v11 <= 5100 )
      {
        v12 = *(_DWORD *)(v1[1507] + 4 * v11 + 8008);
        if ( v12 )
        {
          *(_WORD *)(v12 + 268) = v6[v8 + 5560 + v7];
          v13 = *(_DWORD *)(v12 + 272);
          v14 = (v7 + 1) ^ 0x12345678;
          *(_DWORD *)(v12 + 272) = v14;
          nullsub_3(v12 + 272, v13, v14);
          v6 = dword_563918;
        }
      }
      ++v7;
      v9 += 2;
    }
    while ( v7 < 256 );
    v15 = 1084 * v19;
    v1[72] = *(_DWORD *)&v6[542 * v19 + 5824];
    v16 = *((_DWORD *)dword_563918 + 271 * v19 + 2911);
    if ( v16 )
      v1[3100] = v16;
    v17 = v1[1505];
    sub_401E9C(*(_DWORD *)((char *)dword_563918 + v15 + 11636));
    v18 = v1[1513];
    result = sub_401FEB(*(_DWORD *)((char *)dword_563918 + v15 + 11640));
  }
  return result;
}
// 401E9C: using guessed type _DWORD __stdcall sub_401E9C(_DWORD);
// 401FEB: using guessed type _DWORD __stdcall sub_401FEB(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (004171C0) --------------------------------------------------------
int __thiscall sub_4171C0(_DWORD *this)
{
  signed int v1; // edx
  int v2; // eax

  v1 = 160;
  if ( this[3110] == 160 )
  {
    v2 = this[1500];
    if ( *(_DWORD *)(v2 + 28) == 160 )
      *(_DWORD *)(v2 + 28) = 0;
    v1 = *(_DWORD *)(this[1500] + 28);
  }
  this[3110] = v1;
  return sub_401965(dword_563908);
}
// 401965: using guessed type int __thiscall sub_401965(_DWORD);

//----- (004174E0) --------------------------------------------------------
signed int __thiscall sub_4174E0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int v3; // edx
  int v4; // edx
  int v5; // eax
  _DWORD *v6; // ebx
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  int v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  int v14; // edx
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  signed int v17; // eax
  _DWORD *v18; // ecx
  int v19; // eax
  signed int v20; // eax
  signed int v21; // eax
  signed int result; // eax
  char *v23; // [esp+28h] [ebp-1Ch]
  int v24; // [esp+2Ch] [ebp-18h]
  int v25; // [esp+30h] [ebp-14h]

  v1 = this;
  this[6929] = 1;
  this[78] = operator new(0x7D4u);
  v1[2679] = sub_4AA830((int *)Memory);
  v1[2677] = sub_4AA830((int *)Memory);
  v1[2678] = sub_4AA830((int *)Memory);
  v1[80] = sub_4AA830((int *)Memory);
  v1[81] = sub_4AA830((int *)Memory);
  v1[82] = sub_4AA830((int *)Memory);
  v1[83] = sub_4AA830((int *)Memory);
  v1[84] = sub_4AA830((int *)Memory);
  v1[85] = sub_4AA830((int *)Memory);
  v1[86] = sub_4AA830((int *)Memory);
  v1[87] = sub_4AA830((int *)Memory);
  v1[88] = sub_4AA830((int *)Memory);
  v1[73] = sub_4AA830((int *)Memory);
  v1[74] = sub_4AA830((int *)Memory);
  v1[75] = sub_4AA830((int *)Memory);
  v1[76] = sub_4AA830((int *)Memory);
  v1[2680] = sub_4AA830((int *)Memory);
  memset(v1 + 6973, 0, 0x16046u);
  v1[622] = 0;
  v1[1509] = 0;
  v1[1500] = 0;
  v1[1499] = 0;
  v1[1513] = 0;
  v1[1506] = 0;
  v1[1505] = 0;
  v1[354] = 0;
  v1[91] = 0;
  v1[90] = 0;
  v1[355] = 0;
  v1[478] = 0;
  v1[1535] = 0;
  v1[1504] = 0;
  v1[1503] = 0;
  v1[1501] = 0;
  v1[1508] = 0;
  v1[1507] = 0;
  v1[1511] = 0;
  v1[1512] = 0;
  v1[1531] = 0;
  v1[1514] = 0;
  v1[1534] = 0;
  v1[356] = 0;
  v1[357] = 0;
  v1[358] = 0;
  v1[359] = 0;
  v1[360] = 0;
  v1[361] = 0;
  v1[362] = 0;
  v1[363] = 0;
  memset(v1 + 523, 0, 0x50u);
  v1[507] = 0;
  v1[508] = 0;
  v1[509] = 0;
  v1[510] = 0;
  v1[511] = 0;
  v1[512] = 0;
  v1[513] = 0;
  v1[514] = 0;
  v1[515] = 0;
  v1[516] = 0;
  v1[517] = 0;
  v1[518] = 0;
  v1[519] = 0;
  v1[520] = 0;
  v1[521] = 0;
  v1[522] = 0;
  v1[547] = 0;
  v1[548] = 0;
  v1[549] = 0;
  v1[550] = 0;
  v1[551] = 0;
  v1[552] = 0;
  v1[553] = 0;
  v1[554] = 0;
  v1[543] = 0;
  v1[544] = 0;
  v1[545] = 0;
  v1[546] = 0;
  v1[479] = 0;
  v1[480] = 0;
  v1[481] = 0;
  v1[482] = 0;
  v1[491] = 0;
  v1[492] = 0;
  v1[493] = 0;
  v1[494] = 0;
  v1[495] = 0;
  v1[496] = 0;
  v1[497] = 0;
  v1[498] = 0;
  v1[499] = 0;
  v1[500] = 0;
  v1[501] = 0;
  v1[502] = 0;
  v1[503] = 0;
  v1[504] = 0;
  v1[505] = 0;
  v1[506] = 0;
  v1[483] = 0;
  v1[484] = 0;
  v1[485] = 0;
  v1[486] = 0;
  v1[487] = 0;
  v1[488] = 0;
  v1[489] = 0;
  v1[490] = 0;
  v1[2690] = 0;
  v1[6930] = GetMenu(*((HWND *)dword_563918 + 3));
  SetMenu(*((HWND *)dword_563918 + 3), 0);
  SystemParametersInfoA(3u, 0, v1 + 2697, 1u);
  v2 = v1[2698];
  v3 = v1[2699];
  v1[2694] = v1[2697];
  v1[2695] = v2;
  v1[2696] = v3;
  v4 = *((_DWORD *)dword_563918 + 17);
  v5 = 0;
  v25 = 0;
  if ( v4 > 0 )
  {
    v6 = (char *)dword_563918 + 200;
    v24 = 0;
    v23 = (char *)dword_563918 + 200;
    do
    {
      if ( *(v6 - 32) == *((_DWORD *)dword_563918 + 2211) && *v6 == *((_DWORD *)dword_563918 + 2212) )
        break;
      if ( *v6 < *(_DWORD *)((char *)dword_563918 + v24 + 200) )
      {
        v25 = v5;
        v24 = (int)&v23[-200 - (_DWORD)dword_563918];
      }
      ++v5;
      v6 = v23 + 4;
      v23 += 4;
    }
    while ( v5 < v4 );
  }
  if ( v5 == v4 )
  {
    *((_DWORD *)dword_563918 + 2211) = *((_DWORD *)dword_563918 + v25 + 18);
    *((_DWORD *)dword_563918 + 2212) = *((_DWORD *)dword_563918 + v25 + 50);
  }
  v7 = operator new(0xD8u);
  if ( v7 )
    v8 = sub_4A0990(
           v7,
           *((_DWORD *)dword_563918 + 3),
           *((_DWORD *)dword_563918 + 2211),
           *((_DWORD *)dword_563918 + 2212),
           16,
           dword_563910,
           *((_DWORD *)dword_563918 + 2219),
           *((_DWORD *)dword_563918 + 2229),
           *((_DWORD *)dword_563918 + 2231),
           1);
  else
    v8 = 0;
  *(_WORD *)((char *)&v23 + 1) = 7710;
  v1[89] = v8;
  LOBYTE(v23) = 100;
  v9 = sub_49CA30(v8);
  sub_4A45C0(v9);
  sub_4A3A10(*((_DWORD *)dword_563918 + 2248));
  sub_4A3940((int)v23);
  v10 = operator new(0x12810u);
  if ( v10 )
    v11 = sub_4B3A80(v10);
  else
    v11 = 0;
  v1[1502] = v11;
  v12 = operator new(0xF0u);
  if ( v12 )
    v13 = sub_4A6420(v12, *((_DWORD *)dword_563918 + 3), 22050, 8, 2, *((_DWORD *)dword_563918 + 2241), 1);
  else
    v13 = 0;
  v14 = v1[89];
  v1[354] = v13;
  sub_4A5AF0(v13, 0.30000001, 0.30000001, 1.0, 64, *(_DWORD *)(v14 + 4));
  sub_4A6BF0((_DWORD *)v1[354], *((_DWORD *)dword_563918 + 2242));
  v15 = operator new(0x1280Cu);
  if ( v15 )
    v16 = sub_4B36E0(v15, v1[354]);
  else
    v16 = 0;
  v1[1515] = v16;
  v1[3105] = 0;
  v17 = *((_DWORD *)dword_563918 + 2246);
  if ( v17 > 160 )
    v17 = 160;
  v18 = (_DWORD *)v1[89];
  v1[3110] = v17;
  v1[3113] = v17;
  v1[3106] = v17;
  v1[3107] = 0;
  v19 = 2 * v18[2] / 3;
  if ( v19 >= *((_DWORD *)dword_563918 + 2244) )
    v19 = *((_DWORD *)dword_563918 + 2244);
  v1[3108] = v19;
  v1[3109] = v19;
  v20 = v18[1];
  if ( v20 <= 1600 )
  {
    if ( v20 <= 1280 )
    {
      if ( v20 <= 1024 )
      {
        if ( v20 <= 800 )
        {
          v1[3100] = 160;
          v1[3099] = 160;
        }
        else
        {
          v1[3100] = 260;
          v1[3099] = 260;
        }
      }
      else
      {
        v1[3100] = 300;
        v1[3099] = 300;
      }
    }
    else
    {
      v1[3100] = 320;
      v1[3099] = 320;
    }
  }
  else
  {
    v1[3100] = 340;
    v1[3099] = 340;
  }
  v21 = sub_49CA30(v18);
  *((_WORD *)v1 + 72) = v21 != 2 ? -1528 : 32008;
  *((_WORD *)v1 + 73) = v21 != 2 ? -2048 : 31744;
  *((_WORD *)v1 + 74) = v21 != 2 ? -24576 : 20480;
  *((_WORD *)v1 + 75) = v21 != 2 ? 0x4000 : 0x2000;
  *((_WORD *)v1 + 76) = v21 != 2 ? 2016 : 992;
  *((_WORD *)v1 + 77) = v21 != 2 ? 1280 : 640;
  *((_WORD *)v1 + 78) = v21 != 2 ? 512 : 256;
  *((_WORD *)v1 + 82) = v21 != 2 ? -1 : 0x7FFF;
  *((_WORD *)v1 + 83) = v21 != 2 ? -32 : 32736;
  *((_WORD *)v1 + 84) = v21 != 2 ? -14816 : 25344;
  *((_WORD *)v1 + 79) = 31;
  *((_WORD *)v1 + 80) = 16;
  *((_WORD *)v1 + 81) = 8;
  *((_WORD *)v1 + 85) = v21 != 2 ? 16896 : 8448;
  *((_WORD *)v1 + 86) = v21 != 2 ? -2017 : 31775;
  *((_WORD *)v1 + 87) = v21 != 2 ? -32752 : 16400;
  *((_WORD *)v1 + 88) = v21 != 2 ? 16392 : 8200;
  *((_WORD *)v1 + 89) = v21 != 2 ? -1024 : 32256;
  *((_WORD *)v1 + 95) = v21 != 2 ? -14824 : 25368;
  *((_WORD *)v1 + 90) = v21 != 2 ? -31728 : 16912;
  *((_WORD *)v1 + 91) = v21 != 2 ? 25356 : 12684;
  *((_WORD *)v1 + 92) = v21 != 2 ? 16904 : 8456;
  *((_WORD *)v1 + 93) = v21 != 2 ? -7 : 32761;
  *((_WORD *)v1 + 94) = v21 != 2 ? 29139 : 14579;
  v1[49] = (unsigned __int16)(v21 != 2 ? -20458 : 22550);
  result = v21 != 2 ? 45078 : 22550;
  *((_WORD *)v1 + 96) = result;
  *((_WORD *)v1 + 97) = 12;
  v1[6929] = 0;
  return result;
}
// 563910: using guessed type int dword_563910;

//----- (004182B0) --------------------------------------------------------
int __thiscall sub_4182B0(const char *this)
{
  const char *v1; // eax
  signed int v2; // esi
  const char *v3; // ebx
  signed int v4; // ebp
  int v5; // edi
  bool v6; // zf
  int v7; // edi
  char *v8; // ecx
  char *v9; // edx
  char v10; // al
  int v11; // eax
  int v12; // ecx
  int result; // eax
  signed int v14; // ebp
  signed int v15; // esi
  signed __int16 *v16; // ebx
  signed int v17; // eax
  int v18; // eax
  int v19; // [esp+10h] [ebp-1Ch]
  int v20; // [esp+14h] [ebp-18h]
  int i; // [esp+18h] [ebp-14h]
  int v22; // [esp+1Ch] [ebp-10h]
  const char *v23; // [esp+28h] [ebp-4h]

  v1 = (const char *)dword_563918;
  v2 = 0;
  v3 = this;
  v4 = -1;
  v23 = this;
  v19 = 0;
  v5 = 0;
  while ( 1 )
  {
    v6 = _stricmp(&v1[v2 + 10568], v3 + 27876) == 0;
    v1 = (const char *)dword_563918;
    if ( v6 )
      break;
    if ( v4 == -1 || *(_DWORD *)((char *)dword_563918 + v2 + 11632) < v4 )
    {
      v4 = *(_DWORD *)((char *)dword_563918 + v2 + 11632);
      v19 = v5;
    }
    v2 += 1084;
    ++v5;
    if ( v2 >= 32520 )
      goto LABEL_9;
  }
  v19 = v5;
LABEL_9:
  v7 = 1084 * v19;
  memset((char *)dword_563918 + 1084 * v19 + 10568, 0, 0x43Cu);
  v8 = (char *)(v3 + 27876);
  v9 = (char *)dword_563918 + 1084 * v19 + 10568;
  do
  {
    v10 = *v8;
    *v9++ = *v8++;
  }
  while ( v10 );
  v11 = _time64(0);
  *(_DWORD *)((char *)dword_563918 + v7 + 11632) = v11;
  *(_DWORD *)((char *)dword_563918 + v7 + 11636) = *(_DWORD *)(*((_DWORD *)v3 + 1505) + 28);
  *(_DWORD *)((char *)dword_563918 + v7 + 11644) = *((_DWORD *)v3 + 3100);
  *(_DWORD *)((char *)dword_563918 + v7 + 11640) = *(_DWORD *)(*((_DWORD *)v3 + 1513) + 52);
  *(_DWORD *)((char *)dword_563918 + v7 + 11648) = *((_DWORD *)v3 + 72);
  v12 = *((_DWORD *)v3 + 1507);
  result = 0;
  v14 = 0;
  for ( i = 0; result < *(_DWORD *)(v12 + 8000); i = ++result )
  {
    if ( v14 >= 256 )
      break;
    v20 = *(_DWORD *)(v12 + 4 * result);
    v22 = *(_DWORD *)(v20 + 272) ^ 0x12345678;
    if ( v22 )
    {
      v15 = 0;
      if ( v14 > 0 )
      {
        v16 = (signed __int16 *)((char *)dword_563918 + v7 + 10608);
        while ( 1 )
        {
          v17 = abs(*v16);
          v18 = v17 <= 5100 ? *(_DWORD *)(v12 + 4 * v17 + 8008) : 0;
          if ( v22 < (*(_DWORD *)(v18 + 272) ^ 0x12345678) )
            break;
          ++v15;
          ++v16;
          if ( v15 >= v14 )
            goto LABEL_23;
        }
        memcpy_0(
          (char *)dword_563918 + 2 * (542 * v19 + v15) + 10610,
          (char *)dword_563918 + 2 * (542 * v19 + v15) + 10608,
          2 * (v14 - v15));
        memcpy_0(
          (char *)dword_563918 + 2 * (v15 + 542 * v19) + 11122,
          (char *)dword_563918 + 2 * (542 * v19 + v15) + 11120,
          2 * (v14 - v15));
        v7 = 1084 * v19;
      }
LABEL_23:
      *((_WORD *)dword_563918 + 542 * v19 + v15 + 5304) = *(_WORD *)(v20 + 128);
      v3 = v23;
      *((_WORD *)dword_563918 + v15 + 542 * v19 + 5560) = *(_WORD *)(v20 + 268);
      result = i;
      ++v14;
    }
    v12 = *((_DWORD *)v3 + 1507);
  }
  return result;
}

//----- (004185D0) --------------------------------------------------------
void __thiscall sub_4185D0(_DWORD *this, int *a2, int *a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  int v5; // esi
  unsigned __int16 v6; // ax
  int *v7; // esi
  signed __int16 *v8; // ecx
  int v9; // ebp
  signed __int16 *v10; // ecx
  int v11; // ebp
  int v12; // ecx
  int v13; // eax
  signed __int16 *v14; // ecx
  int v15; // ebp
  signed __int16 *v16; // ecx
  int v17; // ebp
  int v18; // ecx
  int v19; // eax
  int v20; // ecx
  int v21; // edx
  int v22; // ecx
  int v23; // ebp
  int v24; // ST08_4
  int v25; // ebx
  int v26; // ST08_4
  int v27; // [esp+10h] [ebp-10h]
  int v28; // [esp+10h] [ebp-10h]
  int v29; // [esp+14h] [ebp-Ch]
  int v30; // [esp+14h] [ebp-Ch]
  char v31; // [esp+18h] [ebp-8h]
  char v32; // [esp+1Ch] [ebp-4h]
  int v33; // [esp+24h] [ebp+4h]
  int v34; // [esp+24h] [ebp+4h]
  int v35; // [esp+24h] [ebp+4h]
  int v36; // [esp+24h] [ebp+4h]
  int i; // [esp+28h] [ebp+8h]
  int v38; // [esp+28h] [ebp+8h]
  int j; // [esp+28h] [ebp+8h]
  int v40; // [esp+28h] [ebp+8h]

  v3 = this;
  if ( this[495] )
  {
    v4 = (int)a2;
    v5 = *a2;
    v6 = sub_40223E(dword_576828, *((_DWORD *)dword_563908 + 7664));
    (*(void (__thiscall **)(int *, _DWORD, _DWORD *))(v5 + 40))(a2, v6, v3 + 3101);
    v7 = a3;
    v27 = a3[2] - *a3;
    v29 = a3[3] - a3[1];
    (*(void (__thiscall **)(int, char *, char *))(*(_DWORD *)v4 + 92))(v4, &v32, &v31);
    sub_4A4DC0(v3[495], *v7, 0, (int)a2, *v7, v7[1], 3, 0, 0, 0);
    v8 = *(signed __int16 **)(v3[495] + 360);
    v9 = abs(v8[2]);
    v33 = v27 - abs(v8[14]);
    for ( i = abs(v8[8]); v9 < v33; v9 += i )
      sub_4A4DC0(v3[495], v9 + *v7, 1, v4, v9 + *v7, v7[1], 3, 0, 0, 0);
    v10 = *(signed __int16 **)(v3[495] + 360);
    v11 = abs(v10[38]);
    v34 = v27 - abs(v10[50]);
    v38 = abs(v10[44]);
    v12 = abs(v10[45]);
    v13 = v7[3] - v12;
    v28 = v7[3] - v12;
    if ( v11 < v34 )
    {
      while ( 1 )
      {
        sub_4A4DC0(v3[495], v11 + *v7, 7, v4, v11 + *v7, v13, 3, 0, 0, 0);
        v11 += v38;
        if ( v11 >= v34 )
          break;
        v13 = v28;
      }
    }
    v14 = *(signed __int16 **)(v3[495] + 360);
    v15 = abs(v14[3]);
    v35 = v29 - abs(v14[39]);
    for ( j = abs(v14[21]); v15 < v35; v15 += j )
      sub_4A4DC0(v3[495], *v7, 3, v4, *v7, v15 + v7[1], 3, 0, 0, 0);
    v16 = *(signed __int16 **)(v3[495] + 360);
    v17 = abs(v16[15]);
    v36 = v29 - abs(v16[51]);
    v40 = abs(v16[33]);
    v18 = abs(v16[32]);
    v19 = v7[2] - v18;
    v30 = v7[2] - v18;
    if ( v17 < v36 )
    {
      while ( 1 )
      {
        sub_4A4DC0(v3[495], v17 + v7[1], 5, v4, v19, v17 + v7[1], 3, 0, 0, 0);
        v17 += v40;
        if ( v17 >= v36 )
          break;
        v19 = v30;
      }
    }
    v20 = v3[495];
    v21 = v7[3] - abs(*(signed __int16 *)(*(_DWORD *)(v20 + 360) + 78));
    sub_4A4DC0(v20, v21, 6, v4, *v7, v21, 3, 0, 0, 0);
    v22 = v3[495];
    v23 = *(_DWORD *)(v22 + 360);
    v24 = v7[2] - abs(*(signed __int16 *)(v23 + 100));
    sub_4A4DC0(v22, v24, 8, v4, v24, v7[3] - abs(*(signed __int16 *)(v23 + 102)), 3, 0, 0, 0);
    v25 = v3[495];
    v26 = v7[2] - abs(*(signed __int16 *)(*(_DWORD *)(v25 + 360) + 28));
    sub_4A4DC0(v25, v26, 2, v4, v26, v7[1], 3, 0, 0, 0);
    (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 96))(v4);
  }
}
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (004189B0) --------------------------------------------------------
int __thiscall sub_4189B0(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // edi
  int i; // esi
  unsigned int v4; // eax
  _DWORD *v5; // ecx
  int *v6; // edx
  int v7; // esi
  int v8; // eax
  unsigned __int8 *v9; // ecx
  unsigned __int8 *v10; // edx
  int v11; // eax
  unsigned __int8 *v12; // ecx
  unsigned __int8 *v13; // edx
  unsigned __int8 *v14; // ecx
  unsigned __int8 *v15; // edx
  signed int v16; // eax
  void (__thiscall *v17)(_DWORD *, _DWORD, _DWORD); // eax
  int v18; // ecx
  int result; // eax
  int Dst[50]; // [esp+4h] [ebp-C8h]

  v1 = this;
  if ( !*((_DWORD *)dword_56390C + 2180) )
    goto LABEL_23;
  if ( (unsigned int)sub_4B4240(*((_DWORD **)dword_56390C + 2180)) <= 0x32 )
    v2 = sub_4B4240(*((_DWORD **)dword_56390C + 2180));
  else
    v2 = 50;
  memset(Dst, 0, 0xC8u);
  for ( i = 0; i < v2; ++i )
    Dst[i] = sub_4B4260(*((_DWORD **)dword_56390C + 2180), i);
  v4 = 200;
  v5 = v1 + 3227;
  v6 = Dst;
  do
  {
    if ( *v6 != *v5 )
      goto LABEL_11;
    v4 -= 4;
    ++v5;
    ++v6;
  }
  while ( v4 >= 4 );
  if ( !v4 )
  {
LABEL_20:
    v16 = 0;
    goto LABEL_21;
  }
LABEL_11:
  v7 = *(unsigned __int8 *)v6 - *(unsigned __int8 *)v5;
  if ( *(unsigned __int8 *)v6 == *(unsigned __int8 *)v5 )
  {
    v8 = v4 - 1;
    v9 = (unsigned __int8 *)v5 + 1;
    v10 = (unsigned __int8 *)v6 + 1;
    if ( !v8 )
      goto LABEL_20;
    v7 = *v10 - *v9;
    if ( *v10 == *v9 )
    {
      v11 = v8 - 1;
      v12 = v9 + 1;
      v13 = v10 + 1;
      if ( !v11 )
        goto LABEL_20;
      v7 = *v13 - *v12;
      if ( *v13 == *v12 )
      {
        v14 = v12 + 1;
        v15 = v13 + 1;
        if ( v11 == 1 )
          goto LABEL_20;
        v7 = *v15 - *v14;
        if ( *v15 == *v14 )
          goto LABEL_20;
      }
    }
  }
  v16 = 1;
  if ( v7 <= 0 )
    v16 = -1;
LABEL_21:
  if ( v16 )
  {
    v17 = *(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*v1 + 24);
    qmemcpy(v1 + 3227, Dst, 0xC8u);
    v17(v1, 0, 0);
  }
LABEL_23:
  v18 = v1[622];
  if ( v18 )
    return (*(int (**)(void))(*(_DWORD *)v18 + 32))();
  result = v1[1535];
  if ( result )
    result = (*(int (**)(void))(*(_DWORD *)(result + 4) + 32))();
  return result;
}
// 4189B0: using guessed type int Dst[50];

//----- (00418B70) --------------------------------------------------------
void __thiscall sub_418B70(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // ecx
  int v3; // eax
  int v4; // ecx
  unsigned int v5; // edx
  int v6; // esi
  int v7; // eax
  _DWORD *v8; // ecx
  int v9; // esi
  int v10; // eax
  int v11; // edx

  v1 = this;
  v2 = this[6898];
  if ( v2 )
  {
    v3 = (*(int (__stdcall **)(_DWORD *, _DWORD *, _DWORD *))(*(_DWORD *)v2 + 84))(v1 + 62, v1 + 63, v1 + 64);
    v4 = v1[62] / 10000;
    v5 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[63]) >> 32) >> 12;
    v1[62] = v4;
    v6 = v5 + (v5 >> 31);
    v1[64] /= 10000;
    v1[65] = v3 / 1000;
    v1[63] = v6;
    v7 = v4;
    v8 = (_DWORD *)v1[1508];
    v9 = v6 / 16;
    v10 = v7 / 16;
    if ( v10 < 0 || v9 < 0 || (v11 = v8[1], v10 >= v11) || v9 >= v8[2] )
      v1[66] = 0;
    else
      v1[66] = v8[(*(_BYTE *)(3 * (v10 + v9 * v11) + v8[1292]) & 0x7F) + 520];
  }
}

//----- (00418CB0) --------------------------------------------------------
_DWORD *__stdcall sub_418CB0(int a1)
{
  _DWORD *result; // eax

  for ( result = (_DWORD *)**((_DWORD **)dword_563908 + 352); result; result = (_DWORD *)result[1] )
  {
    if ( result[5] == a1 )
      result[15] = 1;
  }
  return result;
}

//----- (00418CF0) --------------------------------------------------------
signed int __thiscall sub_418CF0(_DWORD *this, int a2)
{
  signed int v2; // esi
  int v3; // edi
  _DWORD *v4; // ecx

  v2 = 0;
  v3 = abs(a2);
  v4 = this + 6902;
  while ( abs(*v4) != v3 )
  {
    ++v2;
    ++v4;
    if ( v2 >= 16 )
      return -1;
  }
  return v2;
}

//----- (00418D40) --------------------------------------------------------
void *sub_418D40()
{
  void *result; // eax
  char v1; // [esp+3h] [ebp-5h]
  int v2; // [esp+4h] [ebp-4h]

  result = dword_563918;
  if ( dword_563918 )
  {
    if ( dword_56391C )
    {
      v2 = 1;
      v2 = *((_DWORD *)dword_563918 + 10772);
      result = (void *)(*(int (__stdcall **)(int *, char *))(*(_DWORD *)dword_56391C + 100))(&v2, &v1);
    }
  }
  return result;
}
// 56391C: using guessed type int dword_56391C;

//----- (00418D90) --------------------------------------------------------
int __thiscall sub_418D90(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // eax
  signed int v3; // ebp
  int v4; // eax
  signed int v5; // ebx
  signed int v6; // eax
  int v7; // esi
  int v8; // eax
  signed int v10; // [esp+8h] [ebp-48h]
  __int16 v11[32]; // [esp+Ch] [ebp-44h]

  v1 = this;
  v2 = this[6923];
  v3 = 0;
  v10 = 0;
  if ( v2 )
  {
    if ( *(_WORD *)(v2 + 426) )
      v11[0] = *(_WORD *)(v2 + 128);
    else
      v11[0] = -*(_WORD *)(v2 + 128);
    v10 = 1;
  }
  v4 = this[78];
  if ( *(_WORD *)(v4 + 66) > 0 )
  {
    v5 = 68;
    do
    {
      v6 = abs(*(signed __int16 *)(v5 + v4));
      if ( v6 <= 5100 )
      {
        v7 = *(_DWORD *)(v1[1507] + 4 * v6 + 8008);
        if ( v7 )
        {
          if ( *(_DWORD *)(v7 + 264)
            && (*(int (__thiscall **)(int))(*(_DWORD *)v7 + 12))(v7)
            && (*(_WORD *)(v7 + 318) >= 0 || *(_WORD *)(v7 + 316) >= 0 || *(_WORD *)(v7 + 324) >= 0) )
          {
            v11[v10++] = *(_WORD *)(v7 + 128);
          }
        }
      }
      v4 = v1[78];
      ++v3;
      v5 += 4;
    }
    while ( v3 < *(signed __int16 *)(v4 + 66) );
  }
  if ( !v1[1501] || sub_401DB6() )
  {
    v8 = v10;
  }
  else
  {
    v11[v10] = 30000;
    v8 = v10 + 1;
  }
  return (*(int (__stdcall **)(__int16 *, int))(*(_DWORD *)v1[6898] + 240))(v11, v8);
}
// 401DB6: using guessed type int sub_401DB6(void);
// 418D90: using guessed type __int16 var_44[32];

//----- (00418F20) --------------------------------------------------------
int __thiscall sub_418F20(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  signed int v3; // edi
  signed __int16 *v4; // ecx
  signed int v5; // eax
  int v6; // eax
  int result; // eax
  int v8; // ecx
  int v9; // edx

  v1 = this;
  v2 = this[78];
  v3 = 0;
  this[79] = 0;
  if ( *(_WORD *)(v2 + 66) > 0 )
  {
    v4 = (signed __int16 *)(v2 + 68);
    do
    {
      if ( *v4 > 0 )
      {
        v5 = abs(*v4);
        if ( v5 <= 5100 )
          v6 = *(_DWORD *)(v1[1507] + 4 * v5 + 8008);
        else
          v6 = 0;
        v1[79] += *(_DWORD *)(v6 + 132) * v4[1];
      }
      ++v3;
      v4 += 2;
    }
    while ( v3 < *(signed __int16 *)(v1[78] + 66) );
  }
  result = v1[6898];
  if ( result )
  {
    if ( v1[6896] <= 0 && *(_DWORD *)(result + 56) != *(signed __int16 *)(v1[6897] + 96) )
    {
      result = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(result + 72) + 4))(*(_DWORD *)(result + 72));
      if ( result == 3 )
      {
        v8 = v1[6898];
        result = *(_DWORD *)(*(_DWORD *)(v8 + 72) + 1072);
        if ( result == -1 )
          result = *(_DWORD *)((char *)v1 + 57654);
        v9 = v1[6897];
        if ( *(_DWORD *)(v8 + 56) == *(signed __int16 *)(v9 + 96) )
          result += *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[86]);
        if ( v1[79] > result )
        {
          v1[6896] = 400;
          result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(signed __int16 *)(v9 + 96));
        }
      }
    }
  }
  return result;
}
// 56391C: using guessed type int dword_56391C;

//----- (00419080) --------------------------------------------------------
int sub_419080()
{
  void *v0; // eax
  int v1; // esi
  int v2; // edi
  int v3; // edx
  int v4; // ecx
  void *v5; // eax
  void *v6; // eax
  int v7; // esi
  int v8; // edi
  int v9; // edx
  int v10; // ecx
  void *v11; // eax
  int v13; // [esp+8h] [ebp-10Ch]
  int v14; // [esp+Ch] [ebp-108h]
  char Str; // [esp+10h] [ebp-104h]

  Str = 0;
  v0 = sub_48C8B0("imn]dpogjh]1112]QspgjmfTubuf");
  sub_4944A0(v0, (LPBYTE)&Str, 0x100u);
  if ( Str )
  {
    v14 = j__atol(&Str);
  }
  else
  {
    v1 = rand() << 16;
    v2 = v1 | rand();
    v14 = abs(v2 ^ sub_401D39(v4, v3));
    v5 = sub_48C8B0("imn]dpogjh]1112]QspgjmfTubuf");
    sub_494760(v5, v14);
  }
  Str = 0;
  v6 = sub_48C8B0("tpguxbsf]njdsptpgu]ejsfduy]Dpouspm");
  sub_4944A0(v6, (LPBYTE)&Str, 0x100u);
  if ( Str )
  {
    v13 = j__atol(&Str);
  }
  else
  {
    v7 = rand() << 16;
    v8 = v7 | rand();
    v13 = abs(v8 ^ sub_401D39(v10, v9));
    v11 = sub_48C8B0("tpguxbsf]njdsptpgu]ejsfduy]Dpouspm");
    sub_494760(v11, v13);
  }
  return (*(int (__stdcall **)(int *))(*(_DWORD *)dword_56391C + 96))(&v13);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00419200) --------------------------------------------------------
_DWORD *__thiscall sub_419200(_DWORD *this, int a2)
{
  _DWORD *v2; // edx
  int v3; // eax
  int v4; // esi
  int v5; // edi
  int v6; // ecx
  _DWORD *result; // eax

  v2 = Memory;
  v3 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[2677]);
  v4 = a2;
  v5 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[2677]);
  if ( v3 >= a2 )
    v5 = a2;
  if ( v5 >= 0 )
  {
    if ( v3 < a2 )
      v4 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[2677]);
  }
  else
  {
    v4 = 0;
  }
  v6 = this[2679];
  *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v6);
  result = v2 + 4;
  *(_DWORD *)(v2[1] + 4 * v6) = v4 ^ *v2;
  *result ^= *(_DWORD *)(v2[1] + 4 * v6);
  return result;
}

//----- (00419270) --------------------------------------------------------
void __thiscall sub_419270(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int v3; // edx
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // eax
  int v7; // edi
  int v8; // ebx
  int v9; // ecx
  bool v10; // sf
  unsigned __int8 v11; // of
  int v12; // ebx
  int v13; // ecx
  int v14; // ecx

  v2 = this;
  if ( this[6898] && !(*(int (**)(void))(*(_DWORD *)this[6898] + 148))() )
  {
    v3 = v2[2679];
    v4 = Memory;
    v5 = *((_DWORD *)Memory + 1);
    v6 = *(_DWORD *)Memory;
    v7 = 4 * v2[2677];
    v8 = a2 + (*(_DWORD *)Memory ^ *(_DWORD *)(v5 + 4 * v3));
    v9 = *(_DWORD *)Memory ^ *(_DWORD *)(v7 + v5);
    v11 = __OFSUB__(v9, v8);
    v10 = v9 - v8 < 0;
    v12 = *((_DWORD *)Memory + 1);
    if ( v10 ^ v11 )
      v13 = v6 ^ *(_DWORD *)(v12 + v7);
    else
      v13 = a2 + (v6 ^ *(_DWORD *)(v12 + 4 * v3));
    if ( v13 >= 0 )
    {
      if ( (v6 ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + v7)) >= a2 + (v6 ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3)) )
        v14 = a2 + (v6 ^ *(_DWORD *)(v12 + 4 * v3));
      else
        v14 = v6 ^ *(_DWORD *)(v12 + v7);
    }
    else
    {
      v14 = 0;
    }
    *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3);
    *(_DWORD *)(v4[1] + 4 * v3) = v14 ^ *v4;
    v4[4] ^= *(_DWORD *)(v4[1] + 4 * v3);
  }
}

//----- (00419370) --------------------------------------------------------
_DWORD *__thiscall sub_419370(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  this[6923] = a2;
  this[6928] = *(signed __int16 *)(a2 + 414);
  result = *(_DWORD **)(a2 + 564);
  if ( result )
    result = (_DWORD *)sub_4A7120(result, 0, 0, 0, 0);
  return result;
}

//----- (004193B0) --------------------------------------------------------
signed int __thiscall sub_4193B0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // ST0C_4
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  char *v10; // [esp-14h] [ebp-21Ch]
  char Dest; // [esp+4h] [ebp-204h]

  v1 = this;
  v2 = *(signed __int16 *)(this[6897] + 100);
  v3 = this[63];
  v4 = this[1503];
  v5 = sub_401FFF(v1[62], v3, v2);
  if ( !v5 )
    return 0;
  v6 = (*(int (__thiscall **)(int))(*(_DWORD *)v5 + 16))(v5);
  if ( v6 >= 0 && v6 < 5000 && (v7 = *(_DWORD *)(v1[1504] + 4 * v6 + 12408)) != 0 )
  {
    sprintf(&Dest, "You are being anti-warped by: %s", v7 + 32);
    v10 = &Dest;
  }
  else
  {
    v10 = "You are being anti-warped by a computer turret";
  }
  v8 = v1[1510];
  sub_40245F(v10, 1, 200, 0, 0);
  sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
  return 1;
}
// 401FFF: using guessed type _DWORD __stdcall sub_401FFF(_DWORD, _DWORD, _DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004194E0) --------------------------------------------------------
int __thiscall sub_4194E0(_DWORD *this)
{
  _DWORD *v1; // ebp
  int result; // eax
  int v3; // ebx
  bool v4; // zf
  bool v5; // sf
  signed int v6; // eax
  int *v7; // esi
  int v8; // eax
  int *v9; // edi
  int v10; // esi
  int *v11; // eax
  int v12; // ST04_4
  int v13; // edx
  int v14; // [esp+8h] [ebp-Ch]
  int v15; // [esp+Ch] [ebp-8h]
  int v16; // [esp+10h] [ebp-4h]

  v1 = this;
  result = this[78];
  v3 = 0;
  v4 = *(_WORD *)(result + 66) == 0;
  v5 = *(_WORD *)(result + 66) < 0;
  v16 = 0;
  if ( !v5 && !v4 )
  {
    v15 = 68;
    do
    {
      v6 = abs(*(signed __int16 *)(v15 + result));
      if ( v6 <= 5100 )
      {
        v7 = *(int **)(v1[1507] + 4 * v6 + 8008);
        if ( v7 )
        {
          if ( (*(int (__thiscall **)(int *))(*v7 + 8))(v7) )
          {
            v8 = v7[65];
            v9 = v7 + 65;
            v10 = v7[75];
            if ( (v8 ^ 0x12345678) <= v10 )
            {
              v14 = 0;
              nullsub_1(&v14);
              v12 = v14;
              v14 = v10 ^ 0x12345678;
              nullsub_3(&v14, v12, v10 ^ 0x12345678);
              v11 = &v14;
              v3 |= 1u;
            }
            else
            {
              v11 = v9;
            }
            *v9 = *v11;
            if ( v3 & 1 )
            {
              v3 &= 0xFFFFFFFE;
              nullsub_2(&v14);
            }
          }
        }
      }
      result = v1[78];
      v13 = *(signed __int16 *)(result + 66);
      v15 += 4;
      ++v16;
    }
    while ( v16 < v13 );
  }
  return result;
}
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (00419620) --------------------------------------------------------
int __thiscall sub_419620(_DWORD *this)
{
  _DWORD *v1; // edi
  int result; // eax
  signed int v3; // ebp
  signed int v4; // ebx
  signed int v5; // eax
  _DWORD *v6; // esi

  v1 = this;
  result = this[78];
  v3 = 0;
  if ( *(_WORD *)(result + 66) > 0 )
  {
    v4 = 68;
    do
    {
      v5 = abs(*(signed __int16 *)(v4 + result));
      if ( v5 <= 5100 )
      {
        v6 = *(_DWORD **)(v1[1507] + 4 * v5 + 8008);
        if ( v6 )
        {
          if ( (*(int (__thiscall **)(_DWORD *))(*v6 + 12))(v6) )
          {
            if ( !v6[90] )
              v6[66] = 0;
          }
        }
      }
      result = v1[78];
      ++v3;
      v4 += 4;
    }
    while ( v3 < *(signed __int16 *)(result + 66) );
  }
  return result;
}

//----- (004196C0) --------------------------------------------------------
int __thiscall sub_4196C0(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int result; // eax
  int v4; // ebx
  int v5; // ebp
  signed int v6; // eax
  int v7; // eax
  int *v8; // esi
  int *v9; // eax
  int v10; // ST04_4
  signed int v11; // [esp+8h] [ebp-8h]
  signed int v12; // [esp+Ch] [ebp-4h]

  v2 = this;
  result = this[78];
  v4 = 0;
  v12 = 0;
  if ( *(_WORD *)(result + 66) > 0 )
  {
    v5 = a2;
    v11 = 68;
    do
    {
      v6 = abs(*(signed __int16 *)(v11 + result));
      if ( v6 <= 5100 )
      {
        v7 = *(_DWORD *)(v2[1507] + 4 * v6 + 8008);
        if ( v7 )
        {
          v8 = (int *)(v7 + 260);
          if ( (*(_DWORD *)(v7 + 260) ^ 0x12345678) <= v5 )
          {
            a2 = 0;
            nullsub_1(&a2);
            v10 = a2;
            a2 = v5 ^ 0x12345678;
            nullsub_3(&a2, v10, v5 ^ 0x12345678);
            v9 = &a2;
            v4 |= 1u;
          }
          else
          {
            v9 = (int *)(v7 + 260);
          }
          *v8 = *v9;
          if ( v4 & 1 )
          {
            v4 &= 0xFFFFFFFE;
            nullsub_2(&a2);
          }
        }
      }
      result = v2[78];
      v11 += 4;
      ++v12;
    }
    while ( v12 < *(signed __int16 *)(result + 66) );
  }
  return result;
}
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (004197E0) --------------------------------------------------------
int __thiscall sub_4197E0(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax
  int v5; // ebx
  bool v6; // zf
  bool v7; // sf
  int v8; // ebp
  signed int v9; // eax
  int *v10; // edi
  int *v11; // eax
  int v12; // ST04_4
  int v13; // esi
  int v14; // eax
  int v15; // ecx
  int *v16; // edi
  int *v17; // eax
  int v18; // ST04_4
  int v19; // esi
  int v20; // [esp+4h] [ebp-10h]
  int v21; // [esp+8h] [ebp-Ch]
  int v22; // [esp+Ch] [ebp-8h]
  _DWORD *v23; // [esp+10h] [ebp-4h]

  result = this[78];
  v5 = 0;
  v6 = *(_WORD *)(result + 66) == 0;
  v7 = *(_WORD *)(result + 66) < 0;
  v23 = this;
  v22 = 0;
  if ( !v7 && !v6 )
  {
    v8 = a3;
    v21 = 68;
    do
    {
      v9 = abs(*(signed __int16 *)(v21 + result));
      if ( v9 <= 5100 )
      {
        v10 = *(int **)(this[1507] + 4 * v9 + 8008);
        if ( v10 )
        {
          if ( a2 && v10[32] == *(_DWORD *)(a2 + 128) )
          {
            if ( (v10[65] ^ 0x12345678) <= v8 )
            {
              a3 = 0;
              nullsub_1(&a3);
              v12 = a3;
              a3 = v8 ^ 0x12345678;
              nullsub_3(&a3, v12, v8 ^ 0x12345678);
              v11 = &a3;
              v5 |= 1u;
            }
            else
            {
              v11 = v10 + 65;
            }
            v10[65] = *v11;
            if ( v5 & 1 )
            {
              v5 &= 0xFFFFFFFE;
              nullsub_2(&a3);
            }
          }
          else
          {
            v13 = a4;
            if ( (*(int (__thiscall **)(int *))(*v10 + 8))(v10) && (v14 = v10[74], v14 >= 0) )
            {
              if ( v14 < v13 )
                v13 = v10[74];
            }
            else if ( (*(int (__thiscall **)(int *))(*v10 + 12))(v10) && v13 > 20 )
            {
              v13 = 20;
            }
            v15 = v10[65];
            v16 = v10 + 65;
            if ( (v15 ^ 0x12345678) <= v13 )
            {
              v20 = 0;
              nullsub_1(&v20);
              v18 = v20;
              v20 = v13 ^ 0x12345678;
              nullsub_3(&v20, v18, v13 ^ 0x12345678);
              v17 = &v20;
              v5 |= 2u;
            }
            else
            {
              v17 = v16;
            }
            *v16 = *v17;
            if ( v5 & 2 )
            {
              v5 &= 0xFFFFFFFD;
              nullsub_2(&v20);
            }
          }
        }
      }
      this = v23;
      result = v23[78];
      v19 = *(signed __int16 *)(result + 66);
      v21 += 4;
      ++v22;
    }
    while ( v22 < v19 );
  }
  return result;
}
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (00419A00) --------------------------------------------------------
int __thiscall sub_419A00(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi
  int result; // eax
  int v6; // kr04_4
  int v7; // kr00_4
  int v8; // esi
  int v9; // eax
  signed int v10; // ebp
  int v11; // ecx
  int v12; // edx
  int v13; // ebx
  int v14; // ST34_4
  int v15; // eax
  int v16; // eax
  int v17; // edx
  int v18; // eax
  int v19; // esi
  int v20; // esi
  int v21; // edx
  int v22; // edx
  int v23; // ebp
  int v24; // ecx
  int v25; // esi
  int v26; // ebx
  int v27; // eax
  _DWORD *v28; // edx
  int v29; // ebp
  int v30; // edx
  signed int v31; // [esp+14h] [ebp-58h]
  int v32; // [esp+18h] [ebp-54h]
  int v33; // [esp+1Ch] [ebp-50h]
  int v34; // [esp+20h] [ebp-4Ch]
  int v35; // [esp+24h] [ebp-48h]
  int i; // [esp+28h] [ebp-44h]
  int v37; // [esp+2Ch] [ebp-40h]
  int v38; // [esp+30h] [ebp-3Ch]
  int v39; // [esp+38h] [ebp-34h]
  int v40; // [esp+3Ch] [ebp-30h]
  int v41; // [esp+40h] [ebp-2Ch]
  int v42; // [esp+44h] [ebp-28h]
  int v43; // [esp+48h] [ebp-24h]
  int v44; // [esp+50h] [ebp-1Ch]
  char v45; // [esp+54h] [ebp-18h]
  char v46; // [esp+58h] [ebp-14h]
  int v47; // [esp+5Ch] [ebp-10h]
  int v48; // [esp+60h] [ebp-Ch]
  int v49; // [esp+64h] [ebp-8h]
  int v50; // [esp+68h] [ebp-4h]

  v4 = this;
  result = (*(int (__stdcall **)(char *, char *))(*(_DWORD *)a2 + 92))(&v46, &v45);
  if ( result )
  {
    v6 = v4[3111];
    v7 = v4[3112];
    v8 = v6 / 2;
    v9 = v7 / 2;
    v10 = 0;
    v34 = v7 / 2;
    v47 = 3;
    v49 = (unsigned __int16)(dword_576828 != 2 ? -29583 : 17969);
    v48 = 5;
    v50 = (unsigned __int16)(dword_576828 != 2 ? 27501 : 13741);
    v31 = 0;
    while ( 1 )
    {
      v11 = *((signed __int16 *)v4 + v10 + 16477);
      v38 = v8 + v4[60];
      v39 = v9 + v4[61];
      v12 = *(&v47 + v10);
      v13 = 6 * v11;
      v14 = 6 * v11 + v38 - v8 * *(&v47 + v10);
      v15 = 6 * v11 + v39 - v34 * *(&v47 + v10);
      v40 = *(&v47 + v10);
      v42 = 6 * v11;
      v43 = (v14 + v11 + v12 * v4[3111]) / v11;
      v33 = v15 / v11;
      v41 = (v15 + v11 + v12 * v4[3112]) / v11;
      v16 = v14 / v11;
      v37 = v14 / v11;
      if ( v37 <= v43 )
      {
        v32 = v16 + 53;
        do
        {
          v17 = v33;
          v35 = v33;
          if ( v33 <= v41 )
          {
            v18 = v32 * (v33 + 83);
            for ( i = v32 * (v33 + 83); ; v18 = i )
            {
              v19 = *((signed __int16 *)v4 + v10 + 16477);
              v44 = v17 * v19 - v13;
              v20 = v37 * v19 - v13;
              v21 = (9301 * ((9301 * (v17 + v18) + 49297) % 233280) + 49297) % 233280;
              if ( !v10 )
                v21 = (9301 * ((9301 * v21 + 49297) % 233280) + 49297) % 233280;
              v22 = (9301 * v21 + 49297) % 233280;
              v23 = *((signed __int16 *)v4 + v10 + 16477);
              v24 = v6 / 2 - (v38 + v23 - abs(v22 ^ (v22 << 12)) % (2 * v23) - v20) / v40;
              v25 = v34
                  - (v39
                   + *((signed __int16 *)v4 + v31 + 16477)
                   - abs((9301 * v22 + 49297) % 233280 ^ ((9301 * ((9301 * v22 + 49297) % 233280) + 49297) % 233280 << 12))
                   % (2 * *((signed __int16 *)v4 + v31 + 16477))
                   - v44)
                  / v40;
              v26 = (v25 + a4) / 16;
              v27 = (v24 + a3) / 16;
              v28 = (_DWORD *)v4[1508];
              if ( v27 < 0 || v26 < 0 || (v29 = v28[1], v27 >= v29) || v26 >= v28[2] )
                v30 = 0;
              else
                v30 = v28[(*(_BYTE *)(3 * (v27 + v26 * v29) + v28[1292]) & 0x7F) + 520];
              if ( BYTE1(v4[120 * v30 + 14900]) )
                (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 24))(a2, v24, v25, *(&v49 + v31));
              i += v32;
              v10 = v31;
              v13 = v42;
              if ( ++v35 > v41 )
                break;
              v17 = v35;
            }
            v16 = v37;
          }
          ++v32;
          v37 = ++v16;
        }
        while ( v16 <= v43 );
      }
      v31 = ++v10;
      if ( v10 >= 2 )
        break;
      v9 = v7 / 2;
      v8 = v6 / 2;
    }
    result = (*(int (**)(void))(*(_DWORD *)a2 + 96))();
  }
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (00419E90) --------------------------------------------------------
int __fastcall sub_419E90(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // esi
  int v4; // edi
  int v5; // eax
  int v6; // ebx
  int v7; // edi

  v3 = a3[a1[66] + 85];
  switch ( v3 )
  {
    case -1:
      v3 = 1000000000;
      goto LABEL_8;
    case -2:
      a1 = (_DWORD *)a1[2677];
      break;
    case -3:
      a1 = (_DWORD *)a1[2679];
      break;
    default:
      goto LABEL_8;
  }
  a2 = *((_DWORD *)Memory + 1);
  v3 = *(_DWORD *)Memory ^ *(_DWORD *)(a2 + 4 * (_DWORD)a1);
LABEL_8:
  v4 = a3[69] ^ 0x12345678;
  v5 = sub_401D39(a1, a2);
  v6 = a3[84];
  v7 = abs(v5 - v4);
  if ( v7 < abs(a3[84]) )
  {
    if ( v6 >= 0 )
      return a3[83] + v3;
    v3 += a3[83] - v7 * a3[83] / v6;
  }
  return v3;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00419F60) --------------------------------------------------------
int __stdcall sub_419F60(int a1, int a2, int a3)
{
  int v3; // edx
  int v4; // esi
  int result; // eax
  int v6; // edi
  int v7; // esi
  int i; // ebx
  int v9; // eax
  int *v10; // [esp+Ch] [ebp-FACh]
  int *v11; // [esp+10h] [ebp-FA8h]
  int v12[500]; // [esp+18h] [ebp-FA0h]
  int v13[500]; // [esp+7E8h] [ebp-7D0h]

  v3 = 0;
  if ( a3 > 0 )
  {
    v4 = a2;
    result = 0;
    memset(v13, 0, 4 * a3);
    do
    {
      v12[v3++] = v4;
      v4 += 44;
    }
    while ( v3 < a3 );
    if ( a3 > 0 )
    {
      v6 = 1;
      v10 = v12;
      do
      {
        v7 = *v10;
        for ( i = v6; i < a3; ++i )
        {
          if ( v13[i] < v6 )
          {
            v11 = &v12[i];
            if ( sub_401B04(v7, *v11) > 0 )
            {
              v9 = v7;
              v7 = *v11;
              *v11 = v9;
              v13[i] = v6;
              i = v6 - 1;
            }
          }
        }
        result = sub_4A50B0(
                   *(_DWORD *)v7,
                   *(signed __int16 *)(v7 + 8),
                   a1,
                   *(signed __int16 *)(v7 + 10),
                   *(signed __int16 *)(v7 + 12),
                   *(_DWORD *)(v7 + 4),
                   *(_DWORD *)(v7 + 24),
                   0,
                   *(void **)(v7 + 20),
                   *(_DWORD *)(v7 + 16));
        ++v10;
        ++v6;
      }
      while ( v6 - 1 < a3 );
    }
  }
  return result;
}
// 401B04: using guessed type _DWORD __cdecl sub_401B04(_DWORD, _DWORD);
// 419F60: using guessed type int var_7D0[500];
// 419F60: using guessed type int var_FA0[500];

//----- (0041A0D0) --------------------------------------------------------
int __fastcall sub_41A0D0(int a1, int a2)
{
  int v2; // esi
  bool v3; // zf
  int v4; // eax
  int v5; // eax
  void *v6; // edi
  int v7; // ecx
  int v8; // eax
  int v9; // edi
  int v10; // ebp
  signed int v11; // ecx
  int v12; // ebp
  _DWORD *v13; // ebx
  int v14; // ecx
  signed int v15; // eax
  _DWORD *v16; // ebx
  int v17; // eax
  int v18; // ebx
  int v19; // eax
  signed int v20; // ecx
  _DWORD *v21; // ebx
  int v22; // edi
  _DWORD *v23; // ebp
  int v24; // eax
  int v25; // edx
  int v26; // ecx
  int v27; // eax
  int result; // eax
  __int64 v29; // rtt
  int v30; // ebx
  int v31; // eax
  int v32; // ecx
  char *v33; // edi
  int v34; // ecx
  int v35; // eax
  int v36; // eax
  _DWORD *v37; // edi
  int *v38; // ebp
  int v39; // eax
  int v40; // edx
  int v41; // ebx
  int v42; // ecx
  int v43; // ebx
  int v44; // eax
  int v45; // eax
  int v46; // ecx
  _DWORD *v47; // ecx
  int v48; // edx
  int v49; // ecx
  int v50; // ecx
  int v51; // eax
  int v52; // [esp+14h] [ebp-1234h]
  _DWORD *v53; // [esp+18h] [ebp-1230h]
  int v54; // [esp+1Ch] [ebp-122Ch]
  int v55; // [esp+20h] [ebp-1228h]
  char v56; // [esp+24h] [ebp-1224h]
  char Dest; // [esp+44h] [ebp-1204h]
  char v58; // [esp+144h] [ebp-1104h]
  char Dst; // [esp+244h] [ebp-1004h]

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 364) == 0;
  v54 = 0;
  if ( !v3 )
  {
    v4 = abs(sub_401D39(a1, a2) - *(_DWORD *)(a1 + 368));
    if ( v4 >= *(_DWORD *)(v2 + 372) )
    {
      v6 = *(void **)(v2 + 364);
      if ( v6 )
      {
        sub_4B4100(*(void (__stdcall *****)(signed int))(v2 + 364));
        j__free(v6);
        *(_DWORD *)(v2 + 364) = 0;
      }
    }
    else
    {
      v5 = sub_4B4130(*(_DWORD **)(v2 + 364), v4);
      (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(***(_DWORD ***)(v2 + 364) + 112))(
        v5,
        *(_DWORD *)(v2 + 356),
        0,
        0,
        0,
        0,
        0);
      v54 = *(_DWORD *)(**(_DWORD **)(v2 + 364) + 208);
    }
  }
  sub_4017DA(*(_DWORD *)(v2 + 6040));
  v7 = *(_DWORD *)(v2 + 356);
  v8 = *(_DWORD *)(v2 + 6056);
  v9 = *(_DWORD *)(v2 + 12416);
  v52 = 0;
  v55 = 50;
  v10 = *(_DWORD *)(v7 + 4);
  v11 = *(_DWORD *)(v8 + 31544);
  v12 = v10 - *(_DWORD *)(v2 + 12396);
  if ( v11 > 0 )
  {
    v13 = *(_DWORD **)(v2 + 6072);
    if ( v11 < 500 )
      v13 = *(_DWORD **)(v2 + 6076);
    v9 -= *(signed __int16 *)(v13[513] + 174);
    sprintf(&Dest, "%d.%d Drop", *(_DWORD *)(v8 + 31544) / 100, *(_DWORD *)(v8 + 31544) % 100 / 10);
    sub_49B4F0(v13, &Dest, 2, *(_DWORD **)(v2 + 356), v12, v9, 3, 0);
  }
  v14 = *(_DWORD *)(v2 + 27756);
  if ( v14 && (*(int (**)(void))(*(_DWORD *)v14 + 4))() == 17 )
  {
    v15 = *(_DWORD *)(v2 + 27772);
    v16 = *(_DWORD **)(v2 + 6072);
    if ( v15 < 300 )
      v16 = *(_DWORD **)(v2 + 6076);
    v9 -= *(signed __int16 *)(v16[513] + 174);
    sprintf(&Dest, "%d.%d Warp", v15 / 100, v15 % 100 / 10);
    sub_49B4F0(v16, &Dest, 2, *(_DWORD **)(v2 + 356), v12, v9, 3, 0);
  }
  v17 = *(_DWORD *)(v2 + 27592);
  if ( v17 && *(_DWORD *)(v17 + 156) >= 0 && *(_DWORD *)(v2 + 6004) )
  {
    v18 = sub_401BB8();
    v53 = *(_DWORD **)(v2 + 6072);
    if ( v18 < 200 )
      v53 = *(_DWORD **)(v2 + 6076);
    v9 -= *(signed __int16 *)(v53[513] + 174);
    sprintf(&Dest, "%d.%d Ball", v18 / 100, v18 % 100 / 10);
    if ( v18 >= 400 )
      v19 = 2;
    else
      v19 = v18 >= 150 ? 4 : 1;
    sub_49B4F0(v53, &Dest, v19, *(_DWORD **)(v2 + 356), v12, v9, 3, 0);
  }
  if ( *(_DWORD *)(*(_DWORD *)(v2 + 27588) + 128) )
  {
    v20 = *(_DWORD *)(v2 + 25752);
    if ( v20 > 0 )
    {
      v21 = *(_DWORD **)(v2 + 6072);
      if ( v20 < 1000 )
        v21 = *(_DWORD **)(v2 + 6076);
      v22 = v9 - *(signed __int16 *)(v21[513] + 174);
      sprintf(&Dest, "%d Expire", v20 / 100);
      sub_49B4F0(v21, &Dest, 2, *(_DWORD **)(v2 + 356), v12, v22, 3, 0);
    }
  }
  v23 = *(_DWORD **)(v2 + 4 * *((_DWORD *)dword_563918 + 2340) + 6064);
  v24 = (*(int (**)(void))(*(_DWORD *)dword_56391C + 156))();
  if ( v24 && sub_40137A(v24) > 15000 )
  {
    v27 = sub_401D39(v26, v25);
    v29 = v27;
    result = v27 / 100;
    if ( (signed int)(v29 % 100) < 70 )
      result = sub_49B310(
                 *(_DWORD **)(v2 + 6068),
                 "WARNING: No data coming from server, connection may be broken",
                 1,
                 *(_DWORD **)(v2 + 356),
                 0,
                 v54,
                 3,
                 0);
  }
  else
  {
    v30 = v54;
    v31 = 480 * *(_DWORD *)(v2 + 264) + v2;
    if ( *(_BYTE *)(v31 + 59466) )
    {
      sub_49B310(v23, (char *)(v31 + 59466), *(char *)(v31 + 59594), *(_DWORD **)(v2 + 356), 0, v54, 3, 0);
      v30 = v54 + *(signed __int16 *)(v23[513] + 174);
    }
    v32 = *(_DWORD *)(v2 + 6056);
    result = sub_4017D5(
               *(signed __int16 *)(*(_DWORD *)(v2 + 27588) + 100),
               *((_DWORD *)dword_563908 + 62),
               *((_DWORD *)dword_563908 + 63),
               &v54);
    if ( result )
    {
      result = sub_49AE50(v23, &Dst, (void *)result, 3 * (*(_DWORD *)(v2 + 12412) - *(_DWORD *)(v2 + 12404)) / 4);
      v33 = &Dst;
      if ( result > 0 )
      {
        v53 = (_DWORD *)result;
        do
        {
          sub_49B310(v23, v33, v54, *(_DWORD **)(v2 + 356), 0, v30, 3, 0);
          v30 += *(signed __int16 *)(v23[513] + 174);
          result = strlen(v33);
          v3 = v53 == (_DWORD *)1;
          v53 = (_DWORD *)((char *)v53 - 1);
          v33 += result + 1;
        }
        while ( !v3 );
      }
    }
  }
  v34 = *(_DWORD *)(v2 + 27592);
  if ( v34 )
  {
    (*(void (__stdcall **)(int *, int *))(*(_DWORD *)v34 + 32))(&v52, &v55);
    v35 = *(_DWORD *)(v2 + 27588);
    if ( v35 && *(_DWORD *)(v35 + 136) != *(_DWORD *)(v2 + 12468) && *((_DWORD *)dword_563918 + 2223) )
      v52 -= 18;
    v36 = *((_DWORD *)dword_563918 + 2341) + 1;
    if ( v36 > 3 )
      v36 = 3;
    v37 = Memory;
    v38 = *(int **)(v2 + 4 * v36 + 6064);
    v39 = *((_DWORD *)Memory + 1);
    v40 = *(_DWORD *)Memory;
    v41 = *(_DWORD *)Memory ^ *(_DWORD *)(v39 + 4 * *(_DWORD *)(v2 + 10708));
    if ( v41 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v39 + 4 * *(_DWORD *)(v2 + 10708)) )
    {
      v53 = (_DWORD *)*((_DWORD *)dword_563918 + 2251);
      if ( (signed int)v53 > 0 )
      {
        v42 = 4 * *(_DWORD *)(v2 + 10716);
        v43 = 1000 * (v40 ^ *(_DWORD *)(v42 + v39)) / v41;
        if ( v43 <= (signed int)v53 )
        {
          sprintf(&v58, "%d", (*(_DWORD *)Memory ^ *(_DWORD *)(v42 + *((_DWORD *)Memory + 1))) / 1000);
          v52 -= 5;
          if ( v43 >= 300 )
            v44 = 2 * (v43 < 600) + 2;
          else
            v44 = 1;
          v45 = sub_49AB80(v38, &v58, v44, *(_DWORD **)(v2 + 356), v52, v55, 3, 0);
          v52 -= v45;
          v37 = Memory;
        }
      }
    }
    result = 4 * *(_DWORD *)(v2 + 332);
    if ( (*v37 ^ *(_DWORD *)(result + v37[1])) >= 0 && *v37 != *(_DWORD *)(result + v37[1]) )
    {
      v52 -= 5;
      v46 = *v37 ^ *(_DWORD *)(result + v37[1]);
      sprintf(&Dest, "Jam=%d.%d", v46 / 100, v46 / 10 % 10);
      result = sub_49B4F0(v38, &Dest, 5, *(_DWORD **)(v2 + 356), v52, v55, 3, 0);
      v52 -= result;
    }
  }
  v47 = *(_DWORD **)(v2 + 27592);
  if ( v47 )
  {
    result = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
    if ( v47[14] == result )
    {
      result = (*(int (**)(void))(*v47 + 148))();
      if ( result )
      {
        if ( *(_DWORD *)(v2 + 57486) > 500 )
        {
          result = sub_401D39(v49, v48);
          v50 = *(_DWORD *)(v2 + 57486) + *(_DWORD *)(*(_DWORD *)(v2 + 27592) + 164) - result;
          if ( v50 > 0 )
          {
            sprintf(&v56, "Death %d.%d", v50 / 100, v50 / 10 % 10);
            v51 = sub_49AD40(*(_DWORD **)(v2 + 6080), &v56);
            result = sub_49B310(
                       *(_DWORD **)(v2 + 6080),
                       &v56,
                       1,
                       *(_DWORD **)(v2 + 356),
                       (*(_DWORD *)(v2 + 12444) - v51) / 2,
                       *(_DWORD *)(v2 + 12448) / 3,
                       3,
                       0);
          }
        }
      }
    }
  }
  return result;
}
// 40137A: using guessed type int __thiscall sub_40137A(_DWORD);
// 4017D5: using guessed type _DWORD __stdcall sub_4017D5(_DWORD, _DWORD, _DWORD, _DWORD);
// 4017DA: using guessed type int __thiscall sub_4017DA(_DWORD);
// 401BB8: using guessed type int sub_401BB8(void);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0041AA40) --------------------------------------------------------
int __fastcall sub_41AA40(char *a1, void *a2, const char *a3, int a4, int a5)
{
  char *v5; // esi
  bool v6; // zf
  int result; // eax

  v5 = a1;
  v6 = *((_DWORD *)a1 + 2687) == 0;
  *((_DWORD *)a1 + 620) = a4;
  *((_DWORD *)a1 + 621) = a5;
  if ( v6 || (a2 = dword_563918, *((_DWORD *)dword_563918 + 2348) == 3) )
    *((_DWORD *)a1 + 619) = sub_401D39(a5, a2);
  else
    *((_DWORD *)a1 + 619) = 0;
  strcpy(v5 + 2220, a3);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (0041AAC0) --------------------------------------------------------
int __thiscall sub_41AAC0(char *this)
{
  char *v1; // esi
  int v2; // edx
  int v3; // ecx
  int v4; // ebx
  int v5; // ebp
  int v6; // eax
  int v7; // ecx
  int result; // eax
  int v9; // ebx
  int v10; // ebp
  int v11; // ecx
  int v12; // eax
  int v13; // [esp+10h] [ebp-10h]
  int v14; // [esp+14h] [ebp-Ch]
  int v15; // [esp+18h] [ebp-8h]
  int v16; // [esp+1Ch] [ebp-4h]

  v1 = this;
  j_nullsub_7(*((_DWORD *)this + 1500));
  v3 = *((_DWORD *)v1 + 355);
  v4 = *((_DWORD *)v1 + 2688);
  v5 = *((_DWORD *)v1 + 2689);
  if ( v3 )
  {
    (*(void (**)(void))(*(_DWORD *)v3 + 44))();
  }
  else if ( v1[2220] )
  {
    if ( !*((_DWORD *)v1 + 2687) || *((_DWORD *)dword_563918 + 2348) == 3 )
    {
      v4 = *((_DWORD *)v1 + 620) - *((_DWORD *)v1 + 60);
      v5 = *((_DWORD *)v1 + 621) - *((_DWORD *)v1 + 61);
    }
    v6 = sub_49AD40(*(_DWORD **)&v1[4 * *((_DWORD *)dword_563918 + 2336) + 6064], v1 + 2220);
    v13 = v4 + 16;
    v15 = v4 + 16 + v6 + 6;
    v14 = v5 + 12;
    v16 = *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)&v1[4 * *((_DWORD *)dword_563918 + 2336) + 6064] + 2052) + 174)
        + v5
        + 12
        + 5;
    (*(void (__stdcall **)(_DWORD, int *))(**((_DWORD **)v1 + 89) + 40))(0, &v13);
    v7 = *((_DWORD *)v1 + 89);
    ++v13;
    ++v14;
    --v16;
    --v15;
    (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v7 + 40))(*((unsigned __int16 *)v1 + 93), &v13);
    sub_49B310(
      *(_DWORD **)&v1[4 * *((_DWORD *)dword_563918 + 2336) + 6064],
      v1 + 2220,
      14,
      *((_DWORD **)v1 + 89),
      v13 + 2,
      v14 + 2,
      3,
      0);
  }
  result = sub_401D39(v3, v2) - *((_DWORD *)v1 + 2687);
  if ( result >= 1600 )
  {
    *((_DWORD *)v1 + 2687) = 0;
  }
  else
  {
    v9 = *((_DWORD *)v1 + 546);
    v10 = *((_DWORD *)v1 + 2690);
    v11 = *((_DWORD *)v1 + 543);
    if ( v9 || (v9 = *(signed __int16 *)(v11 + 170), *(_WORD *)(v11 + 170)) )
      v12 = v10 * *(signed __int16 *)(v11 + 178) + *(signed __int16 *)(v11 + 178) * (*((_DWORD *)v1 + 2705) % v9) / v9;
    else
      v12 = v10 * *(signed __int16 *)(v11 + 178);
    result = sub_4A50B0(
               v11,
               v12,
               *((_DWORD *)v1 + 89),
               *((_DWORD *)v1 + 2688),
               *((_DWORD *)v1 + 2689),
               *((_DWORD *)v1 + 545),
               *((_DWORD *)v1 + 544),
               0,
               0,
               0);
  }
  return result;
}
// 401CBC: using guessed type int __thiscall j_nullsub_7(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (0041AD30) --------------------------------------------------------
signed int __thiscall sub_41AD30(_DWORD *this, char *a2, int a3, __int16 a4, __int16 a5, signed int a6)
{
  signed int result; // eax
  char *v7; // edx
  _BYTE *v8; // esi
  char v9; // al

  result = this[2676];
  if ( result < 48 )
  {
    v7 = a2;
    v8 = &this[15 * result + 1956];
    do
    {
      v9 = *v7;
      *v8++ = *v7++;
    }
    while ( v9 );
    this[15 * this[2676] + 1968] = a3;
    LOWORD(this[15 * this[2676] + 1969]) = a4;
    HIWORD(this[15 * this[2676] + 1969]) = a5;
    result = a6;
    this[15 * this[2676]++ + 1970] = a6;
  }
  return result;
}

//----- (0041AE00) --------------------------------------------------------
int __thiscall sub_41AE00(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // edi
  int v3; // ebx
  signed __int16 *v4; // esi
  int result; // eax

  v2 = this;
  v3 = 0;
  if ( this[2676] <= 0 )
  {
    this[2676] = 0;
  }
  else
  {
    v4 = (signed __int16 *)((char *)this + 7878);
    do
    {
      result = sub_49B310(
                 (_DWORD *)v2[*((_DWORD *)dword_563918 + 2341) + 1516],
                 (char *)v4 - 54,
                 *(_DWORD *)(v4 - 3),
                 a2,
                 *(v4 - 1),
                 *v4,
                 *(_DWORD *)(v4 + 1),
                 0);
      ++v3;
      v4 += 30;
    }
    while ( v3 < v2[2676] );
    v2[2676] = 0;
  }
  return result;
}

//----- (0041AEA0) --------------------------------------------------------
void __thiscall sub_41AEA0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // ebx
  int v5; // ebp
  int v6; // eax
  int v7; // eax
  int v8; // edi
  int v9; // edi
  int v10; // kr00_4
  int v11; // ecx
  int v12; // ST1C_4
  int v13; // ST18_4
  int v14; // ST14_4
  int v15; // ST10_4
  int v16; // eax
  signed int v17; // [esp+8h] [ebp-8h]
  int v18; // [esp+Ch] [ebp-4h]

  v2 = this;
  if ( *(_DWORD *)((char *)this + 58390) > 0 )
  {
    v3 = this[1504];
    v4 = 0;
    if ( *(_DWORD *)(v3 + 12404) > 0 )
    {
      v5 = a2;
      v17 = 6404;
      do
      {
        v6 = *(_DWORD *)(v17 + v3);
        if ( *(_DWORD *)(v6 + 128) )
        {
          v7 = sub_401D57(v6);
          v8 = v7;
          if ( v7 )
          {
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)v7 + 8))(v7) > 0 )
            {
              (*(void (__thiscall **)(int, int *, int *))(*(_DWORD *)v8 + 32))(v8, &v18, &a2);
              v9 = v2[6439];
              v10 = *(signed __int16 *)(*(_DWORD *)(v2[*((_DWORD *)dword_563918 + 2341) + 1516] + 2052) + 174);
              v11 = v10 / 2 + a2;
              a2 += v10 / 2;
              v18 += *(signed __int16 *)(v9 + 172) / -2;
              if ( v18 > -32 && v18 < *(_DWORD *)(v5 + 4) && v11 > -32 && v11 < *(_DWORD *)(v5 + 8) )
              {
                v12 = v2[6440];
                v13 = v2[6441];
                v14 = v11;
                v15 = v18;
                v16 = sub_401B59(0, v2[2705], v2[6442]);
                sub_4A50B0(v9, v16, v5, v15, v14, v13, v12, 0, 0, 0);
              }
            }
          }
        }
        v3 = v2[1504];
        v17 += 4;
        ++v4;
      }
      while ( v4 < *(_DWORD *)(v3 + 12404) );
    }
  }
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);

//----- (0041B040) --------------------------------------------------------
int __userpurge sub_41B040@<eax>(_DWORD **a1@<ecx>, int a2@<edi>, char *a3)
{
  _DWORD **v3; // esi
  int result; // eax
  int v5; // ebx
  int v6; // ebx
  int v7; // [esp-4h] [ebp-14h]
  int v8; // [esp+Ch] [ebp-4h]

  v3 = a1;
  result = (*(int (**)(void))(*a1[89] + 156))() + 1;
  if ( result > 0 )
  {
    v7 = a2;
    v8 = result;
    do
    {
      (*(void (__stdcall **)(_DWORD, _DWORD, int))(*v3[89] + 40))(0, 0, v7);
      v5 = sub_49AD40(v3[1520], "Please Wait");
      sub_49B310(v3[1520], "Please Wait", 2, v3[89], (v3[89][1] - v5) / 2, v3[89][2] / 3, 3, 0);
      if ( a3 )
      {
        v6 = sub_49AD40(v3[1518], a3);
        sub_49B310(
          v3[1518],
          a3,
          9,
          v3[89],
          (v3[89][1] - v6) / 2,
          v3[89][2] / 3 + 2 * *(signed __int16 *)(v3[1520][513] + 174),
          3,
          0);
      }
      v7 = *((_DWORD *)dword_563918 + 2220);
      result = (*(int (**)(void))(*v3[89] + 108))();
      --v8;
    }
    while ( v8 );
  }
  return result;
}
// 41B040: could not find valid save-restore pair for edi

//----- (0041B1A0) --------------------------------------------------------
HWND __thiscall sub_41B1A0(_DWORD *this, HWND a2)
{
  _DWORD *v2; // esi
  HWND result; // eax

  v2 = this;
  if ( this[622] )
  {
    result = a2;
    this[622] = a2;
  }
  else
  {
    result = SetCapture(*((HWND *)dword_563918 + 3));
    v2[622] = a2;
  }
  return result;
}

//----- (0041B1F0) --------------------------------------------------------
BOOL __thiscall sub_41B1F0(_DWORD *this)
{
  _DWORD *v1; // esi
  BOOL result; // eax

  v1 = this;
  if ( this[622] )
  {
    this[622] = 0;
    result = ReleaseCapture();
    v1[2700] = 1;
  }
  return result;
}

//----- (0041B230) --------------------------------------------------------
_DWORD *__thiscall sub_41B230(_DWORD *this)
{
  int v1; // edx
  _DWORD *v2; // eax
  int v3; // esi
  int v4; // esi
  signed int v5; // edi
  int v6; // ecx
  _DWORD *v7; // edx
  int v8; // esi
  int v9; // edi
  _DWORD *result; // eax

  v1 = *(_DWORD *)((char *)this + 57618);
  v2 = Memory;
  if ( v1 == -1 )
    v1 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[2677]);
  v3 = *(_DWORD *)(this[1503] + 4 * *(signed __int16 *)(this[6897] + 96) + 4);
  if ( v3 )
  {
    v4 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1388);
    if ( v4 != -1 )
      v1 = 1000 * v4;
  }
  v5 = 1;
  if ( v1 >= 1 )
    v5 = v1;
  v6 = this[2679];
  *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v6);
  v7 = v2 + 1;
  v8 = v5 ^ *v2;
  v9 = v2[1];
  result = v2 + 4;
  *(_DWORD *)(v9 + 4 * v6) = v8;
  *result ^= *(_DWORD *)(*v7 + 4 * v6);
  return result;
}

//----- (0041B2E0) --------------------------------------------------------
int __thiscall sub_41B2E0(int *this, int a2)
{
  int v2; // eax

  v2 = this[6898];
  if ( v2 )
    v2 = *(_DWORD *)(v2 + 72);
  return sub_4953E0((int)(this + 6973), this[1507], a2, (signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 60), v2);
}

//----- (0041B330) --------------------------------------------------------
int __thiscall sub_41B330(_DWORD *this, int a2)
{
  int v2; // ebx
  int v3; // ecx
  int v4; // esi
  signed __int16 *v5; // edi

  v2 = this[78];
  v3 = *(signed __int16 *)(v2 + 66);
  v4 = 0;
  if ( v3 <= 0 )
    return 0;
  v5 = (signed __int16 *)(v2 + 68);
  while ( abs(*v5) != a2 )
  {
    ++v4;
    v5 += 2;
    if ( v4 >= v3 )
      return 0;
  }
  return *(signed __int16 *)(v2 + 4 * v4 + 70);
}

//----- (0041B390) --------------------------------------------------------
int __thiscall sub_41B390(_DWORD *this, int a2, int a3, int a4, int a5, int a6, signed int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19)
{
  int v19; // ecx
  int result; // eax
  int v21; // esi
  int v22; // edi
  long double v23; // st7
  double v24; // ST64_8
  int v25; // eax
  int v26; // eax
  int v27; // edx
  int *v28; // ecx
  int v29; // edi
  int v30; // ebp
  signed __int16 *v31; // edi
  __int16 v32; // bx
  long double v33; // ST64_8
  int v34; // eax
  int v35; // edx
  int v36; // edi
  int v37; // eax
  int v38; // [esp+14h] [ebp-24h]
  _DWORD *v39; // [esp+18h] [ebp-20h]
  int v40; // [esp+3Ch] [ebp+4h]
  int v41; // [esp+48h] [ebp+10h]
  int v42; // [esp+50h] [ebp+18h]
  int v43; // [esp+74h] [ebp+3Ch]

  v39 = this;
  v19 = this[1507];
  result = abs(a2);
  if ( result <= 5100 )
  {
    v21 = *(_DWORD *)(v19 + 4 * result + 8008);
    v38 = *(_DWORD *)(v19 + 4 * result + 8008);
    if ( v21 )
    {
      v22 = a4;
      v40 = a5;
      v23 = (double)(1000 * (a11 + 180) % 240000) * 0.00002617993877916667;
      if ( a7 )
      {
        v24 = (double)a7;
        a4 += (signed int)(cos(v23) * v24);
        v25 = (signed int)(sin(v23) * v24);
        if ( dword_53A7C4 )
          v25 = 7 * v25 / 10;
        v40 = a5 + v25;
      }
      v26 = (*(int (__thiscall **)(int))(*(_DWORD *)v21 + 4))(v21) - 6;
      if ( v26 )
      {
        result = v26 - 2;
        if ( !result )
        {
          if ( !a17 )
          {
            v28 = *(int **)(v21 + 1192);
            if ( v28 )
              sub_4A6E90(v28, v22, a5, 0, 0, 0, 0, 0);
          }
          if ( !a19 )
          {
            v29 = sub_401D39(v28, v27) << 16;
            a19 = v29 | rand();
          }
          result = *(unsigned __int16 *)(v21 + 668);
          v30 = a16;
          v31 = (signed __int16 *)(v21 + 668);
          v41 = 0;
          if ( (signed __int16)result > 0 )
          {
            v32 = *(_WORD *)(v21 + 668);
            v42 = v21 + 672;
            do
            {
              v33 = *(double *)(v42 + 528) + v23;
              v43 = a4 + (signed int)(cos(v33) * *(double *)(v21 + 1208));
              v34 = (signed int)(sin(v33) * *(double *)(v21 + 1208));
              if ( dword_53A7C4 )
                v34 = 7 * v34 / 10;
              v35 = (9301 * (v30 + v41 * *v31) + 49297) % 233280;
              v30 = (9301 * v35 + 49297) % 233280;
              result = sub_402590(
                         v32,
                         a3,
                         v43,
                         v40 + v34,
                         a6 + *(signed __int16 *)(v21 + 666),
                         0,
                         a8,
                         a9,
                         a10,
                         (240000 * *(signed __int16 *)(v21 + 660) / 360 / 1000 + a11 + 240) % 240,
                         a12,
                         a13,
                         a14,
                         a15,
                         abs(v35 ^ (v30 << 12)),
                         1,
                         *(_DWORD *)v42,
                         a19);
              v42 += 16;
              v36 = v41 + 1;
              v41 = v36;
              v21 = 16 * v36 + v38;
              v32 = *(_WORD *)(v21 + 668);
              v31 = (signed __int16 *)(v21 + 668);
            }
            while ( v32 > 0 );
          }
        }
      }
      else
      {
        if ( operator new(0xB4u) )
          v37 = sub_4026F8(v21, a3, a4, v40, a6, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19);
        else
          v37 = 0;
        result = sub_4A7300((_DWORD *)v39[352], v37);
      }
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4026F8: using guessed type _DWORD __stdcall sub_4026F8(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0041B9A0) --------------------------------------------------------
int __thiscall sub_41B9A0(_DWORD *this)
{
  _DWORD *v1; // eax
  int v2; // edx
  int v3; // edx
  _DWORD *v4; // eax
  int v5; // edx
  _DWORD *v6; // eax
  int v7; // edx
  _DWORD *v8; // eax
  int v9; // edx
  _DWORD *v10; // eax
  int result; // eax
  int v12; // edx
  int v13; // edi
  unsigned int v14; // edx
  int v15; // esi
  int v16; // edx
  int v17; // esi
  int v18; // edx
  _DWORD *v19; // eax
  _DWORD *v20; // edi
  int v21; // ebx
  int v22; // edi
  bool v23; // sf
  unsigned __int8 v24; // of
  int v25; // [esp+Ch] [ebp-8h]
  signed int v26; // [esp+10h] [ebp-4h]

  v1 = Memory;
  v2 = this[84];
  v1[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2);
  *(_DWORD *)(v1[1] + 4 * v2) = *v1;
  v1[4] ^= *(_DWORD *)(v1[1] + 4 * v2);
  v3 = this[85];
  v4 = Memory;
  v4[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3);
  *(_DWORD *)(v4[1] + 4 * v3) = *v4;
  v4[4] ^= *(_DWORD *)(v4[1] + 4 * v3);
  v5 = this[86];
  v6 = Memory;
  v6[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v5);
  *(_DWORD *)(v6[1] + 4 * v5) = *v6;
  v6[4] ^= *(_DWORD *)(v6[1] + 4 * v5);
  v7 = this[87];
  v8 = Memory;
  v8[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v7);
  *(_DWORD *)(v8[1] + 4 * v7) = *v8;
  v8[4] ^= *(_DWORD *)(v8[1] + 4 * v7);
  v9 = this[88];
  v10 = Memory;
  v10[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v9);
  *(_DWORD *)(v10[1] + 4 * v9) = *v10;
  v10[4] ^= *(_DWORD *)(v10[1] + 4 * v9);
  result = this[78];
  v25 = 0;
  if ( *(_WORD *)(result + 568) > 0 )
  {
    v12 = 570;
    v26 = 570;
    do
    {
      if ( *(_WORD *)(v12 + result) < 0 )
      {
        v13 = *(signed __int16 *)(v12 + this[78]);
        v14 = (signed int)((unsigned __int64)(274877907i64 * *(signed __int16 *)(v12 + this[78])) >> 32) >> 6;
        v15 = v14 + (v14 >> 31);
        v16 = -v13 % 1000;
        if ( v15 == *(_DWORD *)((char *)this + 75530) )
        {
          v17 = v16 * *(_DWORD *)((char *)this + 75534);
          v18 = this[84];
LABEL_14:
          v19 = Memory;
          v20 = (char *)Memory + 4;
          v21 = *(_DWORD *)Memory;
          v19[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v18);
          *(_DWORD *)(*v20 + 4 * v18) = v17 ^ v21;
          v19[4] ^= *(_DWORD *)(*v20 + 4 * v18);
          goto LABEL_15;
        }
        if ( v15 == *(_DWORD *)((char *)this + 75538) )
        {
          v17 = v16 * *(_DWORD *)((char *)this + 75542);
          v18 = this[85];
          goto LABEL_14;
        }
        if ( v15 == *(_DWORD *)((char *)this + 75546) )
        {
          v17 = v16 * *(_DWORD *)((char *)this + 75550);
          v18 = this[86];
          goto LABEL_14;
        }
        if ( v15 == *(_DWORD *)((char *)this + 75554) )
        {
          v17 = v16 * *(_DWORD *)((char *)this + 75558);
          v18 = this[87];
          goto LABEL_14;
        }
        if ( v15 == *(_DWORD *)((char *)this + 75562) )
        {
          v17 = v16 * *(_DWORD *)((char *)this + 75566);
          v18 = this[88];
          goto LABEL_14;
        }
      }
LABEL_15:
      result = this[78];
      v22 = *(signed __int16 *)(result + 568);
      v12 = v26 + 2;
      v24 = __OFSUB__(v25 + 1, v22);
      v23 = v25++ + 1 - v22 < 0;
      v26 += 2;
    }
    while ( v23 ^ v24 );
  }
  return result;
}

//----- (0041BC40) --------------------------------------------------------
int sub_41BC40()
{
  int result; // eax

  result = sub_48D310();
  if ( result )
    result = (*(int (__stdcall **)(signed int, signed int, BYTE *))(*(_DWORD *)dword_56391C + 88))(15, 6, &Source);
  return result;
}
// 56391C: using guessed type int dword_56391C;

//----- (0041BC70) --------------------------------------------------------
int __thiscall sub_41BC70(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  if ( !this[6898] )
    return 0;
  if ( (*(int (**)(void))(**(_DWORD **)(this[6898] + 72) + 4))() == 4 )
    return v1[7724];
  return SLOBYTE(v1[120 * v1[66] + 14901]);
}

//----- (0041BD00) --------------------------------------------------------
int __thiscall sub_41BD00(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  if ( !this[6898] )
    return 0;
  if ( (*(int (**)(void))(**(_DWORD **)(this[6898] + 72) + 4))() == 4 )
    return v1[7725];
  return SBYTE1(v1[120 * v1[66] + 14901]);
}

//----- (0041BE00) --------------------------------------------------------
signed int __thiscall sub_41BE00(_DWORD **this, int a2)
{
  _DWORD **v2; // esi
  signed int result; // eax
  int v4; // eax

  v2 = this;
  result = (*(int (**)(void))(*this[1535] + 24))();
  if ( result )
  {
    if ( operator new(0x2Cu) )
      v4 = sub_401591(v2[89], v2 + 3101);
    else
      v4 = 0;
    *((_DWORD *)dword_563908 + 1535) = v4;
    sub_401154(a2);
    *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
    result = sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (0041BF00) --------------------------------------------------------
signed int __thiscall sub_41BF00(_DWORD **this)
{
  _DWORD *v1; // esi
  signed int result; // eax
  int v3; // eax
  int v4; // ecx

  v1 = this;
  result = (*(int (**)(void))(*this[1535] + 24))();
  if ( result )
  {
    if ( (*(int (**)(void))(*(_DWORD *)v1[1535] + 28))() )
    {
      if ( (*(int (**)(void))(*(_DWORD *)v1[1535] + 20))() )
      {
        v4 = v1[1535];
        if ( v4 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v4 + 4))(1);
          v1[1535] = 0;
        }
      }
      v1[1535] = v1[1499];
    }
    else
    {
      if ( operator new(0x2Cu) )
        v3 = sub_401591(v1[89], v1 + 3101);
      else
        v3 = 0;
      *((_DWORD *)dword_563908 + 1535) = v3;
    }
    *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
    result = sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  }
  return result;
}
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (0041C050) --------------------------------------------------------
int __thiscall sub_41C050(int this)
{
  int v1; // esi
  int result; // eax
  int v3; // ecx
  int v4; // ecx
  void *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // eax
  int v11; // ecx

  v1 = this;
  result = *(_DWORD *)(this + 30916);
  if ( result <= 0
    || (result *= 1000,
        (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *(_DWORD *)(this + 10716))) >= result) )
  {
    if ( *(_DWORD *)(this + 30920) )
    {
      result = (*(int (**)(void))(**(_DWORD **)(this + 6140) + 24))();
      if ( result )
      {
        if ( *(_DWORD *)(v1 + 27780) )
        {
          if ( *(_DWORD *)(v1 + 1420) )
          {
            if ( *((_DWORD *)dword_563908 + 355) )
            {
              v4 = *((_DWORD *)dword_563908 + 355);
              if ( v4 )
                (*(void (__stdcall **)(signed int))(*(_DWORD *)v4 + 36))(1);
              *((_DWORD *)dword_563908 + 355) = 0;
            }
          }
          else
          {
            v5 = operator new(0x2Cu);
            if ( v5 )
              v6 = sub_401E29(v5);
            else
              v6 = 0;
            *((_DWORD *)dword_563908 + 355) = v6;
          }
        }
        else
        {
          v7 = (*(int (**)(void))(**(_DWORD **)(v1 + 6140) + 28))();
          v8 = *(_DWORD *)(v1 + 6140);
          if ( v7 == 2 )
          {
            if ( (*(int (**)(void))(*(_DWORD *)v8 + 20))() )
            {
              v11 = *(_DWORD *)(v1 + 6140);
              if ( v11 )
              {
                (*(void (__stdcall **)(signed int))(*(_DWORD *)v11 + 4))(1);
                *(_DWORD *)(v1 + 6140) = 0;
              }
            }
            v10 = *(_DWORD *)(v1 + 5996);
          }
          else
          {
            if ( (*(int (**)(void))(*(_DWORD *)v8 + 20))() )
            {
              v9 = *(_DWORD *)(v1 + 6140);
              if ( v9 )
              {
                (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 4))(1);
                *(_DWORD *)(v1 + 6140) = 0;
              }
            }
            if ( operator new(0x3458u) )
              v10 = sub_401EF1(1, *(_DWORD *)(v1 + 356), v1 + 12404);
            else
              v10 = 0;
          }
          *(_DWORD *)(v1 + 6140) = v10;
          *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        }
        result = sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      }
    }
  }
  else
  {
    v3 = *(_DWORD *)(this + 6040);
    result = sub_40245F("You do not have enough energy to do this.", 1, 200, 0, 0);
  }
  return result;
}
// 401E29: using guessed type int __thiscall sub_401E29(_DWORD);
// 401EF1: using guessed type _DWORD __stdcall sub_401EF1(_DWORD, _DWORD, _DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0041C2E0) --------------------------------------------------------
void __thiscall sub_41C2E0(int this)
{
  int v1; // esi
  int v2; // eax
  int (*v3)(void); // edx
  int v4; // ecx
  int v5; // eax
  int v6; // ecx

  v1 = this;
  if ( *(_DWORD *)(this + 30940) && (*(int (**)(void))(**(_DWORD **)(this + 6140) + 24))() )
  {
    v2 = (*(int (**)(void))(**(_DWORD **)(v1 + 6140) + 28))();
    v3 = *(int (**)(void))(**(_DWORD **)(v1 + 6140) + 20);
    if ( v2 == 3 )
    {
      if ( v3() )
      {
        v6 = *(_DWORD *)(v1 + 6140);
        if ( v6 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 4))(1);
          *(_DWORD *)(v1 + 6140) = 0;
        }
      }
      v5 = *(_DWORD *)(v1 + 5996);
    }
    else
    {
      if ( v3() )
      {
        v4 = *(_DWORD *)(v1 + 6140);
        if ( v4 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v4 + 4))(1);
          *(_DWORD *)(v1 + 6140) = 0;
        }
      }
      if ( operator new(0x5468u) )
        v5 = sub_4018CA(1, *(_DWORD *)(v1 + 356), v1 + 12404);
      else
        v5 = 0;
    }
    *(_DWORD *)(v1 + 6140) = v5;
    *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  }
}
// 4018CA: using guessed type _DWORD __stdcall sub_4018CA(_DWORD, _DWORD, _DWORD);

//----- (0041C470) --------------------------------------------------------
int __thiscall sub_41C470(char *this, int a2, int a3, char *Source)
{
  char *v4; // esi
  int result; // eax
  int v6; // ecx
  int v7; // eax

  v4 = this;
  if ( Source )
  {
    strncpy(this + 13108, Source, 0x1FFu);
  }
  else
  {
    memset(this + 13108, 0, 0x1FFu);
    result = (*(int (**)(void))(**((_DWORD **)v4 + 1535) + 24))();
    if ( !result )
      return result;
    if ( (*(int (**)(void))(**((_DWORD **)v4 + 1535) + 20))() )
    {
      v6 = *((_DWORD *)v4 + 1535);
      if ( v6 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 4))(1);
        *((_DWORD *)v4 + 1535) = 0;
      }
    }
    if ( operator new(0x6F79Cu) )
      v7 = sub_401FAA(*((_DWORD *)v4 + 89), v4 + 12404, -1);
    else
      v7 = 0;
    *((_DWORD *)v4 + 1535) = v7;
  }
  (*(void (__stdcall **)(int, int))(*(_DWORD *)dword_56391C + 56))(a2, a3);
  *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
  return sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
}
// 401FAA: using guessed type _DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0041C600) --------------------------------------------------------
void __thiscall sub_41C600(_DWORD *this, _DWORD *a2, _DWORD *a3, char *a4, int a5, int a6)
{
  _DWORD *v6; // ebx
  int v7; // ecx
  int v8; // esi
  int v9; // edi

  v6 = this;
  if ( a2 && a4 )
  {
    v7 = *(_DWORD *)(this[4 * a5 + 523] + 360);
    v8 = abs(*(signed __int16 *)(v7 + 4));
    v9 = abs(*(signed __int16 *)(v7 + 28));
    *a2 = v8 + v9 + sub_49AD40((_DWORD *)v6[a6 + 1516], a4);
  }
  if ( a3 )
    *a3 = abs(*(signed __int16 *)(*(_DWORD *)(v6[4 * a5 + 523] + 360) + 18));
}

//----- (0041C6B0) --------------------------------------------------------
int __stdcall sub_41C6B0(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebx
  int v6; // ecx
  int v7; // esi
  int v8; // ebp
  int v9; // edx
  int v10; // edx
  int v12; // [esp+10h] [ebp-20h]
  int v13; // [esp+14h] [ebp-1Ch]
  int v14; // [esp+18h] [ebp-18h]
  int v15; // [esp+1Ch] [ebp-14h]
  int v16; // [esp+20h] [ebp-10h]
  int v17; // [esp+24h] [ebp-Ch]
  int v18; // [esp+28h] [ebp-8h]
  int v19; // [esp+2Ch] [ebp-4h]

  v5 = a5 + a3 - abs(*(signed __int16 *)(*(_DWORD *)(a2 + 360) + 28));
  sub_4A4DC0(a2, a4, 0, a1, a3, a4, 3, 0, 0, 0);
  v6 = *(_DWORD *)(a2 + 360);
  v7 = a3 + abs(*(signed __int16 *)(v6 + 4));
  v8 = abs(*(signed __int16 *)(v6 + 16));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 72))(a1, &v16);
  v12 = v16;
  v13 = v17;
  v15 = v19;
  v14 = v5;
  if ( v5 >= v18 )
    v14 = v18;
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 64))(a1, &v12);
  for ( ; v7 < v5; v7 += v8 )
    sub_4A4DC0(a2, v9, 1, a1, v7, a4, 3, 0, 0, 0);
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 64))(a1, &v16);
  return sub_4A4DC0(a2, v10, 2, a1, v5, a4, 3, 0, 0, 0);
}

//----- (0041C800) --------------------------------------------------------
int __thiscall sub_41C800(_DWORD *this, _DWORD *a2, char *a3, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // edi
  _DWORD *v9; // ecx
  int v10; // ST2C_4
  int v11; // eax
  signed __int16 *v12; // ebp
  int v13; // ebx
  int v14; // esi
  int v15; // ebp
  int v16; // ebp
  _DWORD *v18; // [esp+20h] [ebp+Ch]

  v8 = this;
  v9 = (_DWORD *)this[a5 + 1516];
  v10 = *(signed __int16 *)(v9[513] + 174);
  v11 = (int)&v8[4 * a4 + 523];
  v18 = (_DWORD *)v11;
  v12 = *(signed __int16 **)(*(_DWORD *)v11 + 360);
  v13 = abs(v12[9]);
  v14 = abs(v12[2]);
  v15 = abs(v12[14]);
  v16 = v15 + sub_49AD40(v9, a3) + v14;
  sub_40196F(a2, *v18, a7, a8, v16);
  sub_49B310((_DWORD *)v8[a5 + 1516], a3, a6, a2, a7 + v14, (v13 - v10) / 2 + a8 + 1, 3, 0);
  return v16;
}
// 40196F: using guessed type _DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0041C910) --------------------------------------------------------
signed int __thiscall sub_41C910(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx
  int v3; // eax
  signed int v4; // ebp
  int v5; // eax
  __int16 v6; // ax
  int v7; // edi
  int v8; // eax
  signed int v10; // [esp+10h] [ebp-8h]
  signed int v11; // [esp+14h] [ebp-4h]

  v2 = this;
  v3 = this[6898];
  v4 = 0;
  v11 = 0;
  v10 = 0;
  if ( v3 )
    v5 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1060);
  else
    v5 = 0;
  if ( sub_494C40((void *)(a2 + 116), this[78] + 60, v5) )
  {
    v11 = 1;
    if ( *(_DWORD *)(a2 + 200) )
      v10 = 1;
    if ( *(_DWORD *)(a2 + 204) )
      v4 = 1;
  }
  v6 = *(_WORD *)(a2 + 180);
  if ( v6 < 0 || v6 == *(_WORD *)(v2[6897] + 100) )
  {
    v4 = 1;
    if ( *(_DWORD *)(a2 + 192) )
      v10 = 1;
    if ( *(_DWORD *)(a2 + 196) )
      v11 = 1;
  }
  v7 = *(_DWORD *)(a2 + 100);
  v8 = sub_402676(*(_DWORD *)(a2 + 100));
  if ( v7 && (!v8 || v8 < *(_DWORD *)(a2 + 104)) )
  {
    if ( !v10 )
      return 0;
    goto LABEL_23;
  }
  if ( *(_DWORD *)(a2 + 188) )
    v4 = 1;
  if ( !*(_DWORD *)(a2 + 184) )
  {
LABEL_23:
    if ( !v11 )
      return 0;
  }
  if ( v4 )
    return 1;
  return 0;
}
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);

//----- (0041CA50) --------------------------------------------------------
signed int __thiscall sub_41CA50(_DWORD *this, int a2)
{
  _DWORD *v2; // edx
  int v3; // eax

  v2 = dword_563918;
  if ( *((_DWORD *)dword_563918 + 2348) == 3 )
  {
    v3 = this[89];
    if ( *((_DWORD *)dword_563908 + 2688) < *(_DWORD *)(v3 + 4) - this[3110]
      && *((_DWORD *)dword_563908 + 2689) < *(_DWORD *)(v3 + 8) - this[3109] )
    {
      if ( *((_DWORD *)dword_563918 + 2345) == a2 )
      {
        if ( sub_4A9E50(dword_56390C, 1) )
          return 1;
        v2 = dword_563918;
      }
      if ( v2[2346] == a2 )
      {
        if ( sub_4A9E50(dword_56390C, 2) )
          return 1;
        v2 = dword_563918;
      }
      if ( v2[2347] == a2 && sub_4A9E50(dword_56390C, 4) )
        return 1;
    }
  }
  return 0;
}

//----- (0041CB30) --------------------------------------------------------
unsigned __int16 *__thiscall sub_41CB30(int this, int a2)
{
  bool v2; // zf
  int v3; // esi
  unsigned __int16 *result; // eax
  _DWORD *v5; // ecx

  v2 = a2 == 0;
  v3 = this;
  BYTE2(a2) = 0;
  LOBYTE(a2) = 0;
  if ( v2 )
  {
    BYTE1(a2) = 0;
    result = sub_4A4970(*(_DWORD *)(this + 57718), a2, 0);
  }
  else
  {
    BYTE1(a2) = 20;
    result = sub_4A4970(2 * *(_DWORD *)((char *)dword_563908 + 57718) / 3, a2, 1);
  }
  v5 = *(_DWORD **)(v3 + 360);
  if ( v5 )
    result = (unsigned __int16 *)sub_49E420(v5, 0);
  return result;
}

//----- (0041CBC0) --------------------------------------------------------
int *__thiscall sub_41CBC0(_DWORD **this, const char *a2, int *a3)
{
  _DWORD **v3; // edi
  int v4; // eax
  int v5; // eax
  int v6; // ecx
  __int16 v7; // ax
  bool v8; // zf
  char Str1[4]; // [esp+8h] [ebp-840h]
  int v11; // [esp+20h] [ebp-828h]
  int v12; // [esp+3Ch] [ebp-80Ch]
  __int16 v13; // [esp+40h] [ebp-808h]
  char Dst; // [esp+44h] [ebp-804h]

  *a3 = 0;
  a3[1] = 0;
  a3[2] = 0;
  a3[3] = 0;
  v3 = this;
  strcpy(&Dst, a2);
  sub_401A78((int)Str1, &Dst);
  v4 = sub_4B3AF0(v3[1502], Str1, (int)&v11);
  *a3 = v4;
  if ( v4 )
  {
    a3[1] = v12;
    v5 = ((int (__thiscall *)(_DWORD **, int, char *))v3[2][1])(v3 + 2, v4, Str1);
    v6 = *a3;
    a3[2] = v5;
    v7 = v13;
    v8 = v13 == 0;
    a3[3] = *(signed __int16 *)(v6 + 170);
    if ( !v8 )
      a3[3] = v7;
  }
  return a3;
}

//----- (0041CCC0) --------------------------------------------------------
signed int __thiscall sub_41CCC0(_DWORD *this, int a2)
{
  signed int result; // eax

  result = this[35];
  if ( result < 32 )
  {
    this[result + 3] = a2;
    ++this[35];
  }
  return result;
}

//----- (0041CCF0) --------------------------------------------------------
int __cdecl sub_41CCF0(int a1, int a2, int a3, int a4, unsigned __int16 a5)
{
  int v5; // ebx
  int result; // eax
  int v7; // ecx
  int v8; // edi
  int v9; // eax
  int v10; // esi
  int v11; // eax
  int v12; // [esp+14h] [ebp-4h]

  v5 = a1;
  result = (*(int (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 0, 0);
  if ( result )
  {
    v7 = abs(a4);
    v8 = 0;
    v12 = v7;
    if ( v7 > 0 )
    {
      v9 = 0;
      a1 = 0;
      do
      {
        v10 = v9;
        if ( v9 <= v8 )
        {
          do
          {
            if ( a4 <= 0 )
              v11 = v8 + a2;
            else
              v11 = a2 + v9;
            (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v5 + 24))(v5, v11, v10 + a3, a5);
            v9 = a1;
            ++v10;
          }
          while ( v10 <= v8 );
          v7 = v12;
        }
        ++v8;
        a1 = --v9;
      }
      while ( v8 < v7 );
    }
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)v5 + 96))(v5, a1);
  }
  return result;
}

//----- (0041CDB0) --------------------------------------------------------
int __thiscall sub_41CDB0(_DWORD **this, char *a2, int a3)
{
  return sub_4B3AF0(this[1500], a2, a3);
}

//----- (0041CDC0) --------------------------------------------------------
int __stdcall sub_41CDC0(int a1, int a2)
{
  int result; // eax

  result = 0;
  if ( a1 )
    result = (*(unsigned __int16 *)(a1 + 192) + 3) | ((*(signed __int16 *)(a2 + 48) | (*(signed __int16 *)(a2 + 50) << 7)) << 16) | 0x100;
  return result;
}

//----- (0041CE00) --------------------------------------------------------
int __thiscall sub_41CE00(_DWORD **this, char *a2, int a3, int a4, int a5)
{
  return sub_4B3700(this[1513], a2, a3, a4, a5);
}

//----- (0041CED0) --------------------------------------------------------
int __cdecl sub_41CED0(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (0041D010) --------------------------------------------------------
int __thiscall sub_41D010(void **this)
{
  void **v1; // esi
  void *v2; // ecx
  void *v3; // ecx
  void *v4; // ebx
  void *v5; // ebx
  void *v6; // ebx
  void *v7; // ebx
  void *v8; // ebx
  void *v9; // ebx
  void *v10; // ebx
  void *v11; // ebx
  void *v12; // ebx
  void *v13; // ebx
  void *v14; // ebx
  void *v15; // ebx
  void *v16; // ebx
  void *v17; // ebx
  void *v18; // ebx
  void *v19; // ebx
  void *v20; // ebx
  void *v21; // ebx

  v1 = this;
  if ( this[476] )
  {
    j__free(this[476]);
    v1[476] = 0;
  }
  v1[3114] = (void *)1;
  sub_402455(v1);
  if ( (*(int (**)(void))(*(_DWORD *)v1[1535] + 20))() )
  {
    v2 = v1[1535];
    if ( v2 )
    {
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v2 + 4))(1);
      v1[1535] = 0;
    }
    v1[1535] = v1[1499];
  }
  *((_DWORD *)dword_563918 + 2244) = *((_DWORD *)v1[1509] + 112);
  *((_DWORD *)dword_563918 + 2245) = *((_DWORD *)v1[1500] + 7);
  *((_DWORD *)dword_563918 + 2246) = v1[3110];
  v3 = v1[355];
  if ( v3 )
  {
    (*(void (__stdcall **)(signed int))(*(_DWORD *)v3 + 36))(1);
    v1[355] = 0;
  }
  v4 = v1[1501];
  if ( v4 )
  {
    sub_402969(v1[1501]);
    j__free(v4);
    v1[1501] = 0;
  }
  v5 = v1[1504];
  if ( v5 )
  {
    sub_401271(v1[1504]);
    j__free(v5);
    v1[1504] = 0;
  }
  v6 = v1[1503];
  if ( v6 )
  {
    sub_401A00(v1[1503]);
    j__free(v6);
    v1[1503] = 0;
  }
  v7 = v1[1514];
  if ( v7 )
  {
    sub_401023(v1[1514]);
    j__free(v7);
    v1[1514] = 0;
  }
  v8 = v1[350];
  if ( v8 )
  {
    sub_4A72E0((int *)v1[350]);
    j__free(v8);
    v1[350] = 0;
  }
  v9 = v1[351];
  if ( v9 )
  {
    sub_4A72E0((int *)v1[351]);
    j__free(v9);
    v1[351] = 0;
  }
  v10 = v1[352];
  if ( v10 )
  {
    sub_4A72E0((int *)v1[352]);
    j__free(v10);
    v1[352] = 0;
  }
  v11 = v1[353];
  if ( v11 )
  {
    sub_4A72E0((int *)v1[353]);
    j__free(v11);
    v1[353] = 0;
  }
  v12 = v1[1533];
  if ( v12 )
  {
    sub_4022FC(v1[1533]);
    j__free(v12);
    v1[1533] = 0;
  }
  v13 = v1[1510];
  if ( v13 )
  {
    j_nullsub_10(v1[1510]);
    j__free(v13);
    v1[1510] = 0;
  }
  v14 = v1[1534];
  if ( v14 )
  {
    j_nullsub_6(v1[1534]);
    j__free(v14);
    v1[1534] = 0;
  }
  v15 = v1[1508];
  if ( v15 )
  {
    sub_4ACEA0((void **)v1[1508]);
    j__free(v15);
    v1[1508] = 0;
  }
  v16 = v1[1532];
  if ( v16 )
  {
    j_nullsub_8(v1[1532]);
    j__free(v16);
    v1[1532] = 0;
  }
  v17 = v1[1531];
  if ( v17 )
  {
    sub_4AF7B0(v1[1531]);
    j__free(v17);
    v1[1531] = 0;
  }
  v18 = v1[1512];
  if ( v18 )
  {
    sub_48E3E0(v1[1512]);
    j__free(v18);
    v1[1512] = 0;
  }
  v19 = v1[1511];
  if ( v19 )
  {
    sub_4B2C00(v1[1511]);
    j__free(v19);
    v1[1511] = 0;
  }
  v20 = v1[1507];
  if ( v20 )
  {
    sub_491830(v1[1507]);
    j__free(v20);
    v1[1507] = 0;
  }
  v21 = v1[478];
  if ( v21 )
  {
    sub_4A5F60(v1[478]);
    j__free(v21);
    v1[478] = 0;
  }
  return (*(int (**)(void))(*(_DWORD *)dword_56391C + 16))();
}
// 401023: using guessed type int __thiscall sub_401023(_DWORD);
// 401271: using guessed type int __thiscall sub_401271(_DWORD);
// 401A00: using guessed type int __thiscall sub_401A00(_DWORD);
// 401AE6: using guessed type int __thiscall j_nullsub_6(_DWORD);
// 401E06: using guessed type int __thiscall j_nullsub_8(_DWORD);
// 4022FC: using guessed type int __thiscall sub_4022FC(_DWORD);
// 402397: using guessed type int __thiscall j_nullsub_10(_DWORD);
// 402455: using guessed type int __thiscall sub_402455(_DWORD);
// 402969: using guessed type int __thiscall sub_402969(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0041D3E0) --------------------------------------------------------
void __thiscall sub_41D3E0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  void *v3; // edi
  void *v4; // edi
  void *v5; // edi
  int v6; // ecx
  int v7; // ecx
  void *v8; // edi
  void *v9; // edi
  void (__stdcall ****v10)(signed int); // edi
  signed int v11; // ebp
  void (__stdcall ***v12)(signed int); // ecx
  void *v13; // edi
  void *v14; // edi
  void (__stdcall ***v15)(signed int); // ecx
  void *v16; // edi

  v1 = this;
  v2 = this[89];
  v1[6929] = 1;
  if ( v2 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 40))(0, 0);
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v1[89] + 108))(*((_DWORD *)dword_563918 + 2220));
    (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v1[89] + 40))(0, 0);
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v1[89] + 108))(*((_DWORD *)dword_563918 + 2220));
  }
  v3 = (void *)v1[91];
  if ( v3 )
  {
    sub_4B4100((void (__stdcall ****)(signed int))v1[91]);
    j__free(v3);
    v1[91] = 0;
  }
  v4 = (void *)v1[1509];
  if ( v4 )
  {
    sub_40265D(v1[1509]);
    j__free(v4);
    v1[1509] = 0;
  }
  v5 = (void *)v1[1500];
  if ( v5 )
  {
    sub_4026EE(v1[1500]);
    j__free(v5);
    v1[1500] = 0;
  }
  v6 = v1[1499];
  if ( v6 )
  {
    (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 4))(1);
    v1[1499] = 0;
  }
  v7 = v1[1513];
  if ( v7 )
  {
    (*(void (__stdcall **)(signed int))(*(_DWORD *)v7 + 4))(1);
    v1[1513] = 0;
  }
  v8 = (void *)v1[1506];
  if ( v8 )
  {
    j_nullsub_11(v1[1506]);
    j__free(v8);
    v1[1506] = 0;
  }
  v9 = (void *)v1[1505];
  if ( v9 )
  {
    sub_401A8C(v1[1505]);
    j__free(v9);
    v1[1505] = 0;
  }
  v10 = (void (__stdcall ****)(signed int))(v1 + 1516);
  v11 = 15;
  do
  {
    if ( *v10 )
    {
      (***v10)(1);
      *v10 = 0;
    }
    ++v10;
    --v11;
  }
  while ( v11 );
  v12 = (void (__stdcall ***)(signed int))v1[90];
  if ( v12 )
  {
    (**v12)(1);
    v1[90] = 0;
  }
  v13 = (void *)v1[1515];
  if ( v13 )
  {
    sub_4B3970((_DWORD *)v1[1515]);
    j__free(v13);
    v1[1515] = 0;
  }
  v14 = (void *)v1[1502];
  if ( v14 )
  {
    sub_4B3D60((_DWORD *)v1[1502]);
    j__free(v14);
    v1[1502] = 0;
  }
  sub_4A3950();
  v15 = (void (__stdcall ***)(signed int))v1[89];
  if ( v15 )
  {
    (**v15)(1);
    v1[89] = 0;
  }
  v16 = (void *)v1[354];
  if ( v16 )
  {
    sub_4A6B90((_DWORD *)v1[354]);
    j__free(v16);
    v1[354] = 0;
  }
  SetMenu(*((HWND *)dword_563918 + 3), (HMENU)v1[6930]);
  SystemParametersInfoA(4u, 0, v1 + 2697, 1u);
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[80]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[81]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[82]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[83]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[84]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[85]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[86]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[87]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[88]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[73]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[74]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[75]) = 0;
  *(_BYTE *)(*((_DWORD *)Memory + 2) + v1[76]) = 0;
  *(_BYTE *)(v1[2679] + *((_DWORD *)Memory + 2)) = 0;
  *(_BYTE *)(v1[2677] + *((_DWORD *)Memory + 2)) = 0;
  *(_BYTE *)(v1[2678] + *((_DWORD *)Memory + 2)) = 0;
  *(_BYTE *)(v1[2680] + *((_DWORD *)Memory + 2)) = 0;
  j__free((void *)v1[78]);
  v1[6929] = 0;
}
// 401807: using guessed type int __thiscall j_nullsub_11(_DWORD);
// 401A8C: using guessed type int __thiscall sub_401A8C(_DWORD);
// 40265D: using guessed type int __thiscall sub_40265D(_DWORD);
// 4026EE: using guessed type int __thiscall sub_4026EE(_DWORD);

//----- (0041D820) --------------------------------------------------------
void __thiscall sub_41D820(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // ebp
  signed int v3; // edi
  signed int v4; // ebx
  int v5; // edx
  int v6; // ecx
  int v7; // eax
  int v8; // ST04_4

  v2 = this;
  if ( a2 )
  {
    v3 = 25;
    v4 = 25;
    if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 8))(a2) )
    {
      v3 = a2[72];
      v4 = a2[73];
    }
    v7 = sub_401D39(v6, v5);
    v2[6901] = v7;
    v7 ^= 0x12345678u;
    v8 = a2[69];
    a2[69] = v7;
    nullsub_3(a2 + 69, v8, v7);
    sub_4012BC(a2, v3, v4);
  }
}
// 4012BC: using guessed type _DWORD __stdcall sub_4012BC(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (0041D8B0) --------------------------------------------------------
void __usercall sub_41D8B0(int *a1@<ecx>, int a2@<edi>)
{
  int *v2; // esi
  int v3; // edx
  int v4; // eax
  signed __int16 **v5; // edi
  signed __int16 **v6; // eax
  int v7; // [esp-4h] [ebp-34h]
  int v8; // [esp+4h] [ebp-2Ch]
  char v9; // [esp+8h] [ebp-28h]
  char v10; // [esp+Ch] [ebp-24h]
  int v11; // [esp+10h] [ebp-20h]
  int v12; // [esp+14h] [ebp-1Ch]
  int v13; // [esp+18h] [ebp-18h]
  int v14; // [esp+1Ch] [ebp-14h]
  char v15; // [esp+20h] [ebp-10h]

  v2 = a1;
  if ( a1[90] )
  {
    v3 = a1[61];
    v4 = a1[90];
    v7 = a2;
    v11 = a1[60];
    v12 = v3;
    v8 = 0;
    v13 = v11 + *(_DWORD *)(v4 + 4);
    v14 = v3 + *(_DWORD *)(v4 + 8);
    v5 = (signed __int16 **)sub_4ABE90(*(int **)(a1[1508] + 5180), &v11, 1, &v8, 0, 4);
    sub_48DD90((unsigned int)v5, v8, (int (__cdecl *)(_DWORD, _DWORD))&sub_402626);
    sub_49FF60((_DWORD *)v2[90], v2[60], v2[61]);
    (*(void (__stdcall **)(char *, char *))(*(_DWORD *)v2[90] + 92))(&v10, &v9);
    while ( (*(int (__stdcall **)(char *))(*(_DWORD *)v2[90] + 108))(&v15) )
    {
      sub_4AAE30(v2[1508], (int)v5, v2[90], 0, 0, &v15, v7);
      v6 = (signed __int16 **)sub_4AC4A0(
                                &v15,
                                *(_DWORD *)(v2[1508] + 5192),
                                v5,
                                v2[90],
                                0,
                                0,
                                3u,
                                0,
                                0,
                                0,
                                -1000,
                                -1000,
                                0,
                                *(int *)((char *)v2 + 57734),
                                *(int *)((char *)v2 + 57738) == 0);
      sub_4AC4A0(
        &v15,
        *(_DWORD *)(v2[1508] + 5192),
        v6,
        v2[90],
        0,
        0,
        6u,
        0,
        0,
        1,
        -1000,
        -1000,
        0,
        *(int *)((char *)v2 + 57734),
        *(int *)((char *)v2 + 57738) == 0);
    }
    (*(void (**)(void))(*(_DWORD *)v2[90] + 96))();
  }
}
// 41D8B0: could not find valid save-restore pair for edi

//----- (0041DAD0) --------------------------------------------------------
int __userpurge sub_41DAD0@<eax>(int a1@<ecx>, _DWORD *a2, int *a3, int a4, int a5, int a6)
{
  int v6; // esi
  int v7; // ecx
  int v8; // ebx
  unsigned __int16 v9; // ax
  int v10; // ebx
  int v11; // ebp
  int v12; // ecx
  int v13; // ecx
  int v14; // edx
  int v15; // ecx
  int v16; // eax
  int v17; // edx
  int v18; // eax
  int v19; // ecx
  int v20; // eax
  int v21; // ecx
  signed __int16 **v22; // eax
  signed __int16 **v23; // ST54_4
  int v24; // ecx
  int v25; // ecx
  int v26; // ecx
  int v27; // eax
  int v28; // ebx
  int v29; // ebp
  int v30; // eax
  int v31; // eax
  int v32; // ebp
  int v33; // edx
  int v34; // ecx
  int v35; // ebx
  signed int i; // eax
  int v37; // ecx
  int v38; // eax
  int v39; // ecx
  int v40; // eax
  int v41; // ecx
  _WORD *v42; // eax
  int v43; // ebp
  signed int v44; // ecx
  int v45; // ecx
  int v46; // ebp
  int v47; // eax
  int v48; // ebx
  int v49; // ecx
  int v50; // ecx
  int v51; // eax
  int v52; // ecx
  int v53; // ebp
  int v54; // esi
  int v56; // [esp+28h] [ebp-5660h]
  signed __int16 **v57; // [esp+38h] [ebp-5650h]
  int v58; // [esp+38h] [ebp-5650h]
  signed int v59; // [esp+38h] [ebp-5650h]
  int v60; // [esp+38h] [ebp-5650h]
  signed int v61; // [esp+3Ch] [ebp-564Ch]
  signed int v62; // [esp+3Ch] [ebp-564Ch]
  int v63; // [esp+40h] [ebp-5648h]
  signed int v64; // [esp+40h] [ebp-5648h]
  signed __int16 v65; // [esp+44h] [ebp-5644h]
  int v66; // [esp+44h] [ebp-5644h]
  int v67; // [esp+48h] [ebp-5640h]
  signed int v68; // [esp+48h] [ebp-5640h]
  int v69; // [esp+4Ch] [ebp-563Ch]
  int v70; // [esp+4Ch] [ebp-563Ch]
  int v71; // [esp+50h] [ebp-5638h]
  int v72; // [esp+54h] [ebp-5634h]
  int v73; // [esp+58h] [ebp-5630h]
  int v74; // [esp+5Ch] [ebp-562Ch]
  int v75; // [esp+60h] [ebp-5628h]
  int v76; // [esp+64h] [ebp-5624h]
  double v77; // [esp+68h] [ebp-5620h]
  int v78; // [esp+70h] [ebp-5618h]
  int v79; // [esp+74h] [ebp-5614h]
  int v80; // [esp+78h] [ebp-5610h]
  int v81; // [esp+7Ch] [ebp-560Ch]
  int v82; // [esp+80h] [ebp-5608h]
  int v83; // [esp+84h] [ebp-5604h]
  long double v84; // [esp+88h] [ebp-5600h]
  char v85; // [esp+90h] [ebp-55F8h]
  char v86; // [esp+94h] [ebp-55F4h]
  char v87; // [esp+98h] [ebp-55F0h]

  v6 = a1;
  (*(void (__thiscall **)(_DWORD *, int *))(*a2 + 64))(a2, a3);
  v7 = *(_DWORD *)(v6 + 360);
  v56 = 0;
  if ( v7 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD *, int, int, _DWORD))(*(_DWORD *)v7 + 4))(0, a2, a5, a6, 0);
  }
  else
  {
    v8 = *a2;
    v9 = sub_40223E(dword_576828, *(_DWORD *)(v6 + 32942));
    (*(void (__thiscall **)(_DWORD *, _DWORD))(v8 + 40))(a2, v9);
  }
  (*(void (__thiscall **)(_DWORD *, char *, char *))(*a2 + 92))(a2, &v86, &v85);
  v10 = *(_DWORD *)(v6 + 240) - a5;
  v11 = *(_DWORD *)(v6 + 244) - a5;
  v72 = *(_DWORD *)(v6 + 240) - a5;
  v71 = *(_DWORD *)(v6 + 244) - a5;
  if ( *(_DWORD *)(v6 + 12464) && *((_DWORD *)dword_563918 + 2234) )
    sub_40157D(a2, v10, v11);
  if ( *((_DWORD *)dword_563918 + 2235) )
  {
    v12 = *(_DWORD *)(v6 + 6056);
    sub_402900(a2, v10, v11);
  }
  v13 = *a3;
  v79 = *a3 + v10;
  v14 = v79 + a3[2] - v13;
  v15 = a3[1];
  v16 = a3[3];
  v81 = v14;
  v17 = v15 + v11;
  v18 = v16 - v15;
  v19 = *(_DWORD *)(v6 + 27592);
  v80 = v17;
  v82 = v17 + v18;
  HIDWORD(v77) = 0;
  v78 = 0;
  v83 = 0;
  if ( v19 )
    (*(void (__stdcall **)(char *, int *, int *))(*(_DWORD *)v19 + 92))((char *)&v77 + 4, &v78, &v83);
  if ( !*(_DWORD *)(v6 + 27580) )
  {
    v20 = *((_DWORD *)dword_563918 + 2239);
    if ( v20 == 2 || v20 == 1 && !HIDWORD(v77) && !v78 )
    {
      v21 = *(_DWORD *)(v6 + 6128);
      sub_4017CB(a2, v10, v11, &v79);
    }
  }
  v22 = (signed __int16 **)sub_4AC470(*(_DWORD **)(v6 + 27596), 3u);
  v23 = (signed __int16 **)sub_4AC4A0(
                             0,
                             *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5192),
                             v22,
                             (int)a2,
                             v10,
                             v11,
                             4u,
                             *(_DWORD *)(v6 + 10820),
                             0,
                             0,
                             *(_DWORD *)(v6 + 248),
                             *(_DWORD *)(v6 + 252),
                             *((_DWORD *)dword_563918 + 2253),
                             *(_DWORD *)(v6 + 57734),
                             *(_DWORD *)(v6 + 57738) == 0);
  sub_4A7390(*(_DWORD **)(v6 + 1400), (int)a2, v10, v11);
  *(_DWORD *)(v6 + 10704) = 0;
  sub_4A38F0((int)a2, (int)&v87, 500);
  v24 = *(_DWORD *)(v6 + 6136);
  sub_402199(a2, v10, v11);
  v57 = (signed __int16 **)sub_4AC4A0(
                             0,
                             *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5192),
                             v23,
                             (int)a2,
                             v10,
                             v11,
                             5u,
                             *(_DWORD *)(v6 + 10820),
                             0,
                             0,
                             *(_DWORD *)(v6 + 248),
                             *(_DWORD *)(v6 + 252),
                             *((_DWORD *)dword_563918 + 2253),
                             *(_DWORD *)(v6 + 57734),
                             *(_DWORD *)(v6 + 57738) == 0);
  sub_4A7390(*(_DWORD **)(v6 + 1408), (int)a2, v10, v11);
  v25 = *(_DWORD *)(v6 + 6012);
  sub_401C3F(a2, v10, v11);
  if ( *(_DWORD *)(v6 + 6004) )
    sub_401C62(a2, v10, v11);
  sub_4A7390(*(_DWORD **)(v6 + 1404), (int)a2, v10, v11);
  v26 = *(_DWORD *)(v6 + 6056);
  sub_40259F(a2, v10, v11);
  v27 = sub_4A3920();
  sub_40282E(a2, &v87, v27);
  sub_40121C(a2);
  sub_402897(a2);
  sub_4A7390(*(_DWORD **)(v6 + 1412), (int)a2, v10, v11);
  sub_4AC4A0(
    0,
    *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5192),
    v57,
    (int)a2,
    v10,
    v11,
    6u,
    *(_DWORD *)(v6 + 10820),
    0,
    0,
    *(_DWORD *)(v6 + 248),
    *(_DWORD *)(v6 + 252),
    *((_DWORD *)dword_563918 + 2253),
    *(_DWORD *)(v6 + 57734),
    *(_DWORD *)(v6 + 57738) == 0);
  if ( *(_DWORD *)(v6 + 27592) && *(_DWORD *)(v6 + 27580) )
  {
    v28 = *(_DWORD *)(v6 + 248);
    v29 = *(_DWORD *)(v6 + 252);
    v84 = (double)(1000 * (*(_DWORD *)(v6 + 260) + 180) % 240000) * 0.00002617993877916667;
    v61 = (signed int)(cos(v84) * 16000.0);
    v30 = (signed int)(sin(v84) * 16000.0);
    if ( dword_53A7C4 )
      v30 = 7 * v30 / 10;
    v58 = v30;
    (*(void (__thiscall **)(_DWORD *, int *))(*a2 + 72))(a2, &v74);
    v74 *= 1000;
    v76 *= 1000;
    v75 *= 1000;
    v65 = dword_576828 != 2 ? 2016 : 992;
    LODWORD(v77) *= 1000;
    v69 = (*(int (__thiscall **)(_DWORD *, int *, long double *))(*a2 + 92))(a2, &v73, &v84);
    if ( v69 )
    {
      v31 = *(_DWORD *)(v6 + 27580);
      v32 = 1000 * (v29 - v71);
      v33 = v31 - 500000;
      if ( v31 - 500000 < 128000 )
        v33 = 128000;
      v67 = v31 + 1000000;
      v63 = v33;
      v34 = v61 * (v33 / 16000) + 1000 * (v28 - v72);
      v35 = v58 * (v33 / 16000) + v32;
      for ( i = 0; v63 < v67; v63 += 16000 )
      {
        if ( v34 < v74 || v35 < v75 || v34 >= v76 || v35 >= SLODWORD(v77) )
        {
          if ( i )
            break;
        }
        else
        {
          *(_WORD *)(v69 + v73 * (v35 / 1000) + 2 * (v34 / 1000)) = v65;
          i = 1;
        }
        v34 += v61;
        v35 += v58;
      }
    }
    (*(void (__thiscall **)(_DWORD *, _DWORD))(*a2 + 96))(a2, 0);
    v10 = v72;
    v11 = v71;
  }
  v37 = *(_DWORD *)(v6 + 27756);
  if ( v37 )
  {
    if ( (*(int (__cdecl **)(int))(*(_DWORD *)v37 + 4))(v56) == 17 )
    {
      v38 = *(_DWORD *)(v6 + 1932);
      if ( v38 )
      {
        v39 = *(signed __int16 *)(v38 + 170);
        if ( *(_WORD *)(v38 + 170) )
          v39 = *(_DWORD *)(v6 + 10820) % (signed int)*(signed __int16 *)(v38 + 170)
              * *(signed __int16 *)(v38 + 178)
              / *(signed __int16 *)(v38 + 170);
        if ( dword_53A7C4 )
          v40 = 7 * *(_DWORD *)(v6 + 27768) / 10;
        else
          v40 = 0;
        sub_4A50B0(
          *(_DWORD *)(v6 + 1932),
          v39,
          (int)a2,
          *(_DWORD *)(v6 + 27760) - v10,
          *(_DWORD *)(v6 + 27764) - v40 - v11,
          3,
          0,
          v40,
          0,
          0);
      }
    }
  }
  v41 = *(_DWORD *)(v6 + 27592);
  if ( v41 )
    (*(void (__stdcall **)(_DWORD *, int, int))(*(_DWORD *)v41 + 72))(a2, v10, v11);
  v42 = dword_563918;
  if ( *((_DWORD *)dword_563918 + 2323) || *((_DWORD *)dword_563918 + 2325) || *((_DWORD *)dword_563918 + 2326) )
  {
    v62 = *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4) - 1;
    v43 = v80 / 16;
    v59 = *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4) - 1;
    if ( v62 >= (v79 / 16 < 0 ? 0 : v79 / 16) )
      v59 = v79 / 16 < 0 ? 0 : v79 / 16;
    if ( v62 >= ((v81 + 15) / 16 < 0 ? 0 : (unsigned int)((v81 + 15) / 16)) )
      v62 = (v81 + 15) / 16 < 0 ? 0 : (v81 + 15) / 16;
    v44 = *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 8) - 1;
    v68 = v44;
    if ( v44 >= (v43 < 0 ? 0 : v43) )
      v68 = v43 < 0 ? 0 : v43;
    v73 = *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 8) - 1;
    if ( v44 >= ((v82 + 15) / 16 < 0 ? 0 : (unsigned int)((v82 + 15) / 16)) )
      v73 = (v82 + 15) / 16 < 0 ? 0 : (v82 + 15) / 16;
    v45 = *(_DWORD *)(v6 + 27592);
    v70 = 0;
    if ( v45 )
      v70 = (*(int (__cdecl **)(int))(*(_DWORD *)v45 + 228))(v56);
    v64 = v59;
    if ( v59 <= v62 )
    {
      v46 = v68;
      v66 = 16 * v59 - v72;
      v47 = v73;
      do
      {
        v60 = v46;
        if ( v46 <= v47 )
        {
          v48 = 16 * v46 - v71;
          do
          {
            if ( *((_DWORD *)dword_563918 + 2323) )
            {
              v49 = *(_DWORD *)(v6 + 2188);
              if ( v49 )
              {
                if ( *(_BYTE *)(3 * (v64 + v46 * *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4))
                              + *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5168)
                              + 2) & 0x1F )
                  sub_4A50B0(
                    v49,
                    *(_BYTE *)(3 * (v64 + v46 * *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4))
                             + *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5168)
                             + 2) & 0x1F,
                    (int)a2,
                    v66,
                    v48,
                    3,
                    0,
                    0,
                    0,
                    0);
              }
            }
            if ( *((_DWORD *)dword_563918 + 2325) )
            {
              v50 = *(_DWORD *)(v6 + 2204);
              if ( v50 )
              {
                v51 = (unsigned int)*(unsigned __int8 *)(3 * (v64 + v60 * *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4))
                                                       + *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5168)
                                                       + 2) >> 5;
                if ( v51 )
                  sub_4A50B0(v50, v51, (int)a2, v66, v48, 3, 0, 0, 0, 0);
              }
            }
            if ( *((_DWORD *)dword_563918 + 2326) )
            {
              if ( v70 )
              {
                v52 = *(_DWORD *)(v6 + 2188);
                if ( v52 )
                {
                  v53 = *(_DWORD *)(*(_DWORD *)(v6 + 6032)
                                  + 4
                                  * (*(_BYTE *)(3 * (v64 + v60 * *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 4))
                                              + *(_DWORD *)(*(_DWORD *)(v6 + 6032) + 5168)) & 0x7F)
                                  + 2080);
                  if ( !*(_BYTE *)(v70 + v53) )
                  {
                    sub_4A50B0(v52, 1, (int)a2, v66, v48, 3, 0, 0, 0, 0);
                    sub_49B310(*(_DWORD **)(v6 + 6064), (char *)*(&off_538378 + v53), 4, a2, v66 + 2, v48 + 2, 3, 0);
                  }
                }
              }
            }
            v47 = v73;
            v46 = v60 + 1;
            v48 += 16;
            ++v60;
          }
          while ( v60 <= v73 );
          v46 = v68;
        }
        v66 += 16;
        ++v64;
      }
      while ( v64 <= v62 );
    }
    v42 = dword_563918;
    v11 = v71;
    v10 = v72;
  }
  if ( *(_DWORD *)(v6 + 6004) && v42[4450] > 0 )
    sub_40285B(a2, v10, v11);
  (*(void (__thiscall **)(_DWORD *, int))(*a2 + 96))(a2, v56);
  if ( *((_DWORD *)dword_563918 + 2324) )
  {
    v54 = *(_DWORD *)(v6 + 27592);
    if ( v54 )
      (*(void (__thiscall **)(int, _DWORD *, int, int))(*(_DWORD *)v54 + 80))(v54, a2, v10, v11);
  }
  return (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, signed int, signed int))(*a2 + 68))(a2, 0, 0, -1, -1);
}
// 40121C: using guessed type _DWORD __stdcall sub_40121C(_DWORD);
// 40157D: using guessed type _DWORD __stdcall sub_40157D(_DWORD, _DWORD, _DWORD);
// 4017CB: using guessed type _DWORD __stdcall sub_4017CB(_DWORD, _DWORD, _DWORD, _DWORD);
// 401C3F: using guessed type _DWORD __stdcall sub_401C3F(_DWORD, _DWORD, _DWORD);
// 401C62: using guessed type _DWORD __stdcall sub_401C62(_DWORD, _DWORD, _DWORD);
// 402199: using guessed type _DWORD __stdcall sub_402199(_DWORD, _DWORD, _DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 40259F: using guessed type _DWORD __stdcall sub_40259F(_DWORD, _DWORD, _DWORD);
// 40282E: using guessed type _DWORD __stdcall sub_40282E(_DWORD, _DWORD, _DWORD);
// 40285B: using guessed type _DWORD __stdcall sub_40285B(_DWORD, _DWORD, _DWORD);
// 402897: using guessed type _DWORD __stdcall sub_402897(_DWORD);
// 402900: using guessed type _DWORD __stdcall sub_402900(_DWORD, _DWORD, _DWORD);
// 538378: using guessed type void *off_538378;
// 53A7C4: using guessed type int dword_53A7C4;
// 576828: using guessed type int dword_576828;

//----- (0041E6A0) --------------------------------------------------------
int __fastcall sub_41E6A0(_DWORD *a1, int a2)
{
  _DWORD *v2; // esi
  int v3; // ecx
  __int64 v4; // rax
  int v5; // ecx
  int v6; // ecx
  int v7; // edx
  int v8; // ecx
  int v9; // eax
  int v10; // ecx
  int v11; // ecx
  int v12; // edx
  int v13; // ecx
  int v14; // edi
  int v15; // ecx
  int v16; // ecx
  char Dest; // [esp+4h] [ebp-404h]

  v2 = a1;
  v4 = sub_401D39(a1, a2) - a1[6931];
  LODWORD(v4) = (HIDWORD(v4) ^ v4) - HIDWORD(v4);
  if ( (signed int)v4 >= 250 && v2[6935] == -1 )
  {
    LODWORD(v4) = sub_401D39(v3, HIDWORD(v4));
    v5 = v2[6898];
    v2[6931] = v4;
    if ( v5 )
    {
      if ( (*(int (**)(void))(*(_DWORD *)v5 + 148))() )
      {
        v6 = v2[1509];
        LODWORD(v4) = sub_40273E((char *)&Source, 5, (int)&Source, (int)"Cannot switch to spectator mode while dead", 0);
      }
      else if ( (*(int (**)(void))(**(_DWORD **)(v2[6898] + 72) + 4))() == 4 )
      {
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(signed __int16 *)(v2[6897] + 96));
        LODWORD(v4) = sub_40279D(v2);
      }
      else
      {
        v7 = *((_DWORD *)Memory + 1);
        v8 = v2[7710];
        v9 = *(_DWORD *)Memory ^ *(_DWORD *)(v7 + 4 * v2[2677]);
        if ( v8 >= 0 && v9 >= v8 )
          v9 = v2[7710];
        if ( (*(_DWORD *)Memory ^ *(_DWORD *)(v7 + 4 * v2[2679])) >= v9 )
        {
          v11 = v2[6898];
          if ( v11 )
          {
            v14 = (int)&v2[120 * (*(int (**)(void))(*(_DWORD *)v11 + 108))()];
            if ( !*(_DWORD *)(v14 + 59458) )
            {
              v15 = v2[1509];
              LODWORD(v4) = sub_40244B(
                              "You can not switch to spectator mode from this terrain type.  (Terrain restriction)",
                              0);
              return v4;
            }
            if ( v2[6935] == -1 && *(_DWORD *)(v14 + 59922) > 0 )
            {
              v2[6935] = sub_401D39(v13, v12);
              sprintf(
                &Dest,
                "You will switch to spectator mode in %d secs.  (Delay due to terrain restrictions)",
                *(_DWORD *)(v14 + 59922));
              v16 = v2[1509];
              LODWORD(v4) = sub_40244B(&Dest, 0);
              return v4;
            }
          }
          LODWORD(v4) = (*(int (__stdcall **)(signed int))(*(_DWORD *)dword_56391C + 40))(-1);
          return v4;
        }
        v10 = v2[1509];
        LODWORD(v4) = sub_40244B("You do not have enough energy to switch to spectator mode.", 0);
      }
    }
  }
  return v4;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 40279D: using guessed type int __thiscall sub_40279D(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0041E940) --------------------------------------------------------
int __thiscall sub_41E940(_DWORD **this, const char *a2)
{
  int result; // eax

  result = sub_491A00(this[1507], a2);
  if ( result )
    result = sub_402676(*(_DWORD *)(result + 128));
  return result;
}
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);

//----- (0041E980) --------------------------------------------------------
int __thiscall sub_41E980(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *v2; // edx
  int v3; // ebx
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // edi
  int v7; // edi
  int v8; // ecx
  _DWORD *v9; // eax
  int v10; // ecx
  int v11; // eax
  int v12; // edx
  int v13; // ebx
  _DWORD *v14; // eax
  int v15; // ebx
  _DWORD *v16; // eax
  int v17; // ecx
  _DWORD *v18; // ecx
  int v19; // edi
  int v20; // ebx
  int v21; // eax
  void *v22; // ST04_4
  int v23; // eax
  signed int v24; // eax
  int v25; // edi
  int v26; // ebp
  __int16 v27; // ax
  __int16 v28; // ax
  __int16 v29; // ax
  _DWORD *v30; // ecx
  int v31; // edx
  _DWORD *v32; // ebp
  int v33; // eax
  _DWORD *v34; // ecx
  int v35; // edx
  int v36; // ebp
  _DWORD *v37; // ebx
  int v38; // eax
  int v39; // ecx
  int v40; // ecx
  int v41; // eax
  _DWORD *v42; // ecx
  int v43; // edx
  int v44; // ebx
  int v45; // eax
  int v46; // edi
  int result; // eax
  __int16 v48; // bp
  signed int v49; // eax
  int v50; // ecx
  int v51; // edi
  int v52; // ecx
  signed int v53; // eax
  int v54; // eax
  bool v55; // zf
  bool v56; // sf
  signed int v57; // [esp+10h] [ebp-220h]
  int v58; // [esp+10h] [ebp-220h]
  signed int v59; // [esp+14h] [ebp-21Ch]
  int v60; // [esp+14h] [ebp-21Ch]
  int v61; // [esp+18h] [ebp-218h]
  signed int v62; // [esp+18h] [ebp-218h]
  int v63; // [esp+24h] [ebp-20Ch]
  char v64; // [esp+28h] [ebp-208h]
  char Dst[512]; // [esp+2Ch] [ebp-204h]

  v1 = Memory;
  v2 = (char *)Memory + 4;
  v3 = *(_DWORD *)Memory;
  v4 = this;
  v5 = this[2677];
  v6 = *(_DWORD *)((char *)v4 + 57610);
  v1[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v5);
  *(_DWORD *)(*v2 + 4 * v5) = v6 ^ v3;
  v1[4] ^= *(_DWORD *)(*v2 + 4 * v5);
  v7 = *(_DWORD *)((char *)v4 + 57614);
  v8 = v4[2678];
  v9 = Memory;
  v9[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v8);
  *(_DWORD *)(v9[1] + 4 * v8) = v7 ^ *v9;
  v9[4] ^= *(_DWORD *)(v9[1] + 4 * v8);
  v10 = *(_DWORD *)(v4[1503] + 4 * *(signed __int16 *)(v4[6897] + 96) + 4);
  if ( v10 )
  {
    v11 = *(_DWORD *)(*(_DWORD *)(v10 + 72) + 1380);
    if ( v11 != -1 )
    {
      v12 = v4[2677];
      v13 = 1000 * v11;
      v14 = Memory;
      v14[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v12);
      *(_DWORD *)(v14[1] + 4 * v12) = v13 ^ *v14;
      v14[4] ^= *(_DWORD *)(v14[1] + 4 * v12);
    }
    v15 = *(_DWORD *)(*(_DWORD *)(v10 + 72) + 1384);
    if ( v15 != -1 )
    {
      v16 = Memory;
      v17 = v4[2678];
      v16[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v17);
      *(_DWORD *)(v16[1] + 4 * v17) = v15 ^ *v16;
      v16[4] ^= *(_DWORD *)(v16[1] + 4 * v17);
    }
  }
  v18 = Memory;
  v19 = v4[2677];
  v20 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v19);
  v21 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[85]);
  v18[4] ^= v20;
  *(_DWORD *)(v18[1] + 4 * v19) = ((v20 ^ *v18) + v21) ^ *v18;
  v18[4] ^= *(_DWORD *)(v18[1] + 4 * v19);
  v61 = 0;
  memset(Dst, 0, 0x200u);
  v22 = (void *)v4[78];
  v63 = 0;
  v64 = 0;
  memset(v22, 0, 0x3Cu);
  v23 = v4[78];
  v57 = 0;
  if ( *(_WORD *)(v23 + 66) > 0 )
  {
    v59 = 68;
    do
    {
      v24 = abs(*(signed __int16 *)(v59 + v23));
      if ( v24 <= 5100 )
      {
        v25 = *(_DWORD *)(v4[1507] + 4 * v24 + 8008);
        if ( v25 )
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)v25 + 12))(v25) )
          {
            if ( *(_DWORD *)(v25 + 360) == 2 )
              *(_DWORD *)(v25 + 264) = 1;
            v26 = sub_402676(*(_DWORD *)(v25 + 128));
            if ( !*(_DWORD *)(v25 + 252)
              || v61 >= *(_DWORD *)((char *)v4 + 57622)
              || (v27 = *(_WORD *)(v25 + 352)) != 0
              && ((signed __int16)Dst[v27] >= *(_WORD *)(v25 + 354)
               || v27 && (signed int)*((char *)&v63 + v27 / 100) >= *(_DWORD *)((char *)&v4[v27 / 100 + 14406] + 2))
              || (v28 = *(_WORD *)(v25 + 166)) != 0 && v26 > abs(v28) )
            {
              *(_DWORD *)(v25 + 264) = 0;
            }
            if ( *(_DWORD *)(v25 + 264) )
            {
              v29 = *(_WORD *)(v25 + 352);
              ++v61;
              ++Dst[v29];
              if ( v29 )
                ++*((_BYTE *)&v63 + v29 / 100);
              v30 = Memory;
              v31 = v4[2677];
              v32 = (char *)Memory + 4;
              v33 = 1000 * *(_DWORD *)(v25 + 308) + (*(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v31) ^ *(_DWORD *)Memory);
              v30[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v31);
              *(_DWORD *)(*v32 + 4 * v31) = v33 ^ *v30;
              v30[4] ^= *(_DWORD *)(*v32 + 4 * v31);
              v34 = Memory;
              v35 = v4[2678];
              v36 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v35);
              v37 = (char *)Memory + 4;
              v38 = *(_DWORD *)(v25 + 312) + (v36 ^ *(_DWORD *)Memory);
              v34[4] ^= v36;
              *(_DWORD *)(*v37 + 4 * v35) = v38 ^ *v34;
              v34[4] ^= *(_DWORD *)(*v37 + 4 * v35);
              LOWORD(v38) = *(_WORD *)(v25 + 322);
              if ( (_WORD)v38 == -1 )
              {
                *(_DWORD *)(v4[78] + 20) = 0x7FFF;
              }
              else
              {
                v39 = v4[78];
                v38 = (signed __int16)v38;
                if ( (signed int)(signed __int16)v38 > *(_DWORD *)(v39 + 20) )
                  *(_DWORD *)(v39 + 20) = v38;
              }
              LOWORD(v40) = *(_WORD *)(v25 + 320);
              if ( (_WORD)v40 == -1 )
              {
                *(_DWORD *)(v4[78] + 24) = 0x7FFF;
              }
              else
              {
                v41 = v4[78];
                v40 = (signed __int16)v40;
                if ( (signed int)(signed __int16)v40 > *(_DWORD *)(v41 + 24) )
                  *(_DWORD *)(v41 + 24) = v40;
              }
              *(_DWORD *)(v4[78] + 8) += *(signed __int16 *)(v25 + 340);
              *(_DWORD *)(v4[78] + 16) += *(signed __int16 *)(v25 + 336);
              *(_DWORD *)(v4[78] + 12) += *(signed __int16 *)(v25 + 334);
              *(_DWORD *)(v4[78] + 4) += *(signed __int16 *)(v25 + 338);
              *(_DWORD *)(v4[78] + 28) += *(signed __int16 *)(v25 + 330);
              *(_DWORD *)(v4[78] + 32) += *(signed __int16 *)(v25 + 332);
              *(_DWORD *)(v4[78] + 36) += *(signed __int16 *)(v25 + 356);
              *(_DWORD *)(v4[78] + 48) += *(signed __int16 *)(v25 + 358);
              *(_DWORD *)(v4[78] + 52) += *(_DWORD *)(v25 + 300);
              *(_DWORD *)(v4[78] + 56) += *(_DWORD *)(v25 + 304);
              *(_DWORD *)(v4[78] + 40) += *(_DWORD *)(v25 + 288);
              *(_DWORD *)(v4[78] + 44) += *(_DWORD *)(v25 + 292);
              *(_DWORD *)v4[78] += *(_DWORD *)(v25 + 296);
            }
          }
        }
      }
      v23 = v4[78];
      v59 += 4;
      ++v57;
    }
    while ( v57 < *(signed __int16 *)(v23 + 66) );
  }
  v42 = Memory;
  v43 = v4[2679];
  v44 = *(_DWORD *)Memory;
  v45 = 4 * v4[2677];
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v43)) >= (*(_DWORD *)Memory ^ *(_DWORD *)(v45 + *((_DWORD *)Memory + 1))) )
    v46 = *(_DWORD *)(v45 + *((_DWORD *)Memory + 1));
  else
    v46 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v43);
  *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v43);
  *(_DWORD *)(v42[1] + 4 * v43) = v44 ^ v46 ^ *v42;
  v42[4] ^= *(_DWORD *)(v42[1] + 4 * v43);
  sub_48DD20((void *)(v4[78] + 68), *(signed __int16 *)(v4[78] + 66), 4u, (int)&sub_401032);
  memset(v4 + 6902, 0, 0x40u);
  result = v4[78];
  v58 = 0;
  if ( *(_WORD *)(result + 66) > 0 )
  {
    v62 = 68;
    while ( 1 )
    {
      v48 = *(_WORD *)(result + v62);
      v49 = abs(v48);
      if ( v49 <= 5100 )
        v60 = *(_DWORD *)(v4[1507] + 4 * v49 + 8008);
      else
        v60 = 0;
      v50 = *(signed __int16 *)(v60 + 268);
      if ( v50 <= 0 )
        goto LABEL_54;
      v51 = v4[v50 + 6901];
      v52 = v50 - 1;
      if ( v51 )
      {
        v53 = abs(v51);
        if ( v53 <= 5100 )
        {
          v54 = *(_DWORD *)(v4[1507] + 4 * v53 + 8008);
          if ( v54 )
          {
            v55 = v48 == 0;
            v56 = v48 < 0;
            if ( v48 >= 0 )
              goto LABEL_50;
            if ( v51 <= 0 )
              break;
          }
        }
      }
LABEL_53:
      v4[v52 + 6902] = v48;
LABEL_54:
      result = v4[78];
      v62 += 4;
      if ( ++v58 >= *(signed __int16 *)(result + 66) )
        return result;
    }
    v55 = v48 == 0;
    v56 = v48 < 0;
LABEL_50:
    if ( !v56 && !v55 && v51 < 0 || (*(_DWORD *)(v54 + 272) ^ 0x12345678) >= (*(_DWORD *)(v60 + 272) ^ 0x12345678) )
      goto LABEL_54;
    goto LABEL_53;
  }
  return result;
}
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 41E980: using guessed type char Dst[512];

//----- (0041F150) --------------------------------------------------------
int __thiscall sub_41F150(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ecx
  __int16 v5; // bp
  signed int v6; // ebx
  signed __int16 *v7; // edx
  int v8; // eax
  int v9; // ecx
  int v11; // ebp
  int v12; // eax
  int v13; // eax
  int v14; // eax
  __int16 v15; // di
  int v16; // ecx
  int v17; // esi
  void (__thiscall *v18)(int, signed int, _DWORD); // eax
  int v19; // [esp+18h] [ebp+8h]

  v3 = this;
  v4 = this[78];
  v5 = *(_WORD *)(v4 + 66);
  v6 = 0;
  if ( v5 <= 0 )
  {
LABEL_5:
    if ( a3 > 0 && v5 < 100 )
    {
      v8 = sub_402941(v3[1500]);
      *(_WORD *)(v3[78] + 4 * *(signed __int16 *)(v3[78] + 66) + 68) = a2;
      *(_WORD *)(v3[78] + 4 * (signed __int16)(*(_WORD *)(v3[78] + 66))++ + 70) = a3;
      v9 = v3[1500];
      sub_4023D8(v8);
      return a3;
    }
    return 0;
  }
  v7 = (signed __int16 *)(v4 + 68);
  while ( *v7 != a2 )
  {
    ++v6;
    v7 += 2;
    if ( v6 >= v5 )
      goto LABEL_5;
  }
  v11 = 4 * v6;
  v12 = a3 + *(signed __int16 *)(v4 + 4 * v6 + 70);
  if ( v12 >= 0xFFFF )
    goto LABEL_19;
  if ( v12 < 0 )
  {
    LOWORD(v12) = 0;
    goto LABEL_13;
  }
  if ( v12 >= 0xFFFF )
LABEL_19:
    LOWORD(v12) = -1;
LABEL_13:
  *(_WORD *)(v3[78] + v11 + 70) = v12;
  v13 = v3[78];
  if ( !*(_WORD *)(v13 + v11 + 70) )
  {
    v19 = sub_402941(v3[1500]);
    v14 = v3[78];
    v15 = *(_WORD *)(v14 + 66) - 1;
    memcpy_0((void *)(v14 + v11 + 68), (const void *)(v14 + v11 + 72), 4 * (*(signed __int16 *)(v14 + 66) - 1 - v6));
    *(_WORD *)(v3[78] + 66) = v15;
    v16 = v3[1500];
    sub_4023D8(v19);
    v17 = v3[1500];
    v18 = **(void (__thiscall ***)(int, signed int, _DWORD))(v17 + 8);
    *(_DWORD *)(v17 + 60) = 1;
    v17 += 8;
    v18(v17, 1, 0);
    (**(void (__thiscall ***)(int, signed int, _DWORD))v17)(v17, 2, 0);
    return 0;
  }
  return *(signed __int16 *)(v13 + v11 + 70);
}
// 4023D8: using guessed type _DWORD __stdcall sub_4023D8(_DWORD);
// 402941: using guessed type int __thiscall sub_402941(_DWORD);

//----- (0041F320) --------------------------------------------------------
void __thiscall sub_41F320(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  signed int v3; // ebx
  signed int v4; // ebp
  int v5; // eax
  __int16 v6; // di
  signed int v7; // ebx
  int v8; // eax
  signed int v9; // eax
  int v10; // eax
  int v11; // eax
  signed int v12; // eax
  int v13; // eax
  int v14; // eax
  signed int v15; // eax
  int v16; // eax

  v1 = this;
  if ( this[6898] )
  {
    v2 = this[78];
    v3 = 0;
    if ( *(_WORD *)(v2 + 66) > 0 )
    {
      v4 = 68;
      do
      {
        if ( *(_WORD *)(v2 + v4) < 0 )
        {
          v5 = v1[78];
          v6 = *(_WORD *)(v5 + 66) - 1;
          memcpy_0(
            (void *)(v5 + 4 * v3 + 68),
            (const void *)(v5 + 4 * v3 + 72),
            4 * (*(signed __int16 *)(v5 + 66) - 1 - v3));
          --v3;
          *(_WORD *)(v1[78] + 66) = v6;
          v4 -= 4;
        }
        v2 = v1[78];
        ++v3;
        v4 += 4;
      }
      while ( v3 < *(signed __int16 *)(v2 + 66) );
    }
    if ( v1[6898] )
    {
      v7 = 1168;
      do
      {
        v8 = *(_DWORD *)(*(_DWORD *)(v1[6898] + 72) + v7 - 4);
        if ( v8 > 0 )
        {
          v9 = abs(v8);
          if ( v9 <= 5100 )
          {
            v10 = *(_DWORD *)(v1[1507] + 4 * v9 + 8008);
            if ( v10 )
            {
              *(_WORD *)(v1[78] + 4 * *(signed __int16 *)(v1[78] + 66) + 68) = -*(_WORD *)(v10 + 128);
              *(_WORD *)(v1[78] + 4 * (signed __int16)(*(_WORD *)(v1[78] + 66))++ + 70) = 1;
            }
          }
        }
        v11 = *(_DWORD *)(v7 + *(_DWORD *)(v1[6898] + 72));
        if ( v11 > 0 )
        {
          v12 = abs(v11);
          if ( v12 <= 5100 )
          {
            v13 = *(_DWORD *)(v1[1507] + 4 * v12 + 8008);
            if ( v13 )
            {
              *(_WORD *)(v1[78] + 4 * *(signed __int16 *)(v1[78] + 66) + 68) = -*(_WORD *)(v13 + 128);
              *(_WORD *)(v1[78] + 4 * (signed __int16)(*(_WORD *)(v1[78] + 66))++ + 70) = 1;
            }
          }
        }
        v14 = *(_DWORD *)(*(_DWORD *)(v1[6898] + 72) + v7 + 4);
        if ( v14 > 0 )
        {
          v15 = abs(v14);
          if ( v15 <= 5100 )
          {
            v16 = *(_DWORD *)(v1[1507] + 4 * v15 + 8008);
            if ( v16 )
            {
              *(_WORD *)(v1[78] + 4 * *(signed __int16 *)(v1[78] + 66) + 68) = -*(_WORD *)(v16 + 128);
              *(_WORD *)(v1[78] + 4 * (signed __int16)(*(_WORD *)(v1[78] + 66))++ + 70) = 1;
            }
          }
        }
        v7 += 12;
      }
      while ( v7 < 1192 );
    }
    sub_401640(v1);
  }
}
// 401640: using guessed type int __thiscall sub_401640(_DWORD);

//----- (0041F570) --------------------------------------------------------
signed int __thiscall sub_41F570(_DWORD *this, const void *a2, signed int a3)
{
  _DWORD *v3; // ebx
  signed int result; // eax
  int i; // edi
  signed int v6; // ecx

  v3 = this;
  result = this[352];
  for ( i = *(_DWORD *)result; i; i = *(_DWORD *)(i + 4) )
    result = sub_402658(a2);
  if ( a3 > 0 )
  {
    result = v3[6894];
    if ( result < 30 )
    {
      qmemcpy(&v3[15 * result + 6444], a2, 0x34u);
      v6 = 10;
      if ( a3 <= 10 )
        v6 = a3;
      v3[15 * v3[6894] + 6458] = v6;
      result = v3[6894];
      v3[15 * v3[6894]++ + 6457] = a3;
    }
  }
  return result;
}
// 402658: using guessed type _DWORD __stdcall sub_402658(_DWORD);

//----- (0041F620) --------------------------------------------------------
int __thiscall sub_41F620(char *this, char a2)
{
  return sub_401596(this + 12, this + 140, a2);
}
// 401596: using guessed type _DWORD __cdecl sub_401596(_DWORD, _DWORD, char);

//----- (0041F650) --------------------------------------------------------
void __thiscall sub_41F650(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // esi

  v1 = this;
  *this = &Game::`vftable';
  this[1] = &off_511D20;
  this[2] = off_511D0C;
  sub_401E4C("Logging out...");
  sub_401E33(v1);
  sub_401D6B(v1);
  v2 = Memory;
  if ( Memory )
  {
    sub_4AA7F0((void **)Memory);
    j__free(v2);
  }
}
// 401D6B: using guessed type int __thiscall sub_401D6B(_DWORD);
// 401E33: using guessed type int __thiscall sub_401E33(_DWORD);
// 401E4C: using guessed type _DWORD __stdcall sub_401E4C(_DWORD);
// 511D0C: using guessed type int (__stdcall *off_511D0C[2])(int, int);
// 511D20: using guessed type int (__stdcall *off_511D20)(int, int, int);
// 511D2C: using guessed type void *Game::`vftable';

//----- (0041F6B0) --------------------------------------------------------
int __thiscall sub_41F6B0(int this, int a2)
{
  int v2; // ebp
  void *v3; // ST34_4
  int v4; // edx
  int v5; // ecx
  int v6; // edx
  int v7; // ecx
  int v8; // eax
  int v9; // edx
  int v10; // eax
  char *v11; // esi
  int v12; // ecx
  _DWORD *v13; // eax
  int v14; // ecx
  _DWORD *v15; // eax
  int v16; // ecx
  _DWORD *v17; // eax
  int v18; // ecx
  _DWORD *v19; // eax
  int v20; // edx
  int v21; // ecx
  int v22; // eax
  int v23; // ecx
  void *v24; // eax
  int v25; // eax
  void *v26; // eax
  int v27; // eax
  void *v28; // eax
  int v29; // eax
  void *v30; // eax
  int v31; // eax
  void *v32; // eax
  int v33; // eax
  void *v34; // eax
  int v35; // eax
  void *v36; // eax
  int v37; // eax
  int v38; // eax
  int result; // eax
  signed int v40; // eax
  _BYTE *v41; // ecx
  int v42; // eax
  int v43; // eax
  int v44; // eax
  int v45; // eax
  int v46; // ecx
  _BYTE *v47; // ecx
  const char *v48; // edx
  _WORD *v49; // edi
  char v50; // al
  unsigned int v51; // eax
  char *v52; // edi
  char v53; // cl
  int v54; // ecx
  int v55; // ecx
  void *v56; // ST54_4
  int v57; // eax
  void *v58; // ST54_4
  int v59; // eax
  int v60; // ecx
  void *v61; // ST54_4
  bool v62; // zf
  signed int v63; // [esp+1Ch] [ebp-81Ch]
  signed int v64; // [esp+20h] [ebp-818h]
  int v65; // [esp+24h] [ebp-814h]
  char Dest; // [esp+28h] [ebp-810h]
  char Source; // [esp+228h] [ebp-610h]
  char Dst; // [esp+428h] [ebp-410h]
  char v69; // [esp+5D8h] [ebp-260h]
  int v70; // [esp+834h] [ebp-4h]

  v2 = this;
  v3 = *(void **)(this + 312);
  *(_DWORD *)(this + 308) = 0;
  *(_DWORD *)(this + 140) = 0;
  *(_DWORD *)(this + 27576) = 0;
  *(_DWORD *)(this + 1904) = 0;
  *(_BYTE *)(this + 13620) = 0;
  *(_BYTE *)(this + 13684) = 0;
  *(_DWORD *)(this + 12456) = 0;
  *(_DWORD *)(this + 10728) = 0;
  *(_DWORD *)(this + 27756) = 0;
  *(_DWORD *)(this + 27776) = 0;
  *(_DWORD *)(this + 27752) = 0;
  *(_BYTE *)(this + 27876) = 0;
  *(_DWORD *)(this + 10820) = 0;
  *(_DWORD *)(this + 25752) = 0;
  *(_DWORD *)(this + 10824) = 0;
  *(_DWORD *)(this + 240) = 0;
  *(_DWORD *)(this + 244) = 0;
  *(_DWORD *)(this + 248) = 0;
  *(_DWORD *)(this + 252) = 0;
  *(_DWORD *)(this + 256) = 0;
  *(_DWORD *)(this + 260) = 0;
  *(_DWORD *)(this + 264) = 0;
  memset(v3, 0, 0x3Cu);
  *(_DWORD *)(v2 + 12392) = 0;
  *(_DWORD *)(v2 + 27684) = 0;
  *(_DWORD *)(v2 + 27672) = 0;
  *(_DWORD *)(v2 + 25772) = 0;
  *(_DWORD *)(v2 + 27580) = 0;
  *(_DWORD *)(v2 + 10828) = sub_401D39(v5, v4);
  *(_DWORD *)(v2 + 27588) = 0;
  *(_DWORD *)(v2 + 27592) = 0;
  *(_DWORD *)(v2 + 6016) = 0;
  *(_DWORD *)(v2 + 6004) = 0;
  *(_DWORD *)(v2 + 6012) = 0;
  *(_DWORD *)(v2 + 6032) = 0;
  *(_DWORD *)(v2 + 6028) = 0;
  *(_DWORD *)(v2 + 6044) = 0;
  *(_DWORD *)(v2 + 6048) = 0;
  *(_DWORD *)(v2 + 6124) = 0;
  *(_DWORD *)(v2 + 6056) = 0;
  *(_DWORD *)(v2 + 6136) = 0;
  *(_DWORD *)(v2 + 6132) = 0;
  *(_DWORD *)(v2 + 10724) = 0;
  *(_DWORD *)(v2 + 280) = sub_401D39(v7, v6);
  *(_DWORD *)(v2 + 284) = _time64(0);
  memset((void *)(v2 + 12908), 0, 0xC8u);
  *(_DWORD *)(v2 + 10764) = -1;
  *(_DWORD *)(v2 + 10772) = -1;
  *(_DWORD *)(v2 + 10768) = -1;
  *(_DWORD *)(v2 + 27724) = 0;
  *(_DWORD *)(v2 + 27740) = -1;
  *(_DWORD *)(v2 + 27748) = -1;
  *(_DWORD *)(v2 + 10800) = 0;
  *(_DWORD *)(v2 + 27692) = 0;
  *(_DWORD *)(v2 + 27712) = 0;
  *(_DWORD *)(v2 + 27676) = 0;
  *(_DWORD *)(v2 + 27680) = 0;
  memset((void *)(v2 + 27608), 0, 0x40u);
  memset((void *)(*(_DWORD *)(v2 + 312) + 60), 0, 0x796u);
  v8 = rand();
  *(_BYTE *)(v2 + 2220) = 0;
  *(_DWORD *)(v2 + 2476) = 0;
  *(_DWORD *)(v2 + 10836) = 0;
  *(_DWORD *)(v2 + 12904) = 0;
  *(_DWORD *)(v2 + 268) = 0;
  *(_DWORD *)(v2 + 272) = 0;
  v9 = v8 % 1500 + 500;
  *(_DWORD *)(v2 + 27688) = v9;
  *(_DWORD *)(v2 + 276) = sub_401D39(1500, v9);
  memset(&Dst, 0, 0x1B0u);
  v10 = -1;
  v11 = &Dst;
  do
    v10 = dword_53A208[(unsigned __int8)(v10 ^ *v11++)] ^ (v10 >> 8) & 0xFFFFFF;
  while ( v11 < &v69 );
  v12 = *(_DWORD *)(v2 + 320);
  *(_DWORD *)(v2 + 12468) = ~v10;
  v13 = Memory;
  v13[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v12);
  *(_DWORD *)(v13[1] + 4 * v12) = *v13;
  v13[4] ^= *(_DWORD *)(v13[1] + 4 * v12);
  v14 = *(_DWORD *)(v2 + 324);
  v15 = Memory;
  v15[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v14);
  *(_DWORD *)(v15[1] + 4 * v14) = *v15;
  v15[4] ^= *(_DWORD *)(v15[1] + 4 * v14);
  v16 = *(_DWORD *)(v2 + 328);
  v17 = Memory;
  v17[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v16);
  *(_DWORD *)(v17[1] + 4 * v16) = *v17;
  v17[4] ^= *(_DWORD *)(v17[1] + 4 * v16);
  v18 = *(_DWORD *)(v2 + 332);
  v19 = Memory;
  v19[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v18);
  *(_DWORD *)(v19[1] + 4 * v18) = *v19;
  v20 = v19[1];
  v21 = *(_DWORD *)(v20 + 4 * v18);
  v19[4] ^= v21;
  *(_DWORD *)(v2 + 316) = 0;
  *(_DWORD *)(v2 + 27584) = 0;
  v22 = sub_401D39(v21, v20);
  v23 = *(_DWORD *)(v2 + 356);
  *(_DWORD *)(v2 + 10804) = v22;
  *(_DWORD *)(v2 + 10812) = 0;
  *(_DWORD *)(v2 + 10808) = 0;
  *(_DWORD *)(v2 + 10816) = 0;
  *(_DWORD *)(v2 + 12376) = 0;
  *(_DWORD *)(v2 + 12380) = 0;
  *(_DWORD *)(v2 + 12384) = 0;
  *(_DWORD *)(v2 + 12388) = (*(int (**)(void))(*(_DWORD *)v23 + 156))() + 1;
  v24 = operator new(4u);
  v70 = 0;
  if ( v24 )
    v25 = unknown_libname_2(v24);
  else
    v25 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 1400) = v25;
  v26 = operator new(4u);
  v70 = 1;
  if ( v26 )
    v27 = unknown_libname_2(v26);
  else
    v27 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 1404) = v27;
  v28 = operator new(4u);
  v70 = 2;
  if ( v28 )
    v29 = unknown_libname_2(v28);
  else
    v29 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 1408) = v29;
  v30 = operator new(4u);
  v70 = 3;
  if ( v30 )
    v31 = unknown_libname_2(v30);
  else
    v31 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 1412) = v31;
  v32 = operator new(0x7E98u);
  v70 = 4;
  if ( v32 )
    v33 = sub_4024E1(v32);
  else
    v33 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 6016) = v33;
  v34 = operator new(0x184u);
  v70 = 5;
  if ( v34 )
    v35 = sub_4027B6(v34);
  else
    v35 = 0;
  v70 = -1;
  *(_DWORD *)(v2 + 6128) = v35;
  v36 = operator new(0x840u);
  v70 = 6;
  if ( v36 )
    v37 = sub_401FC3(v36);
  else
    v37 = 0;
  *(_DWORD *)(v2 + 6040) = v37;
  v38 = *((_DWORD *)dword_563918 + 2211);
  v70 = -1;
  if ( v38 )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_56391C + 12))(
      dword_56391C,
      a2,
      v38,
      *((_DWORD *)dword_563918 + 2212));
  else
    (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)dword_56391C + 12))(
      dword_56391C,
      a2,
      -*(_DWORD *)(*(_DWORD *)(v2 + 356) + 4),
      -*(_DWORD *)(*(_DWORD *)(v2 + 356) + 8));
  sub_401EBA(v2);
  if ( (*(int (__stdcall **)(char *))(*(_DWORD *)dword_56391C + 8))(&Dst) == 4 )
    return PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 0, 0);
  sub_401640(v2);
  sub_40279D(v2);
  sub_401965(v2);
  v40 = 0;
  *(_DWORD *)(v2 + 12464) = 0;
  v41 = (_BYTE *)(v2 + 59601);
  while ( !*v41 )
  {
    ++v40;
    v41 += 480;
    if ( v40 >= 16 )
      goto LABEL_34;
  }
  *(_DWORD *)(v2 + 12464) = 1;
LABEL_34:
  v65 = 0;
  v63 = 0;
  v42 = sub_48D270((char *)(v2 + 57798));
  if ( v42 != *(_DWORD *)(v2 + 288) )
  {
    *(_DWORD *)(v2 + 288) = v42;
    v63 = 1;
  }
  v43 = sub_48D270("global.nws");
  if ( v43 != *((_DWORD *)dword_563918 + 2209) )
  {
    *((_DWORD *)dword_563918 + 2209) = v43;
    v65 = 1;
  }
  v44 = sub_48D270("release.txt");
  if ( v44 != *((_DWORD *)dword_563918 + 2208) )
  {
    *((_DWORD *)dword_563918 + 2208) = v44;
    v45 = sub_402617(0x89u);
    v46 = *(_DWORD *)(v2 + 6036);
    sub_40273E((char *)&::Source, 5, (int)&::Source, v45, 0);
  }
  if ( sub_48D310() )
    (*(void (__stdcall **)(signed int, signed int, BYTE *))(*(_DWORD *)dword_56391C + 88))(15, 6, &::Source);
  v47 = dword_563918;
  if ( *((_BYTE *)dword_563918 + 10024) && *(_DWORD *)(v2 + 12460) )
  {
    sprintf(&Dest, "?chat %s", (char *)dword_563918 + 10024);
    v64 = 1;
    v48 = (char *)dword_563918 + 10056;
    do
    {
      if ( !*v48 )
        break;
      v49 = (_WORD *)((char *)&v65 + 3);
      do
      {
        v50 = *((_BYTE *)v49 + 1);
        v49 = (_WORD *)((char *)v49 + 1);
      }
      while ( v50 );
      *v49 = 44;
      v51 = strlen(v48) + 1;
      v52 = (char *)&v65 + 3;
      do
        v53 = (v52++)[1];
      while ( v53 );
      qmemcpy(v52, v48, v51);
      v48 += 32;
      ++v64;
    }
    while ( v64 < 9 );
    v54 = *(_DWORD *)(v2 + 6036);
    sub_402793(&Dest, 0);
    v47 = dword_563918;
  }
  if ( v47[9112] && v47[9176] && !*(_DWORD *)(*(_DWORD *)(v2 + 312) + 502) )
  {
    sprintf(&Source, "?squadjoin %s:%s", v47 + 9112, v47 + 9176);
    v55 = *(_DWORD *)(v2 + 6036);
    sub_402793(&Source, 0);
  }
  if ( *(_DWORD *)(v2 + 57726) )
  {
    if ( v65 )
    {
      v56 = operator new(0x27144u);
      v70 = 7;
      if ( v56 )
      {
        v57 = sub_401569("global.nws", *(_DWORD *)(v2 + 356), v2 + 12404, 5);
LABEL_64:
        *(_DWORD *)(v2 + 6140) = v57;
        v70 = -1;
        goto LABEL_65;
      }
      goto LABEL_63;
    }
    if ( v63 )
    {
      v58 = operator new(0x27144u);
      v70 = 8;
      if ( v58 )
      {
        v57 = sub_401569((char *)(v2 + 57798), *(_DWORD *)(v2 + 356), v2 + 12404, 5);
        goto LABEL_64;
      }
LABEL_63:
      v57 = 0;
      goto LABEL_64;
    }
  }
LABEL_65:
  v59 = *((_DWORD *)dword_563908 + 6902);
  if ( v59 )
  {
    v60 = *(_DWORD *)(v2 + 6000);
    sub_4023D8(abs(v59));
  }
  v61 = operator new(0xCu);
  v70 = 9;
  if ( v61 )
    result = sub_4013BB((char *)(v2 + 57770));
  else
    result = 0;
  *(_DWORD *)(v2 + 6132) = result;
  v62 = *((_DWORD *)dword_563918 + 2268) == 0;
  v70 = -1;
  if ( !v62 )
  {
    if ( *(_DWORD *)(v2 + 12460) )
      result = sub_40168B(result);
  }
  *(_DWORD *)(v2 + 12460) = 0;
  *(_DWORD *)(v2 + 308) = 1;
  return result;
}
// 401640: using guessed type int __thiscall sub_401640(_DWORD);
// 40168B: using guessed type int __thiscall sub_40168B(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401EBA: using guessed type int __thiscall sub_401EBA(_DWORD);
// 4023D8: using guessed type _DWORD __stdcall sub_4023D8(_DWORD);
// 4024E1: using guessed type int __thiscall sub_4024E1(_DWORD);
// 40279D: using guessed type int __thiscall sub_40279D(_DWORD);
// 4027B6: using guessed type int __thiscall sub_4027B6(_DWORD);
// 4A72D0: using guessed type int __thiscall unknown_libname_2(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004201E0) --------------------------------------------------------
void __thiscall sub_4201E0(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // ecx
  FILE *v6; // eax
  FILE *v7; // edi
  signed int v8; // eax
  int v9; // edi
  __int16 v10; // ax
  __int16 v11; // cx
  __int16 v12; // dx

  v4 = this;
  switch ( a2 )
  {
    case 0:
    case 1:
      v8 = abs(a3);
      if ( v8 <= 5100 )
      {
        v9 = *(_DWORD *)(*(_DWORD *)(this + 6024) + 4 * v8 + 8008);
        if ( v9 )
        {
          v10 = *(_WORD *)(this + 244);
          v11 = *(_WORD *)(this + 248);
          *(_WORD *)(v4 + 27700) = *(_WORD *)(v9 + 128);
          v12 = *(_WORD *)(v4 + 256);
          *(_WORD *)(v4 + 27702) = v10;
          *(_WORD *)(v4 + 27704) = v11;
          *(_WORD *)(v4 + 27706) = v12;
          *(_DWORD *)(v4 + 27692) = a4;
          *(_DWORD *)(v4 + 27696) = 0;
          sub_4026D0(v9);
          sub_4019E7(v9);
        }
      }
      break;
    case 2:
      if ( !a4 )
        (*(void (__stdcall **)(int, int, int))(*(_DWORD *)dword_56391C + 144))(this + 1580, this + 1452, this + 1708);
      break;
    case 3:
      if ( !a4 )
      {
        v6 = fopen((const char *)(this + 1772), "wb");
        v7 = v6;
        if ( v6 )
        {
          fwrite(*(const void **)(v4 + 1900), *(_DWORD *)(v4 + 1904), 1u, v6);
          fclose(v7);
        }
      }
      if ( *(_DWORD *)(v4 + 1900) )
      {
        free(*(void **)(v4 + 1900));
        *(_DWORD *)(v4 + 1900) = 0;
      }
      break;
    case 4:
      if ( !a4 && (*(int (**)(void))(**(_DWORD **)(this + 6136) + 28))() == 7 )
      {
        v5 = *(_DWORD *)(v4 + 6136);
        sub_401D0C(v4 + 12468);
      }
      break;
    default:
      return;
  }
}
// 4019E7: using guessed type _DWORD __stdcall sub_4019E7(_DWORD);
// 401D0C: using guessed type _DWORD __stdcall sub_401D0C(_DWORD);
// 4026D0: using guessed type _DWORD __stdcall sub_4026D0(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004203D0) --------------------------------------------------------
void __thiscall sub_4203D0(_DWORD *this, int a2)
{
  signed int v2; // edi
  _DWORD *v3; // esi
  bool v4; // zf
  int v5; // eax
  int v6; // ecx
  signed int v7; // ebx
  int v8; // eax
  int v9; // ecx
  _DWORD *v10; // ecx
  int v11; // eax
  int v12; // eax
  __int16 v13; // ax
  __int16 v14; // cx
  __int16 v15; // dx
  int v16; // eax
  _DWORD *v17; // ecx
  char v18; // cl
  _DWORD *v19; // eax
  int v20; // ebx
  int v21; // eax
  int v22; // edi
  int v23; // ebp
  int v24; // ebx
  bool v25; // sf
  _DWORD *v26; // ebp
  unsigned int v27; // eax
  int v28; // ecx
  int v29; // eax
  unsigned int v30; // eax
  char *v31; // edi
  char v32; // cl
  char v33; // cl
  _DWORD *v34; // eax
  __int16 v35; // dx
  __int16 v36; // ax
  int v37; // [esp+14h] [ebp-960h]
  void *v38; // [esp+18h] [ebp-95Ch]
  int v39; // [esp+1Ch] [ebp-958h]
  int v40; // [esp+20h] [ebp-954h]
  int v41[256]; // [esp+24h] [ebp-950h]
  int v42[256]; // [esp+424h] [ebp-550h]
  char Dest; // [esp+824h] [ebp-150h]
  char v44; // [esp+863h] [ebp-111h]
  char v45; // [esp+864h] [ebp-110h]
  int v46; // [esp+970h] [ebp-4h]

  v2 = 0;
  v3 = this;
  v4 = this[6898] == 0;
  v39 = a2;
  if ( v4 || (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 4))(a2) != 11 )
    return;
  v5 = *(_DWORD *)(a2 + 608);
  if ( v5 <= 0 )
  {
    v35 = *((_WORD *)v3 + 124);
    v36 = *((_WORD *)v3 + 126);
    *((_WORD *)v3 + 13852) = *(_WORD *)(a2 + 128);
    *((_WORD *)v3 + 13855) = *((_WORD *)v3 + 130);
    *((_WORD *)v3 + 13853) = v35;
    *((_WORD *)v3 + 13854) = v36;
    v3[6924] = 0;
    v3[6925] = 0;
    sub_4026D0(a2);
    goto LABEL_55;
  }
  v6 = v3[1503];
  v7 = 0;
  v38 = (void *)sub_401FBE(v3[62], v3[63], v5, v42);
  if ( (signed int)v38 <= 0 )
    goto LABEL_49;
  do
  {
    if ( (*(int (**)(void))(*(_DWORD *)v42[v7] + 16))() == *(signed __int16 *)(v3[6897] + 96) )
      goto LABEL_18;
    v8 = (*(int (**)(void))(*(_DWORD *)v42[v7] + 204))();
    if ( *(_WORD *)(a2 + 628) == 1 )
    {
      v9 = v42[v7];
      if ( *(_DWORD *)(v9 + 56) >= 5001 && (v8 == *(signed __int16 *)(v3[6897] + 100) || v8 == -1) )
      {
        v41[v2] = v9;
LABEL_17:
        ++v2;
        goto LABEL_18;
      }
    }
    else
    {
      if ( v8 != *(signed __int16 *)(v3[6897] + 100) )
        goto LABEL_18;
      v10 = (_DWORD *)v42[v7];
      if ( v10[14] < 5001 )
      {
        v41[v2] = (int)v10;
        goto LABEL_17;
      }
      v11 = (*(int (**)(void))(*v10 + 16))();
      if ( v11 != -1 )
      {
        v12 = *(_DWORD *)(v3[1503] + 4 * v11 + 4);
        if ( v12 )
        {
          v41[v2] = v12;
          goto LABEL_17;
        }
      }
    }
LABEL_18:
    ++v7;
  }
  while ( v7 < (signed int)v38 );
  v40 = v2;
  if ( v2 != 1 )
  {
    if ( v2 > 1 )
    {
      if ( (*(_DWORD *)(a2 + 260) ^ 0x12345678) <= 40 )
      {
        v19 = (_DWORD *)sub_4011E5(40);
        v18 = 1;
      }
      else
      {
        v18 = 0;
        v19 = (_DWORD *)(a2 + 260);
      }
      *(_DWORD *)(a2 + 260) = *v19;
      if ( v18 & 1 )
        nullsub_2(&v38);
      v20 = 0;
      if ( *(_WORD *)(a2 + 628) )
      {
        if ( *(_WORD *)(a2 + 628) == 1 )
        {
          v21 = sub_402617(0x50u);
        }
        else
        {
          if ( *(_WORD *)(a2 + 628) != 2 )
            goto LABEL_35;
          v21 = sub_402617(0x52u);
        }
      }
      else
      {
        v21 = sub_402617(0x51u);
      }
      v20 = v21;
LABEL_35:
      v22 = v3[62] - v3[60];
      v23 = v3[63] - v3[61];
      v38 = operator new(0xD18u);
      v46 = 0;
      if ( v38 )
        v37 = sub_4010FF(
                *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                v20,
                v3 + 1,
                v22,
                v23,
                0,
                *(_DWORD *)(v39 + 128),
                1);
      else
        v37 = 0;
      v24 = 0;
      v4 = v40 == 0;
      v25 = v40 < 0;
      v46 = -1;
      v3[355] = v37;
      if ( !v25 && !v4 )
      {
        do
        {
          v26 = (_DWORD *)v41[v24];
          (*(void (__thiscall **)(int, char *))(*v26 + 136))(v41[v24], &v45);
          if ( *(_WORD *)(v39 + 628) != 1 )
          {
            v27 = v26[14];
            if ( v27 <= 0x1387 )
            {
              v28 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v27 + 12408);
              if ( v28 )
              {
                v29 = sub_401D57(v28);
                if ( v29 )
                {
                  if ( (_DWORD *)v29 != v26 )
                  {
                    sprintf(&Dest, " (%s)", *(_DWORD *)(v29 + 72) + 980);
                    v30 = strlen(&Dest) + 1;
                    v31 = &v44;
                    do
                      v32 = (v31++)[1];
                    while ( v32 );
                    qmemcpy(v31, &Dest, v30);
                  }
                }
              }
            }
          }
          sub_4024F0(&v45, v26[14], 0);
          ++v24;
        }
        while ( v24 < v40 );
      }
      return;
    }
LABEL_49:
    if ( (*(_DWORD *)(a2 + 260) ^ 0x12345678) <= 25 )
    {
      v34 = (_DWORD *)sub_4011E5(25);
      v33 = 2;
    }
    else
    {
      v33 = 0;
      v34 = (_DWORD *)(a2 + 260);
    }
    *(_DWORD *)(a2 + 260) = *v34;
    if ( v33 & 2 )
      nullsub_2(&v39);
    return;
  }
  v13 = *((_WORD *)v3 + 124);
  v14 = *((_WORD *)v3 + 126);
  *((_WORD *)v3 + 13852) = *(_WORD *)(a2 + 128);
  v15 = *((_WORD *)v3 + 130);
  *((_WORD *)v3 + 13853) = v13;
  v16 = v41[0];
  *((_WORD *)v3 + 13854) = v14;
  *((_WORD *)v3 + 13855) = v15;
  v3[6924] = *(_DWORD *)(v16 + 56);
  v3[6925] = 0;
  v3[6923] = a2;
  v3[6928] = *(signed __int16 *)(a2 + 414);
  v17 = *(_DWORD **)(a2 + 564);
  if ( v17 )
    sub_4A7120(v17, 0, 0, 0, 0);
LABEL_55:
  sub_4019E7(a2);
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4011E5: using guessed type _DWORD __stdcall sub_4011E5(_DWORD);
// 4019E7: using guessed type _DWORD __stdcall sub_4019E7(_DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 401FBE: using guessed type _DWORD __stdcall sub_401FBE(_DWORD, _DWORD, _DWORD, _DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);
// 4026D0: using guessed type _DWORD __stdcall sub_4026D0(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 4203D0: using guessed type int var_950[256];
// 4203D0: using guessed type int var_550[256];

//----- (004209A0) --------------------------------------------------------
int __thiscall sub_4209A0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax
  __int16 v4; // cx
  __int16 v5; // ax
  int v6; // edi
  __int16 v7; // dx
  int v8; // ecx
  int v9; // ebp
  _WORD *v10; // ecx
  int v11; // ecx
  int v12; // ST14_4
  _WORD *v13; // ecx
  int v14; // ecx
  int v15; // ecx
  int v16; // edx
  int v17; // ecx
  int v18; // eax
  int v19; // ecx
  int v20; // eax
  _WORD *v21; // edx
  int v22; // eax
  _WORD *v23; // edx
  int v24; // eax
  int v25; // ebx
  int v26; // eax
  _DWORD *v27; // edi
  char v28; // cl
  _DWORD *v29; // eax
  int v30; // ecx
  int v31; // ecx
  _WORD *v32; // ecx
  const char *v33; // [esp-18h] [ebp-30h]
  const char *v34; // [esp-18h] [ebp-30h]
  int v35; // [esp+Ch] [ebp-Ch]
  int v36; // [esp+10h] [ebp-8h]
  char v37; // [esp+14h] [ebp-4h]

  v2 = this;
  v36 = 0;
  result = this[6898];
  if ( result )
  {
    result = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(result + 72) + 4))(*(_DWORD *)(result + 72));
    if ( result != 4 )
    {
      if ( sub_401EC4(v2) )
      {
        sub_4012BC(a2, 40, 25);
        return sub_4A7120((_DWORD *)v2[359], 0, 0, 0, 0);
      }
      v4 = *((_WORD *)v2 + 126);
      v5 = *((_WORD *)v2 + 124);
      v6 = a2;
      *((_WORD *)v2 + 13852) = *(_WORD *)(a2 + 128);
      v7 = *((_WORD *)v2 + 130);
      *((_WORD *)v2 + 13854) = v4;
      v8 = v2[1500];
      *((_WORD *)v2 + 13853) = v5;
      *((_WORD *)v2 + 13855) = v7;
      v9 = sub_401686(v8);
      switch ( *(signed __int16 *)(v6 + 620) )
      {
        case 0:
          v10 = *(_WORD **)(v2[6898] + 72);
          if ( !v10[527] || (*(int (**)(void))(*(_DWORD *)v10 + 4))() == 3 )
            goto LABEL_57;
          v11 = v2[6898];
          v12 = *(_DWORD *)((char *)v2 + 57686);
          v2[6924] = 0;
          v2[6925] = 0;
          (*(void (__stdcall **)(signed int, signed int, signed int, int, _DWORD))(*(_DWORD *)v11 + 128))(
            -1,
            -1,
            -1,
            v12,
            0);
          goto LABEL_20;
        case 1:
          v20 = v2[6898];
          v21 = *(_WORD **)(v20 + 72);
          if ( !v21[527] || (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v21 + 4))(*(_DWORD *)(v20 + 72)) == 3 )
            goto LABEL_57;
          if ( !v9
            || sub_4014FB(v9)
            || *(_WORD *)(v9 + 100) != *(_WORD *)(v2[6897] + 100)
            || v9 == *((_DWORD *)dword_563908 + 6897) )
          {
            goto LABEL_28;
          }
          v2[6924] = *(signed __int16 *)(v9 + 96);
          goto LABEL_19;
        case 2:
          v22 = v2[6898];
          v23 = *(_WORD **)(v22 + 72);
          if ( !v23[527]
            || (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v23 + 4))(*(_DWORD *)(v22 + 72)) == 3
            || v9 == *((_DWORD *)dword_563908 + 6897) )
          {
            goto LABEL_57;
          }
          if ( v9 && !sub_4014FB(v9) )
          {
            v2[6924] = *(signed __int16 *)(v9 + 96);
            goto LABEL_19;
          }
LABEL_28:
          sub_4012BC(v6, 40, 25);
          v33 = "Cannot warp to specified player";
          goto LABEL_53;
        case 3:
        case 4:
          if ( !v9 || sub_4014FB(v9) || v9 == *((_DWORD *)dword_563908 + 6897) )
          {
            sub_4012BC(v6, 40, 25);
            v33 = "Cannot summon the specified player";
            goto LABEL_53;
          }
          if ( *(_DWORD *)(v9 + 120) > 0 && !*(_DWORD *)(v6 + 612) )
          {
            sub_4012BC(v6, 40, 25);
            v33 = "Cannot summon a player carrying a flag";
LABEL_53:
            v31 = v2[1510];
            sub_40245F(v33, 1, 400, 0, 0);
            return sub_4A7120((_DWORD *)v2[359], 0, 0, 0, 0);
          }
          v24 = sub_401D57(v9);
          v25 = v24;
          if ( v24
            && *(_WORD *)(*(_DWORD *)(v24 + 72) + 1054)
            && (*(int (**)(void))(**(_DWORD **)(v2[6898] + 72) + 4))() != 3 )
          {
            if ( *(_DWORD *)(v25 + 156) < 0 || *(_DWORD *)(v6 + 616) )
            {
              if ( *(_WORD *)(v6 + 620) != 3 || *(_WORD *)(v9 + 100) == *(_WORD *)(v2[6897] + 100) )
              {
                v2[6924] = *(signed __int16 *)(v9 + 96);
                v2[6925] = 0;
                goto LABEL_20;
              }
              sub_4012BC(v6, 40, 25);
              v34 = "Can only summon players on your own team";
            }
            else
            {
              sub_4012BC(v6, 40, 25);
              v34 = "Cannot summon a player carrying a ball";
            }
          }
          else
          {
            v26 = *(_DWORD *)(v6 + 260);
            v27 = (_DWORD *)(v6 + 260);
            if ( (v26 ^ 0x12345678) <= 40 )
            {
              v29 = (_DWORD *)sub_4011E5(40);
              v28 = 1;
            }
            else
            {
              v28 = v36;
              v29 = v27;
            }
            *v27 = *v29;
            if ( v28 & 1 )
              nullsub_2(&v37);
            v34 = "Specified player in a vehicle that cannot be summoned";
          }
          v30 = v2[1510];
          sub_40245F(v34, 1, 400, 0, 0);
          result = sub_4A7120((_DWORD *)v2[359], 0, 0, 0, 0);
          break;
        case 5:
          v13 = *(_WORD **)(v2[6898] + 72);
          if ( !v13[527] || (*(int (**)(void))(*(_DWORD *)v13 + 4))() == 3 )
            goto LABEL_57;
          v14 = v2[6898];
          v2[6924] = 0;
          v2[6925] = 0;
          (*(void (__stdcall **)(int *, int *, int *))(*(_DWORD *)v14 + 84))(&a2, &v35, &v36);
          v15 = v35;
          v2[6940] = a2 / 10000;
          v2[6941] = v15 / 10000;
          v16 = v2[6921];
          v2[6942] = v36 / 10000;
          v17 = *(_DWORD *)(v6 + 608);
          v2[6943] = v17;
          v2[6939] = v6;
          v2[6938] = v16;
          v18 = sub_401D39(v17, v16);
          v19 = v2[6940];
          v2[6944] = v18;
          sub_4A6E90(*(int **)(v6 + 752), v19, v2[6941], 0, 0, 0, 0, 0);
          goto LABEL_20;
        case 6:
          v32 = *(_WORD **)(v2[6898] + 72);
          if ( v32[527] && (*(int (**)(void))(*(_DWORD *)v32 + 4))() != 3 )
          {
            v2[6924] = 0;
LABEL_19:
            v2[6925] = 0;
LABEL_20:
            sub_4012BC(v6, *(_DWORD *)(v6 + 288), *(_DWORD *)(v6 + 292));
            sub_4026D0(v6);
            result = sub_4019E7(v6);
          }
          else
          {
LABEL_57:
            sub_4012BC(v6, 40, 25);
            result = sub_4A7120((_DWORD *)v2[359], 0, 0, 0, 0);
          }
          return result;
        default:
          goto LABEL_20;
      }
    }
  }
  return result;
}
// 4011E5: using guessed type _DWORD __stdcall sub_4011E5(_DWORD);
// 4012BC: using guessed type _DWORD __stdcall sub_4012BC(_DWORD, _DWORD, _DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401686: using guessed type int __thiscall sub_401686(_DWORD);
// 4019E7: using guessed type _DWORD __stdcall sub_4019E7(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 401EC4: using guessed type int __thiscall sub_401EC4(_DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4026D0: using guessed type _DWORD __stdcall sub_4026D0(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);

//----- (00421060) --------------------------------------------------------
void __thiscall sub_421060(_DWORD *this, _DWORD *a2)
{
  int v2; // edi
  int v3; // esi
  _DWORD *v4; // ebp
  bool v5; // zf
  int v6; // eax
  int v7; // ecx
  signed int v8; // ebx
  int v9; // ecx
  int v10; // eax
  int v11; // edi
  int v12; // esi
  size_t v13; // ebx
  int v14; // eax
  int v15; // ecx
  __int16 v16; // ax
  __int16 v17; // cx
  __int16 v18; // dx
  int v19; // eax
  _DWORD *v20; // ecx
  _DWORD *v21; // eax
  int v22; // esi
  int v23; // edi
  signed int v24; // esi
  _DWORD *v25; // eax
  int v26; // [esp+14h] [ebp-D30h]
  int v27; // [esp+18h] [ebp-D2Ch]
  _DWORD *v28; // [esp+1Ch] [ebp-D28h]
  int v29; // [esp+20h] [ebp-D24h]
  int v30; // [esp+24h] [ebp-D20h]
  int v31; // [esp+28h] [ebp-D1Ch]
  int v32; // [esp+2Ch] [ebp-D18h]
  char v33; // [esp+30h] [ebp-D14h]
  int v34; // [esp+34h] [ebp-D10h]
  char v35[1020]; // [esp+38h] [ebp-D0Ch]
  int Src; // [esp+434h] [ebp-910h]
  char Dst[1020]; // [esp+438h] [ebp-90Ch]
  int v38[256]; // [esp+834h] [ebp-510h]
  char v39; // [esp+C34h] [ebp-110h]
  int v40; // [esp+D40h] [ebp-4h]

  v2 = (int)a2;
  v3 = 0;
  v4 = this;
  v5 = this[6898] == 0;
  v28 = a2;
  v27 = 0;
  if ( v5 )
    return;
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 4))(a2) != 12 )
    return;
  v6 = a2[181];
  if ( v6 <= 0 )
    return;
  v7 = v4[1503];
  v8 = 0;
  v26 = sub_401FBE(v4[62], v4[63], v6, v38);
  v31 = 0;
  v29 = 0;
  if ( v26 <= 0 )
    goto LABEL_38;
  do
  {
    if ( (*(int (**)(void))(**(_DWORD **)(v38[v3] + 72) + 4))() == 5 )
    {
      (*(void (__stdcall **)(int *, int *, char *))(*(_DWORD *)v38[v3] + 84))(&v32, &v30, &v33);
      v9 = v32 / 10000;
      v10 = v30 / 10000;
      v32 /= 10000;
      v30 /= 10000;
      if ( dword_53A7C4 )
      {
        v10 = 10 * v10 / 7;
        v30 = v10;
      }
      v11 = v10 * v10 + v9 * v9;
      v12 = 0;
      if ( v8 > 0 )
      {
        while ( v11 >= *(&Src + v12) )
        {
          if ( ++v12 >= v8 )
            goto LABEL_13;
        }
        v13 = 4 * (v8 - v12);
        memcpy_0(&Dst[4 * v12], &Src + v12, v13);
        memcpy_0(&v35[4 * v12], &v34 + v12, v13);
        v8 = v31;
      }
LABEL_13:
      v14 = v29;
      v15 = v38[v29];
      *(&Src + v12) = v11;
      v2 = (int)v28;
      ++v8;
      *(&v34 + v12) = v15;
      v31 = v8;
      v3 = v14;
    }
    v29 = ++v3;
  }
  while ( v3 < v26 );
  if ( v8 == 1 )
  {
    v16 = *((_WORD *)v4 + 124);
    v17 = *((_WORD *)v4 + 126);
    *((_WORD *)v4 + 13852) = *(_WORD *)(v2 + 128);
    v18 = *((_WORD *)v4 + 130);
    *((_WORD *)v4 + 13853) = v16;
    v19 = v34;
    *((_WORD *)v4 + 13854) = v17;
    *((_WORD *)v4 + 13855) = v18;
    v4[6924] = *(_DWORD *)(v19 + 56);
    v4[6925] = 0;
    v4[6923] = v2;
    v4[6928] = *(signed __int16 *)(v2 + 414);
    v20 = *(_DWORD **)(v2 + 564);
    if ( v20 )
      sub_4A7120(v20, 0, 0, 0, 0);
    sub_4019E7(v2);
    return;
  }
  if ( v8 <= 1 )
  {
LABEL_38:
    if ( (*(_DWORD *)(v2 + 260) ^ 0x12345678) <= 25 )
    {
      v25 = (_DWORD *)sub_4011E5(25);
      v27 = 2;
    }
    else
    {
      v25 = (_DWORD *)(v2 + 260);
    }
    v5 = (v27 & 2) == 0;
    *(_DWORD *)(v2 + 260) = *v25;
    if ( !v5 )
      nullsub_2(&v28);
  }
  else
  {
    if ( (*(_DWORD *)(v2 + 260) ^ 0x12345678) <= 40 )
    {
      v21 = (_DWORD *)sub_4011E5(40);
      v27 = 1;
    }
    else
    {
      v21 = (_DWORD *)(v2 + 260);
    }
    v5 = (v27 & 1) == 0;
    *(_DWORD *)(v2 + 260) = *v21;
    if ( !v5 )
      nullsub_2(&v26);
    v22 = v4[62] - v4[60];
    v26 = v4[63] - v4[61];
    *(_DWORD *)&v33 = operator new(0xD18u);
    v40 = 0;
    if ( *(_DWORD *)&v33 )
      v23 = sub_4010FF(
              *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
              "Take Control",
              v4 + 1,
              v22,
              v26,
              1,
              *(_DWORD *)(v2 + 128),
              1);
    else
      v23 = 0;
    v24 = 0;
    v40 = -1;
    for ( v4[355] = v23; v24 < v8; ++v24 )
    {
      (*(void (__stdcall **)(char *))(*(_DWORD *)*(&v34 + v24) + 136))(&v39);
      sub_4024F0(&v39, *(_DWORD *)(*(&v34 + v24) + 56), 0);
    }
  }
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4011E5: using guessed type _DWORD __stdcall sub_4011E5(_DWORD);
// 4019E7: using guessed type _DWORD __stdcall sub_4019E7(_DWORD);
// 401FBE: using guessed type _DWORD __stdcall sub_401FBE(_DWORD, _DWORD, _DWORD, _DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 53A7C4: using guessed type int dword_53A7C4;
// 421060: using guessed type int var_510[256];
// 421060: using guessed type char Dst[1020];
// 421060: using guessed type char var_D0C[1020];

//----- (00421540) --------------------------------------------------------
void __thiscall sub_421540(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  __int16 v3; // ax
  int v4; // eax
  int v5; // eax
  int v6; // ST04_4

  v2 = this;
  if ( a2 )
  {
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 8))(a2) )
    {
      v3 = *(_WORD *)(a2 + 412);
      if ( v3 )
        sub_401163(v3, -*(signed __int16 *)(a2 + 404));
      v4 = sub_402239(a2);
      sub_401992(-v4);
      *(_DWORD *)(v2[78] + 60) = *(_DWORD *)(v2[78] + 60) - *(_DWORD *)(a2 + 304) < 0 ? 0 : *(_DWORD *)(v2[78] + 60)
                                                                                          - *(_DWORD *)(a2 + 304);
    }
    v5 = ((*(_DWORD *)(a2 + 256) ^ 0x12345678) + 1) ^ 0x12345678;
    v6 = *(_DWORD *)(a2 + 256);
    *(_DWORD *)(a2 + 256) = v5;
    nullsub_3(a2 + 256, v6, v5);
  }
}
// 401163: using guessed type _DWORD __stdcall sub_401163(_DWORD, _DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);
// 402239: using guessed type _DWORD __stdcall sub_402239(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (004216C0) --------------------------------------------------------
int __thiscall sub_4216C0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  signed int v3; // edi
  signed int v4; // ebp
  signed int v5; // eax
  int v6; // eax
  int *v7; // ecx
  int v8; // ST10_4
  int v9; // ST0C_4
  bool v10; // zf
  int v11; // eax
  int v12; // eax
  signed int v13; // eax
  int v14; // eax
  int *v15; // edi
  int v16; // ecx
  int *v17; // eax
  int v18; // ST08_4
  int v19; // ecx
  int v20; // ecx
  int v21; // eax
  signed int v22; // ebx
  signed int v23; // ebp
  signed int v24; // eax
  int v25; // eax
  int v26; // edx
  _DWORD *v27; // edi
  _DWORD *v28; // eax
  int v29; // edi
  _DWORD *v30; // eax
  int *v31; // ecx
  _DWORD *v32; // eax
  int v33; // eax
  int v34; // edx
  _DWORD *v35; // eax
  int v36; // eax
  int v37; // ecx
  _DWORD *v38; // eax
  signed int v39; // eax
  int v40; // edi
  _DWORD *v41; // ebx
  DWORD v42; // eax
  int v43; // ecx
  signed __int64 v44; // rax
  int v45; // ecx
  int v46; // ebx
  int v47; // ecx
  _DWORD *v48; // eax
  _DWORD *v49; // ebp
  __int16 v50; // ax
  __int16 v51; // cx
  int v52; // ecx
  int v53; // eax
  int v54; // ecx
  __int16 v55; // ax
  int v56; // ecx
  _DWORD *v57; // ecx
  int v58; // eax
  int v59; // ecx
  __int16 v60; // ax
  int v61; // ebp
  int v62; // eax
  int v63; // ecx
  __int16 v64; // ax
  int v65; // ecx
  _DWORD *v66; // eax
  _DWORD *v67; // eax
  _DWORD *v68; // eax
  __int16 v69; // cx
  __int16 v70; // ax
  int v71; // ebp
  int v72; // ecx
  int v73; // eax
  int v74; // ecx
  signed int v75; // edi
  _DWORD *v76; // eax
  __int16 v77; // ax
  int v78; // ecx
  _DWORD *v79; // eax
  int v80; // ecx
  int v81; // ecx
  int v82; // ecx
  _DWORD *v83; // eax
  __int16 v84; // ax
  __int16 v85; // ax
  int v86; // edx
  _DWORD *i; // eax
  int v88; // ecx
  __int16 v89; // ax
  int v90; // ecx
  __int16 v91; // ax
  __int16 v92; // ax
  __int16 v93; // bp
  int v94; // edx
  int v95; // ecx
  int v96; // eax
  _DWORD *v97; // eax
  int v98; // ecx
  int *v99; // ecx
  int v100; // ST10_4
  int v101; // eax
  int v102; // ecx
  int v103; // kr00_4
  int v104; // kr04_4
  int v105; // edx
  int v106; // ebx
  int v107; // eax
  signed int v108; // ebp
  int v109; // edx
  signed int v110; // ebp
  signed int v111; // eax
  int v112; // ecx
  int v113; // ebx
  char v114; // al
  int j; // ebp
  int v116; // ecx
  __int16 v117; // cx
  __int16 v118; // dx
  __int16 v119; // dx
  __int16 v120; // cx
  __int16 v121; // dx
  _DWORD *v122; // eax
  __int16 v123; // ax
  __int16 v124; // cx
  void (__stdcall *v125)(_DWORD *); // edx
  int v126; // eax
  int v127; // eax
  int v128; // eax
  int v129; // edx
  signed int v130; // eax
  int v131; // edi
  int v132; // edx
  int v133; // ecx
  int *v134; // ebx
  __int16 v135; // ax
  int v136; // ST0C_4
  int v137; // eax
  int *v138; // ebp
  bool v139; // sf
  unsigned __int8 v140; // of
  int *v141; // ebx
  __int16 v142; // ax
  int v143; // ST0C_4
  int v144; // ecx
  __int16 v145; // ax
  int v146; // ST0C_4
  int v147; // edx
  int v148; // ecx
  int v149; // eax
  int v150; // edx
  const char *v152; // [esp-Ch] [ebp-150h]
  signed int v153; // [esp+18h] [ebp-12Ch]
  int v154; // [esp+18h] [ebp-12Ch]
  int v155; // [esp+1Ch] [ebp-128h]
  int v156; // [esp+20h] [ebp-124h]
  int v157; // [esp+24h] [ebp-120h]
  int v158; // [esp+28h] [ebp-11Ch]
  char v159; // [esp+2Fh] [ebp-115h]
  int v160; // [esp+30h] [ebp-114h]
  LARGE_INTEGER PerformanceCount; // [esp+34h] [ebp-110h]
  int v162; // [esp+3Ch] [ebp-108h]
  char Dest; // [esp+40h] [ebp-104h]

  v1 = this;
  v2 = this[78];
  v3 = 0;
  this[2709] = 0;
  v153 = 0;
  if ( *(_WORD *)(v2 + 66) > 0 )
  {
    v4 = 68;
    do
    {
      v5 = abs(*(signed __int16 *)(v1[78] + v4));
      if ( v5 <= 5100 )
        v6 = *(_DWORD *)(v1[1507] + 4 * v5 + 8008);
      else
        v6 = 0;
      v7 = (int *)(v6 + 260);
      if ( (*(_DWORD *)(v6 + 260) ^ 0x12345678) > 0 )
      {
        v8 = ((*v7 ^ 0x12345678) - v1[2706]) ^ 0x12345678;
        v9 = *v7;
        *v7 = v8;
        nullsub_3(v7, v9, v8);
      }
      ++v3;
      v4 += 4;
    }
    while ( v3 < *(signed __int16 *)(v1[78] + 66) );
  }
  v10 = v1[6918] == 0;
  v162 = 0;
  if ( !v10 )
    v162 = 1;
  v11 = v1[6898];
  v160 = 0;
  if ( !v11 || (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v11 + 72) + 4))(*(_DWORD *)(v11 + 72)) == 4 )
  {
    v1[6918] = 0;
    v1[6923] = 0;
  }
  if ( HIBYTE(v1[120 * v1[66] + 14900]) )
  {
    v12 = v1[6918];
    if ( v12 )
    {
      v13 = abs(v12);
      if ( v13 <= 5100 )
      {
        v14 = *(_DWORD *)(v1[1507] + 4 * v13 + 8008);
        if ( v14 )
        {
          v15 = (int *)(v14 + 260);
          if ( (*(_DWORD *)(v14 + 260) ^ 0x12345678) <= 0 )
          {
            v16 = v1[1510];
            sub_40245F("This is a safe zone, you cannot fire a weapon in this location.", 1, 300, 0, 0);
            if ( (*v15 ^ 0x12345678) <= 40 )
            {
              v155 = 0;
              nullsub_1(&v155);
              v18 = v155;
              v155 = 305419856;
              nullsub_3(&v155, v18, 305419856);
              v17 = &v155;
              v153 = 1;
            }
            else
            {
              v17 = v15;
            }
            *v15 = *v17;
            if ( v153 & 1 )
            {
              v153 &= 0xFFFFFFFE;
              nullsub_2(&v155);
            }
            sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
          }
          (*(void (**)(void))(**((_DWORD **)dword_563908 + 6898) + 20))();
        }
      }
    }
    v1[6918] = 0;
    v1[6923] = 0;
  }
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[83])) >= 0
    && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[83]) )
  {
    v1[6918] = 0;
  }
  v19 = v1[6923];
  if ( v19 )
  {
    if ( v1[6928] <= 0 )
    {
      switch ( (*(int (**)(void))(*(_DWORD *)v19 + 4))() )
      {
        case 7:
        case 11:
        case 12:
        case 14:
        case 17:
          v123 = *((_WORD *)v1 + 126);
          v124 = *((_WORD *)v1 + 130);
          *((_WORD *)v1 + 13853) = *((_WORD *)v1 + 124);
          *((_WORD *)v1 + 13854) = v123;
          *((_WORD *)v1 + 13855) = v124;
          v125 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)dword_56391C + 44);
          v160 = 0;
          v125(v1 + 6924);
          break;
        default:
          v126 = v1[6923];
          v160 = *(_DWORD *)(v126 + 128);
          sub_4023F6(v126);
          break;
      }
      v1[6923] = 0;
    }
    goto LABEL_249;
  }
  v20 = v1[6918];
  if ( v20 == 0xFFFF )
  {
    if ( !v1[6939] )
      goto LABEL_249;
    v21 = v1[6898];
    if ( !v21 || (*(int (**)(void))(**(_DWORD **)(v21 + 72) + 4))() == 4 )
      goto LABEL_249;
    if ( (*(int (**)(void))(*(_DWORD *)v1[6939] + 8))() )
    {
      v22 = 0;
      if ( *(_WORD *)(v1[78] + 66) > 0 )
      {
        v23 = 68;
        do
        {
          v24 = abs(*(signed __int16 *)(v1[78] + v23));
          if ( v24 <= 5100 )
          {
            v25 = *(_DWORD *)(v1[1507] + 4 * v24 + 8008);
            if ( v25 )
            {
              v26 = v1[6939];
              v27 = (_DWORD *)(v25 + 260);
              if ( (*(_DWORD *)(v25 + 260) ^ 0x12345678) <= *(_DWORD *)(v26 + 292) )
              {
                v28 = (_DWORD *)sub_4011E5(*(_DWORD *)(v26 + 292));
                v153 |= 2u;
              }
              else
              {
                v28 = (_DWORD *)(v25 + 260);
              }
              *v27 = *v28;
              if ( v153 & 2 )
              {
                v153 &= 0xFFFFFFFD;
                nullsub_2(&v158);
              }
            }
          }
          ++v22;
          v23 += 4;
        }
        while ( v22 < *(signed __int16 *)(v1[78] + 66) );
      }
    }
    if ( (*(int (**)(void))(*(_DWORD *)v1[6939] + 4))() != 17 )
      goto LABEL_249;
    v29 = v1[6939];
    if ( *(_WORD *)(v29 + 436) || *(_DWORD *)(v1[6898] + 156) < 0 || !v1[1501] )
    {
      if ( *(_WORD *)(v29 + 438) || *(_DWORD *)(v1[6897] + 120) <= 0 )
      {
        if ( sub_401EC4(v1) )
        {
          v33 = v1[6939];
          v34 = *(_DWORD *)(v33 + 260);
          v35 = (_DWORD *)(v33 + 260);
          if ( (v34 ^ 0x12345678) <= 40 )
          {
            v35 = (_DWORD *)sub_4011E5(40);
            LOBYTE(v153) = v153 | 0x10;
          }
          *(_DWORD *)(v1[6939] + 260) = *v35;
          if ( v153 & 0x10 )
            nullsub_2(&v157);
        }
        else
        {
          (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v1[6898] + 128))(
            v1[6940],
            v1[6941],
            *(signed __int16 *)(v29 + 628),
            0,
            1);
          (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v1[6898] + 104))(v1[6942]);
          v36 = v1[6939];
          v37 = *(_DWORD *)(v36 + 260);
          v38 = (_DWORD *)(v36 + 260);
          if ( (v37 ^ 0x12345678) <= 75 )
          {
            v38 = (_DWORD *)sub_4011E5(75);
            LOBYTE(v153) = v153 | 0x20;
          }
          *(_DWORD *)(v1[6939] + 260) = *v38;
          if ( v153 & 0x20 )
            nullsub_2(&v155);
          v1[6939] = 0;
        }
        goto LABEL_249;
      }
      v32 = (_DWORD *)(v29 + 260);
      if ( (*(_DWORD *)(v29 + 260) ^ 0x12345678) <= 40 )
      {
        v32 = (_DWORD *)sub_4011E5(40);
        LOBYTE(v153) = v153 | 8;
      }
      *(_DWORD *)(v1[6939] + 260) = *v32;
      if ( !(v153 & 8) )
        goto LABEL_54;
      v31 = &v156;
    }
    else
    {
      v30 = (_DWORD *)(v29 + 260);
      if ( (*(_DWORD *)(v29 + 260) ^ 0x12345678) <= 40 )
      {
        v30 = (_DWORD *)sub_4011E5(40);
        LOBYTE(v153) = v153 | 4;
      }
      *(_DWORD *)(v1[6939] + 260) = *v30;
      if ( !(v153 & 4) )
        goto LABEL_54;
      v31 = &v158;
    }
    nullsub_2(v31);
LABEL_54:
    sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
    goto LABEL_249;
  }
  if ( v20 <= 0 )
    goto LABEL_249;
  v39 = abs(v20);
  if ( v39 > 5100 )
    goto LABEL_243;
  v40 = *(_DWORD *)(v1[1507] + 4 * v39 + 8008);
  if ( !v40 || !*(_DWORD *)(v40 + 252) || sub_402676(v1[6918]) <= 0 )
    goto LABEL_243;
  v41 = (_DWORD *)(v40 + 260);
  if ( (*(_DWORD *)(v40 + 260) ^ 0x12345678) >= 0 && *(_DWORD *)(v40 + 260) != 305419896 )
  {
    if ( (*(_DWORD *)(v40 + 260) ^ 0x12345678) <= *(_DWORD *)((char *)v1 + 57490) )
      v1[2709] = 1;
    goto LABEL_243;
  }
  if ( !(*(int (__thiscall **)(int))(*(_DWORD *)v40 + 12))(v40) )
  {
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)v40 + 8))(v40) )
    {
      v58 = sub_402676(*(_DWORD *)(v40 + 128));
      v59 = *(signed __int16 *)(v40 + 404);
      v156 = v58;
      v60 = *(_WORD *)(v40 + 412);
      v61 = v60;
      v10 = v60 == *(_DWORD *)(v40 + 128);
      v155 = v59;
      if ( !v10 )
      {
        if ( v60 )
        {
          v62 = sub_402676(v60);
          v63 = v1[1507];
          v155 = v62;
          v64 = *(_WORD *)(sub_4028EC(v61) + 166);
          if ( v64 )
          {
            if ( v155 > abs(v64) )
            {
              v65 = v1[1510];
              sub_40245F("You have too much ammo for this item to be used", 1, 300, 0, 0);
              if ( (*v41 ^ 0x12345678) <= 40 )
              {
                v66 = (_DWORD *)sub_4011E5(40);
                v153 |= 0x40u;
              }
              else
              {
                v66 = (_DWORD *)(v40 + 260);
              }
              *v41 = *v66;
              if ( v153 & 0x40 )
              {
                v153 &= 0xFFFFFFBF;
                nullsub_2(&PerformanceCount);
              }
              v155 = -1;
            }
          }
        }
      }
      if ( !*(_WORD *)(v40 + 436) && *(_DWORD *)(v1[6898] + 156) >= 0 && v1[1501] )
      {
        if ( (*v41 ^ 0x12345678) <= 25 )
        {
          v67 = (_DWORD *)sub_4011E5(25);
          LOBYTE(v153) = v153 | 0x80;
        }
        else
        {
          v67 = (_DWORD *)(v40 + 260);
        }
        *v41 = *v67;
        if ( (v153 & 0x80u) != 0 )
          nullsub_2(&PerformanceCount);
LABEL_122:
        sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
        v1[6918] = 0;
        goto LABEL_249;
      }
      if ( !*(_WORD *)(v40 + 438) && *(_DWORD *)(v1[6897] + 120) > 0 )
      {
        if ( (*v41 ^ 0x12345678) <= 25 )
        {
          v68 = (_DWORD *)sub_4011E5(25);
          LOWORD(v153) = v153 | 0x100;
        }
        else
        {
          v68 = (_DWORD *)(v40 + 260);
        }
        *v41 = *v68;
        if ( v153 & 0x100 )
        {
          nullsub_2(&PerformanceCount);
          sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
          v1[6918] = 0;
          goto LABEL_249;
        }
        goto LABEL_122;
      }
      v69 = *(_WORD *)(v40 + 408);
      if ( v69 )
      {
        v70 = *(_WORD *)(v40 + 410);
        if ( v70 > 0 )
        {
          v71 = v69;
          v158 = v70;
          if ( sub_402676(v69) < (signed int)v70 )
          {
            v72 = v1[1507];
            v73 = sub_4028EC(v71);
            if ( v73 )
            {
              sprintf(&Dest, "You are required to have a %s(%d) to use this item.", v73 + 72, v158);
              v74 = v1[1510];
              sub_40245F(&Dest, 1, 300, 0, 0);
            }
            v75 = 512;
            if ( (*v41 ^ 0x12345678) > 50 )
            {
              v76 = v41;
              goto LABEL_156;
            }
LABEL_141:
            v76 = (_DWORD *)sub_4011E5(50);
            goto LABEL_155;
          }
        }
      }
      v77 = *(_WORD *)(v40 + 166);
      if ( v77 && v156 > abs(v77) )
      {
        v78 = v1[1510];
        sub_40245F("You have too many of this item to use it", 1, 300, 0, 0);
        v75 = 1024;
        if ( (*v41 ^ 0x12345678) > 50 )
        {
          v76 = v41;
          goto LABEL_156;
        }
        goto LABEL_141;
      }
      if ( v155 < *(signed __int16 *)(v40 + 404) )
      {
        if ( (*v41 ^ 0x12345678) <= 25 )
        {
          v79 = (_DWORD *)sub_4011E5(25);
          LOWORD(v153) = v153 | 0x800;
        }
        else
        {
          v79 = (_DWORD *)(v40 + 260);
        }
        *v41 = *v79;
        if ( v153 & 0x800 )
          nullsub_2(&PerformanceCount);
        goto LABEL_240;
      }
      if ( *(_DWORD *)(v40 + 428) == 2 )
      {
        if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 156) < 0 || (v80 = v1[1501]) == 0 || !sub_401311(v80) )
        {
          v81 = v1[1510];
          sub_40245F("You are not allowed to throw the ball right now.", 1, 300, 0, 0);
          v75 = 4096;
          if ( (*v41 ^ 0x12345678) > 25 )
          {
            v76 = v41;
            goto LABEL_156;
          }
          v76 = (_DWORD *)sub_4011E5(25);
LABEL_155:
          v153 |= v75;
LABEL_156:
          *v41 = *v76;
          if ( v75 & v153 )
            nullsub_2(&PerformanceCount);
          goto LABEL_240;
        }
      }
      if ( *(_DWORD *)(v1[78] + 60) < *(_DWORD *)(v40 + 304) )
      {
        v82 = v1[1510];
        sub_40245F("You do not have enough cash to use this item.", 1, 300, 0, 0);
        if ( (*v41 ^ 0x12345678) <= 50 )
        {
          v83 = (_DWORD *)sub_4011E5(50);
          LOWORD(v153) = v153 | 0x2000;
        }
        else
        {
          v83 = (_DWORD *)(v40 + 260);
        }
        *v41 = *v83;
        if ( v153 & 0x2000 )
          nullsub_2(&PerformanceCount);
        sub_4A7120((_DWORD *)v1[362], 0, 0, 0, 0);
        v1[6918] = 0;
        goto LABEL_249;
      }
      v84 = *(_WORD *)(v40 + 406);
      if ( !v84 || (*(_DWORD *)(v40 + 256) ^ 0x12345678) < v84 )
      {
        if ( sub_402239(v40) > (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[2679])) )
        {
          if ( (*v41 ^ 0x12345678) <= 25 )
          {
            v122 = (_DWORD *)sub_4011E5(25);
            LOWORD(v153) = v153 | 0x8000;
          }
          else
          {
            v122 = (_DWORD *)(v40 + 260);
          }
          *v41 = *v122;
          if ( v153 & 0x8000 )
            nullsub_2(&PerformanceCount);
          goto LABEL_240;
        }
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)v40 + 4))(v40) == 6
          && (*(_WORD *)(v40 + 766) || *(_WORD *)(v40 + 768) || *(_WORD *)(v40 + 770)) )
        {
          v85 = *(_WORD *)(v40 + 764);
          v157 = 0;
          v156 = 0;
          v155 = 0;
          if ( v85 )
            v86 = -v85;
          else
            v86 = *(_DWORD *)(v40 + 128);
          for ( i = (_DWORD *)**((_DWORD **)dword_563908 + 352); i; i = (_DWORD *)i[1] )
          {
            if ( i[3] == v86 )
            {
              v88 = v1[6897];
              if ( i[4] == *(signed __int16 *)(v88 + 100) )
                ++v157;
              if ( i[5] == *(signed __int16 *)(v88 + 96) )
                ++v156;
              ++v155;
            }
          }
          v89 = *(_WORD *)(v40 + 766);
          if ( v89 && v156 >= v89 )
          {
            v152 = "You have too many of this item active already.";
LABEL_186:
            v90 = v1[1510];
            sub_40245F(v152, 1, 300, 0, 0);
            sub_4012BC(v40, 40, 25);
LABEL_240:
            sub_4A7120((_DWORD *)v1[362], 0, 0, 0, 0);
            v1[6918] = 0;
            goto LABEL_249;
          }
          v91 = *(_WORD *)(v40 + 768);
          if ( v91 && v157 >= v91 )
          {
            v152 = "Your team has too many of this item active already.";
            goto LABEL_186;
          }
          v92 = *(_WORD *)(v40 + 770);
          if ( v92 && v155 >= v92 )
          {
            v152 = "Too many of this item active already.";
            goto LABEL_186;
          }
        }
        v93 = *(_WORD *)(v40 + 420);
        v94 = rand() % 1000;
        if ( v94 >= v93 )
        {
          v98 = v1[6918];
          v1[6919] = v98;
          v1[6920] = sub_401D39(v98, v94);
          switch ( (*(int (__thiscall **)(int))(*(_DWORD *)v40 + 4))(v40) )
          {
            case 7:
              v99 = (int *)v1[1511];
              v100 = *(_DWORD *)(v40 + 608);
              v160 = 0;
              v101 = sub_4B2F30(v99, v100);
              if ( !v101 || *(_WORD *)(*(_DWORD *)(v1[6898] + 72) + 1020) != 1 )
                goto LABEL_243;
              v102 = *(signed __int16 *)(v101 + 1032);
              if ( v102 != -1 )
              {
                v103 = v1[62] - v102;
                v104 = v1[62] + v102 + 15;
                v155 = (v1[63] - v102) / 16;
                v105 = v1[1508];
                v106 = v104 / 16;
                v107 = (v1[63] + v102 + 15) / 16;
                v158 = *(_DWORD *)(v105 + 4) - 1;
                v108 = v158;
                if ( v158 >= (v103 / 16 < 0 ? 0 : v103 / 16) )
                  v158 = v103 / 16 < 0 ? 0 : v103 / 16;
                v157 = v108;
                if ( v108 >= (v106 < 0 ? 0 : v106) )
                  v157 = v106 < 0 ? 0 : v106;
                v109 = *(_DWORD *)(v105 + 8);
                v110 = v155 < 0 ? 0 : v155;
                v155 = v109 - 1;
                if ( v109 - 1 >= v110 )
                  v155 = v110;
                v156 = v109 - 1;
                v111 = v107 < 0 ? 0 : v107;
                if ( v109 - 1 >= v111 )
                  v156 = v111;
                v112 = v1[6898];
                if ( v112 )
                  (*(void (**)(void))(*(_DWORD *)v112 + 228))();
                v113 = v158;
                v114 = 0;
                v159 = 0;
                if ( v158 <= v157 )
                {
                  do
                  {
                    if ( v114 )
                      goto LABEL_243;
                    for ( j = v155; j <= v156; ++j )
                    {
                      if ( v114 )
                        break;
                      v116 = v1[1508];
                      if ( sub_4022CA(v113, j) )
                        v159 = 1;
                      v114 = v159;
                    }
                    ++v113;
                  }
                  while ( v113 <= v157 );
                  if ( v114 )
                    goto LABEL_243;
                }
              }
              v117 = *((_WORD *)v1 + 124);
              v118 = *((_WORD *)v1 + 126);
              *((_WORD *)v1 + 13852) = *(_WORD *)(v40 + 128);
              *((_WORD *)v1 + 13855) = *((_WORD *)v1 + 130);
              *((_WORD *)v1 + 13853) = v117;
              *((_WORD *)v1 + 13854) = v118;
              v1[6924] = 0;
              v1[6925] = 0;
              sub_4026D0(v40);
              sub_4019E7(v40);
              v1[6918] = 0;
              break;
            case 11:
              v160 = 0;
              sub_40266C(v40);
              v1[6918] = 0;
              break;
            case 12:
              v160 = 0;
              sub_401785(v40);
              v1[6918] = 0;
              break;
            case 14:
              v119 = *((_WORD *)v1 + 124);
              *((_WORD *)v1 + 13852) = *(_WORD *)(v40 + 128);
              v120 = *((_WORD *)v1 + 126);
              *((_WORD *)v1 + 13853) = v119;
              v121 = *((_WORD *)v1 + 130);
              *((_WORD *)v1 + 13854) = v120;
              v160 = 0;
              *((_WORD *)v1 + 13855) = v121;
              v1[6924] = 0;
              v1[6925] = 0;
              sub_4026D0(v40);
              sub_4019E7(v40);
              v1[6918] = 0;
              break;
            case 17:
              v160 = 0;
              sub_4024CD(v40);
              v1[6918] = 0;
              break;
            default:
              if ( *(_WORD *)(v40 + 414) <= 0 )
              {
                v160 = *(_DWORD *)(v40 + 128);
                sub_4023F6(v40);
              }
              else
              {
                v160 = 0;
                sub_4026D0(v40);
              }
              sub_4019E7(v40);
              v1[6918] = 0;
              break;
          }
          goto LABEL_249;
        }
        if ( v93 < 50 )
        {
          v95 = v1[1510];
          sub_40245F("Weapon misfired.", 1, 200, 0, 0);
        }
        if ( *(_WORD *)(v40 + 420) < 300 )
          sub_4A7120((_DWORD *)v1[362], 0, 0, 0, 0);
        v96 = *(signed __int16 *)(v40 + 422);
        if ( (*v41 ^ 0x12345678) <= v96 )
        {
          v97 = (_DWORD *)sub_4011E5(v96);
          LOWORD(v153) = v153 | 0x4000;
        }
        else
        {
          v97 = (_DWORD *)(v40 + 260);
        }
        *v41 = *v97;
        if ( v153 & 0x4000 )
        {
          nullsub_2(&PerformanceCount);
          v1[6918] = 0;
          goto LABEL_249;
        }
      }
    }
LABEL_243:
    v1[6918] = 0;
    goto LABEL_249;
  }
  sub_4019E7(v40);
  if ( *(_DWORD *)(v40 + 264) )
  {
    sub_4A7120((_DWORD *)v1[360], 0, 0, 0, 0);
    *(_DWORD *)(v40 + 264) = 0;
    sub_401640(v1);
    v1[6918] = 0;
  }
  else
  {
    v42 = sub_402676(*(_DWORD *)(v40 + 128));
    v43 = *(signed __int16 *)(v40 + 352);
    PerformanceCount.s.LowPart = v42;
    v44 = 1374389535i64 * v43;
    v45 = v1[78];
    v46 = (SHIDWORD(v44) >> 5) + (HIDWORD(v44) >> 31);
    v10 = *(_WORD *)(v45 + 66) == 0;
    v139 = *(_WORD *)(v45 + 66) < 0;
    v154 = 0;
    v157 = 0;
    v156 = 0;
    v158 = 0;
    if ( !v139 && !v10 )
    {
      v155 = 68;
      do
      {
        v47 = v1[1507];
        v48 = (_DWORD *)sub_4028EC(*(signed __int16 *)(v155 + v1[78]));
        v49 = v48;
        if ( v48 )
        {
          if ( v48[66] )
          {
            if ( (*(int (__thiscall **)(_DWORD *))(*v48 + 12))(v48) )
            {
              v50 = *(_WORD *)(v40 + 352);
              ++v154;
              if ( v50 )
              {
                v51 = *((_WORD *)v49 + 176);
                if ( v51 == v50 )
                  ++v156;
                if ( v51 / 100 == v46 )
                  ++v157;
              }
            }
          }
        }
        v52 = *(signed __int16 *)(v1[78] + 66);
        v155 += 4;
        ++v158;
      }
      while ( v158 < v52 );
    }
    if ( v154 < *(_DWORD *)((char *)v1 + 57622) )
    {
      if ( v157 < *(_DWORD *)((char *)&v1[v46 + 14406] + 2) && v156 < *(signed __int16 *)(v40 + 354) )
      {
        v55 = *(_WORD *)(v40 + 166);
        if ( v55 && (signed int)PerformanceCount.s.LowPart > abs(v55) )
        {
          sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
          v56 = v1[1510];
          sub_40245F("You have too many of this item to turn it on.", 2, 400, 0, 0);
          sub_401640(v1);
          v1[6918] = 0;
        }
        else
        {
          v57 = *(_DWORD **)(v40 + 584);
          if ( !v57 )
            v57 = (_DWORD *)v1[358];
          sub_4A7120(v57, 0, 0, 0, 0);
          *(_DWORD *)(v40 + 264) = 1;
          sub_401640(v1);
          v1[6918] = 0;
        }
        goto LABEL_249;
      }
      sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
      v53 = sub_402617(0x8Du);
    }
    else
    {
      sub_4A7120((_DWORD *)v1[359], 0, 0, 0, 0);
      v53 = sub_402617(0x8Cu);
    }
    v54 = v1[1510];
    sub_40245F(v53, 2, 400, 0, 0);
    sub_401640(v1);
    v1[6918] = 0;
  }
LABEL_249:
  if ( Frequency.QuadPart )
  {
    QueryPerformanceCounter(&PerformanceCount);
    v127 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
  }
  else
  {
    v127 = GetTickCount() / 0xA;
  }
  v128 = v127 - v1[6901];
  v157 = 0;
  v155 = abs(v128);
  do
  {
    v129 = v1[78];
    v10 = *(_WORD *)(v129 + 66) == 0;
    v139 = *(_WORD *)(v129 + 66) < 0;
    v158 = 0;
    if ( !v139 && !v10 )
    {
      v156 = 68;
      do
      {
        v130 = abs(*(signed __int16 *)(v156 + v1[78]));
        if ( v130 <= 5100 )
        {
          v131 = *(_DWORD *)(v1[1507] + 4 * v130 + 8008);
          if ( v131 )
          {
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)v131 + 8))(v131) )
            {
              LOWORD(v133) = *(_WORD *)(v131 + 406);
              if ( (signed __int16)v133 > 0 )
              {
                if ( v157 )
                {
                  if ( *(_DWORD *)(v131 + 316) > 0 )
                  {
                    v141 = (int *)(v131 + 256);
                    if ( (*(_DWORD *)(v131 + 256) ^ 0x12345678) >= 0 && *(_DWORD *)(v131 + 256) != 305419896 )
                    {
                      v133 = (signed __int16)v133;
                      if ( (*(_DWORD *)(v131 + 256) ^ 0x12345678) != (signed __int16)v133
                        && abs(sub_401D39(v133, v132) - (*(_DWORD *)(v131 + 276) ^ 0x12345678)) >= *(_DWORD *)(v131 + 316) )
                      {
                        v142 = *(_WORD *)(v131 + 412);
                        if ( !v142 || sub_402676(v142) > 0 )
                        {
                          v143 = *v141;
                          *v141 = 305419896;
                          nullsub_3(v131 + 256, v143, 305419896);
                        }
                      }
                    }
                  }
                  v144 = *(_DWORD *)(v131 + 308);
                  if ( v144 <= 0 )
                    goto LABEL_284;
                  v138 = (int *)(v131 + 256);
                  if ( (*(_DWORD *)(v131 + 256) ^ 0x12345678) < 0
                    || *(_DWORD *)(v131 + 256) == 305419896
                    || (*(_DWORD *)(v131 + 256) ^ 0x12345678) == *(signed __int16 *)(v131 + 406) )
                  {
                    goto LABEL_284;
                  }
                  v140 = __OFSUB__(v155, v144);
                  v139 = v155 - v144 < 0;
                }
                else
                {
                  if ( *(_DWORD *)(v131 + 312) > 0 )
                  {
                    v134 = (int *)(v131 + 256);
                    v133 = (signed __int16)v133;
                    if ( (*(_DWORD *)(v131 + 256) ^ 0x12345678) == (signed __int16)v133
                      && abs(sub_401D39(v133, v132) - (*(_DWORD *)(v131 + 276) ^ 0x12345678)) >= *(_DWORD *)(v131 + 312) )
                    {
                      v135 = *(_WORD *)(v131 + 412);
                      if ( !v135 || sub_402676(v135) > 0 )
                      {
                        v136 = *v134;
                        *v134 = 305419896;
                        nullsub_3(v131 + 256, v136, 305419896);
                      }
                    }
                  }
                  v137 = *(_DWORD *)(v131 + 320);
                  if ( v137 <= 0 )
                    goto LABEL_284;
                  v138 = (int *)(v131 + 256);
                  if ( (*(_DWORD *)(v131 + 256) ^ 0x12345678) != *(signed __int16 *)(v131 + 406) )
                    goto LABEL_284;
                  v140 = __OFSUB__(v155, v137);
                  v139 = v155 - v137 < 0;
                }
                if ( !(v139 ^ v140) )
                {
                  v145 = *(_WORD *)(v131 + 412);
                  if ( !v145 || sub_402676(v145) > 0 )
                  {
                    v146 = *v138;
                    *v138 = 305419896;
                    nullsub_3(v138, v146, 305419896);
                    v149 = sub_401D39(v148, v147);
                    v155 = 0;
                    v1[6901] = v149;
                  }
                }
              }
            }
          }
        }
LABEL_284:
        v150 = *(signed __int16 *)(v1[78] + 66);
        v156 += 4;
        ++v158;
      }
      while ( v158 < v150 );
    }
    v140 = __OFSUB__(v157 + 1, 2);
    v139 = v157++ - 1 < 0;
  }
  while ( v139 ^ v140 );
  if ( *((_DWORD *)dword_563908 + 1501) && v162 )
    sub_401AB4(*((_DWORD *)dword_563908 + 1501));
  return v160;
}
// 4011E5: using guessed type _DWORD __stdcall sub_4011E5(_DWORD);
// 4012BC: using guessed type _DWORD __stdcall sub_4012BC(_DWORD, _DWORD, _DWORD);
// 401311: using guessed type int __thiscall sub_401311(_DWORD);
// 401640: using guessed type int __thiscall sub_401640(_DWORD);
// 401785: using guessed type _DWORD __stdcall sub_401785(_DWORD);
// 4019E7: using guessed type _DWORD __stdcall sub_4019E7(_DWORD);
// 401AB4: using guessed type int __thiscall sub_401AB4(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401EC4: using guessed type int __thiscall sub_401EC4(_DWORD);
// 402239: using guessed type _DWORD __stdcall sub_402239(_DWORD);
// 4022CA: using guessed type _DWORD __stdcall sub_4022CA(_DWORD, _DWORD);
// 4023F6: using guessed type _DWORD __stdcall sub_4023F6(_DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4024CD: using guessed type _DWORD __stdcall sub_4024CD(_DWORD);
// 40266C: using guessed type _DWORD __stdcall sub_40266C(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 4026D0: using guessed type _DWORD __stdcall sub_4026D0(_DWORD);
// 4028EC: using guessed type _DWORD __stdcall sub_4028EC(_DWORD);
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004231F0) --------------------------------------------------------
int __thiscall sub_4231F0(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // ecx
  signed int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // edx
  int v8; // ecx
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // ebp
  int v13; // eax
  int v14; // ebx
  int v15; // edi
  int v16; // ecx
  int v17; // ecx
  int v18; // ecx
  int v19; // eax
  int v20; // ecx
  int v21; // ecx
  int v22; // ecx
  int v23; // ecx
  int v24; // ecx
  signed int v25; // eax
  int v26; // ecx
  int v27; // edi
  int v28; // ebx
  int v29; // ebp
  signed int v30; // ebx
  signed int v31; // eax
  int v32; // ecx
  int v33; // ebx
  unsigned int v34; // edx
  int v35; // ecx
  int v36; // ebx
  int v37; // eax
  int v38; // ecx
  int v39; // eax
  int v40; // ebx
  int v41; // edx
  signed int v42; // edi
  long double v43; // st7
  unsigned int v44; // edx
  int v45; // ecx
  int v46; // eax
  int v47; // edi
  int v48; // ecx
  int v49; // edx
  int v50; // eax
  int v51; // edx
  int v52; // eax
  signed int v53; // ST1C_4
  int v54; // ecx
  int v55; // ecx
  int v56; // ecx
  int v57; // ecx
  signed __int16 *v58; // ecx
  int v59; // eax
  int result; // eax
  int v61; // [esp+28h] [ebp-140h]
  int v62; // [esp+28h] [ebp-140h]
  signed int v63; // [esp+2Ch] [ebp-13Ch]
  int v64; // [esp+2Ch] [ebp-13Ch]
  long double v65; // [esp+30h] [ebp-138h]
  long double v66; // [esp+38h] [ebp-130h]
  int v67; // [esp+40h] [ebp-128h]
  int v68; // [esp+44h] [ebp-124h]
  int v69; // [esp+48h] [ebp-120h]
  double v70; // [esp+4Ch] [ebp-11Ch]
  int v71; // [esp+54h] [ebp-114h]
  int v72; // [esp+58h] [ebp-110h]
  int v73; // [esp+5Ch] [ebp-10Ch]
  int v74; // [esp+60h] [ebp-108h]
  char Dest; // [esp+64h] [ebp-104h]

  v1 = this;
  v2 = (_DWORD *)this[354];
  if ( v2 && v1[2681] <= 0 )
  {
    v3 = v1[63];
    v1[2681] = *((_DWORD *)dword_563918 + 2264);
    sub_4A6740(v2, v1[62], v3, 0, 0, 0, 0);
  }
  else
  {
    v1[2681] -= v1[2706];
  }
  if ( v1[1535] != v1[1499] || (v4 = v1[89], v1[3108] == *(_DWORD *)(v4 + 8) - 120) )
  {
    v5 = 160;
  }
  else
  {
    v5 = *(_DWORD *)(v4 + 4) / 2;
    if ( v1[3100] < v5 )
      v5 = v1[3100];
  }
  if ( v1[3099] != v5 )
  {
    v1[3099] = v5;
    sub_401965(v1);
  }
  v6 = v1[89];
  if ( !*(_DWORD *)(v6 + 20) || (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(v6 + 20) + 96))(*(_DWORD *)(v6 + 20)) )
  {
    (*(void (**)(void))(*(_DWORD *)v1[89] + 52))();
    v1[3097] = (*(int (**)(void))(*(_DWORD *)v1[89] + 156))() + 1;
  }
  v9 = v1[90];
  if ( v9
    && (!*(_DWORD *)(v9 + 20) || (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(v9 + 20) + 96))(*(_DWORD *)(v9 + 20))) )
  {
    (*(void (**)(void))(*(_DWORD *)v1[90] + 52))();
    v1[3097] = (*(int (**)(void))(*(_DWORD *)v1[89] + 156))() + 1;
  }
  if ( *((_BYTE *)v1 + 2220) && abs(sub_401D39(v8, v7) - v1[619]) > 75 )
    *((_BYTE *)v1 + 2220) = 0;
  v10 = (*(int (**)(void))(*(_DWORD *)v1[89] + 156))();
  v11 = v10 + 1;
  v12 = v1[2702] % (v10 + 1);
  v13 = v1[v12 + 3094];
  v67 = v1[2702] % v11;
  if ( v13 == 32 || v1[3097] > 0 )
  {
    v19 = v1[3097];
    if ( v19 > 0 )
      v1[3097] = v19 - 1;
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[89] + 68))(0, 0, -1, -1);
    v20 = v1[1500];
    sub_40258B(1);
    v21 = v1[1509];
    sub_401901(1);
    v22 = v1[1505];
    sub_40150A(1);
  }
  else
  {
    v14 = 0;
    if ( v13 > 0 )
    {
      v15 = (int)&v1[128 * v12 + 2710];
      do
      {
        (*(void (__stdcall **)(int))(*(_DWORD *)v1[89] + 64))(v15);
        v16 = v1[1500];
        sub_40258B(1);
        v17 = v1[1509];
        sub_401901(1);
        v18 = v1[1505];
        sub_40150A(1);
        ++v14;
        v15 += 16;
      }
      while ( v14 < v1[v12 + 3094] );
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[89] + 68))(0, 0, -1, -1);
  }
  sub_4015E6(v1[1532]);
  v23 = v1[1503];
  sub_401AEB(v1[62], v1[63], *(signed __int16 *)(v1[6897] + 100), v1[7722]);
  v24 = v1[6898];
  if ( v24 )
  {
    v25 = (*(int (__stdcall **)(int *, long double *, double *))(*(_DWORD *)v24 + 88))(&v68, &v65, &v70);
    v26 = v1[3111];
    v63 = v25;
    v27 = v68 / 10000 - v26 / 2;
    v28 = v1[3112];
    LODWORD(v66) = v1[3112] / 2;
    v29 = SLODWORD(v65) / 10000 - LODWORD(v66);
    v1[60] = v27;
    v1[61] = v29;
    v61 = *((_DWORD *)dword_563918 + 2250);
    if ( *((_DWORD *)dword_563918 + 2348) == 3 )
      v61 = 0;
    v69 = v61 * v26 / 2;
    v66 = ((double)v25 + (double)v25) * 3.1415926535 / 240000.0;
    v62 = v61 * v28 / 2;
    v30 = (signed int)(sin(v66) * (double)v69);
    v31 = (signed int)-(cos(v66) * (double)v62);
    if ( v63 == -1 )
    {
      v30 = 0;
      v31 = 0;
    }
    v32 = v1[2705];
    v33 = v30 - v1[67];
    LODWORD(v66) = v31 - v1[68];
    v34 = (signed int)((unsigned __int64)(274877907i64 * v69) >> 32) >> 6;
    v1[69] = v32;
    v35 = v34 + (v34 >> 31);
    v64 = v33;
    v36 = v62 / 1000;
    LODWORD(v65) = *((_DWORD *)dword_563918 + 2249);
    v37 = LODWORD(v65);
    if ( v35 <= SLODWORD(v65) )
    {
      v38 = v64;
    }
    else
    {
      v38 = v64 * LODWORD(v65) / v35;
      v37 = LODWORD(v65);
    }
    if ( v36 <= v37 )
      v39 = LODWORD(v66);
    else
      v39 = LODWORD(v66) * v37 / v36;
    v1[68] += v39;
    v1[67] += v38;
    v40 = v1[68];
    v1[60] = v27 + v1[67] / 1000;
    v41 = v1[6898];
    v1[61] = v29 + v40 / 1000;
    if ( (*(int (**)(void))(**(_DWORD **)(v41 + 72) + 4))() == 4 )
    {
      v1[6895] = 0;
    }
    else if ( v1[6895] )
    {
      v65 = (double)(((*(int (__stdcall **)(int *, long double *, double *))(*(_DWORD *)v1[6898] + 84))(
                        &v68,
                        &v65,
                        &v70)
                    + 180000)
                   % 240000)
          * 0.00002617993877916667;
      v70 = (double)(signed int)v1[6895];
      v42 = (signed int)(cos(v65) * v70);
      v43 = sin(v65) * v70;
      if ( dword_53A7C4 )
      {
        v44 = (signed int)((unsigned __int64)(12025908433i64 * (signed int)v43) >> 32) >> 2;
        v45 = v44 + (v44 >> 31);
      }
      else
      {
        v45 = (signed int)v43;
      }
      v1[60] += v42 / 1000;
      v1[61] += v45 / 1000;
    }
    v46 = v1[3098];
    if ( v46 > 0 )
    {
      v47 = v46 / 4 + 4;
      v1[60] += rand() % v47 - v47 / 2;
      v1[61] += rand() % v47 - v47 / 2;
    }
    v12 = v67;
  }
  sub_4A39F0(v1[60], v1[61]);
  sub_40187F(v1);
  v48 = v1[61];
  v49 = v1[60] + v1[3111];
  v71 = v1[60];
  v50 = v48 + v1[3112];
  v72 = v48;
  v73 = v49;
  v51 = v1[1508];
  v74 = v50;
  v52 = sub_4ABE90(*(int **)(v51 + 5180), &v71, 1, v1 + 6900, 3, 5);
  v53 = v1[6900];
  v1[6899] = v52;
  sub_48DD90(v52, v53, sub_402626);
  v54 = v1[1535];
  if ( v54 )
    (*(void (**)(void))(*(_DWORD *)v54 + 16))();
  v55 = v1[1500];
  sub_40258B(0);
  v56 = v1[1509];
  sub_401901(0);
  v57 = v1[1505];
  sub_40150A(0);
  sub_40252C(v1[1506]);
  if ( *((_DWORD *)dword_563918 + 2222) )
  {
    v58 = (signed __int16 *)v1[487];
    if ( v58 )
    {
      if ( v58[85] )
        v59 = v58[89] * (v1[2705] % (signed int)v58[85]) / v58[85];
      else
        v59 = 0;
      sub_4A50B0((int)v58, v59, v1[89], *(_DWORD *)(v1[89] + 4) - v58[86] - v1[3099], v1[3104] - v58[87], 6, 0, 0, 0, 0);
    }
  }
  if ( *((_DWORD *)dword_563918 + 2221) && v1[2703] > 0 )
  {
    sprintf(&Dest, "%d", v1[2703]);
    sub_49B4F0(
      (_DWORD *)v1[1517],
      &Dest,
      4,
      (_DWORD *)v1[89],
      *(_DWORD *)(v1[89] + 4) - v1[3099],
      v1[3104] - *(signed __int16 *)(*(_DWORD *)(v1[1517] + 2052) + 174),
      3,
      0);
  }
  sub_49B720((_DWORD *)v1[89], (int)&v1[128 * v12 + 2710], 32, 0);
  sub_4025A4(v1);
  v1[v12 + 3094] = sub_49B750((_DWORD *)v1[89]);
  result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v1[89] + 108))(*((_DWORD *)dword_563918 + 2220));
  ++v1[2702];
  return result;
}
// 40150A: using guessed type _DWORD __stdcall sub_40150A(_DWORD);
// 4015E6: using guessed type int __thiscall sub_4015E6(_DWORD);
// 40187F: using guessed type int __thiscall sub_40187F(_DWORD);
// 401901: using guessed type _DWORD __stdcall sub_401901(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401AEB: using guessed type _DWORD __stdcall sub_401AEB(_DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40252C: using guessed type int __thiscall sub_40252C(_DWORD);
// 40258B: using guessed type _DWORD __stdcall sub_40258B(_DWORD);
// 4025A4: using guessed type int __thiscall sub_4025A4(_DWORD);
// 402626: using guessed type int __cdecl sub_402626(int, int);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00423B90) --------------------------------------------------------
_DWORD *__thiscall sub_423B90(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // eax
  int *v3; // eax

  v1 = this;
  this[1] = &MenuTarget::`vftable';
  this[2] = off_5119C0;
  *this = &Game::`vftable';
  this[1] = &off_511D20;
  this[2] = off_511D0C;
  dword_563908 = this;
  v2 = (int *)operator new(0x14u);
  if ( v2 )
    v3 = sub_4AA7C0(v2);
  else
    v3 = 0;
  Memory = v3;
  v1[3115] = 1;
  sub_401181(v1);
  v1[6936] = -1;
  memset(v1 + 3277, 0, 0x200u);
  sub_402829(&Source);
  return v1;
}
// 401181: using guessed type int __thiscall sub_401181(_DWORD);
// 402829: using guessed type _DWORD __stdcall sub_402829(_DWORD);
// 5111D0: using guessed type void *MenuTarget::`vftable';
// 5119C0: using guessed type void (__noreturn *off_5119C0[3])();
// 511D0C: using guessed type int (__stdcall *off_511D0C[2])(int, int);
// 511D20: using guessed type int (__stdcall *off_511D20)(int, int, int);
// 511D2C: using guessed type void *Game::`vftable';

//----- (00423CA0) --------------------------------------------------------
int __usercall sub_423CA0@<eax>(int a1@<ecx>, unsigned int a2@<ebx>, unsigned int a3@<ebp>)
{
  int v3; // esi
  int v4; // ecx
  int v5; // edi
  int v6; // ecx
  int v7; // ecx
  int v8; // ecx
  int v9; // ecx
  int v10; // ecx
  int v11; // ecx
  int v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // ebx
  _DWORD *v21; // ebp
  _DWORD *v22; // eax
  int v23; // edi
  int v24; // ecx
  int v25; // ebx
  int v26; // ecx
  int v27; // edi
  int v28; // ebx
  int v29; // ecx
  int v30; // edi
  int v31; // ebx
  int v32; // ecx
  int v33; // edi
  int v34; // ebx
  int v35; // ecx
  int v36; // ecx
  int v37; // ecx
  int v38; // ecx
  int v39; // ecx
  _DWORD *v40; // eax
  int v41; // ecx
  _DWORD *v42; // eax
  int v43; // ecx
  _DWORD *v44; // eax
  int v45; // edx
  bool v46; // zf
  int v47; // edi
  __int16 v48; // cx
  int v49; // edx
  int v50; // eax
  int v51; // ebx
  int v52; // ecx
  int v53; // ecx
  _DWORD *v54; // ecx
  int v55; // edx
  int v56; // eax
  _DWORD *v57; // ebp
  int v58; // eax
  int v59; // edx
  _DWORD *v60; // ecx
  int v61; // eax
  _DWORD *v62; // ebx
  int v63; // eax
  int v64; // edx
  _DWORD *v65; // ecx
  _DWORD *v66; // ebx
  int v67; // eax
  int v68; // eax
  _DWORD *v69; // edx
  int v70; // ecx
  int v71; // eax
  int v72; // ebx
  int v73; // ecx
  int v74; // ecx
  _DWORD *v75; // ecx
  int v76; // edx
  int v77; // eax
  _DWORD *v78; // ebp
  int v79; // eax
  int v80; // edx
  _DWORD *v81; // ecx
  int v82; // eax
  _DWORD *v83; // ebx
  int v84; // eax
  int v85; // edx
  _DWORD *v86; // ecx
  _DWORD *v87; // ebx
  int v88; // eax
  int v89; // eax
  _DWORD *v90; // edx
  int v91; // ecx
  int v92; // eax
  int v93; // edi
  int v94; // edx
  _DWORD *v95; // eax
  int v96; // edx
  int v97; // ecx
  _DWORD *v98; // ecx
  int v99; // edi
  int v100; // ecx
  int v101; // edi
  int v102; // ecx
  _DWORD *v103; // ecx
  int v104; // ecx
  signed int v105; // ebp
  signed int v106; // ebx
  signed int v107; // eax
  _DWORD *v108; // edi
  int v109; // edx
  signed int v110; // ebp
  signed int v111; // eax
  int *v112; // ebx
  int *v113; // edi
  int v114; // ST20_4
  int v115; // ST1C_4
  int v116; // edx
  int v117; // ecx
  _DWORD *v118; // ecx
  int v119; // ecx
  int v120; // ecx
  int v121; // eax
  _DWORD *v122; // ebx
  int v123; // ebp
  DWORD v124; // eax
  DWORD v125; // edi
  int v126; // eax
  _DWORD *v127; // ecx
  int v128; // eax
  int v129; // eax
  _DWORD *v130; // eax
  int v131; // edi
  int v132; // edx
  int v133; // eax
  int v134; // eax
  int v135; // ecx
  int v136; // ecx
  int v137; // ecx
  int v138; // eax
  int v139; // ecx
  int v140; // eax
  int v141; // ecx
  int v142; // ecx
  int v143; // eax
  int v144; // edi
  int v145; // eax
  int v146; // edx
  char v147; // al
  _DWORD *v148; // ecx
  int v149; // eax
  int v150; // eax
  bool v151; // sf
  unsigned __int8 v152; // of
  __int64 v153; // rax
  int v154; // ecx
  int v155; // eax
  int v156; // edx
  _DWORD *v157; // ecx
  int v158; // ecx
  int v159; // eax
  int v160; // ebx
  int v161; // eax
  __int64 v162; // rax
  int v163; // eax
  int v164; // ecx
  int v165; // edi
  int v166; // eax
  signed int v167; // edi
  int v168; // edi
  int v169; // ebp
  int v170; // eax
  _DWORD *v171; // ecx
  int v172; // eax
  __int64 v173; // rax
  signed int v174; // edi
  int v175; // eax
  int v176; // eax
  _DWORD *v177; // ecx
  void *v178; // edi
  unsigned __int64 v180; // [esp+24h] [ebp-58h]
  int v181; // [esp+34h] [ebp-48h]
  int v182; // [esp+38h] [ebp-44h]
  int i; // [esp+3Ch] [ebp-40h]
  int v184; // [esp+40h] [ebp-3Ch]
  int v185; // [esp+44h] [ebp-38h]
  int v186; // [esp+48h] [ebp-34h]
  int v187; // [esp+4Ch] [ebp-30h]
  int v188; // [esp+50h] [ebp-2Ch]
  int v189; // [esp+54h] [ebp-28h]
  char v190; // [esp+58h] [ebp-24h]
  LARGE_INTEGER v191; // [esp+5Ch] [ebp-20h]
  LARGE_INTEGER PerformanceCount; // [esp+64h] [ebp-18h]
  int v193; // [esp+6Ch] [ebp-10h]
  LONG v194; // [esp+70h] [ebp-Ch]
  int v195; // [esp+74h] [ebp-8h]
  LONG v196; // [esp+78h] [ebp-4h]

  v3 = a1;
  (*(void (__stdcall **)(signed int))(*(_DWORD *)dword_56391C + 160))(-1);
  sub_4028D8(v3);
  v4 = *(_DWORD *)(v3 + 1420);
  v5 = 0;
  if ( v4 )
  {
    if ( (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 40))(*(_DWORD *)(v3 + 10824)) )
    {
      v6 = *(_DWORD *)(v3 + 1420);
      if ( v6 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 36))(1);
        *(_DWORD *)(v3 + 1420) = 0;
      }
    }
  }
  v7 = *(_DWORD *)(v3 + 6040);
  sub_40141A(*(_DWORD *)(v3 + 10824));
  v8 = *(_DWORD *)(v3 + 6000);
  sub_401FCD(*(_DWORD *)(v3 + 10824));
  v9 = *(_DWORD *)(v3 + 6024);
  j_nullsub_5(*(_DWORD *)(v3 + 10824));
  v10 = *(_DWORD *)(v3 + 6020);
  j_nullsub_9(*(_DWORD *)(v3 + 10824));
  v11 = *(_DWORD *)(v3 + 6036);
  sub_401DF2(*(_DWORD *)(v3 + 10824));
  v12 = *(_DWORD *)(v3 + 6056);
  sub_4024A5(*(_DWORD *)(v3 + 10824));
  v13 = *(_DWORD *)(v3 + 6016);
  sub_40264E(*(_DWORD *)(v3 + 10824));
  v14 = *(_DWORD *)(v3 + 6012);
  sub_40198D(*(_DWORD *)(v3 + 10824));
  sub_402513(*(_DWORD *)(v3 + 6012));
  if ( *(_DWORD *)(v3 + 6004) )
    sub_402671(*(_DWORD *)(v3 + 10824));
  sub_4A7320(*(int **)(v3 + 1400), *(_DWORD *)(v3 + 10824));
  sub_4A7320(*(int **)(v3 + 1404), *(_DWORD *)(v3 + 10824));
  sub_4A7320(*(int **)(v3 + 1408), *(_DWORD *)(v3 + 10824));
  sub_4A7320(*(int **)(v3 + 1412), *(_DWORD *)(v3 + 10824));
  v15 = *(_DWORD *)(v3 + 12392);
  if ( v15 > 0 )
    *(_DWORD *)(v3 + 12392) = v15 - *(_DWORD *)(v3 + 10824);
  if ( *(_DWORD *)(v3 + 27692) )
    *(_DWORD *)(v3 + 27712) -= *(_DWORD *)(v3 + 10824);
  v16 = *(_DWORD *)(v3 + 6140);
  if ( v16 )
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v16 + 12))(*(_DWORD *)(v3 + 10824));
  v17 = *(_DWORD *)(v3 + 27584);
  if ( v17 > 0 )
    *(_DWORD *)(v3 + 27584) = v17 - *(_DWORD *)(v3 + 10824);
  v18 = *(_DWORD *)(v3 + 27688);
  if ( v18 > 0 )
  {
    v19 = v18 - *(_DWORD *)(v3 + 10824);
    *(_DWORD *)(v3 + 27688) = v19;
    if ( v19 <= 0 )
      sub_4012E4(v3);
  }
  v180 = __PAIR__(a2, a3);
  if ( *(_DWORD *)(v3 + 27576) > 0 )
  {
    v20 = 0;
    v181 = v3 + 25828;
    v182 = v3 + 25776;
    v21 = (_DWORD *)(v3 + 25832);
    do
    {
      *v21 -= *(_DWORD *)(v3 + 10824);
      *(_DWORD *)v181 -= *(_DWORD *)(v3 + 10824);
      if ( *v21 <= 0 )
      {
        for ( i = **(_DWORD **)(v3 + 1408); i; i = *(_DWORD *)(i + 4) )
          sub_402658(v182);
      }
      if ( *(_DWORD *)v181 <= 0 )
      {
        memcpy_0((void *)(v3 + v20 + 25776), (const void *)(v3 + v20 + 25836), 60 * (--*(_DWORD *)(v3 + 27576) - v5));
        v182 -= 60;
        --v5;
        v20 -= 60;
        v21 -= 15;
        v181 -= 60;
      }
      v182 += 60;
      v181 += 60;
      ++v5;
      v20 += 60;
      v21 += 15;
    }
    while ( v5 < *(_DWORD *)(v3 + 27576) );
  }
  v22 = Memory;
  v23 = *(_DWORD *)(v3 + 320);
  v24 = *((_DWORD *)Memory + 1);
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(v24 + 4 * v23)) >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v24 + 4 * v23) )
  {
    v25 = *(_DWORD *)(v24 + 4 * v23);
    v26 = (v25 ^ *(_DWORD *)Memory) - *(_DWORD *)(v3 + 10824);
    *((_DWORD *)Memory + 4) ^= v25;
    *(_DWORD *)(v22[1] + 4 * v23) = v26 ^ *v22;
    v22[4] ^= *(_DWORD *)(v22[1] + 4 * v23);
    v22 = Memory;
  }
  v27 = *(_DWORD *)(v3 + 324);
  if ( (*v22 ^ *(_DWORD *)(v22[1] + 4 * v27)) >= 0 && *v22 != *(_DWORD *)(v22[1] + 4 * v27) )
  {
    v28 = *(_DWORD *)(v22[1] + 4 * v27);
    v29 = (v28 ^ *v22) - *(_DWORD *)(v3 + 10824);
    v22[4] ^= v28;
    *(_DWORD *)(v22[1] + 4 * v27) = v29 ^ *v22;
    v22[4] ^= *(_DWORD *)(v22[1] + 4 * v27);
    v22 = Memory;
  }
  v30 = *(_DWORD *)(v3 + 328);
  if ( (*v22 ^ *(_DWORD *)(v22[1] + 4 * v30)) >= 0 && *v22 != *(_DWORD *)(v22[1] + 4 * v30) )
  {
    v31 = *(_DWORD *)(v22[1] + 4 * v30);
    v32 = (v31 ^ *v22) - *(_DWORD *)(v3 + 10824);
    v22[4] ^= v31;
    *(_DWORD *)(v22[1] + 4 * v30) = v32 ^ *v22;
    v22[4] ^= *(_DWORD *)(v22[1] + 4 * v30);
    v22 = Memory;
  }
  v33 = *(_DWORD *)(v3 + 332);
  if ( (*v22 ^ *(_DWORD *)(v22[1] + 4 * v33)) >= 0 && *v22 != *(_DWORD *)(v22[1] + 4 * v33) )
  {
    v34 = *(_DWORD *)(v22[1] + 4 * v33);
    v35 = (v34 ^ *v22) - *(_DWORD *)(v3 + 10824);
    v22[4] ^= v34;
    *(_DWORD *)(v22[1] + 4 * v33) = v35 ^ *v22;
    v22[4] ^= *(_DWORD *)(v22[1] + 4 * v33);
    v22 = Memory;
  }
  v36 = *(_DWORD *)(v3 + 25752);
  if ( v36 > 0 )
  {
    *(_DWORD *)(v3 + 25752) = v36 - *(_DWORD *)(v3 + 10824);
    if ( sub_4014FB(*(_DWORD *)(v3 + 27588)) || *((_BYTE *)dword_563908 + 480 * *((_DWORD *)dword_563908 + 66) + 59603) )
      *(_DWORD *)(v3 + 25752) -= *(_DWORD *)(v3 + 10824);
    v22 = Memory;
  }
  v37 = *(_DWORD *)(v3 + 27756);
  if ( v37 )
  {
    if ( (*(int (**)(void))(*(_DWORD *)v37 + 4))() == 17 )
    {
      *(_DWORD *)(v3 + 27772) -= *(_DWORD *)(v3 + 10824);
      if ( *(_DWORD *)(v3 + 27772) <= 0 )
        *(_DWORD *)(v3 + 27756) = 0;
    }
    v22 = Memory;
  }
  v38 = *(_DWORD *)(v3 + 300);
  v22[4] ^= *(_DWORD *)(v22[1] + 4 * v38);
  *(_DWORD *)(v22[1] + 4 * v38) = *v22;
  v22[4] ^= *(_DWORD *)(v22[1] + 4 * v38);
  v39 = *(_DWORD *)(v3 + 292);
  v40 = Memory;
  v40[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v39);
  *(_DWORD *)(v40[1] + 4 * v39) = *v40;
  v40[4] ^= *(_DWORD *)(v40[1] + 4 * v39);
  v41 = *(_DWORD *)(v3 + 296);
  v42 = Memory;
  v42[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v41);
  *(_DWORD *)(v42[1] + 4 * v41) = *v42;
  v42[4] ^= *(_DWORD *)(v42[1] + 4 * v41);
  v43 = *(_DWORD *)(v3 + 304);
  v44 = Memory;
  v44[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v43);
  *(_DWORD *)(v44[1] + 4 * v43) = *v44;
  v44[4] ^= *(_DWORD *)(v44[1] + 4 * v43);
  v45 = *(_DWORD *)(v3 + 6056);
  v46 = *(_DWORD *)(v45 + 27436) == 0;
  v151 = *(_DWORD *)(v45 + 27436) < 0;
  v182 = 0;
  if ( !v151 && !v46 )
  {
    i = 26412;
    while ( 1 )
    {
      v47 = *(_DWORD *)(i + *(_DWORD *)(v3 + 6056));
      v48 = *(_WORD *)(v47 + 10);
      if ( v48 != -1 || *(_WORD *)(v47 + 8) != -1 )
        break;
LABEL_71:
      v94 = *(_DWORD *)(v3 + 6056);
      i += 4;
      v152 = __OFSUB__(v182 + 1, *(_DWORD *)(v94 + 27436));
      v151 = v182++ + 1 - *(_DWORD *)(v94 + 27436) < 0;
      if ( !(v151 ^ v152) )
        goto LABEL_72;
    }
    v49 = *(_DWORD *)(v47 + 16);
    v50 = *(_DWORD *)(v49 + 108);
    v51 = v50 * v50;
    v187 = v50 * v50;
    if ( v50 == -1 )
    {
      if ( *(_WORD *)(v47 + 8) != *(_WORD *)(*(_DWORD *)(v3 + 27588) + 96) )
        goto LABEL_61;
    }
    else
    {
      if ( *(_DWORD *)(v49 + 108) <= 0 )
        goto LABEL_61;
      if ( v48 < 0 )
        goto LABEL_61;
      if ( *(_WORD *)(v47 + 8) != -1 )
        goto LABEL_61;
      if ( *(_WORD *)(v47 + 14) != *(_WORD *)(*(_DWORD *)(v3 + 27588) + 100) )
        goto LABEL_61;
      v52 = *(_DWORD *)(v3 + 27592);
      if ( !v52 )
        goto LABEL_61;
      (*(void (__stdcall **)(int *, int *, char *))(*(_DWORD *)v52 + 84))(&v181, &v184, &v190);
      v53 = v181 / 10000 - *(signed __int16 *)(v47 + 10);
      if ( v53 * v53 + (v184 / 10000 - *(signed __int16 *)(v47 + 12)) * (v184 / 10000 - *(signed __int16 *)(v47 + 12)) >= v51 )
        goto LABEL_61;
    }
    v54 = Memory;
    v55 = *(_DWORD *)(v3 + 300);
    v56 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v55) ^ *(_DWORD *)Memory;
    v57 = (char *)Memory + 4;
    v185 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v55);
    v58 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 116) + v56;
    v54[4] ^= v185;
    v186 = (int)v54;
    *(_DWORD *)(*v57 + 4 * v55) = v58 ^ *v54;
    v54[4] ^= *(_DWORD *)(*v57 + 4 * v55);
    v59 = *(_DWORD *)(v3 + 292);
    v60 = Memory;
    v61 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v59) ^ *(_DWORD *)Memory;
    v62 = (char *)Memory + 4;
    v186 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v59);
    v63 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 112) + v61;
    v60[4] ^= v186;
    v185 = (int)v60;
    *(_DWORD *)(*v62 + 4 * v59) = v63 ^ *v60;
    v60[4] ^= *(_DWORD *)(*v62 + 4 * v59);
    v64 = *(_DWORD *)(v3 + 296);
    v65 = Memory;
    v66 = (char *)Memory + 4;
    v67 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v64) ^ *(_DWORD *)Memory;
    v186 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v64);
    v68 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 120) + v67;
    v65[4] ^= v186;
    v185 = (int)v65;
    *(_DWORD *)(*v66 + 4 * v64) = v68 ^ *v65;
    v65[4] ^= *(_DWORD *)(*v66 + 4 * v64);
    v69 = Memory;
    v70 = *(_DWORD *)(v3 + 304);
    v71 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v70);
    if ( v71 + *(_DWORD *)(*(_DWORD *)(v47 + 16) + 124) >= 1000 )
      v72 = v71 + *(_DWORD *)(*(_DWORD *)(v47 + 16) + 124);
    else
      v72 = 1000;
    *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v70);
    *(_DWORD *)(v69[1] + 4 * v70) = v72 ^ *v69;
    v69[4] ^= *(_DWORD *)(v69[1] + 4 * v70);
    v51 = v187;
LABEL_61:
    if ( *(_DWORD *)(*(_DWORD *)(v47 + 16) + 128) > 0
      && *(_WORD *)(v47 + 10) >= 0
      && *(_WORD *)(v47 + 8) == -1
      && *(_WORD *)(v47 + 14) != *(_WORD *)(*(_DWORD *)(v3 + 27588) + 100) )
    {
      v73 = *(_DWORD *)(v3 + 27592);
      if ( v73 )
      {
        (*(void (__stdcall **)(int *, int *, LARGE_INTEGER *))(*(_DWORD *)v73 + 84))(&v188, &v189, &v191);
        v74 = v188 / 10000 - *(signed __int16 *)(v47 + 10);
        if ( v74 * v74 + (v189 / 10000 - *(signed __int16 *)(v47 + 12)) * (v189 / 10000 - *(signed __int16 *)(v47 + 12)) < v51 )
        {
          v75 = Memory;
          v76 = *(_DWORD *)(v3 + 300);
          v77 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v76) ^ *(_DWORD *)Memory;
          v78 = (char *)Memory + 4;
          v187 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v76);
          v79 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 136) + v77;
          v75[4] ^= v187;
          v186 = (int)v75;
          *(_DWORD *)(*v78 + 4 * v76) = v79 ^ *v75;
          v75[4] ^= *(_DWORD *)(*v78 + 4 * v76);
          v80 = *(_DWORD *)(v3 + 292);
          v81 = Memory;
          v82 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v80) ^ *(_DWORD *)Memory;
          v83 = (char *)Memory + 4;
          v187 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v80);
          v84 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 132) + v82;
          v81[4] ^= v187;
          v186 = (int)v81;
          *(_DWORD *)(*v83 + 4 * v80) = v84 ^ *v81;
          v81[4] ^= *(_DWORD *)(*v83 + 4 * v80);
          v85 = *(_DWORD *)(v3 + 296);
          v86 = Memory;
          v87 = (char *)Memory + 4;
          v88 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v85) ^ *(_DWORD *)Memory;
          v187 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v85);
          v89 = *(_DWORD *)(*(_DWORD *)(v47 + 16) + 140) + v88;
          v86[4] ^= v187;
          v186 = (int)v86;
          *(_DWORD *)(*v87 + 4 * v85) = v89 ^ *v86;
          v86[4] ^= *(_DWORD *)(*v87 + 4 * v85);
          v90 = Memory;
          v91 = *(_DWORD *)(v3 + 304);
          v92 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v91);
          if ( v92 + *(_DWORD *)(*(_DWORD *)(v47 + 16) + 144) >= 1000 )
            v93 = v92 + *(_DWORD *)(*(_DWORD *)(v47 + 16) + 144);
          else
            v93 = 1000;
          *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v91);
          *(_DWORD *)(v90[1] + 4 * v91) = v93 ^ *v90;
          v90[4] ^= *(_DWORD *)(v90[1] + 4 * v91);
        }
      }
    }
    goto LABEL_71;
  }
LABEL_72:
  v95 = Memory;
  v96 = *((_DWORD *)Memory + 1);
  if ( *(_DWORD *)Memory != *(_DWORD *)(v96 + 4 * *(_DWORD *)(v3 + 300)) )
  {
    sub_401992((*(_DWORD *)Memory ^ *(_DWORD *)(v96 + 4 * *(_DWORD *)(v3 + 300))) * *(_DWORD *)(v3 + 10824));
    v95 = Memory;
  }
  v97 = *(_DWORD *)(v3 + 27592);
  if ( v97 )
  {
    if ( (*(int (**)(void))(**(_DWORD **)(v97 + 72) + 4))() == 4 )
    {
LABEL_88:
      v95 = Memory;
      goto LABEL_89;
    }
    v98 = *(_DWORD **)(v3 + 27592);
    v95 = Memory;
    if ( v98[14] >= 5001 )
    {
      v99 = *((_DWORD *)Memory + 1);
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(v99 + 4 * *(_DWORD *)(v3 + 296))) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(v99 + 4 * *(_DWORD *)(v3 + 296)) )
      {
        (*(void (__stdcall **)(int))(*v98 + 160))((*(_DWORD *)Memory ^ *(_DWORD *)(v99 + 4 * *(_DWORD *)(v3 + 296))) * *(_DWORD *)(v3 + 10824));
        v95 = Memory;
      }
    }
    v100 = *(_DWORD *)(*(_DWORD *)(v3 + 6012) + 4 * *(signed __int16 *)(*(_DWORD *)(v3 + 27588) + 96) + 4);
    if ( v100 )
    {
      v101 = v95[1];
      if ( (*v95 ^ *(_DWORD *)(v101 + 4 * *(_DWORD *)(v3 + 292))) >= 0
        && *v95 != *(_DWORD *)(v101 + 4 * *(_DWORD *)(v3 + 292)) )
      {
        (*(void (__stdcall **)(int))(*(_DWORD *)v100 + 160))((*v95 ^ *(_DWORD *)(v101 + 4 * *(_DWORD *)(v3 + 292))) * *(_DWORD *)(v3 + 10824));
        v95 = Memory;
      }
    }
    v102 = *(_DWORD *)(480 * *(_DWORD *)(v3 + 264) + v3 + 59910);
    if ( v102 )
    {
      sub_401992(v102 * *(_DWORD *)(v3 + 10824));
      if ( !(*(int (**)(void))(**(_DWORD **)(v3 + 27592) + 148))() )
      {
        if ( *((_BYTE *)dword_563908 + 480 * *((_DWORD *)dword_563908 + 66) + 59598) )
        {
          v103 = *(_DWORD **)(v3 + 27592);
          if ( !*(_DWORD *)(v103[18] + 1080) )
          {
            v95 = Memory;
            if ( *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *(_DWORD *)(v3 + 10716)) )
              goto LABEL_89;
            (*(void (__stdcall **)(signed int))(*v103 + 156))(-1000000);
          }
        }
      }
      goto LABEL_88;
    }
  }
LABEL_89:
  v104 = v95[1];
  if ( (*v95 ^ *(_DWORD *)(v104 + 4 * *(_DWORD *)(v3 + 324))) < 0
    || *v95 == *(_DWORD *)(v104 + 4 * *(_DWORD *)(v3 + 324)) )
  {
    sub_401992(*(_DWORD *)(v3 + 10824) * (*v95 ^ *(_DWORD *)(v104 + 4 * *(_DWORD *)(v3 + 10712))));
    v95 = Memory;
  }
  if ( *v95 == *(_DWORD *)(v95[1] + 4 * *(_DWORD *)(v3 + 10716)) )
  {
    v105 = 0;
    if ( *(_WORD *)(*(_DWORD *)(v3 + 312) + 66) > 0 )
    {
      v106 = 68;
      do
      {
        v107 = abs(*(signed __int16 *)(v106 + *(_DWORD *)(v3 + 312)));
        if ( v107 <= 5100 )
        {
          v108 = *(_DWORD **)(*(_DWORD *)(v3 + 6028) + 4 * v107 + 8008);
          if ( v108 )
          {
            if ( v108[66] && (*(int (__thiscall **)(_DWORD *))(*v108 + 4))(v108) == 13 && v108[78] < 0 )
              v108[66] = 0;
          }
        }
        ++v105;
        v106 += 4;
      }
      while ( v105 < *(signed __int16 *)(*(_DWORD *)(v3 + 312) + 66) );
    }
  }
  v109 = *(_DWORD *)(v3 + 312);
  v46 = *(_WORD *)(v109 + 66) == 0;
  v151 = *(_WORD *)(v109 + 66) < 0;
  v182 = 0;
  if ( !v151 && !v46 )
  {
    v110 = 68;
    do
    {
      v111 = abs(*(signed __int16 *)(*(_DWORD *)(v3 + 312) + v110));
      if ( v111 <= 5100 )
      {
        v112 = *(int **)(*(_DWORD *)(v3 + 6028) + 4 * v111 + 8008);
        if ( v112 )
        {
          if ( v112[37] )
          {
            v113 = v112 + 70;
            if ( (v112[70] ^ 0x12345678) >= 0 && v112[70] != 305419896 )
            {
              if ( !(*(int (__thiscall **)(int *))(*v112 + 12))(v112) || v112[37] >= 0 || v112[66] )
              {
                v114 = ((*v113 ^ 0x12345678) - *(_DWORD *)(v3 + 10824)) ^ 0x12345678;
                v115 = *v113;
                *v113 = v114;
                nullsub_3(v112 + 70, v115, v114);
              }
              if ( (*v113 ^ 0x12345678) < 0 || *v113 == 305419896 )
                (*(void (__stdcall **)(int))(*(_DWORD *)dword_56391C + 120))(v112[32]);
            }
          }
        }
      }
      v116 = *(signed __int16 *)(*(_DWORD *)(v3 + 312) + 66);
      v110 += 4;
      ++v182;
    }
    while ( v182 < v116 );
  }
  v117 = *(_DWORD *)(v3 + 27592);
  if ( v117 )
  {
    if ( (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v117 + 148))(v180, HIDWORD(v180)) )
      *(_DWORD *)(v3 + 27580) = 0;
    if ( (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 27592) + 72) + 4))() != 4 )
    {
      v118 = *(_DWORD **)(v3 + 27592);
      if ( v118[14] >= 5001 )
        (*(void (__stdcall **)(int))(*v118 + 156))(*(_DWORD *)(v3 + 10824) * *(_DWORD *)(480 * *(_DWORD *)(v3 + 264)
                                                                                       + v3
                                                                                       + 59914));
      v119 = *(_DWORD *)(*(_DWORD *)(v3 + 6012) + 4 * *(signed __int16 *)(*(_DWORD *)(v3 + 27588) + 96) + 4);
      if ( v119 )
        (*(void (__stdcall **)(int))(*(_DWORD *)v119 + 156))(*(_DWORD *)(v3 + 10824) * *(_DWORD *)(480
                                                                                                 * *(_DWORD *)(v3 + 264)
                                                                                                 + v3
                                                                                                 + 59606));
      if ( (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 27592) + 72) + 4))() != 3 )
      {
        v120 = *(_DWORD *)(v3 + 6056);
        v121 = sub_401BC2(
                 *(_DWORD *)(v3 + 248),
                 *(_DWORD *)(v3 + 252),
                 *(signed __int16 *)(*(_DWORD *)(v3 + 27588) + 100));
        v122 = (_DWORD *)v121;
        if ( v121 )
        {
          v123 = 300;
          if ( 100 * *(signed __int16 *)(v121 + 194) >= 300 )
            v123 = 100 * *(signed __int16 *)(v121 + 194);
          if ( Frequency.QuadPart )
          {
            QueryPerformanceCounter(&PerformanceCount);
            v125 = Frequency.s.LowPart;
            v126 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
          }
          else
          {
            v124 = GetTickCount();
            v125 = Frequency.s.LowPart;
            v126 = v124 / 0xA;
          }
          if ( abs(v126 - v122[98]) > v123 )
          {
            v127 = (_DWORD *)v122[93];
            if ( v127 )
            {
              sub_4A7120(v127, 0, 0, 0, 0);
              v125 = Frequency.s.LowPart;
            }
            if ( Frequency.s.HighPart | v125 )
            {
              QueryPerformanceCounter(&PerformanceCount);
              v128 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
            }
            else
            {
              v128 = GetTickCount() / 0xA;
            }
            v122[98] = v128;
            (*(void (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 128))(v122[1]);
          }
        }
      }
    }
    v129 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v3 + 27592) + 72) + 1064);
    if ( v129 )
      sub_401992(-(v129 * *(_DWORD *)(v3 + 10824)));
    if ( (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 27592) + 72) + 4))() == 4 )
    {
      v130 = Memory;
      v131 = *(_DWORD *)(v3 + 10716);
      v132 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *(_DWORD *)(v3 + 10708));
      v130[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v131);
      *(_DWORD *)(v130[1] + 4 * v131) = v132 ^ *v130;
      v130[4] ^= *(_DWORD *)(v130[1] + 4 * v131);
    }
    sub_40125D(v3);
    (*(void (**)(void))(**(_DWORD **)(v3 + 27592) + 220))();
    sub_402653(v3);
    (*(void (**)(void))(**(_DWORD **)(v3 + 27592) + 120))();
  }
  GetCursorPos((LPPOINT)&PerformanceCount);
  (*(void (__stdcall **)(int *))(**(_DWORD **)(v3 + 356) + 124))(&v193);
  if ( (signed int)PerformanceCount.s.LowPart < v193
    || (signed int)PerformanceCount.s.LowPart >= v195
    || PerformanceCount.s.HighPart < v194
    || PerformanceCount.s.HighPart >= v196 )
  {
    *(_DWORD *)(v3 + 10748) = 0;
  }
  if ( Frequency.QuadPart )
  {
    QueryPerformanceCounter(&v191);
    v133 = 100 * v191.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
  }
  else
  {
    v133 = GetTickCount() / 0xA;
  }
  if ( abs(v133 - *(_DWORD *)(v3 + 10832)) > 10 )
  {
    if ( Frequency.QuadPart )
    {
      QueryPerformanceCounter(&v191);
      v134 = 100 * v191.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
    }
    else
    {
      v134 = GetTickCount() / 0xA;
    }
    v135 = *(_DWORD *)(v3 + 6012);
    *(_DWORD *)(v3 + 10832) = v134;
    sub_401C71(v135);
  }
  if ( !*(_DWORD *)(v3 + 10748) || *((_DWORD *)dword_563918 + 2348) == 3 )
  {
    v136 = *(_DWORD *)(v3 + 27592);
    *(_DWORD *)(v3 + 10764) = -1;
    *(_DWORD *)(v3 + 10768) = -1;
    *(_DWORD *)(v3 + 10772) = -1;
    if ( v136 )
    {
      if ( !(*(int (**)(void))(*(_DWORD *)v136 + 148))() )
      {
        v137 = *(_DWORD *)(v3 + 6136);
        v138 = sub_40114F(*(_DWORD *)(v3 + 248), *(_DWORD *)(v3 + 252), *(_DWORD *)(v3 + 260));
        *(_DWORD *)(v3 + 10764) = v138;
        if ( v138 == -1 )
        {
          v139 = *(_DWORD *)(v3 + 6056);
          v140 = sub_4025C2(*(_DWORD *)(v3 + 248), *(_DWORD *)(v3 + 252), *(_DWORD *)(v3 + 260));
          *(_DWORD *)(v3 + 10772) = v140;
          if ( v140 == -1 )
          {
            v141 = *(_DWORD *)(v3 + 6012);
            *(_DWORD *)(v3 + 10768) = sub_4022DE(*(_DWORD *)(v3 + 248), *(_DWORD *)(v3 + 252), *(_DWORD *)(v3 + 260));
            goto LABEL_206;
          }
          v142 = *(_DWORD *)(v3 + 6056);
          v143 = sub_401780(v140);
          v144 = v143;
          if ( v143
            && (*(int (**)(void))(**(_DWORD **)(v143 + 4) + 4))() == 3
            && *(_DWORD *)(v3 + 58238)
            && (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 27592) + 72) + 4))() != 4 )
          {
            v145 = *((_DWORD *)dword_563908 + 6898) ? *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72)
                                                                + 1060) : 0;
            if ( sub_494C40((void *)(*(_DWORD *)(v144 + 16) + 164), *((_DWORD *)dword_563908 + 78) + 60, v145) )
            {
              v147 = *(_BYTE *)(*(_DWORD *)(v144 + 16) + 74);
              switch ( v147 )
              {
                case 0:
                  v148 = dword_563908;
                  v146 = *((_DWORD *)dword_563908 + 6897);
                  if ( *(_WORD *)(v144 + 14) == *(_WORD *)(v146 + 100) )
                    goto LABEL_206;
LABEL_178:
                  v153 = sub_401D39(v148, v146) - *(_DWORD *)(v144 + 24);
                  if ( (signed int)((HIDWORD(v153) ^ v153) - HIDWORD(v153)) > 150 )
                  {
                    v155 = sub_401D39(v154, HIDWORD(v153));
                    v156 = *(_DWORD *)(v144 + 4);
                    *(_DWORD *)(v144 + 24) = v155;
                    (*(void (__stdcall **)(_DWORD, signed int, signed int))(*(_DWORD *)dword_56391C + 72))(
                      *(_DWORD *)(v156 + 4),
                      1,
                      1);
                    v157 = *(_DWORD **)(*(_DWORD *)(v144 + 16) + 396);
                    if ( v157 )
                      sub_4A7120(v157, 0, 0, 0, 0);
                  }
                  goto LABEL_206;
                case 1:
                  v148 = dword_563908;
                  v149 = *((_DWORD *)dword_563908 + 6897);
                  LOWORD(v146) = *(_WORD *)(v144 + 14);
                  if ( (_WORD)v146 == *(_WORD *)(v149 + 100) )
                    goto LABEL_206;
                  v150 = *(_DWORD *)(v149 + 120);
                  v152 = __OFSUB__(v150, *(_DWORD *)((char *)dword_563908 + 58306));
                  v151 = v150 - *(_DWORD *)((char *)dword_563908 + 58306) < 0;
                  break;
                case 2:
                  v148 = (_DWORD *)*((_DWORD *)dword_563908 + 6897);
                  v146 = v148[30];
                  v152 = __OFSUB__(v146, *(_DWORD *)((char *)dword_563908 + 58306));
                  v151 = v146 - *(_DWORD *)((char *)dword_563908 + 58306) < 0;
                  break;
                default:
                  goto LABEL_206;
              }
              if ( v151 ^ v152 )
                goto LABEL_178;
            }
          }
        }
        else
        {
          v158 = *(_DWORD *)(v3 + 6136);
          v159 = sub_40209A(v138);
          v160 = v159;
          if ( v159
            && (*(_DWORD *)(*(_DWORD *)(v159 + 12) + 252) || *(_DWORD *)((char *)dword_563908 + 57742))
            && (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 27592) + 72) + 4))() != 4 )
          {
            if ( Frequency.QuadPart )
            {
              QueryPerformanceCounter(&v191);
              v161 = 100 * v191.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
            }
            else
            {
              v161 = GetTickCount() / 0xA;
            }
            v162 = v161 - *(_DWORD *)(v160 + 20);
            if ( (signed int)((HIDWORD(v162) ^ v162) - HIDWORD(v162)) > *(_DWORD *)(v3 + 57766) )
            {
              v163 = *(_DWORD *)(v160 + 12);
              v164 = *(signed __int16 *)(v163 + 168) - 3;
              switch ( *(_WORD *)(v163 + 168) )
              {
                case 3:
                  v167 = *(signed __int16 *)(v160 + 8);
                  break;
                case 4:
                  v168 = *(_DWORD *)(v163 + 128);
                  v169 = sub_402676(*(_DWORD *)(v163 + 128));
                  v170 = *(_DWORD *)(v3 + 27592);
                  if ( v170 )
                    v170 = *(_DWORD *)(v170 + 72);
                  LODWORD(v162) = sub_4953E0(
                                    v3 + 27892,
                                    *(_DWORD *)(v3 + 6028),
                                    v168,
                                    (signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 60),
                                    v170);
                  v167 = *(signed __int16 *)(v160 + 8);
                  LODWORD(v162) = v162 - v169;
                  v164 = ((signed int)v162 < 0) - 1;
                  LODWORD(v162) = v164 & v162;
                  if ( v167 >= (signed int)v162 )
                    v167 = v162;
                  break;
                case 5:
                  v165 = *(_DWORD *)(v163 + 128);
                  if ( sub_402676(*(_DWORD *)(v163 + 128)) )
                    goto LABEL_206;
                  v166 = *(_DWORD *)(v3 + 27592);
                  if ( v166 )
                    v166 = *(_DWORD *)(v166 + 72);
                  LODWORD(v162) = sub_4953E0(
                                    v3 + 27892,
                                    *(_DWORD *)(v3 + 6028),
                                    v165,
                                    (signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 60),
                                    v166);
                  v167 = *(signed __int16 *)(v160 + 8);
                  if ( v167 >= (signed int)v162 )
                    v167 = sub_4025EA(*(_DWORD *)(*(_DWORD *)(v160 + 12) + 128));
                  break;
                default:
                  goto LABEL_206;
              }
              if ( v167 > 0 )
              {
                *(_DWORD *)(v160 + 20) = sub_401D39(v164, HIDWORD(v162));
                v171 = *(_DWORD **)(v3 + 1452);
                if ( v171 )
                  sub_4A7120(v171, 0, 0, 0, 0);
                (*(void (__stdcall **)(_DWORD, signed int))(*(_DWORD *)dword_56391C + 32))(
                  *(signed __int16 *)(v160 + 4),
                  v167);
              }
            }
          }
        }
      }
    }
  }
LABEL_206:
  if ( Frequency.QuadPart )
  {
    QueryPerformanceCounter(&v191);
    v172 = 100 * v191.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
  }
  else
  {
    v172 = GetTickCount() / 0xA;
  }
  v173 = v172 - *(_DWORD *)(v3 + 10804);
  v174 = (HIDWORD(v173) ^ v173) - HIDWORD(v173);
  if ( v174 > 100 )
  {
    sub_4AA8F0(Memory);
    sub_401064(v3);
    v175 = *(_DWORD *)(v3 + 10808) - *(_DWORD *)(v3 + 10816);
    *(_DWORD *)(v3 + 10816) = *(_DWORD *)(v3 + 10808);
    *(_DWORD *)(v3 + 10812) = 100 * v175 / v174;
    if ( Frequency.QuadPart )
    {
      QueryPerformanceCounter(&v191);
      v176 = 100 * v191.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
    }
    else
    {
      v176 = GetTickCount() / 0xA;
    }
    v177 = *(_DWORD **)(v3 + 1912);
    *(_DWORD *)(v3 + 10804) = v176;
    if ( v177 )
    {
      if ( !sub_4A6390(v177, -1) )
      {
        v178 = *(void **)(v3 + 1912);
        if ( v178 )
        {
          sub_4A5F60(*(_DWORD **)(v3 + 1912));
          j__free(v178);
          *(_DWORD *)(v3 + 1912) = 0;
        }
      }
    }
    LODWORD(v173) = sub_4AA8C0(Memory);
    if ( !(_DWORD)v173 )
      LODWORD(v173) = (*(int (__stdcall **)(signed int, signed int, BYTE *))(*(_DWORD *)dword_56391C + 88))(
                        22,
                        8,
                        &Source);
  }
  return v173;
}
// 423CA0: could not find valid save-restore pair for ebx
// 423CA0: could not find valid save-restore pair for ebp
// 401064: using guessed type int __thiscall sub_401064(_DWORD);
// 40114F: using guessed type _DWORD __stdcall sub_40114F(_DWORD, _DWORD, _DWORD);
// 40125D: using guessed type int __thiscall sub_40125D(_DWORD);
// 4012E4: using guessed type int __thiscall sub_4012E4(_DWORD);
// 401410: using guessed type _DWORD __stdcall j_nullsub_5(_DWORD);
// 40141A: using guessed type _DWORD __stdcall sub_40141A(_DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401780: using guessed type _DWORD __stdcall sub_401780(_DWORD);
// 40198D: using guessed type _DWORD __stdcall sub_40198D(_DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);
// 401BC2: using guessed type _DWORD __stdcall sub_401BC2(_DWORD, _DWORD, _DWORD);
// 401C71: using guessed type int __thiscall sub_401C71(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401DF2: using guessed type _DWORD __stdcall sub_401DF2(_DWORD);
// 401FCD: using guessed type _DWORD __stdcall sub_401FCD(_DWORD);
// 40204A: using guessed type _DWORD __stdcall j_nullsub_9(_DWORD);
// 40209A: using guessed type _DWORD __stdcall sub_40209A(_DWORD);
// 4022DE: using guessed type _DWORD __stdcall sub_4022DE(_DWORD, _DWORD, _DWORD);
// 4024A5: using guessed type _DWORD __stdcall sub_4024A5(_DWORD);
// 402513: using guessed type int __thiscall sub_402513(_DWORD);
// 4025C2: using guessed type _DWORD __stdcall sub_4025C2(_DWORD, _DWORD, _DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 40264E: using guessed type _DWORD __stdcall sub_40264E(_DWORD);
// 402653: using guessed type int __thiscall sub_402653(_DWORD);
// 402658: using guessed type _DWORD __stdcall sub_402658(_DWORD);
// 402671: using guessed type _DWORD __stdcall sub_402671(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 4028D8: using guessed type int __thiscall sub_4028D8(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004257B0) --------------------------------------------------------
void __thiscall sub_4257B0(_DWORD *this)
{
  _DWORD *v1; // ebp
  int v2; // eax
  int v3; // esi
  int v4; // edx
  int v5; // ecx
  int v6; // eax
  int v7; // ecx
  int v8; // edx
  int v9; // ecx
  void *v10; // ebx
  void *v11; // eax
  int v12; // esi
  int v13; // eax
  int v14; // edx
  int v15; // ecx
  int v16; // eax
  signed int v17; // esi
  int v18; // eax
  int v19; // edi
  int v20; // edx
  int v21; // ecx
  signed int v22; // eax

  v1 = this;
  if ( this[6929] )
    return;
  if ( this[6937] != -1 )
  {
    v2 = this[6898];
    if ( !v2
      || (*(int (**)(void))(**(_DWORD **)(v2 + 72) + 4))() == 4
      || (v3 = (*(int (**)(void))(*(_DWORD *)v1[6898] + 108))(),
          v1[6937] + 100 * *(_DWORD *)((char *)&v1[120 * v3 + 14981] + 2) - sub_401D39(v5, v4) <= 0) )
    {
      v1[2682] = 1;
      v1[6937] = -1;
    }
  }
  if ( v1[2682] )
  {
    v1[2682] = 0;
    sub_401E4C("Changing arenas...");
    sub_401E33(v1);
    sub_402829(v1 + 2683);
    return;
  }
  v6 = !*(_BYTE *)(v1[1509] + 37920) || *((_DWORD *)dword_563918 + 2344);
  sub_4A9FB0((int *)dword_56390C, v6);
  v7 = v1[6898];
  if ( v7 )
    (*(void (**)(void))(*(_DWORD *)v7 + 64))();
  if ( dword_538460 )
    (*(void (__thiscall **)(_DWORD *))(*v1 + 32))(v1);
  if ( !(rand() & 0x7F) )
  {
    v10 = (void *)v1[78];
    v11 = operator new(0x7D4u);
    v1[78] = v11;
    qmemcpy(v11, v10, 0x7D4u);
    j__free(v10);
  }
  v12 = v1[2707];
  v13 = sub_401D39(v9, v8);
  v1[2707] = v13;
  v15 = (v13 - v12) & ((v13 - v12 < 0) - 1);
  v16 = v1[6898];
  v17 = v15;
  if ( v16
    && (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v16 + 72) + 4))(*(_DWORD *)(v16 + 72)) != 4
    && v17 >= v1[7714] )
  {
    (*(void (**)(void))(*(_DWORD *)dword_56391C + 92))();
  }
  if ( v1[6936] != -1 && v1[6936] <= sub_401D39(v15, v14) )
  {
    v1[6936] = 0;
    PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 0, 0);
    return;
  }
  if ( v1[6935] != -1 )
  {
    v18 = v1[6898];
    if ( v18 )
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v18 + 72) + 4))() != 4 )
      {
        v19 = (*(int (**)(void))(*(_DWORD *)v1[6898] + 108))();
        if ( v1[6935] + 100 * *(_DWORD *)((char *)&v1[120 * v19 + 14980] + 2) - sub_401D39(v21, v20) <= 0 )
        {
          v1[6935] = -1;
          (*(void (__stdcall **)(signed int))(*(_DWORD *)dword_56391C + 40))(-1);
        }
      }
    }
  }
  if ( v17 > 16 )
  {
    v17 = 16;
    goto LABEL_35;
  }
  while ( v17 > 0 )
  {
LABEL_35:
    v22 = 4;
    if ( v17 <= 4 )
      v22 = v17;
    v1[2705] += v22;
    v1[2706] = v22;
    v17 -= v22;
    sub_4019DD(v1);
  }
  if ( dword_538460 || !*((_DWORD *)dword_563918 + 2211) && *((_DWORD *)dword_563918 + 2233) )
    sub_4025F4(v1);
}
// 4019DD: using guessed type int __thiscall sub_4019DD(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401E33: using guessed type int __thiscall sub_401E33(_DWORD);
// 401E4C: using guessed type _DWORD __stdcall sub_401E4C(_DWORD);
// 4025F4: using guessed type int __thiscall sub_4025F4(_DWORD);
// 402829: using guessed type _DWORD __stdcall sub_402829(_DWORD);
// 538460: using guessed type int dword_538460;
// 56391C: using guessed type int dword_56391C;

//----- (00425AF0) --------------------------------------------------------
void sub_425AF0()
{
  srand(0xD205u);
}

//----- (00425B00) --------------------------------------------------------
int __thiscall sub_425B00(int this)
{
  int result; // eax

  if ( !*(_DWORD *)(this + 27716) )
    result = (*(int (**)(void))(**(_DWORD **)(this + 356) + 132))();
  return result;
}

//----- (00425B20) --------------------------------------------------------
int __thiscall sub_425B20(_DWORD **this, int a2)
{
  _DWORD **v2; // esi
  int result; // eax

  v2 = this;
  if ( this[622] )
    return (*(int (__stdcall **)(int))(*this[622] + 20))(a2);
  if ( this[6898] )
    result = (*(int (__stdcall **)(int))(*this[6898] + 296))(a2);
  if ( v2[1535] )
    result = (*(int (__thiscall **)(_DWORD *, int))(v2[1535][1] + 20))(v2[1535] + 1, a2);
  if ( v2[1509] )
    result = (*(int (__stdcall **)(int))(*v2[1509] + 20))(a2);
  if ( v2[1500] )
    result = (*(int (__thiscall **)(_DWORD *, int))(v2[1500][1] + 20))(v2[1500] + 1, a2);
  return result;
}

//----- (00425BD0) --------------------------------------------------------
SHORT __thiscall sub_425BD0(int this, int a2, int a3)
{
  int v3; // esi
  SHORT result; // ax

  v3 = this;
  if ( *(_DWORD *)(this + 2488) )
    return (*(int (__stdcall **)(int, int))(**(_DWORD **)(this + 2488) + 28))(a2, a3);
  if ( a2 == 44 && !sub_4014FB(*(_DWORD *)(this + 27588)) )
    sub_401CEE(v3);
  result = GetKeyState(16);
  if ( *(_DWORD *)(v3 + 6140) )
    result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)(*(_DWORD *)(v3 + 6140) + 4) + 28))(
               *(_DWORD *)(v3 + 6140) + 4,
               a2,
               a3);
  if ( *(_DWORD *)(v3 + 6036) )
    result = (*(int (__stdcall **)(int, int))(**(_DWORD **)(v3 + 6036) + 28))(a2, a3);
  if ( *(_DWORD *)(v3 + 6000) )
    result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)(*(_DWORD *)(v3 + 6000) + 4) + 28))(
               *(_DWORD *)(v3 + 6000) + 4,
               a2,
               a3);
  return result;
}
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401CEE: using guessed type int __thiscall sub_401CEE(_DWORD);

//----- (00425CA0) --------------------------------------------------------
int __fastcall sub_425CA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int v7; // eax
  int (__stdcall ***v8)(int, int, int, int); // ecx
  int result; // eax
  int (__stdcall ***v10)(int, int, int, int); // ecx
  int v11; // esi

  v6 = a1;
  v7 = sub_401D39(a1, a2);
  v8 = (int (__stdcall ***)(int, int, int, int))v6[622];
  v6[2687] = v7;
  v6[2688] = a3;
  v6[2689] = a4;
  v6[2690] = 0;
  if ( v8 )
    return (**v8)(a3, a4, a5, a6);
  result = v6[1535];
  if ( result )
    result = (**(int (__thiscall ***)(int, int, int, int, int))(result + 4))(result + 4, a3, a4, a5, a6);
  v10 = (int (__stdcall ***)(int, int, int, int))v6[1509];
  if ( v10 )
    result = (**v10)(a3, a4, a5, a6);
  v11 = v6[1500];
  if ( v11 )
    result = (**(int (__thiscall ***)(int, int, int, int, int))(v11 + 4))(v11 + 4, a3, a4, a5, a6);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00425D80) --------------------------------------------------------
void __thiscall sub_425D80(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  __int64 v5; // rax
  int v6; // ecx
  int v7; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // ecx

  v4 = this;
  if ( this[2700] )
  {
    this[2700] = 0;
  }
  else
  {
    v5 = a2 - this[2688];
    if ( abs((_DWORD)v5) > 1 || (v5 = a3 - this[2689], abs((_DWORD)v5) > 1) )
      this[2687] = sub_401D39(this, HIDWORD(v5));
    v6 = v4[622];
    v4[2688] = a2;
    v4[2689] = a3;
    v4[2690] = 0;
    if ( v6 )
    {
      (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v6 + 4))(a2, a3, a4);
    }
    else
    {
      v7 = v4[1535];
      if ( v7 )
        (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)(v7 + 4) + 4))(v7 + 4, a2, a3, a4);
      v8 = v4[1509];
      if ( v8 )
        (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v8 + 4))(a2, a3, a4);
      v9 = v4[1500];
      if ( v9 )
        (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)(v9 + 4) + 4))(v9 + 4, a2, a3, a4);
      v10 = v4[1505];
      if ( v10 )
        (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v10 + 4))(a2, a3, a4);
    }
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00425EA0) --------------------------------------------------------
int __fastcall sub_425EA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int result; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // ecx
  int v11; // ecx
  int v12; // esi

  v6 = a1;
  result = sub_401D39(a1, a2);
  v8 = v6[622];
  v6[2687] = result;
  v6[2688] = a3;
  v6[2689] = a4;
  if ( v8 )
    return (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v8 + 8))(a3, a4, a5, a6);
  v9 = v6[1535];
  if ( v9 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(v9 + 4) + 8))(v9 + 4, a3, a4, a5, a6);
  v10 = v6[1509];
  if ( v10 )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v10 + 8))(a3, a4, a5, a6);
  v11 = v6[1500];
  if ( v11 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(v11 + 4) + 8))(v11 + 4, a3, a4, a5, a6);
  v12 = v6[1505];
  if ( v12 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)v12 + 8))(v12, a3, a4, a5, a6);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00425FA0) --------------------------------------------------------
int __fastcall sub_425FA0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int result; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // ecx
  int v11; // ecx
  int v12; // esi

  v6 = a1;
  result = sub_401D39(a1, a2);
  v8 = v6[622];
  v6[2687] = result;
  v6[2688] = a3;
  v6[2689] = a4;
  if ( v8 )
    return (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v8 + 12))(a3, a4, a5, a6);
  v9 = v6[1535];
  if ( v9 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(v9 + 4) + 12))(v9 + 4, a3, a4, a5, a6);
  v10 = v6[1509];
  if ( v10 )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v10 + 12))(a3, a4, a5, a6);
  v11 = v6[1500];
  if ( v11 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(v11 + 4) + 12))(v11 + 4, a3, a4, a5, a6);
  v12 = v6[1505];
  if ( v12 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)v12 + 12))(v12, a3, a4, a5, a6);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004260A0) --------------------------------------------------------
int __fastcall sub_4260A0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int v7; // eax
  int v8; // ecx
  int result; // eax
  int v10; // ecx
  int v11; // esi

  v6 = a1;
  v7 = sub_401D39(a1, a2);
  v8 = v6[622];
  v6[2687] = v7;
  v6[2688] = a3;
  v6[2689] = a4;
  if ( v8 )
    return (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v8 + 16))(a3, a4, a5, a6);
  result = v6[1535];
  if ( result )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(result + 4) + 16))(result + 4, a3, a4, a5, a6);
  v10 = v6[1509];
  if ( v10 )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v10 + 16))(a3, a4, a5, a6);
  v11 = v6[1500];
  if ( v11 )
    result = (*(int (__thiscall **)(int, int, int, int, int))(*(_DWORD *)(v11 + 4) + 16))(v11 + 4, a3, a4, a5, a6);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00426170) --------------------------------------------------------
void __thiscall sub_426170(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // ecx
  int v8; // edi
  int v9; // ebx
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  int v12; // eax
  int v13; // ecx
  void *v14; // ST24_4
  int v15; // eax
  void *v16; // ST24_4
  int v17; // eax
  void *v18; // ST24_4
  int v19; // eax
  int v20; // eax
  int v21; // ecx
  int v22; // eax
  int v23; // ecx
  int v24; // eax
  int v25; // ecx
  int v26; // edx
  int v27; // ecx
  int v28; // eax
  int v29; // ecx
  void *v30; // ST24_4
  int v31; // eax
  void *v32; // ST24_4
  int v33; // eax
  bool v34; // zf
  int v35; // ecx
  int v36; // [esp+18h] [ebp-1Ch]
  int v37; // [esp+1Ch] [ebp-18h]
  int v38; // [esp+20h] [ebp-14h]
  int v39; // [esp+24h] [ebp-10h]
  int v40; // [esp+30h] [ebp-4h]

  v1 = this;
  if ( this[6929] )
    return;
  if ( !this[1509] )
  {
    v40 = 0;
    if ( operator new(0x9838u) )
      v2 = sub_4019D3(v1[89]);
    else
      v2 = 0;
    v40 = -1;
    v1[1509] = v2;
  }
  (*(void (**)(void))(*(_DWORD *)v1[89] + 112))();
  v3 = (*(int (**)(void))(*(_DWORD *)v1[89] + 156))();
  v4 = v1[89];
  v1[3097] = v3 + 1;
  v5 = *(_DWORD *)(v4 + 8) - 120;
  if ( v1[3109] > v5 )
    v1[3109] = v5;
  if ( v1[3109] < 32 )
    v1[3109] = 32;
  if ( sub_402428(*((_DWORD *)dword_563908 + 1509)) )
    v1[3108] = 0;
  else
    v1[3108] = v1[3109];
  if ( sub_40173A(*((_DWORD *)dword_563908 + 1500)) )
    v1[3106] = 0;
  else
    v1[3106] = v1[3110];
  v6 = v1[89];
  v7 = v1[90];
  v8 = *(_DWORD *)(v6 + 4);
  v9 = *(_DWORD *)(v6 + 8);
  if ( !v7 )
    goto LABEL_23;
  if ( v8 != *(_DWORD *)(v7 + 4) || v9 != *(_DWORD *)(v7 + 8) || !*(_DWORD *)((char *)v1 + 32934) )
  {
    if ( v7 )
    {
      (**(void (__stdcall ***)(signed int))v7)(1);
      v1[90] = 0;
    }
LABEL_23:
    if ( *(_DWORD *)((char *)v1 + 32934) )
    {
      v10 = operator new(0x2F0u);
      v40 = 1;
      if ( v10 )
      {
        v11 = sub_49FEF0(v10, v1[89], v8, v9, *((_DWORD *)dword_563918 + 2228));
        v40 = -1;
        v1[90] = v11;
      }
      else
      {
        v40 = -1;
        v1[90] = 0;
      }
    }
  }
  v12 = v1[89];
  v36 = 0;
  v38 = *(_DWORD *)(v12 + 4) - v1[3099];
  v37 = *(_DWORD *)(v12 + 8) - v1[3109];
  v13 = v1[1509];
  v39 = *(_DWORD *)(v12 + 8);
  sub_401582(&v36);
  if ( !v1[1500] )
  {
    v14 = operator new(0xC8u);
    v40 = 2;
    if ( v14 )
      v15 = sub_401C35(v1[89]);
    else
      v15 = 0;
    v40 = -1;
    v1[1500] = v15;
  }
  if ( !v1[1506] )
  {
    v16 = operator new(0x24u);
    v40 = 3;
    if ( v16 )
      v17 = sub_401C5D(v1[89]);
    else
      v17 = 0;
    v40 = -1;
    v1[1506] = v17;
  }
  if ( !v1[1505] )
  {
    v18 = operator new(0x38u);
    v40 = 4;
    if ( v18 )
      v19 = sub_401005(v1[89]);
    else
      v19 = 0;
    v40 = -1;
    v1[1505] = v19;
  }
  v20 = v1[89];
  v21 = v1[1506];
  v36 = *(_DWORD *)(v20 + 4) - v1[3110];
  v38 = *(_DWORD *)(v20 + 4);
  v37 = 0;
  v22 = sub_401771(v21);
  v23 = v1[1500];
  v39 = *(_DWORD *)(v1[89] + 8) - v1[3099] - v22;
  sub_401B18(&v36);
  v24 = v1[3105];
  v25 = v1[89];
  v1[3101] = v24;
  v1[3103] = *(_DWORD *)(v25 + 4) - v1[3106];
  v26 = v1[3107];
  v1[3102] = v26;
  v1[3104] = *(_DWORD *)(v25 + 8) - v1[3108];
  v27 = v1[3103] - v24;
  v28 = v1[3104];
  v1[3111] = v27;
  v29 = v1[1499];
  v1[3112] = v28 - v26;
  if ( v29 )
  {
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v29 + 8))(v1 + 3101);
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[1513] + 8))(v1 + 3101);
  }
  else
  {
    v30 = operator new(0x430u);
    v40 = 5;
    if ( v30 )
      v31 = sub_4012A8(v1[89], v1 + 3101);
    else
      v31 = 0;
    v40 = -1;
    v1[1499] = v31;
    v32 = operator new(0x40u);
    v40 = 6;
    if ( v32 )
      v33 = sub_401244(v1[89], v1 + 3101);
    else
      v33 = 0;
    v34 = v1[1535] == 0;
    v40 = -1;
    v1[1513] = v33;
    if ( v34 )
      v1[1535] = v1[1499];
  }
  v35 = v1[1535];
  if ( v35 )
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v35 + 8))(v1 + 3101);
}
// 401005: using guessed type _DWORD __stdcall sub_401005(_DWORD);
// 401244: using guessed type _DWORD __stdcall sub_401244(_DWORD, _DWORD);
// 4012A8: using guessed type _DWORD __stdcall sub_4012A8(_DWORD, _DWORD);
// 401582: using guessed type _DWORD __stdcall sub_401582(_DWORD);
// 40173A: using guessed type int __thiscall sub_40173A(_DWORD);
// 401771: using guessed type int __thiscall sub_401771(_DWORD);
// 4019D3: using guessed type _DWORD __stdcall sub_4019D3(_DWORD);
// 401B18: using guessed type _DWORD __stdcall sub_401B18(_DWORD);
// 401C35: using guessed type _DWORD __stdcall sub_401C35(_DWORD);
// 401C5D: using guessed type _DWORD __stdcall sub_401C5D(_DWORD);
// 402428: using guessed type int __thiscall sub_402428(_DWORD);

//----- (004266C0) --------------------------------------------------------
int __fastcall sub_4266C0(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // eax
  int v6; // ecx
  int result; // eax
  __int16 v8; // ax
  int v9; // edx
  int v10; // ecx
  int v11; // esi

  v4 = a1;
  if ( *((_DWORD *)dword_563918 + 2348) != 3 )
  {
    v5 = sub_401D39(a1, a2) - 1550;
    if ( *(_DWORD *)(v4 + 10748) > v5 )
      *(_DWORD *)(v4 + 10748) = v5;
  }
  v6 = *(_DWORD *)(v4 + 2488);
  if ( v6 )
    return (*(int (__stdcall **)(int, int))(*(_DWORD *)v6 + 24))(a3, a4);
  if ( *((_DWORD *)dword_56390C + 1586) )
  {
    if ( !sub_4014FB(*(_DWORD *)(v4 + 27588))
      || (v8 = *(_WORD *)(v4 + 30832), v8 != 1) && (v8 != 2 || *(_WORD *)(*(_DWORD *)(v4 + 312) + 568)) )
    {
      sub_401CEE(v4);
    }
    else
    {
      sub_4013F2(v4);
    }
  }
  if ( *((_DWORD *)dword_56390C + 1587) )
    sub_4013F2(v4);
  if ( *((_DWORD *)dword_56390C + 1588) )
    sub_40104B(v4);
  if ( *((_DWORD *)dword_56390C + 1603) )
    sub_401F3C(5);
  if ( *((_DWORD *)dword_56390C + 1571) )
    sub_40253B(v4);
  if ( *((_DWORD *)dword_56390C + 1585) )
  {
    if ( *(_DWORD *)(v4 + 12436) == *(_DWORD *)(*(_DWORD *)(v4 + 356) + 8) - 120 )
    {
      v9 = *(_DWORD *)(v4 + 12452);
      *(_DWORD *)(v4 + 12436) = *(_DWORD *)(*(_DWORD *)(v4 + 6036) + 448);
      *(_DWORD *)(v4 + 12440) = v9;
    }
    else
    {
      *(_DWORD *)(v4 + 12452) = *(_DWORD *)(v4 + 12440);
      *(_DWORD *)(v4 + 12436) = 2000;
      *(_DWORD *)(v4 + 12440) = 160;
    }
    sub_401965(dword_563908);
  }
  GetKeyState(16);
  GetKeyState(18);
  GetKeyState(17);
  result = *(_DWORD *)(v4 + 6140);
  if ( result )
    result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)(result + 4) + 24))(result + 4, a3, a4);
  v10 = *(_DWORD *)(v4 + 6036);
  if ( v10 )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v10 + 24))(a3, a4);
  v11 = *(_DWORD *)(v4 + 6000);
  if ( v11 )
    result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)(v11 + 4) + 24))(v11 + 4, a3, a4);
  return result;
}
// 40104B: using guessed type int __thiscall sub_40104B(_DWORD);
// 4013F2: using guessed type int __thiscall sub_4013F2(_DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401CEE: using guessed type int __thiscall sub_401CEE(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401F3C: using guessed type _DWORD __stdcall sub_401F3C(_DWORD);
// 40253B: using guessed type int __thiscall sub_40253B(_DWORD);

//----- (00426900) --------------------------------------------------------
int __thiscall sub_426900(_DWORD *this, unsigned int a2, const void *a3)
{
  int result; // eax
  _DWORD *v4; // ebx
  int v5; // ebp
  int v6; // ebp
  _DWORD *v7; // eax
  int v8; // ecx
  void *v9; // ST38_4
  int v10; // ecx
  char Dest; // [esp+18h] [ebp-210h]
  char v12; // [esp+118h] [ebp-110h]
  int v13; // [esp+224h] [ebp-4h]

  result = a2;
  v4 = this;
  if ( a2 <= 0x1387 )
  {
    v5 = *(_DWORD *)(this[1504] + 4 * a2 + 12408);
    if ( v5 )
    {
      v6 = v5 + 32;
      result = sub_4B4E20(*(_DWORD *)(this[1509] + 12), v6);
      if ( result == -1 )
      {
        if ( *((_DWORD *)dword_563908 + 1535) && (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 28))() == 7 )
        {
          qmemcpy(v4 + 3118, a3, 0x1B0u);
          sprintf(&Dest, "Confirm receive banner from: %s", v6);
          v7 = dword_563908;
          if ( *((_DWORD *)dword_563908 + 355) )
          {
            v8 = *((_DWORD *)dword_563908 + 355);
            if ( v8 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v8 + 36))(1);
              v7 = dword_563908;
            }
            v7[355] = 0;
          }
          v9 = operator new(0x1644u);
          v13 = 0;
          if ( v9 )
          {
            result = sub_402504(0, *((_DWORD *)dword_563908 + 1517), v4 + 1, &Dest, "Yes,No", 4, 0, 0, 0);
            *((_DWORD *)dword_563908 + 355) = result;
          }
          else
          {
            result = 0;
            *((_DWORD *)dword_563908 + 355) = 0;
          }
        }
        else
        {
          sprintf(
            &v12,
            "You have received a banner from %s that was ignored, you must be on banner-edit screen to receive it.",
            v6);
          v10 = v4[1509];
          result = sub_40273E((char *)&Source, 5, (int)&Source, (int)&v12, -1);
        }
      }
    }
  }
  return result;
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00426B30) --------------------------------------------------------
int __thiscall sub_426B30(_BYTE *this, LPCSTR lpFileName)
{
  _BYTE *v2; // esi
  int v3; // edi
  LPCSTR v4; // eax
  CHAR v5; // cl
  _DWORD *v6; // edi
  int v7; // ebp
  int *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // ecx
  int v11; // eax
  _DWORD *v12; // ecx
  int v13; // eax
  _DWORD *v14; // ecx
  int v15; // eax
  _DWORD *v16; // ecx
  int v17; // eax
  _DWORD *v18; // ecx
  int v19; // eax
  _DWORD *v20; // ecx
  int v21; // eax
  int v22; // eax
  _DWORD *v23; // ecx
  int v24; // edi
  __int16 *v25; // ebp
  char *v26; // eax
  char v27; // cl
  char *v28; // eax
  int v29; // ecx
  _DWORD *v30; // eax
  int v31; // ecx
  int v32; // edi
  _DWORD *v33; // eax
  int v34; // edi
  int v35; // ecx
  int v36; // edi
  int v37; // ecx
  _DWORD *v38; // eax
  char *v39; // eax
  int v40; // ecx
  char *v41; // eax
  bool v42; // zf
  int v43; // ecx
  __int16 v44; // dx
  __int16 v45; // dx
  int v46; // eax
  __int16 v47; // ax
  int v48; // eax
  __int16 v49; // ax
  int v50; // eax
  __int16 v51; // ax
  int v52; // eax
  __int16 v53; // ax
  char *v54; // eax
  _DWORD *v55; // eax
  int *v56; // eax
  int *v57; // eax
  char *v58; // eax
  int v59; // eax
  int v60; // eax
  char *v61; // eax
  _DWORD *v62; // eax
  char *v63; // eax
  int v64; // eax
  char *v65; // eax
  _DWORD *v66; // eax
  char *v67; // eax
  int v68; // eax
  int v69; // ecx
  const char *v71; // [esp-Ch] [ebp-148h]
  int v72; // [esp-8h] [ebp-144h]
  const char *v73; // [esp-4h] [ebp-140h]
  _DWORD *v74; // [esp+14h] [ebp-128h]
  char *v75; // [esp+18h] [ebp-124h]
  char v76; // [esp+1Ch] [ebp-120h]
  char Str[256]; // [esp+2Ch] [ebp-110h]
  int v78; // [esp+138h] [ebp-4h]

  v2 = this;
  v3 = this + 27876 - lpFileName;
  v4 = lpFileName;
  do
  {
    v5 = *v4;
    v4[v3] = *v4;
    ++v4;
  }
  while ( v5 );
  sub_4955D0(v2 + 27892, lpFileName, 0, 0);
  v6 = v2 + 6064;
  v7 = (int)(v2 + 28572);
  v75 = (char *)15;
  do
  {
    v74 = operator new(0xC1Cu);
    v78 = 0;
    if ( v74 )
    {
      v8 = (int *)sub_401F64(v7, &v76);
      v9 = sub_49A970(v74, 32, *v8, 0);
    }
    else
    {
      v9 = 0;
    }
    v74 = 0;
    LOWORD(v74) = 10;
    BYTE2(v74) = 0;
    v73 = (const char *)10;
    v72 = -1;
    v71 = (const char *)4;
    v78 = -1;
    *v6 = v9;
    sub_49AB20(v9, (int)v71, v72, (int)v73);
    v10 = (_DWORD *)*v6;
    v74 = 0;
    LOWORD(v74) = 251;
    BYTE2(v74) = 0;
    sub_49AB20(v10, 11, -1, 251);
    ++v6;
    v7 += 48;
    --v75;
  }
  while ( v75 );
  sub_401E4C("Loading user interface...");
  sub_401F64(v2 + 29292, v2 + 2092);
  sub_401F64(v2 + 29340, v2 + 2108);
  sub_401F64(v2 + 29388, v2 + 2124);
  sub_401F64(v2 + 29436, v2 + 2140);
  sub_401F64(v2 + 29484, v2 + 2156);
  sub_401F64(v2 + 29532, v2 + 2028);
  sub_401F64(v2 + 29580, v2 + 2044);
  sub_401F64(v2 + 29628, v2 + 2060);
  sub_401F64(v2 + 29676, v2 + 2076);
  sub_401F64(v2 + 29724, v2 + 2188);
  sub_401F64(v2 + 29772, v2 + 2204);
  sub_401F64(v2 + 29820, v2 + 2172);
  sub_401F64(v2 + 29868, v2 + 1916);
  sub_401F64(v2 + 29916, v2 + 1964);
  sub_401F64(v2 + 29964, v2 + 1980);
  sub_401F64(v2 + 30012, v2 + 1996);
  sub_401F64(v2 + 30060, v2 + 2012);
  sub_401F64(v2 + 30108, v2 + 1932);
  sub_401F64(v2 + 30540, v2 + 1948);
  v11 = sub_4B39E0(*((_DWORD **)v2 + 1515), v2 + 27892, 1, 0);
  v12 = (_DWORD *)*((_DWORD *)v2 + 1515);
  v73 = 0;
  *((_DWORD *)v2 + 356) = v11;
  v13 = sub_4B39E0(v12, v2 + 27940, 1, (int)v73);
  v73 = 0;
  v72 = 1;
  v71 = v2 + 27988;
  v14 = (_DWORD *)*((_DWORD *)v2 + 1515);
  *((_DWORD *)v2 + 357) = v13;
  v15 = sub_4B39E0(v14, v71, v72, (int)v73);
  v16 = (_DWORD *)*((_DWORD *)v2 + 1515);
  v73 = 0;
  v72 = 1;
  v71 = v2 + 28036;
  *((_DWORD *)v2 + 358) = v15;
  v17 = sub_4B39E0(v16, v71, v72, (int)v73);
  v18 = (_DWORD *)*((_DWORD *)v2 + 1515);
  v73 = 0;
  *((_DWORD *)v2 + 359) = v17;
  v19 = sub_4B39E0(v18, v2 + 28084, 1, (int)v73);
  v73 = 0;
  v72 = 1;
  v71 = v2 + 28132;
  v20 = (_DWORD *)*((_DWORD *)v2 + 1515);
  *((_DWORD *)v2 + 360) = v19;
  v21 = sub_4B39E0(v20, v71, v72, (int)v73);
  v73 = 0;
  *((_DWORD *)v2 + 361) = v21;
  v22 = sub_4B39E0(*((_DWORD **)v2 + 1515), v2 + 28180, 2, (int)v73);
  v23 = (_DWORD *)*((_DWORD *)v2 + 1515);
  v73 = 0;
  *((_DWORD *)v2 + 362) = v22;
  *((_DWORD *)v2 + 363) = sub_4B39E0(v23, v2 + 28228, 2, (int)v73);
  sub_401965(v2);
  v24 = 0;
  v25 = (__int16 *)(v2 + 200);
  do
  {
    *v25 = sub_49AE10(*((_DWORD **)v2 + 1516), v24++);
    ++v25;
  }
  while ( v24 < 15 );
  if ( *((_DWORD *)dword_563918 + 2226) && *((_DWORD *)v2 + 1509) )
  {
    v26 = v2 + 27876;
    do
    {
      v27 = *v26;
      v26[Str - (v2 + 27876)] = *v26;
      ++v26;
    }
    while ( v27 );
    v28 = strrchr(Str, 46);
    if ( v28 )
    {
      *(_DWORD *)v28 = 1667329326;
      v28[4] = 0;
    }
    v29 = *((_DWORD *)v2 + 1509);
    sub_40169F(Str);
  }
  v30 = Memory;
  v31 = *((_DWORD *)v2 + 2677);
  v32 = *(_DWORD *)(v2 + 57610);
  v30[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v31);
  *(_DWORD *)(v30[1] + 4 * v31) = v32 ^ *v30;
  v30[4] ^= *(_DWORD *)(v30[1] + 4 * v31);
  v33 = Memory;
  v34 = *(_DWORD *)(v2 + 57614);
  v35 = *((_DWORD *)v2 + 2678);
  v33[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v35);
  *(_DWORD *)(v33[1] + 4 * v35) = v34 ^ *v33;
  v33[4] ^= *(_DWORD *)(v33[1] + 4 * v35);
  v36 = *((_DWORD *)v2 + 7715);
  v37 = *((_DWORD *)v2 + 2680);
  v38 = Memory;
  v38[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v37);
  *(_DWORD *)(v38[1] + 4 * v37) = v36 ^ *v38;
  v38[4] ^= *(_DWORD *)(v38[1] + 4 * v37);
  sub_401E4C("Loading level...");
  v39 = (char *)operator new(0x1450u);
  v75 = v39;
  v78 = 1;
  if ( v39 )
  {
    v40 = *((_DWORD *)dword_563918 + 2214);
    v73 = (const char *)*((_DWORD *)dword_563918 + 2270);
    v72 = *(_DWORD *)(v2 + 57730);
    v71 = (const char *)v40;
    v41 = sub_4AC960(v39, *((_DWORD *)v2 + 89), v2 + 57826, v40, v72, (int)v73);
  }
  else
  {
    v41 = 0;
  }
  v42 = v2[57748] == 0;
  v78 = -1;
  *((_DWORD *)v2 + 1508) = v41;
  if ( !v42 || v2[57747] || v2[57746] )
    sub_4A3D00(0, *(_DWORD *)(v2 + 57746));
  if ( v2[57752] || v2[57751] || v2[57750] )
    sub_4A3D00(1, *(_DWORD *)(v2 + 57750));
  if ( v2[57756] || v2[57755] || v2[57754] )
    sub_4A3D00(2, *(_DWORD *)(v2 + 57754));
  if ( v2[57760] || v2[57759] || v2[57758] )
    sub_4A3D00(3, *(_DWORD *)(v2 + 57758));
  v43 = *(_DWORD *)(v2 + 57718);
  *(_WORD *)((char *)&v74 + 1) = 0;
  LOBYTE(v74) = 0;
  sub_4A4970(v43, (int)v74, 0);
  v44 = (unsigned __int8)(*((_WORD *)dword_563908 + 29685) >> 8) | (unsigned __int16)(32
                                                                                    * ((*(_DWORD *)((char *)dword_563908
                                                                                                  + 59370) >> 16) & 0xF8));
  if ( dword_576828 == 2 )
    v45 = v44 & 0xFFF8;
  else
    v45 = 2 * (v44 & 0xFFFC);
  *((_WORD *)v2 + 115) = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59370) >> 3) | 4 * v45;
  v46 = *(_DWORD *)((char *)dword_563908 + 59382);
  if ( dword_576828 == 2 )
    v47 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59382) >> 3) | 4
                                                                            * ((BYTE1(v46) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59382) >> 16) & 0xF8))) & 0xFFF8);
  else
    v47 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59382) >> 3) | 8
                                                                            * ((BYTE1(v46) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59382) >> 16) & 0xF8))) & 0xFFFC);
  *((_WORD *)v2 + 116) = v47;
  v48 = *(_DWORD *)((char *)dword_563908 + 59374);
  if ( dword_576828 == 2 )
    v49 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59374) >> 3) | 4
                                                                            * ((BYTE1(v48) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59374) >> 16) & 0xF8))) & 0xFFF8);
  else
    v49 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59374) >> 3) | 8
                                                                            * ((BYTE1(v48) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59374) >> 16) & 0xF8))) & 0xFFFC);
  *((_WORD *)v2 + 117) = v49;
  v50 = *(_DWORD *)((char *)dword_563908 + 59378);
  if ( dword_576828 == 2 )
    v51 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59378) >> 3) | 4
                                                                            * ((BYTE1(v50) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59378) >> 16) & 0xF8))) & 0xFFF8);
  else
    v51 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59378) >> 3) | 8
                                                                            * ((BYTE1(v50) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59378) >> 16) & 0xF8))) & 0xFFFC);
  *((_WORD *)v2 + 118) = v51;
  v52 = *(_DWORD *)((char *)dword_563908 + 59366);
  if ( dword_576828 == 2 )
    v53 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59366) >> 3) | 4
                                                                            * ((BYTE1(v52) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59366) >> 16) & 0xF8))) & 0xFFF8);
  else
    v53 = ((unsigned __int8)*(_DWORD *)((char *)dword_563908 + 59366) >> 3) | 8
                                                                            * ((BYTE1(v52) | (unsigned __int16)(32 * ((*(_DWORD *)((char *)dword_563908 + 59366) >> 16) & 0xF8))) & 0xFFFC);
  v73 = "Loading weapons...";
  *((_WORD *)v2 + 119) = v53;
  sub_401E4C(v73);
  v54 = (char *)operator new(0x6EFCu);
  v75 = v54;
  v78 = 2;
  if ( v54 )
    v55 = sub_493CB0(v54, v2 + 57882, (int)(v2 + 8));
  else
    v55 = 0;
  v78 = -1;
  *((_DWORD *)v2 + 1507) = v55;
  sub_493D00(v55);
  sub_401E4C("Loading vehicles...");
  v56 = (int *)operator new(0x7D8u);
  v75 = (char *)v56;
  v78 = 3;
  if ( v56 )
    v57 = sub_4B3450(v56, v2 + 57854, (int)(v2 + 8));
  else
    v57 = 0;
  v78 = -1;
  *((_DWORD *)v2 + 1511) = v57;
  sub_4B3480(v57);
  if ( *(_DWORD *)(v2 + 58554) > 0 )
  {
    v58 = (char *)operator new(0x28u);
    v75 = v58;
    v78 = 4;
    if ( v58 )
      v59 = sub_40289C(v58);
    else
      v59 = 0;
    v78 = -1;
    *((_DWORD *)v2 + 1501) = v59;
  }
  v75 = (char *)operator new(0x1E4C8u);
  v78 = 5;
  if ( v75 )
  {
    v73 = (const char *)*((_DWORD *)v2 + 1511);
    v60 = sub_401D84(v73);
  }
  else
  {
    v60 = 0;
  }
  v73 = (const char *)8008;
  v78 = -1;
  *((_DWORD *)v2 + 1503) = v60;
  v61 = (char *)operator new((size_t)v73);
  v75 = v61;
  v78 = 6;
  if ( v61 )
    v62 = sub_48EBC0(v61, v2 + 57910, (int)(v2 + 8));
  else
    v62 = 0;
  v73 = (const char *)12292;
  v78 = -1;
  *((_DWORD *)v2 + 1512) = v62;
  v63 = (char *)operator new((size_t)v73);
  v75 = v63;
  v78 = 7;
  if ( v63 )
    v64 = sub_401F69(v63);
  else
    v64 = 0;
  v73 = (const char *)16200;
  v78 = -1;
  *((_DWORD *)v2 + 1534) = v64;
  v65 = (char *)operator new((size_t)v73);
  v75 = v65;
  v78 = 8;
  if ( v65 )
    v66 = sub_4AFD10(v65, v2 + 57938, (int)(v2 + 8));
  else
    v66 = 0;
  v78 = -1;
  *((_DWORD *)v2 + 1531) = v66;
  sub_4AFD60(v66);
  sub_4AFBA0(
    *((_DWORD **)v2 + 1531),
    *(_DWORD *)(*((_DWORD *)v2 + 1508) + 2072),
    *(_DWORD *)(*((_DWORD *)v2 + 1508) + 2076));
  v67 = (char *)operator new(0x7B4Cu);
  v75 = v67;
  v78 = 9;
  if ( v67 )
    v68 = sub_40203B(v67);
  else
    v68 = 0;
  v73 = v2 + 25756;
  v72 = (int)(v2 + 58426);
  v78 = -1;
  *((_DWORD *)v2 + 1514) = v68;
  sub_401F64(v72, v73);
  sub_401F64(v2 + 53502, v2 + 27780);
  sub_401F64(v2 + 53586, v2 + 27796);
  sub_401F64(v2 + 53670, v2 + 27812);
  v69 = *(_DWORD *)(v2 + 32938);
  v73 = *(const char **)(v2 + 32942);
  v72 = v69;
  sub_4B3AA0(*((_DWORD **)v2 + 1502), v69, (int)v73);
  return sub_401E4C("Downloading game state...");
}
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401D84: using guessed type _DWORD __stdcall sub_401D84(_DWORD);
// 401E4C: using guessed type _DWORD __stdcall sub_401E4C(_DWORD);
// 401F64: using guessed type _DWORD __stdcall sub_401F64(_DWORD, _DWORD);
// 401F69: using guessed type int __thiscall sub_401F69(_DWORD);
// 40289C: using guessed type int __thiscall sub_40289C(_DWORD);
// 576828: using guessed type int dword_576828;
// 426B30: using guessed type char Str[256];

//----- (00427980) --------------------------------------------------------
int __thiscall sub_427980(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ebx
  int i; // edi
  int v4; // eax
  int result; // eax
  int j; // edi
  int v7; // ecx

  v1 = this;
  v2 = this[1507];
  for ( i = 0; i < *(_DWORD *)(v2 + 8000); ++i )
  {
    v4 = sub_401FAF(v1);
    *(_DWORD *)(*(_DWORD *)(v1[1507] + 4 * i) + 252) = sub_494C40(
                                                         (void *)(*(_DWORD *)(v2 + 4 * i) + 8),
                                                         v1[78] + 60,
                                                         v4);
    v2 = v1[1507];
  }
  result = v1[1511];
  for ( j = 0; j < *(_DWORD *)(result + 2000); ++j )
  {
    if ( *((_DWORD *)dword_563908 + 6898) )
      v7 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060);
    else
      v7 = 0;
    *(_DWORD *)(*(_DWORD *)(v1[1511] + 4 * j) + 1460) = sub_494C40(
                                                          (void *)(*(_DWORD *)(result + 4 * j) + 916),
                                                          v1[78] + 60,
                                                          v7);
    result = v1[1511];
  }
  return result;
}
// 401FAF: using guessed type int __thiscall sub_401FAF(_DWORD);

//----- (00427A90) --------------------------------------------------------
int __thiscall sub_427A90(_DWORD *this, const void *a2)
{
  _DWORD *v2; // ebx
  void *v3; // eax
  __int16 v4; // ax
  int v5; // ecx
  unsigned int v6; // eax
  _DWORD *v7; // ecx
  char *v8; // edx
  int v9; // esi
  int v10; // eax
  unsigned __int8 *v11; // ecx
  unsigned __int8 *v12; // edx
  int v13; // eax
  unsigned __int8 *v14; // ecx
  unsigned __int8 *v15; // edx
  unsigned __int8 *v16; // ecx
  unsigned __int8 *v17; // edx
  signed int v18; // eax
  int v19; // esi
  signed int i; // edi
  int v21; // ecx
  _DWORD *v22; // ecx
  signed int v23; // eax
  int v24; // ecx
  int v25; // ecx
  int v26; // ecx
  int result; // eax
  _DWORD *v28; // [esp+10h] [ebp-7A8h]
  int v29; // [esp+14h] [ebp-7A4h]
  char v30; // [esp+18h] [ebp-7A0h]
  __int16 v31; // [esp+1Eh] [ebp-79Ah]
  __int16 v32; // [esp+20h] [ebp-798h]
  __int16 v33[249]; // [esp+22h] [ebp-796h]
  __int16 v34; // [esp+214h] [ebp-5A4h]
  char v35; // [esp+216h] [ebp-5A2h]

  v2 = this;
  v29 = sub_402941(this[1500]);
  v3 = (void *)(v2[78] + 60);
  qmemcpy(&v30, v3, 0x796u);
  qmemcpy(v3, a2, 0x796u);
  v4 = *(_WORD *)(v2[78] + 568);
  if ( v4 && v4 == v34 )
  {
    v5 = v2[78];
    v6 = 2 * *(signed __int16 *)(v5 + 568);
    v7 = (_DWORD *)(v5 + 570);
    v8 = &v35;
    if ( v6 < 4 )
    {
LABEL_6:
      if ( !v6 )
        goto LABEL_16;
    }
    else
    {
      while ( *(_DWORD *)v8 == *v7 )
      {
        v6 -= 4;
        ++v7;
        v8 += 4;
        if ( v6 < 4 )
          goto LABEL_6;
      }
    }
    v9 = (unsigned __int8)*v8 - *(unsigned __int8 *)v7;
    if ( *v8 != *(_BYTE *)v7 )
      goto LABEL_35;
    v10 = v6 - 1;
    v11 = (unsigned __int8 *)v7 + 1;
    v12 = (unsigned __int8 *)(v8 + 1);
    if ( v10 )
    {
      v9 = *v12 - *v11;
      if ( *v12 != *v11
        || (v13 = v10 - 1, v14 = v11 + 1, v15 = v12 + 1, v13)
        && ((v9 = *v15 - *v14, *v15 != *v14)
         || (v16 = v14 + 1, v17 = v15 + 1, v13 != 1) && (v9 = *v17 - *v16, *v17 != *v16)) )
      {
LABEL_35:
        v18 = 1;
        if ( v9 <= 0 )
          v18 = -1;
LABEL_17:
        if ( !v18 )
          goto LABEL_19;
        goto LABEL_18;
      }
    }
LABEL_16:
    v18 = 0;
    goto LABEL_17;
  }
LABEL_18:
  sub_4015BE(v2);
LABEL_19:
  v19 = v2[78];
  for ( i = 0; i < *(signed __int16 *)(v19 + 66); ++i )
  {
    v21 = v2[1507];
    v22 = (_DWORD *)sub_4028EC(*(signed __int16 *)(v19 + 4 * i + 68));
    v28 = v22;
    if ( v22 )
    {
      v23 = 0;
      if ( v31 > 0 )
      {
        v24 = v22[32];
        do
        {
          if ( v24 == *(&v32 + 2 * v23) && *(_WORD *)(v19 + 4 * i + 70) >= v33[2 * v23] )
            break;
          ++v23;
        }
        while ( v23 < v31 );
        v22 = v28;
      }
      if ( v23 == v31 )
      {
        sub_401465(abs(v22[37]));
        if ( (*(int (__thiscall **)(_DWORD *))(*v28 + 12))(v28) )
          v28[66] = v28[90] != 0;
      }
    }
    v19 = v2[78];
  }
  sub_401F4B(v2);
  sub_401B9F(v2);
  v25 = v2[1500];
  sub_4023D8(v29);
  sub_401064(v2);
  v26 = v2[1500];
  result = sub_40178A(2);
  if ( v2[1535] )
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2[1535] + 8))(v2[1535], 0);
  return result;
}
// 401064: using guessed type int __thiscall sub_401064(_DWORD);
// 401465: using guessed type _DWORD __stdcall sub_401465(_DWORD);
// 4015BE: using guessed type int __thiscall sub_4015BE(_DWORD);
// 40178A: using guessed type _DWORD __stdcall sub_40178A(_DWORD);
// 401B9F: using guessed type int __thiscall sub_401B9F(_DWORD);
// 401F4B: using guessed type int __thiscall sub_401F4B(_DWORD);
// 4023D8: using guessed type _DWORD __stdcall sub_4023D8(_DWORD);
// 4028EC: using guessed type _DWORD __stdcall sub_4028EC(_DWORD);
// 402941: using guessed type int __thiscall sub_402941(_DWORD);
// 427A90: using guessed type __int16 var_796[249];

//----- (00427D60) --------------------------------------------------------
int __thiscall sub_427D60(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ecx

  v4 = this[1510];
  return sub_40245F(a2, a4, a3, 0, 0);
}
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00427D90) --------------------------------------------------------
int __thiscall sub_427D90(int **this)
{
  int **v1; // esi
  int result; // eax

  v1 = this;
  result = sub_4A73E0(this[352]);
  v1[6939] = 0;
  return result;
}

//----- (00427DB0) --------------------------------------------------------
int __stdcall sub_427DB0(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  return sub_402590(a6, 0, a1, a2, a3, 0, 0, 0, 0, a4, a5, 5, 0, a7, 0, 0, 0, 0);
}
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00427E10) --------------------------------------------------------
void __thiscall sub_427E10(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  signed int v4; // eax
  signed __int16 *v5; // edi
  _DWORD *v6; // eax
  int v7; // ecx

  v3 = this;
  if ( this[6897] )
  {
    v4 = abs(a2);
    if ( v4 <= 5100 )
    {
      v5 = *(signed __int16 **)(this[1507] + 4 * v4 + 8008);
      if ( v5 )
      {
        if ( (*(int (__thiscall **)(signed __int16 *))(*(_DWORD *)v5 + 4))(v5) == 1 )
        {
          sub_401992(a3 * v5[148]);
          v6 = (_DWORD *)v3[6898];
          if ( v6 && v6[14] >= 5001 )
            (*(void (__stdcall **)(int))(*v6 + 164))(1000 * a3 * v5[149]);
          v7 = *(_DWORD *)(v3[1503] + 4 * *(signed __int16 *)(v3[6897] + 96) + 4);
          if ( v7 )
            (*(void (__stdcall **)(int))(*(_DWORD *)v7 + 164))(1000 * a3 * v5[166]);
        }
      }
    }
  }
}
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);

//----- (00427F10) --------------------------------------------------------
int __thiscall sub_427F10(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // eax
  int v5; // esi
  signed int v6; // edi
  int v7; // ecx
  int result; // eax
  int v9; // ecx

  v3 = this;
  if ( a2 == -1 )
  {
    v4 = this[1514];
    v5 = 0;
    if ( *(_DWORD *)(v4 + 27436) > 0 )
    {
      v6 = 26412;
      do
      {
        v7 = *(_DWORD *)(v6 + v4);
        sub_401357(a3);
        v4 = v3[1514];
        ++v5;
        v6 += 4;
      }
      while ( v5 < *(_DWORD *)(v4 + 27436) );
    }
    result = sub_4013E8(*((_DWORD *)dword_563908 + 1514));
  }
  else
  {
    v9 = *((_DWORD *)dword_563908 + 1514);
    result = sub_40164F(a2);
    if ( result )
    {
      sub_401357(a3);
      result = sub_4013E8(*((_DWORD *)dword_563908 + 1514));
    }
  }
  return result;
}
// 401357: using guessed type _DWORD __stdcall sub_401357(_DWORD);
// 4013E8: using guessed type int __thiscall sub_4013E8(_DWORD);
// 40164F: using guessed type _DWORD __stdcall sub_40164F(_DWORD);

//----- (00427FD0) --------------------------------------------------------
int __stdcall sub_427FD0(int a1, int a2)
{
  int v2; // ecx
  int result; // eax

  v2 = *((_DWORD *)dword_563908 + 1514);
  result = sub_401780(a1);
  if ( result )
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)result + 8))(result, a2);
  return result;
}
// 401780: using guessed type _DWORD __stdcall sub_401780(_DWORD);

//----- (00428010) --------------------------------------------------------
int __thiscall sub_428010(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // edi
  int v4; // eax
  int v5; // ecx
  int v6; // ebx
  int v7; // eax
  void (__thiscall ***v8)(_DWORD, signed int, _DWORD); // esi
  int v9; // ecx

  v3 = this;
  v4 = sub_402086(*((_DWORD *)dword_563908 + 1500));
  v5 = v3[1504];
  v6 = v4;
  sub_401DE8(a2, a3);
  v7 = v3[1500];
  v8 = (void (__thiscall ***)(_DWORD, signed int, _DWORD))(v7 + 8);
  *(_DWORD *)(v7 + 60) = 1;
  (**(void (__thiscall ***)(int, signed int, _DWORD))(v7 + 8))(v7 + 8, 1, 0);
  (**v8)(v8, 2, 0);
  v9 = v3[1500];
  return sub_401758(v6);
}
// 401758: using guessed type _DWORD __stdcall sub_401758(_DWORD);
// 401DE8: using guessed type _DWORD __stdcall sub_401DE8(_DWORD, _DWORD);
// 402086: using guessed type int __thiscall sub_402086(_DWORD);

//----- (00428090) --------------------------------------------------------
int __thiscall sub_428090(_DWORD **this, void *Src, int a3)
{
  _DWORD *v3; // esi
  int result; // eax
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // ecx

  v3 = this;
  result = (*(int (**)(void))(*this[1535] + 24))();
  if ( result )
  {
    v5 = a3;
    v3[6443] = 2;
    if ( a3 >= 100 )
      v5 = 100;
    v3[1498] = v5;
    memcpy(v3 + 623, Src, 35 * v5);
    if ( (*(int (**)(void))(*(_DWORD *)v3[1535] + 28))() != 1 )
    {
      if ( (*(int (**)(void))(*(_DWORD *)v3[1535] + 20))() )
      {
        v6 = v3[1535];
        if ( v6 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 4))(1);
          v3[1535] = 0;
        }
      }
      if ( operator new(0x2Cu) )
        v7 = sub_401591(*((_DWORD *)dword_563908 + 89), (char *)dword_563908 + 12404);
      else
        v7 = 0;
      v3[1535] = v7;
    }
    v8 = v3[1535];
    result = sub_401154(9);
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (004281F0) --------------------------------------------------------
int __thiscall sub_4281F0(_DWORD **this, void *Src, int a3)
{
  _DWORD *v3; // esi
  int result; // eax
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // ecx

  v3 = this;
  result = (*(int (**)(void))(*this[1535] + 24))();
  if ( result )
  {
    v5 = a3;
    v3[6443] = 2;
    if ( a3 >= 25 )
      v5 = 25;
    v3[1955] = v5;
    memcpy(v3 + 1536, Src, 67 * v5);
    if ( (*(int (**)(void))(*(_DWORD *)v3[1535] + 28))() != 1 )
    {
      if ( (*(int (**)(void))(*(_DWORD *)v3[1535] + 20))() )
      {
        v6 = v3[1535];
        if ( v6 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v6 + 4))(1);
          v3[1535] = 0;
        }
      }
      if ( operator new(0x2Cu) )
        v7 = sub_401591(*((_DWORD *)dword_563908 + 89), (char *)dword_563908 + 12404);
      else
        v7 = 0;
      v3[1535] = v7;
    }
    v8 = v3[1535];
    result = sub_401154(15);
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (00428350) --------------------------------------------------------
void __thiscall sub_428350(_DWORD *this, char a2, int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  if ( this[6897] )
  {
    if ( a2 & 1 )
      sub_40279D(this);
    if ( v3[6898] )
    {
      if ( a2 & 2 )
      {
        if ( (*(int (**)(void))(*(_DWORD *)v3[6898] + 168))() <= 0 )
          sub_4023B0(v3);
        (*(void (**)(void))(*(_DWORD *)v3[6898] + 132))();
      }
      if ( a2 & 4 )
        (*(void (**)(void))(*(_DWORD *)v3[6898] + 20))();
    }
    if ( a3 != -1 )
      sub_402748(1000 * a3);
  }
}
// 4023B0: using guessed type int __thiscall sub_4023B0(_DWORD);
// 402748: using guessed type _DWORD __stdcall sub_402748(_DWORD);
// 40279D: using guessed type int __thiscall sub_40279D(_DWORD);

//----- (00428400) --------------------------------------------------------
int __thiscall sub_428400(_DWORD **this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  _DWORD **v10; // esi
  int result; // eax

  v10 = this;
  if ( this[6898] )
  {
    if ( a7 != -1 )
      (*(void (__stdcall **)(int, int, int, int))(*this[6898] + 100))(1000 * a7, 10 * a8, 10 * a9, 10 * a10);
    result = (*(int (__stdcall **)(int, int, int, int, int))(*v10[6898] + 128))(a2, a3, a4, a5, a6);
  }
  return result;
}

//----- (004284A0) --------------------------------------------------------
int __thiscall sub_4284A0(_DWORD **this, int a2, int a3)
{
  int result; // eax

  if ( this[6898] )
    result = (*(int (__stdcall **)(int, int))(*this[6898] + 124))(a2, a3);
  return result;
}

//----- (004284C0) --------------------------------------------------------
void __fastcall sub_4284C0(int a1, int a2, char *a3)
{
  int v3; // ecx
  __int16 v4; // ax
  int v5; // esi
  unsigned int v6; // eax
  _DWORD *v7; // ecx
  _DWORD *v8; // edx
  int v9; // edi
  int v10; // eax
  unsigned __int8 *v11; // ecx
  unsigned __int8 *v12; // edx
  int v13; // eax
  unsigned __int8 *v14; // ecx
  unsigned __int8 *v15; // edx
  unsigned __int8 *v16; // ecx
  unsigned __int8 *v17; // edx
  signed int v18; // eax
  int *v19; // ecx
  int v20; // ecx
  int v21; // edx
  int v22; // eax
  int v23; // ecx
  int v24; // eax
  int v25; // edx
  int v26; // eax
  bool v27; // zf
  int v28; // eax
  int v29; // edi
  int v30; // eax
  int v31; // eax
  int v32; // ecx

  v3 = *(_DWORD *)(a1 + 6004);
  if ( !v3 )
    return;
  v32 = *(_DWORD *)(v3 + 4 * *a3 + 20);
  v4 = *(_WORD *)(a3 + 13);
  v5 = v32;
  if ( v4 >= 0 && v4 == *(_DWORD *)(v32 + 64) && !*(_DWORD *)(a3 + 17) )
    return;
  *(_DWORD *)(v32 + 64) = -1;
  *(_DWORD *)(v32 + 48) = sub_401D39(v32, a2);
  v6 = 21;
  v7 = (_DWORD *)v5;
  v8 = a3;
  do
  {
    if ( *v8 != *v7 )
      goto LABEL_9;
    v6 -= 4;
    ++v7;
    ++v8;
  }
  while ( v6 >= 4 );
  if ( !v6 )
  {
LABEL_18:
    v18 = 0;
    goto LABEL_19;
  }
LABEL_9:
  v9 = *(unsigned __int8 *)v8 - *(unsigned __int8 *)v7;
  if ( *(unsigned __int8 *)v8 == *(unsigned __int8 *)v7 )
  {
    v10 = v6 - 1;
    v11 = (unsigned __int8 *)v7 + 1;
    v12 = (unsigned __int8 *)v8 + 1;
    if ( !v10 )
      goto LABEL_18;
    v9 = *v12 - *v11;
    if ( *v12 == *v11 )
    {
      v13 = v10 - 1;
      v14 = v11 + 1;
      v15 = v12 + 1;
      if ( !v13 )
        goto LABEL_18;
      v9 = *v15 - *v14;
      if ( *v15 == *v14 )
      {
        v16 = v14 + 1;
        v17 = v15 + 1;
        if ( v13 == 1 )
          goto LABEL_18;
        v9 = *v17 - *v16;
        if ( *v17 == *v16 )
          goto LABEL_18;
      }
    }
  }
  v18 = 1;
  if ( v9 <= 0 )
    v18 = -1;
LABEL_19:
  if ( v18 )
  {
    if ( !*(_DWORD *)(a3 + 17) )
      goto LABEL_38;
    if ( !*(_DWORD *)(v5 + 17) && (*(_WORD *)(a3 + 1) || *(_WORD *)(a3 + 3)) )
    {
      v19 = *(int **)(v5 + 104);
      if ( v19 )
        sub_4A6E90(v19, *(signed __int16 *)(a3 + 7), *(signed __int16 *)(a3 + 9), 0, 0, 0, 0, 0);
    }
    if ( !*(_DWORD *)(a3 + 17) )
    {
LABEL_38:
      if ( *(_WORD *)(a3 + 13) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 96)
        && ((*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1)
                                           + 4 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1501) + 4))) < 0
         || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1)
                                           + 4 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1501) + 4)))
        && *((_DWORD *)dword_563908 + 6898) )
      {
        (*(void (__thiscall **)(_DWORD))(**((_DWORD **)dword_563908 + 6898) + 256))(*((_DWORD *)dword_563908 + 6898));
      }
    }
    *(_DWORD *)(v5 + 52) = 0;
    *(double *)(v5 + 80) = 1000000.0;
    *(_DWORD *)(v5 + 56) = 0;
    *(_DWORD *)(v5 + 60) = 0;
    *(_DWORD *)v5 = *(_DWORD *)a3;
    *(_DWORD *)(v5 + 4) = *((_DWORD *)a3 + 1);
    *(_DWORD *)(v5 + 8) = *((_DWORD *)a3 + 2);
    *(_DWORD *)(v5 + 12) = *((_DWORD *)a3 + 3);
    *(_DWORD *)(v5 + 16) = *((_DWORD *)a3 + 4);
    *(_BYTE *)(v5 + 20) = a3[20];
    v20 = 10000 * *(signed __int16 *)(v5 + 7);
    v21 = 10000 * *(signed __int16 *)(v5 + 9);
    *(_DWORD *)(v5 + 32) = 10000 * *(signed __int16 *)(v5 + 11);
    v22 = *(signed __int16 *)(v5 + 1);
    *(_DWORD *)(v5 + 24) = v20;
    v23 = 5 * v22;
    v24 = *(signed __int16 *)(v5 + 3);
    *(_DWORD *)(v5 + 28) = v21;
    v25 = 10 * v24;
    v26 = 10 * *(signed __int16 *)(v5 + 5);
    v27 = *(_DWORD *)(v5 + 17) == 0;
    *(_DWORD *)(v5 + 36) = 2 * v23;
    *(_DWORD *)(v5 + 40) = v25;
    *(_DWORD *)(v5 + 44) = v26;
    if ( !v27 )
    {
      v28 = (*(int (**)(void))(*(_DWORD *)dword_56391C + 156))();
      if ( v28 )
      {
        v29 = *(_DWORD *)(v5 + 17);
        v30 = sub_402284(v28);
        v31 = sub_480F90(v29, v30) / 10;
        if ( v31 > 8000 )
          v31 = 8000;
        sub_401C0D(v31);
      }
    }
  }
}
// 401C0D: using guessed type _DWORD __stdcall sub_401C0D(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402284: using guessed type int __thiscall sub_402284(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004284E0) --------------------------------------------------------
int __thiscall sub_4284E0(int this, int a2, int a3, int a4)
{
  int v4; // edi
  int v5; // esi
  int v6; // ecx
  int v7; // eax

  v4 = 0;
  v5 = this;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      v7 = sub_4949C0(
             a3,
             (_BYTE *)(this + 27892),
             *(char **)(this + 6028),
             *(_DWORD ***)(this + 6044),
             *(_DWORD ***)(this + 6124),
             *(_DWORD ***)(this + 6048));
    }
    else
    {
      if ( a2 != 2 )
        goto LABEL_8;
      v6 = *(_DWORD *)(this + 6032);
      v7 = sub_4B5050(a3);
    }
  }
  else
  {
    v7 = sub_4020FE(a3);
  }
  v4 = v7;
LABEL_8:
  if ( !(rand() & 3) )
    sub_4021D0(v5);
  return (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)dword_56391C + 84))(a2, a3, v4, a4);
}
// 4020FE: using guessed type _DWORD __cdecl sub_4020FE(_DWORD);
// 4021D0: using guessed type int __thiscall sub_4021D0(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004285A0) --------------------------------------------------------
int __thiscall sub_4285A0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // ecx
  int v5; // ebx
  int v6; // eax
  void (__thiscall **v7)(int, signed int, _DWORD); // edx
  void (__thiscall ***v8)(_DWORD, signed int, _DWORD); // edi
  int v9; // ecx

  v2 = this;
  sub_401136(a2);
  v3 = sub_402086(*((_DWORD *)dword_563908 + 1500));
  v4 = v2[1504];
  v5 = v3;
  sub_401BCC(a2);
  v6 = v2[1500];
  v7 = *(void (__thiscall ***)(int, signed int, _DWORD))(v6 + 8);
  v8 = (void (__thiscall ***)(_DWORD, signed int, _DWORD))(v6 + 8);
  *(_DWORD *)(v6 + 60) = 1;
  (*v7)(v6 + 8, 1, 0);
  (**v8)(v8, 2, 0);
  v9 = v2[1500];
  return sub_401758(v5);
}
// 401136: using guessed type _DWORD __stdcall sub_401136(_DWORD);
// 401758: using guessed type _DWORD __stdcall sub_401758(_DWORD);
// 401BCC: using guessed type _DWORD __stdcall sub_401BCC(_DWORD);
// 402086: using guessed type int __thiscall sub_402086(_DWORD);

//----- (00428630) --------------------------------------------------------
int __thiscall sub_428630(_DWORD *this, int a2)
{
  int result; // eax

  result = 3 - (a2 != 0);
  this[6443] = result;
  return result;
}

//----- (00428650) --------------------------------------------------------
int __thiscall sub_428650(_DWORD *this, char *a2, int a3, int a4, int a5, int a6)
{
  int v6; // ecx

  v6 = this[1509];
  return sub_40273E(a2, a3, a4, a5, a6);
}

//----- (00428660) --------------------------------------------------------
int __thiscall sub_428660(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // eax
  int result; // eax
  int v9; // ecx
  int v10; // esi
  void (__thiscall *v11)(int, signed int, _DWORD); // eax

  v5 = this;
  v6 = this[1503];
  sub_40128A(a2, a3, a4, a5);
  if ( a3 >= 0 )
  {
    v7 = *(_DWORD *)(v5[1503] + 4 * a2 + 4);
    if ( v7 )
    {
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v7 + 72) + 4))(*(_DWORD *)(v7 + 72)) == 4 )
        sub_401136(a3);
    }
  }
  result = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
  if ( a3 == result )
  {
    result = v5[6898];
    if ( result )
    {
      v5[6939] = 0;
      if ( (*(int (**)(void))(**(_DWORD **)(result + 72) + 4))() == 4 )
      {
        v9 = v5[1500];
        sub_401456(1);
      }
      sub_401640(v5);
      v10 = v5[1500];
      v11 = **(void (__thiscall ***)(int, signed int, _DWORD))(v10 + 8);
      *(_DWORD *)(v10 + 60) = 1;
      v10 += 8;
      v11(v10, 1, 0);
      result = (**(int (__thiscall ***)(int, signed int, _DWORD))v10)(v10, 2, 0);
    }
  }
  return result;
}
// 401136: using guessed type _DWORD __stdcall sub_401136(_DWORD);
// 40128A: using guessed type _DWORD __stdcall sub_40128A(_DWORD, _DWORD, _DWORD, _DWORD);
// 401456: using guessed type _DWORD __stdcall sub_401456(_DWORD);
// 401640: using guessed type int __thiscall sub_401640(_DWORD);

//----- (00428760) --------------------------------------------------------
int __thiscall sub_428760(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax
  _DWORD *v5; // esi
  int v6; // ecx

  result = abs(*(signed __int16 *)(a2 + 8));
  v5 = this;
  if ( result <= 5100 )
  {
    result = *(_DWORD *)(this[1507] + 4 * result + 8008);
    if ( result )
    {
      result = (*(int (__thiscall **)(int))(*(_DWORD *)result + 4))(result);
      if ( result == 11 )
      {
        v6 = *(_DWORD *)(v5[1503] + 4 * *(_DWORD *)a2 + 4);
        if ( v6 )
          result = (*(int (__stdcall **)(int, int, int))(*(_DWORD *)v6 + 280))(a2, a3, a4);
      }
    }
  }
  return result;
}

//----- (004287E0) --------------------------------------------------------
signed int __thiscall sub_4287E0(_DWORD *this, int a2)
{
  signed int result; // eax

  result = abs(a2);
  if ( result <= 5100 )
  {
    result = *(_DWORD *)(this[1507] + 4 * result + 8008);
    if ( result )
      result = sub_4023F6(result);
  }
  return result;
}
// 4023F6: using guessed type _DWORD __stdcall sub_4023F6(_DWORD);

//----- (00428820) --------------------------------------------------------
int __thiscall sub_428820(_DWORD *this, unsigned int a2, __int16 a3, const char *a4)
{
  _DWORD *v4; // edi
  int v5; // ebx
  int v6; // esi
  int v7; // eax
  int v8; // eax
  void (__thiscall **v9)(int, signed int, _DWORD); // edx
  void (__thiscall ***v10)(_DWORD, signed int, _DWORD); // esi
  int v11; // ecx

  v4 = this;
  sub_401136(a2);
  v5 = sub_402086(*((_DWORD *)dword_563908 + 1500));
  if ( a2 <= 0x1387 )
  {
    v6 = *(_DWORD *)(v4[1504] + 4 * a2 + 12408);
    if ( v6 )
    {
      *(_WORD *)(v6 + 100) = a3;
      strcpy((char *)v6, a4);
      v7 = sub_401D57(v6);
      if ( v7 )
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v7 + 4))(v7, 0);
      if ( v6 == v4[6897] )
        v4[6939] = 0;
    }
  }
  v8 = v4[1500];
  v9 = *(void (__thiscall ***)(int, signed int, _DWORD))(v8 + 8);
  v10 = (void (__thiscall ***)(_DWORD, signed int, _DWORD))(v8 + 8);
  *(_DWORD *)(v8 + 60) = 1;
  (*v9)(v8 + 8, 1, 0);
  (**v10)(v10, 2, 0);
  sub_4010FA(v4[1504]);
  v11 = v4[1500];
  return sub_401758(v5);
}
// 4010FA: using guessed type int __thiscall sub_4010FA(_DWORD);
// 401136: using guessed type _DWORD __stdcall sub_401136(_DWORD);
// 401758: using guessed type _DWORD __stdcall sub_401758(_DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 402086: using guessed type int __thiscall sub_402086(_DWORD);

//----- (00428920) --------------------------------------------------------
unsigned int __thiscall sub_428920(_DWORD *this, unsigned int a2, int a3)
{
  unsigned int result; // eax

  result = a2;
  if ( a2 <= 0x1387 )
  {
    result = *(_DWORD *)(this[1504] + 4 * a2 + 12408);
    if ( result )
      *(_DWORD *)(result + 112) = a3;
  }
  return result;
}

//----- (00428950) --------------------------------------------------------
int __thiscall sub_428950(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  int v11; // eax
  int result; // eax
  int v13; // ecx

  if ( a7 != -1 && a2 <= 0x1387 )
  {
    v11 = *(_DWORD *)(this[1504] + 4 * a2 + 12408);
    if ( v11 )
    {
      *(_DWORD *)(v11 + 112) = a7;
      *(_DWORD *)(v11 + 116) = a8;
    }
  }
  result = this[1503];
  v13 = *(_DWORD *)(result + 4 * a3 + 4);
  if ( v13 )
    result = (*(int (__stdcall **)(int, int, int, int, int, int))(*(_DWORD *)v13 + 28))(a4, a5, a6, a9, a10, a11);
  return result;
}

//----- (004289E0) --------------------------------------------------------
__int16 __thiscall sub_4289E0(_DWORD *this, unsigned int a2)
{
  int v2; // ecx
  signed int v3; // edi
  __int64 v4; // rax
  _WORD *v5; // esi
  signed int v6; // eax
  int v7; // eax
  int v8; // ecx

  v2 = this[1534];
  v3 = *(_DWORD *)(v2 + 12288);
  v4 = a2;
  if ( v3 <= 0 )
  {
LABEL_5:
    if ( v3 < 512 )
    {
      HIDWORD(v4) = v2 + 24 * v3;
      *(_DWORD *)HIDWORD(v4) = *(_DWORD *)a2;
      *(_DWORD *)(HIDWORD(v4) + 4) = *(_DWORD *)(v4 + 4);
      *(_WORD *)(HIDWORD(v4) + 8) = *(_WORD *)(v4 + 8);
      v6 = abs(*(signed __int16 *)(v4 + 6));
      if ( v6 <= 5100 )
        v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v6 + 8008);
      else
        v7 = 0;
      *(_DWORD *)(v2 + 24 * *(_DWORD *)(v2 + 12288) + 12) = v7;
      *(_DWORD *)(v2 + 24 * *(_DWORD *)(v2 + 12288) + 16) = *(_DWORD *)(v7 + 244);
      LODWORD(v4) = *(_DWORD *)(v2 + 12288);
      *(_DWORD *)(v2 + 24 * v4 + 20) = 0;
      ++*(_DWORD *)(v2 + 12288);
    }
  }
  else
  {
    v5 = (_WORD *)(v2 + 4);
    while ( *v5 != *(_WORD *)(a2 + 4) )
    {
      ++HIDWORD(v4);
      v5 += 12;
      if ( SHIDWORD(v4) >= v3 )
        goto LABEL_5;
    }
    v8 = v2 + 24 * HIDWORD(v4);
    *(_DWORD *)v8 = *(_DWORD *)a2;
    *(_DWORD *)(v8 + 4) = *(_DWORD *)(v4 + 4);
    LOWORD(v4) = *(_WORD *)(v4 + 8);
    *(_WORD *)(v8 + 8) = v4;
  }
  return v4;
}

//----- (004289F0) --------------------------------------------------------
int __thiscall sub_4289F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13)
{
  int result; // eax
  int v14; // ecx

  result = this[1503];
  v14 = *(_DWORD *)(result + 4 * a2 + 4);
  if ( v14 )
    result = (*(int (__stdcall **)(int, int, int, int, int, int, int, int, int, int, int))(*(_DWORD *)v14 + 272))(
               a3,
               a4,
               a5,
               a6,
               a7,
               a8,
               a9,
               a10,
               a11,
               a12,
               a13);
  return result;
}

//----- (00428A60) --------------------------------------------------------
int __thiscall sub_428A60(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // ecx

  v6 = this[1503];
  return sub_4023FB(a2, a3, a4, a5, a6);
}
// 4023FB: using guessed type _DWORD __stdcall sub_4023FB(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00428A70) --------------------------------------------------------
int __thiscall sub_428A70(_DWORD *this, int a2)
{
  int v2; // ecx

  v2 = this[1503];
  return sub_401D3E(a2);
}
// 401D3E: using guessed type _DWORD __stdcall sub_401D3E(_DWORD);

//----- (00428A80) --------------------------------------------------------
int __thiscall sub_428A80(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  signed int v5; // edx
  int j; // edx
  unsigned int v7; // eax
  int v8; // eax
  int i; // edx
  unsigned int v10; // eax
  int v11; // eax
  int k; // edx
  unsigned int v13; // eax
  int v14; // eax
  int v15; // ecx
  void (__thiscall *v16)(int, signed int, _DWORD); // eax
  int (__thiscall ***v17)(_DWORD, signed int, _DWORD); // esi

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      for ( i = 0; i < a4; ++i )
      {
        v10 = *(signed __int16 *)(a3 + 2 * i);
        if ( v10 <= 0x1387 )
        {
          v11 = *(_DWORD *)(this[1504] + 4 * v10 + 12408);
          if ( v11 )
          {
            *(_DWORD *)(v11 + 128) = 1;
            if ( v11 == this[6897] )
              this[6438] = 100 * *(_DWORD *)((char *)this + 58398);
          }
        }
      }
    }
    else
    {
      v4 = a2 - 2;
      if ( a2 == 2 )
      {
        if ( *(_DWORD *)(this[1504] + 12404) > 0 )
        {
          v5 = 6404;
          do
          {
            *(_DWORD *)(*(_DWORD *)(v5 + this[1504]) + 128) = 0;
            ++v4;
            v5 += 4;
          }
          while ( v4 < *(_DWORD *)(this[1504] + 12404) );
        }
        for ( j = 0; j < a4; ++j )
        {
          v7 = *(signed __int16 *)(a3 + 2 * j);
          if ( v7 <= 0x1387 )
          {
            v8 = *(_DWORD *)(this[1504] + 4 * v7 + 12408);
            if ( v8 )
            {
              *(_DWORD *)(v8 + 128) = 1;
              if ( v8 == this[6897] )
                this[6438] = 100 * *(_DWORD *)((char *)this + 58398);
            }
          }
        }
      }
    }
  }
  else
  {
    for ( k = 0; k < a4; ++k )
    {
      v13 = *(signed __int16 *)(a3 + 2 * k);
      if ( v13 <= 0x1387 )
      {
        v14 = *(_DWORD *)(this[1504] + 4 * v13 + 12408);
        if ( v14 )
          *(_DWORD *)(v14 + 128) = 0;
      }
    }
  }
  v15 = this[1500];
  v16 = **(void (__thiscall ***)(int, signed int, _DWORD))(v15 + 8);
  v17 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v15 + 8);
  *(_DWORD *)(v15 + 60) = 1;
  v16(v15 + 8, 1, 0);
  return (**v17)(v17, 2, 0);
}

//----- (00428C60) --------------------------------------------------------
int __thiscall sub_428C60(_DWORD *this, int a2, int a3)
{
  int v3; // ecx
  signed int v4; // esi
  int result; // eax
  signed __int16 *v6; // edx

  v3 = this[1534];
  v4 = *(_DWORD *)(v3 + 12288);
  result = 0;
  if ( v4 > 0 )
  {
    v6 = (signed __int16 *)(v3 + 4);
    while ( *v6 != a2 )
    {
      ++result;
      v6 += 12;
      if ( result >= v4 )
        return result;
    }
    if ( a3 )
    {
      result *= 3;
      *(_WORD *)(v3 + 8 * result + 8) = a3;
    }
    else
    {
      result = (int)memcpy_0(
                      (void *)(v3 + 24 * result),
                      (const void *)(v3 + 24 * result + 24),
                      24 * (--*(_DWORD *)(v3 + 12288) - result));
    }
  }
  return result;
}

//----- (00428C70) --------------------------------------------------------
int __thiscall sub_428C70(_DWORD **this, const char *a2, int a3)
{
  _DWORD **v3; // esi
  int result; // eax
  _DWORD *v5; // ecx
  _DWORD *v6; // edi
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  const char *v9; // esi
  const char *i; // esi

  v3 = this;
  result = (*(int (**)(void))(*this[1535] + 24))();
  if ( result )
  {
    v5 = v3[1535];
    if ( v5 && (*(int (**)(void))(*v5 + 28))() == 4 )
    {
      v6 = v3[1535];
    }
    else
    {
      if ( (*(int (**)(void))(*v3[1535] + 20))() )
      {
        v7 = v3[1535];
        if ( v7 )
        {
          (*(void (__stdcall **)(signed int))(*v7 + 4))(1);
          v3[1535] = 0;
        }
      }
      if ( operator new(0x6F79Cu) )
        v8 = (_DWORD *)sub_401FAA(v3[89], v3 + 3101, -1);
      else
        v8 = 0;
      v3[1535] = v8;
    }
    v9 = &a2[strlen(a2) + 1];
    sub_4025E0(a2, v9);
    for ( i = &v9[strlen(v9) + 1]; i < &a2[a3]; i += strlen(i) + 1 )
      sub_40298C(i);
    result = sub_401E0B(0, 0);
  }
  return result;
}
// 401E0B: using guessed type _DWORD __stdcall sub_401E0B(_DWORD, _DWORD);
// 401FAA: using guessed type _DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD);
// 4025E0: using guessed type _DWORD __stdcall sub_4025E0(_DWORD, _DWORD);
// 40298C: using guessed type _DWORD __stdcall sub_40298C(_DWORD);

//----- (00428E20) --------------------------------------------------------
FILE *__thiscall sub_428E20(int this, int a2, const char *a3, unsigned int a4, int a5)
{
  int v5; // esi
  FILE *result; // eax
  int v7; // ecx
  int v8; // ecx
  int v9; // eax
  void *v10; // eax
  signed int v11; // esi
  _WORD *v12; // edi
  char v13; // al
  const char *v14; // ebp
  _WORD *v15; // edi
  char v16; // al
  unsigned int v17; // eax
  char *v18; // edi
  char v19; // cl
  int v20; // ebx
  const char *v21; // esi
  _WORD *v22; // edi
  char v23; // al
  int v24; // esi
  unsigned int v25; // ebx
  int v26; // eax
  unsigned int v27; // eax
  signed int v28; // edi
  _DWORD *v29; // esi
  int v30; // [esp+14h] [ebp-730h]
  const char *v31; // [esp+18h] [ebp-72Ch]
  FILE *File; // [esp+1Ch] [ebp-728h]
  signed int v33; // [esp+20h] [ebp-724h]
  BOOL v34; // [esp+24h] [ebp-720h]
  signed int v35; // [esp+28h] [ebp-71Ch]
  int v36; // [esp+2Ch] [ebp-718h]
  int v37; // [esp+30h] [ebp-714h]
  char v38[512]; // [esp+34h] [ebp-710h]
  char v39[512]; // [esp+233h] [ebp-511h]
  char Dest[512]; // [esp+234h] [ebp-510h]
  char Dst; // [esp+434h] [ebp-310h]
  int v42; // [esp+534h] [ebp-210h]
  int v43; // [esp+634h] [ebp-110h]
  int v44; // [esp+740h] [ebp-4h]

  v5 = this;
  v31 = (const char *)a4;
  v36 = this;
  File = 0;
  v34 = *(_BYTE *)(this + 13108) != 0;
  if ( *(_BYTE *)(this + 13108) )
  {
    result = fopen((const char *)(this + 13108), "wt");
    File = result;
    if ( !result )
      return result;
    v10 = operator new(0x6F79Cu);
    v44 = 1;
    if ( v10 )
      v9 = sub_401FF0(v10);
    else
      v9 = 0;
    goto LABEL_16;
  }
  result = (FILE *)(*(int (**)(void))(**(_DWORD **)(this + 6140) + 24))();
  if ( !result )
    return result;
  v7 = *(_DWORD *)(v5 + 6140);
  if ( !v7 || (*(int (**)(void))(*(_DWORD *)v7 + 28))() != 4 )
  {
    if ( (*(int (**)(void))(**(_DWORD **)(v5 + 6140) + 20))() )
    {
      v8 = *(_DWORD *)(v5 + 6140);
      if ( v8 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v8 + 4))(1);
        *(_DWORD *)(v5 + 6140) = 0;
      }
    }
    v44 = 0;
    if ( operator new(0x6F79Cu) )
    {
      v9 = sub_401FAA(*(_DWORD *)(v5 + 356), v5 + 12404, -1);
      *(_DWORD *)(v5 + 6140) = v9;
    }
    else
    {
      v9 = 0;
      *(_DWORD *)(v5 + 6140) = 0;
    }
LABEL_16:
    v30 = v9;
    v44 = -1;
    goto LABEL_17;
  }
  v30 = *(_DWORD *)(v5 + 6140);
LABEL_17:
  v11 = 0;
  v35 = 0;
  LOBYTE(v42) = 0;
  Dest[0] = 0;
  strcpy(&Dst, a3);
  sub_48CA10((int)&v42, &Dst);
  v33 = -1;
  if ( Dst )
  {
    do
    {
      sub_48CA10((int)&v43, &Dst);
      if ( Dest[0] )
      {
        v12 = v39;
        do
        {
          v13 = *((_BYTE *)v12 + 1);
          v12 = (_WORD *)((char *)v12 + 1);
        }
        while ( v13 );
        *v12 = 44;
      }
      sprintf(&Dest[strlen(Dest)], "-%s:12", &v43);
      ++v11;
    }
    while ( Dst );
    v35 = v11;
  }
  if ( *((_BYTE *)dword_563908 + 32314) )
  {
    v33 = v11;
    sprintf(&Dest[strlen(Dest)], ",%s:9", (char *)dword_563908 + 32314);
  }
  if ( *((_BYTE *)dword_563908 + 32346) )
    sprintf(&Dest[strlen(Dest)], ",%s:6", (char *)dword_563908 + 32346);
  if ( *((_BYTE *)dword_563908 + 32378) )
    sprintf(&Dest[strlen(Dest)], ",%s:6", (char *)dword_563908 + 32378);
  if ( *((_BYTE *)dword_563908 + 32410) )
    sprintf(&Dest[strlen(Dest)], ",%s:8", (char *)dword_563908 + 32410);
  if ( *((_BYTE *)dword_563908 + 32442) )
    sprintf(&Dest[strlen(Dest)], ",%s:8", (char *)dword_563908 + 32442);
  if ( *((_BYTE *)dword_563908 + 32474) )
    sprintf(&Dest[strlen(Dest)], ",%s:6", (char *)dword_563908 + 32474);
  if ( *((_BYTE *)dword_563908 + 32506) )
    sprintf(&Dest[strlen(Dest)], ",%s:6", (char *)dword_563908 + 32506);
  if ( *((_BYTE *)dword_563908 + 32538) )
    sprintf(&Dest[strlen(Dest)], ",%s:9", (char *)dword_563908 + 32538);
  if ( *((_BYTE *)dword_563908 + 32570) )
    sprintf(&Dest[strlen(Dest)], ",%s:9", (char *)dword_563908 + 32570);
  if ( *((_BYTE *)dword_563908 + 32634) )
    sprintf(&Dest[strlen(Dest)], ",%s:9", (char *)dword_563908 + 32634);
  if ( *((_BYTE *)dword_563908 + 32602) )
    sprintf(&Dest[strlen(Dest)], ",%s:9", (char *)dword_563908 + 32602);
  v14 = (char *)dword_563908 + 31866;
  v37 = 12;
  do
  {
    if ( *v14 )
    {
      v15 = v39;
      do
      {
        v16 = *((_BYTE *)v15 + 1);
        v15 = (_WORD *)((char *)v15 + 1);
      }
      while ( v16 );
      *v15 = 44;
      v17 = strlen(v14) + 1;
      v18 = v39;
      do
        v19 = (v18++)[1];
      while ( v19 );
      qmemcpy(v18, v14, v17);
    }
    v14 += 32;
    --v37;
  }
  while ( v37 );
  if ( v34 )
    sub_401E8D((int)File, Dest);
  else
    sub_4025E0(&v42, Dest);
  if ( a4 < a4 + a5 )
  {
    do
    {
      v38[0] = 0;
      if ( v35 > 0 )
      {
        v20 = v35;
        v21 = v31;
        do
        {
          if ( v38[0] )
          {
            v22 = (_WORD *)((char *)&v37 + 3);
            do
            {
              v23 = *((_BYTE *)v22 + 1);
              v22 = (_WORD *)((char *)v22 + 1);
            }
            while ( v23 );
            *v22 = 44;
          }
          sprintf(&v38[strlen(v38)], "\"%s\"", v21);
          --v20;
          v21 += strlen(v21) + 1;
        }
        while ( v20 );
        v31 = v21;
      }
      v24 = (int)v31;
      v25 = (unsigned int)(v31 + 90);
      v31 += 90;
      if ( *((_BYTE *)dword_563908 + 32314) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 10) + *(_DWORD *)(v24 + 18) + *(_DWORD *)(v24 + 22));
      if ( *((_BYTE *)dword_563908 + 32346) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 26));
      if ( *((_BYTE *)dword_563908 + 32378) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 30));
      if ( *((_BYTE *)dword_563908 + 32410) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 10));
      if ( *((_BYTE *)dword_563908 + 32442) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 14));
      if ( *((_BYTE *)dword_563908 + 32474) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 2));
      if ( *((_BYTE *)dword_563908 + 32506) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 6));
      if ( *((_BYTE *)dword_563908 + 32538) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 18));
      if ( *((_BYTE *)dword_563908 + 32570) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 22));
      if ( *((_BYTE *)dword_563908 + 32634) )
        sprintf(&v38[strlen(v38)], ",%d", *(_DWORD *)(v24 + 38));
      if ( *((_BYTE *)dword_563908 + 32602) )
      {
        if ( *(_DWORD *)((char *)dword_563908 + 58554) <= 0 )
        {
          if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1514) + 27436) <= 0 )
          {
            sprintf(&v38[strlen(v38)], ",0");
          }
          else
          {
            v27 = sub_494B50(v36 + 27892, v24);
            sprintf(&v38[strlen(v38)], ",%d", v27);
          }
        }
        else
        {
          v26 = sub_494AA0(
                  v36 + 27892,
                  *(_DWORD *)(v24 + 50),
                  *(_DWORD *)(v24 + 54),
                  *(_DWORD *)(v24 + 26),
                  *(_DWORD *)(v24 + 30),
                  *(_DWORD *)(v24 + 58),
                  *(_DWORD *)(v24 + 62),
                  *(_DWORD *)(v24 + 70),
                  *(_DWORD *)(v24 + 66),
                  *(_DWORD *)(v24 + 74),
                  *(_DWORD *)(v24 + 82),
                  *(_DWORD *)(v24 + 86));
          sprintf(&v38[strlen(v38)], ",%d", v26);
        }
      }
      v28 = 0;
      v29 = (_DWORD *)(v24 + 42);
      do
      {
        if ( *((_BYTE *)dword_563908 + v28 + 31866) )
          sprintf(&v38[strlen(v38)], ",%d", *v29);
        v28 += 32;
        ++v29;
      }
      while ( v28 < 384 );
      if ( v34 )
        sub_401E65(v30, File, v38);
      else
        sub_40298C(v38);
    }
    while ( v25 < a4 + a5 );
  }
  if ( v34 )
    return (FILE *)fclose(File);
  result = (FILE *)v33;
  if ( v33 > 0 )
    result = (FILE *)sub_401E0B(v33, 1);
  return result;
}
// 401E0B: using guessed type _DWORD __stdcall sub_401E0B(_DWORD, _DWORD);
// 401E65: using guessed type int __thiscall sub_401E65(_DWORD, _DWORD, _DWORD);
// 401FAA: using guessed type _DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD);
// 401FF0: using guessed type int __thiscall sub_401FF0(_DWORD);
// 4025E0: using guessed type _DWORD __stdcall sub_4025E0(_DWORD, _DWORD);
// 40298C: using guessed type _DWORD __stdcall sub_40298C(_DWORD);
// 428E20: using guessed type char Dest[512];
// 428E20: using guessed type char var_710[512];

//----- (00429B40) --------------------------------------------------------
int __thiscall sub_429B40(char *this, char *a2, const char *a3, const char *a4)
{
  char *v4; // edi
  char *v5; // eax
  int v6; // edx
  char v7; // cl
  _DWORD *v8; // eax
  int v9; // ecx
  void *v10; // ST34_4
  int v11; // edx
  int result; // eax
  char Dest; // [esp+14h] [ebp-110h]
  int v14; // [esp+120h] [ebp-4h]

  v4 = this;
  v5 = a2;
  v6 = this + 1584 - a2;
  do
  {
    v7 = *v5;
    v5[v6] = *v5;
    ++v5;
  }
  while ( v7 );
  strcpy(v4 + 1456, a3);
  strcpy(v4 + 1712, a4);
  sprintf(&Dest, "Confirm Send File: %s   Going-To: %s", a2, a4);
  v8 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 355) )
  {
    v9 = *((_DWORD *)dword_563908 + 355);
    if ( v9 )
    {
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 36))(1);
      v8 = dword_563908;
    }
    v8[355] = 0;
  }
  v10 = operator new(0x1644u);
  v14 = 0;
  if ( v10 )
  {
    if ( v4 )
      v11 = (int)(v4 + 4);
    else
      v11 = 0;
    result = sub_402504(0, *((_DWORD *)dword_563908 + 1517), v11, &Dest, "Yes,No", 2, 0, 0, 0);
    *((_DWORD *)dword_563908 + 355) = result;
  }
  else
  {
    result = 0;
    *((_DWORD *)dword_563908 + 355) = 0;
  }
  return result;
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00429D10) --------------------------------------------------------
unsigned int __thiscall sub_429D10(_DWORD *this, unsigned int a2, int a3)
{
  unsigned int result; // eax
  int v4; // esi
  int v5; // ecx
  char v6; // [esp+0h] [ebp-1B4h]

  result = a2;
  if ( a2 <= 0x1387 )
  {
    v4 = *(_DWORD *)(this[1504] + 4 * a2 + 12408);
    if ( v4 )
    {
      v5 = *((_DWORD *)dword_563918 + 2131);
      result = sub_40239C(a3, &v6);
      if ( result )
        result = sub_4020F9(&v6);
      else
        *(_DWORD *)(v4 + 102) = a3;
    }
  }
  return result;
}
// 4020F9: using guessed type _DWORD __stdcall sub_4020F9(_DWORD);
// 40239C: using guessed type _DWORD __stdcall sub_40239C(_DWORD, _DWORD);

//----- (00429DB0) --------------------------------------------------------
unsigned int __thiscall sub_429DB0(_DWORD *this, unsigned int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ecx
  unsigned int result; // eax

  v3 = this;
  v4 = *((_DWORD *)dword_563918 + 2131);
  sub_40139D(a3);
  result = a2;
  if ( a2 <= 0x1387 )
  {
    if ( *(_DWORD *)(v3[1504] + 4 * a2 + 12408) )
      result = sub_4020F9(a3);
  }
  return result;
}
// 40139D: using guessed type _DWORD __stdcall sub_40139D(_DWORD);
// 4020F9: using guessed type _DWORD __stdcall sub_4020F9(_DWORD);

//----- (00429E00) --------------------------------------------------------
void __stdcall sub_429E00(signed __int16 *a1, signed __int16 *a2, _DWORD *a3, int a4)
{
  unsigned int v4; // eax
  int v5; // ecx
  int v6; // eax

  if ( a4 )
  {
    v4 = *a1;
    if ( v4 <= 0x1387 )
    {
      v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v4 + 12408);
      if ( v5 )
      {
        v6 = sub_401D57(v5);
        if ( v6 )
        {
          if ( (*(int (**)(void))(**(_DWORD **)(v6 + 72) + 4))() == 4 )
            sub_402063(*a2, *a3);
        }
      }
    }
  }
}
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 402063: using guessed type _DWORD __stdcall sub_402063(_DWORD, _DWORD);

//----- (00429E80) --------------------------------------------------------
int __thiscall sub_429E80(_DWORD *this, signed __int16 *a2, int a3)
{
  int result; // eax
  int v4; // esi

  result = sub_401D57(this[6897]);
  v4 = result;
  if ( result )
  {
    result = (*(int (**)(void))(**(_DWORD **)(result + 72) + 4))();
    if ( result == 4 )
    {
      result = (int)a2;
      if ( *(_DWORD *)(v4 + 396) == *a2 )
        result = sub_402063(-1, -1);
    }
  }
  return result;
}
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 402063: using guessed type _DWORD __stdcall sub_402063(_DWORD, _DWORD);

//----- (00429ED0) --------------------------------------------------------
int __thiscall sub_429ED0(void **this, int a2, int a3, int a4, size_t Size)
{
  void **v5; // esi
  void *v6; // eax
  _DWORD *v7; // eax
  int v8; // ecx
  void *Src; // ST38_4
  int result; // eax
  char Dest; // [esp+18h] [ebp-110h]
  int v12; // [esp+124h] [ebp-4h]

  v5 = this;
  if ( this[476] )
  {
    free(this[476]);
    v5[476] = 0;
  }
  strcpy((char *)v5 + 1776, (const char *)a2);
  v6 = malloc(Size);
  v5[476] = v6;
  v5[477] = (void *)Size;
  memcpy(v6, (const void *)a4, Size);
  sprintf(&Dest, "Confirm Receive File: %s   From: %s", a2, a3);
  v7 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 355) )
  {
    v8 = *((_DWORD *)dword_563908 + 355);
    if ( v8 )
    {
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v8 + 36))(1);
      v7 = dword_563908;
    }
    v7[355] = 0;
  }
  Src = operator new(0x1644u);
  v12 = 0;
  if ( Src )
  {
    result = sub_402504(0, *((_DWORD *)dword_563908 + 1517), v5 + 1, &Dest, "Yes,No", 3, 0, 0, 0);
    *((_DWORD *)dword_563908 + 355) = result;
  }
  else
  {
    result = 0;
    *((_DWORD *)dword_563908 + 355) = 0;
  }
  return result;
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0042A0B0) --------------------------------------------------------
int __stdcall sub_42A0B0(HWND hWnd, int a2)
{
  char *v2; // esi
  CHAR String; // [esp+0h] [ebp-204h]

  if ( *((_DWORD *)dword_563908 + 3437) < 80 )
  {
    GetWindowTextA(hWnd, &String, 512);
    if ( String )
    {
      v2 = (char *)dword_563908 + 150 * *((_DWORD *)dword_563908 + 3437) + 13752;
      strncpy(v2, &String, 0x96u);
      v2[149] = 0;
      ++*((_DWORD *)dword_563908 + 3437);
    }
  }
  return 1;
}

//----- (0042A180) --------------------------------------------------------
int __stdcall sub_42A180(const char *a1)
{
  int result; // eax
  char v2; // [esp+0h] [ebp-404h]
  char Dst; // [esp+200h] [ebp-204h]

  strcpy(&Dst, a1);
  result = sub_48CA10((int)&v2, &Dst);
  if ( v2 )
  {
    while ( _access(&v2, 0) )
    {
      result = sub_48CA10((int)&v2, &Dst);
      if ( !v2 )
        return result;
    }
    result = (*(int (__stdcall **)(signed int, signed int, char *))(*(_DWORD *)dword_56391C + 88))(18, 6, &v2);
  }
  return result;
}
// 56391C: using guessed type int dword_56391C;

//----- (0042A280) --------------------------------------------------------
int __thiscall sub_42A280(char *this, int a2)
{
  char *v2; // ebx
  char *v3; // esi
  HMODULE v4; // eax
  HMODULE v5; // edi
  FARPROC v6; // ebx
  FARPROC v7; // ebp
  void *v8; // edi
  char *v9; // eax
  char *v10; // eax
  int v11; // ebp
  const char *v12; // edi
  char *v14; // [esp+18h] [ebp-2134h]
  FARPROC v15; // [esp+1Ch] [ebp-2130h]
  int v16; // [esp+20h] [ebp-212Ch]
  char Str; // [esp+44h] [ebp-2108h]
  char Dest[2]; // [esp+148h] [ebp-2004h]

  v2 = this;
  v14 = this;
  v3 = Dest;
  Dest[0] = 0;
  v4 = GetModuleHandleA("kernel32.dll");
  v5 = v4;
  if ( v4 )
  {
    v6 = GetProcAddress(v4, "CreateToolhelp32Snapshot");
    v15 = GetProcAddress(v5, "Process32First");
    v7 = GetProcAddress(v5, "Process32Next");
    if ( v6 )
    {
      v8 = (void *)((int (__stdcall *)(signed int, _DWORD))v6)(2, 0);
      if ( v8 != (void *)-1 )
      {
        v16 = 296;
        if ( ((int (__stdcall *)(void *, int *))v15)(v8, &v16) )
        {
          do
          {
            v9 = strrchr(&Str, 92);
            if ( v9 )
              v10 = v9 + 1;
            else
              v10 = &Str;
            if ( v3 != Dest )
              *v3++ = 44;
            sprintf(v3, "\"P:%s\"", v10);
            v3 += strlen(v3);
          }
          while ( ((int (__stdcall *)(void *, int *))v7)(v8, &v16) );
        }
        CloseHandle(v8);
      }
    }
    else
    {
      strcpy(Dest, "NT");
    }
    v2 = v14;
  }
  else
  {
    strcpy(Dest, "NT");
  }
  v11 = 0;
  *((_DWORD *)v2 + 3437) = 0;
  EnumWindows(EnumFunc, 0);
  if ( *((_DWORD *)v2 + 3437) > 0 )
  {
    v12 = v2 + 13752;
    do
    {
      if ( a2 >= 0 || strlen(v12) < 0x50 )
      {
        if ( v3 != Dest )
          *v3++ = 44;
        sprintf(v3, "\"W:%s\"", v12);
        v3 += strlen(v3);
      }
      ++v11;
      v12 += 150;
    }
    while ( v11 < *((_DWORD *)v2 + 3437) );
  }
  memset(v2 + 13752, 0, 0x2EE0u);
  return (*(int (__stdcall **)(char *, int))(*(_DWORD *)dword_56391C + 116))(Dest, a2);
}
// 56391C: using guessed type int dword_56391C;

//----- (0042A520) --------------------------------------------------------
_DWORD *__fastcall sub_42A520(int a1, int a2, int a3, char *a4, int a5, int a6)
{
  int v6; // esi
  void *v7; // edi
  char *v8; // eax
  char v9; // cl
  _DWORD *v10; // eax
  _DWORD *result; // eax

  v6 = a1;
  v7 = *(void **)(a1 + 364);
  if ( v7 )
  {
    sub_4B4100(*(void (__stdcall *****)(signed int))(a1 + 364));
    j__free(v7);
    *(_DWORD *)(v6 + 364) = 0;
  }
  *(_DWORD *)(v6 + 368) = sub_401D39(a1, a2);
  *(_DWORD *)(v6 + 372) = 100 * a3;
  v8 = a4;
  do
  {
    v9 = *v8;
    v8[v6 - (_DWORD)a4 + 376] = *v8;
    ++v8;
  }
  while ( v9 );
  v10 = operator new(0x10u);
  if ( v10 )
    result = sub_4B3E10(v10, a5, a6, *(_DWORD **)(v6 + 356), *((_DWORD *)dword_563918 + 2229));
  else
    result = 0;
  *(_DWORD *)(v6 + 364) = result;
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (0042A630) --------------------------------------------------------
_DWORD *__thiscall sub_42A630(_DWORD *this, int a2)
{
  _DWORD *v2; // esi

  v2 = this;
  *this = a2;
  sub_401F64((char *)dword_563908 + 30156, this + 1);
  sub_401F64((char *)dword_563908 + 30204, v2 + 5);
  return v2;
}
// 401F64: using guessed type _DWORD __stdcall sub_401F64(_DWORD, _DWORD);

//----- (0042A690) --------------------------------------------------------
int __thiscall sub_42A690(_DWORD *this)
{
  int result; // eax

  if ( *((_DWORD *)dword_563918 + 2256) )
    result = abs(*(signed __int16 *)(*(_DWORD *)(this[5] + 360) + 6));
  else
    result = 0;
  return result;
}

//----- (0042A6D0) --------------------------------------------------------
_DWORD *__usercall sub_42A6D0@<eax>(__int64 a1@<edx:eax>, int *a2@<ecx>)
{
  _DWORD *result; // eax
  int *v3; // esi
  int v4; // ecx
  int v5; // ebx
  int v6; // edi
  _DWORD *v7; // ecx
  int v8; // ebp
  _DWORD *v9; // ecx
  int v10; // eax
  int v11; // ebp
  int v12; // eax
  int v13; // ebp
  int v14; // ecx
  int v15; // eax
  int v16; // ebp
  int v17; // ecx
  int v18; // eax
  _DWORD *v19; // ebp
  _DWORD *v20; // ebx
  int v21; // eax
  unsigned __int16 v22; // ax
  int v23; // edi
  int v24; // ecx
  int v25; // ecx
  int v26; // edi
  int v27; // ecx
  int v28; // edi
  int v29; // ebx
  int v30; // eax
  int v31; // [esp+10h] [ebp-144h]
  int v32; // [esp+14h] [ebp-140h]
  int v33; // [esp+14h] [ebp-140h]
  _DWORD *v34; // [esp+18h] [ebp-13Ch]
  int v35; // [esp+1Ch] [ebp-138h]
  int v36; // [esp+20h] [ebp-134h]
  int v37; // [esp+24h] [ebp-130h]
  int v38; // [esp+28h] [ebp-12Ch]
  int v39; // [esp+2Ch] [ebp-128h]
  char Dest; // [esp+30h] [ebp-124h]
  char v41; // [esp+50h] [ebp-104h]

  result = dword_563918;
  v3 = a2;
  if ( !*((_DWORD *)dword_563918 + 2256) )
    goto LABEL_23;
  v4 = *a2;
  v5 = *(_DWORD *)(*v3 + 4) - *((_DWORD *)dword_563908 + 3110);
  if ( *((_DWORD *)dword_563918 + 2256) )
  {
    a1 = *(signed __int16 *)(*(_DWORD *)(v3[5] + 360) + 6);
    LODWORD(a1) = abs((_DWORD)a1);
  }
  else
  {
    LODWORD(a1) = 0;
  }
  v6 = *(_DWORD *)(v4 + 8) - *((_DWORD *)dword_563908 + 3099) - a1;
  sub_4A4DC0(v3[5], SHIDWORD(a1), 0, v4, v5, v6, 3, 0, 0, 0);
  result = dword_563908;
  if ( !*((_DWORD *)dword_563908 + 6898) )
    return result;
  result = (_DWORD *)(*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))();
  if ( result == (_DWORD *)4 )
    return result;
  v7 = dword_563908;
  v8 = v3[5];
  v34 = (_DWORD *)*((_DWORD *)dword_563908 + *((signed __int16 *)dword_563908 + 15360) + 1516);
  if ( abs(*(signed __int16 *)(*(_DWORD *)(v8 + 360) + 4)) < *((_DWORD *)dword_563908 + 3110) )
  {
    v9 = (_DWORD *)*v3;
    v35 = v5 + abs(*(signed __int16 *)(*(_DWORD *)(v8 + 360) + 4));
    v37 = v9[1];
    v36 = v6;
    v38 = v6 + abs(*(signed __int16 *)(*(_DWORD *)(v8 + 360) + 6));
    (*(void (__stdcall **)(_DWORD, int *))(*v9 + 40))(0, &v35);
    v7 = dword_563908;
  }
  v10 = 4 * v7[2677];
  v31 = v10;
  result = (_DWORD *)(*(_DWORD *)Memory ^ *(_DWORD *)(v10 + *((_DWORD *)Memory + 1)));
  if ( (signed int)result > 0 )
  {
    v11 = *(signed __int16 *)(v3[1] + 168)
        * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v7[2679]))
        / (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + v31))
        - 1;
    sub_4A50B0(v3[1], v11 <= 0 ? 0 : v11, *v3, v5 + v7[7668], v6 + v7[7669], 3, 0, 0, 0, 0);
    sprintf(
      &Dest,
      "%d",
      ((*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2679))) + 999) / 1000);
    result = (_DWORD *)sub_49B490(
                         v34,
                         &Dest,
                         *((signed __int16 *)dword_563908 + 15361),
                         (_DWORD *)*v3,
                         v5 + *((_DWORD *)dword_563908 + 7670),
                         v6 + *((_DWORD *)dword_563908 + 7671),
                         3,
                         0);
    v7 = dword_563908;
  }
  if ( v7[6898] )
  {
    v39 = *(_DWORD *)(v7[1503] + 4 * *(signed __int16 *)(v7[6897] + 96) + 4);
    v12 = v39;
    if ( v39 )
    {
      v13 = (*(int (__thiscall **)(int))(*(_DWORD *)v39 + 168))(v39);
      v32 = (*(int (**)(void))(*(_DWORD *)v39 + 172))();
      if ( v32 > 1 )
      {
        v14 = v3[1];
        v15 = v13 * *(signed __int16 *)(v14 + 176) / v32;
        sub_4A50B0(
          v14,
          (v15 - 1) & ((v15 - 1 <= 0) - 1),
          *v3,
          v5 + *((_DWORD *)dword_563908 + 7672),
          v6 + *((_DWORD *)dword_563908 + 7673),
          3,
          0,
          0,
          0,
          0);
        sprintf(&Dest, "%d", (v13 + 999) / 1000);
        sub_49B490(
          v34,
          &Dest,
          *((signed __int16 *)dword_563908 + 15361),
          (_DWORD *)*v3,
          v5 + *((_DWORD *)dword_563908 + 7674),
          v6 + *((_DWORD *)dword_563908 + 7675),
          3,
          0);
      }
      v12 = v39;
      v7 = dword_563908;
    }
    if ( v12 != v7[6898] )
    {
      v16 = (*(int (**)(void))(*(_DWORD *)v7[6898] + 168))();
      v33 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 172))();
      if ( v33 > 1 )
      {
        v17 = v3[1];
        v18 = v16 * *(signed __int16 *)(v17 + 176) / v33;
        sub_4A50B0(
          v17,
          (v18 - 1) & ((v18 - 1 <= 0) - 1),
          *v3,
          v5 + *((_DWORD *)dword_563908 + 7676),
          v6 + *((_DWORD *)dword_563908 + 7677),
          3,
          0,
          0,
          0,
          0);
        sprintf(&Dest, "%d", (v16 + 999) / 1000);
        sub_49B490(
          v34,
          &Dest,
          *((signed __int16 *)dword_563908 + 15361),
          (_DWORD *)*v3,
          v5 + *((_DWORD *)dword_563908 + 7678),
          v6 + *((_DWORD *)dword_563908 + 7679),
          3,
          0);
      }
      v7 = dword_563908;
    }
    result = (_DWORD *)(*(int (**)(void))(**(_DWORD **)(v7[6898] + 72) + 4))();
    v7 = dword_563908;
    if ( result == (_DWORD *)3 )
    {
      result = (_DWORD *)*((_DWORD *)dword_563908 + 6898);
      if ( *(_WORD *)(result[96] + 1498) != *(_WORD *)(result[96] + 1500) )
      {
        v19 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
        sprintf(&Dest, "Angle=%d", result[113] / 1000);
        result = (_DWORD *)sub_49B4F0(v19, &Dest, 5, (_DWORD *)*v3, v5, v6, 3, 0);
LABEL_23:
        v7 = dword_563908;
        goto LABEL_24;
      }
    }
  }
LABEL_24:
  if ( v7[1535] == v7[1499] )
  {
    result = dword_563918;
    if ( *((_DWORD *)dword_563918 + 2255) )
    {
      if ( v7[6898] )
      {
        result = (_DWORD *)(*(int (**)(void))(**(_DWORD **)(v7[6898] + 72) + 4))();
        if ( result != (_DWORD *)4 )
        {
          result = Memory;
          v20 = dword_563908;
          if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2677))) >= 0
            && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2677)) )
          {
            v21 = 100
                * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2679)))
                / (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2677)));
            v22 = v21 <= 50 ? (unsigned __int16)sub_40113B(dword_576828, 255, 255 * v21 / 50, 0) : (unsigned __int16)sub_40113B(dword_576828, 255 * (100 - v21) / 50, 255, 0);
            v23 = v20[3111] / 3;
            if ( *((_DWORD *)dword_563918 + 2255) == 1 )
            {
              v36 = *(_DWORD *)(v20[89] + 8) - v20[3109] - 10;
              v38 = v36 + 8;
            }
            else
            {
              v36 = 2;
              v38 = 10;
            }
            v35 = v20[3111] / 2 - v23 / 2;
            v24 = *v3;
            v37 = v35
                + v23
                * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v20[2679]))
                / (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v20[2677]));
            (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v24 + 40))(v22, &v35);
            v35 = v37;
            v25 = *v3;
            v37 = v23 + *((_DWORD *)dword_563908 + 3111) / 2 - v23 / 2;
            (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v25 + 40))(*((unsigned __int16 *)dword_563908 + 92), &v35);
            result = Memory;
            v26 = *((_DWORD *)Memory + 1);
            v27 = *(_DWORD *)Memory ^ *(_DWORD *)(v26 + 4 * *((_DWORD *)dword_563908 + 2677));
            if ( v27 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v26 + 4 * *((_DWORD *)dword_563908 + 2677)) )
            {
              v28 = *(_DWORD *)Memory ^ *(_DWORD *)(v26 + 4 * *((_DWORD *)dword_563908 + 2679));
              v29 = 1000 * v28 / v27;
              sprintf(&v41, "%d", v28 / 1000);
              if ( v29 >= 300 )
                v30 = 2 * (v29 < 600) + 2;
              else
                v30 = 1;
              result = (_DWORD *)sub_49B310(
                                   *((_DWORD **)dword_563908 + 1518),
                                   &v41,
                                   v30,
                                   (_DWORD *)*v3,
                                   v37 + 1,
                                   v36,
                                   3,
                                   0);
            }
          }
        }
      }
    }
  }
  return result;
}
// 40113B: using guessed type _DWORD __cdecl sub_40113B(_DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (0042B010) --------------------------------------------------------
int __stdcall sub_42B010(HWND hDlg, int a2, __int16 a3, int a4)
{
  HWND v5; // eax
  FILE *v6; // edi
  _BYTE *v7; // esi
  HWND v8; // eax

  if ( a2 == 16 )
  {
    EndDialog(hDlg, nResult);
    return 1;
  }
  if ( a2 != 272 )
  {
    if ( a2 != 273 )
      return 0;
    switch ( a3 )
    {
      case 1:
        nResult = 1;
        PostMessageA(hDlg, 0x10u, 0, 0);
        return 1;
      case 2:
        PostMessageA(hDlg, 0x10u, 0, 0);
        return 1;
      case 1001:
        v5 = GetDlgItem(hDlg, 1001);
        SendMessageA(v5, 0xB1u, 0, 0);
        return 1;
    }
    return 1;
  }
  nResult = 0;
  v6 = fopen("license.txt", "rb");
  if ( v6 )
  {
    v7 = malloc(0x8000u);
    v7[fread(v7, 1u, 0x7F00u, v6)] = 0;
    SetDlgItemTextA(hDlg, 1001, v7);
    free(v7);
  }
  v8 = GetDlgItem(hDlg, 1001);
  SendMessageA(v8, 0xB1u, 0, 0);
  return 1;
}

//----- (0042B1A0) --------------------------------------------------------
int __stdcall sub_42B1A0(HWND hWnd, int a2, int nResult, int a4)
{
  if ( a2 == 16 )
  {
    EndDialog(hWnd, nResult);
  }
  else if ( a2 != 272 )
  {
    if ( a2 != 273 )
      return 0;
    if ( (unsigned int)(unsigned __int16)nResult - 1 <= 1 )
    {
      PostMessageA(hWnd, 0x10u, 0, 0);
      return 1;
    }
  }
  return 1;
}

//----- (0042B210) --------------------------------------------------------
int __stdcall sub_42B210(HWND hWnd, int a2, int nResult, int a4)
{
  _DWORD *v5; // eax
  int v6; // ecx
  HANDLE v7; // eax
  HANDLE v8; // eax
  HANDLE v9; // eax
  int v10; // [esp-4h] [ebp-30h]
  CHAR String; // [esp+8h] [ebp-24h]

  switch ( a2 )
  {
    case 16:
      EndDialog(hWnd, nResult);
      break;
    case 272:
      CheckDlgButton(hWnd, 1005, *((_DWORD *)dword_563918 + 2221));
      CheckDlgButton(hWnd, 1003, *((_DWORD *)dword_563918 + 2229));
      CheckDlgButton(hWnd, 1039, *((_DWORD *)dword_563918 + 2230));
      CheckDlgButton(hWnd, 1004, *((_DWORD *)dword_563918 + 2228));
      CheckDlgButton(hWnd, 1002, *((_DWORD *)dword_563918 + 2219));
      CheckDlgButton(hWnd, 1006, *((_DWORD *)dword_563918 + 2220));
      CheckDlgButton(hWnd, 1040, *((_DWORD *)dword_563918 + 2233));
      CheckDlgButton(hWnd, 1051, *((_DWORD *)dword_563918 + 2231));
      CheckDlgButton(hWnd, 1054, *((_DWORD *)dword_563918 + 2258));
      CheckDlgButton(hWnd, 1085, *((_DWORD *)dword_563918 + 2329));
      CheckDlgButton(hWnd, 1086, *((_DWORD *)dword_563918 + 2331));
      CheckDlgButton(hWnd, 1087, *((_DWORD *)dword_563918 + 2259));
      sprintf(&String, "%d", *((_DWORD *)dword_563918 + 2236));
      SetDlgItemTextA(hWnd, 1092, &String);
      break;
    case 273:
      if ( (unsigned __int16)nResult == 1 )
      {
        *((_DWORD *)dword_563918 + 2221) = IsDlgButtonChecked(hWnd, 1005) != 0;
        *((_DWORD *)dword_563918 + 2229) = IsDlgButtonChecked(hWnd, 1003) != 0;
        *((_DWORD *)dword_563918 + 2231) = IsDlgButtonChecked(hWnd, 1051) != 0;
        *((_DWORD *)dword_563918 + 2230) = IsDlgButtonChecked(hWnd, 1039) != 0;
        *((_DWORD *)dword_563918 + 2228) = IsDlgButtonChecked(hWnd, 1004) != 0;
        *((_DWORD *)dword_563918 + 2219) = IsDlgButtonChecked(hWnd, 1002) != 0;
        *((_DWORD *)dword_563918 + 2220) = IsDlgButtonChecked(hWnd, 1006) != 0;
        *((_DWORD *)dword_563918 + 2233) = IsDlgButtonChecked(hWnd, 1040) != 0;
        *((_DWORD *)dword_563918 + 2258) = IsDlgButtonChecked(hWnd, 1054) != 0;
        *((_DWORD *)dword_563918 + 2329) = IsDlgButtonChecked(hWnd, 1085) != 0;
        *((_DWORD *)dword_563918 + 2331) = IsDlgButtonChecked(hWnd, 1086) != 0;
        *((_DWORD *)dword_563918 + 2259) = IsDlgButtonChecked(hWnd, 1087) != 0;
        GetDlgItemTextA(hWnd, 1092, &String, 32);
        *((_DWORD *)dword_563918 + 2236) = j__atol(&String);
        v5 = dword_563918;
        if ( *((_DWORD *)dword_563918 + 2131) )
        {
          v6 = *((_DWORD *)dword_563918 + 2131);
          sub_4027F2(*((_DWORD *)dword_563918 + 2236));
          v5 = dword_563918;
        }
        sub_4A9D00((int *)dword_56390C, v5[2329] == 0);
        if ( *((_DWORD *)dword_563918 + 2331) )
        {
          v7 = GetCurrentProcess();
          SetPriorityClass(v7, 0x80u);
          v10 = 2;
        }
        else
        {
          v8 = GetCurrentProcess();
          SetPriorityClass(v8, 0x20u);
          v10 = 0;
        }
        v9 = GetCurrentProcess();
        SetThreadPriority(v9, v10);
        PostMessageA(hWnd, 0x10u, 1u, 0);
      }
      else if ( (unsigned __int16)nResult == 2 )
      {
        PostMessageA(hWnd, 0x10u, 0, 0);
      }
      break;
    default:
      return 0;
  }
  return 1;
}
// 4027F2: using guessed type _DWORD __stdcall sub_4027F2(_DWORD);

//----- (0042BA80) --------------------------------------------------------
int __stdcall sub_42BA80(HWND hDlg, int a2, int nResult, int a4)
{
  int result; // eax
  HWND v5; // eax
  void (__stdcall *v6)(HWND, BOOL); // ebx
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  HWND v10; // eax
  LPARAM *v11; // ebx
  LPARAM *v12; // ebx
  HWND v13; // eax
  HWND v14; // eax
  HWND v15; // eax
  HWND v16; // eax
  HWND v17; // eax
  HWND v18; // eax
  BOOL v19; // [esp-4h] [ebp-14h]

  switch ( a2 )
  {
    case 16:
      EndDialog(hDlg, nResult);
      return 1;
    case 272:
      v11 = (LPARAM *)off_538434;
      do
      {
        SendDlgItemMessageA(hDlg, 1079, 0x143u, 0, *v11);
        SendDlgItemMessageA(hDlg, 1080, 0x143u, 0, *v11);
        SendDlgItemMessageA(hDlg, 1081, 0x143u, 0, *v11);
        ++v11;
      }
      while ( (signed int)v11 < (signed int)&unk_538458 );
      v12 = (LPARAM *)off_5383E0;
      do
      {
        SendDlgItemMessageA(hDlg, 1103, 0x143u, 0, *v12);
        SendDlgItemMessageA(hDlg, 1104, 0x143u, 0, *v12);
        SendDlgItemMessageA(hDlg, 1105, 0x143u, 0, *v12);
        ++v12;
      }
      while ( (signed int)v12 < (signed int)off_538404 );
      SendDlgItemMessageA(hDlg, 1079, 0x14Eu, *((_DWORD *)dword_563918 + 2345), 0);
      SendDlgItemMessageA(hDlg, 1080, 0x14Eu, *((_DWORD *)dword_563918 + 2346), 0);
      SendDlgItemMessageA(hDlg, 1081, 0x14Eu, *((_DWORD *)dword_563918 + 2347), 0);
      SendDlgItemMessageA(hDlg, 1103, 0x14Eu, *((_DWORD *)dword_563918 + 2349), 0);
      SendDlgItemMessageA(hDlg, 1104, 0x14Eu, *((_DWORD *)dword_563918 + 2350), 0);
      SendDlgItemMessageA(hDlg, 1105, 0x14Eu, *((_DWORD *)dword_563918 + 2351), 0);
      CheckRadioButton(hDlg, 1093, 1096, *((_DWORD *)dword_563918 + 2348) + 1093);
      if ( IsDlgButtonChecked(hDlg, 1096) )
      {
        v13 = GetDlgItem(hDlg, 1079);
        EnableWindow(v13, 1);
        v14 = GetDlgItem(hDlg, 1080);
        EnableWindow(v14, 1);
        v15 = GetDlgItem(hDlg, 1081);
        EnableWindow(v15, 1);
      }
      else
      {
        v16 = GetDlgItem(hDlg, 1079);
        EnableWindow(v16, 0);
        v17 = GetDlgItem(hDlg, 1080);
        EnableWindow(v17, 0);
        v18 = GetDlgItem(hDlg, 1081);
        EnableWindow(v18, 0);
      }
      result = 1;
      break;
    case 273:
      if ( IsDlgButtonChecked(hDlg, 1096) )
      {
        v5 = GetDlgItem(hDlg, 1079);
        v6 = (void (__stdcall *)(HWND, BOOL))EnableWindow;
        EnableWindow(v5, 1);
        v7 = GetDlgItem(hDlg, 1080);
        EnableWindow(v7, 1);
        v19 = 1;
      }
      else
      {
        v8 = GetDlgItem(hDlg, 1079);
        v6 = (void (__stdcall *)(HWND, BOOL))EnableWindow;
        EnableWindow(v8, 0);
        v9 = GetDlgItem(hDlg, 1080);
        EnableWindow(v9, 0);
        v19 = 0;
      }
      v10 = GetDlgItem(hDlg, 1081);
      v6(v10, v19);
      if ( (unsigned __int16)nResult != 1 )
      {
        if ( (unsigned __int16)nResult == 2 )
        {
          PostMessageA(hDlg, 0x10u, 0, 0);
          return 1;
        }
        return 1;
      }
      if ( IsDlgButtonChecked(hDlg, 1093) )
      {
        *((_DWORD *)dword_563918 + 2348) = 0;
      }
      else if ( IsDlgButtonChecked(hDlg, 1094) )
      {
        *((_DWORD *)dword_563918 + 2348) = 1;
      }
      else if ( IsDlgButtonChecked(hDlg, 1095) )
      {
        *((_DWORD *)dword_563918 + 2348) = 2;
      }
      else if ( IsDlgButtonChecked(hDlg, 1096) )
      {
        *((_DWORD *)dword_563918 + 2348) = 3;
      }
      *((_DWORD *)dword_563918 + 2345) = SendDlgItemMessageA(hDlg, 1079, 0x147u, 0, 0);
      *((_DWORD *)dword_563918 + 2346) = SendDlgItemMessageA(hDlg, 1080, 0x147u, 0, 0);
      *((_DWORD *)dword_563918 + 2347) = SendDlgItemMessageA(hDlg, 1081, 0x147u, 0, 0);
      *((_DWORD *)dword_563918 + 2349) = SendDlgItemMessageA(hDlg, 1103, 0x147u, 0, 0);
      *((_DWORD *)dword_563918 + 2350) = SendDlgItemMessageA(hDlg, 1104, 0x147u, 0, 0);
      *((_DWORD *)dword_563918 + 2351) = SendDlgItemMessageA(hDlg, 1105, 0x147u, 0, 0);
      PostMessageA(hDlg, 0x10u, 1u, 0);
      result = 1;
      break;
    default:
      return 0;
  }
  return result;
}
// 5383E0: using guessed type char *off_5383E0[17];
// 538404: using guessed type char *off_538404[8];
// 538434: using guessed type char *off_538434[9];

//----- (0042BF90) --------------------------------------------------------
int __stdcall sub_42BF90(HWND hWnd, int a2, int nResult, int a4)
{
  signed int v5; // edi
  signed int v6; // eax
  signed int v7; // edi
  CHAR *v8; // ST0C_4
  HWND v9; // eax
  CHAR *v10; // ST0C_4
  HWND v11; // eax
  CHAR *v12; // ST0C_4
  HWND v13; // eax
  CHAR *v14; // ST0C_4
  HWND v15; // eax
  HWND v16; // eax
  signed int v17; // edi
  const char *v18; // eax
  char *v19; // esi
  int v20; // eax
  int v21; // eax
  const CHAR *v22; // ST0C_4
  HWND v23; // eax
  void (__stdcall *v24)(HWND, LPCSTR); // esi
  const CHAR *v25; // ST0C_4
  HWND v26; // eax
  const CHAR *v27; // ST0C_4
  HWND v28; // eax
  const CHAR *v29; // ST0C_4
  HWND v30; // eax
  const char *v31; // edx
  _WORD *v32; // edi
  char v33; // al
  unsigned int v34; // eax
  char *v35; // edi
  char v36; // cl
  char *v37; // edi
  const char *v38; // esi
  int v39; // ecx
  int v40; // eax
  bool v41; // sf
  unsigned __int8 v42; // of
  HWND v43; // eax
  int v44; // [esp+Ch] [ebp-308h]
  CHAR String; // [esp+10h] [ebp-304h]
  int v46; // [esp+210h] [ebp-104h]

  switch ( a2 )
  {
    case 16:
      EndDialog(hWnd, nResult);
      break;
    case 272:
      v20 = *((_DWORD *)dword_563918 + 2213);
      if ( v20 == 16 )
        v21 = 0;
      else
        v21 = (v20 != 32) + 1;
      CheckRadioButton(hWnd, 1010, 1012, v21 + 1010);
      CheckRadioButton(hWnd, 1081, 1083, *((_DWORD *)dword_563918 + 2214) + 1081);
      CheckDlgButton(hWnd, 1074, *((_DWORD *)dword_563918 + 2262));
      CheckDlgButton(hWnd, 1077, *((_DWORD *)dword_563918 + 2226));
      CheckDlgButton(hWnd, 1099, *((_DWORD *)dword_563918 + 2310));
      v22 = (char *)dword_563918 + 10312;
      v23 = GetDlgItem(hWnd, 1070);
      v24 = (void (__stdcall *)(HWND, LPCSTR))SetWindowTextA;
      SetWindowTextA(v23, v22);
      v25 = (char *)dword_563918 + 10440;
      v26 = GetDlgItem(hWnd, 1071);
      SetWindowTextA(v26, v25);
      v27 = (char *)dword_563918 + 9112;
      v28 = GetDlgItem(hWnd, 1075);
      SetWindowTextA(v28, v27);
      v29 = (char *)dword_563918 + 9176;
      v30 = GetDlgItem(hWnd, 1076);
      SetWindowTextA(v30, v29);
      sprintf(&String, "%s", (char *)dword_563918 + 10024);
      v44 = 1;
      v31 = (char *)dword_563918 + 10056;
      do
      {
        if ( !*v31 )
          break;
        v32 = (_WORD *)((char *)&v44 + 3);
        do
        {
          v33 = *((_BYTE *)v32 + 1);
          v32 = (_WORD *)((char *)v32 + 1);
        }
        while ( v33 );
        *v32 = 44;
        v34 = strlen(v31) + 1;
        v35 = (char *)&v44 + 3;
        do
          v36 = (v35++)[1];
        while ( v36 );
        qmemcpy(v35, v31, 4 * (v34 >> 2));
        v38 = &v31[4 * (v34 >> 2)];
        v37 = &v35[4 * (v34 >> 2)];
        v39 = v34 & 3;
        v40 = v44 + 1;
        v31 += 32;
        v42 = __OFSUB__(v44 + 1, 9);
        v41 = v44 - 8 < 0;
        qmemcpy(v37, v38, v39);
        v24 = (void (__stdcall *)(HWND, LPCSTR))SetWindowTextA;
        v44 = v40;
      }
      while ( v41 ^ v42 );
      v43 = GetDlgItem(hWnd, 1091);
      v24(v43, &String);
      break;
    case 273:
      if ( (unsigned __int16)nResult == 1 )
      {
        v5 = 0;
        do
        {
          if ( IsDlgButtonChecked(hWnd, v5 + 1010) )
          {
            if ( v5 )
              v6 = v5 != 1 ? 64 : 32;
            else
              v6 = 16;
            *((_DWORD *)dword_563918 + 2213) = v6;
          }
          ++v5;
        }
        while ( v5 < 3 );
        v7 = 0;
        do
        {
          if ( IsDlgButtonChecked(hWnd, v7 + 1081) )
            *((_DWORD *)dword_563918 + 2214) = v7;
          ++v7;
        }
        while ( v7 < 3 );
        *((_DWORD *)dword_563918 + 2262) = IsDlgButtonChecked(hWnd, 1074) != 0;
        *((_DWORD *)dword_563918 + 2226) = IsDlgButtonChecked(hWnd, 1077) != 0;
        *((_DWORD *)dword_563918 + 2310) = IsDlgButtonChecked(hWnd, 1099) != 0;
        v8 = (char *)dword_563918 + 10312;
        v9 = GetDlgItem(hWnd, 1070);
        GetWindowTextA(v9, v8, 128);
        v10 = (char *)dword_563918 + 10440;
        v11 = GetDlgItem(hWnd, 1071);
        GetWindowTextA(v11, v10, 128);
        v12 = (char *)dword_563918 + 9112;
        v13 = GetDlgItem(hWnd, 1075);
        GetWindowTextA(v13, v12, 64);
        v14 = (char *)dword_563918 + 9176;
        v15 = GetDlgItem(hWnd, 1076);
        GetWindowTextA(v15, v14, 64);
        v16 = GetDlgItem(hWnd, 1091);
        GetWindowTextA(v16, &String, 512);
        memset((char *)dword_563918 + 10024, 0, 0x120u);
        if ( String )
        {
          v17 = 0;
          do
          {
            if ( v17 >= 288 )
              break;
            v18 = (const char *)sub_48CA10((int)&v46, &String);
            if ( !v18 )
              break;
            v19 = (char *)dword_563918 + v17 + 10024;
            strncpy(v19, v18, 0x20u);
            v19[31] = 0;
            v17 += 32;
          }
          while ( String );
        }
        PostMessageA(hWnd, 0x10u, 1u, 0);
      }
      else if ( (unsigned __int16)nResult == 2 )
      {
        PostMessageA(hWnd, 0x10u, 0, 0);
      }
      break;
    default:
      return 0;
  }
  return 1;
}

//----- (0042C4B0) --------------------------------------------------------
int __stdcall sub_42C4B0(HWND hWnd, int a2, int nResult, int a4)
{
  int v5; // esi
  int v6; // edi

  if ( a2 == 16 )
  {
    EndDialog(hWnd, nResult);
    return 1;
  }
  if ( a2 == 272 )
  {
    CheckRadioButton(hWnd, 1093, 1098, 8);
    return 1;
  }
  if ( a2 != 273 )
    return 0;
  if ( (unsigned __int16)nResult != 1 )
  {
    if ( (unsigned __int16)nResult == 2 )
    {
      PostMessageA(hWnd, 0x10u, 0, 0);
      return 1;
    }
    return 1;
  }
  v5 = 0;
  while ( !IsDlgButtonChecked(hWnd, v5 + 1093) )
  {
    if ( ++v5 >= 6 )
      goto LABEL_13;
  }
  v6 = *((_DWORD *)dword_563918 + 2204);
  sub_4010C8(v5);
  *((_DWORD *)dword_563918 + 2204) = v6;
LABEL_13:
  PostMessageA(hWnd, 0x10u, 1u, 0);
  return 1;
}
// 4010C8: using guessed type _DWORD __stdcall sub_4010C8(_DWORD);

//----- (0042C5D0) --------------------------------------------------------
int __stdcall sub_42C5D0(HWND hWnd, int a2, int nResult, int a4)
{
  int v5; // esi
  signed int v6; // edi
  int v7; // esi
  const CHAR *v8; // eax
  HWND v9; // eax
  HWND v10; // esi
  signed int v11; // ebx
  int v12; // esi
  int v13; // edx
  int v14; // ecx
  int v15; // ebx
  int v16; // edx
  int v17; // ecx
  int v18; // edx
  int v19; // ecx
  int v20; // esi
  bool v21; // zf
  int v22; // eax
  char *v23; // eax
  int v24; // eax
  char *v25; // eax
  int v26; // edi
  int *v27; // esi
  char *v28; // eax
  HWND v29; // eax
  int v30; // esi
  int v31; // eax
  char *v32; // eax
  int v33; // [esp+10h] [ebp-83Ch]
  int i; // [esp+14h] [ebp-838h]
  int v35; // [esp+18h] [ebp-834h]
  int v36; // [esp+1Ch] [ebp-830h]
  int v37; // [esp+20h] [ebp-82Ch]
  int v38; // [esp+24h] [ebp-828h]
  HWND v39; // [esp+28h] [ebp-824h]
  BOOL v40; // [esp+2Ch] [ebp-820h]
  struct tagMSG Msg; // [esp+30h] [ebp-81Ch]
  int v42[512]; // [esp+4Ch] [ebp-800h]

  if ( a2 == 16 )
  {
    EndDialog(hWnd, nResult);
    return 1;
  }
  if ( a2 == 272 )
  {
    v29 = GetDlgItem(hWnd, 1038);
    ShowWindow(v29, 0);
    v30 = 0;
    do
    {
      v31 = sub_4A9DE0(dword_56390C, v30);
      dword_53E6B8[v30] = v31;
      v32 = sub_4AA690(v31);
      SetDlgItemTextA(hWnd, v30++ + 100, v32);
    }
    while ( v30 < 70 );
    CheckDlgButton(hWnd, 1052, *((_DWORD *)dword_563918 + 2344));
    CheckDlgButton(hWnd, 1069, *((_DWORD *)dword_563918 + 2343));
    return 1;
  }
  if ( a2 != 273 )
    return 0;
  if ( (signed int)(unsigned __int16)nResult > 1036 )
  {
    if ( (unsigned __int16)nResult != 1084 )
      goto LABEL_25;
LABEL_58:
    if ( (_WORD)nResult == 1036 )
      sub_401A28(dword_53E6B8, 0);
    else
      sub_401A28(dword_53E6B8, 1);
    v26 = 0;
    v27 = dword_53E6B8;
    do
    {
      sub_4AA630((int)v27);
      v28 = sub_4AA690(*v27);
      SetDlgItemTextA(hWnd, v26 + 100, v28);
      ++v27;
      ++v26;
    }
    while ( (signed int)v27 < (signed int)&unk_53E7D0 );
    CheckDlgButton(hWnd, 1052, 0);
    CheckDlgButton(hWnd, 1069, 0);
    return 1;
  }
  switch ( (unsigned __int16)nResult )
  {
    case 0x40Cu:
      goto LABEL_58;
    case 1u:
      v5 = 0;
      do
      {
        sub_4AA6C0(dword_56390C, v5, dword_53E6B8[v5]);
        ++v5;
      }
      while ( v5 < 70 );
      *((_DWORD *)dword_563918 + 2344) = IsDlgButtonChecked(hWnd, 1052) != 0;
      *((_DWORD *)dword_563918 + 2343) = IsDlgButtonChecked(hWnd, 1069) != 0;
      if ( !*((_DWORD *)dword_563918 + 2344) )
      {
        v6 = 0;
        v7 = 0;
        do
        {
          sub_4A9E20((char *)dword_56390C, v7, &v33, &i, &v38);
          if ( v33 != 32
            && i != 32
            && (sub_4AA2F0((char *)dword_56390C, v33) || v33 == 16 && sub_4AA2F0((char *)dword_56390C, i)) )
          {
            v6 = 1;
          }
          ++v7;
        }
        while ( v7 < 70 );
        if ( v6 )
        {
          v8 = (const CHAR *)sub_402617(0x74u);
          MessageBoxA(hWnd, v8, "Warning", 0x30u);
        }
      }
      PostMessageA(hWnd, 0x10u, 1u, 0);
      return 1;
    case 2u:
      PostMessageA(hWnd, 0x10u, 0, 0);
      return 1;
  }
LABEL_25:
  if ( (unsigned __int16)(nResult - 100) > 0x45u )
    return 1;
  v9 = GetDlgItem(hWnd, 1037);
  SetFocus(v9);
  v10 = GetDlgItem(hWnd, (unsigned __int16)nResult);
  v39 = v10;
  SetDlgItemTextA(hWnd, (unsigned __int16)nResult, "Press Key To Assign");
  UpdateWindow(v10);
  v11 = sub_4A9FA0();
  v12 = 0;
  for ( i = v11; v12 < v11; ++v12 )
    v42[v12] = sub_4A9E50(dword_56390C, v12);
  v40 = IsDlgButtonChecked(hWnd, 1069) != 0;
  v15 = 0;
  v38 = sub_401D39(v14, v13);
  v33 = 0;
  v35 = 0;
  v36 = 0;
  v37 = 0;
  if ( abs(sub_401D39(v17, v16) - v38) >= 1000 )
    goto LABEL_55;
  do
  {
    if ( v33 )
      goto LABEL_56;
    sub_4A9F90(dword_56390C);
    v20 = 0;
    if ( i <= 0 )
      goto LABEL_54;
    while ( 1 )
    {
      if ( v40 )
      {
        if ( v20 == 17 || v20 == 16 )
          goto LABEL_51;
        v21 = v20 == 18;
      }
      else
      {
        if ( v20 == 163 || v20 == 162 || v20 == 161 || v20 == 160 || v20 == 165 )
          goto LABEL_51;
        v21 = v20 == 164;
      }
      if ( !v21 )
      {
        if ( PeekMessageA(&Msg, hWnd, 0, 0, 0) )
        {
          while ( GetMessageA(&Msg, hWnd, 0, 0) && PeekMessageA(&Msg, hWnd, 0, 0, 0) )
            ;
        }
        v22 = sub_4A9E50(dword_56390C, v20);
        v19 = v42[v20];
        if ( !v19 )
          goto LABEL_71;
        if ( !v22 )
          break;
        if ( !v19 )
        {
LABEL_71:
          if ( v22 )
            break;
        }
      }
LABEL_51:
      if ( ++v20 >= i )
        goto LABEL_54;
    }
    v42[v20] = v22;
    if ( v22 )
    {
      *(&v35 + v15++) = v20;
      sub_4AA1F0(&v35, &v36, &v37);
      v23 = sub_4AA370(v35, v36, v37);
      SetDlgItemTextA(hWnd, (unsigned __int16)nResult, v23);
      UpdateWindow(v39);
      if ( v15 != 3 )
        goto LABEL_51;
    }
    v33 = 1;
LABEL_54:
    v24 = sub_401D39(v19, v18);
  }
  while ( abs(v24 - v38) < 1000 );
LABEL_55:
  if ( v33 )
LABEL_56:
    dword_53E528[(unsigned __int16)nResult] = sub_4A9E00(v35, v36, v37);
  v25 = sub_4AA690(dword_53E528[(unsigned __int16)nResult]);
  SetDlgItemTextA(hWnd, (unsigned __int16)nResult, v25);
  return 1;
}
// 401A28: using guessed type _DWORD __stdcall sub_401A28(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 42C5D0: using guessed type int var_800[512];

//----- (0042CCC0) --------------------------------------------------------
int __stdcall sub_42CCC0(HWND hWnd, int a2, int nResult, int a4)
{
  CHAR *v5; // ST08_4
  HWND v6; // eax
  const CHAR *v7; // ST10_4
  HWND v8; // eax

  switch ( a2 )
  {
    case 16:
      EndDialog(hWnd, nResult);
      break;
    case 272:
      v7 = (char *)dword_563918 + 9672;
      v8 = GetDlgItem(hWnd, 1086);
      SetWindowTextA(v8, v7);
      return 1;
    case 273:
      if ( (unsigned __int16)nResult == 1 )
      {
        v5 = (char *)dword_563918 + 9672;
        v6 = GetDlgItem(hWnd, 1086);
        GetWindowTextA(v6, v5, 32);
        PostMessageA(hWnd, 0x10u, 1u, 0);
        return 1;
      }
      if ( (unsigned __int16)nResult == 2 )
      {
        PostMessageA(hWnd, 0x10u, 0, 0);
        return 1;
      }
      break;
    default:
      return 0;
  }
  return 1;
}

//----- (0042CDC0) --------------------------------------------------------
int __stdcall DialogFunc_0(HWND hWnd, int a2, int nResult, int a4)
{
  CHAR *v5; // ST08_4
  HWND v6; // eax
  const CHAR *v7; // ST10_4
  HWND v8; // eax

  switch ( a2 )
  {
    case 16:
      EndDialog(hWnd, nResult);
      break;
    case 272:
      v7 = (char *)dword_563918 + 9704;
      v8 = GetDlgItem(hWnd, 1105);
      SetWindowTextA(v8, v7);
      return 1;
    case 273:
      if ( (unsigned __int16)nResult == 1 )
      {
        v5 = (char *)dword_563918 + 9704;
        v6 = GetDlgItem(hWnd, 1105);
        GetWindowTextA(v6, v5, 32);
        PostMessageA(hWnd, 0x10u, 1u, 0);
        return 1;
      }
      if ( (unsigned __int16)nResult == 2 )
      {
        PostMessageA(hWnd, 0x10u, 0, 0);
        return 1;
      }
      break;
    default:
      return 0;
  }
  return 1;
}

//----- (0042CEE0) --------------------------------------------------------
int __cdecl sub_42CEE0(double a1)
{
  return (24000000 - (signed int)((a1 + 1.57079632675) * -38197.18634314663)) % 240000;
}

//----- (0042D0A0) --------------------------------------------------------
_DWORD *__thiscall sub_42D0A0(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &off_512618;
  return result;
}
// 512618: using guessed type int (__thiscall *off_512618)(void *Memory, char);

//----- (0042D0B0) --------------------------------------------------------
void __thiscall sub_42D0B0(_DWORD *this)
{
  *this = &off_512618;
}
// 512618: using guessed type int (__thiscall *off_512618)(void *Memory, char);

//----- (0042D110) --------------------------------------------------------
int __thiscall sub_42D110(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // eax
  _DWORD *v3; // ebx
  int (__thiscall *v4)(_DWORD *); // eax
  _DWORD *v6; // eax
  int *v7; // esi
  int v8; // ebp
  unsigned int v9; // edx
  int v10; // ebp
  int v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // ebx
  _DWORD *v14; // eax
  int v15; // edx
  void (__stdcall *v16)(int *, _DWORD *, _DWORD, _DWORD, _DWORD, _DWORD); // edx
  int v17; // edx
  int v18; // ecx
  int v19; // edx
  int v20; // ecx
  __int64 i; // rax
  int v22; // ecx
  double v23; // st7
  double v24; // st7
  int v25; // edx
  int v26; // ecx
  signed int v27; // [esp+6Ch] [ebp-134h]
  int v28; // [esp+70h] [ebp-130h]
  _DWORD *v29; // [esp+74h] [ebp-12Ch]
  int v30; // [esp+78h] [ebp-128h]
  int v31; // [esp+7Ch] [ebp-124h]
  int v32; // [esp+80h] [ebp-120h]
  int v33; // [esp+84h] [ebp-11Ch]
  int v34; // [esp+88h] [ebp-118h]
  int v35; // [esp+8Ch] [ebp-114h]
  char Dest; // [esp+90h] [ebp-110h]
  int v37; // [esp+19Ch] [ebp-4h]

  v1 = this;
  v2 = operator new(0xE0u);
  v37 = 0;
  if ( v2 )
  {
    v3 = sub_4A04F0(v2, 0, dword_563910, 1, 1, 0, 0);
    v28 = (int)v3;
  }
  else
  {
    v28 = 0;
    v3 = 0;
  }
  v4 = *(int (__thiscall **)(_DWORD *))(*v3 + 128);
  v37 = -1;
  v31 = v4(v3);
  if ( !v31 )
    return (*(int (__thiscall **)(_DWORD *, signed int))*v3)(v3, 1);
  sprintf(&Dest, "%s.dll", dword_562F88);
  (*(void (__thiscall **)(_DWORD *, _DWORD, signed int, BYTE *))(*v3 + 140))(v3, v1[4], 103, &Source);
  v6 = operator new(0xCCu);
  v37 = 1;
  if ( v6 )
    v7 = sub_49FCA0(v6, (int)v3, v1[4], 103, 0, -1, -1, 0, 1);
  else
    v7 = 0;
  v37 = -1;
  v8 = GetSystemMetrics(0);
  v9 = (signed int)((unsigned __int64)(3435973838i64 * (GetSystemMetrics(1) - v7[2])) >> 32) >> 1;
  v10 = (v8 - v7[1]) / 2;
  v11 = v9 + (v9 >> 31);
  if ( sub_49CA30(v3) == 1 )
  {
    (*(void (__thiscall **)(int *, _DWORD, int, int, int, signed int, _DWORD))(*v7 + 4))(v7, 0, v31, v10, v11, 1, 0);
    Sleep(0x1194u);
  }
  else
  {
    v12 = operator new(0xCCu);
    v37 = 2;
    if ( v12 )
      v13 = sub_49FBC0(v12, (int)v3, v7[1], v7[2], 1);
    else
      v13 = 0;
    v37 = -1;
    v14 = operator new(0xCCu);
    v37 = 3;
    if ( v14 )
      v29 = sub_49FBC0(v14, v28, v7[1], v7[2], 1);
    else
      v29 = 0;
    v15 = v7[1];
    v35 = v11 + v7[2];
    v34 = v10 + v15;
    v16 = *(void (__stdcall **)(int *, _DWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v31 + 4);
    v37 = -1;
    v32 = v10;
    v33 = v11;
    v16(&v32, v29, 0, 0, 0, 0);
    v30 = sub_401D39(v18, v17);
    for ( i = sub_401D39(v20, v19) - v30; (signed int)((HIDWORD(i) ^ i) - HIDWORD(i)) <= 450; i = sub_401D39(v26, v25)
                                                                                                - v30 )
    {
      v23 = (double)(signed int)abs(sub_401D39(v22, HIDWORD(i)) - v30);
      v24 = v23 * (v23 * v23) * 256.0 / 15625000.0;
      v27 = 256;
      if ( (signed int)v24 <= 256 )
        v27 = (signed int)v24;
      (*(void (__stdcall **)(_DWORD, _DWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*v29 + 4))(0, v13, 0, 0, 0, 0);
      (*(void (__thiscall **)(int *, signed int, _DWORD, _DWORD *, _DWORD, _DWORD))(*v7 + 12))(v7, v27, 0, v13, 0, 0);
      (*(void (__thiscall **)(_DWORD *, _DWORD, int, int, int, _DWORD, _DWORD))(*v13 + 4))(v13, 0, v31, v10, v11, 0, 0);
    }
    if ( v29 )
      (*(void (__stdcall **)(signed int))*v29)(1);
    if ( v13 )
      (*(void (__thiscall **)(_DWORD *, signed int))*v13)(v13, 1);
    v3 = (_DWORD *)v28;
  }
  (*(void (__thiscall **)(int *, signed int))*v7)(v7, 1);
  (*(void (__thiscall **)(_DWORD *, signed int))*v3)(v3, 1);
  return InvalidateRect(0, 0, 0);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 563910: using guessed type int dword_563910;

//----- (0042D5F0) --------------------------------------------------------
BYTE *__thiscall sub_42D5F0(_DWORD *this)
{
  BYTE *result; // eax

  result = &Source;
  this[2134] = "Rotate Left";
  this[2135] = "Rotate Right";
  this[2136] = "Forward";
  this[2137] = "Backward";
  this[2138] = "Adjust View Out";
  this[2139] = "Adjust View In";
  this[2140] = "Strafe Left";
  this[2141] = "Strafe Right";
  this[2142] = "Hyper Forward";
  this[2143] = "Hyper Backward";
  this[2144] = &Source;
  this[2145] = "Weapon 1";
  this[2146] = "Weapon 2";
  this[2147] = "Weapon 3";
  this[2148] = "Weapon 4";
  this[2149] = "Weapon 5";
  this[2150] = "Weapon 6";
  this[2151] = "Weapon 7";
  this[2152] = "Weapon 8";
  this[2153] = "Weapon 9";
  this[2154] = "Weapon 10";
  this[2155] = "Weapon 11";
  this[2156] = "Weapon 12";
  this[2157] = "Weapon 13";
  this[2158] = "Weapon 14";
  this[2159] = "Weapon 15";
  this[2160] = "Weapon 16";
  this[2166] = "Pickup/Enter Vehicle";
  this[2167] = "Exit Vehicle";
  this[2184] = "Toggle Skills";
  this[2161] = "View Map";
  this[2162] = "Player List Up";
  this[2163] = "Player List Down";
  this[2164] = "Message Scroll Up";
  this[2165] = "Message Scroll Down";
  this[2168] = "Player List Toggle";
  this[2169] = "Message Macro #1";
  this[2170] = "Message Macro #2";
  this[2171] = "Message Macro #3";
  this[2172] = "Message Macro #4";
  this[2173] = "Message Macro #5";
  this[2174] = "Message Macro #6";
  this[2175] = "Message Macro #7";
  this[2176] = "Message Macro #8";
  this[2177] = "Message Macro #9";
  this[2178] = "Message Macro #10";
  this[2179] = "Message Macro #11";
  this[2180] = "Message Macro #12";
  this[2181] = &Source;
  this[2182] = "Message Toggle";
  this[2183] = "Toggle Spectator";
  this[2185] = "Toggle Store";
  this[2186] = "Player List Select";
  this[2187] = "Message Macro #13";
  this[2188] = "Message Macro #14";
  this[2189] = "Message Macro #15";
  this[2190] = "Message Macro #16";
  this[2191] = "Message Macro #17";
  this[2192] = "Message Macro #18";
  this[2193] = "Message Macro #19";
  this[2194] = "Message Macro #20";
  this[2195] = "Message Macro #21";
  this[2196] = "Message Macro #22";
  this[2197] = "Message Macro #23";
  this[2198] = "Message Macro #24";
  this[2199] = "Main Menu";
  this[2200] = "Help";
  this[2201] = "Inventory List Up";
  this[2202] = "Inventory List Down";
  this[2203] = "Inventory Fire";
  return result;
}

//----- (0042D960) --------------------------------------------------------
BOOL __thiscall sub_42D960(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  void *v3; // eax
  int v4; // eax

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[8];
  if ( v2 )
  {
    (**v2)(1);
    v1[8] = 0;
  }
  v3 = operator new(0x3Cu);
  if ( v3 )
    v4 = sub_402446(v3);
  else
    v4 = 0;
  v1[8] = v4;
  return InvalidateRect((HWND)v1[3], 0, 0);
}
// 402446: using guessed type int __thiscall sub_402446(_DWORD);

//----- (0042DA10) --------------------------------------------------------
WPARAM __thiscall sub_42DA10(_DWORD **this)
{
  _DWORD **v1; // esi
  struct tagMSG Msg; // [esp+10h] [ebp-1Ch]

  v1 = this;
  while ( dword_56391C || !byte_563088[0] )
  {
    if ( PeekMessageA(&Msg, 0, 0, 0, 0) )
    {
      if ( !GetMessageA(&Msg, 0, 0, 0) )
        return Msg.wParam;
      TranslateMessage(&Msg);
      DispatchMessageA(&Msg);
    }
    else
    {
      if ( v1[8] )
        (*(void (**)(void))(*v1[8] + 28))();
      if ( dword_563908 )
        sub_40272F();
      else
        Sleep(1u);
    }
  }
  return Msg.wParam;
}
// 40272F: using guessed type int sub_40272F(void);
// 56391C: using guessed type int dword_56391C;

//----- (0042DB10) --------------------------------------------------------
int __stdcall sub_42DB10(int *a1, int a2)
{
  int v2; // edi
  int *v3; // esi
  signed int v4; // ebp
  int result; // eax

  if ( !a2 )
  {
    a1[66] = sub_4A9E00(112, 0, 0);
    a1[28] = sub_4A9E00(33, 0, 0);
    a1[29] = sub_4A9E00(34, 0, 0);
    a1[30] = sub_4A9E00(16, 33, 0);
    a1[31] = sub_4A9E00(16, 34, 0);
    *a1 = sub_4A9E00(37, 0, 0);
    a1[67] = sub_4A9E00(18, 33, 0);
    a1[68] = sub_4A9E00(18, 34, 0);
    a1[1] = sub_4A9E00(39, 0, 0);
    a1[2] = sub_4A9E00(38, 0, 0);
    a1[3] = sub_4A9E00(40, 0, 0);
    a1[6] = sub_4A9E00(37, 18, 0);
    a1[7] = sub_4A9E00(39, 18, 0);
    a1[8] = sub_4A9E00(38, 16, 0);
    a1[9] = sub_4A9E00(40, 16, 0);
    a1[4] = sub_4A9E00(16, 36, 0);
    a1[5] = sub_4A9E00(16, 35, 0);
    a1[10] = 0;
    a1[47] = 0;
    a1[11] = sub_4A9E00(17, 0, 0);
    a1[12] = sub_4A9E00(9, 0, 0);
    a1[13] = sub_4A9E00(16, 9, 0);
    a1[14] = sub_4A9E00(16, 17, 0);
    a1[52] = sub_4A9E00(16, 46, 0);
    a1[15] = sub_4A9E00(116, 0, 0);
    a1[16] = sub_4A9E00(117, 0, 0);
    a1[17] = sub_4A9E00(118, 0, 0);
    a1[18] = sub_4A9E00(119, 0, 0);
    a1[19] = sub_4A9E00(36, 0, 0);
    a1[20] = sub_4A9E00(35, 0, 0);
    a1[21] = sub_4A9E00(36, 18, 0);
    a1[22] = sub_4A9E00(35, 18, 0);
    a1[23] = sub_4A9E00(49, 18, 0);
    a1[24] = sub_4A9E00(50, 18, 0);
    a1[25] = sub_4A9E00(51, 18, 0);
    a1[26] = sub_4A9E00(52, 18, 0);
    goto LABEL_5;
  }
  if ( a2 == 1 )
  {
    a1[66] = sub_4A9E00(112, 0, 0);
    a1[28] = sub_4A9E00(33, 0, 0);
    a1[29] = sub_4A9E00(34, 0, 0);
    a1[67] = sub_4A9E00(18, 33, 0);
    a1[68] = sub_4A9E00(18, 34, 0);
    a1[30] = sub_4A9E00(16, 33, 0);
    a1[31] = sub_4A9E00(16, 34, 0);
    *a1 = sub_4A9E00(296, 0, 0);
    a1[1] = sub_4A9E00(297, 0, 0);
    a1[2] = sub_4A9E00(298, 0, 0);
    a1[3] = sub_4A9E00(299, 0, 0);
    a1[4] = sub_4A9E00(16, 36, 0);
    a1[5] = sub_4A9E00(16, 35, 0);
    a1[6] = sub_4A9E00(296, 262, 0);
    a1[7] = sub_4A9E00(297, 262, 0);
    a1[8] = sub_4A9E00(298, 262, 0);
    a1[9] = sub_4A9E00(299, 262, 0);
    a1[10] = 0;
    a1[11] = sub_4A9E00(256, 0, 0);
    a1[12] = sub_4A9E00(257, 0, 0);
    a1[13] = sub_4A9E00(258, 0, 0);
    a1[14] = sub_4A9E00(259, 0, 0);
    a1[15] = sub_4A9E00(260, 0, 0);
    a1[16] = sub_4A9E00(261, 0, 0);
    a1[17] = sub_4A9E00(264, 0, 0);
    a1[18] = sub_4A9E00(265, 0, 0);
    a1[19] = sub_4A9E00(256, 262, 0);
    a1[20] = sub_4A9E00(257, 262, 0);
    a1[21] = sub_4A9E00(258, 262, 0);
    a1[22] = sub_4A9E00(259, 262, 0);
    a1[23] = sub_4A9E00(260, 262, 0);
    a1[24] = sub_4A9E00(261, 262, 0);
    a1[25] = sub_4A9E00(264, 262, 0);
    a1[26] = sub_4A9E00(265, 262, 0);
    a1[52] = sub_4A9E00(16, 46, 0);
    a1[47] = 0;
LABEL_5:
    a1[69] = sub_4A9E00(46, 0, 0);
    a1[32] = sub_4A9E00(32, 0, 0);
    a1[33] = sub_4A9E00(16, 32, 0);
    a1[34] = sub_4A9E00(113, 0, 0);
    a1[27] = sub_4A9E00(114, 0, 0);
    a1[48] = sub_4A9E00(115, 0, 0);
    a1[51] = sub_4A9E00(121, 0, 0);
    a1[50] = sub_4A9E00(122, 0, 0);
    a1[49] = sub_4A9E00(123, 0, 0);
    a1[65] = sub_4A9E00(27, 0, 0);
  }
  v2 = 65;
  v3 = a1 + 53;
  v4 = 12;
  do
  {
    *(v3 - 18) = sub_4A9E00(16, v2 + 47, 0);
    result = sub_4A9E00(18, v2, 0);
    *v3 = result;
    ++v3;
    ++v2;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (0042E380) --------------------------------------------------------
void __thiscall sub_42E380(HWND *this, char *Str1, int a3, int a4, size_t NewSize, int a6, int a7)
{
  char *v7; // esi
  HWND *v8; // ebp
  int v9; // eax
  char v10; // cl
  void *v11; // ebx
  FILE *v12; // eax
  FILE *v13; // edi
  CHAR v14[4]; // [esp+10h] [ebp-208h]
  CHAR Text; // [esp+14h] [ebp-204h]
  char Dest; // [esp+114h] [ebp-104h]

  v7 = Str1;
  v8 = this;
  sprintf(&Dest, "%s.exe", dword_562F88);
  v9 = _stricmp(Str1, &Dest);
  if ( !v9 )
  {
    v7 = "infup.exe";
    do
    {
      v10 = aInfupExe[v9];
      byte_563088[v9++] = v10;
    }
    while ( v10 );
    if ( a3 )
      sub_48D3E0("infup.exe", &Dest);
  }
  v11 = sub_4B75C0(a6, a7, (int)v14, NewSize);
  if ( a3 )
  {
    if ( !sub_4B6860(v7, (int)v11, *(int *)v14) )
    {
      sprintf(&Text, "Could not upgrade file: %s", v7);
      MessageBoxA(v8[3], &Text, "Error", 0x10u);
      exit(1);
    }
  }
  else
  {
    v12 = fopen(v7, "wb");
    v13 = v12;
    if ( !v12 )
    {
      sprintf(&Text, "Could not open file for upgrading: %s", v7);
      MessageBoxA(v8[3], &Text, "Error", 0x10u);
      exit(1);
    }
    fwrite(v11, 1u, *(size_t *)v14, v12);
    fclose(v13);
  }
  free(v11);
}

//----- (0042E560) --------------------------------------------------------
signed int __stdcall sub_42E560(_DWORD *a1, int a2)
{
  unsigned int v2; // edi
  unsigned int v3; // ebp
  int v4; // ecx
  int v5; // edx
  _DWORD *v6; // eax

  if ( a1[21] == 16 )
  {
    v2 = a1[3];
    if ( v2 >= 0x280 )
    {
      v3 = a1[2];
      if ( v3 >= 0x1E0 )
      {
        v4 = *((_DWORD *)dword_563918 + 17);
        v5 = 0;
        if ( v4 <= 0 )
        {
LABEL_9:
          *((_DWORD *)dword_563918 + v4 + 18) = v2;
          *((_DWORD *)dword_563918 + (*((_DWORD *)dword_563918 + 17))++ + 50) = a1[2];
        }
        else
        {
          v6 = (char *)dword_563918 + 200;
          while ( *(v6 - 32) != v2 || *v6 != v3 )
          {
            ++v5;
            ++v6;
            if ( v5 >= v4 )
              goto LABEL_9;
          }
        }
      }
    }
  }
  return 1;
}

//----- (0042E600) --------------------------------------------------------
CHAR *__cdecl sub_42E600(UINT uID)
{
  int v1; // eax

  LoadStringA(*((HINSTANCE *)dword_563918 + 4), uID, &byte_56AFC8[256 * dword_56C2FC], 256);
  v1 = dword_56C2FC << 8;
  dword_56C2FC = (dword_56C2FC + 1) % 16;
  return &byte_56AFC8[v1];
}
// 56C2FC: using guessed type int dword_56C2FC;

//----- (0042E660) --------------------------------------------------------
void sub_42E660()
{
  signed int v0; // ebp
  _DWORD *v1; // eax
  void (__stdcall ***v2)(signed int); // edi
  int v3; // eax
  int v4; // ebx
  int v5; // eax
  int v6; // esi
  LONG v7; // ecx
  __int64 v8; // rax
  int v9; // edi
  int v10; // ebx
  DWORD v11; // ebx
  DWORD v12; // eax
  int v13; // eax
  int v14; // [esp+20h] [ebp-58h]
  int v15; // [esp+24h] [ebp-54h]
  int v16; // [esp+28h] [ebp-50h]
  int v17; // [esp+2Ch] [ebp-4Ch]
  int v18; // [esp+30h] [ebp-48h]
  void (__stdcall ***v19)(signed int); // [esp+34h] [ebp-44h]
  unsigned int v20; // [esp+3Ch] [ebp-3Ch]
  signed int v21; // [esp+40h] [ebp-38h]
  int v22; // [esp+44h] [ebp-34h]
  int v23; // [esp+4Ch] [ebp-2Ch]
  int v24; // [esp+50h] [ebp-28h]
  LARGE_INTEGER PerformanceCount; // [esp+54h] [ebp-24h]
  int v26; // [esp+5Ch] [ebp-1Ch]
  int v27; // [esp+60h] [ebp-18h]
  int v28; // [esp+64h] [ebp-14h]
  int v29; // [esp+68h] [ebp-10h]
  int v30; // [esp+74h] [ebp-4h]

  v0 = 0;
  SetCursor(0);
  v1 = operator new(0xE0u);
  v30 = 0;
  if ( v1 )
  {
    v2 = (void (__stdcall ***)(signed int))sub_4A04F0(v1, 0, dword_563910, 0, 0, 0, 0);
    v19 = v2;
  }
  else
  {
    v19 = 0;
    v2 = 0;
  }
  v30 = -1;
  v3 = GetSystemMetrics(0);
  v4 = v3;
  v22 = v3;
  v16 = GetSystemMetrics(1);
  v5 = ((int (__thiscall *)(void (__stdcall ***)(signed int)))(*v2)[32])(v2);
  v6 = v5;
  if ( v5 )
  {
    v14 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 88))(v5, 0);
    v8 = v4;
    v9 = v4 / 2;
    v21 = 0;
    v23 = v4 / 2;
    v17 = 0;
    v18 = v4 - 1;
    do
    {
      v24 = sub_401D39(v7, HIDWORD(v8));
      if ( v9 > 0 )
      {
        v10 = v18;
        v15 = v17;
        v20 = (v9 - 1) / 0x1Au + 1;
        do
        {
          v28 = v0 + 1;
          v26 = v0;
          v29 = v16 - v15 / v22;
          v27 = v15 / v22;
          (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)v6 + 40))(v6, v14, &v26);
          v28 = v10 + 1;
          v29 = v16 - v15 / v22;
          v26 = v10;
          v27 = v15 / v22;
          (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)v6 + 40))(v6, v14, &v26);
          v27 = v15 / v22;
          v29 = v15 / v22 + 1;
          v26 = v0;
          v28 = v10;
          (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)v6 + 40))(v6, v14, &v26);
          v27 = v16 - v15 / v22 - 1;
          v26 = v0;
          v28 = v10;
          v29 = v16 - v15 / v22;
          (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)v6 + 40))(v6, v14, &v26);
          v15 += 26 * v16;
          v10 -= 26;
          v0 += 26;
          --v20;
        }
        while ( v20 );
        v0 = v21;
        v9 = v23;
      }
      v11 = Frequency.s.LowPart;
      do
      {
        if ( Frequency.s.HighPart | v11 )
        {
          QueryPerformanceCounter(&PerformanceCount);
          v7 = Frequency.s.HighPart;
          v11 = Frequency.s.LowPart;
          v13 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
        }
        else
        {
          v12 = GetTickCount();
          v11 = Frequency.s.LowPart;
          v7 = v12;
          v13 = v12 / 0xA;
        }
      }
      while ( abs(v13 - v24) < 1 );
      HIDWORD(v8) = v16;
      v17 += v16;
      --v18;
      v21 = ++v0;
    }
    while ( v0 < 26 );
    (**v19)(1);
    Sleep(0xC8u);
  }
  else
  {
    ((void (__thiscall *)(void (__stdcall ***)(signed int), signed int))**v2)(v2, 1);
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 563910: using guessed type int dword_563910;

//----- (0042E9C0) --------------------------------------------------------
int __fastcall sub_42E9C0(void *a1)
{
  signed int v1; // ebx
  signed int v2; // esi
  char *v3; // edi
  signed int v4; // eax
  signed int v5; // esi
  int v6; // edi
  int result; // eax
  long double v8; // ST10_8
  signed int v9; // [esp+Ch] [ebp-Ch]

  v1 = -192;
  do
  {
    v2 = -192;
    v9 = -192;
    v3 = (char *)&unk_53E8C8 + v1;
    do
    {
      sub_4C444A(a1);
      v4 = (signed int)(((double)v9 + 1.57079632675) * -38197.18634314663);
      a1 = (void *)240000;
      ++v2;
      v3 += 384;
      v9 = v2;
      *(v3 - 384) = (24000000 - v4) % 240000 / 1000;
    }
    while ( v2 < 192 );
    ++v1;
  }
  while ( v1 < 192 );
  v5 = 180000;
  v6 = 0;
  do
  {
    result = v5 / 240000;
    v8 = (double)(v5 % 240000) * 0.00002617993877916667;
    *(long double *)(v6 + 5646344) = cos(v8);
    *(long double *)(v6 + 5648776) = sin(v8);
    v5 += 1000;
    v6 += 8;
  }
  while ( v5 < 420000 );
  return result;
}

//----- (0042EB00) --------------------------------------------------------
int __stdcall sub_42EB00(HWND hWnd, int a2)
{
  CHAR String; // [esp+4h] [ebp-104h]

  GetWindowTextA(hWnd, &String, 256);
  if ( sub_48D1A0(&String, "Station Client") )
    PostMessageA(hWnd, 0x10u, 0, 0);
  return 1;
}

//----- (0042EB90) --------------------------------------------------------
FILE *sub_42EB90(char *Format, ...)
{
  FILE *result; // eax
  FILE *v2; // esi
  char DstBuf; // [esp+4h] [ebp-4004h]
  char v4; // [esp+2004h] [ebp-2004h]
  va_list va; // [esp+4010h] [ebp+8h]

  va_start(va, Format);
  result = fopen("infdebug.log", "at");
  v2 = result;
  if ( result )
  {
    vsprintf_s(&DstBuf, 0x2000u, Format, va);
    sprintf_s(&v4, 0x2000u, "%s", &DstBuf);
    sub_4C3361(v2, (int)"%s", &v4);
    result = (FILE *)fclose(v2);
  }
  return result;
}

//----- (0042EC60) --------------------------------------------------------
char *__cdecl sub_42EC60(int a1, _BYTE *a2, int a3)
{
  char *result; // eax
  char v4; // cl
  char v5; // cl
  _BYTE *v6; // edx

  result = (char *)(a3 + a1);
  v4 = *(_BYTE *)(a3 + a1);
  if ( v4 == 34 )
  {
    v5 = (result++)[1];
    if ( v5 )
    {
      v6 = a2;
      do
      {
        if ( v5 == 34 )
          break;
        ++result;
        *v6 = v5;
        v5 = *result;
        ++v6;
      }
      while ( *result );
LABEL_6:
      *v6 = 0;
      return result;
    }
    *a2 = 0;
  }
  else
  {
    if ( v4 )
    {
      v6 = a2;
      while ( v4 != 32 )
      {
        ++result;
        *v6 = v4;
        v4 = *result;
        ++v6;
        if ( !*result )
        {
          *v6 = 0;
          return result;
        }
      }
      goto LABEL_6;
    }
    result = a2;
    *a2 = 0;
  }
  return result;
}

//----- (0042ECF0) --------------------------------------------------------
void *__thiscall sub_42ECF0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &off_512618;
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 512618: using guessed type int (__thiscall *off_512618)(void *Memory, char);

//----- (0042ED20) --------------------------------------------------------
int __thiscall sub_42ED20(int *this)
{
  int *v1; // esi
  int v2; // eax
  HANDLE v3; // edi
  __time64_t v4; // kr00_8
  DWORD v5; // eax
  int v6; // edi
  HANDLE v7; // edi
  HCURSOR v8; // eax
  char *v9; // eax
  int v10; // ST2C_4
  signed int v11; // ebp
  HCURSOR v12; // eax
  int result; // eax
  int v14; // edi
  const CHAR *v15; // ST38_4
  int v16; // ecx
  int v17; // eax
  int v18; // ST2C_4
  const CHAR *v19; // ST38_4
  const CHAR *v20; // eax
  void (__stdcall ***v21)(signed int); // ecx
  void *v22; // eax
  int Buffer; // [esp+14h] [ebp-23Ch]
  DWORD NumberOfBytesRead; // [esp+18h] [ebp-238h]
  int v25; // [esp+1Ch] [ebp-234h]
  CHAR FileName; // [esp+20h] [ebp-230h]
  CHAR Text; // [esp+40h] [ebp-210h]
  int v28; // [esp+24Ch] [ebp-4h]

  v1 = this;
  sub_48C770(this[2259]);
  if ( !v1[2131] )
  {
    NumberOfBytesRead = (DWORD)operator new(0x20Cu);
    v28 = 0;
    if ( NumberOfBytesRead )
      v2 = sub_40128F("banner.dat", v1[2236]);
    else
      v2 = 0;
    v28 = -1;
    v1[2131] = v2;
  }
  Buffer = 0;
  sprintf(&FileName, "%c%c%c%c%c%c%c%c%c%c%c%c", 67, 58, 92, 87, 73, 78, 79, 83, 46, 83, 89, 83);
  if ( !_access(&FileName, 0) )
  {
    v3 = CreateFileA(&FileName, 0x80000000, 0, 0, 3u, 2u, 0);
    if ( v3 != (HANDLE)-1 )
    {
      ReadFile(v3, &Buffer, 4u, &NumberOfBytesRead, 0);
      CloseHandle(v3);
    }
  }
  if ( !Buffer )
  {
    v4 = _time64(0);
    v25 = HIDWORD(v4);
    v5 = GetTickCount();
    srand(v4 + v5);
    v6 = rand() << 16;
    Buffer = abs(v6 | rand());
    v7 = CreateFileA(&FileName, 0xC0000000, 0, 0, 2u, 0x80u, 0);
    if ( v7 != (HANDLE)-1 )
    {
      WriteFile(v7, &Buffer, 4u, &NumberOfBytesRead, 0);
      CloseHandle(v7);
      SetFileAttributesA(&FileName, 7u);
    }
  }
  v8 = LoadCursorA(0, (LPCSTR)0x7F02);
  SetCursor(v8);
  v9 = strrchr((const char *)v1 + 9736, 46);
  if ( v9 && !_stricmp(".cfg", v9) )
  {
    NumberOfBytesRead = (DWORD)operator new(0xA04u);
    v28 = 1;
    if ( NumberOfBytesRead )
      sub_4015D7(v1 + 2402, v1 + 2434);
    v28 = -1;
  }
  else
  {
    NumberOfBytesRead = (DWORD)operator new(0x3D08u);
    v28 = 2;
    if ( NumberOfBytesRead )
      sub_401AE1(v1 + 2434, v1[6], Buffer);
    v10 = v1[2353];
    v28 = -1;
    sub_4012F8(v10, (char *)v1 + 9416, (char *)v1 + 9608, (int)(v1 + 2418), 0);
  }
  v11 = 0;
  while ( 1 )
  {
    v12 = LoadCursorA(0, (LPCSTR)0x7F00);
    SetCursor(v12);
    result = (*(int (__stdcall **)(CHAR *))(*(_DWORD *)dword_56391C + 8))(&Text);
    v14 = result;
    if ( Text )
    {
      LoadStringA(*((HINSTANCE *)dword_563918 + 4), 6u, &byte_56AFC8[256 * dword_56C2FC], 256);
      v15 = &byte_56AFC8[256 * dword_56C2FC];
      dword_56C2FC = (dword_56C2FC + 1) % 16;
      result = MessageBoxA(*((HWND *)dword_563918 + 3), &Text, v15, 0);
    }
    if ( !v14 )
      break;
    v16 = dword_56391C;
    if ( dword_56391C )
    {
      result = (**(int (__stdcall ***)(signed int))dword_56391C)(1);
      v16 = 0;
      dword_56391C = 0;
    }
    if ( v14 == 1 )
    {
      result = MessageBoxA(
                 *((HWND *)dword_563918 + 3),
                 "Unknown alias, do you wish to create this new alias?",
                 "Notice",
                 0x44u);
      if ( result != 6 )
        break;
      NumberOfBytesRead = (DWORD)operator new(0x3D08u);
      v28 = 3;
      if ( NumberOfBytesRead )
        sub_401AE1(v1 + 2434, v1[6], Buffer);
      v28 = -1;
      v17 = (int)(v1 + 2426);
      if ( !v11 )
        v17 = (int)(v1 + 2418);
      sub_4012F8(v1[2353], (char *)v1 + 9416, (char *)v1 + 9608, v17, 1);
    }
    else
    {
      if ( v14 != 6 )
      {
        if ( Text )
          goto LABEL_41;
        v19 = (const CHAR *)sub_402617(6u);
        v20 = (const CHAR *)sub_402617(0x57u);
        result = MessageBoxA(*((HWND *)dword_563918 + 3), v20, v19, 0);
        break;
      }
      result = DialogBoxParamA(
                 *((HINSTANCE *)dword_563918 + 4),
                 (LPCSTR)0x7E,
                 *((HWND *)dword_563918 + 3),
                 DialogFunc,
                 0);
      if ( !result )
        break;
      NumberOfBytesRead = (DWORD)operator new(0x3D08u);
      v28 = 4;
      if ( NumberOfBytesRead )
        sub_401AE1(v1 + 2434, v1[6], Buffer);
      v18 = v1[2353];
      v28 = -1;
      sub_4012F8(v18, (char *)v1 + 9416, (char *)v1 + 9608, (int)(v1 + 2426), 0);
      v11 = 1;
    }
  }
  v16 = dword_56391C;
LABEL_41:
  if ( v16 )
  {
    PlaySoundA(0, 0, 0x40u);
    result = (*(int (**)(void))(*(_DWORD *)dword_56391C + 4))();
    if ( result )
    {
      if ( byte_563088[0] )
      {
        if ( dword_56391C )
        {
          result = (**(int (__stdcall ***)(signed int))dword_56391C)(1);
          dword_56391C = 0;
        }
        return result;
      }
      if ( v1[2211] )
        sub_402702();
      v21 = (void (__stdcall ***)(signed int))v1[8];
      if ( v21 )
      {
        (**v21)(1);
        v1[8] = 0;
      }
      v22 = operator new(0x1CD3Cu);
      NumberOfBytesRead = (DWORD)v22;
      v28 = 5;
      if ( v22 )
        sub_401D1B(v22);
      v28 = -1;
    }
    else if ( dword_56391C )
    {
      (**(void (__stdcall ***)(signed int))dword_56391C)(1);
      dword_56391C = 0;
    }
    result = sub_4026E4(dword_563908);
  }
  return result;
}
// 40128F: using guessed type _DWORD __stdcall sub_40128F(_DWORD, _DWORD);
// 4015D7: using guessed type _DWORD __stdcall sub_4015D7(_DWORD, _DWORD);
// 401AE1: using guessed type _DWORD __stdcall sub_401AE1(_DWORD, _DWORD, _DWORD);
// 401D1B: using guessed type int __thiscall sub_401D1B(_DWORD);
// 4026E4: using guessed type int __thiscall sub_4026E4(_DWORD);
// 402702: using guessed type int sub_402702(void);
// 56391C: using guessed type int dword_56391C;
// 56C2FC: using guessed type int dword_56C2FC;

//----- (0042F440) --------------------------------------------------------
FILE *__thiscall sub_42F440(_DWORD *this)
{
  _DWORD *v1; // esi
  FILE *result; // eax
  FILE *v3; // edi
  signed int i; // eax
  char *v5; // ecx
  _BYTE *v6; // edx
  char v7; // al
  HMENU v8; // esi
  const CHAR *v9; // eax
  int *v10; // [esp+Ch] [ebp-50Ch]
  HMENU hMenu; // [esp+10h] [ebp-508h]
  CHAR NewItem; // [esp+14h] [ebp-504h]
  char v13; // [esp+113h] [ebp-405h]
  char v14[512]; // [esp+114h] [ebp-404h]
  char v15; // [esp+314h] [ebp-204h]

  v1 = this;
  this[2130] = 0;
  result = fopen("weblinks.txt", "rt");
  v3 = result;
  if ( result )
  {
    hMenu = CreatePopupMenu();
    while ( !feof(v3) )
    {
      v14[0] = 0;
      sub_4C352E((int)v14, 512, v3);
      for ( i = strlen(v14); i > 0; v14[--i] = 0 )
      {
        if ( *(&v13 + i) >= 32 )
          break;
      }
      if ( i > 4 )
      {
        NewItem = 0;
        v15 = 0;
        v10 = (int *)v14;
        sub_48CEB0((char **)&v10, &NewItem);
        sub_48CEB0((char **)&v10, &v15);
        if ( NewItem )
        {
          if ( v15 )
          {
            v5 = &v15;
            v6 = &v1[32 * v1[2130] + 82];
            do
            {
              v7 = *v5;
              *v6++ = *v5++;
            }
            while ( v7 );
            AppendMenuA(hMenu, 0, v1[2130] + 25500, &NewItem);
            ++v1[2130];
          }
        }
      }
    }
    fclose(v3);
    v8 = GetMenu((HWND)v1[3]);
    v9 = (const CHAR *)sub_402617(3u);
    result = (FILE *)InsertMenuA(v8, 2u, 0x410u, (UINT)hMenu, v9);
  }
  return result;
}

//----- (0042F650) --------------------------------------------------------
signed int __thiscall sub_42F650(_DWORD *this)
{
  _DWORD *v1; // esi
  GUID *v2; // eax
  HWND v3; // ebx
  HDC v4; // edi
  BOOL v5; // eax
  struct IDirectDraw *v6; // eax
  bool v7; // zf
  bool v8; // sf
  signed int v9; // ebx
  signed int result; // eax
  int v11; // ebp
  signed int *v12; // edi
  int v13; // edx
  LPDIRECTDRAW lpDD; // [esp+34h] [ebp-8h]
  int v15; // [esp+38h] [ebp-4h]

  v1 = this;
  v2 = 0;
  this[17] = 0;
  if ( dword_563910 )
    v2 = (GUID *)2;
  if ( !DirectDrawCreate(v2, &lpDD, 0) )
  {
    lpDD->lpVtbl->SetCooperativeLevel(lpDD, (HWND)v1[3], 85);
    lpDD->lpVtbl->QueryInterface(lpDD, (const IID *const )&unk_517424, (LPVOID *)&v15);
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD, int (__stdcall *)(int, int)))(*(_DWORD *)v15 + 32))(
      v15,
      0,
      0,
      0,
      sub_401118);
    (*(void (__stdcall **)(int))(*(_DWORD *)v15 + 8))(v15);
    lpDD->lpVtbl->Release(lpDD);
  }
  v3 = GetDesktopWindow();
  v4 = GetDC(v3);
  v5 = GetDeviceCaps(v4, 12) == 16 || GetDeviceCaps(v4, 12) == 32;
  v1[5] = v5;
  ReleaseDC(v3, v4);
  if ( v1[5] )
  {
    v1[v1[17] + 18] = 0;
    v1[v1[17]++ + 50] = 0;
  }
  if ( !v1[2211] && !v1[5] )
  {
    v1[2211] = -1;
    v1[2212] = -1;
  }
  v15 = GetSystemMetrics(0);
  v6 = (struct IDirectDraw *)GetSystemMetrics(1);
  v7 = v1[17] == 0;
  v8 = v1[17] < 0;
  lpDD = v6;
  v9 = 800;
  result = 600;
  if ( !v8 && !v7 )
  {
    v11 = v1[17];
    v12 = v1 + 50;
    do
    {
      v13 = *(v12 - 32);
      if ( v9 <= v13 && v13 < v15 && result <= *v12 && *v12 < (signed int)lpDD )
      {
        v9 = *(v12 - 32);
        result = *v12;
      }
      ++v12;
      --v11;
    }
    while ( v11 );
  }
  if ( v1[2210] < 111 && v1[2211] == 800 )
  {
    v1[2211] = v9;
    v1[2212] = result;
  }
  if ( v1[2211] == -1 )
  {
    v1[2211] = v9;
    v1[2212] = result;
  }
  return result;
}
// 401118: using guessed type int __stdcall sub_401118(int, int);
// 563910: using guessed type int dword_563910;

//----- (0042F850) --------------------------------------------------------
BOOL sub_42F850()
{
  HANDLE v0; // eax
  BOOL result; // eax
  HMENU v2; // ebx
  UINT v3; // esi
  const CHAR *v4; // ST10_4
  HMENU v5; // esi
  const CHAR *v6; // ST10_4
  signed int v7; // [esp+0h] [ebp-110h]
  int Buffer; // [esp+4h] [ebp-10Ch]
  DWORD NumberOfBytesWritten; // [esp+8h] [ebp-108h]
  CHAR NewItem; // [esp+Ch] [ebp-104h]

  Buffer = 302006533;
  v0 = GetCurrentProcess();
  result = WriteProcessMemory(v0, sub_40286F, &Buffer, 4u, &NumberOfBytesWritten);
  if ( !NumberOfBytesWritten )
  {
    v2 = CreatePopupMenu();
    v3 = 54;
    v7 = 32;
    do
    {
      if ( v2 )
      {
        sprintf(&NewItem, "%d x %d", 32, 800);
        AppendMenuA(v2, 0, v3, &NewItem);
      }
      else
      {
        LoadStringA(*((HINSTANCE *)dword_563918 + 4), 4u, &byte_56AFC8[256 * dword_56C2FC], 256);
        v4 = &byte_56AFC8[256 * dword_56C2FC];
        dword_56C2FC = (dword_56C2FC + 1) % 16;
        AppendMenuA(0, 0, v3, v4);
      }
      ++v3;
      --v7;
    }
    while ( v7 );
    v5 = GetMenu(0);
    LoadStringA(*((HINSTANCE *)dword_563918 + 4), 5u, &byte_56AFC8[256 * dword_56C2FC], 256);
    v6 = &byte_56AFC8[256 * dword_56C2FC];
    dword_56C2FC = (dword_56C2FC + 1) % 16;
    result = InsertMenuA(v5, 2u, 0x410u, (UINT)v2, v6);
  }
  return result;
}
// 40286F: using guessed type int sub_40286F();
// 56C2FC: using guessed type int dword_56C2FC;

//----- (0042FA10) --------------------------------------------------------
BOOL __thiscall sub_42FA10(char *this)
{
  char *v1; // ebp
  HMENU v2; // edi
  UINT v3; // esi
  _DWORD *v4; // ebp
  const CHAR *v5; // eax
  HMENU v6; // esi
  const CHAR *v7; // ST10_4
  char *v9; // [esp+Ch] [ebp-108h]
  CHAR NewItem; // [esp+10h] [ebp-104h]

  v1 = this;
  v9 = this;
  v2 = CreatePopupMenu();
  if ( *((_DWORD *)v1 + 17) > 0 )
  {
    v3 = 25000;
    v4 = v1 + 72;
    do
    {
      if ( *v4 )
      {
        sprintf(&NewItem, "%d x %d", *v4, v4[32]);
        AppendMenuA(v2, 0, v3, &NewItem);
      }
      else
      {
        LoadStringA(*((HINSTANCE *)dword_563918 + 4), 4u, &byte_56AFC8[256 * dword_56C2FC], 256);
        v5 = &byte_56AFC8[256 * dword_56C2FC];
        dword_56C2FC = (dword_56C2FC + 1) % 16;
        AppendMenuA(v2, 0, v3, v5);
      }
      ++v3;
      ++v4;
    }
    while ( (signed int)(v3 - 25000) < *((_DWORD *)v9 + 17) );
    v1 = v9;
  }
  v6 = GetMenu(*((HWND *)v1 + 3));
  LoadStringA(*((HINSTANCE *)dword_563918 + 4), 5u, &byte_56AFC8[256 * dword_56C2FC], 256);
  v7 = &byte_56AFC8[256 * dword_56C2FC];
  dword_56C2FC = (dword_56C2FC + 1) % 16;
  return InsertMenuA(v6, 2u, 0x410u, (UINT)v2, v7);
}
// 56C2FC: using guessed type int dword_56C2FC;

//----- (0042FBC0) --------------------------------------------------------
int __thiscall sub_42FBC0(char *this, const CHAR *a2)
{
  char *v2; // edi
  signed int v3; // ebx
  HKEY *v4; // eax
  HKEY *v5; // esi
  LPCSTR v6; // ebp
  signed int v7; // eax
  HKEY *v8; // eax
  PHKEY v9; // eax
  BYTE *v10; // ebp
  signed __int16 v11; // ax
  signed int v12; // ebx
  BYTE *v13; // ebp
  int v14; // ebx
  int v15; // eax
  int v16; // eax
  char v17; // cl
  char *v18; // esi
  HKEY *v19; // eax
  HKEY *v20; // esi
  DWORD VolumeSerialNumber; // [esp+14h] [ebp-B78h]
  HKEY *v23; // [esp+18h] [ebp-B74h]
  DWORD MaximumComponentLength; // [esp+1Ch] [ebp-B70h]
  DWORD FileSystemFlags; // [esp+20h] [ebp-B6Ch]
  struct _MEMORYSTATUS Buffer; // [esp+24h] [ebp-B68h]
  int v27[70]; // [esp+44h] [ebp-B48h]
  CHAR SubKey; // [esp+15Ch] [ebp-A30h]
  BYTE Data; // [esp+17Ch] [ebp-A10h]
  char Str[512]; // [esp+27Ch] [ebp-910h]
  char Dest; // [esp+47Ch] [ebp-710h]
  CHAR ValueName; // [esp+57Ch] [ebp-610h]
  CHAR v33; // [esp+67Ch] [ebp-510h]
  CHAR Filename[512]; // [esp+77Ch] [ebp-410h]
  CHAR FileSystemNameBuffer; // [esp+97Ch] [ebp-210h]
  CHAR VolumeNameBuffer; // [esp+A7Ch] [ebp-110h]
  int v37; // [esp+B88h] [ebp-4h]

  v2 = this;
  v3 = 0;
  VolumeSerialNumber = 0;
  GetVolumeInformationA(
    "C:\\",
    &VolumeNameBuffer,
    0x100u,
    &VolumeSerialNumber,
    &MaximumComponentLength,
    &FileSystemFlags,
    &FileSystemNameBuffer,
    0x100u);
  *((_DWORD *)v2 + 6) = abs(VolumeSerialNumber ^ 0xCE76E519);
  sprintf(Str, "SOFTWARE\\HarmlessGames\\%s", dword_562F88);
  v4 = (HKEY *)operator new(0xCu);
  v23 = v4;
  v37 = 0;
  if ( v4 )
    v5 = sub_494200(v4, Str);
  else
    v5 = 0;
  v37 = -1;
  sub_4942C0(v5, "Misc", 1);
  *((_DWORD *)v2 + 2227) = sub_494330(v5, "Accepted", 0);
  *((_DWORD *)v2 + 2331) = sub_494330(v5, "HighPriority", 0);
  *((_DWORD *)v2 + 2210) = sub_494330(v5, "LastVersionExecuted", 0);
  *((_DWORD *)v2 + 2208) = sub_494330(v5, "ReleaseNotesCrc", 0);
  *((_DWORD *)v2 + 2209) = sub_494330(v5, "GlobalNewsCrc", 0);
  *((_DWORD *)v2 + 2261) = sub_494330(v5, "ST", 0);
  *((_DWORD *)v2 + 2206) = sub_494330(v5, "BL", 0);
  *((_DWORD *)v2 + 2207) = sub_494330(v5, "BP", 0);
  v6 = a2;
  *((_DWORD *)v2 + 2205) = sub_494330(v5, "SC", 0);
  if ( a2 == (const CHAR *)-1 )
    v6 = sub_494330(v5, "LastProfile", 0);
  if ( *((_DWORD *)v2 + 2261) )
  {
    sub_4942C0(v5, "Station", 1);
    sub_4943D0(v5, "Ticket", &Source, (LPBYTE)v2 + 9416, 0x40u);
    *((_DWORD *)v2 + 2353) = sub_494330(v5, "Id", 0);
  }
  v7 = *((_DWORD *)v2 + 2210);
  if ( !v7 || v7 >= 100 )
  {
    if ( v5 )
    {
      sub_494260(v5);
      j__free(v5);
    }
    sprintf(&Dest, "SOFTWARE\\HarmlessGames\\%s\\Profile%d", dword_562F88, v6);
    v8 = (HKEY *)operator new(0xCu);
    v23 = v8;
    v37 = 1;
    if ( v8 )
      v9 = sub_494200(v8, &Dest);
    else
      v9 = 0;
    v37 = -1;
    v5 = v9;
  }
  *((_DWORD *)v2 + 2204) = v6;
  v10 = (BYTE *)(v2 + 11636);
  do
  {
    sprintf(&SubKey, "Zone%d", v3);
    sub_4942C0(v5, &SubKey, 1);
    *((_DWORD *)v10 - 1) = sub_494330(v5, "TimeStamp", 0);
    *(_DWORD *)v10 = sub_494330(v5, "RadarScale", 0xE8u);
    *((_DWORD *)v10 + 2) = sub_494330(v5, "RadarWidth", 0);
    *((_DWORD *)v10 + 1) = sub_494330(v5, "MapScale", 0xE8u);
    *((_DWORD *)v10 + 3) = sub_494330(v5, "ZoneNewsCrc", 0);
    sub_4943D0(v5, "CfgFile", &Source, v10 - 1068, 0x28u);
    sub_494440(v5, "AssignmentItems", v10 - 1028, 0x200u);
    sub_494440(v5, "AssignmentKeys", v10 - 516, 0x200u);
    ++v3;
    v10 += 1084;
  }
  while ( v3 < 30 );
  sub_4942C0(v5, "Options", 1);
  *((_DWORD *)v2 + 2263) = sub_494330(v5, "PlayerListHeightPercent", 0x88u);
  *((_DWORD *)v2 + 2211) = sub_494330(v5, "ResolutionX", 0xFFu);
  *((_DWORD *)v2 + 2212) = sub_494330(v5, "ResolutionY", 0xFFu);
  *((_DWORD *)v2 + 2215) = sub_494330(v5, "MainRectLeft", 0);
  *((_DWORD *)v2 + 2216) = sub_494330(v5, "MainRectTop", 0);
  *((_DWORD *)v2 + 2217) = sub_494330(v5, "MainRectRight", 0);
  *((_DWORD *)v2 + 2218) = sub_494330(v5, "MainRectBottom", 0);
  *((_DWORD *)v2 + 2219) = sub_494330(v5, "AvoidPageFlipping", 0);
  *((_DWORD *)v2 + 2220) = sub_494330(v5, "VertSync", 1u);
  *((_DWORD *)v2 + 2229) = sub_494330(v5, "UseSystemBackBuffer", 0);
  *((_DWORD *)v2 + 2231) = sub_494330(v5, "TripleBuffer", 0);
  *((_DWORD *)v2 + 2228) = sub_494330(v5, "UseSystemVirtualBuffer", 0);
  *((_DWORD *)v2 + 2230) = sub_494330(v5, "UseSystemZoomBuffer", 0);
  *((_DWORD *)v2 + 2221) = sub_494330(v5, "ShowFrameRate", 0);
  *((_DWORD *)v2 + 2328) = sub_494330(v5, "RollMode", 0);
  *((_DWORD *)v2 + 2222) = sub_494330(v5, "ShowLogo", 1u);
  *((_DWORD *)v2 + 2223) = sub_494330(v5, "ShowBanners", 1u);
  *((_DWORD *)v2 + 2224) = sub_494330(v5, "ShowMessageType", 0);
  *((_WORD *)v2 + 4450) = (unsigned int)sub_494330(v5, "ShowBallTrails", 0);
  *((_DWORD *)v2 + 2266) = sub_494330(v5, "ShowEnemyThrust", 1u);
  *((_DWORD *)v2 + 2276) = sub_494330(v5, "ShowAimingTick", 1u);
  *((_DWORD *)v2 + 2277) = sub_494330(v5, "ShowSelfName", 1u);
  *((_DWORD *)v2 + 2267) = sub_494330(v5, "EnvironmentAudio", 1u);
  *((_DWORD *)v2 + 2268) = sub_494330(v5, "TipOfDay", 1u);
  *((_DWORD *)v2 + 2269) = sub_494330(v5, "TipOfDayPosition", 0);
  *((_DWORD *)v2 + 2270) = sub_494330(v5, "RadarGammaPercent", 0xE8u);
  *((_DWORD *)v2 + 2271) = sub_494330(v5, "ChatChannelEntering", 1u);
  *((_DWORD *)v2 + 10772) = sub_494330(v5, "IsAllowSpectators", 1u);
  Buffer.dwLength = 32;
  GlobalMemoryStatus(&Buffer);
  *((_DWORD *)v2 + 2213) = sub_494330(v5, "RotationCount", Buffer.dwTotalPhys > 0x2100000 ? 64 : 32);
  *((_DWORD *)v2 + 2214) = sub_494330(v5, "DetailLevel", 1u);
  *((_DWORD *)v2 + 2233) = sub_494330(v5, "RenderBackground", 1u);
  *((_DWORD *)v2 + 2234) = sub_494330(v5, "RenderStarfield", 1u);
  *((_DWORD *)v2 + 2235) = sub_494330(v5, "RenderParallax", 1u);
  *((_DWORD *)v2 + 2251) = sub_494330(v5, "EnergyPercent", 0x58u);
  *((_DWORD *)v2 + 2256) = sub_494330(v5, "ShowHealthGuage", 1u);
  *((_DWORD *)v2 + 2255) = sub_494330(v5, "ShowEnergyBar", 0);
  *((_DWORD *)v2 + 2239) = sub_494330(v5, "DisplayLosMode", 1u);
  *((_DWORD *)v2 + 2249) = sub_494330(v5, "ViewSpeed", 5u);
  *((_DWORD *)v2 + 2250) = sub_494330(v5, "ViewPercentToEdge", 0xF4u);
  *((_DWORD *)v2 + 2275) = sub_494330(v5, "TransparentMessageArea", 0);
  *((_DWORD *)v2 + 2274) = sub_494330(v5, "TransparentNotepad", 0);
  *((_DWORD *)v2 + 2240) = sub_494330(v5, "DisplayLosAlpha", 0);
  *((_DWORD *)v2 + 2241) = sub_494330(v5, "Sound3d", 0);
  *((_DWORD *)v2 + 2242) = sub_494330(v5, "SoundVolume", 0x64u);
  *((_DWORD *)v2 + 2236) = sub_494330(v5, "BannerCacheSize", 0xF4u);
  *((_DWORD *)v2 + 2247) = sub_494330(v5, "DisplayMapGrid", 0);
  *((_DWORD *)v2 + 2248) = sub_494330(v5, "FakeAlpha", 0);
  *((_DWORD *)v2 + 2253) = sub_494330(v5, "HideSmartTrans", 0);
  *((_DWORD *)v2 + 2254) = sub_494330(v5, "ShowClock", 1u);
  *((_DWORD *)v2 + 2257) = sub_494330(v5, "ShowKeystrokes", 1u);
  *((_DWORD *)v2 + 2252) = sub_494330(v5, "RotateRampTime", 0x19u);
  *((_DWORD *)v2 + 2258) = sub_494330(v5, "SkipSplash", 0);
  *((_DWORD *)v2 + 2259) = sub_494330(v5, "AlternateClock", 0);
  *((_DWORD *)v2 + 2262) = sub_494330(v5, "BlockObscene2", 1u);
  *((_DWORD *)v2 + 2264) = sub_494330(v5, "AdjustSoundDelay", 5u);
  *((_DWORD *)v2 + 2265) = sub_494330(v5, "DeathMessageMode", 0);
  *((_DWORD *)v2 + 2332) = sub_494330(v5, "ShowDifficultyLevel", 0);
  *((_DWORD *)v2 + 2333) = sub_494330(v5, "PlayerSortMode", 1u);
  *((_DWORD *)v2 + 2226) = sub_494330(v5, "ZoneSpecificMacros", 0);
  *((_DWORD *)v2 + 2272) = sub_494330(v5, "RotationSounds", 1u);
  *((_DWORD *)v2 + 2273) = sub_494330(v5, "ThrustSounds", 1u);
  *((_DWORD *)v2 + 2245) = sub_494330(v5, "NotepadWidth", 0x28u);
  *((_DWORD *)v2 + 2246) = sub_494330(v5, "NotepadLastWidth", 0xA0u);
  *((_DWORD *)v2 + 2323) = sub_494330(v5, "ShowPhysics", 0);
  *((_DWORD *)v2 + 2324) = sub_494330(v5, "ShowVehiclePhysics", 0);
  *((_DWORD *)v2 + 2325) = sub_494330(v5, "ShowVision", 0);
  *((_DWORD *)v2 + 2326) = sub_494330(v5, "ShowTerrain", 0);
  *((_DWORD *)v2 + 2327) = sub_494330(v5, "ShowTrails", 1u);
  *((_DWORD *)v2 + 2334) = sub_494330(v5, "CoordinateMode", 1u);
  *((_DWORD *)v2 + 2310) = sub_494330(v5, "AutoLogMessages", 0);
  sub_4943D0(v5, "SDirectoryAddress", "infdir1.station.sony.com", (LPBYTE)v2 + 10312, 0x80u);
  sub_4943D0(v5, "SDirectoryAddressBackup", "infdir2.station.sony.com", (LPBYTE)v2 + 10440, 0x80u);
  if ( *((_WORD *)v2 + 4450) == 1 )
    *((_WORD *)v2 + 4450) = 500;
  v11 = *((_WORD *)v2 + 4450);
  if ( v11 > 1000 )
    goto LABEL_47;
  if ( v11 < 0 )
  {
    v11 = 0;
    goto LABEL_25;
  }
  if ( v11 > 1000 )
LABEL_47:
    v11 = 1000;
LABEL_25:
  *((_WORD *)v2 + 4450) = v11;
  *((_DWORD *)v2 + 2329) = sub_494330(v5, "DisableJoystick", 0);
  sub_4A9D00((int *)dword_56390C, *((_DWORD *)dword_563918 + 2329) == 0);
  sub_4943D0(v5, "Squad", &Source, (LPBYTE)v2 + 9112, 0x40u);
  sub_4943D0(v5, "SquadPassword", &Source, &Data, 0x100u);
  sub_48C8E0(v2 + 9176, (char *)&Data, *((_DWORD *)v2 + 6));
  sub_4942C0(v5, "HiddenOptions", 1);
  *((_DWORD *)v2 + 2237) = sub_494330(v5, "ZoomMax", 0xE8u);
  *((_DWORD *)v2 + 2238) = sub_494330(v5, "ZoomTime", 0x64u);
  sub_4942C0(v5, "Chat", 1);
  v12 = 0;
  v13 = (BYTE *)(v2 + 10024);
  do
  {
    sprintf(&SubKey, "Channel%d", v12);
    sub_4943D0(v5, &SubKey, &Source, v13, 0x20u);
    ++v12;
    v13 += 32;
  }
  while ( v12 < 9 );
  sub_4942C0(v5, "Message", 1);
  *((_DWORD *)v2 + 2330) = sub_494330(v5, "NameWidth", 0x54u);
  *((_DWORD *)v2 + 2244) = sub_494330(v5, "Height", 0x54u);
  *((_DWORD *)v2 + 2232) = sub_494330(v5, "Alarm", 0);
  *((_DWORD *)v2 + 2311) = sub_494330(v5, "FilterPublic", 0);
  *((_DWORD *)v2 + 2319) = sub_494330(v5, "FilterPublicMacro", 0);
  *((_DWORD *)v2 + 2312) = sub_494330(v5, "FilterPrivate", 0);
  *((_DWORD *)v2 + 2313) = sub_494330(v5, "FilterTeam", 0);
  *((_DWORD *)v2 + 2314) = sub_494330(v5, "FilterSquad", 0);
  *((_DWORD *)v2 + 2315) = sub_494330(v5, "FilterChat", 0);
  *((_DWORD *)v2 + 2316) = sub_494330(v5, "FilterSystem", 0);
  *((_DWORD *)v2 + 2317) = sub_494330(v5, "FilterKill", 1u);
  *((_DWORD *)v2 + 2318) = sub_494330(v5, "FilterPopup", 1u);
  *((_DWORD *)v2 + 2320) = sub_494330(v5, "Entering", 1u);
  *((_DWORD *)v2 + 2321) = sub_494330(v5, "Leaving", 0);
  *((_DWORD *)v2 + 2322) = sub_494330(v5, "FixCase", 0);
  sub_4942C0(v5, "Font", 1);
  *((_DWORD *)v2 + 2335) = sub_494330(v5, "FontFloatMenu", 2u);
  *((_DWORD *)v2 + 2336) = sub_494330(v5, "FontFloatText", 2u);
  *((_DWORD *)v2 + 2337) = sub_494330(v5, "FontMessages", 2u);
  *((_DWORD *)v2 + 2338) = sub_494330(v5, "FontInventory", 2u);
  *((_DWORD *)v2 + 2339) = sub_494330(v5, "FontPlayerList", 2u);
  *((_DWORD *)v2 + 2340) = sub_494330(v5, "FontPopup", 2u);
  *((_DWORD *)v2 + 2341) = sub_494330(v5, "FontNameTag", 1u);
  *((_DWORD *)v2 + 2342) = sub_494330(v5, "FontMain", 2u);
  sub_4942C0(v5, "Login", 1);
  sub_4943D0(v5, "Name", &Source, (LPBYTE)v2 + 9608, 0x20u);
  sub_4943D0(v5, "ESysop", &Source, &Data, 0x100u);
  sub_48C8E0(v2 + 9672, (char *)&Data, *((_DWORD *)v2 + 6));
  sub_4943D0(v5, "EZonePass", &Source, &Data, 0x100u);
  sub_48C8E0(v2 + 9704, (char *)&Data, *((_DWORD *)v2 + 6));
  sub_4943D0(v5, "ParentName", &Source, (LPBYTE)v2 + 9992, 0x20u);
  sub_4943D0(v5, "ServerName", &Source, (LPBYTE)v2 + 9864, 0x80u);
  sub_4943D0(v5, "ServerAddress", &Source, (LPBYTE)v2 + 9736, 0x80u);
  sub_4942C0(v5, "Keyboard", 1);
  sub_4943D0(v5, "ReservedFirstLetters", "~ `+-", (LPBYTE)v2 + 9480, 0x80u);
  *((_DWORD *)v2 + 2345) = sub_494330(v5, "MouseLeft", 1u);
  *((_DWORD *)v2 + 2346) = sub_494330(v5, "MouseRight", 5u);
  *((_DWORD *)v2 + 2347) = sub_494330(v5, "MouseMiddle", 6u);
  *((_DWORD *)v2 + 2344) = sub_494330(v5, "EnterForMessages", 0);
  *((_DWORD *)v2 + 2343) = sub_494330(v5, "LeftRight", 0);
  *((_DWORD *)v2 + 2348) = sub_494330(v5, "MovementMode", 0);
  *((_DWORD *)v2 + 2349) = sub_494330(v5, "AxisThrust", 0);
  *((_DWORD *)v2 + 2350) = sub_494330(v5, "AxisRotate", 0);
  *((_DWORD *)v2 + 2351) = sub_494330(v5, "AxisStrafe", 0);
  *((_DWORD *)v2 + 2352) = sub_494330(v5, "AxisDeadzone", 0x40u);
  sub_401A28(v27, 0);
  v14 = 0;
  do
  {
    sprintf(&ValueName, "%d", v14);
    v15 = (int)sub_494330(v5, &ValueName, 0);
    if ( v15 )
    {
      if ( *((_DWORD *)v2 + 2210) < 122 )
        v15 = sub_4A9E00((v15 >> 16) & 0xFF, BYTE1(v15), (unsigned __int8)v15);
    }
    else
    {
      v15 = v27[v14];
    }
    sub_4AA6C0(dword_56390C, v14++, v15);
  }
  while ( v14 < 70 );
  if ( v5 )
  {
    sub_494260(v5);
    j__free(v5);
  }
  GetModuleFileNameA(0, Filename, 0x200u);
  v16 = 0;
  do
  {
    v17 = Filename[v16];
    Str[v16++] = v17;
  }
  while ( v17 );
  v18 = strrchr(Str, 92);
  if ( v18 || (v18 = strrchr(Str, 47)) != 0 )
  {
    sprintf(&v33, "%s.exe", dword_562F88);
    *v18 = 0;
    v19 = (HKEY *)operator new(0xCu);
    v23 = v19;
    v37 = 2;
    if ( v19 )
      v20 = sub_494200(v19, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths");
    else
      v20 = 0;
    v37 = -1;
    sub_4942C0(v20, &v33, 0);
    sub_494390(v20, 0, (BYTE *)Filename);
    sub_494390(v20, "Path", (BYTE *)Str);
    if ( v20 )
    {
      sub_494260(v20);
      j__free(v20);
    }
  }
  return sub_40272A();
}
// 401A28: using guessed type _DWORD __stdcall sub_401A28(_DWORD, _DWORD);
// 40272A: using guessed type int sub_40272A(void);
// 42FBC0: using guessed type char Str[512];
// 42FBC0: using guessed type int var_B48[70];
// 42FBC0: using guessed type CHAR Filename[512];

//----- (00431020) --------------------------------------------------------
void __thiscall sub_431020(char *this)
{
  char *v1; // edi
  HKEY *v2; // eax
  signed int v3; // ebp
  HKEY *v4; // esi
  HKEY *v5; // eax
  HKEY *v6; // esi
  BYTE *v7; // ebx
  BYTE *v8; // eax
  signed int v9; // ebx
  BYTE *v10; // ebp
  BYTE *v11; // eax
  BYTE *v12; // eax
  int v13; // edi
  char *v14; // ebx
  int v15; // eax
  char v16; // [esp+18h] [ebp-448h]
  CHAR v17; // [esp+130h] [ebp-330h]
  CHAR SubKey; // [esp+150h] [ebp-310h]
  CHAR ValueName; // [esp+250h] [ebp-210h]
  char Dest; // [esp+350h] [ebp-110h]
  int v21; // [esp+45Ch] [ebp-4h]

  v1 = this;
  sprintf(&Dest, "SOFTWARE\\HarmlessGames\\%s", dword_562F88);
  v2 = (HKEY *)operator new(0xCu);
  v3 = 0;
  v21 = 0;
  if ( v2 )
    v4 = sub_494200(v2, &Dest);
  else
    v4 = 0;
  v21 = -1;
  sub_4942C0(v4, "Misc", 1);
  sub_494310(v4, "LastProfile", *((_DWORD *)v1 + 2204));
  sub_494310(v4, "Accepted", *((_DWORD *)v1 + 2227));
  sub_494310(v4, "HighPriority", *((_DWORD *)v1 + 2331));
  sub_494310(v4, "LastVersionExecuted", 0x9Bu);
  sub_494310(v4, "GlobalNewsCrc", *((_DWORD *)v1 + 2209));
  sub_494310(v4, "ReleaseNotesCrc", *((_DWORD *)v1 + 2208));
  if ( *((_DWORD *)v1 + 2261) )
  {
    sub_4942C0(v4, "Station", 1);
    sub_494390(v4, "Ticket", (BYTE *)v1 + 9416);
    sub_494310(v4, "Id", *((_DWORD *)v1 + 2353));
  }
  if ( v4 )
  {
    sub_494260(v4);
    j__free(v4);
  }
  sprintf(&SubKey, "SOFTWARE\\HarmlessGames\\%s\\Profile%d", dword_562F88, *((_DWORD *)v1 + 2204));
  v5 = (HKEY *)operator new(0xCu);
  v21 = 1;
  if ( v5 )
    v6 = sub_494200(v5, &SubKey);
  else
    v6 = 0;
  v21 = -1;
  v7 = (BYTE *)(v1 + 11636);
  do
  {
    sprintf(&v17, "Zone%d", v3);
    sub_4942C0(v6, &v17, 1);
    sub_494310(v6, "TimeStamp", *((_DWORD *)v7 - 1));
    sub_494310(v6, "RadarScale", *(_DWORD *)v7);
    sub_494310(v6, "RadarWidth", *((_DWORD *)v7 + 2));
    sub_494310(v6, "MapScale", *((_DWORD *)v7 + 1));
    sub_494310(v6, "ZoneNewsCrc", *((_DWORD *)v7 + 3));
    sub_494390(v6, "CfgFile", v7 - 1068);
    sub_494480(v6, "AssignmentItems", v7 - 1028, 0x200u);
    sub_494480(v6, "AssignmentKeys", v7 - 516, 0x200u);
    ++v3;
    v7 += 1084;
  }
  while ( v3 < 30 );
  sub_4942C0(v6, "Options", 1);
  sub_494310(v6, "PlayerListHeightPercent", *((_DWORD *)v1 + 2263));
  sub_494310(v6, "ResolutionX", *((_DWORD *)v1 + 2211));
  sub_494310(v6, "ResolutionY", *((_DWORD *)v1 + 2212));
  sub_494310(v6, "MainRectLeft", *((_DWORD *)v1 + 2215));
  sub_494310(v6, "MainRectTop", *((_DWORD *)v1 + 2216));
  sub_494310(v6, "MainRectRight", *((_DWORD *)v1 + 2217));
  sub_494310(v6, "MainRectBottom", *((_DWORD *)v1 + 2218));
  sub_494310(v6, "AvoidPageFlipping", *((_DWORD *)v1 + 2219));
  sub_494310(v6, "VertSync", *((_DWORD *)v1 + 2220));
  sub_494310(v6, "ShowFrameRate", *((_DWORD *)v1 + 2221));
  sub_494310(v6, "RollMode", *((_DWORD *)v1 + 2328));
  sub_494310(v6, "ShowLogo", *((_DWORD *)v1 + 2222));
  sub_494310(v6, "ShowBanners", *((_DWORD *)v1 + 2223));
  sub_494310(v6, "ShowMessageType", *((_DWORD *)v1 + 2224));
  sub_494310(v6, "ShowBallTrails", *((_WORD *)v1 + 4450));
  sub_494310(v6, "ShowEnemyThrust", *((_DWORD *)v1 + 2266));
  sub_494310(v6, "ShowAimingTick", *((_DWORD *)v1 + 2276));
  sub_494310(v6, "ShowSelfName", *((_DWORD *)v1 + 2277));
  sub_494310(v6, "EnvironmentAudio", *((_DWORD *)v1 + 2267));
  sub_494310(v6, "TipOfDay", *((_DWORD *)v1 + 2268));
  sub_494310(v6, "TipOfDayPosition", *((_DWORD *)v1 + 2269));
  sub_494310(v6, "RadarGammaPercent", *((_DWORD *)v1 + 2270));
  sub_494310(v6, "ChatChannelEntering", *((_DWORD *)v1 + 2271));
  sub_494310(v6, "UseSystemBackBuffer", *((_DWORD *)v1 + 2229));
  sub_494310(v6, "TripleBuffer", *((_DWORD *)v1 + 2231));
  sub_494310(v6, "UseSystemZoomBuffer", *((_DWORD *)v1 + 2230));
  sub_494310(v6, "UseSystemVirtualBuffer", *((_DWORD *)v1 + 2228));
  sub_494310(v6, "RotationCount", *((_DWORD *)v1 + 2213));
  sub_494310(v6, "DetailLevel", *((_DWORD *)v1 + 2214));
  sub_494310(v6, "RenderBackground", *((_DWORD *)v1 + 2233));
  sub_494310(v6, "RenderStarfield", *((_DWORD *)v1 + 2234));
  sub_494310(v6, "RenderParallax", *((_DWORD *)v1 + 2235));
  sub_494310(v6, "DisplayLosMode", *((_DWORD *)v1 + 2239));
  sub_494310(v6, "DisplayLosAlpha", *((_DWORD *)v1 + 2240));
  sub_494310(v6, "Sound3d", *((_DWORD *)v1 + 2241));
  sub_494310(v6, "SoundVolume", *((_DWORD *)v1 + 2242));
  sub_494310(v6, "BannerCacheSize", *((_DWORD *)v1 + 2236));
  sub_494310(v6, "DisplayMapGrid", *((_DWORD *)v1 + 2247));
  sub_494310(v6, "FakeAlpha", *((_DWORD *)v1 + 2248));
  sub_494310(v6, "HideSmartTrans", *((_DWORD *)v1 + 2253));
  sub_494310(v6, "ShowClock", *((_DWORD *)v1 + 2254));
  sub_494310(v6, "ShowEnergyBar", *((_DWORD *)v1 + 2255));
  sub_494310(v6, "ShowHealthGuage", *((_DWORD *)v1 + 2256));
  sub_494310(v6, "ShowKeystrokes", *((_DWORD *)v1 + 2257));
  sub_494310(v6, "ViewSpeed", *((_DWORD *)v1 + 2249));
  sub_494310(v6, "ViewPercentToEdge", *((_DWORD *)v1 + 2250));
  sub_494310(v6, "EnergyPercent", *((_DWORD *)v1 + 2251));
  sub_494310(v6, "RotateRampTime", *((_DWORD *)v1 + 2252));
  sub_494310(v6, "SkipSplash", *((_DWORD *)v1 + 2258));
  sub_494310(v6, "AlternateClock", *((_DWORD *)v1 + 2259));
  sub_494310(v6, "DisableJoystick", *((_DWORD *)v1 + 2329));
  sub_494310(v6, "BlockObscene2", *((_DWORD *)v1 + 2262));
  sub_494310(v6, "AdjustSoundDelay", *((_DWORD *)v1 + 2264));
  sub_494310(v6, "DeathMessageMode", *((_DWORD *)v1 + 2265));
  sub_494310(v6, "ShowDifficultyLevel", *((_DWORD *)v1 + 2332));
  sub_494310(v6, "PlayerSortMode", *((_DWORD *)v1 + 2333));
  sub_494310(v6, "ZoneSpecificMacros", *((_DWORD *)v1 + 2226));
  sub_494310(v6, "RotationSounds", *((_DWORD *)v1 + 2272));
  sub_494310(v6, "ThrustSounds", *((_DWORD *)v1 + 2273));
  sub_494310(v6, "TransparentNotepad", *((_DWORD *)v1 + 2274));
  sub_494310(v6, "TransparentMessageArea", *((_DWORD *)v1 + 2275));
  sub_494310(v6, "NotepadWidth", *((_DWORD *)v1 + 2245));
  sub_494310(v6, "NotepadLastWidth", *((_DWORD *)v1 + 2246));
  sub_494310(v6, "ShowPhysics", *((_DWORD *)v1 + 2323));
  sub_494310(v6, "ShowVehiclePhysics", *((_DWORD *)v1 + 2324));
  sub_494310(v6, "ShowVision", *((_DWORD *)v1 + 2325));
  sub_494310(v6, "ShowTerrain", *((_DWORD *)v1 + 2326));
  sub_494310(v6, "ShowTrails", *((_DWORD *)v1 + 2327));
  sub_494310(v6, "CoordinateMode", *((_DWORD *)v1 + 2334));
  sub_494310(v6, "AutoLogMessages", *((_DWORD *)v1 + 2310));
  sub_494390(v6, "SDirectoryAddress", (BYTE *)v1 + 10312);
  sub_494390(v6, "SDirectoryAddressBackup", (BYTE *)v1 + 10440);
  sub_494310(v6, "IsAllowSpectators", *((_DWORD *)v1 + 10772));
  sub_494390(v6, "Squad", (BYTE *)v1 + 9112);
  v8 = sub_48C930(&SubKey, v1 + 9176, *((_DWORD *)v1 + 6));
  sub_494390(v6, "SquadPassword", v8);
  sub_4942C0(v6, "HiddenOptions", 1);
  sub_494310(v6, "ZoomMax", *((_DWORD *)v1 + 2237));
  sub_494310(v6, "ZoomTime", *((_DWORD *)v1 + 2238));
  sub_4942C0(v6, "Chat", 1);
  v9 = 0;
  v10 = (BYTE *)(v1 + 10024);
  do
  {
    sprintf(&v17, "Channel%d", v9);
    sub_494390(v6, &v17, v10);
    ++v9;
    v10 += 32;
  }
  while ( v9 < 9 );
  sub_4942C0(v6, "Message", 1);
  sub_494310(v6, "NameWidth", *((_DWORD *)v1 + 2330));
  sub_494310(v6, "Height", *((_DWORD *)v1 + 2244));
  sub_494310(v6, "Alarm", *((_DWORD *)v1 + 2232));
  sub_494310(v6, "FilterPublic", *((_DWORD *)v1 + 2311));
  sub_494310(v6, "FilterPublicMacro", *((_DWORD *)v1 + 2319));
  sub_494310(v6, "FilterPrivate", *((_DWORD *)v1 + 2312));
  sub_494310(v6, "FilterTeam", *((_DWORD *)v1 + 2313));
  sub_494310(v6, "FilterSquad", *((_DWORD *)v1 + 2314));
  sub_494310(v6, "FilterChat", *((_DWORD *)v1 + 2315));
  sub_494310(v6, "FilterSystem", *((_DWORD *)v1 + 2316));
  sub_494310(v6, "FilterKill", *((_DWORD *)v1 + 2317));
  sub_494310(v6, "FilterPopup", *((_DWORD *)v1 + 2318));
  sub_494310(v6, "Entering", *((_DWORD *)v1 + 2320));
  sub_494310(v6, "Leaving", *((_DWORD *)v1 + 2321));
  sub_494310(v6, "FixCase", *((_DWORD *)v1 + 2322));
  sub_4942C0(v6, "Font", 1);
  sub_494310(v6, "FontFloatMenu", *((_DWORD *)v1 + 2335));
  sub_494310(v6, "FontFloatText", *((_DWORD *)v1 + 2336));
  sub_494310(v6, "FontMessages", *((_DWORD *)v1 + 2337));
  sub_494310(v6, "FontInventory", *((_DWORD *)v1 + 2338));
  sub_494310(v6, "FontPlayerList", *((_DWORD *)v1 + 2339));
  sub_494310(v6, "FontPopup", *((_DWORD *)v1 + 2340));
  sub_494310(v6, "FontNameTag", *((_DWORD *)v1 + 2341));
  sub_494310(v6, "FontMain", *((_DWORD *)v1 + 2342));
  sub_4942C0(v6, "Login", 1);
  sub_494390(v6, "Name", (BYTE *)v1 + 9608);
  v11 = sub_48C930(&SubKey, v1 + 9672, *((_DWORD *)v1 + 6));
  sub_494390(v6, "ESysop", v11);
  v12 = sub_48C930(&SubKey, v1 + 9704, *((_DWORD *)v1 + 6));
  sub_494390(v6, "EZonePass", v12);
  sub_494390(v6, "ParentName", (BYTE *)v1 + 9992);
  sub_494390(v6, "ServerName", (BYTE *)v1 + 9864);
  sub_494390(v6, "ServerAddress", (BYTE *)v1 + 9736);
  sub_4942C0(v6, "Keyboard", 1);
  sub_494390(v6, "ReservedFirstLetters", (BYTE *)v1 + 9480);
  sub_494310(v6, "MouseLeft", *((_DWORD *)v1 + 2345));
  sub_494310(v6, "MouseRight", *((_DWORD *)v1 + 2346));
  sub_494310(v6, "MouseMiddle", *((_DWORD *)v1 + 2347));
  sub_494310(v6, "EnterForMessages", *((_DWORD *)v1 + 2344));
  sub_494310(v6, "LeftRight", *((_DWORD *)v1 + 2343));
  sub_494310(v6, "MovementMode", *((_DWORD *)v1 + 2348));
  sub_494310(v6, "AxisThrust", *((_DWORD *)v1 + 2349));
  sub_494310(v6, "AxisRotate", *((_DWORD *)v1 + 2350));
  sub_494310(v6, "AxisStrafe", *((_DWORD *)v1 + 2351));
  sub_494310(v6, "AxisDeadzone", *((_DWORD *)v1 + 2352));
  sub_401A28(&v16, 0);
  v13 = 0;
  v14 = &v16;
  do
  {
    sub_4AA630((int)v14);
    sprintf(&ValueName, "%d", v13);
    v15 = sub_4A9DE0(dword_56390C, v13);
    if ( v15 == *(_DWORD *)v14 )
      LOBYTE(v15) = 0;
    sub_494310(v6, &ValueName, v15);
    ++v13;
    v14 += 4;
  }
  while ( v13 < 70 );
  if ( v6 )
  {
    sub_494260(v6);
    j__free(v6);
  }
}
// 401A28: using guessed type _DWORD __stdcall sub_401A28(_DWORD, _DWORD);

//----- (00432010) --------------------------------------------------------
int __cdecl sub_432010(int a1)
{
  int v1; // eax
  int v2; // edx
  int *v3; // edx
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  bool v9; // zf
  int v10; // ebx
  int v11; // eax
  int v12; // edx
  int *v13; // edx
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // ebx
  int v20; // eax
  int v21; // edx
  int (*i)(); // edx
  int v23; // ecx
  int v24; // eax
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // ebx
  int v29; // eax
  int v30; // edx
  int *v31; // edx
  int v32; // ecx
  int v33; // eax
  int v34; // eax
  int v35; // eax
  int v36; // eax
  int v37; // ebx
  int v38; // eax
  int v39; // edx
  int *v40; // edx
  int v41; // ecx
  int v42; // eax
  int v43; // eax
  int v44; // eax
  int v45; // eax
  int v46; // ebx
  int v47; // eax
  int v48; // edx
  int (*v49)(); // edx
  int v50; // ecx
  int v51; // eax
  int v52; // eax
  int v53; // eax
  int v54; // eax
  int v55; // ebx
  int v56; // eax
  int v57; // edx
  int *v58; // edx
  int v59; // ecx
  int v60; // eax
  int v61; // eax
  int v62; // eax
  int v63; // eax
  int v64; // ebx
  int v65; // eax
  int v66; // edx
  int (*j)(); // edx
  int v68; // ecx
  int v69; // eax
  int v70; // eax
  int v71; // eax
  int v72; // eax
  int v73; // ebx
  int v74; // eax
  int v75; // edx
  void (*k)(); // edx
  int v77; // ecx
  int v78; // eax
  int v79; // eax
  int v80; // eax
  int v81; // eax
  int v82; // ebx
  int v83; // eax
  int v84; // edx
  int (*v85)(); // edx
  int v86; // ecx
  int v87; // eax
  int v88; // eax
  int v89; // eax
  int v90; // eax
  int v91; // ebx
  int v92; // eax
  int v93; // edx
  void (*l)(); // edx
  int v95; // ecx
  int v96; // eax
  int v97; // eax
  int v98; // eax
  int v99; // eax
  int v100; // ebx
  int v101; // eax
  int v102; // edx
  int *v103; // edx
  int v104; // ecx
  int v105; // eax
  int v106; // eax
  int v107; // eax
  int v108; // eax
  int v109; // ebx
  int v110; // eax
  int v111; // edx
  int (*v112)(); // edx
  int v113; // ecx
  int v114; // eax
  int v115; // eax
  int v116; // eax
  int v117; // eax
  int v118; // ebx
  int v119; // eax
  int v120; // edx
  int *v121; // edx
  int v122; // ecx
  int v123; // eax
  int v124; // eax
  int v125; // eax
  int v126; // eax
  int v127; // ebx
  int v128; // eax
  int v129; // edx
  int *v130; // edx
  int v131; // ecx
  int v132; // eax
  int v133; // eax
  int v134; // eax
  int v135; // eax
  int v136; // ebx
  int v137; // eax
  int v138; // edx
  int *v139; // edx
  int v140; // ecx
  int v141; // eax
  int v142; // eax
  int v143; // eax
  int v144; // eax
  int v145; // ebx
  int v146; // eax
  int v147; // edx
  int (*v148)(); // edx
  int v149; // ecx
  int v150; // eax
  int v151; // eax
  int v152; // eax
  int v153; // eax
  int v154; // ebx
  int v155; // eax
  int v156; // edx
  void (*m)(); // edx
  int v158; // ecx
  int v159; // eax
  int v160; // eax
  int v161; // eax
  int v162; // eax
  int v163; // ebx
  int v164; // eax
  int v165; // edx
  int *v166; // edx
  int v167; // ecx
  int v168; // eax
  int v169; // eax
  int v170; // eax
  int v171; // eax
  int v172; // ebx
  int v173; // eax
  int v174; // edx
  int *v175; // edx
  int v176; // ecx
  int v177; // eax
  int v178; // eax
  int v179; // eax
  int v180; // eax
  int v181; // ebx
  int v182; // eax
  int v183; // edx
  int *v184; // ecx
  int v185; // edx
  int v186; // eax
  int v187; // eax
  int v188; // eax
  int v189; // eax
  int v190; // ebx
  int v191; // eax
  int v192; // edx
  int (*n)(); // edx
  int v194; // ecx
  int v195; // eax
  int v196; // eax
  int v197; // eax
  int v198; // eax
  int v199; // ebx
  int v200; // eax
  int v201; // edx
  int *v202; // edx
  int v203; // ecx
  int v204; // eax
  int v205; // eax
  int v206; // eax
  int v207; // eax
  int v208; // ebx
  int v209; // eax
  int v210; // edx
  int (*ii)(); // edx
  int v212; // ecx
  int v213; // eax
  int v214; // eax
  int v215; // eax
  int v216; // eax
  int v217; // ebx
  int v218; // eax
  int v219; // edx
  int *v220; // edx
  int v221; // ecx
  int v222; // eax
  int v223; // eax
  int v224; // eax
  int v226; // [esp+Ch] [ebp+4h]

  v1 = -1;
  if ( a1 )
  {
    v2 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a1]) >> 8) ^ BYTE2(a1));
    v1 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v2]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a1] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a1))] ^ ((dword_53A208[v2] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a1] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v3 = (int *)&sub_401735;
  if ( (_UNKNOWN *)((char *)&sub_402234 - 4) > &sub_401735 )
  {
    do
    {
      v4 = *v3;
      v5 = dword_53A208[(unsigned __int8)(v1 ^ ((unsigned int)*v3 >> 24))] ^ (v1 >> 8) & 0xFFFFFF;
      v6 = dword_53A208[(unsigned __int8)(v5 ^ ((unsigned int)*v3 >> 16))] ^ (v5 >> 8) & 0xFFFFFF;
      v7 = dword_53A208[(unsigned __int8)(v6 ^ (*(_WORD *)v3 >> 8))] ^ (v6 >> 8) & 0xFFFFFF;
      ++v3;
      v1 = dword_53A208[(unsigned __int8)(v7 ^ v4)] ^ (v7 >> 8) & 0xFFFFFF;
    }
    while ( v3 < (int *)&sub_402234 - 1 );
  }
  for ( ; v3 < (int *)&sub_402234; v3 = (int *)((char *)v3 + 1) )
    v1 = dword_53A208[(unsigned __int8)(v1 ^ *(_BYTE *)v3)] ^ (v1 >> 8) & 0xFFFFFF;
  v8 = ~v1;
  v9 = a1 + v8 == 0;
  v10 = a1 + v8;
  v226 = a1 + v8;
  v11 = -1;
  if ( !v9 )
  {
    v12 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v10]) ^ BYTE1(v10))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v10]) >> 8) ^ BYTE2(v226));
    v11 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v12]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v10]) ^ BYTE1(v10))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v10] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v226))] ^ ((dword_53A208[v12] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v10]) ^ BYTE1(v10))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v10] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v13 = (int *)&sub_402441;
  if ( (_UNKNOWN *)((char *)&sub_40170D - 4) > &sub_402441 )
  {
    do
    {
      v14 = *v13;
      v15 = dword_53A208[(unsigned __int8)(v11 ^ ((unsigned int)*v13 >> 24))] ^ (v11 >> 8) & 0xFFFFFF;
      v16 = dword_53A208[(unsigned __int8)(v15 ^ ((unsigned int)*v13 >> 16))] ^ (v15 >> 8) & 0xFFFFFF;
      v17 = dword_53A208[(unsigned __int8)(v16 ^ (*(_WORD *)v13 >> 8))] ^ (v16 >> 8) & 0xFFFFFF;
      ++v13;
      v11 = dword_53A208[(unsigned __int8)(v17 ^ v14)] ^ (v17 >> 8) & 0xFFFFFF;
    }
    while ( v13 < (int *)&sub_40170D - 1 );
  }
  for ( ; v13 < (int *)&sub_40170D; v13 = (int *)((char *)v13 + 1) )
    v11 = dword_53A208[(unsigned __int8)(v11 ^ *(_BYTE *)v13)] ^ (v11 >> 8) & 0xFFFFFF;
  v18 = ~v11;
  v9 = v18 + v10 == 0;
  v19 = v18 + v10;
  v20 = -1;
  if ( !v9 )
  {
    v21 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v19]) ^ BYTE1(v19))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v19]) >> 8) ^ BYTE2(v19));
    v20 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v21]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v19]) ^ BYTE1(v19))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v19] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v19))] ^ ((dword_53A208[v21] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v19]) ^ BYTE1(v19))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v19] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( i = sub_4027A7;
        (char *)i < (char *)((char *)&sub_40201D - 4);
        v20 = dword_53A208[(unsigned __int8)(v26 ^ v23)] ^ (v26 >> 8) & 0xFFFFFF )
  {
    v23 = *(_DWORD *)i;
    v24 = dword_53A208[(unsigned __int8)(v20 ^ (*(_DWORD *)i >> 24))] ^ (v20 >> 8) & 0xFFFFFF;
    v25 = dword_53A208[(unsigned __int8)(v24 ^ (*(_DWORD *)i >> 16))] ^ (v24 >> 8) & 0xFFFFFF;
    v26 = dword_53A208[(unsigned __int8)(v25 ^ (*(_WORD *)i >> 8))] ^ (v25 >> 8) & 0xFFFFFF;
    i = (int (*)())((char *)i + 4);
  }
  for ( ; (char *)i < (char *)&sub_40201D; i = (int (*)())((char *)i + 1) )
    v20 = dword_53A208[(unsigned __int8)(v20 ^ *(_BYTE *)i)] ^ (v20 >> 8) & 0xFFFFFF;
  v27 = ~v20;
  v9 = v27 + v19 == 0;
  v28 = v27 + v19;
  v29 = -1;
  if ( !v9 )
  {
    v30 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v28]) ^ BYTE1(v28))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v28]) >> 8) ^ BYTE2(v28));
    v29 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v30]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v28]) ^ BYTE1(v28))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v28] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v28))] ^ ((dword_53A208[v30] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v28]) ^ BYTE1(v28))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v28] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v31 = (int *)&sub_4015D2;
  if ( (_UNKNOWN *)((char *)&sub_4010D2 - 4) > &sub_4015D2 )
  {
    do
    {
      v32 = *v31;
      v33 = dword_53A208[(unsigned __int8)(v29 ^ ((unsigned int)*v31 >> 24))] ^ (v29 >> 8) & 0xFFFFFF;
      v34 = dword_53A208[(unsigned __int8)(v33 ^ ((unsigned int)*v31 >> 16))] ^ (v33 >> 8) & 0xFFFFFF;
      v35 = dword_53A208[(unsigned __int8)(v34 ^ (*(_WORD *)v31 >> 8))] ^ (v34 >> 8) & 0xFFFFFF;
      ++v31;
      v29 = dword_53A208[(unsigned __int8)(v35 ^ v32)] ^ (v35 >> 8) & 0xFFFFFF;
    }
    while ( v31 < (int *)&sub_4010D2 - 1 );
  }
  for ( ; v31 < (int *)&sub_4010D2; v31 = (int *)((char *)v31 + 1) )
    v29 = dword_53A208[(unsigned __int8)(v29 ^ *(_BYTE *)v31)] ^ (v29 >> 8) & 0xFFFFFF;
  v36 = ~v29;
  v9 = v36 + v28 == 0;
  v37 = v36 + v28;
  v38 = -1;
  if ( !v9 )
  {
    v39 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v37]) ^ BYTE1(v37))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v37]) >> 8) ^ BYTE2(v37));
    v38 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v39]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v37]) ^ BYTE1(v37))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v37] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v37))] ^ ((dword_53A208[v39] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v37]) ^ BYTE1(v37))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v37] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v40 = (int *)&sub_402293;
  if ( (_UNKNOWN *)((char *)&sub_401087 - 4) > &sub_402293 )
  {
    do
    {
      v41 = *v40;
      v42 = dword_53A208[(unsigned __int8)(v38 ^ ((unsigned int)*v40 >> 24))] ^ (v38 >> 8) & 0xFFFFFF;
      v43 = dword_53A208[(unsigned __int8)(v42 ^ ((unsigned int)*v40 >> 16))] ^ (v42 >> 8) & 0xFFFFFF;
      v44 = dword_53A208[(unsigned __int8)(v43 ^ (*(_WORD *)v40 >> 8))] ^ (v43 >> 8) & 0xFFFFFF;
      ++v40;
      v38 = dword_53A208[(unsigned __int8)(v44 ^ v41)] ^ (v44 >> 8) & 0xFFFFFF;
    }
    while ( v40 < (int *)&sub_401087 - 1 );
  }
  for ( ; v40 < (int *)&sub_401087; v40 = (int *)((char *)v40 + 1) )
    v38 = dword_53A208[(unsigned __int8)(v38 ^ *(_BYTE *)v40)] ^ (v38 >> 8) & 0xFFFFFF;
  v45 = ~v38;
  v9 = v45 + v37 == 0;
  v46 = v45 + v37;
  v47 = -1;
  if ( !v9 )
  {
    v48 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v46]) ^ BYTE1(v46))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v46]) >> 8) ^ BYTE2(v46));
    v47 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v48]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v46]) ^ BYTE1(v46))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v46] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v46))] ^ ((dword_53A208[v48] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v46]) ^ BYTE1(v46))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v46] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v49 = (int (*)())&sub_401659;
  if ( (_UNKNOWN *)((char *)sub_40196A - 4) > &sub_401659 )
  {
    do
    {
      v50 = *(_DWORD *)v49;
      v51 = dword_53A208[(unsigned __int8)(v47 ^ (*(_DWORD *)v49 >> 24))] ^ (v47 >> 8) & 0xFFFFFF;
      v52 = dword_53A208[(unsigned __int8)(v51 ^ (*(_DWORD *)v49 >> 16))] ^ (v51 >> 8) & 0xFFFFFF;
      v53 = dword_53A208[(unsigned __int8)(v52 ^ (*(_WORD *)v49 >> 8))] ^ (v52 >> 8) & 0xFFFFFF;
      v49 = (int (*)())((char *)v49 + 4);
      v47 = dword_53A208[(unsigned __int8)(v53 ^ v50)] ^ (v53 >> 8) & 0xFFFFFF;
    }
    while ( (char *)v49 < (char *)sub_40196A - 4 );
  }
  for ( ; (unsigned int)v49 < (unsigned int)sub_40196A; v49 = (int (*)())((char *)v49 + 1) )
    v47 = dword_53A208[(unsigned __int8)(v47 ^ *(_BYTE *)v49)] ^ (v47 >> 8) & 0xFFFFFF;
  v54 = ~v47;
  v9 = v54 + v46 == 0;
  v55 = v54 + v46;
  v56 = -1;
  if ( !v9 )
  {
    v57 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v55]) ^ BYTE1(v55))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v55]) >> 8) ^ BYTE2(v55));
    v56 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v57]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v55]) ^ BYTE1(v55))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v55] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v55))] ^ ((dword_53A208[v57] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v55]) ^ BYTE1(v55))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v55] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v58 = (int *)&sub_401A96;
  if ( (_UNKNOWN *)((char *)&sub_402054 - 4) > &sub_401A96 )
  {
    do
    {
      v59 = *v58;
      v60 = dword_53A208[(unsigned __int8)(v56 ^ ((unsigned int)*v58 >> 24))] ^ (v56 >> 8) & 0xFFFFFF;
      v61 = dword_53A208[(unsigned __int8)(v60 ^ ((unsigned int)*v58 >> 16))] ^ (v60 >> 8) & 0xFFFFFF;
      v62 = dword_53A208[(unsigned __int8)(v61 ^ (*(_WORD *)v58 >> 8))] ^ (v61 >> 8) & 0xFFFFFF;
      ++v58;
      v56 = dword_53A208[(unsigned __int8)(v62 ^ v59)] ^ (v62 >> 8) & 0xFFFFFF;
    }
    while ( v58 < (int *)&sub_402054 - 1 );
  }
  for ( ; v58 < (int *)&sub_402054; v58 = (int *)((char *)v58 + 1) )
    v56 = dword_53A208[(unsigned __int8)(v56 ^ *(_BYTE *)v58)] ^ (v56 >> 8) & 0xFFFFFF;
  v63 = ~v56;
  v9 = v63 + v55 == 0;
  v64 = v63 + v55;
  v65 = -1;
  if ( !v9 )
  {
    v66 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v64]) ^ BYTE1(v64))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v64]) >> 8) ^ BYTE2(v64));
    v65 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v66]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v64]) ^ BYTE1(v64))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v64] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v64))] ^ ((dword_53A208[v66] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v64]) ^ BYTE1(v64))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v64] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( j = sub_4024D7;
        (char *)j < (char *)sub_401654 - 4;
        v65 = dword_53A208[(unsigned __int8)(v71 ^ v68)] ^ (v71 >> 8) & 0xFFFFFF )
  {
    v68 = *(_DWORD *)j;
    v69 = dword_53A208[(unsigned __int8)(v65 ^ (*(_DWORD *)j >> 24))] ^ (v65 >> 8) & 0xFFFFFF;
    v70 = dword_53A208[(unsigned __int8)(v69 ^ (*(_DWORD *)j >> 16))] ^ (v69 >> 8) & 0xFFFFFF;
    v71 = dword_53A208[(unsigned __int8)(v70 ^ (*(_WORD *)j >> 8))] ^ (v70 >> 8) & 0xFFFFFF;
    j = (int (*)())((char *)j + 4);
  }
  for ( ; (unsigned int)j < (unsigned int)sub_401654; j = (int (*)())((char *)j + 1) )
    v65 = dword_53A208[(unsigned __int8)(v65 ^ *(_BYTE *)j)] ^ (v65 >> 8) & 0xFFFFFF;
  v72 = ~v65;
  v9 = v72 + v64 == 0;
  v73 = v72 + v64;
  v74 = -1;
  if ( !v9 )
  {
    v75 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v73]) ^ BYTE1(v73))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v73]) >> 8) ^ BYTE2(v73));
    v74 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v75]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v73]) ^ BYTE1(v73))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v73] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v73))] ^ ((dword_53A208[v75] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v73]) ^ BYTE1(v73))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v73] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( k = sub_494930;
        (char *)k < (char *)sub_4955C0 - 4;
        v74 = dword_53A208[(unsigned __int8)(v80 ^ v77)] ^ (v80 >> 8) & 0xFFFFFF )
  {
    v77 = *(_DWORD *)k;
    v78 = dword_53A208[(unsigned __int8)(v74 ^ (*(_DWORD *)k >> 24))] ^ (v74 >> 8) & 0xFFFFFF;
    v79 = dword_53A208[(unsigned __int8)(v78 ^ (*(_DWORD *)k >> 16))] ^ (v78 >> 8) & 0xFFFFFF;
    v80 = dword_53A208[(unsigned __int8)(v79 ^ (*(_WORD *)k >> 8))] ^ (v79 >> 8) & 0xFFFFFF;
    k = (void (*)())((char *)k + 4);
  }
  for ( ; (unsigned int)k < (unsigned int)sub_4955C0; k = (void (*)())((char *)k + 1) )
    v74 = dword_53A208[(unsigned __int8)(v74 ^ *(_BYTE *)k)] ^ (v74 >> 8) & 0xFFFFFF;
  v81 = ~v74;
  v9 = v81 + v73 == 0;
  v82 = v81 + v73;
  v83 = -1;
  if ( !v9 )
  {
    v84 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v82]) ^ BYTE1(v82))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v82]) >> 8) ^ BYTE2(v82));
    v83 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v84]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v82]) ^ BYTE1(v82))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v82] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v82))] ^ ((dword_53A208[v84] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v82]) ^ BYTE1(v82))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v82] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v85 = (int (*)())&sub_401B8B;
  if ( (_UNKNOWN *)((char *)sub_40278E - 4) > &sub_401B8B )
  {
    do
    {
      v86 = *(_DWORD *)v85;
      v87 = dword_53A208[(unsigned __int8)(v83 ^ (*(_DWORD *)v85 >> 24))] ^ (v83 >> 8) & 0xFFFFFF;
      v88 = dword_53A208[(unsigned __int8)(v87 ^ (*(_DWORD *)v85 >> 16))] ^ (v87 >> 8) & 0xFFFFFF;
      v89 = dword_53A208[(unsigned __int8)(v88 ^ (*(_WORD *)v85 >> 8))] ^ (v88 >> 8) & 0xFFFFFF;
      v85 = (int (*)())((char *)v85 + 4);
      v83 = dword_53A208[(unsigned __int8)(v89 ^ v86)] ^ (v89 >> 8) & 0xFFFFFF;
    }
    while ( (char *)v85 < (char *)sub_40278E - 4 );
  }
  for ( ; (unsigned int)v85 < (unsigned int)sub_40278E; v85 = (int (*)())((char *)v85 + 1) )
    v83 = dword_53A208[(unsigned __int8)(v83 ^ *(_BYTE *)v85)] ^ (v83 >> 8) & 0xFFFFFF;
  v90 = ~v83;
  v9 = v90 + v82 == 0;
  v91 = v90 + v82;
  v92 = -1;
  if ( !v9 )
  {
    v93 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v91]) ^ BYTE1(v91))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v91]) >> 8) ^ BYTE2(v91));
    v92 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v93]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v91]) ^ BYTE1(v91))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v91] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v91))] ^ ((dword_53A208[v93] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v91]) ^ BYTE1(v91))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v91] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( l = sub_4AAB10;
        (char *)l < (char *)sub_4AC7D0 - 4;
        v92 = dword_53A208[(unsigned __int8)(v98 ^ v95)] ^ (v98 >> 8) & 0xFFFFFF )
  {
    v95 = *(_DWORD *)l;
    v96 = dword_53A208[(unsigned __int8)(v92 ^ (*(_DWORD *)l >> 24))] ^ (v92 >> 8) & 0xFFFFFF;
    v97 = dword_53A208[(unsigned __int8)(v96 ^ (*(_DWORD *)l >> 16))] ^ (v96 >> 8) & 0xFFFFFF;
    v98 = dword_53A208[(unsigned __int8)(v97 ^ (*(_WORD *)l >> 8))] ^ (v97 >> 8) & 0xFFFFFF;
    l = (void (*)())((char *)l + 4);
  }
  for ( ; (unsigned int)l < (unsigned int)sub_4AC7D0; l = (void (*)())((char *)l + 1) )
    v92 = dword_53A208[(unsigned __int8)(v92 ^ *(_BYTE *)l)] ^ (v92 >> 8) & 0xFFFFFF;
  v99 = ~v92;
  v9 = v99 + v91 == 0;
  v100 = v99 + v91;
  v101 = -1;
  if ( !v9 )
  {
    v102 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v100]) ^ BYTE1(v100))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v100]) >> 8) ^ BYTE2(v100));
    v101 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v102]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v100]) ^ BYTE1(v100))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v100] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v100))] ^ ((dword_53A208[v102] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v100]) ^ BYTE1(v100))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v100] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v103 = (int *)&sub_402423;
  if ( (_UNKNOWN *)((char *)&sub_401C30 - 4) > &sub_402423 )
  {
    do
    {
      v104 = *v103;
      v105 = dword_53A208[(unsigned __int8)(v101 ^ ((unsigned int)*v103 >> 24))] ^ (v101 >> 8) & 0xFFFFFF;
      v106 = dword_53A208[(unsigned __int8)(v105 ^ ((unsigned int)*v103 >> 16))] ^ (v105 >> 8) & 0xFFFFFF;
      v107 = dword_53A208[(unsigned __int8)(v106 ^ (*(_WORD *)v103 >> 8))] ^ (v106 >> 8) & 0xFFFFFF;
      ++v103;
      v101 = dword_53A208[(unsigned __int8)(v107 ^ v104)] ^ (v107 >> 8) & 0xFFFFFF;
    }
    while ( v103 < (int *)&sub_401C30 - 1 );
  }
  for ( ; v103 < (int *)&sub_401C30; v103 = (int *)((char *)v103 + 1) )
    v101 = dword_53A208[(unsigned __int8)(v101 ^ *(_BYTE *)v103)] ^ (v101 >> 8) & 0xFFFFFF;
  v108 = ~v101;
  v9 = v108 + v100 == 0;
  v109 = v108 + v100;
  v110 = -1;
  if ( !v9 )
  {
    v111 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v109]) ^ BYTE1(v109))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v109]) >> 8) ^ BYTE2(v109));
    v110 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v111]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v109]) ^ BYTE1(v109))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v109] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v109))] ^ ((dword_53A208[v111] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v109]) ^ BYTE1(v109))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v109] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v112 = (int (*)())&sub_4021BC;
  if ( (_UNKNOWN *)((char *)sub_4011FE - 4) > &sub_4021BC )
  {
    do
    {
      v113 = *(_DWORD *)v112;
      v114 = dword_53A208[(unsigned __int8)(v110 ^ (*(_DWORD *)v112 >> 24))] ^ (v110 >> 8) & 0xFFFFFF;
      v115 = dword_53A208[(unsigned __int8)(v114 ^ (*(_DWORD *)v112 >> 16))] ^ (v114 >> 8) & 0xFFFFFF;
      v116 = dword_53A208[(unsigned __int8)(v115 ^ (*(_WORD *)v112 >> 8))] ^ (v115 >> 8) & 0xFFFFFF;
      v112 = (int (*)())((char *)v112 + 4);
      v110 = dword_53A208[(unsigned __int8)(v116 ^ v113)] ^ (v116 >> 8) & 0xFFFFFF;
    }
    while ( (char *)v112 < (char *)sub_4011FE - 4 );
  }
  for ( ; (unsigned int)v112 < (unsigned int)sub_4011FE; v112 = (int (*)())((char *)v112 + 1) )
    v110 = dword_53A208[(unsigned __int8)(v110 ^ *(_BYTE *)v112)] ^ (v110 >> 8) & 0xFFFFFF;
  v117 = ~v110;
  v9 = v117 + v109 == 0;
  v118 = v117 + v109;
  v119 = -1;
  if ( !v9 )
  {
    v120 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v118]) ^ BYTE1(v118))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v118]) >> 8) ^ BYTE2(v118));
    v119 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v120]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v118]) ^ BYTE1(v118))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v118] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v118))] ^ ((dword_53A208[v120] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v118]) ^ BYTE1(v118))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v118] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v121 = (int *)&sub_4013AC;
  if ( (_UNKNOWN *)((char *)&sub_4022A2 - 4) > &sub_4013AC )
  {
    do
    {
      v122 = *v121;
      v123 = dword_53A208[(unsigned __int8)(v119 ^ ((unsigned int)*v121 >> 24))] ^ (v119 >> 8) & 0xFFFFFF;
      v124 = dword_53A208[(unsigned __int8)(v123 ^ ((unsigned int)*v121 >> 16))] ^ (v123 >> 8) & 0xFFFFFF;
      v125 = dword_53A208[(unsigned __int8)(v124 ^ (*(_WORD *)v121 >> 8))] ^ (v124 >> 8) & 0xFFFFFF;
      ++v121;
      v119 = dword_53A208[(unsigned __int8)(v125 ^ v122)] ^ (v125 >> 8) & 0xFFFFFF;
    }
    while ( v121 < (int *)&sub_4022A2 - 1 );
  }
  for ( ; v121 < (int *)&sub_4022A2; v121 = (int *)((char *)v121 + 1) )
    v119 = dword_53A208[(unsigned __int8)(v119 ^ *(_BYTE *)v121)] ^ (v119 >> 8) & 0xFFFFFF;
  v126 = ~v119;
  v9 = v126 + v118 == 0;
  v127 = v126 + v118;
  v128 = -1;
  if ( !v9 )
  {
    v129 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v127]) ^ BYTE1(v127))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v127]) >> 8) ^ BYTE2(v127));
    v128 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v129]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v127]) ^ BYTE1(v127))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v127] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v127))] ^ ((dword_53A208[v129] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v127]) ^ BYTE1(v127))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v127] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v130 = (int *)&sub_4013B1;
  if ( (_UNKNOWN *)((char *)&sub_40129E - 4) > &sub_4013B1 )
  {
    do
    {
      v131 = *v130;
      v132 = dword_53A208[(unsigned __int8)(v128 ^ ((unsigned int)*v130 >> 24))] ^ (v128 >> 8) & 0xFFFFFF;
      v133 = dword_53A208[(unsigned __int8)(v132 ^ ((unsigned int)*v130 >> 16))] ^ (v132 >> 8) & 0xFFFFFF;
      v134 = dword_53A208[(unsigned __int8)(v133 ^ (*(_WORD *)v130 >> 8))] ^ (v133 >> 8) & 0xFFFFFF;
      ++v130;
      v128 = dword_53A208[(unsigned __int8)(v134 ^ v131)] ^ (v134 >> 8) & 0xFFFFFF;
    }
    while ( v130 < (int *)&sub_40129E - 1 );
  }
  for ( ; v130 < (int *)&sub_40129E; v130 = (int *)((char *)v130 + 1) )
    v128 = dword_53A208[(unsigned __int8)(v128 ^ *(_BYTE *)v130)] ^ (v128 >> 8) & 0xFFFFFF;
  v135 = ~v128;
  v9 = v135 + v127 == 0;
  v136 = v135 + v127;
  v137 = -1;
  if ( !v9 )
  {
    v138 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v136]) ^ BYTE1(v136))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v136]) >> 8) ^ BYTE2(v136));
    v137 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v138]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v136]) ^ BYTE1(v136))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v136] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v136))] ^ ((dword_53A208[v138] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v136]) ^ BYTE1(v136))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v136] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v139 = (int *)&sub_401EA6;
  if ( (_UNKNOWN *)((char *)&sub_4012A3 - 4) > &sub_401EA6 )
  {
    do
    {
      v140 = *v139;
      v141 = dword_53A208[(unsigned __int8)(v137 ^ ((unsigned int)*v139 >> 24))] ^ (v137 >> 8) & 0xFFFFFF;
      v142 = dword_53A208[(unsigned __int8)(v141 ^ ((unsigned int)*v139 >> 16))] ^ (v141 >> 8) & 0xFFFFFF;
      v143 = dword_53A208[(unsigned __int8)(v142 ^ (*(_WORD *)v139 >> 8))] ^ (v142 >> 8) & 0xFFFFFF;
      ++v139;
      v137 = dword_53A208[(unsigned __int8)(v143 ^ v140)] ^ (v143 >> 8) & 0xFFFFFF;
    }
    while ( v139 < (int *)&sub_4012A3 - 1 );
  }
  for ( ; v139 < (int *)&sub_4012A3; v139 = (int *)((char *)v139 + 1) )
    v137 = dword_53A208[(unsigned __int8)(v137 ^ *(_BYTE *)v139)] ^ (v137 >> 8) & 0xFFFFFF;
  v144 = ~v137;
  v9 = v144 + v136 == 0;
  v145 = v144 + v136;
  v146 = -1;
  if ( !v9 )
  {
    v147 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v145]) ^ BYTE1(v145))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v145]) >> 8) ^ BYTE2(v145));
    v146 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v147]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v145]) ^ BYTE1(v145))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v145] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v145))] ^ ((dword_53A208[v147] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v145]) ^ BYTE1(v145))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v145] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v148 = (int (*)())&sub_401EAB;
  if ( (_UNKNOWN *)((char *)sub_4025D6 - 4) > &sub_401EAB )
  {
    do
    {
      v149 = *(_DWORD *)v148;
      v150 = dword_53A208[(unsigned __int8)(v146 ^ (*(_DWORD *)v148 >> 24))] ^ (v146 >> 8) & 0xFFFFFF;
      v151 = dword_53A208[(unsigned __int8)(v150 ^ (*(_DWORD *)v148 >> 16))] ^ (v150 >> 8) & 0xFFFFFF;
      v152 = dword_53A208[(unsigned __int8)(v151 ^ (*(_WORD *)v148 >> 8))] ^ (v151 >> 8) & 0xFFFFFF;
      v148 = (int (*)())((char *)v148 + 4);
      v146 = dword_53A208[(unsigned __int8)(v152 ^ v149)] ^ (v152 >> 8) & 0xFFFFFF;
    }
    while ( (char *)v148 < (char *)sub_4025D6 - 4 );
  }
  for ( ; (unsigned int)v148 < (unsigned int)sub_4025D6; v148 = (int (*)())((char *)v148 + 1) )
    v146 = dword_53A208[(unsigned __int8)(v146 ^ *(_BYTE *)v148)] ^ (v146 >> 8) & 0xFFFFFF;
  v153 = ~v146;
  v9 = v153 + v145 == 0;
  v154 = v153 + v145;
  v155 = -1;
  if ( !v9 )
  {
    v156 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v154]) ^ BYTE1(v154))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v154]) >> 8) ^ BYTE2(v154));
    v155 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v156]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v154]) ^ BYTE1(v154))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v154] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v154))] ^ ((dword_53A208[v156] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v154]) ^ BYTE1(v154))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v154] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( m = sub_48C760;
        (char *)m < (char *)sub_48DD10 - 4;
        v155 = dword_53A208[(unsigned __int8)(v161 ^ v158)] ^ (v161 >> 8) & 0xFFFFFF )
  {
    v158 = *(_DWORD *)m;
    v159 = dword_53A208[(unsigned __int8)(v155 ^ (*(_DWORD *)m >> 24))] ^ (v155 >> 8) & 0xFFFFFF;
    v160 = dword_53A208[(unsigned __int8)(v159 ^ (*(_DWORD *)m >> 16))] ^ (v159 >> 8) & 0xFFFFFF;
    v161 = dword_53A208[(unsigned __int8)(v160 ^ (*(_WORD *)m >> 8))] ^ (v160 >> 8) & 0xFFFFFF;
    m = (void (*)())((char *)m + 4);
  }
  for ( ; (unsigned int)m < (unsigned int)sub_48DD10; m = (void (*)())((char *)m + 1) )
    v155 = dword_53A208[(unsigned __int8)(v155 ^ *(_BYTE *)m)] ^ (v155 >> 8) & 0xFFFFFF;
  v162 = ~v155;
  v9 = v162 + v154 == 0;
  v163 = v162 + v154;
  v164 = -1;
  if ( !v9 )
  {
    v165 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v163]) ^ BYTE1(v163))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v163]) >> 8) ^ BYTE2(v163));
    v164 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v165]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v163]) ^ BYTE1(v163))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v163] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v163))] ^ ((dword_53A208[v165] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v163]) ^ BYTE1(v163))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v163] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v166 = (int *)&sub_402770;
  if ( (_UNKNOWN *)((char *)&sub_402153 - 4) > &sub_402770 )
  {
    do
    {
      v167 = *v166;
      v168 = dword_53A208[(unsigned __int8)(v164 ^ ((unsigned int)*v166 >> 24))] ^ (v164 >> 8) & 0xFFFFFF;
      v169 = dword_53A208[(unsigned __int8)(v168 ^ ((unsigned int)*v166 >> 16))] ^ (v168 >> 8) & 0xFFFFFF;
      v170 = dword_53A208[(unsigned __int8)(v169 ^ (*(_WORD *)v166 >> 8))] ^ (v169 >> 8) & 0xFFFFFF;
      ++v166;
      v164 = dword_53A208[(unsigned __int8)(v170 ^ v167)] ^ (v170 >> 8) & 0xFFFFFF;
    }
    while ( v166 < (int *)&sub_402153 - 1 );
  }
  for ( ; v166 < (int *)&sub_402153; v166 = (int *)((char *)v166 + 1) )
    v164 = dword_53A208[(unsigned __int8)(v164 ^ *(_BYTE *)v166)] ^ (v164 >> 8) & 0xFFFFFF;
  v171 = ~v164;
  v9 = v171 + v163 == 0;
  v172 = v171 + v163;
  v173 = -1;
  if ( !v9 )
  {
    v174 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v172]) ^ BYTE1(v172))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v172]) >> 8) ^ BYTE2(v172));
    v173 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v174]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v172]) ^ BYTE1(v172))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v172] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v172))] ^ ((dword_53A208[v174] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v172]) ^ BYTE1(v172))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v172] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v175 = (int *)&sub_4027DE;
  if ( (_UNKNOWN *)((char *)&sub_40263A - 4) > &sub_4027DE )
  {
    do
    {
      v176 = *v175;
      v177 = dword_53A208[(unsigned __int8)(v173 ^ ((unsigned int)*v175 >> 24))] ^ (v173 >> 8) & 0xFFFFFF;
      v178 = dword_53A208[(unsigned __int8)(v177 ^ ((unsigned int)*v175 >> 16))] ^ (v177 >> 8) & 0xFFFFFF;
      v179 = dword_53A208[(unsigned __int8)(v178 ^ (*(_WORD *)v175 >> 8))] ^ (v178 >> 8) & 0xFFFFFF;
      ++v175;
      v173 = dword_53A208[(unsigned __int8)(v179 ^ v176)] ^ (v179 >> 8) & 0xFFFFFF;
    }
    while ( v175 < (int *)&sub_40263A - 1 );
  }
  for ( ; v175 < (int *)&sub_40263A; v175 = (int *)((char *)v175 + 1) )
    v173 = dword_53A208[(unsigned __int8)(v173 ^ *(_BYTE *)v175)] ^ (v173 >> 8) & 0xFFFFFF;
  v180 = ~v173;
  v9 = v180 + v172 == 0;
  v181 = v180 + v172;
  v182 = -1;
  if ( !v9 )
  {
    v183 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v181]) ^ BYTE1(v181))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v181]) >> 8) ^ BYTE2(v181));
    v182 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v183]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v181]) ^ BYTE1(v181))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v181] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v181))] ^ ((dword_53A208[v183] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v181]) ^ BYTE1(v181))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v181] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v184 = (int *)&sub_402824;
  if ( (_UNKNOWN *)((char *)&sub_401F91 - 4) > &sub_402824 )
  {
    do
    {
      v185 = *v184;
      v186 = dword_53A208[(unsigned __int8)(v182 ^ ((unsigned int)*v184 >> 24))] ^ (v182 >> 8) & 0xFFFFFF;
      v187 = dword_53A208[(unsigned __int8)(v186 ^ ((unsigned int)*v184 >> 16))] ^ (v186 >> 8) & 0xFFFFFF;
      v188 = dword_53A208[(unsigned __int8)(v187 ^ (*(_WORD *)v184 >> 8))] ^ (v187 >> 8) & 0xFFFFFF;
      ++v184;
      v182 = dword_53A208[(unsigned __int8)(v185 ^ v188)] ^ (v188 >> 8) & 0xFFFFFF;
    }
    while ( v184 < (int *)&sub_401F91 - 1 );
  }
  for ( ; v184 < (int *)&sub_401F91; v184 = (int *)((char *)v184 + 1) )
    v182 = dword_53A208[(unsigned __int8)(v182 ^ *(_BYTE *)v184)] ^ (v182 >> 8) & 0xFFFFFF;
  v189 = ~v182;
  v9 = v189 + v181 == 0;
  v190 = v189 + v181;
  v191 = -1;
  if ( !v9 )
  {
    v192 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v190]) ^ BYTE1(v190))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v190]) >> 8) ^ BYTE2(v190));
    v191 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v192]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v190]) ^ BYTE1(v190))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v190] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v190))] ^ ((dword_53A208[v192] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v190]) ^ BYTE1(v190))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v190] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( n = sub_4B4FD0;
        (char *)n < (char *)sub_4B5CC0 - 4;
        v191 = dword_53A208[(unsigned __int8)(v197 ^ v194)] ^ (v197 >> 8) & 0xFFFFFF )
  {
    v194 = *(_DWORD *)n;
    v195 = dword_53A208[(unsigned __int8)(v191 ^ (*(_DWORD *)n >> 24))] ^ (v191 >> 8) & 0xFFFFFF;
    v196 = dword_53A208[(unsigned __int8)(v195 ^ (*(_DWORD *)n >> 16))] ^ (v195 >> 8) & 0xFFFFFF;
    v197 = dword_53A208[(unsigned __int8)(v196 ^ (*(_WORD *)n >> 8))] ^ (v196 >> 8) & 0xFFFFFF;
    n = (int (*)())((char *)n + 4);
  }
  for ( ; (unsigned int)n < (unsigned int)sub_4B5CC0; n = (int (*)())((char *)n + 1) )
    v191 = dword_53A208[(unsigned __int8)(v191 ^ *(_BYTE *)n)] ^ (v191 >> 8) & 0xFFFFFF;
  v198 = ~v191;
  v9 = v198 + v190 == 0;
  v199 = v198 + v190;
  v200 = -1;
  if ( !v9 )
  {
    v201 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v199]) ^ BYTE1(v199))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v199]) >> 8) ^ BYTE2(v199));
    v200 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v201]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v199]) ^ BYTE1(v199))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v199] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v199))] ^ ((dword_53A208[v201] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v199]) ^ BYTE1(v199))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v199] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v202 = (int *)&sub_40262B;
  if ( (_UNKNOWN *)((char *)&sub_40181B - 4) > &sub_40262B )
  {
    do
    {
      v203 = *v202;
      v204 = dword_53A208[(unsigned __int8)(v200 ^ ((unsigned int)*v202 >> 24))] ^ (v200 >> 8) & 0xFFFFFF;
      v205 = dword_53A208[(unsigned __int8)(v204 ^ ((unsigned int)*v202 >> 16))] ^ (v204 >> 8) & 0xFFFFFF;
      v206 = dword_53A208[(unsigned __int8)(v205 ^ (*(_WORD *)v202 >> 8))] ^ (v205 >> 8) & 0xFFFFFF;
      ++v202;
      v200 = dword_53A208[(unsigned __int8)(v206 ^ v203)] ^ (v206 >> 8) & 0xFFFFFF;
    }
    while ( v202 < (int *)&sub_40181B - 1 );
  }
  for ( ; v202 < (int *)&sub_40181B; v202 = (int *)((char *)v202 + 1) )
    v200 = dword_53A208[(unsigned __int8)(v200 ^ *(_BYTE *)v202)] ^ (v200 >> 8) & 0xFFFFFF;
  v207 = ~v200;
  v9 = v207 + v199 == 0;
  v208 = v207 + v199;
  v209 = -1;
  if ( !v9 )
  {
    v210 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v208]) ^ BYTE1(v208))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v208]) >> 8) ^ BYTE2(v208));
    v209 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v210]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v208]) ^ BYTE1(v208))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v208] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v208))] ^ ((dword_53A208[v210] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v208]) ^ BYTE1(v208))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v208] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( ii = sub_4A7490;
        (char *)ii < (char *)sub_4A7BF0 - 4;
        v209 = dword_53A208[(unsigned __int8)(v215 ^ v212)] ^ (v215 >> 8) & 0xFFFFFF )
  {
    v212 = *(_DWORD *)ii;
    v213 = dword_53A208[(unsigned __int8)(v209 ^ (*(_DWORD *)ii >> 24))] ^ (v209 >> 8) & 0xFFFFFF;
    v214 = dword_53A208[(unsigned __int8)(v213 ^ (*(_DWORD *)ii >> 16))] ^ (v213 >> 8) & 0xFFFFFF;
    v215 = dword_53A208[(unsigned __int8)(v214 ^ (*(_WORD *)ii >> 8))] ^ (v214 >> 8) & 0xFFFFFF;
    ii = (int (*)())((char *)ii + 4);
  }
  for ( ; (unsigned int)ii < (unsigned int)sub_4A7BF0; ii = (int (*)())((char *)ii + 1) )
    v209 = dword_53A208[(unsigned __int8)(v209 ^ *(_BYTE *)ii)] ^ (v209 >> 8) & 0xFFFFFF;
  v216 = ~v209;
  v9 = v216 + v208 == 0;
  v217 = v216 + v208;
  v218 = -1;
  if ( !v9 )
  {
    v219 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v217]) ^ BYTE1(v217))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)v217]) >> 8) ^ BYTE2(v217));
    v218 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v219]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v217]) ^ BYTE1(v217))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v217] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(v217))] ^ ((dword_53A208[v219] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)v217]) ^ BYTE1(v217))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)v217] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  v220 = (int *)&sub_402833;
  if ( (_UNKNOWN *)((char *)&sub_402635 - 4) > &sub_402833 )
  {
    do
    {
      v221 = *v220;
      v222 = dword_53A208[(unsigned __int8)(v218 ^ ((unsigned int)*v220 >> 24))] ^ (v218 >> 8) & 0xFFFFFF;
      v223 = dword_53A208[(unsigned __int8)(v222 ^ ((unsigned int)*v220 >> 16))] ^ (v222 >> 8) & 0xFFFFFF;
      v224 = dword_53A208[(unsigned __int8)(v223 ^ (*(_WORD *)v220 >> 8))] ^ (v223 >> 8) & 0xFFFFFF;
      ++v220;
      v218 = dword_53A208[(unsigned __int8)(v224 ^ v221)] ^ (v224 >> 8) & 0xFFFFFF;
    }
    while ( v220 < (int *)&sub_402635 - 1 );
  }
  for ( ; v220 < (int *)&sub_402635; v220 = (int *)((char *)v220 + 1) )
    v218 = dword_53A208[(unsigned __int8)(v218 ^ *(_BYTE *)v220)] ^ (v218 >> 8) & 0xFFFFFF;
  return v217 + ~v218;
}
// 4011FE: using guessed type int sub_4011FE();
// 401654: using guessed type int sub_401654();
// 40196A: using guessed type int sub_40196A();
// 4024D7: using guessed type int sub_4024D7();
// 4025D6: using guessed type int sub_4025D6();
// 40278E: using guessed type int sub_40278E();
// 4027A7: using guessed type int sub_4027A7();
// 48DD10: using guessed type int sub_48DD10();
// 4955C0: using guessed type int sub_4955C0();
// 4A7490: using guessed type int sub_4A7490();
// 4A7BF0: using guessed type int sub_4A7BF0();
// 4B4FD0: using guessed type int sub_4B4FD0();
// 4B5CC0: using guessed type int sub_4B5CC0();

//----- (00434540) --------------------------------------------------------
FILE *sub_434540()
{
  unsigned int v0; // eax
  signed int v1; // esi
  int v2; // edi
  FILE *result; // eax
  FILE *v4; // esi
  int Dst; // [esp+4h] [ebp-2000h]
  int v6[2047]; // [esp+8h] [ebp-1FFCh]

  v0 = _time64(0);
  srand(v0);
  memset(&Dst, 0, 0x2000u);
  v1 = 0;
  do
  {
    v2 = rand() << 16;
    *(&Dst + 2 * v1) = v2 | rand();
    if ( !v1 )
      Dst = 0;
    v6[2 * v1] = sub_4020FE(*(&Dst + 2 * v1));
    ++v1;
  }
  while ( v1 < 1024 );
  result = fopen("stbl", "wb");
  v4 = result;
  if ( result )
  {
    fwrite(&Dst, 1u, 0x2000u, result);
    result = (FILE *)fclose(v4);
  }
  return result;
}
// 4020FE: using guessed type _DWORD __cdecl sub_4020FE(_DWORD);
// 434540: using guessed type int var_1FFC[2047];

//----- (00434690) --------------------------------------------------------
LRESULT __thiscall sub_434690(_DWORD *this, int a2, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  WPARAM v5; // ebx
  int v6; // ebp
  _DWORD *v7; // eax
  UINT v8; // edi
  _DWORD *v9; // esi
  int v11; // ecx
  int v12; // eax
  int v13; // eax
  int v14; // ecx
  int v15; // eax
  int v16; // esi
  bool v17; // zf
  int v18; // eax
  int v19; // ecx
  int v20; // ebx
  _DWORD *v21; // eax
  int v22; // ecx
  int v23; // ecx
  int v24; // eax
  int v25; // edi
  int v26; // eax
  int v27; // ecx
  int v28; // ecx
  int v29; // edx
  int v30; // ecx
  HCURSOR v31; // eax
  void *v32; // edi
  HCURSOR v33; // eax
  HCURSOR v34; // eax
  int v35; // ecx
  int v36; // ecx
  int v37; // ecx
  int v38; // ecx
  int v39; // ecx
  int v40; // ecx
  int v41; // ecx
  int v42; // edx
  int v43; // ecx
  int v44; // eax
  HWND v45; // ST18_4
  HDC v46; // edi
  int v47; // ecx
  HBRUSH v48; // eax
  HGDIOBJ v49; // ebp
  HGDIOBJ v50; // eax
  void *v51; // edi
  HANDLE v52; // eax
  HANDLE v53; // eax
  HANDLE v54; // eax
  HANDLE v55; // eax
  signed int v56; // eax
  UINT v57; // ST24_4
  HMENU v58; // eax
  HWND v59; // ebx
  UINT v60; // ST24_4
  HMENU v61; // eax
  UINT v62; // ST24_4
  HMENU v63; // eax
  UINT v64; // ST24_4
  HMENU v65; // eax
  UINT v66; // ST24_4
  HMENU v67; // eax
  UINT v68; // ST24_4
  HMENU v69; // eax
  UINT v70; // ST24_4
  HMENU v71; // eax
  UINT v72; // ST24_4
  HMENU v73; // eax
  UINT v74; // ST24_4
  HMENU v75; // eax
  BOOL v76; // ST24_4
  HMENU v77; // eax
  int v78; // ecx
  LPARAM v79; // eax
  DWORD v80; // edx
  int i; // [esp+18h] [ebp-668h]
  int v82; // [esp+1Ch] [ebp-664h]
  HWND hWnd; // [esp+20h] [ebp-660h]
  LPARAM v84; // [esp+24h] [ebp-65Ch]
  struct _PROCESS_INFORMATION ProcessInformation; // [esp+28h] [ebp-658h]
  struct tagPAINTSTRUCT Paint; // [esp+38h] [ebp-648h]
  char v87; // [esp+7Ch] [ebp-604h]
  CHAR CommandLine; // [esp+17Ch] [ebp-504h]
  char Dest; // [esp+27Ch] [ebp-404h]

  v5 = wParam;
  v6 = lParam;
  hWnd = (HWND)a2;
  v7 = dword_563908;
  v8 = Msg;
  v9 = this;
  v84 = lParam;
  if ( dword_563908 )
  {
    if ( Msg <= 0x100 )
    {
      if ( Msg == 256 )
      {
LABEL_21:
        v12 = !*(_BYTE *)(*((_DWORD *)dword_563908 + 1509) + 37920) || this[2344];
        sub_4A9FB0((int *)dword_56390C, v12);
        v9[2133] = wParam;
        (*(void (__stdcall **)(WPARAM, LPARAM))(*(_DWORD *)dword_563908 + 24))(wParam, lParam);
        if ( wParam == 13 )
        {
          if ( !*(_BYTE *)(*((_DWORD *)dword_563908 + 1509) + 37920) || v9[2344] )
            sub_4A9FB0((int *)dword_56390C, 1);
          else
            sub_4A9FB0((int *)dword_56390C, 0);
        }
        goto LABEL_35;
      }
      switch ( Msg )
      {
        case 3u:
        case 5u:
          if ( !IsIconic(hWnd) )
            sub_401965(dword_563908);
          goto LABEL_35;
        case 0x20u:
          if ( (_WORD)lParam != 1 || !dword_538460 )
            goto LABEL_36;
          SetCursor(0);
          return 1;
        case 0x84u:
          if ( this[2211] <= 0 )
            goto LABEL_36;
          return 1;
        case 0x85u:
          if ( this[2211] > 0 )
            return 0;
          goto LABEL_36;
        default:
          break;
      }
LABEL_77:
      if ( Msg == dword_563920 )
      {
        v82 = (signed __int16)lParam;
        i = SHIWORD(lParam);
        (*(void (__thiscall **)(_DWORD, int *, int *))(**((_DWORD **)dword_563908 + 89) + 120))(
          *((_DWORD *)dword_563908 + 89),
          &v82,
          &i);
        (**(void (__stdcall ***)(int, int, _DWORD, WPARAM))dword_563908)(v82, i, 0, wParam);
LABEL_35:
        v7 = dword_563908;
        goto LABEL_36;
      }
      goto LABEL_36;
    }
    if ( Msg > 0x112 )
    {
      if ( Msg > 0x30F )
      {
        if ( Msg != 1025 )
          goto LABEL_77;
        v22 = this[2132];
        if ( v22 )
        {
          sub_402806(v22);
          sub_4023C4(v9[2132]);
          v7 = dword_563908;
        }
        if ( !v7 )
          goto LABEL_181;
        v23 = v7[6936];
        if ( v23 > 0 )
          goto LABEL_59;
        if ( v23 != -1 || !v7[6898] || (*(int (**)(void))(**(_DWORD **)(v7[6898] + 72) + 4))() == 4 )
          goto LABEL_181;
        v24 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 108))();
        v25 = 480 * v24;
        v17 = *(_DWORD *)((char *)dword_563908 + 480 * v24 + 59462) == 0;
        v26 = *(_DWORD *)((char *)dword_563908 + 480 * v24 + 59918);
        if ( v17 )
        {
          sprintf(&Dest, "You are not allowed to quit due to terrain restrictions.");
          v27 = *((_DWORD *)dword_563908 + 1509);
          sub_40244B(&Dest, 0);
          goto LABEL_59;
        }
        if ( v26 > 0 )
        {
          sprintf(&Dest, "You must wait %d secs before quitting due to terrain restrictions.", v26);
          v28 = *((_DWORD *)dword_563908 + 1509);
          sub_40244B(&Dest, 0);
          *((_DWORD *)dword_563908 + 6936) = 100 * *(_DWORD *)((char *)dword_563908 + v25 + 59918)
                                           + sub_401D39(v30, v29);
        }
        else
        {
LABEL_181:
          v31 = LoadCursorA(0, (LPCSTR)0x7F02);
          SetCursor(v31);
          if ( dword_563908 )
          {
            v32 = dword_563908;
            ((void (*)(void))sub_401B1D)();
            j__free(v32);
            dword_563908 = 0;
          }
          if ( dword_56391C )
          {
            (**(void (__stdcall ***)(signed int))dword_56391C)(1);
            dword_56391C = 0;
          }
          if ( wParam == 2 )
          {
            PostQuitMessage(0);
          }
          else if ( wParam == 1 )
          {
            v33 = LoadCursorA(0, (LPCSTR)0x7F00);
            SetCursor(v33);
            sub_402388(v9);
            if ( !dword_56391C )
            {
              InvalidateRect(0, 0, 1);
              UpdateWindow((HWND)v9[3]);
              sub_40166D(v9);
            }
          }
          else
          {
            if ( v9[7] )
            {
              PostQuitMessage(0);
            }
            else
            {
              InvalidateRect(0, 0, 1);
              UpdateWindow((HWND)v9[3]);
              sub_40166D(v9);
            }
            v34 = LoadCursorA(0, (LPCSTR)0x7F00);
            SetCursor(v34);
          }
        }
      }
      else if ( Msg == 783 )
      {
        sub_401DC0(dword_563908);
      }
      else
      {
        if ( Msg < 0x200 )
          goto LABEL_77;
        if ( Msg <= 0x209 )
        {
          i = (signed __int16)lParam;
          v82 = SHIWORD(lParam);
          (*(void (__thiscall **)(_DWORD, int *, int *))(**((_DWORD **)dword_563908 + 89) + 116))(
            *((_DWORD *)dword_563908 + 89),
            &i,
            &v82);
          switch ( Msg )
          {
            case 0x200u:
              (*(void (__stdcall **)(int, int, WPARAM))(*(_DWORD *)dword_563908 + 4))(i, v82, wParam);
              break;
            case 0x201u:
              (*(void (__stdcall **)(int, int, WPARAM, _DWORD))(*(_DWORD *)dword_563908 + 8))(i, v82, wParam, 0);
              break;
            case 0x202u:
              (*(void (__stdcall **)(int, int, WPARAM, _DWORD))(*(_DWORD *)dword_563908 + 16))(i, v82, wParam, 0);
              break;
            case 0x203u:
              (*(void (__stdcall **)(int, int, WPARAM, _DWORD))(*(_DWORD *)dword_563908 + 12))(i, v82, wParam, 0);
              break;
            case 0x204u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 8))(i, v82, wParam, 1);
              break;
            case 0x205u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 16))(i, v82, wParam, 1);
              break;
            case 0x206u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 12))(i, v82, wParam, 1);
              break;
            case 0x207u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 8))(i, v82, wParam, 2);
              break;
            case 0x208u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 16))(i, v82, wParam, 2);
              break;
            case 0x209u:
              (*(void (__stdcall **)(int, int, WPARAM, signed int))(*(_DWORD *)dword_563908 + 12))(i, v82, wParam, 2);
              break;
            default:
              goto LABEL_35;
          }
          goto LABEL_35;
        }
        if ( Msg != 522 )
          goto LABEL_77;
        i = SHIWORD(lParam);
        v82 = (signed __int16)lParam;
        (*(void (__thiscall **)(_DWORD, int *, int *))(**((_DWORD **)dword_563908 + 89) + 120))(
          *((_DWORD *)dword_563908 + 89),
          &v82,
          &i);
        (**(void (__stdcall ***)(int, int, _DWORD, _DWORD))dword_563908)(
          v82,
          i,
          (unsigned __int16)wParam,
          SHIWORD(wParam));
      }
    }
    else
    {
      if ( Msg != 274 )
      {
        switch ( Msg )
        {
          case 0x101u:
          case 0x105u:
            v13 = !*(_BYTE *)(*((_DWORD *)dword_563908 + 1509) + 37920) || this[2344];
            sub_4A9FB0((int *)dword_56390C, v13);
            v9[2133] = wParam;
            (*(void (__stdcall **)(WPARAM, LPARAM))(*(_DWORD *)dword_563908 + 28))(wParam, lParam);
            goto LABEL_35;
          case 0x102u:
            v11 = this[2133];
            if ( v11 == 18 || v11 == 164 || v11 == 165 )
              goto LABEL_36;
            (*(void (__thiscall **)(void *, WPARAM))(*(_DWORD *)dword_563908 + 20))(dword_563908, wParam);
            goto LABEL_35;
          case 0x104u:
            goto LABEL_21;
          default:
            goto LABEL_77;
        }
        goto LABEL_77;
      }
      if ( (wParam & 0xFFF0) == 61536 && !((unsigned int)lParam >> 16) || wParam == 61520 || wParam == 61504 )
        return 0;
    }
LABEL_59:
    v8 = Msg;
    if ( Msg == 36 )
    {
      ProcessInformation.hProcess = 0;
      ProcessInformation.hThread = 0;
      ProcessInformation.dwProcessId = 640;
      ProcessInformation.dwThreadId = 480;
      AdjustWindowRect((LPRECT)&ProcessInformation, 0xCF0000u, 1);
      v79 = v84;
      v80 = ProcessInformation.dwThreadId - (unsigned int)ProcessInformation.hThread;
      *(_DWORD *)(v84 + 24) = ProcessInformation.dwProcessId - (unsigned int)ProcessInformation.hProcess;
      *(_DWORD *)(v79 + 28) = v80;
    }
    else
    {
      if ( Msg != 273 )
      {
        if ( Msg == 278 )
        {
          v20 = 0;
          if ( v9[17] > 0 )
          {
            v21 = v9 + 50;
            for ( i = (int)(v9 + 50); ; v21 = (_DWORD *)i )
            {
              v56 = v9[2211] != *(v21 - 32) || v9[2212] != *v21 ? 0 : 8;
              v57 = v56;
              v58 = GetMenu(hWnd);
              CheckMenuItem(v58, v20 + 25000, v57);
              i += 4;
              if ( ++v20 >= v9[17] )
                break;
            }
          }
          v59 = hWnd;
          v60 = v9[2332] != 0 ? 0 : 8;
          v61 = GetMenu(hWnd);
          CheckMenuItem(v61, 0x9C4Fu, v60);
          v62 = v9[2332] <= 0 ? 0 : 8;
          v63 = GetMenu(v59);
          CheckMenuItem(v63, 0x9C50u, v62);
          v64 = v9[2204] != 0 ? 0 : 8;
          v65 = GetMenu(v59);
          CheckMenuItem(v65, 0x9C51u, v64);
          v66 = v9[2204] != 1 ? 0 : 8;
          v67 = GetMenu(v59);
          CheckMenuItem(v67, 0x9C52u, v66);
          v68 = v9[2204] != 2 ? 0 : 8;
          v69 = GetMenu(v59);
          CheckMenuItem(v69, 0x9C53u, v68);
          v70 = v9[2204] != 3 ? 0 : 8;
          v71 = GetMenu(v59);
          CheckMenuItem(v71, 0x9C54u, v70);
          v72 = v9[2204] != 4 ? 0 : 8;
          v73 = GetMenu(v59);
          CheckMenuItem(v73, 0x9C55u, v72);
          v74 = v9[2204] != 5 ? 0 : 8;
          v75 = GetMenu(v59);
          CheckMenuItem(v75, 0x9C56u, v74);
          v76 = _access("PingRoute.exe", 0) != 0;
          v77 = GetMenu(v59);
          EnableMenuItem(v77, 0x9C5Au, v76);
          v8 = Msg;
        }
        v5 = wParam;
        v6 = v84;
        return DefWindowProcA(hWnd, v8, v5, v6);
      }
      switch ( (unsigned __int16)wParam )
      {
        case 0x9C43u:
          PostQuitMessage(0);
          break;
        case 0x9C44u:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x65, (HWND)v9[3], sub_40176C, 0);
          break;
        case 0x9C49u:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x69, (HWND)v9[3], sub_40287E, 0);
          break;
        case 0x9C4Au:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x6B, (HWND)v9[3], sub_401875, 0);
          v78 = v9[2132];
          sub_40189D(v9 + 2578, 4850, v9 + 2610, 4850);
          break;
        case 0x9C4Bu:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x6D, (HWND)v9[3], sub_4013C0, 0);
          break;
        case 0x9C4Eu:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x78, (HWND)v9[3], sub_402595, 0);
          break;
        case 0x9C4Fu:
          v9[2332] = 0;
          break;
        case 0x9C50u:
          v9[2332] = 100;
          break;
        case 0x9C51u:
          sub_401631(v9);
          sub_4010C8(0);
          break;
        case 0x9C52u:
          sub_401631(v9);
          sub_4010C8(1);
          break;
        case 0x9C53u:
          sub_401631(v9);
          sub_4010C8(2);
          break;
        case 0x9C54u:
          sub_401631(v9);
          sub_4010C8(3);
          break;
        case 0x9C55u:
          sub_401631(v9);
          sub_4010C8(4);
          break;
        case 0x9C56u:
          sub_401631(v9);
          sub_4010C8(5);
          break;
        case 0x9C59u:
          DialogBoxParamA((HINSTANCE)v9[4], (LPCSTR)0x7B, (HWND)v9[3], sub_402180, 0);
          break;
        case 0x9C5Au:
          (*(void (__thiscall **)(_DWORD, char *))(*(_DWORD *)v9[8] + 40))(v9[8], &v87);
          memset(&Paint, 0, 0x44u);
          Paint.hdc = (HDC)68;
          Paint.rcPaint.top = (LONG)"PingRoute";
          sprintf(&CommandLine, "PingRoute.exe /ip:%s", &v87);
          CreateProcessA(0, &CommandLine, 0, 0, 0, 0x200u, 0, 0, (LPSTARTUPINFOA)&Paint, &ProcessInformation);
          break;
        default:
          if ( (unsigned __int16)wParam < 0x61A8u || (unsigned __int16)wParam >= v9[17] + 25000 )
          {
            if ( (unsigned __int16)wParam >= 0x639Cu && (unsigned __int16)wParam < v9[2130] + 25500 )
              ShellExecuteA(0, "open", (LPCSTR)&v9[32 * (unsigned __int16)wParam - 815918], 0, 0, 1);
          }
          else
          {
            v9[2211] = v9[(unsigned __int16)wParam - 24982];
            v9[2212] = v9[(unsigned __int16)wParam - 24950];
          }
          break;
      }
    }
    return 0;
  }
  if ( Msg > 0x104 )
  {
    switch ( Msg )
    {
      case 0x200u:
        v40 = this[8];
        if ( v40 )
          (*(void (__stdcall **)(_DWORD, unsigned int, WPARAM))(*(_DWORD *)v40 + 16))(
            (unsigned __int16)lParam,
            (unsigned int)lParam >> 16,
            wParam);
        break;
      case 0x201u:
        v39 = this[8];
        if ( v39 )
          (*(void (__stdcall **)(_DWORD, unsigned int, WPARAM, _DWORD))(*(_DWORD *)v39 + 20))(
            (unsigned __int16)lParam,
            (unsigned int)lParam >> 16,
            wParam,
            0);
        break;
      case 0x203u:
        v38 = this[8];
        if ( v38 )
          (*(void (__stdcall **)(_DWORD, unsigned int, WPARAM, _DWORD))(*(_DWORD *)v38 + 24))(
            (unsigned __int16)lParam,
            (unsigned int)lParam >> 16,
            wParam,
            0);
        break;
      default:
        goto LABEL_36;
    }
    goto LABEL_59;
  }
  if ( Msg == 260 )
    goto LABEL_182;
  if ( Msg > 0x100 )
  {
    if ( Msg != 258 )
      goto LABEL_36;
    v36 = this[8];
    if ( v36 )
      (*(void (__stdcall **)(WPARAM))(*(_DWORD *)v36 + 32))(wParam);
    goto LABEL_59;
  }
  if ( Msg == 256 )
  {
LABEL_182:
    v37 = this[8];
    if ( v37 )
    {
      (*(void (__stdcall **)(WPARAM, LPARAM))(*(_DWORD *)v37 + 36))(wParam, lParam);
      goto LABEL_35;
    }
    goto LABEL_36;
  }
  if ( Msg == 3 || Msg == 5 )
  {
    v35 = this[8];
    if ( v35 )
    {
      (*(void (**)(void))(*(_DWORD *)v35 + 4))();
      InvalidateRect(hWnd, 0, 0);
      goto LABEL_35;
    }
  }
LABEL_36:
  if ( Msg > 0x1C )
    goto LABEL_59;
  if ( Msg == 28 )
  {
    dword_538460 = wParam;
    if ( v7 )
    {
      if ( !wParam )
      {
        SystemParametersInfoA(4u, 0, v7 + 2697, 1u);
        v54 = GetCurrentProcess();
        SetPriorityClass(v54, 0x20u);
        v55 = GetCurrentProcess();
        SetThreadPriority(v55, 0);
        return DefWindowProcA(hWnd, 0x1Cu, 0, lParam);
      }
      SystemParametersInfoA(4u, 0, v7 + 2694, 1u);
      if ( v9[2331] )
      {
        v52 = GetCurrentProcess();
        SetPriorityClass(v52, 0x80u);
        v53 = GetCurrentProcess();
        SetThreadPriority(v53, 2);
        return DefWindowProcA(hWnd, 0x1Cu, wParam, lParam);
      }
    }
    return DefWindowProcA(hWnd, v8, v5, v6);
  }
  if ( Msg == 2 )
  {
    if ( v7 )
    {
      v51 = v7;
      sub_401B1D(v7);
      j__free(v51);
      v8 = Msg;
      dword_563908 = 0;
    }
    if ( dword_56391C )
    {
      (**(void (__stdcall ***)(signed int))dword_56391C)(1);
      dword_56391C = 0;
    }
    PlaySoundA(0, 0, 0x40u);
    if ( !IsIconic(hWnd) && !IsZoomed(hWnd) )
    {
      GetWindowRect(hWnd, (LPRECT)(v9 + 2215));
      return DefWindowProcA(hWnd, v8, wParam, lParam);
    }
    return DefWindowProcA(hWnd, v8, v5, v6);
  }
  if ( Msg != 15 )
  {
    if ( Msg == 16 )
    {
      if ( !v7 )
      {
LABEL_127:
        PostQuitMessage(0);
        return DefWindowProcA(hWnd, Msg, wParam, lParam);
      }
      v14 = v7[6936];
      if ( v14 <= 0 )
      {
        if ( v14 == -1 && v7[6898] && (*(int (**)(void))(**(_DWORD **)(v7[6898] + 72) + 4))() != 4 )
        {
          v15 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 108))();
          v16 = 480 * v15;
          v17 = *(_DWORD *)((char *)dword_563908 + 480 * v15 + 59462) == 0;
          v18 = *(_DWORD *)((char *)dword_563908 + 480 * v15 + 59918);
          if ( v17 )
          {
            sprintf(&Dest, "You are not allowed to quit due to terrain restrictions.");
            v19 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B(&Dest, 0);
            return DefWindowProcA(hWnd, Msg, wParam, lParam);
          }
          if ( v18 > 0 )
          {
            sprintf(&Dest, "You must wait %d secs before quitting due to terrain restrictions.", v18);
            v41 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B(&Dest, 0);
            v44 = sub_401D39(v43, v42);
            v45 = hWnd;
            *((_DWORD *)dword_563908 + 6936) = 100 * *(_DWORD *)((char *)dword_563908 + v16 + 59918) + v44;
            return DefWindowProcA(v45, Msg, wParam, lParam);
          }
        }
        goto LABEL_127;
      }
    }
    return DefWindowProcA(hWnd, v8, v5, v6);
  }
  v46 = BeginPaint(hWnd, &Paint);
  if ( !dword_563908 )
  {
    v47 = v9[8];
    if ( v47 )
    {
      (*(void (**)(void))(*(_DWORD *)v47 + 12))();
    }
    else
    {
      v48 = CreateSolidBrush(0);
      v49 = SelectObject(v46, v48);
      Rectangle(v46, -10, -10, 10000, 10000);
      v50 = SelectObject(v46, v49);
      DeleteObject(v50);
      SetTextColor(v46, 0xFF00u);
      SetTextAlign(v46, 6u);
      SetBkMode(v46, 1);
      TextOutA(v46, (v9[2217] - v9[2215]) / 2, (v9[2218] - v9[2216]) / 3, "Loading...", 10);
      v6 = v84;
      v5 = wParam;
    }
  }
  EndPaint(hWnd, &Paint);
  return DefWindowProcA(hWnd, Msg, v5, v6);
}
// 4010C8: using guessed type _DWORD __stdcall sub_4010C8(_DWORD);
// 401631: using guessed type int __thiscall sub_401631(_DWORD);
// 40166D: using guessed type int __thiscall sub_40166D(_DWORD);
// 40189D: using guessed type _DWORD __stdcall sub_40189D(_DWORD, _DWORD, _DWORD, _DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401B1D: using guessed type int __thiscall sub_401B1D(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401DC0: using guessed type int __thiscall sub_401DC0(_DWORD);
// 402388: using guessed type int __thiscall sub_402388(_DWORD);
// 4023C4: using guessed type int __thiscall sub_4023C4(_DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 402806: using guessed type int __thiscall sub_402806(_DWORD);
// 538460: using guessed type int dword_538460;
// 56391C: using guessed type int dword_56391C;
// 563920: using guessed type int dword_563920;

//----- (00435C50) --------------------------------------------------------
int __thiscall sub_435C50(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void (__stdcall ***v3)(signed int); // ecx
  void *v4; // edi
  void *v5; // esi

  v1 = this;
  if ( this[2132] )
  {
    sub_401CC6();
    v2 = (void *)v1[2132];
    if ( v2 )
    {
      sub_4011F9(v1[2132]);
      j__free(v2);
      v1[2132] = 0;
    }
  }
  if ( dword_56391C )
  {
    (**(void (__stdcall ***)(signed int))dword_56391C)(1);
    dword_56391C = 0;
  }
  PlaySoundA(0, 0, 0x40u);
  v3 = (void (__stdcall ***)(signed int))v1[8];
  if ( v3 )
  {
    (**v3)(1);
    v1[8] = 0;
  }
  sub_401631(v1);
  v4 = (void *)v1[2131];
  if ( v4 )
  {
    sub_402716(v1[2131]);
    j__free(v4);
    v1[2131] = 0;
  }
  if ( dword_56390C )
  {
    v5 = dword_56390C;
    sub_4AA570(dword_56390C);
    j__free(v5);
    dword_56390C = 0;
  }
  sub_4A9CE0();
  return j_WSACleanup();
}
// 4011F9: using guessed type int __thiscall sub_4011F9(_DWORD);
// 401631: using guessed type int __thiscall sub_401631(_DWORD);
// 401CC6: using guessed type int sub_401CC6(void);
// 402716: using guessed type int __thiscall sub_402716(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00435D40) --------------------------------------------------------
int __stdcall sub_435D40(int a1, UINT a2, WPARAM a3, LPARAM a4)
{
  return sub_401D52(a1, a2, a3, a4);
}

//----- (00435D80) --------------------------------------------------------
_DWORD *__thiscall sub_435D80(_DWORD *this, HINSTANCE hInstance, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  void *v6; // eax
  _DWORD *v7; // eax
  bool v8; // cf
  HANDLE v9; // eax
  HANDLE v10; // eax
  HANDLE v11; // eax
  char *v12; // eax
  char *v13; // eax
  char *v14; // eax
  char *v15; // eax
  char *v16; // eax
  char *v17; // eax
  char *v18; // eax
  HINSTANCE v19; // ST28_4
  int v20; // ecx
  int v21; // edx
  int v22; // edi
  int v23; // ebp
  HWND v24; // eax
  __time64_t v25; // kr00_8
  DWORD v26; // eax
  int v27; // eax
  bool v28; // zf
  int v29; // ecx
  int v31; // [esp-4h] [ebp-384h]
  struct tagRECT Rect; // [esp+14h] [ebp-36Ch]
  int v33; // [esp+24h] [ebp-35Ch]
  HICON v34; // [esp+28h] [ebp-358h]
  void *v35; // [esp+2Ch] [ebp-354h]
  WNDCLASSA WndClass; // [esp+30h] [ebp-350h]
  const CHAR *v37; // [esp+58h] [ebp-328h]
  struct _OSVERSIONINFOA VersionInformation; // [esp+5Ch] [ebp-324h]
  CHAR WindowName; // [esp+F0h] [ebp-290h]
  char Filename; // [esp+170h] [ebp-210h]
  char v41; // [esp+270h] [ebp-110h]
  int v42; // [esp+37Ch] [ebp-4h]

  v5 = this;
  dword_563918 = this;
  this[2227] = 4;
  this[7] = 0;
  byte_563088[0] = 0;
  v34 = (HICON)hInstance;
  this[2131] = 0;
  Rect.left = 0;
  if ( sub_48D1A0((char *)a4, "/quick") )
    Rect.left = 1;
  sub_48D500((int)&sub_401096);
  sub_4A74A0();
  sub_40159B();
  sub_4AA4A0();
  v6 = operator new(0x2214u);
  v35 = v6;
  v42 = 0;
  if ( v6 )
    v7 = sub_4AA520(v6, (int)hInstance, 0);
  else
    v7 = 0;
  dword_56390C = v7;
  v42 = -1;
  v5[8] = 0;
  v5[4] = hInstance;
  *v5 = 0;
  v5[1] = 0;
  VersionInformation.dwOSVersionInfoSize = 148;
  GetVersionExA(&VersionInformation);
  if ( VersionInformation.dwPlatformId == 2 )
  {
    v8 = VersionInformation.dwMajorVersion < 5;
    *v5 = 1;
    if ( !v8 )
      v5[1] = 1;
  }
  memset(v5 + 2204, 0, 0x85E4u);
  sub_4010C8(-1);
  if ( !v5[2206] && !DialogBoxParamA(hInstance, (LPCSTR)0x66, 0, sub_401F5A, 0) )
    exit(1);
  if ( v5[2205] )
    EnumWindows(sub_40114A, 0);
  if ( v5[2210] < 100 )
    system("rename *.mac *.mc0");
  if ( v5[2331] )
  {
    v9 = GetCurrentProcess();
    SetPriorityClass(v9, 0x80u);
    v31 = 2;
  }
  else
  {
    v10 = GetCurrentProcess();
    SetPriorityClass(v10, 0x20u);
    v31 = 0;
  }
  v11 = GetCurrentProcess();
  SetThreadPriority(v11, v31);
  if ( v5[2258] )
    Rect.left = 1;
  v12 = sub_48D1A0((char *)a4, "/uid:");
  if ( v12 )
    v5[2353] = j__atol(v12 + 5);
  v13 = sub_48D1A0((char *)a4, "/launch:");
  if ( v13 )
  {
    v5[7] = 1;
    Rect.left = 1;
    sub_402400(v13, v5 + 2434, 8);
  }
  v14 = sub_48D1A0((char *)a4, "/dirserve:");
  if ( v14 )
  {
    sub_402400(v14, v5 + 2578, 10);
    strncpy((char *)v5 + 10440, (const char *)v5 + 10312, 0x80u);
  }
  v15 = sub_48D1A0((char *)a4, "/ticket:");
  if ( v15 )
    sub_402400(v15, v5 + 2354, 8);
  v16 = sub_48D1A0((char *)a4, "/alias:");
  if ( v16 )
    sub_402400(v16, v5 + 2402, 7);
  v17 = sub_48D1A0((char *)a4, "/delete:");
  if ( v17 )
  {
    sub_402400(v17, &Filename, 8);
    remove(&Filename);
  }
  v18 = sub_48D1A0((char *)a4, "/name:");
  if ( v18 )
    sub_402400(v18, v5 + 2410, 6);
  if ( !Rect.left )
  {
    PlaySoundA("loading.wav", 0, 0x20009u);
    sub_4011EA(v5);
  }
  v19 = (HINSTANCE)v5[4];
  WndClass.lpfnWndProc = (WNDPROC)8;
  WndClass.cbClsExtra = (int)&sub_401523;
  WndClass.cbWndExtra = 0;
  WndClass.hInstance = 0;
  WndClass.hIcon = v34;
  WndClass.hCursor = LoadIconA(v19, (LPCSTR)0x68);
  WndClass.hbrBackground = (HBRUSH)LoadCursorA(0, (LPCSTR)0x7F00);
  WndClass.lpszMenuName = (LPCSTR)GetStockObject(4);
  WndClass.lpszClassName = (LPCSTR)103;
  v37 = "HGClass";
  RegisterClassA((WNDCLASSA *)((char *)&WndClass + 4));
  sprintf(&WindowName, "%s (tm) v%d.%02d", dword_562F88, 1, 55);
  v20 = v5[2215];
  v21 = v5[2216];
  v22 = v5[2217] - v20;
  v23 = v5[2218] - v21;
  if ( v5[2217] == 0x80000000
    || v20 < 0
    || v21 < 0
    || v5[2215] > GetSystemMetrics(0)
    || v5[2216] > GetSystemMetrics(1)
    || v22 < 640
    || v23 < 480 )
  {
    v5[2215] = 2147483648;
    v5[2216] = 2147483648;
    Rect.right = 0;
    Rect.top = 0;
    v33 = 510;
    Rect.bottom = 710;
    AdjustWindowRect((struct tagRECT *)((char *)&Rect + 4), 0xCF0000u, 1);
    v22 = Rect.bottom - Rect.top;
    v23 = v33 - Rect.right;
  }
  v24 = CreateWindowExA(0, "HGClass", &WindowName, 0xCF0000u, v5[2215], v5[2216], v22, v23, 0, 0, (HINSTANCE)v5[4], 0);
  v5[3] = v24;
  sub_4AA5A0((int *)dword_56390C, (int)v24);
  dword_563920 = RegisterWindowMessageA("MSWHEEL_ROLLMSG");
  v5[2133] = 0;
  v25 = _time64(0);
  WndClass.style = HIDWORD(v25);
  v26 = GetTickCount();
  srand(v25 + v26);
  sub_4019CE(v5);
  sub_401E51(v5);
  sub_401A19(v5);
  InitCommonControls();
  ShowWindow((HWND)v5[3], 5);
  UpdateWindow((HWND)v5[3]);
  sprintf(&v41, "%s.lst", dword_562F88);
  v35 = operator new(0x2274u);
  v42 = 1;
  if ( v35 )
    v27 = sub_4022BB(dword_562F88, (int)&v41, (int)(v5 + 2578), 4850, (int)(v5 + 2610), 4850);
  else
    v27 = 0;
  v28 = v5[7] == 0;
  v42 = -1;
  v5[2132] = v27;
  if ( v28 )
    sub_40166D(v5);
  if ( !*((_BYTE *)v5 + 9416) )
    MessageBoxA(
      (HWND)v5[3],
      "You need to start the game by using the Station LaunchPad in order to be able to play.",
      "Launch Warning",
      0x30u);
  if ( v5[7] )
  {
    sub_402388(v5);
  }
  else
  {
    v29 = v5[2132];
    if ( *(_DWORD *)(v29 + 8000) )
      sub_401794();
    else
      sub_401645(v29);
  }
  return v5;
}
// 4010C8: using guessed type _DWORD __stdcall sub_4010C8(_DWORD);
// 4011EA: using guessed type int __thiscall sub_4011EA(_DWORD);
// 40159B: using guessed type int sub_40159B(void);
// 401645: using guessed type int __thiscall sub_401645(_DWORD);
// 40166D: using guessed type int __thiscall sub_40166D(_DWORD);
// 401794: using guessed type int sub_401794(void);
// 4019CE: using guessed type int __thiscall sub_4019CE(_DWORD);
// 401A19: using guessed type int __thiscall sub_401A19(_DWORD);
// 401E51: using guessed type int __thiscall sub_401E51(_DWORD);
// 402388: using guessed type int __thiscall sub_402388(_DWORD);
// 402400: using guessed type _DWORD __cdecl sub_402400(_DWORD, _DWORD, _DWORD);
// 563920: using guessed type int dword_563920;

//----- (00436910) --------------------------------------------------------
int __thiscall sub_436910(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (00436940) --------------------------------------------------------
int __thiscall sub_436940(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (00436960) --------------------------------------------------------
int __thiscall sub_436960(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (00436980) --------------------------------------------------------
int __thiscall sub_436980(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (004369E0) --------------------------------------------------------
char __cdecl sub_4369E0(int a1, signed int a2)
{
  signed int v2; // ecx
  int i; // esi

  v2 = a2;
  for ( i = a1; (unsigned int)(i + 191) > 0x17E || v2 >= 192 || v2 <= -192; i /= 2 )
    v2 /= 2;
  return byte_5508C8[384 * i + v2];
}

//----- (00436A60) --------------------------------------------------------
_DWORD *__thiscall sub_436A60(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[3072] = 0;
  return result;
}

//----- (00436B90) --------------------------------------------------------
int __thiscall sub_436B90(signed __int16 *this, int a2)
{
  int v2; // esi
  int v3; // eax
  signed __int16 *v4; // edx

  v2 = *((_DWORD *)this + 3072);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = this + 2;
  while ( *v4 != a2 )
  {
    ++v3;
    v4 += 12;
    if ( v3 >= v2 )
      return 0;
  }
  return (int)&this[12 * v3];
}

//----- (00436BE0) --------------------------------------------------------
int __thiscall sub_436BE0(signed __int16 *this, int a2)
{
  int v2; // esi
  int v3; // eax
  signed __int16 *v4; // edx

  v2 = *((_DWORD *)this + 3072);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = this + 2;
  while ( *v4 != a2 )
  {
    ++v3;
    v4 += 12;
    if ( v3 >= v2 )
      return 0;
  }
  return (int)&this[12 * v3];
}

//----- (00436C30) --------------------------------------------------------
int __thiscall sub_436C30(signed __int16 *this, int a2, _DWORD *a3)
{
  int v3; // esi
  int v4; // eax
  signed __int16 *v5; // edx
  int result; // eax

  v3 = *((_DWORD *)this + 3072);
  v4 = 0;
  if ( v3 <= 0 )
  {
LABEL_5:
    if ( a3 )
      *a3 = 0;
    result = 0;
  }
  else
  {
    v5 = this + 2;
    while ( *v5 != a2 )
    {
      ++v4;
      v5 += 12;
      if ( v4 >= v3 )
        goto LABEL_5;
    }
    if ( a3 )
      *a3 = this[12 * v4 + 4];
    result = *(_DWORD *)&this[12 * v4 + 6];
  }
  return result;
}

//----- (00436CB0) --------------------------------------------------------
int __thiscall sub_436CB0(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax
  int v5; // ebx
  int v6; // ebp
  _DWORD *v7; // edi
  int v8; // ecx
  int v9; // eax
  int v10; // esi
  int v11; // ebp
  int v12; // ebx
  int v13; // eax
  int v14; // edx
  int v15; // ecx
  int v16; // eax
  char *v17; // ecx
  char v18; // dl
  _DWORD *v19; // ecx
  signed int v20; // ebp
  _WORD *v21; // ebx
  signed int v22; // eax
  int v23; // esi
  int v24; // eax
  BOOL v25; // eax
  char *v26; // eax
  char v27; // cl
  __int16 v28; // ax
  int v29; // [esp-18h] [ebp-244h]
  int v30; // [esp+8h] [ebp-224h]
  signed int v31; // [esp+10h] [ebp-21Ch]
  int v32; // [esp+14h] [ebp-218h]
  int v33; // [esp+18h] [ebp-214h]
  _DWORD *v34; // [esp+1Ch] [ebp-210h]
  int v35; // [esp+20h] [ebp-20Ch]
  int v36; // [esp+24h] [ebp-208h]
  char v37[256]; // [esp+28h] [ebp-204h]
  char Dest; // [esp+128h] [ebp-104h]

  result = *((_DWORD *)dword_563908 + 3112);
  v5 = a3;
  v6 = a4;
  v33 = *((_DWORD *)dword_563908 + 3111) + a3 + 128;
  v34 = this;
  v35 = result + a4 + 128;
  v32 = 0;
  if ( this[3072] > 0 )
  {
    v7 = this + 3;
    while ( 1 )
    {
      v8 = *((signed __int16 *)v7 - 6);
      if ( v8 > v5 - 128 && v8 < v33 )
      {
        v9 = *((signed __int16 *)v7 - 5);
        if ( v9 > v6 - 128 && v9 < v35 )
        {
          v10 = v7[1];
          if ( v10 )
          {
            v11 = v9 - v6;
            v12 = v8 - v5;
            v13 = sub_401B59(0, *((_DWORD *)dword_563908 + 2705), *(signed __int16 *)(*v7 + 236));
            v29 = *(_DWORD *)(*v7 + 232);
            v14 = *(signed __int16 *)(*v7 + 230);
            v15 = *(signed __int16 *)(*v7 + 228);
            if ( *((signed __int16 *)v7 - 4) == *((_DWORD *)dword_563908 + 2691) )
            {
              sub_4A50B0(v10, v13, a2, v12, v11, ((v15 | ((v14 - 256) << 7)) << 16) | 0x903, v29, 0, 0, 0);
              v16 = *v7 + 72;
              v17 = &v37[-v16];
              do
              {
                v18 = *(_BYTE *)v16;
                v17[v16] = *(_BYTE *)v16;
                ++v16;
              }
              while ( v18 );
              if ( (*(int (**)(void))(*(_DWORD *)*v7 + 4))() == 1 )
              {
                v19 = dword_563908;
                v20 = 0;
                v30 = 0;
                v21 = (_WORD *)(*v7 + 300);
                v31 = 16;
                do
                {
                  if ( *v21 )
                  {
                    v22 = abs((signed __int16)*v21);
                    ++v20;
                    if ( v22 <= 5100 )
                    {
                      v23 = *(_DWORD *)(v19[1507] + 4 * v22 + 8008);
                      if ( v23 )
                      {
                        v24 = v19[6898] ? *(_DWORD *)(*(_DWORD *)(v19[6898] + 72) + 1060) : 0;
                        v25 = sub_494C40((void *)(v23 + 8), v19[78] + 60, v24);
                        v19 = dword_563908;
                        if ( v25 )
                        {
                          ++v30;
                          v36 = v23;
                        }
                      }
                    }
                  }
                  ++v21;
                  --v31;
                }
                while ( v31 );
                if ( v20 > 1 && v30 == 1 )
                {
                  v26 = (char *)(v36 + 72);
                  do
                  {
                    v27 = *v26;
                    v37[(_DWORD)v26 - 72 - v36] = *v26;
                    ++v26;
                  }
                  while ( v27 );
                }
              }
              v28 = *((_WORD *)v7 - 2);
              if ( v28 <= 1 )
                sprintf(&Dest, "%s", v37);
              else
                sprintf(&Dest, "%s (%d)", v37, v28);
              sub_40243C(&Dest, *((signed __int16 *)v7 - 6), *((signed __int16 *)v7 - 5));
            }
            else
            {
              sub_4A50B0(v10, v13, a2, v12, v11, ((v15 | ((v14 - 256) << 7)) << 16) | 0x103, v29, 0, 0, 0);
            }
          }
        }
      }
      result = v32 + 1;
      v7 += 6;
      if ( ++v32 >= v34[3072] )
        break;
      v6 = a4;
      v5 = a3;
    }
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 40243C: using guessed type _DWORD __stdcall sub_40243C(_DWORD, _DWORD, _DWORD);
// 436CB0: using guessed type char var_204[256];

//----- (00437070) --------------------------------------------------------
signed int __thiscall sub_437070(_DWORD *this, int a2, int a3)
{
  int v3; // ebx
  int *v4; // esi
  int v5; // ecx
  int v6; // ebp
  int v7; // edi
  _DWORD *v9; // [esp+14h] [ebp-4h]

  v3 = this[3072] - 1;
  v9 = this;
  if ( v3 < 0 )
    return -1;
  v4 = &this[6 * v3 + 4];
  while ( 1 )
  {
    v5 = *v4;
    if ( *v4 )
    {
      v6 = *((signed __int16 *)v4 - 8);
      if ( abs(a2 - v6) < *(signed __int16 *)(v5 + 172) / 2 )
      {
        v7 = *((signed __int16 *)v4 - 7);
        if ( abs(a3 - v7) < *(signed __int16 *)(v5 + 174) / 2 )
        {
          if ( sub_4B5060(
                 *((signed __int16 **)dword_563908 + 1508),
                 *((_DWORD *)dword_563908 + 7737),
                 *((_DWORD *)dword_563908 + 62),
                 *((_DWORD *)dword_563908 + 63),
                 v6,
                 v7,
                 0) )
          {
            break;
          }
        }
      }
    }
    --v3;
    v4 -= 6;
    if ( v3 < 0 )
      return -1;
  }
  return SLOWORD(v9[6 * v3 + 1]);
}

//----- (00437170) --------------------------------------------------------
signed int __thiscall sub_437170(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ebp
  signed __int16 *v5; // edi
  unsigned int v6; // edx
  int v7; // ecx
  signed int v8; // ebx
  signed int v9; // eax
  int v10; // eax
  signed int result; // eax
  signed int v12; // [esp+4h] [ebp-14h]
  signed int v13; // [esp+8h] [ebp-10h]
  int v14; // [esp+Ch] [ebp-Ch]
  int v15; // [esp+10h] [ebp-8h]
  int v16; // [esp+14h] [ebp-4h]

  v4 = this[3072] - 1;
  v13 = -1;
  v12 = 99999999;
  v15 = 0;
  v14 = 0;
  if ( v4 < 0 )
    goto LABEL_22;
  v16 = *((_DWORD *)dword_563908 + 7737);
  v5 = (signed __int16 *)((char *)&this[6 * v4] + 2);
  do
  {
    if ( dword_53A7C4 )
    {
      v6 = (signed int)(10 * (*v5 - a3) + ((unsigned __int64)(-18407002690i64 * (*v5 - a3)) >> 32)) >> 2;
      v7 = v6 + (v6 >> 31);
    }
    else
    {
      v7 = *v5 - a3;
    }
    v8 = abs(v7);
    v9 = abs(*(v5 - 1) - a2);
    if ( v9 > v8 )
      v8 = v9;
    if ( v8 < v16 && v8 < v12 )
    {
      v10 = abs((unsigned __int8)sub_40277A(v7, *(v5 - 1) - a2) - a4);
      if ( v10 > 120 )
        v10 = 240 - v10;
      if ( v10 < 26 || v8 < 32 )
      {
        v13 = v5[1];
        v12 = v8;
        v15 = *(v5 - 1);
        v14 = *v5;
      }
    }
    --v4;
    v5 -= 12;
  }
  while ( v4 >= 0 );
  if ( v13 != -1
    && sub_4B5060(
         *((signed __int16 **)dword_563908 + 1508),
         v16,
         *((_DWORD *)dword_563908 + 62),
         *((_DWORD *)dword_563908 + 63),
         v15,
         v14,
         0) )
  {
    result = v13;
  }
  else
  {
LABEL_22:
    result = -1;
  }
  return result;
}
// 40277A: using guessed type _DWORD __cdecl sub_40277A(_DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00437320) --------------------------------------------------------
signed int __thiscall sub_437320(_DWORD *this, int a2, int a3, int a4, _DWORD *a5)
{
  _DWORD *v5; // ebx
  signed int result; // eax
  int v7; // esi
  int *v8; // ecx
  _DWORD *v9; // edi
  int v10; // ebx
  signed int v11; // [esp+4h] [ebp-4h]
  int v12; // [esp+18h] [ebp+10h]

  v5 = this;
  result = sub_4B5060(
             *((signed __int16 **)dword_563908 + 1508),
             *((_DWORD *)dword_563908 + 7737),
             *((_DWORD *)dword_563908 + 62),
             *((_DWORD *)dword_563908 + 63),
             a2,
             a3,
             0);
  if ( result )
  {
    v7 = v5[3072] - 1;
    v11 = 0;
    if ( v7 >= 0 )
    {
      v8 = &v5[6 * v7 + 4];
      v9 = a5;
      v12 = a4 - (_DWORD)a5;
      do
      {
        v10 = *v8;
        if ( *v8
          && abs(a2 - *((signed __int16 *)v8 - 8)) < *(signed __int16 *)(v10 + 172) / 2
          && abs(a3 - *((signed __int16 *)v8 - 7)) < *(signed __int16 *)(v10 + 174) / 2 )
        {
          ++v11;
          *(_DWORD *)((char *)v9 + v12) = *((signed __int16 *)v8 - 6);
          *v9 = *(v8 - 1);
          ++v9;
        }
        --v7;
        v8 -= 6;
      }
      while ( v7 >= 0 );
    }
    result = v11;
  }
  return result;
}

//----- (00437440) --------------------------------------------------------
int __thiscall sub_437440(_DWORD *this, int a2)
{
  int result; // eax
  _DWORD *v3; // ebx
  signed __int16 *v4; // ebp
  int v5; // eax
  signed int v6; // ecx
  int v7; // eax
  __int16 v8; // ax
  int v9; // edi
  int v10; // edx
  int v11; // ecx
  int v12; // ecx
  bool v13; // sf
  unsigned __int8 v14; // of
  int v15; // [esp+0h] [ebp-Ch]
  int v16; // [esp+4h] [ebp-8h]
  _DWORD *v17; // [esp+8h] [ebp-4h]
  int v18; // [esp+10h] [ebp+4h]

  result = a2 * a2;
  v17 = this;
  v16 = a2 * a2;
  v15 = 0;
  if ( this[3072] > 0 )
  {
    v3 = dword_563908;
    v4 = (signed __int16 *)((char *)this + 2);
    v18 = (int)this + 2;
    do
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v4 + 5) + 152);
      if ( v5 )
      {
        v6 = (signed int)(unsigned __int8)v5 >> 3;
        v7 = BYTE1(v5) | 32 * (BYTE2(v5) & 0xF8);
        if ( dword_576828 == 2 )
          v8 = v7 & 0xFFF8;
        else
          v8 = 2 * (v7 & 0xFFFC);
        v9 = (unsigned __int16)(v6 | 4 * v8);
        v10 = *v4 - v3[63];
        v11 = *(v4 - 1) - v3[62];
        if ( v11 * v11 + v10 * v10 < v16 )
        {
          v12 = v3[1505];
          sub_401A7D(*(v4 - 1) / 16, *v4 / 16, 2, 2, v9, 1, 0);
          v3 = dword_563908;
        }
        v4 = (signed __int16 *)v18;
      }
      result = v15 + 1;
      v4 += 12;
      v14 = __OFSUB__(v15 + 1, v17[3072]);
      v13 = v15 + 1 - v17[3072] < 0;
      v18 = (int)v4;
      ++v15;
    }
    while ( v13 ^ v14 );
  }
  return result;
}
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (00437760) --------------------------------------------------------
BOOL __fastcall sub_437760(int a1, int a2)
{
  return abs(sub_401D39(a1, a2) - *(_DWORD *)(a1 + 12)) >= *(_DWORD *)(*(_DWORD *)(a1 + 8) + 96);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00437800) --------------------------------------------------------
_DWORD *__thiscall sub_437800(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax

  result = this;
  if ( !*((_BYTE *)dword_563908 + 2220) )
    result = (_DWORD *)sub_40243C(this[1] + 8, a2, a3);
  return result;
}
// 40243C: using guessed type _DWORD __stdcall sub_40243C(_DWORD, _DWORD, _DWORD);

//----- (00437890) --------------------------------------------------------
char __thiscall sub_437890(_DWORD *this, int a2)
{
  _DWORD *v2; // edx
  _DWORD *v3; // ecx
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // esi
  int v8; // edi
  signed int v10; // [esp-4h] [ebp-8h]

  v2 = this;
  v3 = dword_563908;
  v4 = *((_DWORD *)dword_563908 + 6897);
  if ( *((_WORD *)v2 + 4) == *(_WORD *)(v4 + 96) )
  {
    v5 = v2[5];
    if ( v5 > 0 )
    {
      v6 = v5 - a2 * *(_DWORD *)((char *)dword_563908 + 480 * *((_DWORD *)dword_563908 + 66) + 59906);
      v2[5] = v6;
      if ( v6 <= 0 )
      {
        v10 = 1;
LABEL_11:
        v2[5] = 0;
        LOBYTE(v4) = (*(int (__stdcall **)(_DWORD, _DWORD, signed int))(*(_DWORD *)dword_56391C + 72))(
                       *(_DWORD *)(v2[1] + 4),
                       0,
                       v10);
        return v4;
      }
      v3 = dword_563908;
      v7 = *((_DWORD *)dword_563908 + 1514);
      v8 = *(_DWORD *)(v7 + 31544);
      if ( !v8 || v6 < v8 )
      {
        *(_DWORD *)(v7 + 31544) = v6;
        v3 = dword_563908;
      }
    }
    LOBYTE(v4) = *(_BYTE *)(v3[66] + v2[4] + 148);
    if ( !(_BYTE)v4 || (_BYTE)v4 == 2 )
    {
      v10 = 0;
      goto LABEL_11;
    }
  }
  return v4;
}
// 56391C: using guessed type int dword_56391C;

//----- (00437970) --------------------------------------------------------
_BYTE *__thiscall sub_437970(signed __int16 *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  signed __int16 *v4; // esi
  int v5; // ST04_4
  int v6; // ST00_4
  int v7; // ecx
  int v8; // eax
  int v9; // ebx
  _BYTE *result; // eax
  bool v11; // sf
  unsigned __int8 v12; // of
  signed __int16 v13; // ax
  bool v14; // zf

  v4 = this;
  v5 = this[6] / 16;
  v6 = this[5] / 16;
  v7 = *((_DWORD *)dword_563908 + 1532);
  v8 = sub_401B13(v6, v5);
  *a2 = 0;
  *a3 = 0;
  *a4 = 0;
  v9 = v8;
  result = (_BYTE *)sub_4014FB(*((_DWORD *)dword_563908 + 6897));
  if ( result )
  {
    if ( v4[7] == -1 )
    {
      result = (_BYTE *)*((_DWORD *)v4 + 4);
      if ( result[70] >= 1 )
      {
        *a2 = 1;
        if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 70) >= 2 )
        {
          *a3 = 1;
          if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 70) >= 3 )
          {
            result = a4;
            *a4 = 1;
          }
        }
      }
      return result;
    }
    if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 69) < 1 )
      return result;
    *a2 = 1;
    if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 69) < 2 )
      return result;
    *a3 = 1;
    result = (_BYTE *)*((_DWORD *)v4 + 4);
    v12 = __OFSUB__(result[69], 3);
    v11 = (char)(result[69] - 3) < 0;
  }
  else
  {
    v13 = v4[7];
    if ( v13 == -1 )
    {
      result = (_BYTE *)*((_DWORD *)v4 + 4);
      if ( result[73] && !v9 )
        return result;
      if ( result[68] < 1 )
        return result;
      *a2 = 1;
      if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 68) < 2 )
        return result;
      *a3 = 1;
      result = (_BYTE *)*((_DWORD *)v4 + 4);
      v12 = __OFSUB__(result[68], 3);
      v11 = (char)(result[68] - 3) < 0;
    }
    else
    {
      v14 = v13 == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100);
      result = (_BYTE *)*((_DWORD *)v4 + 4);
      if ( v14 )
      {
        if ( result[71] && !v9 )
          return result;
        if ( result[66] < 1 )
          return result;
        *a2 = 1;
        if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 66) < 2 )
          return result;
        *a3 = 1;
        result = (_BYTE *)*((_DWORD *)v4 + 4);
        v12 = __OFSUB__(result[66], 3);
        v11 = (char)(result[66] - 3) < 0;
      }
      else
      {
        if ( result[72] && !v9 )
          return result;
        if ( result[67] < 1 )
          return result;
        *a2 = 1;
        if ( *(_BYTE *)(*((_DWORD *)v4 + 4) + 67) < 2 )
          return result;
        *a3 = 1;
        result = (_BYTE *)*((_DWORD *)v4 + 4);
        v12 = __OFSUB__(result[67], 3);
        v11 = (char)(result[67] - 3) < 0;
      }
    }
  }
  if ( !(v11 ^ v12) )
    *a4 = 1;
  return result;
}
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401B13: using guessed type _DWORD __stdcall sub_401B13(_DWORD, _DWORD);

//----- (00437BE0) --------------------------------------------------------
int __thiscall sub_437BE0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int result; // eax
  int v6; // edi
  int v7; // ebp
  int v8; // ebx
  int v9; // eax
  _DWORD *v10; // edx
  signed int v11; // [esp+10h] [ebp+8h]

  v4 = this;
  result = this[2];
  v6 = *(_DWORD *)(result + 324);
  if ( v6 )
  {
    v7 = *(signed __int16 *)(result + 40) - a3;
    if ( v7 >= -256 && v7 <= *(_DWORD *)(a2 + 4) + 256 )
    {
      v8 = *(signed __int16 *)(result + 42) - a4;
      if ( v8 >= -256 )
      {
        result = *(_DWORD *)(a2 + 8) + 256;
        if ( v8 <= result )
        {
          v11 = 0;
          if ( *(_WORD *)(v6 + 176) > 1 && !sub_401127(this) )
            v11 = 1;
          v9 = sub_401B59(v11, *((_DWORD *)dword_563908 + 2705), *(signed __int16 *)(v4[2] + 264));
          v10 = (_DWORD *)v4[2];
          if ( *((_DWORD *)dword_563908 + 2693) == v10[1] )
          {
            sub_4A50B0(v6, v9, a2, v7, v8, v10[82] | 0x80000900, v10[65], 0, 0, 0);
            result = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*v4 + 16))(
                       v4,
                       *(signed __int16 *)(v4[2] + 40),
                       *(signed __int16 *)(v4[2] + 42));
          }
          else
          {
            result = sub_4A50B0(v6, v9, a2, v7, v8, v10[82] | 0x80000100, v10[65], 0, 0, 0);
          }
        }
      }
    }
  }
  return result;
}
// 401127: using guessed type int __thiscall sub_401127(_DWORD);
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);

//----- (00437DF0) --------------------------------------------------------
void __thiscall sub_437DF0(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // edi
  int v5; // ebx
  int v6; // esi
  int v7; // edx
  int v8; // ST1C_4
  int v9; // ST18_4
  int v10; // ST14_4
  int v11; // eax

  v4 = this[2];
  v5 = *(_DWORD *)(v4 + 376);
  if ( v5 )
  {
    v6 = *(signed __int16 *)(v4 + 40) - a3;
    if ( v6 >= -256 && v6 <= *(_DWORD *)(a2 + 4) + 256 )
    {
      v7 = *(signed __int16 *)(v4 + 42) - a4;
      if ( v7 >= -256 && v7 <= *(_DWORD *)(a2 + 8) + 256 )
      {
        v8 = *(_DWORD *)(v4 + 252);
        v9 = *(_DWORD *)(v4 + 380) | 0x100;
        v10 = *(signed __int16 *)(v4 + 42) - a4;
        v11 = sub_401B59(0, *((_DWORD *)dword_563908 + 2705), *(signed __int16 *)(v4 + 256));
        sub_4A50B0(v5, v11, a2, v6, v10, v9, v8, 0, 0, 0);
      }
    }
  }
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);

//----- (00437ED0) --------------------------------------------------------
int __thiscall sub_437ED0(_DWORD *this, BOOL a2)
{
  BOOL v2; // eax

  if ( *(_WORD *)(this[2] + 74) )
    v2 = a2 == 0;
  else
    v2 = a2;
  return (*(int (__cdecl **)(BOOL))(*this + 8))(v2);
}

//----- (00437F00) --------------------------------------------------------
signed __int16 *__fastcall sub_437F00(_DWORD *a1, int a2, signed __int16 *a3, int a4)
{
  signed __int16 *result; // eax
  _DWORD *v5; // ebx
  int v6; // eax
  bool v7; // zf
  int *v8; // ecx
  int v9; // edi
  int v10; // ebp
  int v11; // esi
  int v12; // ecx
  int v13; // eax
  int v14; // ecx

  result = a3;
  v5 = a1;
  if ( a3 != (signed __int16 *)a1[74] )
  {
    a1[74] = a3;
    if ( !a4 )
    {
      v6 = sub_401D39(a1, a2);
      v7 = v5[74] == 0;
      v5[75] = v6;
      result = (signed __int16 *)v5[2];
      if ( v7 )
        v8 = (int *)*((_DWORD *)result + 61);
      else
        v8 = (int *)*((_DWORD *)result + 60);
      if ( v8 )
        result = (signed __int16 *)sub_4A6E90(v8, result[20], result[21], 0, 0, 0, 0, 0);
    }
    v9 = v5[4];
    v10 = 0;
    if ( v9 < v5[6] )
    {
      result = (signed __int16 *)dword_563908;
      while ( 1 )
      {
        v11 = v5[3];
        if ( v11 < v5[5] )
          break;
LABEL_17:
        if ( ++v9 >= v5[6] )
          return result;
      }
      while ( 1 )
      {
        v12 = *((_DWORD *)result + 1508);
        v13 = v11 + v9 * *(_DWORD *)(v12 + 4);
        if ( v5[74] )
          break;
        *(_BYTE *)(3 * v13 + *(_DWORD *)(v12 + 5168) + 2) ^= (*(_BYTE *)(3 * v13 + *(_DWORD *)(v12 + 5168) + 2) ^ *((_BYTE *)v5 + v10 + 36)) & 0x1F;
        v14 = *((_DWORD *)dword_563908 + 1508);
        *(_BYTE *)(3 * (v11 + v9 * *(_DWORD *)(v14 + 4)) + *(_DWORD *)(v14 + 5168) + 2) = *((_BYTE *)v5 + v10 + 36) ^ (*(_BYTE *)(3 * (v11 + v9 * *(_DWORD *)(v14 + 4)) + *(_DWORD *)(v14 + 5168) + 2) ^ *((_BYTE *)v5 + v10 + 36)) & 0x1F;
        result = (signed __int16 *)dword_563908;
        if ( *((_DWORD *)dword_563908 + 6898) )
        {
          (*(void (__thiscall **)(_DWORD, int, int, int))(**((_DWORD **)dword_563908 + 6898) + 52))(
            *((_DWORD *)dword_563908 + 6898),
            v11,
            v9,
            *((_BYTE *)v5 + v10 + 36) & 0x1F);
LABEL_15:
          result = (signed __int16 *)dword_563908;
        }
        ++v11;
        ++v10;
        if ( v11 >= v5[5] )
          goto LABEL_17;
      }
      *(_BYTE *)(3 * v13 + *(_DWORD *)(v12 + 5168) + 2) &= 0xE0u;
      *(_BYTE *)(3 * (v11 + v9 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4))
               + *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5168)
               + 2) &= 0x1Fu;
      goto LABEL_15;
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00438120) --------------------------------------------------------
signed int __thiscall sub_438120(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi
  signed int result; // eax
  int v6; // ebp
  int v7; // edx
  int v8; // ebx
  int v9; // ecx
  _DWORD *v10; // eax
  int v11; // esi
  signed int v12; // ecx
  int v13; // edx
  signed int v14; // ST20_4
  int v15; // ecx
  int v16; // ecx
  int v17; // eax
  int v18; // [esp-1Ch] [ebp-20h]

  v4 = this;
  result = this[2];
  if ( *(_DWORD *)(result + 188) )
  {
    v6 = *(signed __int16 *)(result + 40) - a3;
    if ( v6 >= -256 )
    {
      v7 = *(_DWORD *)(a2 + 4) + 256;
      if ( v6 <= v7 )
      {
        v8 = *(signed __int16 *)(result + 42) - a4;
        if ( v8 >= -256 && v8 <= *(_DWORD *)(a2 + 8) + 256 )
        {
          v9 = this[5];
          if ( v9 != -1 && (v10 = *(_DWORD **)(result + 196)) != 0 )
            result = sub_4A6340(v10, v4[5]);
          else
            result = abs(sub_401D39(v9, v7) - v4[6]);
          v11 = v4[2];
          v12 = *(signed __int16 *)(v11 + 184);
          if ( !*(_WORD *)(v11 + 184) )
            v12 = *(signed __int16 *)(*(_DWORD *)(v11 + 188) + 170);
          v13 = *(signed __int16 *)(v11 + 74);
          if ( result < v12 )
          {
            v14 = v12;
            v15 = *(_DWORD *)(v11 + 188);
            result = sub_401B59(0, result, v14);
            v13 = result;
          }
          if ( v13 >= 0 )
          {
            result = *(_DWORD *)(v11 + 188);
            if ( v13 < *(signed __int16 *)(result + 168) )
            {
              v16 = *(_DWORD *)(v11 + 188);
              v17 = *(_DWORD *)(v11 + 192);
              v18 = *(_DWORD *)(v11 + 180);
              if ( *((_DWORD *)dword_563908 + 2693) == *(_DWORD *)(v11 + 4) )
                result = sub_4A50B0(v16, v13, a2, v6, v8, v17 | 0x80000900, v18, 0, 0, 0);
              else
                result = sub_4A50B0(v16, v13, a2, v6, v8, v17 | 0x80000100, v18, 0, 0, 0);
            }
          }
        }
      }
    }
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004382B0) --------------------------------------------------------
int __thiscall sub_4382B0(_DWORD *this, int a2)
{
  int result; // eax
  _DWORD *v3; // edi
  int v4; // esi
  unsigned __int16 v5; // bx
  unsigned __int16 v6; // bp
  int v7; // ebx
  __int16 v8; // ax
  int v9; // edx
  int v10; // ecx
  signed int v11; // ebp
  int v12; // eax
  int v13; // ebx
  int v14; // edx
  __int16 v15; // ax
  signed int v16; // [esp+Ch] [ebp-Ch]
  Concurrency::details::InternalContextBase *v17; // [esp+10h] [ebp-8h]
  int v18; // [esp+14h] [ebp-4h]

  result = (int)dword_563918;
  v3 = this;
  v4 = this[2];
  if ( *((_DWORD *)dword_563918 + 2267) )
  {
    result = *(_DWORD *)(v4 + 196);
    v17 = *(Concurrency::details::InternalContextBase **)(v4 + 196);
    if ( !result )
      return result;
    v5 = *(_WORD *)(v4 + 44);
    result = abs(*((_DWORD *)dword_563908 + 62) - *(signed __int16 *)(v4 + 40));
    v16 = 0;
    if ( result >= (signed __int16)v5
      || (v6 = *(_WORD *)(v4 + 46),
          result = abs(*((_DWORD *)dword_563908 + 63) - *(signed __int16 *)(v4 + 42)),
          result >= (signed __int16)v6) )
    {
      this[4] = 0;
LABEL_29:
      if ( *(_WORD *)(v4 + 66) == -1 )
      {
        result = v3[5];
        if ( result >= 0 )
        {
          result = sub_4A5FA0(*(_DWORD **)(v4 + 196), v3[5]);
          v3[5] = -1;
        }
      }
      return result;
    }
    result = v5;
    if ( (signed __int16)v5 <= (signed __int16)v6 )
      result = v6;
    v7 = (signed __int16)result;
    v18 = (signed __int16)result;
    if ( !*(_WORD *)(v4 + 64) || !this[4] )
    {
      result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1500) + 108);
      if ( result < *(signed __int16 *)(v4 + 70)
        || result > *(signed __int16 *)(v4 + 72)
        || (result = *(unsigned __int16 *)(v4 + 60), (_WORD)result != -1)
        && *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) != (_WORD)result )
      {
        v16 = 1;
      }
      else if ( *(_WORD *)(v4 + 66) == -1 )
      {
        if ( this[5] == -1 || (result = sub_4A6390(v17, this[5])) == 0 )
        {
          v8 = *(_WORD *)(v4 + 68);
          if ( v8 <= 0 )
          {
            result = sub_4A7120(*(_DWORD **)(v4 + 196), v8, 0, 1, 0);
          }
          else
          {
            sub_4A62C0(*(_DWORD **)(v4 + 196), 0, v7);
            result = sub_4A6E90(
                       *(int **)(v4 + 196),
                       *(signed __int16 *)(v4 + 40),
                       *(signed __int16 *)(v4 + 42),
                       0,
                       0,
                       0,
                       0,
                       1);
          }
          v3[5] = result;
        }
      }
      else
      {
        v11 = (signed int)Concurrency::details::InternalContextBase::GetProxy(v17);
        if ( v11 <= *(signed __int16 *)(v4 + 66) )
          v11 = *(signed __int16 *)(v4 + 66);
        v12 = sub_401D39(v10, v9);
        v13 = v12;
        result = abs(v12 - v3[3]);
        if ( result >= v11 )
        {
          v3[3] = v13;
          v14 = rand() % 1000;
          result = *(signed __int16 *)(v4 + 62);
          if ( v14 < result )
          {
            v3[6] = v13;
            v15 = *(_WORD *)(v4 + 68);
            if ( v15 <= 0 )
            {
              result = sub_4A7120(*(_DWORD **)(v4 + 196), v15, 0, 0, 0);
            }
            else
            {
              sub_4A62C0(*(_DWORD **)(v4 + 196), 0, v18);
              result = sub_4A6E90(
                         *(int **)(v4 + 196),
                         *(signed __int16 *)(v4 + 40),
                         *(signed __int16 *)(v4 + 42),
                         0,
                         0,
                         0,
                         0,
                         0);
            }
          }
        }
      }
    }
    v3[4] = 1;
    if ( v16 )
      goto LABEL_29;
  }
  else if ( *(_WORD *)(v4 + 66) == -1 )
  {
    result = this[5];
    if ( result >= 0 )
    {
      result = sub_4A5FA0(*(_DWORD **)(v4 + 196), this[5]);
      v3[5] = -1;
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004385B0) --------------------------------------------------------
int __thiscall sub_4385B0(int (__stdcall ****this)(signed int))
{
  int (__stdcall ****v1)(signed int); // esi
  signed int v2; // edi
  int (__stdcall ****v3)(signed int); // ebx
  int result; // eax
  signed int v5; // edi
  int (__stdcall ****v6)(signed int); // ebx
  signed int v7; // edi
  int (__stdcall ****v8)(signed int); // ebx
  signed int v9; // edi
  int (__stdcall ****v10)(signed int); // ebx
  signed int v11; // edi
  int (__stdcall ****v12)(signed int); // ebx
  signed int v13; // edi
  int (__stdcall ****v14)(signed int); // ebx

  v1 = this;
  v2 = 0;
  if ( (signed int)this[6859] > 0 )
  {
    v3 = this + 6603;
    do
    {
      if ( *v3 )
        result = (***v3)(1);
      ++v2;
      ++v3;
    }
    while ( v2 < (signed int)v1[6859] );
  }
  v5 = 0;
  if ( (signed int)v1[6345] > 0 )
  {
    v6 = v1 + 6089;
    do
    {
      if ( *v6 )
        result = (***v6)(1);
      ++v5;
      ++v6;
    }
    while ( v5 < (signed int)v1[6345] );
  }
  v7 = 0;
  if ( (signed int)v1[6088] > 0 )
  {
    v8 = v1 + 5576;
    do
    {
      if ( *v8 )
        result = (***v8)(1);
      ++v7;
      ++v8;
    }
    while ( v7 < (signed int)v1[6088] );
  }
  v9 = 0;
  if ( (signed int)v1[4550] > 0 )
  {
    v10 = v1 + 3526;
    do
    {
      if ( *v10 )
        result = (***v10)(1);
      ++v9;
      ++v10;
    }
    while ( v9 < (signed int)v1[4550] );
  }
  v11 = 0;
  if ( (signed int)v1[3525] > 0 )
  {
    v12 = v1 + 2501;
    do
    {
      if ( *v12 )
        result = (***v12)(1);
      ++v11;
      ++v12;
    }
    while ( v11 < (signed int)v1[3525] );
  }
  v13 = 0;
  if ( (signed int)v1[5575] > 0 )
  {
    v14 = v1 + 4551;
    do
    {
      if ( *v14 )
        result = (***v14)(1);
      ++v13;
      ++v14;
    }
    while ( v13 < (signed int)v1[5575] );
  }
  return result;
}

//----- (00438720) --------------------------------------------------------
int __thiscall sub_438720(_DWORD *this, int a2, int a3, signed int a4)
{
  int result; // eax
  int v5; // edx
  int v6; // esi

  result = a3;
  if ( a3 == *((_DWORD *)dword_563908 + 6897) )
  {
    v5 = 0;
    if ( this[6859] > 0 )
    {
      v6 = (int)(this + 6603);
      do
      {
        result = *(_DWORD *)v6;
        if ( *(_WORD *)(*(_DWORD *)v6 + 8) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 96)
          && a4 >= *(signed __int16 *)(*(_DWORD *)(result + 16) + 80) )
        {
          *(_DWORD *)(result + 20) = *(signed __int16 *)(*(_DWORD *)(result + 16) + 78);
        }
        ++v5;
        v6 += 4;
      }
      while ( v5 < this[6859] );
    }
  }
  return result;
}

//----- (004387B0) --------------------------------------------------------
int __thiscall sub_4387B0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  int result; // eax
  int v7; // [esp+54h] [ebp-4h]
  int v8; // [esp+54h] [ebp-4h]
  int v9; // [esp+54h] [ebp-4h]
  int v10; // [esp+54h] [ebp-4h]
  int v11; // [esp+54h] [ebp-4h]
  int v12; // [esp+54h] [ebp-4h]
  int v13; // [esp+54h] [ebp-4h]
  int v14; // [esp+64h] [ebp+Ch]
  int v15; // [esp+64h] [ebp+Ch]
  int v16; // [esp+64h] [ebp+Ch]
  int v17; // [esp+64h] [ebp+Ch]
  int v18; // [esp+64h] [ebp+Ch]
  int v19; // [esp+64h] [ebp+Ch]
  int v20; // [esp+64h] [ebp+Ch]

  v4 = this;
  v5 = a4;
  v7 = 0;
  if ( this[3525] > 0 )
  {
    v14 = (int)(this + 2501);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v14 + 4))(a2, a3, v5);
      v14 += 4;
      result = v7++ + 1;
    }
    while ( v7 < v4[3525] );
  }
  v8 = 0;
  if ( v4[5575] > 0 )
  {
    v15 = (int)(v4 + 4551);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v15 + 4))(a2, a3, v5);
      v15 += 4;
      result = v8++ + 1;
    }
    while ( v8 < v4[5575] );
  }
  v9 = 0;
  if ( v4[4550] > 0 )
  {
    v16 = (int)(v4 + 3526);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v16 + 4))(a2, a3, v5);
      v16 += 4;
      result = v9++ + 1;
    }
    while ( v9 < v4[4550] );
  }
  v10 = 0;
  if ( v4[6088] > 0 )
  {
    v17 = (int)(v4 + 5576);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v17 + 4))(a2, a3, v5);
      v17 += 4;
      result = v10++ + 1;
    }
    while ( v10 < v4[6088] );
  }
  v11 = 0;
  if ( v4[6345] > 0 )
  {
    v18 = (int)(v4 + 6089);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v18 + 4))(a2, a3, v5);
      v18 += 4;
      result = v11++ + 1;
    }
    while ( v11 < v4[6345] );
  }
  v12 = 0;
  if ( v4[6859] > 0 )
  {
    v19 = (int)(v4 + 6603);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v19 + 4))(a2, a3, v5);
      v19 += 4;
      result = v12++ + 1;
    }
    while ( v12 < v4[6859] );
  }
  v13 = 0;
  if ( v4[7372] > 0 )
  {
    v20 = (int)(v4 + 6860);
    do
    {
      (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v20 + 4))(a2, a3, v5);
      v20 += 4;
      result = v13++ + 1;
    }
    while ( v13 < v4[7372] );
  }
  return result;
}

//----- (00438A30) --------------------------------------------------------
int __thiscall sub_438A30(_DWORD *this, int a2, int a3, int a4, _DWORD *a5)
{
  _DWORD *v5; // esi
  int v6; // edi
  int v7; // ebp
  bool v8; // zf
  bool v9; // sf
  signed int v10; // ecx
  int v11; // esi
  int v12; // ebx
  __int16 v13; // ax
  int v14; // eax
  _DWORD *v16; // [esp+Ch] [ebp-4h]

  v5 = this;
  v6 = 0;
  v7 = 0;
  v8 = this[7885] == 0;
  v9 = this[7885] < 0;
  v16 = this;
  v10 = 10000000;
  if ( !v9 && !v8 )
  {
    v11 = (int)(v5 + 7373);
    do
    {
      v12 = *(_DWORD *)v11;
      v13 = *(_WORD *)(*(_DWORD *)v11 + 64);
      if ( (v13 == -1 || v13 == a2)
        && abs(a3 - *(signed __int16 *)(v12 + 40)) < (signed int)*(signed __int16 *)(v12 + 44)
        && abs(a4 - *(signed __int16 *)(v12 + 42)) < (signed int)*(signed __int16 *)(v12 + 46) )
      {
        v14 = *(signed __int16 *)(v12 + 44) * *(signed __int16 *)(v12 + 46);
        if ( !v6 || v14 < v10 )
        {
          *a5 = *(_DWORD *)(v12 + 60);
          v6 = *(_DWORD *)v11 + 66;
          v10 = v14;
        }
      }
      ++v7;
      v11 += 4;
    }
    while ( v7 < v16[7885] );
  }
  return v6;
}

//----- (00438B10) --------------------------------------------------------
int __thiscall sub_438B10(_DWORD *this, int a2)
{
  int v2; // edx
  int v3; // eax
  int v4; // esi
  int v5; // esi
  int v6; // eax
  int v7; // edx
  int v8; // esi
  int v9; // eax
  int v10; // edx
  int result; // eax

  v2 = this[3525];
  v3 = 0;
  if ( v2 <= 0 )
  {
LABEL_5:
    v5 = this[5575];
    v6 = 0;
    if ( v5 <= 0 )
    {
LABEL_9:
      v8 = this[4550];
      v9 = 0;
      if ( v8 <= 0 )
      {
LABEL_13:
        result = 0;
      }
      else
      {
        v10 = (int)(this + 3526);
        while ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v10 + 8) + 4) != a2 )
        {
          ++v9;
          v10 += 4;
          if ( v9 >= v8 )
            goto LABEL_13;
        }
        result = this[v9 + 3526];
      }
    }
    else
    {
      v7 = (int)(this + 4551);
      while ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v7 + 8) + 4) != a2 )
      {
        ++v6;
        v7 += 4;
        if ( v6 >= v5 )
          goto LABEL_9;
      }
      result = this[v6 + 4551];
    }
  }
  else
  {
    v4 = (int)(this + 2501);
    while ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v4 + 8) + 4) != a2 )
    {
      ++v3;
      v4 += 4;
      if ( v3 >= v2 )
        goto LABEL_5;
    }
    result = this[v3 + 2501];
  }
  return result;
}

//----- (00438BF0) --------------------------------------------------------
int __thiscall sub_438BF0(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // edx

  v2 = this[6088];
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = (int)(this + 5576);
  while ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v4 + 8) + 4) != a2 )
  {
    ++v3;
    v4 += 4;
    if ( v3 >= v2 )
      return 0;
  }
  return this[v3 + 5576];
}

//----- (00438CB0) --------------------------------------------------------
int __thiscall sub_438CB0(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // edx

  v2 = this[6859];
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = (int)(this + 6603);
  while ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v4 + 16) + 4) != a2 )
  {
    ++v3;
    v4 += 4;
    if ( v3 >= v2 )
      return 0;
  }
  return this[v3 + 6603];
}

//----- (00438D10) --------------------------------------------------------
int __stdcall sub_438D10(int a1)
{
  int result; // eax

  result = sub_401B68(a1);
  if ( !result )
  {
    result = sub_40164F(a1);
    if ( !result )
      result = sub_402392(a1);
  }
  return result;
}
// 40164F: using guessed type _DWORD __stdcall sub_40164F(_DWORD);
// 401B68: using guessed type _DWORD __stdcall sub_401B68(_DWORD);
// 402392: using guessed type _DWORD __stdcall sub_402392(_DWORD);

//----- (00438D40) --------------------------------------------------------
signed int __thiscall sub_438D40(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // edx
  int v5; // eax
  int v6; // ebp
  int v7; // ebx
  int v8; // edi
  int v9; // esi
  __int64 v10; // rax
  int v11; // eax
  bool v12; // sf
  unsigned __int8 v13; // of
  int v14; // eax
  int v15; // eax
  int v16; // ebp
  int v17; // ebx
  int v18; // edi
  int v19; // esi
  __int64 v20; // rax
  int v21; // eax
  signed int result; // eax
  int v23; // [esp+10h] [ebp-10h]
  int v24; // [esp+10h] [ebp-10h]
  _DWORD *v25; // [esp+14h] [ebp-Ch]
  signed int v26; // [esp+18h] [ebp-8h]
  signed int v27; // [esp+18h] [ebp-8h]
  int v28; // [esp+1Ch] [ebp-4h]
  int v29; // [esp+1Ch] [ebp-4h]

  v25 = this;
  v23 = 0;
  if ( this[6859] <= 0 )
  {
LABEL_14:
    v24 = 0;
    if ( this[6088] <= 0 )
    {
LABEL_26:
      result = -1;
    }
    else
    {
      v14 = (int)(this + 5576);
      v29 = (int)(this + 5576);
      while ( 1 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v14 + 8) + 324) )
        {
          v15 = *(_DWORD *)(*(_DWORD *)v14 + 8);
          v16 = *(signed __int16 *)(v15 + 42);
          v17 = *(signed __int16 *)(v15 + 40);
          v18 = v16 - a3;
          v19 = v17 - a2;
          v20 = v16 - a3;
          v27 = abs(v19);
          if ( v27 <= (signed int)((HIDWORD(v20) ^ v20) - HIDWORD(v20)) )
            v27 = (HIDWORD(v20) ^ v20) - HIDWORD(v20);
          if ( v27 < *((_DWORD *)dword_563908 + 7737) )
          {
            v21 = abs((unsigned __int8)sub_40277A(v18, v19) - a4);
            if ( v21 > 120 )
              v21 = 240 - v21;
            if ( (v21 < 26 || v27 < 32)
              && sub_4B5060(
                   *((signed __int16 **)dword_563908 + 1508),
                   *((_DWORD *)dword_563908 + 7737),
                   *((_DWORD *)dword_563908 + 62),
                   *((_DWORD *)dword_563908 + 63),
                   v17,
                   v16,
                   0) )
            {
              break;
            }
          }
        }
        v14 = v29 + 4;
        v13 = __OFSUB__(v24 + 1, v25[6088]);
        v12 = v24++ + 1 - v25[6088] < 0;
        v29 += 4;
        if ( !(v12 ^ v13) )
          goto LABEL_26;
      }
      result = *(_DWORD *)(*(_DWORD *)(v25[v24 + 5576] + 8) + 4);
    }
  }
  else
  {
    v4 = (int)(this + 6603);
    v28 = (int)(this + 6603);
    while ( 1 )
    {
      v5 = *(_DWORD *)v4;
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v4 + 16) + 404) && *(_WORD *)(v5 + 10) >= 0 )
      {
        v6 = *(signed __int16 *)(v5 + 12);
        v7 = *(signed __int16 *)(v5 + 10);
        v8 = v6 - a3;
        v9 = v7 - a2;
        v10 = v6 - a3;
        v26 = abs(v9);
        if ( v26 <= (signed int)((HIDWORD(v10) ^ v10) - HIDWORD(v10)) )
          v26 = (HIDWORD(v10) ^ v10) - HIDWORD(v10);
        if ( v26 < *((_DWORD *)dword_563908 + 7737) )
        {
          v11 = abs((unsigned __int8)sub_40277A(v8, v9) - a4);
          if ( v11 > 120 )
            v11 = 240 - v11;
          if ( (v11 < 26 || v26 < 32)
            && sub_4B5060(
                 *((signed __int16 **)dword_563908 + 1508),
                 *((_DWORD *)dword_563908 + 7737),
                 *((_DWORD *)dword_563908 + 62),
                 *((_DWORD *)dword_563908 + 63),
                 v7,
                 v6,
                 0) )
          {
            break;
          }
        }
      }
      this = v25;
      v4 = v28 + 4;
      v13 = __OFSUB__(v23 + 1, v25[6859]);
      v12 = v23++ + 1 - v25[6859] < 0;
      v28 += 4;
      if ( !(v12 ^ v13) )
        goto LABEL_14;
    }
    result = *(_DWORD *)(*(_DWORD *)(v25[v23 + 6603] + 16) + 4);
  }
  return result;
}
// 40277A: using guessed type _DWORD __cdecl sub_40277A(_DWORD, _DWORD);

//----- (00439040) --------------------------------------------------------
signed int __thiscall sub_439040(_DWORD *this, int a2, int a3)
{
  int v3; // edx
  _DWORD *v4; // esi
  int v5; // edi
  int v6; // ebx
  int v7; // ecx
  int v8; // eax
  int v9; // edi
  int v10; // ebx
  int v11; // eax
  int v12; // ecx
  int v13; // eax

  v3 = a2;
  v4 = this;
  v5 = 0;
  if ( this[6859] > 0 )
  {
    v6 = (int)(this + 6603);
    do
    {
      v7 = *(signed __int16 *)(*(_DWORD *)v6 + 10);
      if ( v3 > v7 - 14 && v3 < v7 + 14 )
      {
        v8 = *(signed __int16 *)(*(_DWORD *)v6 + 12);
        if ( a3 > v8 - 28
          && a3 < v8 + 14
          && sub_4B5060(
               *((signed __int16 **)dword_563908 + 1508),
               *((_DWORD *)dword_563908 + 7737),
               *((_DWORD *)dword_563908 + 62),
               *((_DWORD *)dword_563908 + 63),
               v7,
               v8,
               0) )
        {
          return *(_DWORD *)(*(_DWORD *)(v4[v5 + 6603] + 16) + 4);
        }
        v3 = a2;
      }
      ++v5;
      v6 += 4;
    }
    while ( v5 < v4[6859] );
  }
  v9 = 0;
  if ( v4[6088] <= 0 )
    return -1;
  v10 = (int)(v4 + 5576);
  while ( 1 )
  {
    v11 = *(_DWORD *)(*(_DWORD *)v10 + 8);
    v12 = *(signed __int16 *)(v11 + 40);
    if ( v3 <= v12 - 14 || v3 >= v12 + 14 )
      goto LABEL_18;
    v13 = *(signed __int16 *)(v11 + 42);
    if ( a3 > v13 - 28
      && a3 < v13 + 14
      && sub_4B5060(
           *((signed __int16 **)dword_563908 + 1508),
           *((_DWORD *)dword_563908 + 7737),
           *((_DWORD *)dword_563908 + 62),
           *((_DWORD *)dword_563908 + 63),
           v12,
           v13,
           0) )
    {
      return *(_DWORD *)(*(_DWORD *)(v4[v9 + 5576] + 8) + 4);
    }
    v3 = a2;
LABEL_18:
    ++v9;
    v10 += 4;
    if ( v9 >= v4[6088] )
      return -1;
  }
}

//----- (004391D0) --------------------------------------------------------
signed int __thiscall sub_4391D0(_DWORD *this)
{
  signed int result; // eax
  int v2; // edx
  signed int v3; // esi
  int v4; // edx
  int v5; // esi

  result = *((_DWORD *)dword_563908 + 1504);
  v2 = 0;
  if ( *(_DWORD *)(result + 12404) > 0 )
  {
    v3 = 6404;
    do
    {
      *(_DWORD *)(*(_DWORD *)(v3 + result) + 120) = 0;
      result = *((_DWORD *)dword_563908 + 1504);
      ++v2;
      v3 += 4;
    }
    while ( v2 < *(_DWORD *)(result + 12404) );
  }
  v4 = 0;
  if ( this[6859] > 0 )
  {
    v5 = (int)(this + 6603);
    do
    {
      result = *(signed __int16 *)(*(_DWORD *)v5 + 8);
      if ( result >= 0 && result < 5000 )
      {
        result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408);
        if ( result )
          ++*(_DWORD *)(result + 120);
      }
      ++v4;
      v5 += 4;
    }
    while ( v4 < this[6859] );
  }
  return result;
}

//----- (00439290) --------------------------------------------------------
void __thiscall sub_439290(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // esi
  int v3; // edi
  _DWORD *v4; // eax
  int v5; // ecx
  int v6; // ST1C_4
  int v7; // edx
  int v8; // ST14_4
  int v9; // ST10_4
  int v10; // eax
  int v11; // ecx
  _WORD *v12; // esi
  __int16 v13; // bp
  __int16 v14; // bx
  int v15; // edi
  int v16; // ecx
  _DWORD *v17; // [esp+Ch] [ebp-18h]
  _DWORD *v18; // [esp+10h] [ebp-14h]
  int v19; // [esp+14h] [ebp-10h]
  int v20; // [esp+18h] [ebp-Ch]
  int v21; // [esp+1Ch] [ebp-8h]
  char v22; // [esp+20h] [ebp-4h]

  v1 = this;
  v2 = 0;
  v18 = this;
  if ( this[6345] > 0 )
  {
    v3 = (int)(this + 6089);
    do
    {
      v4 = *(_DWORD **)(*(_DWORD *)v3 + 8);
      if ( v4[94] )
      {
        v5 = *(_DWORD *)(*(_DWORD *)v3 + 4);
        v6 = (int)(v4 + 65);
        v7 = v4[97];
        v8 = v4[96];
        v9 = *(signed __int16 *)(v5 + 42) / 16;
        v10 = *(signed __int16 *)(v5 + 40);
        v11 = *((_DWORD *)dword_563908 + 1505);
        sub_40116D(v10 / 16, v9, v8, v7, v6);
      }
      ++v2;
      v3 += 4;
    }
    while ( v2 < v1[6345] );
  }
  v19 = 0;
  if ( v1[6859] > 0 )
  {
    v17 = v1 + 6603;
    do
    {
      v12 = (_WORD *)*v17;
      sub_40122B(&v22, &v20, &v21);
      if ( v20 )
      {
        v13 = v12[5];
        if ( v13 >= 0 )
        {
          v14 = v12[6];
          if ( v14 >= 0 && v12[4] == -1 )
          {
            v15 = *((unsigned __int16 *)dword_563908 + 118);
            if ( v12[7] == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) )
              v15 = *((unsigned __int16 *)dword_563908 + 117);
            if ( *((_DWORD *)dword_563908 + 2705) % 40 < 10 )
              v15 = *((unsigned __int16 *)dword_563908 + 119);
            v16 = *((_DWORD *)dword_563908 + 1505);
            sub_401A7D(v13 / 16, v14 / 16, 2, 2, v15, v21, 0);
          }
          v1 = v18;
        }
      }
      ++v17;
      ++v19;
    }
    while ( v19 < v1[6859] );
  }
}
// 40116D: using guessed type _DWORD __stdcall sub_40116D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40122B: using guessed type _DWORD __stdcall sub_40122B(_DWORD, _DWORD, _DWORD);
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00439470) --------------------------------------------------------
signed __int16 *__thiscall sub_439470(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // ebp
  int v5; // edi
  int v6; // ebx
  signed __int16 *v7; // esi
  signed __int16 v8; // ax
  int v9; // eax

  v4 = this;
  v5 = 0;
  if ( this[6345] <= 0 )
    return 0;
  v6 = (int)(this + 6089);
  while ( 1 )
  {
    v7 = *(signed __int16 **)(*(_DWORD *)v6 + 8);
    if ( abs(v7[20] - a2) <= (signed int)v7[22] && abs(v7[21] - a3) <= (signed int)v7[23] )
    {
      v8 = v7[30];
      if ( v8 == -1 || v8 == a4 )
      {
        v9 = *((_DWORD *)dword_563908 + 6898) ? *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060) : 0;
        if ( sub_494C40(v7 + 31, *((_DWORD *)dword_563908 + 78) + 60, v9) )
          break;
      }
    }
    ++v5;
    v6 += 4;
    if ( v5 >= v4[6345] )
      return 0;
  }
  return v7;
}

//----- (00439570) --------------------------------------------------------
int __thiscall sub_439570(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // ecx

  v2 = this[6859];
  result = 0;
  if ( v2 > 0 )
  {
    v4 = (int)(this + 6603);
    do
    {
      if ( *(signed __int16 *)(*(_DWORD *)v4 + 14) == a2 )
        ++result;
      v4 += 4;
      --v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004395B0) --------------------------------------------------------
void __thiscall sub_4395B0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  _DWORD *v4; // ebx
  _DWORD *v5; // ebx
  int v6; // ebp
  signed __int16 *v7; // ecx
  int v8; // esi
  int v9; // edi
  int v10; // eax
  int v11; // esi
  int v12; // eax
  int v13; // edx
  int v14; // eax
  int v15; // ecx
  int v16; // ebx
  int v17; // ST20_4
  int v18; // eax
  int v19; // eax
  bool v20; // sf
  unsigned __int8 v21; // of
  int v22; // [esp+4h] [ebp-24h]
  int v23; // [esp+8h] [ebp-20h]
  int v24; // [esp+Ch] [ebp-1Ch]
  int v25; // [esp+10h] [ebp-18h]
  _DWORD *v26; // [esp+14h] [ebp-14h]
  int v27; // [esp+18h] [ebp-10h]
  int v28; // [esp+1Ch] [ebp-Ch]
  int v29; // [esp+20h] [ebp-8h]
  int v30; // [esp+24h] [ebp-4h]
  _DWORD *v31; // [esp+30h] [ebp+8h]
  int v32; // [esp+34h] [ebp+Ch]

  v4 = this;
  v26 = this;
  if ( this[2500] > 0 )
  {
    (*(void (__thiscall **)(_DWORD *, int *))(*a2 + 72))(a2, &v27);
    v23 = a2[1] / 2;
    v22 = a3 + v23;
    v25 = a2[2] / 2;
    v24 = a4 + v25;
    v32 = 0;
    if ( v4[2500] > 0 )
    {
      v5 = v4 + 3;
      v31 = v5;
      do
      {
        v6 = *(v5 - 3);
        v7 = *(signed __int16 **)(v6 + 128);
        if ( v7 )
        {
          v8 = *v5;
          if ( *v5 > 0 )
          {
            v9 = v23 + 10 * (*(v5 - 2) - v22) / v8;
            v10 = v7[86] / 2;
            if ( v9 > v27 - v10 && v9 < v10 + v29 )
            {
              v11 = v25 + 10 * (*(v5 - 1) - v24) / v8;
              v12 = v7[87] / 2;
              if ( v11 > v28 - v12 )
              {
                v13 = v12 + v30;
                if ( v11 < v12 + v30 )
                {
                  v14 = v7[85];
                  v15 = *(unsigned __int16 *)(v6 + 124);
                  if ( (_WORD)v15 )
                    v14 = (signed __int16)v15;
                  v16 = *(_DWORD *)(v6 + 128);
                  v17 = v14;
                  v18 = sub_401D39(v15, v13);
                  v19 = sub_401B59(*((signed __int16 *)v31 + 2), v18, v17);
                  sub_4A50B0(v16, v19, (int)a2, v9, v11, *(_DWORD *)(v6 + 132), *(_DWORD *)(v6 + 120), 0, 0, 0);
                  v5 = v31;
                }
              }
            }
          }
        }
        v5 += 5;
        v21 = __OFSUB__(v32 + 1, v26[2500]);
        v20 = v32++ + 1 - v26[2500] < 0;
        v31 = v5;
      }
      while ( v20 ^ v21 );
    }
  }
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004397A0) --------------------------------------------------------
int __cdecl sub_4397A0(int a1, int a2)
{
  return *(_DWORD *)(a2 + 12) - *(_DWORD *)(a1 + 12);
}

//----- (004397D0) --------------------------------------------------------
void *__thiscall sub_4397D0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (00439800) --------------------------------------------------------
void *__thiscall sub_439800(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (00439830) --------------------------------------------------------
void __thiscall sub_439830(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  int v6; // ebp
  int v7; // ebx
  __int16 v8; // ax
  int v9; // edx
  __int16 v10; // cx
  __int16 v11; // ax
  int v12; // eax
  _DWORD *v13; // ecx
  int v14; // [esp+4h] [ebp-Ch]
  char v15; // [esp+8h] [ebp-8h]
  char v16; // [esp+Ch] [ebp-4h]

  v4 = this;
  if ( *(_WORD *)(this + 10) >= 0 )
  {
    v5 = *(_DWORD *)(*(_DWORD *)(this + 16) + 404);
    if ( v5 )
    {
      sub_40122B(&v14, &v16, &v15);
      if ( v14 )
      {
        v6 = *(signed __int16 *)(v4 + 10) - a3;
        if ( v6 >= -256 && v6 <= *(_DWORD *)(a2 + 4) + 256 )
        {
          v7 = *(signed __int16 *)(v4 + 12) - a4;
          if ( v7 >= -256 && v7 <= *(_DWORD *)(a2 + 8) + 256 )
          {
            v8 = *(_WORD *)(*(_DWORD *)(v4 + 16) + 100);
            v9 = 0;
            if ( v8 )
            {
              if ( v8 == 1 )
              {
                v10 = *(_WORD *)(v4 + 14);
                if ( v10 < 0 || (v11 = *(_WORD *)(v5 + 176), v11 <= 1) )
                  v9 = *(signed __int16 *)(v5 + 176) - 1;
                else
                  v9 = v10 % (v11 - 1);
              }
            }
            else if ( *(_WORD *)(v5 + 176) > 1
                   && *(_WORD *)(v4 + 14) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) )
            {
              v9 = 1;
            }
            v12 = sub_401B59(v9, *((_DWORD *)dword_563908 + 2705), *(signed __int16 *)(*(_DWORD *)(v4 + 16) + 288));
            v13 = *(_DWORD **)(v4 + 16);
            if ( *((_DWORD *)dword_563908 + 2693) == v13[1] )
            {
              sub_4A50B0(v5, v12, a2, v6, v7, v13[102] | 0x80000900, v13[71], 0, 0, 0);
              (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)v4 + 16))(
                v4,
                *(signed __int16 *)(v4 + 10),
                *(signed __int16 *)(v4 + 12));
            }
            else
            {
              sub_4A50B0(v5, v12, a2, v6, v7, v13[102] | 0x80000100, v13[71], 0, 0, 0);
            }
          }
        }
      }
    }
  }
}
// 40122B: using guessed type _DWORD __stdcall sub_40122B(_DWORD, _DWORD, _DWORD);
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);

//----- (00439A50) --------------------------------------------------------
int __thiscall sub_439A50(_DWORD *this, _DWORD *a2)
{
  int result; // eax

  this[2] = *a2;
  this[3] = a2[1];
  result = *((_DWORD *)dword_563908 + 6897);
  if ( *((_WORD *)this + 4) == *(_WORD *)(result + 96) )
  {
    result = this[4];
    this[5] = *(signed __int16 *)(result + 78);
  }
  return result;
}

//----- (00439A90) --------------------------------------------------------
void *__thiscall sub_439A90(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (00439AC0) --------------------------------------------------------
int __fastcall sub_439AC0(int a1, int a2, int a3)
{
  int v3; // ebx
  int result; // eax
  signed int v5; // edi
  int v6; // esi
  int v7; // ecx

  v3 = a1;
  if ( a3 == 1 || (result = *(_DWORD *)(a1 + 8), !*(_DWORD *)(result + 112)) )
  {
    result = sub_401D39(a1, a2);
    *(_DWORD *)(v3 + 12) = result;
  }
  if ( !*(_DWORD *)(*(_DWORD *)(v3 + 8) + 60) )
  {
    v5 = 64;
    do
    {
      result = *(unsigned __int16 *)(v5 + *(_DWORD *)(v3 + 8));
      if ( (_WORD)result )
      {
        v6 = (signed __int16)result;
        v7 = *((_DWORD *)dword_563908 + 1514);
        result = sub_401B68((signed __int16)result);
        if ( result || (result = sub_40164F(v6)) != 0 || (result = sub_402392(v6)) != 0 )
          result = (*(int (__thiscall **)(int, int))(*(_DWORD *)result + 12))(result, a3);
      }
      v5 += 2;
    }
    while ( v5 < 96 );
  }
  return result;
}
// 40164F: using guessed type _DWORD __stdcall sub_40164F(_DWORD);
// 401B68: using guessed type _DWORD __stdcall sub_401B68(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402392: using guessed type _DWORD __stdcall sub_402392(_DWORD);

//----- (00439B70) --------------------------------------------------------
void *__thiscall sub_439B70(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (00439BA0) --------------------------------------------------------
_DWORD *__thiscall sub_439BA0(_DWORD *this, signed __int16 *a2)
{
  _DWORD *v2; // esi
  signed __int16 *v3; // ecx
  int v4; // eax
  int v5; // edx
  int v6; // ecx
  int v7; // edi
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // ecx
  int v12; // edi
  int v13; // eax
  int v14; // ecx
  int v15; // edi
  int v16; // ecx
  int i; // edi
  char v18; // al
  int v19; // ebp
  char v20; // bl
  __int16 v21; // ax
  int v22; // ecx

  v2 = this;
  v3 = a2;
  v2[1] = a2;
  v2[2] = a2;
  *v2 = &off_5139F8;
  v2[73] = 0;
  v2[8] = 0;
  v2[7] = 0;
  v2[3] = v3[30] + v3[20] / 16;
  v2[4] = v3[31] + v3[21] / 16;
  v4 = v2[3];
  v2[5] = v4 + a2[32];
  v5 = v2[4];
  v2[6] = v5 + a2[33];
  v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
  v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
  if ( v6 >= v4 )
    v7 = v4;
  if ( v7 >= 0 )
  {
    if ( v6 < v4 )
      v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
  }
  else
  {
    v4 = 0;
  }
  v2[3] = v4;
  v8 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
  v9 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
  if ( v8 >= v5 )
    v9 = v5;
  if ( v9 >= 0 )
  {
    if ( v8 < v5 )
      v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
  }
  else
  {
    v5 = 0;
  }
  v2[4] = v5;
  v10 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
  v11 = v2[5];
  v12 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
  if ( v10 >= v11 )
    v12 = v2[5];
  if ( v12 >= 0 )
  {
    if ( v10 >= v11 )
      v10 = v2[5];
  }
  else
  {
    v10 = 0;
  }
  v2[5] = v10;
  v13 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
  v14 = v2[6];
  v15 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
  if ( v13 >= v14 )
    v15 = v2[6];
  if ( v15 >= 0 )
  {
    if ( v13 >= v14 )
      v13 = v2[6];
  }
  else
  {
    v13 = 0;
  }
  v16 = 0;
  for ( v2[6] = v13; v5 < v2[6]; ++v5 )
  {
    for ( i = v2[3]; i < v2[5]; *((_BYTE *)v2 + v16 + 35) = v20 )
    {
      v18 = *((_BYTE *)v2 + v16++ + 36) ^ *(_BYTE *)(3 * (i + v5 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4))
                                                   + *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5168)
                                                   + 2);
      *((_BYTE *)v2 + v16 + 35) ^= v18 & 0x1F;
      v19 = *((_DWORD *)dword_563908 + 1508);
      v20 = *(_BYTE *)(3 * (i + v5 * *(_DWORD *)(v19 + 4)) + *(_DWORD *)(v19 + 5168) + 2) ^ (*((_BYTE *)v2 + v16 + 35) ^ *(_BYTE *)(3 * (i + v5 * *(_DWORD *)(v19 + 4)) + *(_DWORD *)(v19 + 5168) + 2)) & 0x1F;
      ++i;
    }
  }
  v21 = *(_WORD *)(v2[2] + 70);
  if ( v21 )
  {
    v22 = *((_DWORD *)dword_563908 + 1514);
    v2[73] = sub_402392(v21);
  }
  v2[74] = 0;
  v2[75] = 0;
  return v2;
}
// 402392: using guessed type _DWORD __stdcall sub_402392(_DWORD);
// 5139F8: using guessed type int (__thiscall *off_5139F8)(void *Memory, char);

//----- (00439E00) --------------------------------------------------------
void *__thiscall sub_439E00(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (00439E30) --------------------------------------------------------
int __thiscall sub_439E30(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // eax
  int result; // eax
  int v8; // ebp
  int v9; // ecx
  int v10; // edx
  int v11; // edi
  int v12; // eax
  int v13; // ebx
  int v14; // eax
  int v15; // ecx
  int v16; // eax
  int v17; // esi
  int v18; // [esp+10h] [ebp+8h]

  v4 = this;
  v5 = this[73];
  if ( v5 )
  {
    v6 = *(_DWORD *)(v5 + 296);
    if ( this[74] != v6 )
      sub_402365(v6, 0);
    v4[75] = *(_DWORD *)(v4[73] + 300);
  }
  result = v4[2];
  v8 = *(signed __int16 *)(result + 40) - a3;
  if ( v8 >= -256 && v8 <= *(_DWORD *)(a2 + 4) + 256 )
  {
    v9 = *(signed __int16 *)(result + 42) - a4;
    v18 = *(signed __int16 *)(result + 42) - a4;
    if ( v9 >= -256 )
    {
      v10 = *(_DWORD *)(a2 + 8) + 256;
      if ( v9 <= v10 )
      {
        v11 = *(_DWORD *)(result + 248);
        if ( v11 )
        {
          v12 = sub_401D39(v9, v10);
          v13 = v4[2];
          v14 = v12 - v4[75];
          v15 = *(signed __int16 *)(v13 + 132);
          if ( !*(_WORD *)(v13 + 132) )
            v15 = *(signed __int16 *)(v11 + 170);
          if ( v4[74] )
          {
            if ( v14 >= v15 )
            {
              v16 = sub_401B59(2, v14, *(signed __int16 *)(v13 + 132));
              return sub_4A50B0(
                       v11,
                       v16,
                       a2,
                       v8,
                       v18,
                       *(_DWORD *)(v13 + 252) | 0x80000100,
                       *(_DWORD *)(v13 + 128),
                       0,
                       0,
                       0);
            }
          }
          else
          {
            if ( v14 >= v15 )
            {
              v16 = sub_401B59(0, v14, *(signed __int16 *)(v13 + 132));
              return sub_4A50B0(
                       v11,
                       v16,
                       a2,
                       v8,
                       v18,
                       *(_DWORD *)(v13 + 252) | 0x80000100,
                       *(_DWORD *)(v13 + 128),
                       0,
                       0,
                       0);
            }
            v17 = v15 - v14;
            v14 = v15 - 1;
            if ( v17 < v15 - 1 )
              v14 = v17;
          }
          v16 = sub_401B59(1, v14, *(signed __int16 *)(v13 + 132));
          return sub_4A50B0(v11, v16, a2, v8, v18, *(_DWORD *)(v13 + 252) | 0x80000100, *(_DWORD *)(v13 + 128), 0, 0, 0);
        }
      }
    }
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402365: using guessed type _DWORD __stdcall sub_402365(_DWORD, _DWORD);

//----- (00439FA0) --------------------------------------------------------
int __fastcall sub_439FA0(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // ecx

  v3 = a1;
  v4 = *(_DWORD *)((char *)dword_563908 + 59450);
  *(_DWORD *)(v3 + 28) = v4;
  *(_DWORD *)(v3 + 32) = sub_401D39(v4, a2);
  return sub_402365(a3, 0);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402365: using guessed type _DWORD __stdcall sub_402365(_DWORD, _DWORD);

//----- (00439FE0) --------------------------------------------------------
int __fastcall sub_439FE0(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // esi
  int v5; // eax
  int v6; // edi
  __int64 v7; // rax

  v3 = a1;
  if ( *(_WORD *)(a1[2] + 70) || a1[8] && abs(sub_401D39(a1, a2) - a1[8]) < a1[7] )
    return a3;
  v5 = (9301 * a3 + 49297) % 233280;
  v6 = (9301 * v5 + 49297) % 233280;
  v7 = v5 ^ (v6 << 12);
  sub_402365((signed int)((HIDWORD(v7) ^ v7) - HIDWORD(v7)) % 1000 < *(signed __int16 *)(v3[2] + 68), 0);
  return v6;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402365: using guessed type _DWORD __stdcall sub_402365(_DWORD, _DWORD);

//----- (0043A0A0) --------------------------------------------------------
void *__thiscall sub_43A0A0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &ActiveLio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51396C: using guessed type void *ActiveLio::`vftable';

//----- (0043A0D0) --------------------------------------------------------
int __thiscall sub_43A0D0(_DWORD *this, int a2)
{
  int result; // eax
  _DWORD *v3; // esi
  int v4; // edi
  int v5; // edi
  bool v6; // zf
  bool v7; // sf
  int *v8; // ebx
  int v9; // ecx
  int v10; // ebp
  int v11; // edi
  int *v12; // ebx
  int v13; // ecx
  int v14; // edi
  __int16 v15; // cx
  __int16 v16; // bx
  __int64 v17; // rax
  int v18; // edx
  int v19; // ebx
  int v20; // edi
  int v21; // ecx
  int v22; // [esp+10h] [ebp-8h]
  int v23; // [esp+14h] [ebp-4h]

  result = (int)dword_563908;
  v3 = this;
  if ( *(_DWORD *)((char *)dword_563908 + 59446) > 0 )
  {
    v4 = *(_DWORD *)((char *)dword_563908 + 59446);
    result = v4 * ((*(int (**)(void))(*(_DWORD *)dword_56391C + 152))() / 10 / v4);
    if ( result != v3[7888] )
    {
      v5 = 0;
      v6 = v3[3525] == 0;
      v7 = v3[3525] < 0;
      v3[7888] = result;
      if ( !v7 && !v6 )
      {
        v8 = v3 + 2501;
        do
        {
          v9 = *v8;
          result = sub_40211C(result);
          ++v5;
          ++v8;
        }
        while ( v5 < v3[3525] );
      }
    }
  }
  v10 = a2;
  v3[7887] -= a2;
  if ( v3[7887] <= 0 )
  {
    result = *(_DWORD *)((char *)dword_563908 + 57498);
    v3[7887] = result;
    if ( !*((_DWORD *)dword_563918 + 2267) )
      v3[7887] = 4 * result;
    v11 = 0;
    if ( v3[7372] > 0 )
    {
      v12 = v3 + 6860;
      do
      {
        v13 = *v12;
        result = sub_4015B4(a2);
        ++v11;
        ++v12;
      }
      while ( v11 < v3[7372] );
    }
    v23 = 0;
    if ( v3[6088] > 0 )
    {
      v22 = (int)(v3 + 5576);
      do
      {
        v14 = *(_DWORD *)(*(_DWORD *)v22 + 8);
        v15 = *(_WORD *)(v14 + 44);
        if ( v15 )
        {
          v16 = *(_WORD *)(v14 + 46);
          if ( v16 )
          {
            if ( abs(*((_DWORD *)dword_563908 + 62) - *(signed __int16 *)(v14 + 40)) >= (signed int)v15
              || (v17 = *((_DWORD *)dword_563908 + 63) - (signed int)*(signed __int16 *)(v14 + 42),
                  abs((_DWORD)v17) >= (signed int)v16) )
            {
              *(_DWORD *)(v14 + 332) = 0;
            }
            else if ( !*(_DWORD *)(v14 + 332)
                   && abs(sub_401D39(v16, HIDWORD(v17)) - *(_DWORD *)(*(_DWORD *)v22 + 12)) >= *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v22 + 8) + 96)
                   && sub_40226B(v14) )
            {
              v18 = *(_DWORD *)(v14 + 4);
              *(_DWORD *)(v14 + 332) = 1;
              (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 68))(v18, 1);
            }
          }
        }
        v22 += 4;
        result = v23++ + 1;
      }
      while ( v23 < v3[6088] );
      v10 = a2;
    }
  }
  v19 = 0;
  v6 = v3[6859] == 0;
  v7 = v3[6859] < 0;
  v3[7886] = 0;
  v3[7889] = 0;
  v3[7890] = 0;
  if ( !v7 && !v6 )
  {
    v20 = (int)(v3 + 6603);
    do
    {
      v21 = *(_DWORD *)v20;
      sub_401497(v10);
      if ( *(_WORD *)(*(_DWORD *)v20 + 14) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) )
        ++v3[7889];
      result = *(_DWORD *)v20;
      if ( *(_WORD *)(*(_DWORD *)v20 + 10) >= 0 || *(_WORD *)(result + 8) >= 0 )
        ++v3[7890];
      ++v19;
      v20 += 4;
    }
    while ( v19 < v3[6859] );
  }
  return result;
}
// 401497: using guessed type _DWORD __stdcall sub_401497(_DWORD);
// 4015B4: using guessed type _DWORD __stdcall sub_4015B4(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40211C: using guessed type _DWORD __stdcall sub_40211C(_DWORD);
// 40226B: using guessed type _DWORD __stdcall sub_40226B(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0043A3C0) --------------------------------------------------------
void __thiscall sub_43A3C0(void *Src)
{
  _DWORD *v1; // eax
  _DWORD *v2; // esi
  int v3; // edi
  int v4; // ebp
  int v5; // ebx
  signed int v6; // eax
  int v7; // ebp
  int v8; // ST28_4
  __int16 v9; // ax
  __int16 v10; // ax
  int v11; // eax
  int v12; // ecx
  int v13; // ebp
  int v14; // eax
  int v15; // eax
  int v16; // edi
  int v17; // eax
  int v18; // ecx
  int v19; // eax
  int v20; // eax
  signed int v21; // [esp+Ch] [ebp-14h]
  signed int v22; // [esp+10h] [ebp-10h]
  int v23; // [esp+14h] [ebp-Ch]
  int v24; // [esp+18h] [ebp-8h]
  signed int v25; // [esp+18h] [ebp-8h]
  signed int v26; // [esp+1Ch] [ebp-4h]

  v1 = (char *)dword_563908 + 6124;
  v2 = Src;
  v3 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000);
  v4 = 0;
  v23 = 0;
  if ( v3 > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(*v1 + 4 * v4) + 4))() == 9 )
      {
        v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v4);
        if ( !*(_DWORD *)(v5 + 128) )
          goto LABEL_25;
        v26 = 0;
        if ( *(_WORD *)(v5 + 60) <= 0 )
          goto LABEL_25;
        do
        {
          v6 = v2[2500];
          if ( v6 >= 500 )
            break;
          v2[5 * v6] = v5;
          v7 = *(signed __int16 *)(v5 + 62);
          if ( *(signed __int16 *)(v5 + 64) == v7 )
          {
            v2[5 * v2[2500] + 3] = v7;
          }
          else
          {
            v8 = (9301 * v3 + 49297) % 233280;
            v3 = (9301 * v8 + 49297) % 233280;
            v2[5 * v2[2500] + 3] = v7 + abs(v8 ^ (v3 << 12)) % (*(signed __int16 *)(v5 + 64) - v7);
          }
          v9 = *(_WORD *)(v5 + 40);
          if ( v9 >= -2000 )
            v21 = v9;
          else
            v21 = -2000;
          v10 = *(_WORD *)(v5 + 42);
          if ( v10 >= -2000 )
            v22 = v10;
          else
            v22 = -2000;
          v11 = *((_DWORD *)dword_563908 + 1508);
          v12 = *(signed __int16 *)(v5 + 44);
          v13 = *(signed __int16 *)(v5 + 46);
          v24 = v11;
          v14 = 16 * (*(_DWORD *)(v11 + 4) + 125);
          if ( v12 + v21 > v14 )
            v12 = v14 - v21;
          v15 = 16 * (*(_DWORD *)(v24 + 8) + 125);
          if ( v13 + v22 > v15 )
            v13 = v15 - v22;
          v25 = 1;
          if ( v12 >= 1 )
            v25 = v12;
          v16 = (9301 * v3 + 49297) % 233280;
          v2[5 * v2[2500] + 1] = v21 + abs(v16 ^ (v16 << 12)) % v25;
          if ( v13 < 1 )
            v13 = 1;
          v17 = (9301 * ((9301 * v16 + 49297) % 233280) + 49297) % 233280;
          v18 = (9301 * v17 + 49297) % 233280;
          v2[5 * v2[2500] + 2] = v22 + abs(v17 ^ (v18 << 12)) % v13;
          v19 = (9301 * v18 + 49297) % 233280;
          v3 = (9301 * v19 + 49297) % 233280;
          LOWORD(v2[5 * v2[2500]++ + 4]) = abs(v19 ^ (v3 << 12))
                                         % (signed int)*(signed __int16 *)(*(_DWORD *)(v5 + 128) + 176);
          ++v26;
        }
        while ( v26 < *(signed __int16 *)(v5 + 60) );
      }
      v4 = v23;
LABEL_25:
      v1 = (char *)dword_563908 + 6124;
      v23 = ++v4;
    }
    while ( v4 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
  }
  v20 = v2[2500];
  if ( v20 > 0 )
    sub_48DD20(v2, v20, 0x14u, (int)sub_4013ED);
}
// 4013ED: using guessed type int __cdecl sub_4013ED(int, int);

//----- (0043A760) --------------------------------------------------------
_DWORD *__thiscall sub_43A760(void *Src)
{
  int v1; // ebx
  _DWORD *v2; // esi
  _DWORD *v3; // eax
  bool v4; // zf
  int v5; // edi
  int v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // edi
  _DWORD *v10; // eax
  int v11; // edi
  _DWORD *v12; // eax
  signed __int16 *v13; // edi
  _DWORD *v14; // eax
  _DWORD *v15; // ecx
  int v16; // eax
  int v17; // edi
  _DWORD *v18; // eax
  int v19; // ecx
  int v20; // ecx
  _DWORD *v21; // eax
  int v22; // edi
  int v23; // edi
  int v24; // ebx
  int v25; // edi
  int v26; // ebx
  int v27; // edi
  int v28; // ebx

  v1 = 0;
  v2 = Src;
  *((_DWORD *)dword_563908 + 1514) = Src;
  *((_DWORD *)Src + 7888) = 0;
  *((_DWORD *)Src + 3525) = 0;
  *((_DWORD *)Src + 5575) = 0;
  *((_DWORD *)Src + 6859) = 0;
  *((_DWORD *)Src + 4550) = 0;
  *((_DWORD *)Src + 6088) = 0;
  *((_DWORD *)Src + 6345) = 0;
  *((_DWORD *)Src + 6602) = 0;
  *((_DWORD *)Src + 7372) = 0;
  *((_DWORD *)Src + 7885) = 0;
  *((_DWORD *)Src + 2500) = 0;
  *((_DWORD *)Src + 7887) = 0;
  v3 = dword_563908;
  if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) > 0 )
  {
    do
    {
      v4 = (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v1) + 4))() == 1;
      v3 = dword_563908;
      if ( v4 )
      {
        v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v1);
        if ( !*(_WORD *)(v5 + 70) )
        {
          if ( operator new(0x130u) )
            v6 = sub_401C3A(v5);
          else
            v6 = 0;
          if ( *(_WORD *)(v5 + 68) )
            v2[v2[3525]++ + 2501] = v6;
          else
            v2[v2[5575]++ + 4551] = v6;
          v3 = dword_563908;
        }
      }
      ++v1;
    }
    while ( v1 < *(_DWORD *)(v3[1531] + 8000) );
    v1 = 0;
  }
  if ( *(_DWORD *)(v3[1531] + 8000) > 0 )
  {
    do
    {
      v4 = (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v1) + 4))() == 1;
      v3 = dword_563908;
      if ( v4 )
      {
        v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v1);
        if ( *(_WORD *)(v7 + 70) )
        {
          if ( operator new(0x130u) )
            v8 = sub_401C3A(v7);
          else
            v8 = 0;
          v2[v2[4550]++ + 3526] = v8;
          v3 = dword_563908;
        }
      }
      ++v1;
    }
    while ( v1 < *(_DWORD *)(v3[1531] + 8000) );
    v1 = 0;
  }
  if ( *(_DWORD *)(v3[1531] + 8000) > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v1) + 4))() == 2 )
      {
        v9 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v1);
        v10 = operator new(0x10u);
        if ( v10 )
        {
          v10[1] = v9;
          *v10 = &Switch::`vftable';
          v10[2] = v9;
          v10[3] = 0;
        }
        else
        {
          v10 = 0;
        }
        v2[v2[6088]++ + 5576] = v10;
      }
      v3 = dword_563908;
      ++v1;
    }
    while ( v1 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
    v1 = 0;
  }
  if ( *(_DWORD *)(v3[1531] + 8000) > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v1) + 4))() == 3 )
      {
        v11 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v1);
        v12 = operator new(0x1Cu);
        if ( v12 )
        {
          v12[1] = v11;
          *v12 = &off_513988;
          v12[4] = v11;
          *((_WORD *)v12 + 7) = -1;
          *((_WORD *)v12 + 5) = -1;
          *((_WORD *)v12 + 6) = -1;
          *((_WORD *)v12 + 4) = -1;
          v12[5] = 0;
          v12[6] = 0;
        }
        else
        {
          v12 = 0;
        }
        v2[v2[6859]++ + 6603] = v12;
      }
      v3 = dword_563908;
      ++v1;
    }
    while ( v1 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
    v1 = 0;
  }
  if ( *(_DWORD *)(v3[1531] + 8000) > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v1) + 4))() == 6 )
      {
        v13 = *(signed __int16 **)(*((_DWORD *)dword_563908 + 1531) + 4 * v1);
        v14 = operator new(0x20u);
        v15 = v14;
        if ( v14 )
        {
          v14[1] = v13;
          *v14 = &off_5139C0;
          v14[2] = v13;
          v16 = 10000 * v13[98];
          v15[5] = v16;
          v15[3] = abs(v16);
          v15[4] = v13[98] * v13[98];
          v15[6] = 10000 * v13[20];
          v15[7] = 10000 * v13[21];
        }
        else
        {
          v15 = 0;
        }
        v2[v2[6345]++ + 6089] = v15;
        if ( v13[98] )
          v2[v2[6602]++ + 6346] = v2[v2[6345] + 6088];
      }
      v3 = dword_563908;
      ++v1;
    }
    while ( v1 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
  }
  v17 = 0;
  if ( *(_DWORD *)(v3[1531] + 8000) > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v3[1531] + 4 * v17) + 4))() == 7 )
      {
        v18 = operator new(0x1Cu);
        if ( v18 )
        {
          v19 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v17);
          v18[1] = v19;
          *v18 = &ActiveSound::`vftable';
          v18[2] = v19;
          v18[3] = 0;
          v18[4] = 0;
          v18[5] = -1;
          v18[6] = 0;
        }
        else
        {
          v18 = 0;
        }
        v2[v2[7372]++ + 6860] = v18;
      }
      v3 = dword_563908;
      ++v17;
    }
    while ( v17 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
  }
  v20 = v3[1531];
  v21 = v3 + 1531;
  v22 = 0;
  if ( *(_DWORD *)(v20 + 8000) > 0 )
  {
    do
    {
      if ( (*(int (**)(void))(**(_DWORD **)(*v21 + 4 * v22) + 4))() == 8 )
        v2[v2[7885]++ + 7373] = *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 4 * v22);
      v21 = (char *)dword_563908 + 6124;
      ++v22;
    }
    while ( v22 < *(_DWORD *)(*((_DWORD *)dword_563908 + 1531) + 8000) );
  }
  sub_40190B(v2);
  v23 = 0;
  if ( v2[4550] > 0 )
  {
    v24 = (int)(v2 + 3526);
    do
    {
      sub_402365(*(signed __int16 *)(*(_DWORD *)(*(_DWORD *)v24 + 8) + 72), 1);
      ++v23;
      v24 += 4;
    }
    while ( v23 < v2[4550] );
  }
  v25 = 0;
  if ( v2[3525] > 0 )
  {
    v26 = (int)(v2 + 2501);
    do
    {
      sub_402365(*(signed __int16 *)(*(_DWORD *)(*(_DWORD *)v26 + 8) + 72), 1);
      ++v25;
      v26 += 4;
    }
    while ( v25 < v2[3525] );
  }
  v27 = 0;
  if ( v2[5575] > 0 )
  {
    v28 = (int)(v2 + 4551);
    do
    {
      sub_402365(*(signed __int16 *)(*(_DWORD *)(*(_DWORD *)v28 + 8) + 72), 1);
      ++v27;
      v28 += 4;
    }
    while ( v27 < v2[5575] );
  }
  return v2;
}
// 401C3A: using guessed type _DWORD __stdcall sub_401C3A(_DWORD);
// 402365: using guessed type _DWORD __stdcall sub_402365(_DWORD, _DWORD);
// 513988: using guessed type int (__thiscall *off_513988)(void *Memory, char);
// 5139A4: using guessed type void *Switch::`vftable';
// 5139C0: using guessed type int (__thiscall *off_5139C0)(void *Memory, char);
// 5139DC: using guessed type void *ActiveSound::`vftable';

//----- (0043AE00) --------------------------------------------------------
int __thiscall sub_43AE00(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  void (__stdcall ***v3)(signed int); // ecx
  void (__stdcall ***v4)(signed int); // ecx
  void (__stdcall ***v5)(signed int); // ecx
  void (__stdcall ***v6)(signed int); // ecx
  void (__stdcall ***v7)(signed int); // ecx
  void (__stdcall ***v8)(signed int); // ecx
  void (__stdcall ***v9)(signed int); // ecx
  void (__stdcall ***v10)(signed int); // ecx

  v1 = this;
  *this = &LoginWindow::`vftable';
  v2 = (void (__stdcall ***)(signed int))this[11];
  if ( v2 )
  {
    (**v2)(1);
    v1[11] = 0;
  }
  v3 = (void (__stdcall ***)(signed int))v1[2];
  if ( v3 )
  {
    (**v3)(1);
    v1[2] = 0;
  }
  v4 = (void (__stdcall ***)(signed int))v1[3];
  if ( v4 )
  {
    (**v4)(1);
    v1[3] = 0;
  }
  v5 = (void (__stdcall ***)(signed int))v1[4];
  if ( v5 )
  {
    (**v5)(1);
    v1[4] = 0;
  }
  v6 = (void (__stdcall ***)(signed int))v1[5];
  if ( v6 )
  {
    (**v6)(1);
    v1[5] = 0;
  }
  v7 = (void (__stdcall ***)(signed int))v1[6];
  if ( v7 )
  {
    (**v7)(1);
    v1[6] = 0;
  }
  v8 = (void (__stdcall ***)(signed int))v1[7];
  if ( v8 )
  {
    (**v8)(1);
    v1[7] = 0;
  }
  v9 = (void (__stdcall ***)(signed int))v1[8];
  if ( v9 )
  {
    (**v9)(1);
    v1[8] = 0;
  }
  v10 = (void (__stdcall ***)(signed int))v1[1];
  if ( v10 )
  {
    (**v10)(1);
    v1[1] = 0;
  }
  sub_4A3950();
  return sub_4027ED(v1);
}
// 4027ED: using guessed type int __thiscall sub_4027ED(_DWORD);
// 513A14: using guessed type void *LoginWindow::`vftable';

//----- (0043AF40) --------------------------------------------------------
int __thiscall sub_43AF40(_DWORD **this)
{
  _DWORD *v1; // esi
  int v2; // edi
  int v3; // ecx
  int v4; // eax
  void (__stdcall ***v5)(signed int); // ecx
  int v6; // eax
  int v7; // ecx
  int v8; // edx
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // ST14_4
  void (__stdcall *v14)(_DWORD *); // eax
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // ST14_4
  void (__stdcall *v18)(_DWORD *); // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // ST14_4
  void (__stdcall *v22)(_DWORD *); // eax
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // ST14_4
  void (__stdcall *v26)(_DWORD *); // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // ST14_4
  void (__stdcall *v30)(_DWORD *); // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // ST14_4
  void (__stdcall *v34)(_DWORD *); // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // ST14_4
  void (__stdcall *v38)(_DWORD *); // eax
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  _DWORD *v41; // ST14_4
  void (__stdcall *v42)(_DWORD *); // eax
  _DWORD *v43; // eax
  _DWORD *v44; // eax
  _DWORD *v45; // ST14_4
  int (__stdcall *v46)(_DWORD *); // eax
  int v48; // [esp+28h] [ebp-1Ch]
  int v49; // [esp+2Ch] [ebp-18h]
  int v50; // [esp+30h] [ebp-14h]
  int v51; // [esp+34h] [ebp-10h]
  int v52; // [esp+40h] [ebp-4h]

  v1 = this;
  (*(void (**)(void))(*this[1] + 112))();
  v2 = v1[1];
  v3 = v1[5];
  v1[9] = (*(_DWORD *)(v2 + 4) - *(_DWORD *)(v3 + 4)) / 2;
  v4 = *(_DWORD *)(v2 + 8) - *(_DWORD *)(v3 + 8);
  v5 = (void (__stdcall ***)(signed int))v1[11];
  v1[10] = v4 / 2;
  if ( v5 )
  {
    (**v5)(1);
    v1[11] = 0;
  }
  v6 = v1[9];
  v7 = v1[10];
  v8 = v1[5];
  v48 = v6;
  v49 = v7;
  v50 = v6 + *(_DWORD *)(v8 + 4);
  v51 = v7 + *(_DWORD *)(v8 + 8);
  v9 = operator new(0x420u);
  v52 = 0;
  if ( v9 )
    v10 = sub_49A5F0(v9, 1, &v48, 0);
  else
    v10 = 0;
  v52 = -1;
  v1[11] = v10;
  v11 = operator new(0x18u);
  v52 = 1;
  if ( v11 )
    v12 = sub_49A490(v11, 70, 439, 148, 29, 1);
  else
    v12 = 0;
  v13 = v12;
  v14 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v14(v13);
  v15 = operator new(0x18u);
  v52 = 2;
  if ( v15 )
    v16 = sub_49A490(v15, 271, 16, 324, 29, 2);
  else
    v16 = 0;
  v17 = v16;
  v18 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v18(v17);
  v19 = operator new(0x18u);
  v52 = 3;
  if ( v19 )
    v20 = sub_49A490(v19, 278, 429, 324, 29, 3);
  else
    v20 = 0;
  v21 = v20;
  v22 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v22(v21);
  v23 = operator new(0x18u);
  v52 = 4;
  if ( v23 )
    v24 = sub_49A490(v23, 27, 90, 192, 64, 4);
  else
    v24 = 0;
  v25 = v24;
  v26 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v26(v25);
  v27 = operator new(0x18u);
  v52 = 5;
  if ( v27 )
    v28 = sub_49A490(v27, 240, 51, 77, 19, 5);
  else
    v28 = 0;
  v29 = v28;
  v30 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v30(v29);
  v31 = operator new(0x18u);
  v52 = 6;
  if ( v31 )
    v32 = sub_49A490(v31, 317, 51, 210, 19, 6);
  else
    v32 = 0;
  v33 = v32;
  v34 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v34(v33);
  v35 = operator new(0x18u);
  v52 = 7;
  if ( v35 )
    v36 = sub_49A490(v35, 527, 51, 96, 19, 7);
  else
    v36 = 0;
  v37 = v36;
  v38 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v38(v37);
  v39 = operator new(0x18u);
  v52 = 8;
  if ( v39 )
    v40 = sub_49A490(v39, 241, 72, 76, 336, 9);
  else
    v40 = 0;
  v41 = v40;
  v42 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  v42(v41);
  v43 = operator new(0x18u);
  v52 = 9;
  if ( v43 )
    v44 = sub_49A490(v43, 317, 72, 305, 336, 8);
  else
    v44 = 0;
  v45 = v44;
  v46 = *(int (__stdcall **)(_DWORD *))(*(_DWORD *)v1[11] + 16);
  v52 = -1;
  return v46(v45);
}

//----- (0043B350) --------------------------------------------------------
int sub_43B350()
{
  int result; // eax

  result = sub_402806(*((_DWORD *)dword_563918 + 2132));
  if ( result )
    result = InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
  return result;
}
// 402806: using guessed type int __thiscall sub_402806(_DWORD);

//----- (0043B390) --------------------------------------------------------
int __thiscall sub_43B390(_DWORD **this)
{
  return (*(int (**)(void))(*this[1] + 132))();
}

//----- (0043B3A0) --------------------------------------------------------
int __thiscall sub_43B3A0(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  int result; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 48);
  (*(void (__stdcall **)(int *, int *))(**(_DWORD **)(this + 4) + 116))(&a2, &a3);
  result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**(_DWORD **)(v4 + 44) + 4))(a2, a3, 0, 0);
  *(_DWORD *)(v4 + 48) = result;
  if ( (unsigned int)(result - 1) <= 2 && result != v5 )
    result = PlaySoundA((LPCSTR)0x75, *((HMODULE *)dword_563918 + 4), 0x40005u);
  if ( *(_DWORD *)(v4 + 48) != v5 )
    result = InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
  return result;
}

//----- (0043B440) --------------------------------------------------------
int __thiscall sub_43B440(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // edi
  _DWORD *v6; // esi
  int result; // eax

  v5 = a5;
  v6 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int, int))(*this + 20))(this, a2, a3, a4, a5);
  if ( !v5 )
  {
    result = v6[12];
    if ( result == 8 || result == 9 )
    {
      (*(void (__stdcall **)(int *, int *))(*(_DWORD *)v6[1] + 116))(&a2, &a3);
      (*(void (__stdcall **)(int, int, int *, int *))(*(_DWORD *)v6[11] + 4))(a2, a3, &a4, &a5);
      result = a5 / *(signed __int16 *)(*(_DWORD *)(v6[8] + 2052) + 174);
      if ( result < *(_DWORD *)(*((_DWORD *)dword_563918 + 2132) + 8000) )
        result = (*(int (__thiscall **)(_DWORD *))(*v6 + 44))(v6);
    }
  }
  return result;
}

//----- (0043B510) --------------------------------------------------------
void __thiscall sub_43B510(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int v6; // eax
  bool v7; // zf
  int v8; // ecx
  int v9; // edx
  bool v10; // sf
  unsigned __int8 v11; // of
  _DWORD *v12; // ecx
  _DWORD *v13; // edx
  signed int v14; // edi
  _DWORD *v15; // eax
  HCURSOR v16; // eax
  HCURSOR v17; // eax
  char v18; // [esp+14h] [ebp-4h]

  v5 = this;
  ((void (__thiscall *)(_DWORD **, int, int, int))(*this)[4])(this, a2, a3, a4);
  (*(void (__stdcall **)(int *, int *))(*v5[1] + 116))(&a2, &a3);
  v6 = (*(int (__stdcall **)(int, int, char *, int *))(*v5[11] + 4))(a2, a3, &v18, &a4);
  v7 = a5 == 0;
  v5[12] = (_DWORD *)v6;
  if ( v7 )
  {
    switch ( v6 )
    {
      case 1:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40004u);
        PostQuitMessage(0);
        return;
      case 2:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
        v16 = LoadCursorA(0, (LPCSTR)0x7F02);
        SetCursor(v16);
        if ( !sub_401645(*((_DWORD *)dword_563918 + 2132)) )
          MessageBoxA(
            *((HWND *)dword_563918 + 3),
            "Could not find the directory server, see website for more information.",
            "Could not connect",
            0);
        v17 = LoadCursorA(0, (LPCSTR)0x7F00);
        SetCursor(v17);
        return;
      case 3:
        ((void (__thiscall *)(_DWORD **))(*v5)[11])(v5);
        return;
      case 4:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
        v5[13] = 0;
        goto LABEL_20;
      case 5:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
        sub_4024C8(*((_DWORD *)dword_563918 + 2132));
        InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
        return;
      case 6:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
        sub_4012B7(*((_DWORD *)dword_563918 + 2132));
        InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
        return;
      case 7:
        PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
        sub_401F2D(*((_DWORD *)dword_563918 + 2132));
LABEL_20:
        InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
        return;
      case 8:
      case 9:
        v8 = a4 / *(signed __int16 *)(v5[8][513] + 174);
        v9 = *((_DWORD *)dword_563918 + 2132);
        v11 = __OFSUB__(v8, *(_DWORD *)(v9 + 8000));
        v10 = v8 - *(_DWORD *)(v9 + 8000) < 0;
        a5 = a4 / *(signed __int16 *)(v5[8][513] + 174);
        if ( !(v10 ^ v11) )
          return;
        PlaySoundA((LPCSTR)0x75, *((HMODULE *)dword_563918 + 4), 0x40005u);
        v12 = (_DWORD *)*((_DWORD *)dword_563918 + 2132);
        v13 = (_DWORD *)v12[2000];
        v14 = -1;
        v15 = 0;
        if ( (signed int)v13 <= 0 )
          goto LABEL_10;
        break;
      default:
        return;
    }
    while ( *(_DWORD *)(*v12 + 84) > *((_DWORD *)dword_563918 + 2332) || ++v14 != a5 )
    {
      v15 = (_DWORD *)((char *)v15 + 1);
      ++v12;
      if ( (signed int)v15 >= (signed int)v13 )
        goto LABEL_10;
    }
    v5[14] = v15;
LABEL_10:
    InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
  }
}
// 4012B7: using guessed type int __thiscall sub_4012B7(_DWORD);
// 401645: using guessed type int __thiscall sub_401645(_DWORD);
// 401F2D: using guessed type int __thiscall sub_401F2D(_DWORD);
// 4024C8: using guessed type int __thiscall sub_4024C8(_DWORD);

//----- (0043B890) --------------------------------------------------------
char __thiscall sub_43B890(_DWORD *this, _BYTE *a2)
{
  _BYTE *v2; // edx
  int v3; // eax
  int v4; // ecx
  _BYTE *v5; // ecx

  v2 = a2;
  *a2 = 0;
  v3 = this[14];
  if ( v3 >= 0 )
  {
    v4 = *((_DWORD *)dword_563918 + 2132);
    if ( v3 < *(_DWORD *)(v4 + 8000) )
    {
      v5 = *(_BYTE **)(v4 + 4 * v3);
      do
      {
        LOBYTE(v3) = *v5;
        *v2++ = *v5++;
      }
      while ( (_BYTE)v3 );
    }
  }
  return v3;
}

//----- (0043B8E0) --------------------------------------------------------
int __thiscall sub_43B8E0(_DWORD *this)
{
  int v1; // eax
  int v2; // ecx
  int v3; // esi
  char *v4; // ecx
  char *v5; // edx
  char v6; // al
  char *v7; // eax
  int v8; // eax
  char *v9; // edx
  char *v10; // esi
  char v11; // cl
  char *v12; // ecx
  char *v13; // edx
  char v14; // al

  v1 = this[14];
  if ( v1 < 0 || (v2 = *((_DWORD *)dword_563918 + 2132), v1 >= *(_DWORD *)(v2 + 8000)) )
  {
    *((_BYTE *)dword_563918 + 9864) = 0;
    *((_BYTE *)dword_563918 + 9736) = 0;
  }
  else
  {
    v3 = *(_DWORD *)(v2 + 4 * v1);
    v4 = (char *)(v3 + 88);
    v5 = (char *)dword_563918 + 9864;
    do
    {
      v6 = *v4;
      *v5++ = *v4++;
    }
    while ( v6 );
    sprintf((char *)dword_563918 + 9736, "%s,%d", v3, *(_DWORD *)(v3 + 64));
  }
  v7 = strchr((const char *)dword_563918 + 9608, 58);
  if ( v7 )
  {
    *v7 = 0;
    v8 = (int)(v7 + 1);
    v9 = (char *)v8;
    v10 = (char *)dword_563918 + 9736;
    do
    {
      v11 = *v9;
      *v10++ = *v9++;
    }
    while ( v11 );
    v12 = (char *)v8;
    v13 = (char *)dword_563918 + 9864;
    do
    {
      v14 = *v12;
      *v13++ = *v12++;
    }
    while ( v14 );
  }
  PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
  return sub_402388(dword_563918);
}
// 402388: using guessed type int __thiscall sub_402388(_DWORD);

//----- (0043BA00) --------------------------------------------------------
int __thiscall sub_43BA00(_DWORD **this)
{
  _DWORD **v1; // esi
  _DWORD *v2; // edx
  int v3; // eax
  int v4; // ecx
  int v5; // edi
  bool v6; // zf
  bool v7; // sf
  int v8; // ebp
  int v9; // eax
  unsigned __int8 v10; // of
  int v11; // ebx
  int v12; // eax
  _DWORD *v13; // ecx
  int v14; // edx
  _DWORD *v15; // ecx
  int v16; // eax
  int v17; // eax
  int v18; // edx
  int v19; // eax
  char *v20; // eax
  int v21; // edx
  char v22; // cl
  char *v23; // edi
  char v24; // al
  int v25; // eax
  signed int v26; // eax
  int v27; // ecx
  int v28; // eax
  void *v29; // ecx
  int v30; // eax
  _DWORD *v31; // ecx
  int v32; // edx
  int v33; // ebp
  char *v34; // edi
  signed int v35; // ebx
  int v37; // [esp+44h] [ebp-948h]
  int v38; // [esp+48h] [ebp-944h]
  int v39; // [esp+4Ch] [ebp-940h]
  int v40; // [esp+50h] [ebp-93Ch]
  int v41; // [esp+54h] [ebp-938h]
  int v42; // [esp+58h] [ebp-934h]
  int v43; // [esp+5Ch] [ebp-930h]
  _DWORD *v44; // [esp+60h] [ebp-92Ch]
  int v45; // [esp+64h] [ebp-928h]
  char Dest; // [esp+68h] [ebp-924h]
  char v47; // [esp+87h] [ebp-905h]
  char v48; // [esp+88h] [ebp-904h]
  char Dst; // [esp+188h] [ebp-804h]

  v1 = this;
  (*(void (__stdcall **)(_DWORD, _DWORD))(*this[1] + 40))(0, 0);
  (*(void (__stdcall **)(_DWORD, _DWORD *, _DWORD *, _DWORD *, _DWORD, _DWORD))(*v1[5] + 4))(
    0,
    v1[1],
    v1[9],
    v1[10],
    0,
    0);
  if ( v1[12] == (_DWORD *)1 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD *, _DWORD *, _DWORD *, _DWORD, _DWORD))(*v1[3] + 4))(
      0,
      v1[1],
      v1[9] + 14,
      v1[10] + 108,
      0,
      0);
  }
  else if ( v1[12] == (_DWORD *)2 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD *, _DWORD *, _DWORD *, _DWORD, _DWORD))(*v1[4] + 4))(
      0,
      v1[1],
      v1[9] + 66,
      v1[10] + 2,
      0,
      0);
  }
  else if ( (_DWORD *)((char *)v1[12] - 2) == (_DWORD *)1 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD *, _DWORD *, int, _DWORD, _DWORD))(*v1[2] + 4))(
      0,
      v1[1],
      v1[9] + 68,
      (int)v1[10] + 421,
      0,
      0);
  }
  v2 = dword_563918;
  v3 = *((_DWORD *)dword_563918 + 2132);
  v4 = 0;
  v5 = (int)(v1[10] + 18);
  v6 = *(_DWORD *)(v3 + 8000) == 0;
  v7 = *(_DWORD *)(v3 + 8000) < 0;
  v40 = 0;
  v41 = 0;
  if ( !v7 && !v6 )
  {
    do
    {
      v8 = *(_DWORD *)(v3 + 4 * v4);
      v9 = *(_DWORD *)(v8 + 84);
      v10 = __OFSUB__(v9, v2[2332]);
      v6 = v9 == v2[2332];
      v7 = v9 - v2[2332] < 0;
      v39 = v8;
      if ( (unsigned __int8)(v7 ^ v10) | v6 )
      {
        v11 = (int)v1[6];
        if ( (_DWORD *)v4 == v1[14] )
        {
          v11 = (int)v1[7];
          v12 = (*(int (__stdcall **)(signed int))(*v1[1] + 88))(12407296);
          v13 = v1[9];
          v14 = (int)v13 + 242;
          v44 = (_DWORD *)((char *)v13 + 622);
          v15 = v1[8];
          v42 = v14;
          v43 = v5;
          v45 = v5 + *(signed __int16 *)(v15[513] + 174);
          (*(void (__stdcall **)(int, int *))(*v1[1] + 40))(v12, &v42);
          v8 = v39;
        }
        sub_49AF00(v1[8], v11, (char *)(v8 + 88), (int)v1[1], (int)v1[9] + 321, v5);
        if ( v1[12] == (_DWORD *)9 )
        {
          sub_4A9900(*(_DWORD **)(v8 + 536), &v37, &v38);
          v16 = v38 + 1;
          if ( v38 + 1 >= v37 )
            v16 = v37;
          v38 = v16;
          if ( v37 <= 20 )
          {
            sub_49AFF0(v1[8], v11, "---% pl", (int)v1[1], (int)v1[9] + 314, v5);
          }
          else
          {
            sprintf(&Dest, "%d%% pl", 100 - 100 * v16 / v37);
            sub_49AFF0(v1[8], v11, &Dest, (int)v1[1], (int)v1[9] + 314, v5);
          }
        }
        else
        {
          v17 = *(_DWORD *)(v8 + 540);
          if ( v17 >= 0 )
          {
            sprintf(&Dest, "%d ms", 10 * v17);
            sub_49AFF0(v1[8], v11, &Dest, (int)v1[1], (int)v1[9] + 314, v5);
          }
        }
        if ( *(_DWORD *)(v8 + 540) >= 0 )
        {
          sprintf(&Dest, "%d", *(_DWORD *)(v8 + 68));
          sub_49AFF0(v1[8], v11, &Dest, (int)v1[1], (int)(v1[9] + 155), v5);
        }
        v18 = v1[8][513];
        v40 += *(_DWORD *)(v8 + 68);
        v19 = *(signed __int16 *)(v18 + 174);
        v2 = dword_563918;
        v4 = v41;
        v5 += v19;
      }
      v3 = v2[2132];
      v10 = __OFSUB__(++v4, *(_DWORD *)(v3 + 8000));
      v7 = v4 - *(_DWORD *)(v3 + 8000) < 0;
      v41 = v4;
    }
    while ( v7 ^ v10 );
  }
  if ( GetAsyncKeyState(16) < 0 && GetAsyncKeyState(17) < 0 )
  {
    sprintf(&Dest, "%d", v40);
    sub_49AFF0(v1[8], (int)v1[7], &Dest, (int)v1[1], (int)(v1[9] + 155), v5 + 3);
  }
  v20 = (char *)dword_563918 + 9608;
  v21 = &v48 - ((_BYTE *)dword_563918 + 9608);
  do
  {
    v22 = *v20;
    v20[v21] = *v20;
    ++v20;
  }
  while ( v22 );
  if ( v1[13] )
  {
    v25 = (int)v1[6];
  }
  else
  {
    v23 = &v47;
    do
      v24 = (v23++)[1];
    while ( v24 );
    *(_WORD *)v23 = 95;
    v25 = (int)v1[7];
  }
  sub_49AF00(v1[8], v25, &v48, (int)v1[1], (int)(v1[9] + 9), (int)v1[10] + 118);
  v26 = (signed int)v1[14];
  if ( v26 >= 0 )
  {
    v27 = *((_DWORD *)dword_563918 + 2132);
    if ( v26 < *(_DWORD *)(v27 + 8000) )
    {
      v28 = *(_DWORD *)(v27 + 4 * v26);
      v29 = (void *)(v28 + 152);
      if ( v28 != -152 && v28 + 152 + strlen((const char *)(v28 + 152)) + 1 != v28 + 153 )
      {
        v30 = sub_49AE50(v1[8], &Dst, v29, 191);
        v31 = v1[8];
        v32 = 404 - *(signed __int16 *)(v31[513] + 174);
        v33 = 0;
        v39 = v30;
        v34 = &Dst;
        v35 = 180;
        v37 = v32;
        if ( v30 > 0 )
        {
          while ( v35 <= v32 )
          {
            sub_49AF00(v31, (int)v1[6], v34, (int)v1[1], (int)(v1[9] + 7), (int)v1[10] + v35);
            v31 = v1[8];
            v34 += strlen(v34) + 1;
            ++v33;
            v35 += *(signed __int16 *)(v31[513] + 174);
            if ( v33 >= v39 )
              break;
            v32 = v37;
          }
        }
      }
    }
  }
  return (*(int (__thiscall **)(_DWORD *, signed int))(*v1[1] + 108))(v1[1], 1);
}
// 511880: using guessed type __int16 word_511880;

//----- (0043BFB0) --------------------------------------------------------
signed int __thiscall sub_43BFB0(_DWORD *this, char a2)
{
  const char *v2; // esi
  signed int result; // eax

  v2 = 0;
  if ( !this[13] )
    v2 = (char *)dword_563918 + 9608;
  result = strlen(v2);
  if ( a2 >= 32
    && a2 < *(_DWORD *)(this[8] + 2060) + (signed int)*(signed __int16 *)(*(_DWORD *)(this[8] + 2052) + 168)
    && result < 31 )
  {
    v2[result] = a2;
    v2[result + 1] = 0;
    result = InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
  }
  return result;
}

//----- (0043C050) --------------------------------------------------------
int __thiscall sub_43C050(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // edi
  SHORT v5; // ax
  const char *v6; // edx
  int result; // eax
  int v8; // ebp
  HMODULE *v9; // edx
  int v10; // ecx
  int v11; // eax
  int v12; // edi
  bool v13; // sf
  HMODULE *v14; // ecx

  v3 = this;
  v4 = GetKeyState(16) & 0x8000;
  v5 = GetKeyState(17);
  v6 = 0;
  result = v5 & 0x8000;
  if ( !v3[13] )
    v6 = (char *)dword_563918 + 9608;
  switch ( a2 )
  {
    case 8:
      if ( v6 )
      {
        result = strlen(v6);
        if ( result > 0 )
        {
          v6[result - 1] = 0;
          return InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
        }
      }
      return result;
    case 9:
      PlaySoundA((LPCSTR)0x76, *((HMODULE *)dword_563918 + 4), 0x40005u);
      return InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
    case 13:
      return (*(int (__thiscall **)(_DWORD *))(*v3 + 44))(v3);
    case 38:
      v12 = v3[14];
      while ( 1 )
      {
        v13 = v3[14]-- - 1 < 0;
        if ( v13 )
          break;
        v14 = (HMODULE *)dword_563918;
        if ( *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563918 + 2132) + 4 * v3[14]) + 84) <= *((_DWORD *)dword_563918
                                                                                             + 2332) )
          goto LABEL_29;
      }
      v3[14] = v12;
      v14 = (HMODULE *)dword_563918;
LABEL_29:
      PlaySoundA((LPCSTR)0x75, v14[4], 0x40005u);
      return InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
    case 40:
      v8 = v3[14];
      break;
    case 121:
      if ( v4 || !result || dword_56C300 )
        goto LABEL_9;
      dword_56C300 = 1;
      return result;
    case 122:
      if ( !v4 || !result || dword_56C300 != 2 )
        goto LABEL_9;
      result = DialogBoxParamA(
                 *((HINSTANCE *)dword_563918 + 4),
                 (LPCSTR)0x79,
                 *((HWND *)dword_563918 + 3),
                 sub_4025DB,
                 0);
      dword_56C300 = 0;
      return result;
    case 123:
      if ( v4 || !result || dword_56C300 != 1 )
LABEL_9:
        dword_56C300 = 10;
      else
        dword_56C300 = 2;
      return result;
    default:
      return result;
  }
  while ( 1 )
  {
    ++v3[14];
    v9 = (HMODULE *)dword_563918;
    v10 = *((_DWORD *)dword_563918 + 2132);
    v11 = v3[14];
    if ( v11 > *(_DWORD *)(v10 + 8000) - 1 )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(v10 + 4 * v11) + 84) <= *((_DWORD *)dword_563918 + 2332) )
      goto LABEL_23;
  }
  v3[14] = v8;
  v9 = (HMODULE *)dword_563918;
LABEL_23:
  PlaySoundA((LPCSTR)0x75, v9[4], 0x40005u);
  return InvalidateRect(*((HWND *)dword_563918 + 3), 0, 0);
}
// 56C300: using guessed type int dword_56C300;

//----- (0043C370) --------------------------------------------------------
_DWORD *__thiscall sub_43C370(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int v3; // ebp
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  _DWORD *v18; // edi
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // edi
  int v23; // eax
  bool v24; // zf
  bool v25; // sf
  int v26; // ecx
  int v27; // ecx
  int v28; // edx
  _DWORD *v29; // eax
  char Dest; // [esp+24h] [ebp-110h]
  int v32; // [esp+130h] [ebp-4h]

  v1 = this;
  sub_401A3C();
  *v1 = &LoginWindow::`vftable';
  v2 = *((_DWORD *)dword_563918 + 2132);
  v3 = 0;
  v32 = 0;
  sub_4023C4(v2);
  sub_4A45C0(3);
  v4 = operator new(0xE0u);
  LOBYTE(v32) = 1;
  if ( v4 )
    v5 = sub_4A04F0(v4, *((_DWORD *)dword_563918 + 3), dword_563910, 0, 0, 0, 0);
  else
    v5 = 0;
  LOBYTE(v32) = 0;
  v1[1] = v5;
  if ( sub_49CA30(v5) == 1 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v1[1] + 40))(0, 0);
    (*(void (__stdcall **)(signed int))(*(_DWORD *)v1[1] + 108))(1);
  }
  (*(void (__stdcall **)(_DWORD, signed int, BYTE *))(*(_DWORD *)v1[1] + 140))(
    *((_DWORD *)dword_563918 + 4),
    107,
    &Source);
  v6 = operator new(0xCCu);
  LOBYTE(v32) = 2;
  if ( v6 )
    v7 = sub_49FCA0(v6, v1[1], *((_DWORD *)dword_563918 + 4), 112, 0, -1, -1, 0, 1);
  else
    v7 = 0;
  v1[2] = v7;
  v8 = operator new(0xCCu);
  LOBYTE(v32) = 3;
  if ( v8 )
    v9 = sub_49FCA0(v8, v1[1], *((_DWORD *)dword_563918 + 4), 107, 0, -1, -1, 0, 1);
  else
    v9 = 0;
  v1[3] = v9;
  v10 = operator new(0xCCu);
  LOBYTE(v32) = 4;
  if ( v10 )
    v11 = sub_49FCA0(v10, v1[1], *((_DWORD *)dword_563918 + 4), 108, 0, -1, -1, 0, 1);
  else
    v11 = 0;
  v1[4] = v11;
  v12 = operator new(0xCCu);
  LOBYTE(v32) = 5;
  if ( v12 )
    v13 = sub_49FCA0(v12, v1[1], *((_DWORD *)dword_563918 + 4), 105, 0, -1, -1, 0, 1);
  else
    v13 = 0;
  v1[5] = v13;
  v14 = operator new(0xCCu);
  LOBYTE(v32) = 6;
  if ( v14 )
    v15 = sub_49FCA0(v14, v1[1], *((_DWORD *)dword_563918 + 4), 104, 0, 0, 0, 0, 1);
  else
    v15 = 0;
  v1[6] = v15;
  v16 = operator new(0xCCu);
  LOBYTE(v32) = 7;
  if ( v16 )
    v17 = sub_49FCA0(v16, v1[1], *((_DWORD *)dword_563918 + 4), 116, 0, 0, 0, 0, 1);
  else
    v17 = 0;
  v1[7] = v17;
  v18 = operator new(0xC1Cu);
  LOBYTE(v32) = 8;
  if ( v18 )
  {
    v19 = operator new(0x1E6u);
    LOBYTE(v32) = 9;
    if ( v19 )
      v20 = sub_4A5420(v19, *((_DWORD *)dword_563918 + 4), 115, 0, 0);
    else
      v20 = 0;
    LOBYTE(v32) = 8;
    v21 = sub_49A970(v18, 32, (int)v20, 1);
  }
  else
  {
    v21 = 0;
  }
  v1[8] = v21;
  v1[12] = 0;
  v1[11] = 0;
  v1[13] = 0;
  v1[14] = 0;
  v22 = dword_563918;
  v23 = *((_DWORD *)dword_563918 + 2132);
  v24 = *(_DWORD *)(v23 + 8000) == 0;
  v25 = *(_DWORD *)(v23 + 8000) < 0;
  LOBYTE(v32) = 0;
  if ( !v25 && !v24 )
  {
    do
    {
      v26 = v1[14];
      if ( *(_DWORD *)(*(_DWORD *)(v23 + 4 * v26) + 84) <= v22[2332] )
        break;
      v27 = v26 + 1;
      v1[14] = v27;
      v22 = dword_563918;
      v23 = *((_DWORD *)dword_563918 + 2132);
      v28 = *(_DWORD *)(v23 + 8000);
      if ( v27 > v28 - 1 )
      {
        v1[14] = 0;
        v22 = dword_563918;
        break;
      }
    }
    while ( v27 < v28 );
  }
  v29 = v22 + 2132;
  if ( *(_DWORD *)(v22[2132] + 8000) > 0 )
  {
    while ( 1 )
    {
      sprintf(&Dest, "%s,%d", *(_DWORD *)(*v29 + 4 * v3), *(_DWORD *)(*(_DWORD *)(*v29 + 4 * v3) + 64));
      if ( !strcmp(&Dest, (const char *)dword_563918 + 9736) )
        break;
      v29 = (char *)dword_563918 + 8528;
      if ( ++v3 >= *(_DWORD *)(*((_DWORD *)dword_563918 + 2132) + 8000) )
        goto LABEL_41;
    }
    v1[14] = v3;
  }
LABEL_41:
  sub_4023C9();
  return v1;
}
// 401A3C: using guessed type int sub_401A3C(void);
// 4023C4: using guessed type int __thiscall sub_4023C4(_DWORD);
// 4023C9: using guessed type int sub_4023C9(void);
// 513A14: using guessed type void *LoginWindow::`vftable';
// 563910: using guessed type int dword_563910;

//----- (0043C8D0) --------------------------------------------------------
void *__thiscall sub_43C8D0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_40250E();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 40250E: using guessed type int sub_40250E(void);

//----- (0043C910) --------------------------------------------------------
signed int __cdecl sub_43C910(_DWORD *a1, int a2, int a3)
{
  signed int result; // eax
  int v4; // ecx

  if ( *((_WORD *)dword_563908
       + 6
       * ((unsigned int)*(unsigned __int8 *)(3 * (a2 + a3 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4))
                                           + *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5168)
                                           + 2) >> 5)
       + 28762) )
    return 3;
  LOWORD(v4) = *((_WORD *)dword_563908
               + 6
               * ((unsigned int)*(unsigned __int8 *)(3 * (a2 + a3 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4))
                                                   + *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5168)
                                                   + 2) >> 5)
               + 28761);
  if ( (v4 & 0x8000u) != 0
    || (v4 = (signed __int16)v4, abs(a2 - *a1) <= (signed int)(signed __int16)v4) && abs(a3 - a1[1]) <= v4 )
  {
    result = 0;
  }
  else
  {
    result = 4;
  }
  return result;
}

//----- (0043C9D0) --------------------------------------------------------
void __thiscall sub_43C9D0(_DWORD *this)
{
  this[96] = 0;
}

//----- (0043C9E0) --------------------------------------------------------
int __fastcall sub_43C9E0(int a1, int a2, _DWORD *a3)
{
  int result; // eax
  int v4; // eax

  result = *(_DWORD *)(a1 + 384);
  if ( result < 16 )
  {
    v4 = 3 * result;
    *(_DWORD *)(a1 + 8 * v4) = *a3;
    result = a1 + 8 * v4;
    *(_DWORD *)(result + 4) = a3[1];
    *(_DWORD *)(result + 8) = a3[2];
    *(_DWORD *)(result + 12) = a3[3];
    *(_DWORD *)(result + 16) = a3[4];
    *(_DWORD *)(result + 20) = a3[5];
    ++*(_DWORD *)(a1 + 384);
  }
  return result;
}

//----- (0043CA40) --------------------------------------------------------
signed int __stdcall sub_43CA40(int a1, int a2, _DWORD *a3)
{
  int v3; // ebx
  _DWORD *v4; // ebp
  int v5; // edx
  int v6; // edi
  int v7; // ecx
  int v8; // esi
  int v9; // eax
  int v10; // ecx
  signed int result; // eax
  __int64 v12; // rax
  int v13; // eax
  int v14; // ecx
  int v15; // esi
  int v16; // esi
  int v17; // edi
  int v18; // eax
  int v19; // esi
  int v20; // edi
  int v21; // esi
  int v22; // eax
  int v23; // ebx
  int v24; // esi
  int v25; // ebx
  int v26; // [esp+10h] [ebp-Ch]
  int v27; // [esp+14h] [ebp-8h]
  int v28; // [esp+18h] [ebp-4h]
  int v29; // [esp+20h] [ebp+4h]
  int v30; // [esp+24h] [ebp+8h]
  int v31; // [esp+28h] [ebp+Ch]
  int v32; // [esp+28h] [ebp+Ch]
  int v33; // [esp+28h] [ebp+Ch]

  v3 = a2;
  v4 = a3;
  v5 = a3[1];
  v6 = *a3;
  v7 = a1 - *a3;
  v31 = a2 - v5;
  v26 = v7;
  v27 = v5;
  v28 = v7 * v7 + v31 * v31;
  if ( v28 > v4[3] * v4[3] )
    return 1;
  if ( a1 < 0 )
    return 1;
  if ( a2 < 0 )
    return 1;
  if ( v6 < 0 )
    return 1;
  if ( v5 < 0 )
    return 1;
  v8 = *((_DWORD *)dword_563908 + 1508);
  v9 = *(_DWORD *)(v8 + 4);
  if ( a1 >= v9 )
    return 1;
  v10 = *(_DWORD *)(v8 + 8);
  if ( a2 >= v10 || v6 >= v9 || v5 >= v10 )
    return 1;
  v30 = 3 * sub_401604(v6, v5);
  if ( !*((_BYTE *)dword_563908 + 4 * v30 + sub_401604(a1, v3) + 57514) )
    return 6;
  if ( !v28 )
    return 0;
  if ( v28 > 32 )
  {
    v12 = (unsigned __int8)sub_40277A(v31, v26) - v4[2];
    v13 = (HIDWORD(v12) ^ v12) - HIDWORD(v12);
    if ( v13 > 120 )
      v13 = 240 - v13;
    if ( v13 > v4[4] )
      return 2;
  }
  if ( v4[5] )
    return 0;
  v14 = abs(v26);
  v15 = abs(v31);
  v32 = v15;
  if ( v14 < v15 )
  {
    if ( v3 < v27 )
    {
      v16 = 1000 * a1 + 500;
      v17 = 1000 * (v6 - a1) / v32;
      do
      {
        result = sub_4021B2(v4, v16 / 1000, v3);
        if ( result )
          break;
        ++v3;
        v16 += v17;
      }
      while ( v3 < v27 );
      return result;
    }
    v18 = 1000 * v26 / v15;
    v19 = v27;
    v20 = 1000 * v6 + 500;
    v29 = v18;
    if ( v27 <= v3 )
    {
      do
      {
        result = sub_4021B2(v4, v20 / 1000, v19);
        if ( result )
          break;
        v20 += v29;
        ++v19;
      }
      while ( v19 <= v3 );
      return result;
    }
    return 0;
  }
  if ( !v14 )
    return 0;
  if ( a1 >= v6 )
  {
    v24 = 1000 * v4[1] + 500;
    v25 = 1000 * (v3 - v4[1]) / v14;
    if ( v6 > a1 )
      return 0;
    while ( 1 )
    {
      result = sub_4021B2(v4, v6, v24 / 1000);
      if ( result )
        break;
      ++v6;
      v24 += v25;
      if ( v6 > a1 )
        return 0;
    }
  }
  else
  {
    v21 = 1000 * v3 + 500;
    v22 = 1000 * (v27 - v3) / v14;
    v23 = a1;
    v33 = v22;
    do
    {
      result = sub_4021B2(v4, v23, v21 / 1000);
      if ( result )
        break;
      v21 += v33;
      ++v23;
    }
    while ( v23 < v6 );
  }
  return result;
}
// 401604: using guessed type _DWORD __stdcall sub_401604(_DWORD, _DWORD);
// 4021B2: using guessed type _DWORD __cdecl sub_4021B2(_DWORD, _DWORD, _DWORD);
// 40277A: using guessed type _DWORD __cdecl sub_40277A(_DWORD, _DWORD);

//----- (0043CE10) --------------------------------------------------------
_DWORD *__thiscall sub_43CE10(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[96] = 0;
  return result;
}

//----- (0043CE20) --------------------------------------------------------
BOOL __thiscall sub_43CE20(_DWORD *this, int a2, int a3)
{
  int v3; // ebx
  int v4; // esi
  _DWORD *v5; // edi

  v3 = this[96];
  v4 = 0;
  if ( v3 > 0 )
  {
    v5 = this;
    do
    {
      if ( !sub_401E74(a2, a3, v5) )
        break;
      ++v4;
      v5 += 6;
    }
    while ( v4 < v3 );
  }
  return v4 != v3;
}
// 401E74: using guessed type _DWORD __stdcall sub_401E74(_DWORD, _DWORD, _DWORD);

//----- (0043CE80) --------------------------------------------------------
void __thiscall sub_43CE80(_DWORD *this, int a2, int a3, int a4, _DWORD *a5)
{
  _DWORD *v5; // ebp
  int v6; // edi
  int v7; // ebx
  int v8; // esi
  signed int v9; // eax
  signed int v10; // ecx
  signed int v11; // eax
  signed int v12; // ebx
  signed int v13; // eax
  signed int v14; // esi
  int v15; // ecx
  int v16; // eax
  int v17; // edi
  _DWORD *v18; // ebp
  signed int v19; // [esp+4h] [ebp-14h]
  signed int v20; // [esp+8h] [ebp-10h]
  signed int v21; // [esp+Ch] [ebp-Ch]
  _DWORD *v22; // [esp+10h] [ebp-8h]
  int v23; // [esp+14h] [ebp-4h]
  int v24; // [esp+20h] [ebp+8h]
  int v25; // [esp+28h] [ebp+10h]

  v5 = dword_563908;
  v22 = this;
  if ( *((_DWORD *)dword_563908 + 491) )
  {
    v7 = a5[1] / 16;
    v8 = (a5[3] + 15) / 16;
    v9 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4) - 1;
    v10 = *a5 / 16 < 0 ? 0 : *a5 / 16;
    if ( v9 < v10 )
      v10 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4) - 1;
    v21 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4) - 1;
    v6 = (a5[2] + 15) / 16;
    if ( v9 >= (v6 < 0 ? 0 : v6) )
      v21 = v6 < 0 ? 0 : v6;
    v11 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8) - 1;
    v20 = v11;
    if ( v11 >= (v7 < 0 ? 0 : v7) )
      v20 = v7 < 0 ? 0 : v7;
    v19 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8) - 1;
    if ( v11 >= (v8 < 0 ? 0 : v8) )
      v19 = v8 < 0 ? 0 : v8;
    v12 = v10;
    if ( v10 <= v21 )
    {
      v13 = v19;
      v14 = v20;
      v15 = 16 * v10 - a3 + 8;
      v24 = v15;
      do
      {
        if ( v14 <= v13 )
        {
          v25 = 16 * v14 - a4 + 8;
          do
          {
            if ( !(*(_BYTE *)(3 * (v12 + v14 * *(_DWORD *)(v5[1508] + 4)) + *(_DWORD *)(v5[1508] + 5168) + 2) & 0x1F) )
            {
              v16 = v22[96];
              v17 = 0;
              v23 = v22[96];
              if ( v16 > 0 )
              {
                v18 = v22;
                do
                {
                  if ( !sub_401E74(v12, v14, v18) )
                    break;
                  ++v17;
                  v18 += 6;
                }
                while ( v17 < v23 );
                v5 = dword_563908;
                v16 = v23;
              }
              if ( v17 == v16 )
              {
                sub_4A50B0(
                  v5[491],
                  (v14 + v12) % *(signed __int16 *)(v5[491] + 176),
                  a2,
                  v24,
                  v25,
                  *((_DWORD *)dword_563918 + 2240) != 0 ? 262 : 259,
                  0,
                  0,
                  0,
                  0);
                v5 = dword_563908;
              }
            }
            v13 = v19;
            v25 += 16;
            ++v14;
          }
          while ( v14 <= v19 );
          v15 = v24;
          v14 = v20;
        }
        ++v12;
        v15 += 16;
        v24 = v15;
      }
      while ( v12 <= v21 );
    }
  }
}
// 401E74: using guessed type _DWORD __stdcall sub_401E74(_DWORD, _DWORD, _DWORD);

//----- (0043D130) --------------------------------------------------------
int __thiscall sub_43D130(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx

  v1 = this;
  *this = &MainManager::`vftable';
  this[1] = &MainManager::`vftable';
  v2 = (void (__stdcall ***)(signed int))this[7];
  if ( v2 )
  {
    (**v2)(1);
    v1[7] = 0;
  }
  return sub_4027A2(v1);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 513AE4: using guessed type void *MainManager::`vftable';
// 513B14: using guessed type void *MainManager::`vftable';

//----- (0043D1C0) --------------------------------------------------------
_DWORD *__thiscall sub_43D1C0(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  _DWORD *v3; // eax
  _DWORD *result; // eax

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[7];
  if ( v2 )
  {
    (**v2)(1);
    v1[7] = 0;
  }
  v3 = operator new(0x420u);
  if ( v3 )
  {
    result = sub_49A5F0(v3, 1, v1 + 2, 0);
    v1[7] = result;
  }
  else
  {
    result = 0;
    v1[7] = 0;
  }
  return result;
}

//----- (0043D280) --------------------------------------------------------
int __thiscall sub_43D280(_DWORD *this, _DWORD *a2)
{
  if ( a2 )
  {
    this[2] = *a2;
    this[3] = a2[1];
    this[4] = a2[2];
    this[5] = a2[3];
  }
  return sub_4022D9();
}
// 4022D9: using guessed type int sub_4022D9(void);

//----- (0043D2C0) --------------------------------------------------------
int __thiscall sub_43D2C0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // eax
  int v5; // edx
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // ecx
  int result; // eax
  int v11; // ecx
  int v12; // edx
  int v13; // esi
  int v14; // ecx
  int v15; // ebx
  int v16; // ebx
  int v17; // eax
  _DWORD *v18; // esi
  signed int v19; // ebp
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // eax
  _DWORD *v26; // edi
  _DWORD *v27; // ebx
  int v28; // esi
  int v29; // edi
  _DWORD *v30; // edx
  int v31; // esi
  int v32; // edi
  int v33; // ecx
  void *v34; // ST34_4
  int v35; // eax
  int v36; // ebx
  int v37; // edi
  _DWORD *v38; // esi
  int v39; // eax
  _DWORD *v40; // [esp+24h] [ebp-524h]
  signed int v41; // [esp+24h] [ebp-524h]
  signed int v42; // [esp+28h] [ebp-520h]
  int v43; // [esp+28h] [ebp-520h]
  int v44; // [esp+2Ch] [ebp-51Ch]
  int v45; // [esp+30h] [ebp-518h]
  char v46; // [esp+34h] [ebp-514h]
  int v47; // [esp+38h] [ebp-510h]
  int v48; // [esp+3Ch] [ebp-50Ch]
  char Dest; // [esp+438h] [ebp-110h]
  char v50; // [esp+4B8h] [ebp-90h]
  int v51; // [esp+544h] [ebp-4h]

  v3 = dword_563908;
  v40 = this;
  if ( *((_DWORD *)dword_563908 + 6898) )
  {
    (*(void (__thiscall **)(_DWORD, int, int))(**((_DWORD **)dword_563908 + 6898) + 300))(
      *((_DWORD *)dword_563908 + 6898),
      a2,
      a3);
    v3 = dword_563908;
  }
  if ( *((_DWORD *)dword_56390C + 1602) )
  {
    v44 = (int)operator new(0x2Cu);
    v51 = 0;
    if ( v44 )
      v4 = sub_401591(*((_DWORD *)dword_563908 + 89), (char *)dword_563908 + 12404);
    else
      v4 = 0;
    *((_DWORD *)dword_563908 + 1535) = v4;
    *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
    v3 = dword_563908;
    v51 = -1;
  }
  if ( *((_DWORD *)dword_56390C + 1564) )
  {
    sub_4020DB(v3[1513]);
    *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1513);
    *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
    v3 = dword_563908;
  }
  if ( *((_DWORD *)dword_56390C + 1570) )
  {
    v5 = v3[6898];
    if ( *(_DWORD *)(v5 + 56) >= 5001 )
    {
      v6 = (*(int (**)(void))(**(_DWORD **)(v5 + 72) + 4))();
      v3 = dword_563908;
      if ( v6 != 4 )
      {
        v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503)
                       + 4 * *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)
                       + 4);
        if ( v7 )
        {
          v8 = (*(int (**)(void))(*(_DWORD *)v7 + 228))();
          v3 = dword_563908;
          v9 = *((_DWORD *)dword_563908 + 1508);
          if ( *(_BYTE *)(sub_40137F(*((_DWORD *)dword_563908 + 62) / 16, *((_DWORD *)dword_563908 + 63) / 16) + v8) )
          {
            (*(void (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(signed __int16 *)(v3[6897] + 96));
            v3 = dword_563908;
          }
        }
      }
    }
  }
  result = (int)dword_56390C;
  if ( *((_DWORD *)dword_56390C + 1569) )
  {
    if ( v3[6898] )
    {
      result = (*(int (**)(void))(**(_DWORD **)(v3[6898] + 72) + 4))();
      if ( result == 4 )
        return result;
      v3 = dword_563908;
    }
    if ( v3[2691] != -1 )
    {
      v40[8] = 1;
      v11 = *((_DWORD *)dword_563908 + 1534);
      result = sub_40209A(*((_DWORD *)dword_563908 + 2691));
      v13 = result;
      if ( result )
      {
        result = *(_DWORD *)(result + 12);
        if ( *(_DWORD *)(result + 252) )
        {
          v14 = *(signed __int16 *)(result + 168);
          switch ( v14 )
          {
            case 1:
            case 3:
              v15 = *(signed __int16 *)(v13 + 8);
              goto LABEL_31;
            case 2:
            case 4:
              v16 = sub_402676(*(_DWORD *)(result + 128));
              v17 = sub_4025EA(*(_DWORD *)(*(_DWORD *)(v13 + 12) + 128)) - v16;
              v15 = *(signed __int16 *)(v13 + 8);
              v12 = (v17 < 0) - 1;
              result = v12 & v17;
              if ( v15 >= result )
                goto LABEL_30;
              goto LABEL_31;
            case 5:
              result = sub_402676(*(_DWORD *)(result + 128));
              if ( !result )
              {
                v15 = *(signed __int16 *)(v13 + 8);
                result = sub_4025EA(*(_DWORD *)(*(_DWORD *)(v13 + 12) + 128));
                if ( v15 >= result )
                {
                  result = sub_4025EA(*(_DWORD *)(*(_DWORD *)(v13 + 12) + 128));
LABEL_30:
                  v15 = result;
                }
LABEL_31:
                if ( v15 > 0 )
                {
                  *(_DWORD *)(v13 + 20) = sub_401D39(v14, v12);
                  if ( *((_DWORD *)dword_563908 + 363) )
                    sub_4A7120(*((_DWORD **)dword_563908 + 363), 0, 0, 0, 0);
                  result = (*(int (__stdcall **)(_DWORD, int))(*(_DWORD *)dword_56391C + 32))(
                             *(signed __int16 *)(v13 + 4),
                             v15);
                  v40[8] = 0;
                }
              }
              break;
            default:
              return result;
          }
        }
      }
      return result;
    }
    if ( v3[2693] != -1 )
    {
      result = (int)v40;
      v40[10] = 1;
      return result;
    }
    result = v3[2692];
    if ( result != -1 )
    {
      v18 = *(_DWORD **)(v3[1503] + 4 * result + 4);
      if ( v18 )
      {
        v47 = v3[2692];
        v19 = 1;
        if ( v18[27] > 0 )
        {
          v48 = v18[27];
          v19 = 2;
        }
        v20 = v18[28];
        if ( v20 > 0 )
          *(&v47 + v19++) = v20;
        v21 = v18[29];
        if ( v21 > 0 )
          *(&v47 + v19++) = v21;
        v22 = v18[30];
        if ( v22 > 0 )
          *(&v47 + v19++) = v22;
        v23 = v18[31];
        if ( v23 > 0 )
          *(&v47 + v19++) = v23;
        v24 = v18[32];
        if ( v24 > 0 )
          *(&v47 + v19++) = v24;
        v25 = v18[33];
        if ( v25 > 0 )
          *(&v47 + v19++) = v25;
        result = v18[34];
        if ( result > 0 )
          *(&v47 + v19++) = result;
        if ( v19 == 1 )
        {
          if ( (*(int (__thiscall **)(_DWORD *))(*v18 + 16))(v18) == -1
            && !(*(int (__thiscall **)(_DWORD *))(*v18 + 216))(v18)
            && *(_WORD *)(v18[18] + 1052) )
          {
            return (*(int (__stdcall **)(int))(*(_DWORD *)dword_56391C + 40))(v47);
          }
          result = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v18[18] + 4))(v18[18]);
          if ( result == 5 )
          {
            result = (int)v40;
            v40[9] = 1;
          }
          return result;
        }
        if ( *(_DWORD *)(v18[18] + 1088) != 1 )
          goto LABEL_74;
        v42 = 0;
        if ( v19 <= 0 )
          goto LABEL_73;
        while ( 1 )
        {
          v26 = *(_DWORD **)(v3[1503] + 4 * *(&v47 + v42) + 4);
          if ( v26 )
          {
            if ( (*(int (__thiscall **)(_DWORD *))(*v26 + 16))(v26) == -1
              && *(_WORD *)(v26[18] + 1052)
              && !(*(int (__thiscall **)(_DWORD *))(*v26 + 148))(v26)
              && !(*(int (__thiscall **)(_DWORD *))(*v26 + 216))(v26) )
            {
              result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(&v47 + v42));
LABEL_73:
              if ( v42 == v19 )
              {
LABEL_74:
                (*(void (__thiscall **)(_DWORD *, int *, int *, char *))(*v18 + 84))(v18, &v45, &v44, &v46);
                v27 = v40;
                v28 = v40[1];
                v29 = v40[2];
                v30 = dword_563908;
                v45 /= 10000;
                v44 /= 10000;
                v31 = v45 + v28 - *((_DWORD *)dword_563908 + 60);
                v32 = v44 + v29 - *((_DWORD *)dword_563908 + 61);
                if ( *((_DWORD *)dword_563908 + 355) )
                {
                  v33 = *((_DWORD *)dword_563908 + 355);
                  if ( v33 )
                  {
                    (*(void (__stdcall **)(signed int))(*(_DWORD *)v33 + 36))(1);
                    v30 = dword_563908;
                  }
                  v30[355] = 0;
                }
                v34 = operator new(0xD18u);
                v51 = 1;
                if ( v34 )
                {
                  v35 = sub_402617(0x53u);
                  v36 = sub_4010FF(
                          *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                          v35,
                          v27 - 1,
                          v31,
                          v32,
                          4,
                          0,
                          1);
                }
                else
                {
                  v36 = 0;
                }
                result = 0;
                v51 = -1;
                v43 = 0;
                v41 = 0;
                if ( v19 <= 0 )
                  goto LABEL_95;
                do
                {
                  v37 = *(&v47 + v41);
                  v38 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * v37 + 4);
                  if ( (*(int (__thiscall **)(_DWORD))(*v38 + 16))(*(_DWORD *)(*((_DWORD *)dword_563908 + 1503)
                                                                             + 4 * v37
                                                                             + 4)) == -1
                    && *(_WORD *)(v38[18] + 1052) )
                  {
                    (*(void (__thiscall **)(_DWORD *, char *))(*v38 + 136))(v38, &v50);
                    v39 = (*(int (__thiscall **)(_DWORD *))(*v38 + 216))(v38);
                    if ( v39 )
                    {
                      sprintf(&Dest, "%s (%s)", &v50, v39);
                      sub_4024F0(&Dest, v37, 1);
                    }
                    else
                    {
                      sprintf(&Dest, "%s", &v50);
                      sub_4024F0(&Dest, v37, 0);
                    }
                    ++v43;
                  }
                  result = v41++ + 1;
                }
                while ( v41 < v19 );
                if ( v43 )
                {
                  result = (int)dword_563908;
                  *((_DWORD *)dword_563908 + 355) = v36;
                }
                else
                {
LABEL_95:
                  if ( v36 )
                    result = (*(int (__thiscall **)(int, signed int))(*(_DWORD *)v36 + 36))(v36, 1);
                }
              }
              return result;
            }
            v3 = dword_563908;
          }
          result = v42++ + 1;
          if ( v42 >= v19 )
            goto LABEL_73;
        }
      }
    }
  }
  return result;
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40209A: using guessed type _DWORD __stdcall sub_40209A(_DWORD);
// 4020DB: using guessed type int __thiscall sub_4020DB(_DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0043DC00) --------------------------------------------------------
void *__stdcall sub_43DC00(int a1, int a2)
{
  void *result; // eax

  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
    result = (void *)(*(int (__stdcall **)(int, int))(**((_DWORD **)dword_563908 + 6898) + 304))(a1, a2);
  return result;
}

//----- (0043DC40) --------------------------------------------------------
void *__thiscall sub_43DC40(_DWORD **this, int a2, int a3, int a4)
{
  void *result; // eax
  _DWORD **v5; // ebx
  int v6; // ecx
  int v7; // esi
  int v8; // edi
  int v9; // ecx
  int v10; // ecx

  result = dword_563918;
  v5 = this;
  if ( *((_DWORD *)dword_563918 + 2348) != 3 )
  {
    *((_DWORD *)dword_563908 + 2691) = -1;
    *((_DWORD *)dword_563908 + 2692) = -1;
    *((_DWORD *)dword_563908 + 2693) = -1;
    result = (void *)(*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*this[6] + 4))(a2, a3, 0, 0);
    if ( !result )
    {
      result = dword_563908;
      if ( *((_DWORD *)dword_563908 + 6898) )
      {
        result = (void *)(*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 148))();
        if ( !result )
        {
          v6 = *((_DWORD *)dword_563908 + 1534);
          v7 = a2 + *((_DWORD *)dword_563908 + 60) - (_DWORD)v5[1];
          v8 = a3 + *((_DWORD *)dword_563908 + 61) - (_DWORD)v5[2];
          *((_DWORD *)dword_563908 + 2691) = sub_40267B(v7, a3 + *((_DWORD *)dword_563908 + 61) - (_DWORD)v5[2]);
          result = dword_563908;
          if ( *((_DWORD *)dword_563908 + 2691) == -1 )
          {
            v9 = *((_DWORD *)dword_563908 + 1514);
            *((_DWORD *)dword_563908 + 2693) = sub_4017C6(v7, v8);
            result = dword_563908;
            if ( *((_DWORD *)dword_563908 + 2693) == -1 )
            {
              v10 = *((_DWORD *)dword_563908 + 1503);
              result = (void *)sub_401578(v7, v8);
              *((_DWORD *)dword_563908 + 2692) = result;
            }
          }
        }
      }
    }
  }
  return result;
}
// 401578: using guessed type _DWORD __stdcall sub_401578(_DWORD, _DWORD);
// 4017C6: using guessed type _DWORD __stdcall sub_4017C6(_DWORD, _DWORD);
// 40267B: using guessed type _DWORD __stdcall sub_40267B(_DWORD, _DWORD);

//----- (0043DDA0) --------------------------------------------------------
int __thiscall sub_43DDA0(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (0043DDC0) --------------------------------------------------------
int __thiscall sub_43DDC0(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // ebx
  int result; // eax
  int v7; // ecx
  int v8; // esi
  int v9; // edi
  int v10; // ecx
  _DWORD *v11; // esi

  v5 = this;
  if ( sub_401929(8) )
    sub_401811(*((_DWORD *)dword_563908 + 1500));
  result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))();
  if ( result != 4 )
  {
    result = (int)dword_563918;
    if ( *((_DWORD *)dword_563918 + 2348) != 3 )
    {
      result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*v5[6] + 4))(a2, a3, 0, 0);
      if ( !result )
      {
        v7 = *((_DWORD *)dword_563908 + 1534);
        v8 = a2 + *((_DWORD *)dword_563908 + 60) - (_DWORD)v5[1];
        v9 = a3 + *((_DWORD *)dword_563908 + 61) - (_DWORD)v5[2];
        *((_DWORD *)dword_563908 + 2691) = sub_40267B(v8, a3 + *((_DWORD *)dword_563908 + 61) - (_DWORD)v5[2]);
        result = (int)dword_563908;
        if ( *((_DWORD *)dword_563908 + 2691) == -1 )
        {
          v10 = *((_DWORD *)dword_563908 + 1503);
          *((_DWORD *)dword_563908 + 2692) = sub_401578(v8, v9);
          result = *((_DWORD *)dword_563908 + 2692);
          if ( result != -1 )
          {
            v11 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * result + 4);
            result = (*(int (__thiscall **)(_DWORD *))(*v11 + 16))(v11);
            if ( result == -1 )
            {
              result = (*(int (__thiscall **)(_DWORD *))(*v11 + 148))(v11);
              if ( !result )
              {
                result = (*(int (__thiscall **)(_DWORD *))(*v11 + 216))(v11);
                if ( !result )
                {
                  if ( *(_WORD *)(v11[18] + 1052) )
                    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*((_DWORD *)dword_563908
                                                                                           + 2692));
                }
              }
            }
          }
        }
        else
        {
          v5[8] = (_DWORD *)1;
        }
      }
    }
  }
  return result;
}
// 401578: using guessed type _DWORD __stdcall sub_401578(_DWORD, _DWORD);
// 401811: using guessed type int __thiscall sub_401811(_DWORD);
// 401929: using guessed type _DWORD __stdcall sub_401929(_DWORD);
// 40267B: using guessed type _DWORD __stdcall sub_40267B(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0043DF70) --------------------------------------------------------
_DWORD *__thiscall sub_43DF70(char *this, int a2, int a3, int a4, int a5)
{
  char *v5; // ebx
  int v6; // esi
  _DWORD *result; // eax
  int v8; // ecx
  char *v9; // ecx
  _BYTE *v10; // edx
  char v11; // al
  _DWORD *v12; // eax
  int v13; // ecx
  int v14; // esi
  int v15; // edi
  int v16; // ecx
  int v17; // eax
  int v18; // ebp
  _DWORD *v19; // eax
  int v20; // ecx
  int v21; // eax
  _DWORD *v22; // edi
  int v23; // esi
  int v24; // ecx
  int v25; // ecx
  bool v26; // zf
  int v27; // ebp
  int v28; // esi
  int v29; // ecx
  int v30; // eax
  _DWORD *v31; // ebx
  signed int v32; // edi
  _DWORD *v33; // ecx
  _DWORD *v34; // esi
  int v35; // eax
  int v36; // ecx
  int v37; // esi
  int v38; // ecx
  int v39; // edi
  BOOL v40; // ST1C_4
  int v41; // ST14_4
  _DWORD *v42; // [esp+14h] [ebp-D1Ch]
  signed int v43; // [esp+18h] [ebp-D18h]
  int v44[256]; // [esp+20h] [ebp-D10h]
  int v45[256]; // [esp+420h] [ebp-910h]
  int v46[256]; // [esp+820h] [ebp-510h]
  char v47; // [esp+C20h] [ebp-110h]
  char Dest; // [esp+CA0h] [ebp-90h]
  int v49; // [esp+D2Ch] [ebp-4h]

  v5 = this;
  if ( sub_401929(8) )
    sub_401811(*((_DWORD *)dword_563908 + 1500));
  v6 = 0;
  result = (_DWORD *)(*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**((_DWORD **)v5 + 6) + 4))(a2, a3, 0, 0);
  if ( !result )
  {
    result = dword_563908;
    if ( *((_DWORD *)dword_563908 + 91)
      && (v8 = **((_DWORD **)dword_563908 + 91), a2 < *(_DWORD *)(v8 + 204))
      && a3 < *(_DWORD *)(v8 + 208) )
    {
      v9 = (char *)dword_563908 + 376;
      v10 = v5 + 44;
      do
      {
        v11 = *v9;
        *v10++ = *v9++;
      }
      while ( v11 );
      v12 = dword_563908;
      if ( *((_DWORD *)dword_563908 + 355) )
      {
        v13 = *((_DWORD *)dword_563908 + 355);
        if ( v13 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v13 + 36))(1);
          v12 = dword_563908;
        }
        v12[355] = 0;
      }
      v49 = 0;
      if ( operator new(0xD18u) )
        v6 = sub_4010FF(
               *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
               "Visit Web Site?",
               v5 - 4,
               a2,
               a3,
               7,
               0,
               1);
      v49 = -1;
      *((_DWORD *)dword_563908 + 355) = v6;
      sub_4024F0("Yes", 1, 0);
      result = (_DWORD *)sub_4024F0("No", 0, 0);
    }
    else
    {
      v14 = a2 + *((_DWORD *)dword_563908 + 60) - *((_DWORD *)v5 + 1);
      v15 = a3 + *((_DWORD *)dword_563908 + 61) - *((_DWORD *)v5 + 2);
      if ( a5 == 1 )
      {
        v16 = *((_DWORD *)dword_563908 + 1534);
        v17 = sub_4021E4(v14, v15, v45, v46);
        v18 = v17;
        if ( v17 <= 0 )
        {
          v24 = *((_DWORD *)dword_563908 + 1514);
          *((_DWORD *)dword_563908 + 2693) = sub_4017C6(v14, v15);
          result = dword_563908;
          if ( *((_DWORD *)dword_563908 + 2693) == -1 )
          {
            v25 = *((_DWORD *)dword_563908 + 1503);
            result = (_DWORD *)sub_40149C(v14, v15, v44);
            v42 = result;
            if ( (signed int)result > 0 )
            {
              v26 = result == (_DWORD *)1;
              result = dword_563908;
              if ( v26 )
              {
                *((_DWORD *)dword_563908 + 2692) = v44[0];
                *((_DWORD *)v5 + 9) = 1;
              }
              else
              {
                v27 = v14 + *((_DWORD *)v5 + 1) - *((_DWORD *)dword_563908 + 60);
                v28 = v15 + *((_DWORD *)v5 + 2) - *((_DWORD *)dword_563908 + 61);
                if ( *((_DWORD *)dword_563908 + 355) )
                {
                  v29 = *((_DWORD *)dword_563908 + 355);
                  if ( v29 )
                  {
                    (*(void (__stdcall **)(signed int))(*(_DWORD *)v29 + 36))(1);
                    result = dword_563908;
                  }
                  result[355] = 0;
                }
                v43 = 0;
                result = operator new(0xD18u);
                v49 = 2;
                if ( result )
                {
                  v30 = sub_402617(0x55u);
                  result = (_DWORD *)sub_4010FF(
                                       *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                                       v30,
                                       v5 - 4,
                                       v27,
                                       v28,
                                       3,
                                       0,
                                       1);
                  v31 = result;
                }
                else
                {
                  v31 = 0;
                }
                v32 = 0;
                v49 = -1;
                *((_DWORD *)dword_563908 + 355) = v31;
                if ( (signed int)v42 > 0 )
                {
                  v33 = dword_563908;
                  do
                  {
                    v34 = *(_DWORD **)(v33[1503] + 4 * v44[v32] + 4);
                    (*(void (__thiscall **)(_DWORD, char *))(*v34 + 136))(
                      *(_DWORD *)(v33[1503] + 4 * v44[v32] + 4),
                      &v47);
                    if ( (*(int (__thiscall **)(_DWORD *))(*v34 + 148))(v34) )
                    {
                      v35 = sub_402617(0xBu);
                      sprintf(&Dest, "%s (%s)", &v47, v35);
                    }
                    else
                    {
                      sprintf(&Dest, "%s", &v47);
                    }
                    sub_4024F0(&Dest, v44[v32], 0);
                    result = (_DWORD *)(*(int (__thiscall **)(_DWORD *))(*v34 + 16))(v34);
                    v33 = dword_563908;
                    if ( result == (_DWORD *)*(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)
                      && v34[14] >= 5001 )
                    {
                      v43 = 1;
                    }
                    ++v32;
                  }
                  while ( v32 < (signed int)v42 );
                  if ( v43 )
                  {
                    result = (_DWORD *)*((_DWORD *)dword_563908 + 1503);
                    v36 = result[*(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) + 1];
                    if ( v36 )
                    {
                      v37 = (*(int (**)(void))(*(_DWORD *)v36 + 228))();
                      v38 = *((_DWORD *)dword_563908 + 1508);
                      v39 = sub_40137F(*((_DWORD *)dword_563908 + 62) / 16, *((_DWORD *)dword_563908 + 63) / 16);
                      sub_4024F0(&Source, 0, 0);
                      v40 = *(_BYTE *)(v39 + v37) == 0;
                      v41 = sub_402617(0x1Fu);
                      result = (_DWORD *)sub_4024F0(v41, -1, v40);
                    }
                  }
                }
              }
            }
          }
          else
          {
            *((_DWORD *)v5 + 10) = 1;
          }
        }
        else if ( v17 == 1 )
        {
          result = (_DWORD *)v45[0];
          *((_DWORD *)dword_563908 + 2691) = v45[0];
          *((_DWORD *)v5 + 8) = 1;
        }
        else
        {
          v19 = dword_563908;
          if ( *((_DWORD *)dword_563908 + 355) )
          {
            v20 = *((_DWORD *)dword_563908 + 355);
            if ( v20 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v20 + 36))(1);
              v19 = dword_563908;
            }
            v19[355] = 0;
          }
          result = operator new(0xD18u);
          v49 = 1;
          if ( result )
          {
            v21 = sub_402617(0x54u);
            result = (_DWORD *)sub_4010FF(
                                 *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                                 v21,
                                 v5 - 4,
                                 a2,
                                 a3,
                                 1,
                                 0,
                                 1);
            v22 = result;
          }
          else
          {
            v22 = 0;
          }
          v23 = 0;
          v49 = -1;
          for ( *((_DWORD *)dword_563908 + 355) = v22; v23 < v18; ++v23 )
            result = (_DWORD *)sub_4024F0(v46[v23] + 72, v45[v23], 0);
        }
      }
    }
  }
  return result;
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 40149C: using guessed type _DWORD __stdcall sub_40149C(_DWORD, _DWORD, _DWORD);
// 4017C6: using guessed type _DWORD __stdcall sub_4017C6(_DWORD, _DWORD);
// 401811: using guessed type int __thiscall sub_401811(_DWORD);
// 401929: using guessed type _DWORD __stdcall sub_401929(_DWORD);
// 4021E4: using guessed type _DWORD __stdcall sub_4021E4(_DWORD, _DWORD, _DWORD, _DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);
// 43DF70: using guessed type int var_510[256];
// 43DF70: using guessed type int var_910[256];
// 43DF70: using guessed type int var_D10[256];

//----- (0043E680) --------------------------------------------------------
int sub_43E680()
{
  char v0; // bl
  int result; // eax
  _DWORD *v2; // ecx
  __int64 v3; // rax
  int v4; // edi
  int v5; // esi
  signed int v6; // ebp
  int v7; // eax
  _DWORD *v8; // esi
  _DWORD *v9; // ecx
  int v10; // eax
  int v11; // eax
  signed int v12; // eax
  _DWORD *v13; // ecx
  __int64 v14; // rax
  int v15; // edx
  bool v16; // sf
  int v17; // [esp+4h] [ebp-4h]

  v0 = 0;
  v17 = 0;
  result = (int)dword_563908;
  if ( !*((_DWORD *)dword_563908 + 6898) )
    goto LABEL_55;
  if ( (*(int (__thiscall **)(_DWORD))(**((_DWORD **)dword_563908 + 6898) + 148))(*((_DWORD *)dword_563908 + 6898)) )
    goto LABEL_54;
  v2 = dword_563908;
  HIDWORD(v3) = *((_DWORD *)dword_563908 + 6898);
  if ( *(_DWORD *)(HIDWORD(v3) + 156) < 0 )
    goto LABEL_30;
  v4 = 0;
  while ( 1 )
  {
    HIDWORD(v3) = *(_DWORD *)(v2[6898] + 72);
    LOWORD(v3) = *(_WORD *)(HIDWORD(v3) + 2 * v4 + 1410);
    if ( (signed __int16)v3 <= 0 )
      goto LABEL_16;
    v5 = (signed __int16)v3 - 1;
    v6 = 0;
    if ( *((_DWORD *)dword_56390C + v5 + 1548) )
      v6 = 1;
    if ( v4 )
    {
      if ( v4 != 1 )
        goto LABEL_15;
      LODWORD(v3) = sub_401929(3);
    }
    else
    {
      if ( sub_401929(2) )
        break;
      LODWORD(v3) = sub_401929(1);
    }
    if ( (_DWORD)v3 )
      break;
    v2 = dword_563908;
LABEL_15:
    if ( v6 )
      goto LABEL_19;
LABEL_16:
    if ( ++v4 >= 2 )
      goto LABEL_30;
  }
  v2 = dword_563908;
LABEL_19:
  if ( v2[1501] )
  {
    v7 = sub_401311(v2[1501]);
    v2 = dword_563908;
    if ( v7 )
    {
      (*(void (__stdcall **)(int))(**((_DWORD **)dword_563908 + 6898) + 252))(v4);
      v2 = dword_563908;
    }
  }
  v3 = (signed int)abs(v2[v5 + 6902]);
  LODWORD(v3) = abs((_DWORD)v3);
  if ( (signed int)v3 <= 5100 )
  {
    HIDWORD(v3) = v2[1507];
    LODWORD(v3) = *(_DWORD *)(HIDWORD(v3) + 4 * v3 + 8008);
    if ( (_DWORD)v3 )
    {
      v8 = (_DWORD *)(v3 + 260);
      if ( (*(_DWORD *)(v3 + 260) ^ 0x12345678) <= 50 )
      {
        LODWORD(v3) = sub_4011E5(50);
        v0 = 1;
      }
      else
      {
        LODWORD(v3) = v3 + 260;
      }
      *v8 = *(_DWORD *)v3;
      if ( v0 & 1 )
        nullsub_2(&v17);
      v2 = dword_563908;
    }
  }
LABEL_30:
  v2[6918] = 0;
  v9 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6939)
    && (v10 = sub_401D39(dword_563908, HIDWORD(v3)), v9 = dword_563908, abs(v10 - *((_DWORD *)dword_563908 + 6944)) > 50)
    && *((_DWORD *)dword_56390C + *((_DWORD *)dword_563908 + 6938) + 1537) )
  {
    if ( *((_DWORD *)dword_563908 + 1501) )
    {
      sub_401AB4(*((_DWORD *)dword_563908 + 1501));
      v9 = dword_563908;
    }
    v9[6918] = 0xFFFF;
  }
  else
  {
    if ( *((_DWORD *)dword_56390C + 1606) || (v11 = sub_401929(1), v9 = dword_563908, v11) )
    {
      *((_DWORD *)dword_563908 + 6918) = abs(sub_402941(v9[1500]));
      *((_DWORD *)dword_563908 + 6921) = 69;
    }
    else
    {
      if ( sub_401929(2) )
      {
        *((_DWORD *)dword_563908 + 6918) = abs(*((_DWORD *)dword_563908 + 6902));
        goto LABEL_53;
      }
      if ( sub_401929(3) )
      {
        *((_DWORD *)dword_563908 + 6918) = abs(*((_DWORD *)dword_563908 + 6903));
        goto LABEL_53;
      }
      if ( sub_401929(4) )
      {
        *((_DWORD *)dword_563908 + 6918) = abs(*((_DWORD *)dword_563908 + 6904));
        goto LABEL_53;
      }
      v12 = 0;
      v13 = (char *)dword_56390C + 6192;
      while ( !*v13 )
      {
        ++v12;
        ++v13;
        if ( v12 >= 16 )
          goto LABEL_53;
      }
      *((_DWORD *)dword_563908 + 6921) = v12 + 11;
      v14 = *((signed int *)dword_563908 + v12 + 6902);
      *((_DWORD *)dword_563908 + 6918) = (HIDWORD(v14) ^ v14) - HIDWORD(v14);
    }
    if ( !*((_DWORD *)dword_563908 + 6918) && *((_DWORD *)dword_563908 + 1501) )
      sub_401AB4(*((_DWORD *)dword_563908 + 1501));
  }
LABEL_53:
  (*(void (**)(void))(**((_DWORD **)dword_563908 + 6898) + 68))();
LABEL_54:
  result = (int)dword_563908;
LABEL_55:
  if ( *((_DWORD *)dword_56390C + 1541) )
  {
    *(_DWORD *)(result + 27580) += *(_DWORD *)(result + 10824) * *(_DWORD *)(result + 59358);
    result = 1000 * *(_DWORD *)((char *)dword_563908 + 59354);
    if ( result >= *((_DWORD *)dword_563908 + 6895) )
      result = *((_DWORD *)dword_563908 + 6895);
    *((_DWORD *)dword_563908 + 6895) = result;
  }
  else if ( *((_DWORD *)dword_56390C + 1542) )
  {
    v15 = -4 * *(_DWORD *)(result + 10824) * *(_DWORD *)(result + 59358);
    v16 = v15 + *(_DWORD *)(result + 27580) < 0;
    *(_DWORD *)(result + 27580) += v15;
    result = (int)dword_563908;
    *((_DWORD *)dword_563908 + 6895) &= v16 - 1;
  }
  return result;
}
// 4011E5: using guessed type _DWORD __stdcall sub_4011E5(_DWORD);
// 401311: using guessed type int __thiscall sub_401311(_DWORD);
// 401929: using guessed type _DWORD __stdcall sub_401929(_DWORD);
// 401AB4: using guessed type int __thiscall sub_401AB4(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402941: using guessed type int __thiscall sub_402941(_DWORD);
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);

//----- (0043EB20) --------------------------------------------------------
void __thiscall sub_43EB20(_DWORD *this, int a2)
{
  _DWORD *v2; // ebp
  bool v3; // zf
  int v4; // ecx
  int v5; // eax
  int v6; // ebx
  _DWORD *v7; // edx
  int v8; // esi
  int v9; // edi
  int v10; // ecx
  signed __int16 *v11; // eax
  int v12; // ecx
  int v13; // esi
  int v14; // edi
  int v15; // eax
  int v16; // edi
  signed int v17; // eax
  int v18; // ST14_4
  _DWORD *v19; // esi
  int v20; // eax
  _DWORD *v21; // ebx
  int v22; // edi
  int v23; // ebp
  int v24; // ecx
  int v25; // ST18_4
  int v26; // ST08_4
  int v27; // eax
  int v28; // ebp
  int (__thiscall *v29)(_DWORD *); // eax
  int v30; // esi
  int v31; // eax
  int v32; // eax
  int v33; // eax
  int v34; // ST14_4
  int v35; // eax
  signed __int16 *v36; // esi
  _WORD *v37; // esi
  int v38; // edi
  int v39; // ecx
  int v40; // edi
  int v41; // eax
  int v42; // ecx
  int v43; // eax
  int v44; // eax
  _DWORD *v45; // edi
  int v46; // eax
  int v47; // eax
  signed int v48; // ecx
  int v49; // ST14_4
  int v50; // eax
  int v51; // ecx
  int v52; // eax
  int v53; // ST14_4
  int v54; // ST1C_4
  int v55; // eax
  int v56; // eax
  int v57; // ecx
  int v58; // esi
  int v59; // ecx
  BOOL v60; // ST1C_4
  int v61; // eax
  int v62; // eax
  int v63; // eax
  int v64; // eax
  int v65; // ST14_4
  int v66; // ecx
  int v67; // eax
  int v68; // esi
  _DWORD *v69; // eax
  int v70; // edi
  int v71; // ebx
  int v72; // ecx
  int v73; // ecx
  int v74; // edi
  int v75; // eax
  char *v76; // eax
  char v77; // cl
  char *v78; // eax
  char v79; // bl
  char *v80; // eax
  char v81; // cl
  char *v82; // eax
  char v83; // bl
  _DWORD *v84; // eax
  int v85; // edi
  int v86; // ebx
  int v87; // ecx
  int v88; // edi
  _DWORD *v89; // ebx
  int v90; // eax
  int v91; // eax
  char v92; // al
  int v93; // eax
  int v94; // eax
  bool v95; // sf
  unsigned __int8 v96; // of
  int v97; // edx
  signed int v98; // [esp-8h] [ebp-121Ch]
  int v99; // [esp+14h] [ebp-1200h]
  signed __int16 *v100; // [esp+18h] [ebp-11FCh]
  int v101; // [esp+1Ch] [ebp-11F8h]
  _DWORD *v102; // [esp+20h] [ebp-11F4h]
  int v103; // [esp+24h] [ebp-11F0h]
  char v104[4]; // [esp+FC4h] [ebp-250h]
  char v105; // [esp+1003h] [ebp-211h]
  int v106; // [esp+1004h] [ebp-210h]
  __int16 v107; // [esp+1008h] [ebp-20Ch]
  char v108; // [esp+100Ah] [ebp-20Ah]
  char v109; // [esp+1083h] [ebp-191h]
  int v110; // [esp+1084h] [ebp-190h]
  __int16 v111; // [esp+1088h] [ebp-18Ch]
  char Dest; // [esp+1104h] [ebp-110h]
  int v113; // [esp+1210h] [ebp-4h]

  v2 = this;
  v3 = this[9] == 0;
  v102 = this;
  if ( !v3 )
  {
    this[9] = 0;
    if ( *((_DWORD *)dword_563908 + 2691) >= 0 )
    {
      v4 = *((_DWORD *)dword_563908 + 1534);
      v5 = sub_4028C9(*((_DWORD *)dword_563908 + 2691), &v99);
      v6 = v5;
      if ( v5 )
      {
        v7 = dword_563908;
        if ( *(_DWORD *)(v5 + 252) || *(_DWORD *)((char *)dword_563908 + 57742) )
        {
          v8 = *((_DWORD *)dword_563908 + 2688);
          v9 = *((_DWORD *)dword_563908 + 2689);
          if ( !*((_DWORD *)dword_563908 + 2687) || *((_DWORD *)dword_563918 + 2348) == 3 )
          {
            v10 = *((_DWORD *)dword_563908 + 1534);
            v11 = (signed __int16 *)sub_401B72(*((_DWORD *)dword_563908 + 2691));
            v7 = dword_563908;
            if ( v11 )
            {
              v8 = *v11 - *((_DWORD *)dword_563908 + 60);
              v9 = v11[1] - *((_DWORD *)dword_563908 + 61);
            }
          }
          if ( v7[355] )
          {
            v12 = v7[355];
            if ( v12 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v12 + 36))(1);
              v7 = dword_563908;
            }
            v7[355] = 0;
          }
          v100 = (signed __int16 *)operator new(0xD18u);
          v113 = 0;
          if ( v100 )
            v13 = sub_4010FF(
                    *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                    v6 + 72,
                    v2,
                    v8,
                    v9,
                    0,
                    *((_DWORD *)dword_563908 + 2691),
                    0);
          else
            v13 = 0;
          *((_DWORD *)dword_563908 + 355) = v13;
          v3 = *((_DWORD *)dword_563908 + 6898) == 0;
          v113 = -1;
          if ( !v3 && (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() != 4 )
          {
            v3 = *(_DWORD *)(v6 + 252) == 0;
            v104[0] = 0;
            if ( v3 )
              strcpy(v104, " (unqualified)");
            v14 = sub_4025EA(*(_DWORD *)(v6 + 128));
            v15 = sub_402676(*(_DWORD *)(v6 + 128));
            if ( v15 + v99 > v14 )
            {
              v16 = v14 - v15;
              if ( v16 > 0 )
              {
                sprintf(&Dest, "Pick up ~Max(%d)", v16);
                sub_4024F0(&Dest, 1, 0);
              }
            }
            sprintf(&Dest, "Pick up ~All (%d)%s", v99, v104);
            sub_4024F0(&Dest, 2, 0);
            if ( v99 > 1 )
            {
              sprintf(&Dest, "Pick up ~One");
              sub_4024F0(&Dest, 0, 0);
              v17 = v99;
              if ( v99 > 10 )
              {
                sprintf(&Dest, "Pick up ~Ten");
                sub_4024F0(&Dest, 3, 0);
                v17 = v99;
                if ( v99 > 50 )
                {
                  sprintf(&Dest, "Pick up ~Fifty");
                  sub_4024F0(&Dest, 4, 0);
                  v17 = v99;
                }
              }
              if ( v17 > 5 )
              {
                sprintf(&Dest, "Pick up ~Half (%d)", v17 / 2);
                sub_4024F0(&Dest, 5, 0);
              }
            }
          }
          v18 = sub_402617(0xDu);
          sub_4024F0(v18, 6, 0);
        }
      }
    }
    return;
  }
  if ( this[10] )
  {
    this[10] = 0;
    v19 = dword_563908;
    v20 = *((_DWORD *)dword_563908 + 2692);
    if ( v20 < 0 )
      return;
    v21 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * v20 + 4);
    if ( !v21 )
      return;
    v22 = *((_DWORD *)dword_563908 + 2688);
    v23 = *((_DWORD *)dword_563908 + 2689);
    if ( !*((_DWORD *)dword_563908 + 2687) || *((_DWORD *)dword_563918 + 2348) == 3 )
    {
      (*(void (__thiscall **)(_DWORD *, signed __int16 **, int *, int *))(*v21 + 84))(v21, &v100, &v101, &v99);
      v19 = dword_563908;
      v22 = (signed int)v100 / 10000 - *((_DWORD *)dword_563908 + 60);
      v23 = v101 / 10000 - *((_DWORD *)dword_563908 + 61);
    }
    if ( v19[355] )
    {
      v24 = v19[355];
      if ( v24 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v24 + 36))(1);
        v19 = dword_563908;
      }
      v19[355] = 0;
    }
    v100 = (signed __int16 *)operator new(0xD18u);
    v113 = 1;
    if ( v100 )
    {
      v25 = *((_DWORD *)dword_563908 + 2692);
      v26 = (int)v102;
      v27 = (*(int (__thiscall **)(_DWORD *, char *))(*v21 + 136))(v21, &Dest);
      v28 = sub_4010FF(
              *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
              v27,
              v26,
              v22,
              v23,
              2,
              v25,
              1);
    }
    else
    {
      v28 = 0;
    }
    *((_DWORD *)dword_563908 + 355) = v28;
    v29 = *(int (__thiscall **)(_DWORD *))(*v21 + 16);
    v113 = -1;
    v30 = v29(v21);
    if ( *((_DWORD *)dword_563908 + 6898)
      && (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4 )
    {
      if ( v30 != -1 )
      {
        v31 = sub_402617(0x4Fu);
        sub_4024F0(v31, 13, 0);
        v32 = sub_402617(0xEu);
        sub_4024F0(v32, 9, 0);
        v33 = sub_402617(0x3Bu);
        sub_4024F0(v33, 11, 0);
        if ( v21[14] >= 5001 )
        {
          v34 = sub_402617(0x3Cu);
          sub_4024F0(v34, 6, 0);
        }
        return;
      }
LABEL_76:
      v49 = sub_402617(0xDu);
      sub_4024F0(v49, 6, 0);
      return;
    }
    if ( (*(int (**)(void))(*(_DWORD *)v21[18] + 4))() == 5 )
    {
      v35 = (*(int (__thiscall **)(_DWORD *))(*v21 + 204))(v21);
      v36 = (signed __int16 *)v21[18];
      v101 = v35;
      v100 = v36;
      if ( v35 == -1 || v35 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) )
      {
        v102 = 0;
        v99 = 0;
        v37 = v36 + 938;
        do
        {
          if ( *((_BYTE *)v37 - 60) && (*v37 <= 0 || sub_402676((signed __int16)*v37) >= *((_DWORD *)v37 - 4)) )
          {
            v38 = *((_DWORD *)dword_563908 + 78);
            v39 = *(_DWORD *)(v38 + 60);
            v40 = v38 + 60;
            if ( v39 >= *((_DWORD *)v37 - 3) )
            {
              v41 = sub_401FAF(dword_563908);
              if ( sub_494C40(v37 - 94, v40, v41) )
              {
                if ( !*((_BYTE *)v37 - 124)
                  || (v42 = *((_DWORD *)dword_563908 + 1503),
                      v43 = sub_4016FE(&v103, *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100)),
                      sub_4950E0(v37 - 62, (int)&v103, v43)) )
                {
                  sub_4024F0(v37 - 30, v99 + 18, 0);
                  v102 = (_DWORD *)1;
                }
              }
            }
          }
          v37 += 102;
          v96 = __OFSUB__(v99 + 1, 16);
          v95 = v99++ - 15 < 0;
        }
        while ( v95 ^ v96 );
        if ( v102 )
          sub_4024F0(&Source, 0, 0);
        if ( *(_WORD *)(v21[18] + 1050) >= 0 )
        {
          v44 = sub_402617(0x22u);
          sub_4024F0(v44, 10, 0);
        }
        v36 = v100;
        v35 = v101;
      }
      if ( *(_WORD *)(v21[18] + 1052) )
      {
        v45 = dword_563908;
        if ( v35 == -1 )
        {
          v46 = sub_401FAF(dword_563908);
          if ( sub_494C40(v36 + 771, v45[78] + 60, v46) )
            sub_4024F0("Take ~Ownership", 17, 0);
        }
        else if ( v35 != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) )
        {
          v47 = sub_401FAF(dword_563908);
          if ( sub_494C40(v36 + 803, v45[78] + 60, v47) )
          {
            v48 = 1;
            if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v21[35])) < 1000 * v36[752] )
              v48 = 0;
            sub_4024F0("Steal ~Ownership", 17, v48);
          }
        }
      }
      goto LABEL_76;
    }
    if ( v30 == -1 )
    {
      v50 = (*(int (__thiscall **)(_DWORD *))(*v21 + 216))(v21);
      v51 = v21[18];
      if ( v50 )
      {
        if ( *(_WORD *)(v51 + 1052) )
        {
          v54 = v50;
          v55 = sub_402617(0xCu);
          sprintf(v104, "%s (%s)", v55, v54);
          sub_4024F0(v104, 7, 1);
        }
      }
      else
      {
        if ( *(_WORD *)(v51 + 1052) )
        {
          v52 = sub_402617(0xCu);
          sub_4024F0(v52, 7, 0);
        }
        if ( *(_WORD *)(v21[18] + 1050) >= 0 )
        {
          v53 = sub_402617(0x22u);
          sub_4024F0(v53, 10, 0);
        }
      }
      goto LABEL_76;
    }
    v56 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
    if ( v30 == v56 )
    {
      if ( *((_DWORD *)dword_563908 + 2692) >= 5001 )
      {
        v57 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v56 + 4);
        if ( v57 )
        {
          v58 = (*(int (**)(void))(*(_DWORD *)v57 + 228))();
          v59 = *((_DWORD *)dword_563908 + 1508);
          v60 = *(_BYTE *)(sub_40137F(*((_DWORD *)dword_563908 + 62) / 16, *((_DWORD *)dword_563908 + 63) / 16) + v58) == 0;
          v61 = sub_402617(0x1Fu);
          sub_4024F0(v61, 8, v60);
        }
      }
      v62 = sub_402617(0x3Bu);
      sub_4024F0(v62, 11, 0);
      sub_4024F0(&Source, 0, 0);
      v98 = 12;
      v63 = sub_402617(0x9Au);
    }
    else
    {
      v64 = sub_402617(0xEu);
      sub_4024F0(v64, 9, 0);
      v98 = 11;
      v63 = sub_402617(0x3Bu);
    }
    sub_4024F0(v63, v98, 0);
    if ( v21[14] >= 5001 )
    {
      v65 = sub_402617(0x3Cu);
      sub_4024F0(v65, 6, 0);
    }
  }
  else
  {
    if ( !this[11] )
      return;
    this[11] = 0;
    if ( !*((_DWORD *)dword_563908 + 6898) )
      return;
    if ( (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4 )
      return;
    v66 = *((_DWORD *)dword_563908 + 1514);
    v67 = sub_401780(*((_DWORD *)dword_563908 + 2693));
    v68 = v67;
    if ( !v67 )
      return;
    if ( (*(int (**)(void))(**(_DWORD **)(v67 + 4) + 4))() == 2 )
    {
      v69 = dword_563908;
      v70 = *((_DWORD *)dword_563908 + 2688);
      v71 = *((_DWORD *)dword_563908 + 2689);
      if ( !*((_DWORD *)dword_563908 + 2687) || *((_DWORD *)dword_563918 + 2348) == 3 )
      {
        v72 = *(_DWORD *)(v68 + 4);
        v70 = *(signed __int16 *)(v72 + 40) - *((_DWORD *)dword_563908 + 60);
        v71 = *(signed __int16 *)(v72 + 42) - *((_DWORD *)dword_563908 + 61);
      }
      if ( *((_DWORD *)dword_563908 + 355) )
      {
        v73 = *((_DWORD *)dword_563908 + 355);
        if ( v73 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v73 + 36))(1);
          v69 = dword_563908;
        }
        v69[355] = 0;
      }
      v100 = (signed __int16 *)operator new(0xD18u);
      v113 = 2;
      if ( v100 )
        v74 = sub_4010FF(
                *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                *(_DWORD *)(v68 + 8) + 8,
                v2,
                v70,
                v71,
                5,
                *((_DWORD *)dword_563908 + 2693),
                0);
      else
        v74 = 0;
      *((_DWORD *)dword_563908 + 355) = v74;
      v75 = *(_DWORD *)(v68 + 8);
      v3 = *(_DWORD *)(v75 + 60) == 0;
      v113 = -1;
      if ( v3 )
      {
        v110 = 1701859198;
        v111 = 110;
        v106 = 1869366142;
        v107 = 25971;
        v108 = 0;
      }
      else
      {
        v110 = 7229310;
        v106 = 1717993039;
        LOBYTE(v107) = 0;
      }
      if ( sub_40226B(v75) )
      {
        if ( sub_401127(v68) )
        {
          sub_4024F0(&v110, 14, 0);
          if ( !*(_DWORD *)(*(_DWORD *)(v68 + 8) + 112) )
            sub_4024F0(&v106, 15, 0);
          return;
        }
        v76 = &v109;
        do
          v77 = (v76++)[1];
        while ( v77 );
        *(_DWORD *)v76 = 1702111264;
        *((_DWORD *)v76 + 1) = 1919905901;
        *((_DWORD *)v76 + 2) = 695824993;
        v76[12] = 0;
        v78 = &v105;
        do
          v79 = (v78++)[1];
        while ( v79 );
        *(_DWORD *)v78 = 1702111264;
        *((_DWORD *)v78 + 1) = 1919905901;
        *((_DWORD *)v78 + 2) = 695824993;
        v78[12] = 0;
      }
      else
      {
        v80 = &v109;
        do
          v81 = (v80++)[1];
        while ( v81 );
        *(_DWORD *)v80 = 1853171744;
        *((_DWORD *)v80 + 1) = 1818326385;
        *((_DWORD *)v80 + 2) = 1701406313;
        *((_WORD *)v80 + 6) = 10596;
        v80[14] = 0;
        v82 = &v105;
        do
          v83 = (v82++)[1];
        while ( v83 );
        *(_DWORD *)v82 = 1853171744;
        *((_DWORD *)v82 + 1) = 1818326385;
        *((_DWORD *)v82 + 2) = 1701406313;
        *((_WORD *)v82 + 6) = 10596;
        v82[14] = 0;
      }
      sub_4024F0(&v110, 14, 1);
      if ( !*(_DWORD *)(*(_DWORD *)(v68 + 8) + 112) )
        sub_4024F0(&v106, 15, 1);
    }
    else
    {
      if ( (*(int (**)(void))(**(_DWORD **)(v68 + 4) + 4))() != 3 )
        return;
      v84 = dword_563908;
      v85 = *((_DWORD *)dword_563908 + 2688);
      v86 = *((_DWORD *)dword_563908 + 2689);
      if ( !*((_DWORD *)dword_563908 + 2687) || *((_DWORD *)dword_563918 + 2348) == 3 )
      {
        v85 = *(signed __int16 *)(v68 + 10) - *((_DWORD *)dword_563908 + 60);
        v86 = *(signed __int16 *)(v68 + 12) - *((_DWORD *)dword_563908 + 61);
      }
      if ( *((_DWORD *)dword_563908 + 355) )
      {
        v87 = *((_DWORD *)dword_563908 + 355);
        if ( v87 )
        {
          (*(void (__stdcall **)(signed int))(*(_DWORD *)v87 + 36))(1);
          v84 = dword_563908;
        }
        v84[355] = 0;
      }
      v100 = (signed __int16 *)operator new(0xD18u);
      v113 = 3;
      if ( v100 )
        v88 = sub_4010FF(
                *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                *(_DWORD *)(v68 + 16) + 8,
                v2,
                v85,
                v86,
                6,
                *((_DWORD *)dword_563908 + 2693),
                0);
      else
        v88 = 0;
      *((_DWORD *)dword_563908 + 355) = v88;
      v89 = dword_563908;
      v113 = -1;
      v90 = sub_401FAF(dword_563908);
      v3 = sub_494C40((void *)(*(_DWORD *)(v68 + 16) + 164), v89[78] + 60, v90) == 0;
      v91 = *(_DWORD *)(v68 + 16);
      if ( v3 )
      {
        if ( *(_BYTE *)(v91 + 74) )
          sub_4024F0("~Pick up (unqualified)", 16, 1);
        else
          sub_4024F0("~Capture (unqualified)", 16, 1);
      }
      else
      {
        v92 = *(_BYTE *)(v91 + 74);
        if ( v92 )
        {
          if ( v92 == 1 )
          {
            v93 = *((_DWORD *)dword_563908 + 6897);
            if ( *(_WORD *)(v68 + 14) == *(_WORD *)(v93 + 100) )
            {
              sub_4024F0("~Pick up (team owned)", 16, 1);
              return;
            }
            v94 = *(_DWORD *)(v93 + 120);
            v96 = __OFSUB__(v94, *(_DWORD *)((char *)dword_563908 + 58306));
            v95 = v94 - *(_DWORD *)((char *)dword_563908 + 58306) < 0;
          }
          else
          {
            if ( v92 != 2 )
              return;
            v97 = *(_DWORD *)(*((_DWORD *)dword_563908 + 6897) + 120);
            v96 = __OFSUB__(v97, *(_DWORD *)((char *)dword_563908 + 58306));
            v95 = v97 - *(_DWORD *)((char *)dword_563908 + 58306) < 0;
          }
          if ( v95 ^ v96 )
            sub_4024F0("~Pick up", 16, 0);
          else
            sub_4024F0("~Pick up (too many)", 16, 1);
        }
        else if ( *(_WORD *)(v68 + 14) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) )
        {
          sub_4024F0("~Capture (team owned)", 16, 1);
        }
        else
        {
          sub_4024F0("~Capture", 16, 0);
        }
      }
    }
  }
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401127: using guessed type int __thiscall sub_401127(_DWORD);
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 4016FE: using guessed type _DWORD __stdcall sub_4016FE(_DWORD, _DWORD);
// 401780: using guessed type _DWORD __stdcall sub_401780(_DWORD);
// 401B72: using guessed type _DWORD __stdcall sub_401B72(_DWORD);
// 401FAF: using guessed type int __thiscall sub_401FAF(_DWORD);
// 40226B: using guessed type _DWORD __stdcall sub_40226B(_DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 4028C9: using guessed type _DWORD __stdcall sub_4028C9(_DWORD, _DWORD);

//----- (0043FD30) --------------------------------------------------------
int sub_43FD30()
{
  return 0;
}

//----- (0043FD40) --------------------------------------------------------
int __thiscall sub_43FD40(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  sub_4013E3(this[6], this + 2, *((_DWORD *)dword_563908 + 3105), *((_DWORD *)dword_563908 + 3107));
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[6] + 64))(v1 + 2);
  sub_4014D8(dword_563908);
  return (*(int (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[6] + 68))(0, 0, -1, -1);
}
// 4013E3: using guessed type _DWORD __stdcall sub_4013E3(_DWORD, _DWORD, _DWORD, _DWORD);
// 4014D8: using guessed type int __thiscall sub_4014D8(_DWORD);

//----- (0043FDB0) --------------------------------------------------------
int sub_43FDB0()
{
  return 0;
}

//----- (0043FDC0) --------------------------------------------------------
HINSTANCE __thiscall sub_43FDC0(int this, HINSTANCE a2, int a3, HINSTANCE a4)
{
  HINSTANCE result; // eax
  int v5; // ebp
  _DWORD *v6; // esi
  int v7; // ecx
  int v8; // esi
  int v9; // ebx
  int v10; // ecx
  int v11; // ecx
  int v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // eax
  int v16; // ecx
  int v17; // ecx
  int v18; // ecx
  HINSTANCE v19; // esi
  _DWORD *v20; // ecx
  _DWORD *v21; // esi
  int v22; // edi
  int v23; // eax
  _DWORD *v24; // eax
  int v25; // ecx
  int v26; // ecx
  int v27; // ecx
  int v28; // ecx
  int v29; // ecx
  int v30; // ecx
  signed int v31; // [esp+14h] [ebp-214h]
  char Dest; // [esp+18h] [ebp-210h]
  char Source; // [esp+118h] [ebp-110h]
  int v34; // [esp+224h] [ebp-4h]

  result = a2;
  v5 = this;
  switch ( (unsigned int)a2 )
  {
    case 0u:
      result = a4;
      switch ( (unsigned int)a4 )
      {
        case 0u:
          (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 32))(a3, 1);
          goto LABEL_15;
        case 1u:
          v7 = *((_DWORD *)dword_563908 + 1534);
          v8 = sub_4028C9(a3, &v31);
          v9 = sub_402676(*(_DWORD *)(v8 + 128));
          result = (HINSTANCE)(sub_4025EA(*(_DWORD *)(v8 + 128)) - v9);
          if ( (signed int)result <= 0 )
            return result;
          (*(void (__stdcall **)(int, HINSTANCE))(*(_DWORD *)dword_56391C + 32))(a3, result);
          goto LABEL_15;
        case 2u:
          v10 = *((_DWORD *)dword_563908 + 1534);
          sub_4028C9(a3, &v31);
          (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 32))(a3, v31);
          goto LABEL_15;
        case 3u:
          (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 32))(a3, 10);
          result = (HINSTANCE)dword_563908;
          if ( *((_DWORD *)dword_563908 + 363) )
            result = (HINSTANCE)sub_4A7120(*((_DWORD **)dword_563908 + 363), 0, 0, 0, 0);
          return result;
        case 4u:
          (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 32))(a3, 50);
          goto LABEL_15;
        case 5u:
          v11 = *((_DWORD *)dword_563908 + 1534);
          sub_4028C9(a3, &v31);
          (*(void (__stdcall **)(int, int))(*(_DWORD *)dword_56391C + 32))(a3, v31 / 2);
LABEL_15:
          result = (HINSTANCE)dword_563908;
          if ( *((_DWORD *)dword_563908 + 363) )
            result = (HINSTANCE)sub_4A7120(*((_DWORD **)dword_563908 + 363), 0, 0, 0, 0);
          break;
        case 6u:
          v12 = *((_DWORD *)dword_563908 + 1534);
          result = (HINSTANCE)sub_4028C9(a3, &v31);
          if ( result )
          {
            v13 = *((_DWORD *)dword_563908 + 1509);
            result = (HINSTANCE)sub_4020D1(1, *((_DWORD *)result + 32));
          }
          break;
        default:
          return result;
      }
      return result;
    case 1u:
      result = (HINSTANCE)dword_563908;
      *((_DWORD *)dword_563908 + 2691) = a4;
      *(_DWORD *)(this + 36) = 1;
      return result;
    case 2u:
      result = (HINSTANCE)*((_DWORD *)dword_563908 + 1503);
      v21 = (_DWORD *)*((_DWORD *)result + a3 + 1);
      if ( v21 )
      {
        result = a4;
        switch ( (unsigned int)a4 )
        {
          case 6u:
            v30 = *((_DWORD *)dword_563908 + 1509);
            result = (HINSTANCE)sub_4020D1(2, *(_DWORD *)(v21[18] + 1076));
            break;
          case 7u:
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
            if ( result == (HINSTANCE)-1 )
            {
              result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 216))(v21);
              if ( !result )
              {
                result = (HINSTANCE)v21[18];
                if ( *((_WORD *)result + 526) )
                  result = (HINSTANCE)(*(int (__stdcall **)(int))(*(_DWORD *)dword_56391C + 40))(a3);
              }
            }
            break;
          case 8u:
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
            if ( result != (HINSTANCE)-1 )
              return (HINSTANCE)(*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96));
            break;
          case 9u:
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
            if ( (signed int)result >= 0 )
            {
              v26 = *((_DWORD *)dword_563908 + 1504);
              result = (HINSTANCE)sub_40105A(result);
              if ( result )
              {
                sprintf(&Dest, ":%s:", result + 8);
                v27 = *((_DWORD *)dword_563908 + 1509);
                result = (HINSTANCE)sub_4012D0(&Dest);
              }
            }
            break;
          case 0xAu:
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
            if ( result == (HINSTANCE)-1 )
              result = (HINSTANCE)(*(int (__stdcall **)(int))(*(_DWORD *)dword_56391C + 48))(a3);
            break;
          case 0xBu:
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
            if ( (signed int)result >= 0 )
            {
              v28 = *((_DWORD *)dword_563908 + 1504);
              result = (HINSTANCE)sub_40105A(result);
              if ( result )
              {
                sprintf(&Source, ":%s:?info", result + 8);
                v29 = *((_DWORD *)dword_563908 + 1509);
                result = (HINSTANCE)sub_402793(&Source, 0);
              }
            }
            break;
          case 0xCu:
            result = (HINSTANCE)sub_401CEE(dword_563908);
            break;
          case 0xDu:
            result = (HINSTANCE)(*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))();
            if ( result == (HINSTANCE)4 )
            {
              result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v21 + 16))(v21);
              if ( (signed int)result >= 0 )
                result = (HINSTANCE)(*(int (__stdcall **)(HINSTANCE, signed int))(*(_DWORD *)dword_56391C + 148))(
                                      result,
                                      -1);
            }
            break;
          case 0x11u:
            result = (HINSTANCE)(*(int (__stdcall **)(int))(*(_DWORD *)dword_56391C + 52))(a3);
            break;
          case 0x12u:
          case 0x13u:
          case 0x14u:
          case 0x15u:
          case 0x16u:
          case 0x17u:
          case 0x18u:
          case 0x19u:
          case 0x1Au:
          case 0x1Bu:
          case 0x1Cu:
          case 0x1Du:
          case 0x1Eu:
          case 0x1Fu:
          case 0x20u:
          case 0x21u:
            v22 = (int)a4 - 18;
            if ( (*(int (**)(void))(*(_DWORD *)v21[18] + 4))() == 5
              && (v23 = v21[18] + 204 * v22, *(_WORD *)(v23 + 1880)) )
            {
              sprintf(&Dest, "Confirm Transaction (%s)", v23 + 1816);
              v24 = dword_563908;
              if ( *((_DWORD *)dword_563908 + 355) )
              {
                v25 = *((_DWORD *)dword_563908 + 355);
                if ( v25 )
                {
                  (*(void (__stdcall **)(signed int))(*(_DWORD *)v25 + 36))(1);
                  v24 = dword_563908;
                }
                v24[355] = 0;
              }
              v31 = (signed int)operator new(0x1644u);
              v34 = 0;
              if ( v31 )
              {
                result = (HINSTANCE)sub_402504(
                                      0,
                                      *((_DWORD *)dword_563908 + 1518),
                                      v5,
                                      &Dest,
                                      "Yes,No",
                                      v22 + 8,
                                      a3,
                                      0,
                                      0);
                *((_DWORD *)dword_563908 + 355) = result;
              }
              else
              {
                result = 0;
                *((_DWORD *)dword_563908 + 355) = 0;
              }
            }
            else
            {
              result = (HINSTANCE)(*(int (__stdcall **)(int, int))(*(_DWORD *)dword_56391C + 124))(a3, v22);
            }
            break;
          default:
            return result;
        }
      }
      return result;
    case 3u:
      result = a4;
      if ( a4 == (HINSTANCE)-1 )
        return (HINSTANCE)(*(int (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 40))(*(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96));
      *((_DWORD *)dword_563908 + 2692) = a4;
      *(_DWORD *)(this + 40) = 1;
      return result;
    case 4u:
      v6 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * (_DWORD)a4 + 4);
      if ( v6 )
      {
        result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v6 + 16))(v6);
        if ( result == (HINSTANCE)-1 )
        {
          result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v6 + 148))(v6);
          if ( !result )
          {
            result = (HINSTANCE)(*(int (__thiscall **)(_DWORD *))(*v6 + 216))(v6);
            if ( !result )
            {
              result = (HINSTANCE)v6[18];
              if ( *((_WORD *)result + 526) )
                result = (HINSTANCE)(*(int (__stdcall **)(HINSTANCE))(*(_DWORD *)dword_56391C + 40))(a4);
            }
          }
        }
      }
      return result;
    case 5u:
      v14 = *((_DWORD *)dword_563908 + 1514);
      result = (HINSTANCE)sub_401B68(a3);
      if ( !result )
        return result;
      v15 = *(_DWORD *)(*((_DWORD *)result + 2) + 108);
      if ( v15 <= 0 )
        goto LABEL_31;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2679))) >= v15 )
      {
        sub_401992(-v15);
LABEL_31:
        if ( a4 == (HINSTANCE)14 )
        {
          result = (HINSTANCE)(*(int (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 68))(a3, 1);
        }
        else
        {
          result = (HINSTANCE)((char *)a4 - 15);
          if ( a4 == (HINSTANCE)15 )
            result = (HINSTANCE)(*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)dword_56391C + 68))(a3, 0);
        }
      }
      else
      {
        v16 = *((_DWORD *)dword_563908 + 1510);
        sub_40245F("Not enough energy to use switch", 1, 400, 0, 0);
        result = (HINSTANCE)sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
      }
      break;
    case 6u:
      v17 = *((_DWORD *)dword_563908 + 1514);
      result = (HINSTANCE)sub_40164F(a3);
      if ( result )
      {
        if ( a4 == (HINSTANCE)16 )
        {
          v18 = *((_DWORD *)dword_563908 + 1514);
          result = (HINSTANCE)sub_40164F(a3);
          v19 = result;
          if ( result )
          {
            result = (HINSTANCE)(*(int (__stdcall **)(int, signed int, signed int))(*(_DWORD *)dword_56391C + 72))(
                                  a3,
                                  1,
                                  1);
            v20 = *(_DWORD **)(*((_DWORD *)v19 + 4) + 396);
            if ( v20 )
              result = (HINSTANCE)sub_4A7120(v20, 0, 0, 0, 0);
          }
        }
      }
      break;
    case 7u:
      if ( a4 == (HINSTANCE)1 )
        result = ShellExecuteA(0, "open", (LPCSTR)(this + 48), 0, 0, 1);
      break;
    case 8u:
    case 9u:
    case 0xAu:
    case 0xBu:
    case 0xCu:
    case 0xDu:
    case 0xEu:
    case 0xFu:
    case 0x10u:
    case 0x11u:
    case 0x12u:
    case 0x13u:
    case 0x14u:
    case 0x15u:
    case 0x16u:
    case 0x17u:
      if ( !a4 )
        result = (HINSTANCE)(*(int (__stdcall **)(int, HINSTANCE))(*(_DWORD *)dword_56391C + 124))(a3, a2 - 2);
      break;
    default:
      return result;
  }
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 40164F: using guessed type _DWORD __stdcall sub_40164F(_DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);
// 401B68: using guessed type _DWORD __stdcall sub_401B68(_DWORD);
// 401CEE: using guessed type int __thiscall sub_401CEE(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 4028C9: using guessed type _DWORD __stdcall sub_4028C9(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00440810) --------------------------------------------------------
void sub_440810()
{
  srand(0x1380u);
}

//----- (00440820) --------------------------------------------------------
void *__thiscall sub_440820(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_402171();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 402171: using guessed type int sub_402171(void);

//----- (00440850) --------------------------------------------------------
_DWORD *__thiscall sub_440850(_DWORD *this, int a2, _DWORD *a3)
{
  _DWORD *v3; // esi

  v3 = this;
  this[1] = &InputTarget::`vftable';
  this[6] = a2;
  *this = &MainManager::`vftable';
  this[1] = &MainManager::`vftable';
  this[7] = 0;
  this[9] = 0;
  this[10] = 0;
  this[11] = 0;
  *((_BYTE *)this + 48) = 0;
  if ( a3 )
  {
    this[2] = *a3;
    this[3] = a3[1];
    this[4] = a3[2];
    this[5] = a3[3];
  }
  sub_4022D9();
  return v3;
}
// 4022D9: using guessed type int sub_4022D9(void);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 513AE4: using guessed type void *MainManager::`vftable';
// 513B14: using guessed type void *MainManager::`vftable';

//----- (00440950) --------------------------------------------------------
int __thiscall sub_440950(int this)
{
  int v1; // ebp
  int v2; // edi
  int v3; // esi
  int v4; // ebx
  signed int v5; // edi
  int v6; // eax
  int (__thiscall *v7)(int, _DWORD, _DWORD); // edx
  int v9; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h]

  v1 = *(_DWORD *)(this + 52);
  v2 = *((_DWORD *)dword_563908 + 1508);
  v3 = *(_DWORD *)(this + 20) - *(_DWORD *)(this + 12);
  v4 = *(_DWORD *)(this + 24) - *(_DWORD *)(this + 16);
  v10 = 1000 * *(_DWORD *)(v2 + 8) / v1;
  v9 = 1000 * *(_DWORD *)(v2 + 4) / v1;
  v5 = 1000 * *((_DWORD *)dword_563908 + 62) / v1 / 16 - v3 / 2 < 0 ? 0 : 1000
                                                                        * *((_DWORD *)dword_563908 + 62)
                                                                        / v1
                                                                        / 16
                                                                        - v3 / 2;
  if ( v5 + v3 > v9 )
    v5 = v9 - v3 < 0 ? 0 : v9 - v3;
  v6 = (1000 * *((_DWORD *)dword_563908 + 63) / v1 / 16 - v4 / 2) & ((1000 * *((_DWORD *)dword_563908 + 63) / v1 / 16
                                                                    - v4 / 2 < 0)
                                                                   - 1);
  if ( v6 + v4 > v10 )
    v6 = v10 - v4 < 0 ? 0 : v10 - v4;
  *(_DWORD *)(this + 36) = 1000 * v6;
  v7 = **(int (__thiscall ***)(int, _DWORD, _DWORD))(this + 8);
  *(_DWORD *)(this + 32) = 1000 * v5;
  return v7(this + 8, 0, 0);
}

//----- (00440AA0) --------------------------------------------------------
int __thiscall sub_440AA0(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  int v3; // ecx
  int v4; // edi
  int v5; // ebx
  int v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // ST10_4
  void (__stdcall *v12)(_DWORD *); // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // ST10_4
  int (__stdcall *v16)(_DWORD *); // eax
  int v18; // [esp+14h] [ebp-1Ch]
  int v19; // [esp+18h] [ebp-18h]
  int v20; // [esp+1Ch] [ebp-14h]
  int v21; // [esp+20h] [ebp-10h]
  int v22; // [esp+2Ch] [ebp-4h]

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[14];
  if ( v2 )
  {
    (**v2)(1);
    v1[14] = 0;
  }
  v3 = v1[4];
  v4 = v1[5] - v1[3];
  v5 = v1[6] - v1[4];
  v18 = v1[3];
  v6 = v1[5];
  v19 = v3;
  v21 = v1[6] + 15;
  v20 = v6 + 15;
  v7 = operator new(0x420u);
  v22 = 0;
  if ( v7 )
    v8 = sub_49A5F0(v7, 1, &v18, 0);
  else
    v8 = 0;
  v22 = -1;
  v1[14] = v8;
  v9 = operator new(0x18u);
  v22 = 1;
  if ( v9 )
    v10 = sub_49A490(v9, 0, 0, v4, v5, 1);
  else
    v10 = 0;
  v11 = v10;
  v12 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[14] + 16);
  v22 = -1;
  v12(v11);
  v13 = operator new(0x18u);
  v22 = 2;
  if ( v13 )
    v14 = sub_49A490(v13, v4, v5, 15, 15, 2);
  else
    v14 = 0;
  v15 = v14;
  v16 = *(int (__stdcall **)(_DWORD *))(*(_DWORD *)v1[14] + 16);
  v22 = -1;
  return v16(v15);
}

//----- (00440C30) --------------------------------------------------------
int __thiscall sub_440C30(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void *v3; // edi
  void *v4; // edi
  int v5; // eax
  int v6; // eax

  v2 = this;
  v3 = (void *)this[10];
  if ( v3 )
  {
    sub_402040(this[10]);
    j__free(v3);
    v2[10] = 0;
  }
  v4 = (void *)v2[11];
  if ( v4 )
  {
    sub_402040(v2[11]);
    j__free(v4);
    v2[11] = 0;
  }
  if ( a2 )
  {
    v2[3] = *a2;
    v2[4] = a2[1];
    v2[5] = a2[2];
    v2[6] = a2[3];
    v2[5] -= 15;
    v2[6] -= 15;
  }
  if ( operator new(0x7Cu) )
    v5 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 0, v2 + 2, v2[7], 1, v2[3], v2[6], v2[5] - v2[3], -5000);
  else
    v5 = 0;
  v2[10] = v5;
  if ( operator new(0x7Cu) )
    v6 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 1, v2 + 2, v2[7], 0, v2[5], v2[4], v2[6] - v2[4], -5000);
  else
    v6 = 0;
  v2[11] = v6;
  if ( *((_DWORD *)dword_563908 + 1508) )
    (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))v2[2])(v2 + 2, 0, 0);
  return sub_4020EF();
}
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4020EF: using guessed type int sub_4020EF(void);

//----- (00440E10) --------------------------------------------------------
int __thiscall sub_440E10(_DWORD **this, int a2, int a3, int a4, int a5, unsigned __int16 a6)
{
  _DWORD **v6; // esi
  signed int v7; // ebx
  signed int v8; // edx
  _DWORD *v9; // ecx
  char *v11; // [esp+10h] [ebp-20h]
  char *v12; // [esp+14h] [ebp-1Ch]
  char *v13; // [esp+18h] [ebp-18h]
  char *v14; // [esp+1Ch] [ebp-14h]
  char v15; // [esp+20h] [ebp-10h]

  v6 = this;
  (*(void (__stdcall **)(char *))(*this[7] + 72))(&v15);
  (*(void (__stdcall **)(_DWORD **))(*v6[7] + 64))(v6 + 3);
  v7 = (signed int)v6[13];
  v8 = (signed int)v6[9];
  v11 = (char *)v6[3] + 1000 * a2 / v7 - (signed int)v6[8] / 1000 - (a4 - 1) / 2;
  v13 = &v11[a4];
  v9 = v6[7];
  v12 = (char *)v6[4] + 1000 * a3 / v7 - v8 / 1000 - (a5 - 1) / 2;
  v14 = &v12[a5];
  (*(void (__stdcall **)(_DWORD, char **))(*v9 + 40))(a6, &v11);
  return (*(int (__stdcall **)(char *))(*v6[7] + 64))(&v15);
}

//----- (00440F20) --------------------------------------------------------
int __thiscall sub_440F20(_DWORD **this, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  unsigned int v7; // edx
  int v8; // ebp
  int v9; // eax
  char v11; // [esp+10h] [ebp-10h]

  v6 = this;
  (*(void (__stdcall **)(char *))(*this[7] + 72))(&v11);
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[7] + 64))(v6 + 3);
  v8 = *(signed __int16 *)(a6 + 56);
  if ( *(_WORD *)(a6 + 56) || (v8 = *(signed __int16 *)(a4 + 170), *(_WORD *)(a4 + 170)) )
    v9 = *(signed __int16 *)(a4 + 178) * (*((_DWORD *)dword_563908 + 2705) % v8) / v8;
  else
    v9 = 0;
  v7 = (signed int)((unsigned __int64)(274877907i64 * (signed int)v6[9]) >> 32) >> 6;
  sub_4A50B0(
    a4,
    v9,
    v6[7],
    v6[3] + 1000 * a2 / v6[13] - v6[8] / 1000,
    v6[4] + 1000 * a3 / v6[13] - (v7 + (v7 >> 31)),
    a5,
    *(_DWORD *)(a6 + 52),
    0,
    0,
    0);
  return (*(int (__stdcall **)(char *))(*(_DWORD *)v6[7] + 64))(&v11);
}

//----- (00441050) --------------------------------------------------------
int __thiscall sub_441050(_DWORD **this, int a2, int a3, unsigned __int16 a4)
{
  _DWORD **v4; // esi
  signed int v5; // ecx
  _DWORD *v6; // ecx
  int v7; // eax
  signed int v8; // edx
  _DWORD *v9; // ecx
  char *v11; // [esp+10h] [ebp-20h]
  char *v12; // [esp+14h] [ebp-1Ch]
  _DWORD *v13; // [esp+18h] [ebp-18h]
  _DWORD *v14; // [esp+1Ch] [ebp-14h]
  char v15; // [esp+20h] [ebp-10h]

  v4 = this;
  (*(void (__stdcall **)(char *))(*this[7] + 72))(&v15);
  (*(void (__stdcall **)(_DWORD **))(*v4[7] + 64))(v4 + 3);
  v5 = (signed int)v4[13];
  v11 = (char *)v4[3] + 1000 * a2 / v5 - (signed int)v4[8] / 1000 - 2;
  v12 = (char *)v4[4] + 1000 * a3 / v5 - (signed int)v4[9] / 1000;
  v14 = v12 + 1;
  v6 = v4[7];
  v13 = v11 + 5;
  (*(void (__stdcall **)(_DWORD, char **))(*v6 + 40))(a4, &v11);
  v11 = (char *)v4[3] + 1000 * a2 / (signed int)v4[13] - (signed int)v4[8] / 1000;
  v7 = 1000 * a3 / (signed int)v4[13];
  v8 = (signed int)v4[9];
  v13 = v11 + 1;
  v9 = v4[7];
  v12 = (char *)v4[4] + v7 - v8 / 1000 - 2;
  v14 = v12 + 5;
  (*(void (__stdcall **)(_DWORD, char **))(*v9 + 40))(a4, &v11);
  return (*(int (__thiscall **)(_DWORD *, char *))(*v4[7] + 64))(v4[7], &v15);
}

//----- (004411F0) --------------------------------------------------------
_DWORD *__stdcall sub_4411F0(int a1, int a2)
{
  _DWORD *result; // eax

  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
  {
    (*(void (__stdcall **)(int, int))(**((_DWORD **)dword_563908 + 6898) + 300))(a1, a2);
    result = dword_563908;
  }
  if ( *((_DWORD *)dword_56390C + 1564) || a1 == 27 || *((_DWORD *)dword_56390C + 1602) )
  {
    result[1535] = result[1499];
    result = (_DWORD *)*((_DWORD *)dword_563908 + 1509);
    result[25] = 1;
  }
  return result;
}

//----- (00441280) --------------------------------------------------------
void *__stdcall sub_441280(int a1, int a2)
{
  void *result; // eax

  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
    result = (void *)(*(int (__stdcall **)(int, int))(**((_DWORD **)dword_563908 + 6898) + 304))(a1, a2);
  return result;
}

//----- (004412C0) --------------------------------------------------------
int __thiscall sub_4412C0(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // ebp
  int v6; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 56);
  v6 = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**(_DWORD **)(this + 52) + 4))(a2, a3, 0, 0);
  *(_DWORD *)(v4 + 56) = v6;
  if ( v5 != v6 && v6 == 2 )
    sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  (*(void (__stdcall **)(int, int, int))(**(_DWORD **)(v4 + 40) + 4))(a2, a3, a4);
  return (*(int (__stdcall **)(int, int, int))(**(_DWORD **)(v4 + 36) + 4))(a2, a3, a4);
}

//----- (00441350) --------------------------------------------------------
int __thiscall sub_441350(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi

  v5 = this;
  (*(void (__stdcall **)(int, int, int, int))(*this[10] + 16))(a2, a3, a4, a5);
  return (*(int (__stdcall **)(int, int, int, int))(*v5[9] + 16))(a2, a3, a4, a5);
}

//----- (004413A0) --------------------------------------------------------
int __thiscall sub_4413A0(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (004413B0) --------------------------------------------------------
int __thiscall sub_4413B0(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // esi
  int result; // eax

  v1 = this;
  v2 = 5000 * this[11];
  if ( GetAsyncKeyState(16) >= 0 )
    goto LABEL_13;
  if ( GetAsyncKeyState(37) < 0 )
    return (*(int (__thiscall **)(_DWORD *, _DWORD, int))v1[1])(v1 + 1, 0, -v2);
  if ( GetAsyncKeyState(39) < 0 )
    return (*(int (__thiscall **)(_DWORD *, _DWORD, int))v1[1])(v1 + 1, 0, v2);
  if ( GetAsyncKeyState(38) < 0 )
    return (*(int (__thiscall **)(_DWORD *, signed int, int))v1[1])(v1 + 1, 1, -v2);
  if ( GetAsyncKeyState(40) >= 0 )
LABEL_13:
    result = (*(int (__thiscall **)(int))(*(_DWORD *)(*((_DWORD *)dword_563908 + 1499) + 4) + 32))(*((_DWORD *)dword_563908 + 1499) + 4);
  else
    result = (*(int (__thiscall **)(_DWORD *, signed int, int))v1[1])(v1 + 1, 1, v2);
  return result;
}

//----- (00441480) --------------------------------------------------------
int __thiscall sub_441480(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ecx

  v2 = this;
  v3 = this[11];
  v2[12] = a2;
  (*(void (__stdcall **)(int))(*(_DWORD *)v3 + 36))(a2);
  return (*(int (__stdcall **)(int))(*(_DWORD *)v2[10] + 36))(a2);
}

//----- (004414B0) --------------------------------------------------------
int sub_4414B0()
{
  return 0;
}

//----- (004414C0) --------------------------------------------------------
void *__thiscall sub_4414C0(_DWORD *this)
{
  void *result; // eax
  _DWORD *v2; // edi
  int v3; // esi
  int v4; // ecx
  int v5; // eax
  int v6; // ebp
  int v7; // ecx
  signed int v8; // edi
  double v9; // st7
  int v10; // eax
  long double v11; // st7
  int v12; // [esp+20h] [ebp-40h]
  double v13; // [esp+24h] [ebp-3Ch]
  char v14; // [esp+34h] [ebp-2Ch]
  char v15; // [esp+38h] [ebp-28h]
  char v16; // [esp+3Ch] [ebp-24h]
  long double v17; // [esp+40h] [ebp-20h]
  long double v18; // [esp+48h] [ebp-18h]
  char v19; // [esp+50h] [ebp-10h]

  result = dword_563908;
  v2 = this;
  if ( *((_DWORD *)dword_563908 + 6898) )
  {
    result = (void *)(*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))();
    if ( result != (void *)4 )
    {
      v3 = *((_DWORD *)dword_563908 + 89);
      (*(void (__thiscall **)(_DWORD, char *))(*(_DWORD *)v3 + 72))(*((_DWORD *)dword_563908 + 89), &v19);
      (*(void (__thiscall **)(int, _DWORD *))(*(_DWORD *)v3 + 64))(v3, v2 + 3);
      HIDWORD(v13) = (*(int (__stdcall **)(int *, double *, char *))(**((_DWORD **)dword_563908 + 6898) + 84))(
                       &v12,
                       &v13,
                       &v14);
      v4 = v2[13];
      v5 = 1000 * (SLODWORD(v13) / 160000) / v4;
      v6 = v2[3] + 1000 * (v12 / 160000) / v4 - v2[8] / 1000;
      v7 = v2[9];
      v12 = v6;
      LODWORD(v13) = v2[4] + v5 - v7 / 1000;
      HIDWORD(v13) = (HIDWORD(v13) + 180000) % 240000;
      *(double *)((char *)&v13 + 4) = (double)SHIDWORD(v13) * 0.00002617993877916667;
      v18 = cos(*(double *)((char *)&v13 + 4));
      v17 = sin(*(double *)((char *)&v13 + 4));
      (*(void (__thiscall **)(int, char *, char *))(*(_DWORD *)v3 + 92))(v3, &v16, &v15);
      v8 = 12;
      HIDWORD(v13) = 12;
      do
      {
        v9 = (double)SHIDWORD(v13);
        v10 = (signed int)(v17 * v9);
        v11 = v9 * v18;
        if ( dword_53A7C4 )
          v10 = 7 * v10 / 10;
        (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v3 + 24))(
          v3,
          v12 + (signed int)v11,
          LODWORD(v13) + v10,
          *((unsigned __int16 *)dword_563908 + 76));
        v8 += 12;
        HIDWORD(v13) = v8;
      }
      while ( v8 <= 72 );
      (*(void (__thiscall **)(int))(*(_DWORD *)v3 + 96))(v3);
      result = (void *)(*(int (__thiscall **)(int, char *))(*(_DWORD *)v3 + 64))(v3, &v19);
    }
  }
  return result;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00441750) --------------------------------------------------------
int __thiscall sub_441750(_DWORD *this, int a2, int a3)
{
  int v3; // ebp
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // ecx
  int v7; // edi
  int v8; // ebx
  int v9; // eax
  int v10; // edx
  int v11; // ecx
  int v12; // ST0C_4
  int v13; // ecx
  int v14; // eax
  int v15; // ecx
  int v16; // ST0C_4
  int v17; // ecx

  v3 = *((_DWORD *)dword_563908 + 1508);
  v4 = this;
  v5 = 1000 * *(_DWORD *)(v3 + 8) / this[11];
  v6 = 1000 * (this[3] - this[1]);
  v7 = 1000 * (v4[4] - v4[2]);
  v8 = 1000 * v5;
  v9 = 1000 * (1000 * *(_DWORD *)(v3 + 4) / v4[11]);
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      v4[7] += a3;
      if ( v7 + v4[7] > v8 )
        v4[7] = v8 - v7;
      if ( v4[7] < 0 )
        v4[7] = 0;
    }
  }
  else
  {
    v4[6] += a3;
    if ( v6 + v4[6] > v9 )
      v4[6] = v9 - v6;
    if ( v4[6] < 0 )
      v4[6] = 0;
  }
  v10 = v4[6];
  v11 = v10 + v6;
  if ( v9 < v11 )
    v11 = v9;
  v12 = v11;
  v13 = v4[8];
  sub_401C67(0, v9, v10, v12, 0);
  v14 = v4[7];
  v15 = v14 + v7;
  if ( v8 < v14 + v7 )
    v15 = v8;
  v16 = v15;
  v17 = v4[9];
  return sub_401C67(0, v8, v14, v16, 0);
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00441860) --------------------------------------------------------
int __thiscall sub_441860(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  void *v3; // edi
  void *v4; // edi

  v1 = this;
  *this = &off_513D7C;
  this[1] = &MapManager::`vftable';
  this[2] = &off_513D40;
  v2 = (void (__stdcall ***)(signed int))this[14];
  if ( v2 )
  {
    (**v2)(1);
    v1[14] = 0;
  }
  v3 = (void *)v1[10];
  if ( v3 )
  {
    sub_402040(v1[10]);
    j__free(v3);
    v1[10] = 0;
  }
  v4 = (void *)v1[11];
  if ( v4 )
  {
    sub_402040(v1[11]);
    j__free(v4);
    v1[11] = 0;
  }
  return sub_4027A2(v1);
}
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 513D40: using guessed type int (__stdcall *off_513D40)(int, int);
// 513D4C: using guessed type void *MapManager::`vftable';
// 513D7C: using guessed type int (__stdcall *off_513D7C)(int, int, int);

//----- (00441940) --------------------------------------------------------
int __thiscall sub_441940(_DWORD *this, int a2)
{
  this[13] = a2;
  return sub_4020DB(this);
}
// 4020DB: using guessed type int __thiscall sub_4020DB(_DWORD);

//----- (00441960) --------------------------------------------------------
int __thiscall sub_441960(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // eax

  v5 = this;
  v6 = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*this[13] + 4))(a2, a3, 0, 0);
  v5[14] = (_DWORD *)v6;
  if ( v6 == 2 )
  {
    if ( !a5 )
    {
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      *((_DWORD *)dword_563918 + 2247) = *((_DWORD *)dword_563918 + 2247) == 0;
      goto LABEL_13;
    }
    if ( a5 != 1 )
      goto LABEL_13;
    v7 = *((_DWORD *)dword_563908 + 1508);
    v8 = 1000 * *(_DWORD *)(v7 + 8) / ((char *)v5[5] - (char *)v5[3]);
    if ( 1000 * *(_DWORD *)(v7 + 4) / ((char *)v5[4] - (char *)v5[2]) > v8 )
      v8 = 1000 * *(_DWORD *)(v7 + 4) / ((char *)v5[4] - (char *)v5[2]);
    v9 = v8 + 1;
LABEL_12:
    v5[12] = (_DWORD *)v9;
    sub_4020DB(v5 - 1);
    goto LABEL_13;
  }
  if ( v6 == 1 && a5 == 1 )
  {
    v9 = 118 * (signed int)v5[12] / 100;
    if ( v9 > 6000 )
      v9 = 1000;
    goto LABEL_12;
  }
LABEL_13:
  (*(void (__stdcall **)(int, int, int, int))(*v5[10] + 8))(a2, a3, a4, a5);
  return (*(int (__stdcall **)(int, int, int, int))(*v5[9] + 8))(a2, a3, a4, a5);
}
// 4020DB: using guessed type int __thiscall sub_4020DB(_DWORD);

//----- (00441AB0) --------------------------------------------------------
int __thiscall sub_441AB0(_DWORD **this)
{
  _DWORD **v1; // esi
  int v2; // edi
  int v3; // ecx
  signed int v4; // ebx
  int v5; // ebx
  int v6; // ebp
  char *v7; // eax
  int v8; // edi
  int v9; // ecx
  int v10; // edx
  int v11; // eax
  int v12; // eax
  int v13; // edi
  _DWORD *v14; // ecx
  unsigned int v15; // edx
  unsigned int v16; // edx
  int v17; // ebx
  int v18; // ecx
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // ecx
  bool v23; // sf
  unsigned __int8 v24; // of
  int v25; // ecx
  int v26; // ebp
  int v27; // eax
  int v28; // ebp
  int v29; // eax
  int v30; // edx
  unsigned int v31; // ecx
  int v32; // eax
  _DWORD *v33; // edi
  int v34; // ebp
  int v35; // ebx
  __int64 v36; // rax
  int v37; // ebx
  int v38; // ebp
  int v39; // ebx
  int v40; // ebx
  int v41; // ebx
  int v42; // edx
  _DWORD *v43; // ecx
  _DWORD *v44; // ecx
  _DWORD *v45; // ecx
  int v47; // [esp+8h] [ebp-58h]
  int v48; // [esp+8h] [ebp-58h]
  int v49; // [esp+8h] [ebp-58h]
  int v50; // [esp+Ch] [ebp-54h]
  int v51; // [esp+Ch] [ebp-54h]
  int i; // [esp+Ch] [ebp-54h]
  char *Dst; // [esp+10h] [ebp-50h]
  void *Dsta; // [esp+10h] [ebp-50h]
  _WORD *v55; // [esp+14h] [ebp-4Ch]
  int v56; // [esp+14h] [ebp-4Ch]
  int j; // [esp+14h] [ebp-4Ch]
  int v58; // [esp+18h] [ebp-48h]
  int v59; // [esp+18h] [ebp-48h]
  int v60; // [esp+1Ch] [ebp-44h]
  int v61; // [esp+1Ch] [ebp-44h]
  int v62; // [esp+1Ch] [ebp-44h]
  int v63; // [esp+20h] [ebp-40h]
  int v64; // [esp+20h] [ebp-40h]
  int v65; // [esp+24h] [ebp-3Ch]
  __int16 v66; // [esp+24h] [ebp-3Ch]
  int v67; // [esp+28h] [ebp-38h]
  int v68; // [esp+2Ch] [ebp-34h]
  int v69; // [esp+30h] [ebp-30h]
  int v70; // [esp+34h] [ebp-2Ch]
  _DWORD *v71; // [esp+38h] [ebp-28h]
  _DWORD *v72; // [esp+3Ch] [ebp-24h]
  _DWORD *v73; // [esp+40h] [ebp-20h]
  _DWORD *v74; // [esp+44h] [ebp-1Ch]
  char v75; // [esp+48h] [ebp-18h]
  char Dest; // [esp+4Ch] [ebp-14h]

  v1 = this;
  v70 = (*(int (__stdcall **)(int *, char *))(*this[7] + 92))(&v67, &v75);
  v67 /= 2;
  if ( v70 )
  {
    v2 = *((_DWORD *)dword_563908 + 1508);
    v3 = (char *)v1[5] - (char *)v1[3];
    v4 = (signed int)v1[13];
    v58 = v3;
    v65 = 1000 * *(_DWORD *)(v2 + 8) / v4;
    v5 = 1000 * *(_DWORD *)(v2 + 4) / v4;
    v6 = (signed int)v1[8] / 1000;
    v7 = (char *)v1[4];
    v8 = (signed int)v1[9] / 1000;
    v9 = v6 + v3;
    v10 = v8 + (char *)v1[6] - v7;
    v50 = (signed int)v1[9] / 1000;
    v68 = v9;
    v69 = v10;
    if ( v9 >= v5 )
    {
      v63 = v5;
    }
    else
    {
      v5 = v9;
      v63 = v9;
    }
    Dst = (char *)(v70 + 2 * ((_DWORD)v1[3] + v67 * (_DWORD)v7));
    v11 = v8;
    v47 = v8;
    if ( v8 < v10 )
    {
      while ( 1 )
      {
        if ( v11 < 0 || v11 >= v65 )
        {
          memset(Dst, 0, 2 * v58);
        }
        else
        {
          v12 = v11 * (signed int)v1[13] / 1000;
          v60 = v12;
          v55 = Dst;
          v13 = v6;
          if ( v6 < v5 )
          {
            while ( 1 )
            {
              v5 = v63;
              *v55 = *(_WORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5184)
                              + 2
                              * ((unsigned int)*(unsigned __int16 *)(3
                                                                   * (((signed int)((unsigned __int64)(274877907i64 * v13 * (signed int)v1[13]) >> 32) >> 6)
                                                                    + v12
                                                                    * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4)
                                                                    + ((unsigned int)((unsigned __int64)(274877907i64 * v13 * (signed int)v1[13]) >> 32) >> 31))
                                                                   + *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 5168)) >> 7));
              ++v13;
              ++v55;
              if ( v13 >= v63 )
                break;
              v12 = v60;
            }
          }
          if ( v5 < v68 )
            memset(&Dst[2 * (v5 - v6)], 0, 2 * (v68 - v5));
          v8 = v50;
        }
        Dst += 2 * v67;
        if ( ++v47 >= v69 )
          break;
        v11 = v47;
      }
    }
    v14 = v1[13];
    v56 = v6 * (signed int)v1[13] / 1000;
    v51 = v8 * (signed int)v1[13] / 1000;
    v15 = (signed int)((unsigned __int64)(274877907i64 * v68 * (signed int)v14) >> 32) >> 6;
    Dsta = (void *)(v15 + (v15 >> 31));
    v16 = (signed int)((unsigned __int64)(274877907i64 * v69 * (signed int)v14) >> 32) >> 6;
    v17 = v16 + (v16 >> 31);
    v64 = v16 + (v16 >> 31);
    if ( *((_DWORD *)dword_563918 + 2247) && (signed int)v1[13] < 2000 )
    {
      v66 = *((_WORD *)dword_563908 + 76);
      v18 = 80 * (v51 / 80);
      v61 = 80 * (v51 / 80);
      if ( v18 < v17 )
      {
        v19 = 1000 * (v18 - v51);
        v48 = 1000 * (v18 - v51);
        do
        {
          if ( v18 >= 2048 )
            break;
          if ( v18 )
          {
            v20 = v19 / (signed int)v1[13];
            if ( v20 >= 0 )
            {
              v59 = v70 + 2 * v67 * ((_DWORD)v1[4] + v20);
              v21 = 8 * (v6 / 8);
              if ( v21 < v6 )
                v21 += 8;
              if ( v21 < v68 )
              {
                do
                {
                  v22 = (int)&v1[3][v21 / 4u] - v6;
                  v21 += 8;
                  v24 = __OFSUB__(v21, v68);
                  v23 = v21 - v68 < 0;
                  *(_WORD *)(v59 + 2 * v22) = v66;
                }
                while ( v23 ^ v24 );
                v17 = v16 + (v16 >> 31);
                v18 = v61;
              }
            }
            v19 = v48;
          }
          v18 += 80;
          v19 += 80000;
          v61 = v18;
          v48 = v19;
        }
        while ( v18 < v17 );
      }
      v25 = 80 * (v56 / 80);
      v62 = 80 * (v56 / 80);
      if ( v25 < (signed int)Dsta )
      {
        v26 = 1000 * (v25 - v56);
        v49 = 1000 * (v25 - v56);
        do
        {
          if ( v25 >= 2048 )
            break;
          if ( v25 )
          {
            v27 = v26 / (signed int)v1[13];
            if ( v27 >= 0 )
            {
              v28 = v70 + 2 * ((_DWORD)v1[3] + v27);
              v29 = 8 * (v8 / 8);
              if ( v29 < v8 )
                v29 += 8;
              if ( v29 < v69 )
              {
                v30 = v29 - v8;
                v31 = ((unsigned int)(v69 - v29 - 1) >> 3) + 1;
                do
                {
                  v32 = v67 * v30;
                  v30 += 8;
                  --v31;
                  *(_WORD *)(v28 + 2 * v32) = v66;
                }
                while ( v31 );
                v17 = v64;
                v25 = v62;
              }
              v26 = v49;
            }
          }
          v25 += 80;
          v26 += 80000;
          v62 = v25;
          v49 = v26;
        }
        while ( v25 < (signed int)Dsta );
      }
    }
    (*(void (**)(void))(*v1[7] + 96))();
    if ( *((_DWORD *)dword_563918 + 2247) && (signed int)v1[13] < 2000 )
    {
      v33 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
      v34 = 80 * (v51 / 80) + 40;
      if ( v34 < v17 )
      {
        v35 = 1000 * (v34 - v51);
        for ( i = 1000 * (v34 - v51); v34 < 2048; v35 = i )
        {
          sprintf(&Dest, "%d", v34 / 80 + 1);
          v36 = *(signed __int16 *)(v33[513] + 174);
          v37 = v35 / (signed int)v1[13] - (((signed int)v36 - HIDWORD(v36)) >> 1);
          sub_49B310(v33, &Dest, 14, v1[7], (int)v1[3], v37 - 1, 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], (int)v1[3], v37 + 1, 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], (int)v1[3] + 2, v37 - 1, 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], (int)v1[3] + 2, v37 + 1, 3, 0);
          sub_49B310(v33, &Dest, 2, v1[7], (int)v1[3] + 1, v37, 3, 0);
          i += 80000;
          v34 += 80;
          if ( v34 >= v64 )
            break;
        }
      }
      v38 = 80 * (v56 / 80) + 40;
      if ( v38 < (signed int)Dsta )
      {
        v39 = 1000 * (v38 - v56);
        for ( j = 1000 * (v38 - v56); v38 < 2048; v39 = j )
        {
          sprintf(&Dest, "%c", v38 / 80 + 65);
          v40 = v39 / (signed int)v1[13];
          v41 = sub_49AD40(v33, &Dest) / -2 + v40;
          sub_49B310(v33, &Dest, 14, v1[7], v41 - 1, (int)v1[4], 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], v41 - 1, (int)v1[4] + 2, 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], v41 + 1, (int)v1[4], 3, 0);
          sub_49B310(v33, &Dest, 14, v1[7], v41 + 1, (int)v1[4] + 2, 3, 0);
          sub_49B310(v33, &Dest, 2, v1[7], v41, (int)v1[4] + 1, 3, 0);
          j += 80000;
          v38 += 80;
          if ( v38 >= (signed int)Dsta )
            break;
        }
      }
    }
    sub_40246E(v1);
  }
  v42 = (int)v1[6];
  v43 = v1[7];
  v71 = v1[5];
  v74 = (_DWORD *)v42;
  v73 = (_DWORD *)((char *)v71 + 15);
  v72 = 0;
  (*(void (__stdcall **)(_DWORD, _DWORD **))(*v43 + 40))(0, &v71);
  v44 = v1[5];
  v72 = v1[6];
  v73 = (_DWORD *)((char *)v44 + 15);
  v45 = v1[7];
  v74 = (_DWORD *)((char *)v72 + 15);
  v71 = 0;
  (*(void (__stdcall **)(_DWORD, _DWORD **))(*v45 + 40))(0, &v71);
  sub_49B230(
    *((_DWORD **)dword_563908 + 1519),
    (const char *)&unk_513DA4,
    v1[15] != (_DWORD *)2 ? 9 : 2,
    v1[7],
    (int)v1[5],
    (int)v1[6],
    3,
    0);
  (*(void (**)(void))(*v1[11] + 40))();
  return (*(int (__thiscall **)(_DWORD *))(*v1[10] + 40))(v1[10]);
}
// 40246E: using guessed type int __thiscall sub_40246E(_DWORD);

//----- (00442490) --------------------------------------------------------
_DWORD *__thiscall sub_442490(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = &off_511698;
  this[7] = a2;
  *this = &off_513D7C;
  this[1] = &MapManager::`vftable';
  this[2] = &off_513D40;
  this[14] = 0;
  this[11] = 0;
  this[10] = 0;
  this[8] = 0;
  this[9] = 0;
  this[15] = 0;
  this[13] = 1000;
  sub_4010D7(a3);
  return v3;
}
// 4010D7: using guessed type _DWORD __stdcall sub_4010D7(_DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 513D40: using guessed type int (__stdcall *off_513D40)(int, int);
// 513D4C: using guessed type void *MapManager::`vftable';
// 513D7C: using guessed type int (__stdcall *off_513D7C)(int, int, int);

//----- (00442550) --------------------------------------------------------
void *__thiscall sub_442550(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4012CB();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4012CB: using guessed type int sub_4012CB(void);

//----- (00442640) --------------------------------------------------------
BOOL __thiscall sub_442640(char *this)
{
  char *v1; // esi
  BOOL result; // eax
  const char *v3; // esi
  HGLOBAL v4; // edi
  _BYTE *v5; // eax
  char v6; // cl

  v1 = this;
  result = OpenClipboard(0);
  if ( result )
  {
    v3 = v1 + 37920;
    if ( strlen(v3) )
    {
      v4 = GlobalAlloc(0x42u, 0x3E8u);
      v5 = GlobalLock(v4);
      do
      {
        v6 = *v3;
        *v5++ = *v3++;
      }
      while ( v6 );
      GlobalUnlock(v4);
      SetClipboardData(1u, v4);
    }
    result = CloseClipboard();
  }
  return result;
}

//----- (004426D0) --------------------------------------------------------
BOOL __thiscall sub_4426D0(char *this)
{
  char *v1; // edi
  BOOL result; // eax
  HANDLE v3; // eax
  void *v4; // ebp
  const char *v5; // ebx
  char v6; // cl
  unsigned int v7; // eax
  bool v8; // zf
  signed int v9; // ecx
  int v10; // ecx
  signed int v11; // ebx
  char *v12; // esi
  int v13; // ecx
  signed int v14; // edx
  const char *Src; // [esp+4h] [ebp-8h]
  HANDLE v16; // [esp+8h] [ebp-4h]

  v1 = this;
  result = OpenClipboard(0);
  if ( result )
  {
    v3 = GetClipboardData(1u);
    v4 = v3;
    v16 = v3;
    if ( v3 )
    {
      v5 = (const char *)GlobalLock(v3);
      Src = v5;
      v6 = v1[37920];
      v7 = strlen(v1 + 37920);
      if ( v6 == 63 || (v8 = v6 == 42, v9 = 1024, v8) )
        v9 = 200;
      v10 = v9 - v7 - 1;
      if ( v10 > 0 )
      {
        if ( v10 >= (signed int)strlen(v5) )
          v11 = strlen(v5);
        else
          v11 = v10;
        memcpy_0(
          &v1[v11 + 37920 + *((_DWORD *)v1 + 9736)],
          &v1[*((_DWORD *)v1 + 9736) + 37920],
          strlen(&v1[*((_DWORD *)v1 + 9736) + 37920]) + 1);
        v12 = &v1[*((_DWORD *)v1 + 9736) + 37920];
        memcpy(v12, Src, v11);
        v13 = *(_DWORD *)(*((_DWORD *)v1 + 5) + 2060)
            + *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v1 + 5) + 2052) + 168);
        if ( v11 > 0 )
        {
          v14 = v11;
          do
          {
            if ( *v12 < 32 || *v12 >= v13 )
              *v12 = 32;
            ++v12;
            --v14;
          }
          while ( v14 );
        }
        *((_DWORD *)v1 + 9736) += v11;
        v4 = v16;
      }
      GlobalUnlock(v4);
    }
    result = CloseClipboard();
  }
  return result;
}

//----- (00442870) --------------------------------------------------------
int __thiscall sub_442870(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int result; // eax
  int v5; // esi
  int v6; // esi
  int v7; // edx
  int v8; // esi
  int v9; // edx
  int v10; // esi
  int v11; // eax
  int v12; // edx
  signed int v13; // esi
  signed int v14; // eax
  int v15; // edi
  signed int v16; // eax
  int v17; // edx
  int v18; // [esp+4h] [ebp-2Ch]
  int v19; // [esp+8h] [ebp-28h]
  int v20; // [esp+Ch] [ebp-24h]
  int v21; // [esp+10h] [ebp-20h]
  int v22; // [esp+14h] [ebp-1Ch]
  int v23; // [esp+18h] [ebp-18h]
  int v24; // [esp+1Ch] [ebp-14h]
  int v25; // [esp+20h] [ebp-10h]
  int v26; // [esp+24h] [ebp-Ch]
  int v27; // [esp+28h] [ebp-8h]
  int v28; // [esp+2Ch] [ebp-4h]

  v3 = this[5];
  if ( v3 )
  {
    result = v3 - 1;
    if ( !result )
    {
      v5 = a3;
      result = abs(a3);
      if ( result == 1 )
        v5 = 4 * a3;
      this[116] += v5;
      this[24] = 1;
    }
  }
  else
  {
    v6 = *((_DWORD *)dword_563918 + 2319);
    v19 = *((_DWORD *)dword_563918 + 2311);
    v23 = v19;
    v24 = *((_DWORD *)dword_563918 + 2316);
    v25 = *((_DWORD *)dword_563918 + 2315);
    v7 = *((_DWORD *)dword_563918 + 2314);
    v20 = v6;
    v8 = *((_DWORD *)dword_563918 + 2312);
    v26 = v7;
    v9 = *((_DWORD *)dword_563918 + 2317);
    v21 = v8;
    v10 = *((_DWORD *)dword_563918 + 2313);
    v11 = *((_DWORD *)dword_563918 + 2318);
    v27 = v9;
    v12 = this[9738];
    v22 = v10;
    v28 = v11;
    v18 = v12;
    if ( a3 )
    {
      if ( a3 >= 0 || !this[9739] )
      {
        v13 = this[8154];
        v14 = this[8154];
        if ( v13 >= 4000 )
          v14 = 4000;
        if ( v14 - 1 >= 0 )
        {
          v16 = this[8154];
          if ( v13 >= 4000 )
            v16 = 4000;
          v15 = v16 - 1;
        }
        else
        {
          v15 = 0;
        }
        while ( 1 )
        {
          this[9738] -= a3;
          v17 = this[9738];
          if ( v17 > v15 )
          {
            this[9738] = v15;
            goto LABEL_23;
          }
          if ( v17 < 0 )
            break;
          if ( !*(&v19 + this[2 * ((v13 - v17 - 1) % 4000) + 155]) )
            goto LABEL_23;
        }
        this[9738] = 0;
LABEL_23:
        if ( v18 != this[9738] )
          this[24] = 1;
      }
    }
    else
    {
      this[9738] = 0;
    }
    result = this[46];
    if ( result )
      result = sub_401C67(0, 10, this[9739] == 0, 10 - (this[9738] != 0), 1);
  }
  return result;
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00442A70) --------------------------------------------------------
int __thiscall sub_442A70(_DWORD *this, char a2)
{
  int result; // eax
  _DWORD *v3; // esi
  bool v4; // zf
  char v5; // bl
  unsigned int v6; // eax
  int v7; // ebp
  int v8; // eax
  signed int v9; // ecx
  signed int v10; // edi
  char *v11; // edx
  char v12; // cl
  signed int v13; // edi
  const char *v14; // ebp
  int v15; // edx
  char v16; // al
  signed int v17; // eax
  signed int v18; // edx
  int v19; // ecx
  int v20; // [esp+4h] [ebp-408h]
  char Str1[1024]; // [esp+8h] [ebp-404h]

  result = (int)dword_563918;
  v3 = this;
  if ( *((_DWORD *)dword_563918 + 2344) )
  {
    v4 = this[154] == 0;
  }
  else
  {
    result = (int)strchr((const char *)dword_563918 + 9480, a2);
    if ( !result )
      goto LABEL_6;
    v4 = *((_BYTE *)v3 + 37920) == 0;
  }
  if ( v4 )
    return result;
LABEL_6:
  result = (int)(v3 + 9480);
  v5 = *((_BYTE *)v3 + 37920);
  if ( !v5 && a2 == 32 )
    return result;
  v6 = result + strlen((const char *)result) + 1;
  v7 = v6 - ((_DWORD)v3 + 37921);
  v4 = v3[9736] == v6 - ((_DWORD)v3 + 37921);
  v20 = v6 - ((_DWORD)v3 + 37921);
  if ( !v4 )
    goto LABEL_26;
  if ( a2 == 35 )
  {
    if ( !v5 && *(_BYTE *)(*((_DWORD *)dword_563908 + 6897) + 64) )
    {
      sprintf((char *)v3 + 37920, ":#%s:", *((_DWORD *)dword_563908 + 6897) + 64);
      result = strlen((const char *)v3 + 37920);
      v3[9736] = result;
      return result;
    }
    goto LABEL_26;
  }
  if ( a2 != 58 || v5 != 58 )
    goto LABEL_26;
  v8 = (int)v3 + 37921;
  if ( !*((_BYTE *)v3 + 37921) )
  {
    if ( *((_BYTE *)v3 + 192) )
    {
      sprintf((char *)v3 + 37920, ":%s:", v3 + 48);
      result = strlen((const char *)v3 + 37920);
      v3[9736] = result;
      return result;
    }
    goto LABEL_26;
  }
  v9 = strlen((const char *)v3 + 37920);
  v10 = v9;
  if ( v9 <= 2 || *((_BYTE *)v3 + v9 + 37919) != 58 )
  {
LABEL_26:
    result = v3[5];
    if ( a2 >= 32 )
    {
      v15 = *(_DWORD *)(result + 2060) + *(signed __int16 *)(*(_DWORD *)(result + 2052) + 168);
      result = a2;
      if ( a2 < v15 )
      {
        v16 = *((_BYTE *)v3 + 37920);
        if ( v16 == 63 || (v4 = v16 == 42, v17 = 1024, v4) )
          v17 = 200;
        result = v17 - 1;
        if ( v7 < result )
        {
          memcpy_0((char *)v3 + v3[9736] + 37921, (char *)v3 + v3[9736] + 37920, v7 - v3[9736] + 1);
          result = v3[9736];
          *((_BYTE *)v3 + result + 37920) = a2;
          ++v3[9736];
        }
      }
    }
    return result;
  }
  v11 = &Str1[-v8];
  do
  {
    v12 = *(_BYTE *)v8;
    v11[v8] = *(_BYTE *)v8;
    ++v8;
  }
  while ( v12 );
  *((_BYTE *)&v20 + v10 + 2) = 0;
  v13 = 0;
  v14 = (const char *)(v3 + 48);
  while ( _stricmp(Str1, v14) )
  {
    ++v13;
    v14 += 32;
    if ( v13 >= 8 )
    {
LABEL_25:
      v7 = v20;
      goto LABEL_26;
    }
  }
  v18 = 0;
  v19 = v13 + 1;
  while ( !LOBYTE(v3[8 * (v19 % 8 + 6)]) )
  {
    ++v18;
    ++v19;
    if ( v18 >= 8 )
      goto LABEL_25;
  }
  sprintf((char *)v3 + 37920, ":%s:", &v3[8 * (v19 % 8 + 6)]);
  result = strlen((const char *)v3 + 37920);
  v3[9736] = result;
  return result;
}
// 442A70: using guessed type char Str1[1024];

//----- (00442E00) --------------------------------------------------------
void __thiscall sub_442E00(char *this, int a2)
{
  char *v2; // ebp
  const char *v3; // ecx
  const char *v4; // edi
  unsigned int v5; // kr00_4
  const char *v6; // ebx
  signed int v7; // esi
  const char *v8; // [esp-14h] [ebp-1Ch]
  const char *v9; // [esp-10h] [ebp-18h]
  int v10; // [esp-Ch] [ebp-14h]
  int v11; // [esp+Ch] [ebp+4h]

  v2 = this;
  v3 = *(const char **)&this[8 * a2 + 620];
  if ( v3 )
  {
    v4 = &v3[strlen(v3) + 1];
    v5 = strlen(v4);
    v6 = &v4[v5 + 1];
    switch ( *(_DWORD *)&v2[8 * a2 + 624] )
    {
      case 0:
      case 1:
      case 5:
      case 8:
      case 9:
        strcpy(v2 + 37920, v6);
        goto LABEL_15;
      case 2:
        v10 = (int)&v4[v5 + 1];
        v9 = v4;
        v8 = ":%s:%s";
        goto LABEL_14;
      case 3:
        sprintf(v2 + 37920, "'%s", v6);
        goto LABEL_15;
      case 4:
        sprintf(v2 + 37920, "\"%s", v6);
        goto LABEL_15;
      case 6:
        v7 = 0;
        v11 = 0;
        break;
      case 7:
        v10 = (int)&v4[v5 + 1];
        v9 = v4;
        v8 = ":#%s:%s";
LABEL_14:
        sprintf(v2 + 37920, v8, v9, v10);
        goto LABEL_15;
      default:
        goto LABEL_15;
    }
    while ( *((_BYTE *)dword_563918 + v7 + 10024) )
    {
      if ( !_stricmp((const char *)dword_563918 + v7 + 10024, v4) )
      {
        sprintf(v2 + 37920, ";%d;%s", v11 + 1, v6);
        break;
      }
      ++v11;
      v7 += 32;
      if ( v7 >= 288 )
        break;
    }
LABEL_15:
    *((_DWORD *)v2 + 9736) = strlen(v2 + 37920);
    *((_DWORD *)v2 + 9737) = 0;
  }
}

//----- (00442FF0) --------------------------------------------------------
int __thiscall sub_442FF0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // edi
  int v6; // ecx
  int v7; // esi
  int result; // eax

  v5 = this;
  v6 = this[153] + a5;
  v7 = v6 / 120;
  v5[153] = v6 % 120;
  result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v5[149] + 4))(a2, a3, 0, 0);
  if ( result != -1 )
    result = (*(int (__thiscall **)(_DWORD *, _DWORD, int))v5[1])(v5 + 1, 0, -v7);
  return result;
}

//----- (00443080) --------------------------------------------------------
void *__thiscall sub_443080(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  void *result; // eax
  int v7; // ecx

  v4 = this;
  v5 = this[150];
  if ( v5 == 1 )
  {
    *((_DWORD *)dword_563908 + 2690) = 1;
    *((_DWORD *)dword_563908 + 3109) = this[151] + this[152] - a3;
    sub_401965(dword_563908);
    result = dword_563908;
    v4[112] = *((_DWORD *)dword_563908 + 3109);
  }
  else
  {
    v7 = this[47];
    if ( v7 && !v4[154] && !v5 )
      (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v7 + 4))(a2, a3, a4);
    result = (void *)((*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v4[149] + 4))(a2, a3, 0, 0) - 1);
    if ( !result )
    {
      result = dword_563908;
      *((_DWORD *)dword_563908 + 2690) = 1;
    }
  }
  return result;
}
// 401965: using guessed type int __thiscall sub_401965(_DWORD);

//----- (00443170) --------------------------------------------------------
int __thiscall sub_443170(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (00443180) --------------------------------------------------------
int __thiscall sub_443180(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax
  int v7; // ecx

  v5 = this;
  if ( !this[154] && this[150] == 1 )
  {
    sub_401113(dword_563908);
    *((_DWORD *)dword_563908 + 3109) = v5[151] + v5[152] - a3;
    sub_401965(dword_563908);
    result = *((_DWORD *)dword_563908 + 3109);
    v5[112] = result;
  }
  v7 = v5[47];
  if ( v7 && !v5[154] && !v5[150] )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v7 + 16))(a2, a3, a4, a5);
  v5[150] = 0;
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);

//----- (00443260) --------------------------------------------------------
void __thiscall sub_443260(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ecx
  struct _SYSTEMTIME SystemTime; // [esp+4h] [ebp-10h]

  v2 = this;
  if ( *((_DWORD *)dword_563918 + 2254) )
  {
    GetLocalTime(&SystemTime);
    if ( v2[113] != SystemTime.wMinute )
      v2[25] = 1;
  }
  v3 = v2[47];
  if ( v3 )
    (*(void (__stdcall **)(int))(*(_DWORD *)v3 + 36))(a2);
}

//----- (004432D0) --------------------------------------------------------
BOOL __thiscall sub_4432D0(_DWORD *this)
{
  return *((_DWORD *)dword_563918 + 2275)
      && !this[6]
      && *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1499);
}

//----- (00443310) --------------------------------------------------------
int __thiscall sub_443310(int *this)
{
  int *v1; // esi
  int result; // eax
  int v3; // ebp
  signed int v4; // ecx
  int v5; // ebx
  int v6; // eax
  int v7; // edi
  int v8; // ebx
  int i; // ebp
  int v10; // ecx
  int v11; // ebp
  int v12; // edi
  __int64 v13; // rax
  int j; // ebx
  int v15; // ebp
  int v16; // ecx
  int v17; // edi
  int v18; // ebx
  __int64 v19; // rax
  int k; // ebp
  int v21; // ecx
  int v22; // ST08_4
  int v23; // eax
  signed int v24; // eax
  int v25; // eax
  _DWORD *v26; // edi
  int v27; // ebx
  int v28; // [esp+4h] [ebp-64h]
  int v29; // [esp+4h] [ebp-64h]
  signed int v30; // [esp+8h] [ebp-60h]
  int v31; // [esp+Ch] [ebp-5Ch]
  int v32; // [esp+10h] [ebp-58h]
  struct _SYSTEMTIME SystemTime; // [esp+14h] [ebp-54h]
  char Dest; // [esp+24h] [ebp-44h]

  v1 = this;
  result = this[17];
  v28 = this[17];
  if ( result )
  {
    v3 = 0;
    if ( this[6] == 1 )
      v3 = 6;
    v4 = 2;
    v30 = 2;
    if ( *((_DWORD *)dword_563908 + 1535) != *((_DWORD *)dword_563908 + 1499) )
    {
      v30 = 7;
      v4 = 7;
    }
    v5 = *(_DWORD *)(result + 360);
    v32 = 12 * v3;
    v31 = 12 * v4;
    v6 = *(signed __int16 *)(12 * v4 + v5 + 4);
    v7 = abs(*(signed __int16 *)(12 * v3 + v5 + 4));
    v8 = *(_DWORD *)(v1[8156] + 4) - abs(v6);
    sub_4A4DC0(v28, v6 >> 31, v3, v1[8156], 0, 0, 3, 0, 0, 0);
    for ( i = abs(*(signed __int16 *)(*(_DWORD *)(v1[17] + 360) + 16)); v7 < v8; v7 += i )
      sub_4A4DC0(v1[17], v1[8156], 1, v1[8156], v7, 0, 3, 0, 0, 0);
    v10 = *(_DWORD *)(v1[17] + 360);
    v11 = *(_DWORD *)(v1[8156] + 8);
    v12 = abs(*(signed __int16 *)(v32 + v10 + 6));
    v13 = *(signed __int16 *)(v10 + 42);
    for ( j = abs(*(signed __int16 *)(v10 + 42)); v12 < v11; v12 += j )
      sub_4A4DC0(v1[17], SHIDWORD(v13), 3, v1[8156], 0, v12, 3, 0, 0, 0);
    v15 = *(_DWORD *)(v1[17] + 360);
    v16 = v1[8156];
    v17 = abs(*(signed __int16 *)(v31 + v15 + 6));
    v29 = *(_DWORD *)(v16 + 8);
    v18 = abs(*(signed __int16 *)(v15 + 66));
    v19 = *(signed __int16 *)(v15 + 64);
    for ( k = *(_DWORD *)(v16 + 4) - abs((_DWORD)v19); v17 < v29; v17 += v18 )
      sub_4A4DC0(v1[17], SHIDWORD(v19), 5, v1[8156], k, v17, 3, 0, 0, 0);
    v21 = v1[17];
    v22 = *(_DWORD *)(v1[8156] + 4) - abs(*(signed __int16 *)(*(_DWORD *)(v21 + 360) + v31 + 4));
    result = sub_4A4DC0(v21, v22, v30, v1[8156], v22, 0, 3, 0, 0, 0);
    v1[113] = -1;
    if ( *((_DWORD *)dword_563918 + 2254) )
    {
      GetLocalTime(&SystemTime);
      if ( SystemTime.wHour < 0xCu )
      {
        if ( SystemTime.wHour )
          v24 = SystemTime.wHour;
        else
          v24 = 12;
        sprintf(&Dest, "%d:%02dam", v24, SystemTime.wMinute);
      }
      else
      {
        v23 = SystemTime.wHour - 12;
        if ( SystemTime.wHour == 12 )
          v23 = 12;
        sprintf(&Dest, "%d:%02dpm", v23, SystemTime.wMinute);
      }
      v1[113] = SystemTime.wMinute;
      v25 = v1[8156];
      v26 = (_DWORD *)*((_DWORD *)dword_563908 + 1517);
      v27 = *(_DWORD *)(v25 + 4) - 120;
      sub_49B4F0(*((_DWORD **)dword_563908 + 1517), &Dest, 14, (_DWORD *)v1[8156], *(_DWORD *)(v25 + 4) - 121, 3, 3, 0);
      sub_49B4F0(v26, &Dest, 14, (_DWORD *)v1[8156], v27 - 1, 5, 3, 0);
      sub_49B4F0(v26, &Dest, 14, (_DWORD *)v1[8156], v27 + 1, 3, 3, 0);
      sub_49B4F0(v26, &Dest, 14, (_DWORD *)v1[8156], v27 + 1, 5, 3, 0);
      result = sub_49B4F0(v26, &Dest, 7, (_DWORD *)v1[8156], v27, 4, 3, 0);
    }
  }
  return result;
}

//----- (00443700) --------------------------------------------------------
int __thiscall sub_443700(_DWORD *this, char *a2, int a3)
{
  char *v3; // ebp
  _DWORD *v4; // edi
  int v5; // eax
  int v6; // ecx
  int v7; // ecx
  void (__stdcall *v8)(int, int *); // edx
  int v9; // ST14_4
  int v10; // eax
  int v11; // ebx
  int v12; // eax
  _DWORD *v13; // ecx
  int v14; // esi
  int v15; // ebx
  char v16; // al
  int v17; // eax
  char *v18; // esi
  char v19; // cl
  int v20; // edx
  int v21; // esi
  int v22; // eax
  char *v23; // esi
  char v24; // cl
  int v25; // edx
  int v26; // esi
  int v27; // edx
  char *v28; // esi
  char v29; // al
  int v30; // ecx
  int v31; // esi
  BOOL v32; // ecx
  char v33; // al
  signed int v34; // edx
  char *v35; // esi
  int v36; // eax
  int v37; // ebx
  int v38; // eax
  int v39; // eax
  char *v40; // edx
  char v41; // cl
  unsigned int v42; // eax
  char *v43; // edi
  char v44; // cl
  int v45; // ecx
  int v46; // eax
  int v47; // esi
  signed __int16 *v48; // ecx
  int v49; // edx
  _DWORD *v50; // esi
  int v51; // ecx
  int v52; // ecx
  int v54; // [esp+10h] [ebp-1B4h]
  int v55; // [esp+10h] [ebp-1B4h]
  int v56; // [esp+14h] [ebp-1B0h]
  _DWORD *v57; // [esp+18h] [ebp-1ACh]
  int v58; // [esp+1Ch] [ebp-1A8h]
  _DWORD *v59; // [esp+20h] [ebp-1A4h]
  int v60; // [esp+24h] [ebp-1A0h]
  int v61; // [esp+28h] [ebp-19Ch]
  int v62; // [esp+2Ch] [ebp-198h]
  int v63; // [esp+30h] [ebp-194h]
  int v64; // [esp+34h] [ebp-190h]
  int v65; // [esp+38h] [ebp-18Ch]
  char *v66; // [esp+3Ch] [ebp-188h]
  char Str; // [esp+40h] [ebp-184h]
  char v68; // [esp+BFh] [ebp-105h]
  char Dest[4]; // [esp+C0h] [ebp-104h]
  __int16 v70; // [esp+C4h] [ebp-100h]
  int v71; // [esp+1CCh] [ebp+8h]

  v3 = a2;
  v4 = this;
  v5 = this[12];
  v6 = this[14];
  v60 = v5;
  v63 = a3 + 3;
  v62 = v6;
  v7 = v4[8156];
  v61 = a3 + 1;
  v8 = *(void (__stdcall **)(int, int *))(*(_DWORD *)v7 + 40);
  v9 = *((unsigned __int16 *)dword_563908 + 76);
  v57 = v4;
  v66 = a2;
  v8(v9, &v60);
  v54 = v4[12];
  v10 = *((_DWORD *)dword_563918 + 2337);
  v59 = (_DWORD *)*((_DWORD *)dword_563908 + v10 + 1516);
  v11 = a3 + 8;
  v58 = *(signed __int16 *)(v59[513] + 174);
  if ( v10 + 1 <= 4 )
    v12 = *((_DWORD *)dword_563918 + 2337) + 1;
  else
    v12 = 4;
  v13 = (_DWORD *)*((_DWORD *)dword_563908 + v12 + 1516);
  v14 = *(signed __int16 *)(v13[513] + 174);
  sub_49B310(v13, "Required Skills:", 0, (_DWORD *)v4[8156], v54, v11, 3, 0);
  v55 = v54 + 16;
  v15 = v14 + v11;
  v71 = v15;
  if ( !*a2 )
  {
    v50 = v59;
    goto LABEL_61;
  }
  do
  {
    v16 = *v3;
    v56 = 6;
    if ( *v3 == 35 )
    {
      v17 = (v3++)[1];
      v18 = &Str;
      if ( isdigit(v17) )
      {
        do
        {
          v19 = *v3;
          v20 = (v3++)[1];
          *v18++ = v19;
        }
        while ( isdigit(v20) );
      }
      *v18 = 0;
      v21 = j__atol(&Str);
      sprintf(Dest, "Points>=%d", v21);
      v56 = (*(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 478)
           + *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 486)
           + *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 490) >= v21)
          + 1;
      goto LABEL_55;
    }
    if ( v16 == 64 )
    {
      v22 = (v3++)[1];
      v23 = &Str;
      if ( isdigit(v22) )
      {
        do
        {
          v24 = *v3;
          v25 = (v3++)[1];
          *v23++ = v24;
        }
        while ( isdigit(v25) );
      }
      *v23 = 0;
      v26 = j__atol(&Str);
      sprintf(Dest, "Experience>=%d", v26);
      v56 = (*(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 562) >= v26) + 1;
      goto LABEL_55;
    }
    if ( v16 == 37 )
    {
      v27 = (v3++)[1];
      v28 = &Str;
      if ( isdigit(v27) )
      {
        do
        {
          v29 = *v3;
          v30 = (v3++)[1];
          *v28++ = v29;
        }
        while ( isdigit(v30) );
      }
      *v28 = 0;
      v31 = j__atol(&Str);
      sprintf(Dest, "ClassId=%d", v31);
      if ( *((_DWORD *)dword_563908 + 6898) )
        v32 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060) == v31;
      else
        v32 = v31 == 0;
      v56 = v32 + 1;
      goto LABEL_55;
    }
    if ( v16 != 45 && !isdigit(v16) )
    {
      v33 = *v3++;
      if ( v33 == 33 )
      {
        strcpy(Dest, "NOT ");
        goto LABEL_55;
      }
      if ( v33 != 124 )
      {
        if ( v33 == 38 )
        {
          strcpy(Dest, " AND ");
        }
        else
        {
          Dest[0] = v33;
          Dest[1] = 0;
        }
        goto LABEL_55;
      }
      v34 = 542265120;
      LOBYTE(v70) = 0;
LABEL_54:
      *(_DWORD *)Dest = v34;
      goto LABEL_55;
    }
    v35 = &Str;
    while ( isdigit(*v3) || *v3 == 45 )
      *v35++ = *v3++;
    *v35 = 0;
    v36 = j__atol(&Str);
    v37 = v36;
    if ( v36 >= 0 )
      v38 = sub_48E510(*((_DWORD **)dword_563908 + 1512), v36);
    else
      v38 = sub_48E510(*((_DWORD **)dword_563908 + 1512), v36 / 1000);
    v56 = 1;
    if ( !v38 )
    {
      v34 = 1330795077;
      v70 = 82;
      goto LABEL_54;
    }
    v39 = v38 + 8;
    v40 = &Dest[-v39];
    do
    {
      v41 = *(_BYTE *)v39;
      v40[v39] = *(_BYTE *)v39;
      ++v39;
    }
    while ( v41 );
    if ( v37 < 0 )
    {
      sprintf(&Str, " %d+", -v37 % 1000);
      v42 = strlen(&Str) + 1;
      v43 = &v68;
      do
        v44 = (v43++)[1];
      while ( v44 );
      qmemcpy(v43, &Str, v42);
      v4 = v57;
    }
    v45 = *((_DWORD *)dword_563908 + 78);
    v46 = *(signed __int16 *)(v45 + 568);
    v47 = 0;
    v65 = *((_DWORD *)dword_563908 + 78);
    v64 = v46;
    if ( v46 <= 0 )
      goto LABEL_55;
    v48 = (signed __int16 *)(v45 + 570);
    while ( 1 )
    {
      v49 = *v48;
      if ( v37 < 0 )
        break;
      if ( v49 == v37 )
        goto LABEL_52;
LABEL_49:
      ++v47;
      ++v48;
      if ( v47 >= v46 )
        goto LABEL_55;
    }
    v4 = v57;
    if ( v49 / 1000 != v37 / 1000 )
    {
      v46 = v64;
      goto LABEL_49;
    }
    if ( -*(signed __int16 *)(v65 + 2 * v47 + 570) % 1000 < -v37 % 1000 )
      goto LABEL_55;
LABEL_52:
    v56 = 2;
LABEL_55:
    v50 = v59;
    v15 = v71;
    if ( v55 + sub_49AD40(v59, Dest) > v4[14] )
    {
      v15 = v58 + v71;
      v55 = v4[12] + 16;
      v71 += v58;
    }
    v55 += sub_49B310(v59, Dest, v56, (_DWORD *)v4[8156], v55, v15, 3, 0);
  }
  while ( *v3 );
  if ( v3 == v66 )
LABEL_61:
    sub_49B310(v50, "None", 2, (_DWORD *)v4[8156], v55, v15, 3, 0);
  v51 = v4[14];
  v60 = v4[12];
  v63 = v15 + v58 + 7;
  v62 = v51;
  v52 = v4[8156];
  v61 = v15 + v58 + 5;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v52 + 40))(*((unsigned __int16 *)dword_563908 + 76), &v60);
  return v15 + v58 + 12;
}

//----- (00443EB0) --------------------------------------------------------
int __thiscall sub_443EB0(_DWORD *this, char *a2, int a3)
{
  char *v3; // esi
  _DWORD *v4; // edi
  int v5; // ecx
  int v6; // kr00_4
  int v7; // ebp
  _DWORD *v8; // ebx
  char v9; // dl
  char *i; // eax
  bool v11; // zf
  char v12; // al
  char *j; // ecx
  char v14; // al
  char *k; // ecx
  char v16; // al
  char *l; // ecx
  _DWORD *v18; // ST08_4
  char v20; // [esp+18h] [ebp-104h]

  v3 = a2;
  v4 = this;
  v5 = this[12];
  v6 = v4[14] - v5 - 32;
  v7 = v5 + v6 / 2;
  v8 = (_DWORD *)*((_DWORD *)dword_563908 + 1517);
  v9 = *a2;
  for ( i = &v20; *v3; ++i )
  {
    if ( v9 == 9 )
      break;
    ++v3;
    *i = v9;
    v9 = *v3;
  }
  v11 = *v3 == 9;
  *i = 0;
  if ( v11 )
    ++v3;
  sub_49B310(v8, &v20, 2, (_DWORD *)v4[8156], v5, a3, 3, 0);
  v12 = *v3;
  for ( j = &v20; *v3; ++j )
  {
    if ( v12 == 9 )
      break;
    ++v3;
    *j = v12;
    v12 = *v3;
  }
  v11 = *v3 == 9;
  *j = 0;
  if ( v11 )
    ++v3;
  sub_49B490(v8, &v20, 9, (_DWORD *)v4[8156], v7, a3, 3, 0);
  v14 = *v3;
  for ( k = &v20; *v3; ++k )
  {
    if ( v14 == 9 )
      break;
    ++v3;
    *k = v14;
    v14 = *v3;
  }
  v11 = *v3 == 9;
  *k = 0;
  if ( v11 )
    ++v3;
  sub_49B310(v8, &v20, 2, (_DWORD *)v4[8156], v7 + 32, a3, 3, 0);
  v16 = *v3;
  for ( l = &v20; *v3; ++l )
  {
    if ( v16 == 9 )
      break;
    ++v3;
    *l = v16;
    v16 = *v3;
  }
  v18 = (_DWORD *)v4[8156];
  *l = 0;
  return sub_49B490(v8, &v20, 9, v18, v6 / 2 + v7 + 32, a3, 3, 0);
}

//----- (004440B0) --------------------------------------------------------
int __thiscall sub_4440B0(int *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // ebx
  int *v4; // esi
  int v5; // ecx
  int v6; // ebx
  int v7; // ecx
  int v8; // ebx
  int v9; // eax
  void (__thiscall *v10)(_DWORD *, _DWORD *); // edx
  signed int v11; // ebp
  int v12; // ebx
  int v13; // kr00_4
  int v14; // eax
  const char *v15; // ebx
  char *v16; // ecx
  unsigned __int8 v17; // al
  int v18; // eax
  int v19; // ecx
  int v20; // eax
  const char *v21; // ebx
  char *v22; // eax
  int v23; // ecx
  unsigned __int8 v24; // cl
  int v25; // ecx
  int v26; // eax
  int v27; // eax
  BOOL v28; // edi
  int v29; // eax
  int v30; // ecx
  int v31; // eax
  int v32; // edi
  _DWORD *v33; // ebp
  int v34; // ST0C_4
  int v35; // ebx
  int v36; // ebp
  signed int v37; // edi
  char *v38; // eax
  char *v39; // ecx
  int v40; // edi
  int v41; // ecx
  bool v42; // sf
  unsigned __int8 v43; // of
  int v44; // ecx
  const char *v45; // ebx
  char *v46; // eax
  unsigned __int8 v47; // cl
  int v48; // ecx
  int v50; // [esp+10h] [ebp-300h]
  int v51; // [esp+18h] [ebp-2F8h]
  int v52; // [esp+1Ch] [ebp-2F4h]
  int v53; // [esp+20h] [ebp-2F0h]
  int v54; // [esp+24h] [ebp-2ECh]
  int v55; // [esp+28h] [ebp-2E8h]
  int v56; // [esp+2Ch] [ebp-2E4h]
  int v57; // [esp+30h] [ebp-2E0h]
  int v58; // [esp+30h] [ebp-2E0h]
  const char *v59; // [esp+34h] [ebp-2DCh]
  int v60; // [esp+3Ch] [ebp-2D4h]
  int v61; // [esp+40h] [ebp-2D0h]
  int v62; // [esp+44h] [ebp-2CCh]
  int v63; // [esp+48h] [ebp-2C8h]
  int v64; // [esp+4Ch] [ebp-2C4h]
  int v65; // [esp+54h] [ebp-2BCh]
  char *v66; // [esp+54h] [ebp-2BCh]
  char *Str2; // [esp+58h] [ebp-2B8h]
  _DWORD *v68; // [esp+5Ch] [ebp-2B4h]
  int v69; // [esp+60h] [ebp-2B0h]
  BOOL v70; // [esp+64h] [ebp-2ACh]
  int v71; // [esp+68h] [ebp-2A8h]
  int v72; // [esp+6Ch] [ebp-2A4h]
  int v73; // [esp+70h] [ebp-2A0h]
  int v74; // [esp+74h] [ebp-29Ch]
  int v75; // [esp+78h] [ebp-298h]
  int v76; // [esp+7Ch] [ebp-294h]
  int v77; // [esp+80h] [ebp-290h]
  int v78; // [esp+84h] [ebp-28Ch]
  int v79; // [esp+88h] [ebp-288h]
  int v80; // [esp+8Ch] [ebp-284h]
  char Dest; // [esp+90h] [ebp-280h]
  char v82; // [esp+A0h] [ebp-270h]
  char v83[63]; // [esp+A1h] [ebp-26Fh]
  char Dst[33]; // [esp+E0h] [ebp-230h]
  char v85; // [esp+101h] [ebp-20Fh]
  char v86; // [esp+103h] [ebp-20Dh]
  char v87; // [esp+104h] [ebp-20Ch]
  char v88; // [esp+105h] [ebp-20Bh]
  char v89; // [esp+106h] [ebp-20Ah]
  char v90; // [esp+10Ah] [ebp-206h]
  char v91; // [esp+120h] [ebp-1F0h]
  char v92; // [esp+13Eh] [ebp-1D2h]
  char v93; // [esp+15Eh] [ebp-1B2h]
  char v94; // [esp+1E0h] [ebp-130h]

  v3 = *((_DWORD *)dword_563918 + 2319);
  v4 = this;
  v71 = *((_DWORD *)dword_563918 + 2311);
  v75 = v71;
  v76 = *((_DWORD *)dword_563918 + 2316);
  v77 = *((_DWORD *)dword_563918 + 2315);
  v5 = *((_DWORD *)dword_563918 + 2314);
  v72 = v3;
  v6 = *((_DWORD *)dword_563918 + 2312);
  v78 = v5;
  v7 = *((_DWORD *)dword_563918 + 2317);
  v73 = v6;
  v8 = *((_DWORD *)dword_563918 + 2313);
  v80 = *((_DWORD *)dword_563918 + 2318);
  v9 = *a2;
  v79 = v7;
  v10 = *(void (__thiscall **)(_DWORD *, _DWORD *))(v9 + 64);
  v74 = v8;
  v10(a2, a3);
  v11 = *((_DWORD *)dword_563918 + 2330);
  v56 = 0;
  v12 = v4[8155] - v4[9739] - 1;
  v51 = v4[8155] - v4[9739] - 1;
  v57 = 16;
  v65 = (a3[3] - a3[1]) / *(signed __int16 *)(*(_DWORD *)(v4[5] + 2052) + 174);
  v63 = (a3[3] - a3[1]) / *(signed __int16 *)(*(_DWORD *)(v4[5] + 2052) + 174);
  if ( v11 >= 16 )
    v57 = *((_DWORD *)dword_563918 + 2330);
  v13 = a3[2] - *a3;
  if ( v57 >= v13 / 2 )
  {
    v50 = v13 / 2;
  }
  else if ( v11 >= 16 )
  {
    v50 = *((_DWORD *)dword_563918 + 2330);
  }
  else
  {
    v50 = 16;
  }
  v54 = a3[2] - *a3 - v50 - 4;
  v55 = 0;
  v61 = (v4[8155] - 4000) & ((v4[8155] - 4000 < 0) - 1);
  memset(Dst, 255, 0x100u);
  v14 = v12 % 4000;
  v93 = 9;
  v85 = 1;
  v91 = 8;
  v86 = 5;
  v87 = 12;
  v88 = 3;
  v92 = 10;
  v89 = 0;
  v90 = 7;
  if ( v12 >= v61 )
  {
    v15 = (const char *)v4[2 * v14 + 155];
    v59 = (const char *)v4[2 * v14 + 155];
    Str2 = (char *)&v15[strlen(v15) + 1];
    v16 = &Str2[strlen(Str2) + 1];
    v52 = v4[2 * v14 + 156];
    v53 = v4[v52 + 37];
    if ( v52 == 5 )
    {
      v17 = Dst[*v16];
      if ( v17 != -1 )
      {
        v53 = v17;
        ++v16;
      }
    }
    v18 = v54;
    if ( !*v15 )
      v18 = v50 + v54;
    v55 = sub_49AE50((_DWORD *)v4[5], &v94, v16, v18);
  }
  v19 = *(_DWORD *)(v4[5] + 2052);
  v68 = (_DWORD *)*((_DWORD *)dword_563908
                  + (*((_DWORD *)dword_563918 + 2337) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2337) - 1)
                  + 1516);
  v58 = *(signed __int16 *)(v19 + 174);
  if ( v65 > 0 )
  {
    v69 = -*(signed __int16 *)(v19 + 174);
    v60 = *(signed __int16 *)(v19 + 174);
    do
    {
      v64 = a3[3] - v60;
      if ( v51 >= v61 )
      {
        v20 = 0;
        if ( !*(&v71 + v52) )
        {
          if ( *v59 )
            v20 = v50 + 4;
          v62 = v20;
          if ( v56 == v55 - 1 )
          {
            v4[9740] = v51 == v61;
            if ( *v59 )
            {
              v27 = sub_4B4E20(v4[4], (int)v59);
              v66 = 0;
              v28 = v27 >= 0;
              v70 = v27 >= 0;
              if ( v27 >= 0 )
              {
                v29 = sub_4B4E20(v4[4], (int)v59);
                v66 = (char *)sub_4B4980((_DWORD *)v4[4], v29);
              }
              v30 = v50;
              if ( v52 == 6 )
                v30 = v50 - sub_49AD40(v68, (char *)&unk_511B9C) - 2;
              if ( v28 >= 0 )
                v30 -= 5;
              v82 = 62;
              strcpy(v83, v59);
              v31 = sub_49ADA0((_DWORD *)v4[5], &v82, v30);
              v32 = v64;
              v33 = a2;
              v34 = v50 + *a3;
              *(&v82 + v31) = 62;
              v83[v31] = 0;
              v35 = sub_49B4F0((_DWORD *)v4[5], v83, v4[v52 + 37], a2, v34, v64, 3, 0);
              if ( v52 == 6 )
              {
                v36 = 0;
                v37 = 0;
                do
                {
                  if ( !*((_BYTE *)dword_563918 + v37 + 10024) )
                    break;
                  if ( !_stricmp((const char *)dword_563918 + v37 + 10024, Str2) )
                    break;
                  v37 += 32;
                  ++v36;
                }
                while ( v37 < 288 );
                sprintf(&Dest, "%d", v36 + 1);
                sub_49B4F0(v68, &Dest, 0, a2, *a3 - v35 + v50 - 2, v64 + 1, 3, 0);
                v32 = v64;
                v33 = a2;
              }
              else if ( *((_DWORD *)dword_563918 + 2224) )
              {
                switch ( v52 )
                {
                  case 2:
                    v38 = "P";
                    break;
                  case 3:
                    v38 = "T";
                    break;
                  case 4:
                    v38 = "E";
                    break;
                  case 7:
                    v38 = "S";
                    break;
                  default:
                    v38 = " ";
                    break;
                }
                sub_49B4F0(v68, v38, 0, a2, *a3 - v35 + v50 - 2, v64 + 1, 3, 30);
              }
              if ( v70 )
              {
                if ( v66 )
                  sub_49B4F0((_DWORD *)v4[5], v66, 1, v33, *a3 + 7, v32, 3, 0);
                else
                  sub_4022E3(v33, *a3 + 4, v58 / 2 + v32 - 1, 4, *((_WORD *)dword_563908 + 73));
              }
            }
          }
          v39 = &v94;
          v40 = v55 - v56 - 1;
          if ( v94 == 95 )
            v94 = 32;
          for ( ; v40 > 0; v39 += strlen(v39) + 1 )
            --v40;
          sub_49B310((_DWORD *)v4[5], v39, v53, a2, v62 + *a3, v64, 3, 0);
          if ( ++v56 < v55 )
            goto LABEL_67;
          v41 = v51 - 1;
          v43 = __OFSUB__(v51 - 1, v61);
          v42 = v51 - 1 - v61 < 0;
          v56 = 0;
          --v51;
          if ( v42 ^ v43 )
            goto LABEL_67;
          v44 = v41 % 4000;
          v45 = (const char *)v4[2 * v44 + 155];
          v59 = (const char *)v4[2 * v44 + 155];
          Str2 = (char *)&v45[strlen(v45) + 1];
          v46 = &Str2[strlen(Str2) + 1];
          v52 = v4[2 * v44 + 156];
          v53 = v4[v52 + 37];
          if ( v52 == 5 )
          {
            v47 = Dst[*v46];
            if ( v47 != -1 )
            {
              v53 = v47;
              ++v46;
            }
          }
          v48 = v54;
          if ( !*v45 )
            v48 = v50 + v54;
          v26 = sub_49AE50((_DWORD *)v4[5], &v94, v46, v48);
          goto LABEL_66;
        }
        v56 = 0;
        if ( --v51 >= v61 )
        {
          v21 = (const char *)v4[2 * (v51 % 4000) + 155];
          v59 = (const char *)v4[2 * (v51 % 4000) + 155];
          Str2 = (char *)&v21[strlen(v21) + 1];
          v22 = &Str2[strlen(Str2) + 1];
          v23 = v4[2 * (v51 % 4000) + 156];
          v52 = v4[2 * (v51 % 4000) + 156];
          v53 = v4[v23 + 37];
          if ( v23 == 5 )
          {
            v24 = Dst[*v22];
            if ( v24 != -1 )
            {
              v53 = v24;
              ++v22;
            }
          }
          v25 = v54;
          if ( !*v21 )
            v25 = v50 + v54;
          v26 = sub_49AE50((_DWORD *)v4[5], &v94, v22, v25);
          ++v63;
          v60 += v69;
LABEL_66:
          v55 = v26;
          goto LABEL_67;
        }
      }
LABEL_67:
      v60 += v58;
      --v63;
    }
    while ( v63 > 0 );
  }
  return (*(int (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*a2 + 68))(0, 0, -1, -1);
}
// 4022E3: using guessed type _DWORD __cdecl sub_4022E3(_DWORD, _DWORD, _DWORD, _DWORD, __int16);
// 4440B0: using guessed type char Dst[33];
// 4440B0: using guessed type char var_26F[63];

//----- (00444B00) --------------------------------------------------------
unsigned int __thiscall sub_444B00(char *this, char *Source)
{
  char *v2; // edi
  int v3; // esi
  unsigned int result; // eax

  v2 = this;
  v3 = (int)(this + 37920);
  strncpy(this + 37920, Source, 0x400u);
  *(_BYTE *)(v3 + 1023) = 0;
  result = strlen((const char *)v3);
  *((_DWORD *)v2 + 9736) = result;
  *((_DWORD *)v2 + 9737) = 0;
  return result;
}

//----- (00444B70) --------------------------------------------------------
FILE *__thiscall sub_444B70(char *this, char *Filename)
{
  char *v2; // esi
  FILE *result; // eax
  FILE *v4; // ebp
  _BYTE *v5; // esi
  signed int v6; // edi
  _BYTE *v7; // eax
  char Source; // [esp+8h] [ebp-404h]

  v2 = this;
  result = fopen(Filename, "rt");
  v4 = result;
  if ( result )
  {
    v5 = v2 + 32896;
    memset(v5, 0, 0x12D8u);
    v6 = 0;
    do
    {
      if ( feof(v4) )
        break;
      v7 = (_BYTE *)sub_4C352E((int)&Source, 1024, v4);
      if ( v7 )
      {
        for ( ; *v7 >= 32; ++v7 )
          ;
        *v7 = 0;
        strncpy(v5, &Source, 0xC8u);
        v5[199] = 0;
      }
      ++v6;
      v5 += 201;
    }
    while ( v6 < 24 );
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (00444C80) --------------------------------------------------------
FILE *__thiscall sub_444C80(char *this, char *Filename)
{
  char *v2; // esi
  FILE *result; // eax
  FILE *v4; // edi
  int v5; // esi
  signed int v6; // ebx

  v2 = this;
  result = fopen(Filename, "wt");
  v4 = result;
  if ( result )
  {
    v5 = (int)(v2 + 32896);
    v6 = 24;
    do
    {
      sub_4C3361(v4, (int)"%s\n", v5);
      v5 += 201;
      --v6;
    }
    while ( v6 );
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (00444CF0) --------------------------------------------------------
signed int __thiscall sub_444CF0(_DWORD *this, signed int a2)
{
  signed int result; // eax
  _DWORD *v3; // esi
  bool v4; // zf

  result = a2;
  v3 = this;
  v4 = a2 == this[7];
  this[6] = a2;
  if ( !v4 )
  {
    result = sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
    v3[7] = v3[6];
  }
  v3[25] = 1;
  return result;
}

//----- (00444D40) --------------------------------------------------------
char *__stdcall sub_444D40(int a1, int a2, char *Source, int a4)
{
  char *result; // eax
  char *v5; // esi
  int v6; // edi
  bool v7; // zf
  char *v8; // [esp+10h] [ebp-808h]
  char Dest; // [esp+14h] [ebp-804h]

  if ( strlen(Source) <= 0xC8 )
    return (char *)(*(int (__stdcall **)(int, int, char *, int))(*(_DWORD *)dword_56391C + 20))(a1, a2, Source, a4);
  result = sub_48DC70(&Dest, Source, 0xC7u);
  v5 = &Dest;
  if ( (signed int)result > 0 )
  {
    v6 = a4;
    v8 = result;
    do
    {
      (*(void (__stdcall **)(int, int, char *, int))(*(_DWORD *)dword_56391C + 20))(a1, a2, v5, v6);
      v6 = 0;
      result = (char *)strlen(v5);
      v7 = v8-- == (char *)1;
      v5 = &result[(_DWORD)v5 + 1];
    }
    while ( !v7 );
  }
  return result;
}
// 56391C: using guessed type int dword_56391C;

//----- (00444EA0) --------------------------------------------------------
void __thiscall sub_444EA0(_DWORD *this)
{
  _DWORD *v1; // esi
  FILE *v2; // eax
  void **v3; // edi
  signed int v4; // ebp
  char *v5; // eax
  int v6; // edx
  char v7; // cl
  char *v8; // eax
  struct tm *v9; // eax
  char *v10; // eax
  void *v11; // edi
  void *v12; // edi
  void *v13; // edi
  void (__stdcall ***v14)(signed int); // ecx
  void (__stdcall ***v15)(signed int); // ecx
  __time64_t Time; // [esp+8h] [ebp-10Ch]
  char Dest; // [esp+10h] [ebp-104h]

  v1 = this;
  v2 = (FILE *)this[8158];
  *this = &off_513EC8;
  this[1] = &MessageManager::`vftable';
  this[2] = &MessageManager::`vftable';
  if ( v2 )
    fclose(v2);
  v3 = (void **)(v1 + 155);
  v4 = 4000;
  do
  {
    if ( *v3 )
    {
      free(*v3);
      *v3 = 0;
    }
    v3 += 2;
    --v4;
  }
  while ( v4 );
  if ( v1[154] )
    sub_401113(dword_563908);
  if ( *((_DWORD *)dword_563918 + 2226) )
  {
    v5 = (char *)dword_563908 + 27876;
    v6 = &Dest - ((_BYTE *)dword_563908 + 27876);
    do
    {
      v7 = *v5;
      v5[v6] = *v5;
      ++v5;
    }
    while ( v7 );
    v8 = sub_48D1A0(&Dest, ".cfg");
    if ( v8 )
      sprintf(v8, ".mc%d", *((_DWORD *)dword_563918 + 2204));
  }
  else
  {
    sprintf(&Dest, "lastused.mc%d", *((_DWORD *)dword_563918 + 2204));
  }
  sub_402374(&Dest);
  if ( v1[8159] )
  {
    _time64(&Time);
    v9 = _localtime64(&Time);
    v10 = asctime(v9);
    sub_4C3361((FILE *)v1[8159], (int)"Log Stopped: %s", v10);
    fclose((FILE *)v1[8159]);
    v1[8159] = 0;
  }
  v11 = (void *)v1[47];
  if ( v11 )
  {
    sub_402040(v1[47]);
    j__free(v11);
    v1[47] = 0;
  }
  v12 = (void *)v1[3];
  if ( v12 )
  {
    sub_4B4D60((_DWORD *)v1[3]);
    j__free(v12);
    v1[3] = 0;
  }
  v13 = (void *)v1[4];
  if ( v13 )
  {
    sub_4B4F10((int *)v1[4]);
    j__free(v13);
    v1[4] = 0;
  }
  v14 = (void (__stdcall ***)(signed int))v1[8156];
  if ( v14 )
  {
    (**v14)(1);
    v1[8156] = 0;
  }
  v15 = (void (__stdcall ***)(signed int))v1[149];
  if ( v15 )
  {
    (**v15)(1);
    v1[149] = 0;
  }
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 513EB0: using guessed type void *MessageManager::`vftable';
// 513EBC: using guessed type void *MessageManager::`vftable';
// 513EC8: using guessed type int (__stdcall *off_513EC8)(int, int, int, int);

//----- (00445100) --------------------------------------------------------
char *__thiscall sub_445100(_DWORD *this, int a2, int a3, int a4)
{
  char *result; // eax
  int v5; // edx
  _DWORD *v6; // esi
  int v7; // edx
  int v8; // ecx
  int v9; // edx
  int v10; // ecx
  int v11; // edx
  int v12; // ecx
  int v13; // ebp
  int v14; // edi
  int v15; // ecx
  int v16; // edx
  unsigned int v17; // eax
  char *v18; // edx
  char v19; // cl
  HGLOBAL v20; // edi
  char *v21; // esi
  _BYTE *v22; // eax
  char v23; // cl
  int v24; // ebp
  int v25; // edi
  int v26; // ecx
  int v27; // edx
  unsigned int v28; // eax
  char *v29; // edx
  char v30; // cl
  char *v31; // esi
  _BYTE *v32; // eax
  char v33; // cl
  int v34; // eax
  int v35; // ebp
  int v36; // edx
  const char *v37; // ecx
  const char *v38; // ecx
  char *v39; // edi
  char *v40; // esi
  _BYTE *v41; // eax
  char v42; // cl
  int v43; // eax
  int v44; // ebp
  int v45; // edx
  const char *v46; // edi
  int v47; // eax
  unsigned int v48; // eax
  char *v49; // edx
  char v50; // cl
  char *v51; // esi
  _BYTE *v52; // eax
  char v53; // cl
  int v54; // [esp+8h] [ebp-22Ch]
  int v55; // [esp+Ch] [ebp-228h]
  int v56; // [esp+10h] [ebp-224h]
  int v57; // [esp+14h] [ebp-220h]
  int v58; // [esp+18h] [ebp-21Ch]
  int v59; // [esp+1Ch] [ebp-218h]
  int v60; // [esp+20h] [ebp-214h]
  int v61; // [esp+24h] [ebp-210h]
  int v62; // [esp+28h] [ebp-20Ch]
  int v63; // [esp+2Ch] [ebp-208h]
  char v64[512]; // [esp+30h] [ebp-204h]

  result = (char *)dword_563918;
  v55 = *((_DWORD *)dword_563918 + 2319);
  v5 = *((_DWORD *)dword_563918 + 2312);
  v6 = this;
  v54 = *((_DWORD *)dword_563918 + 2311);
  v56 = v5;
  v7 = *((_DWORD *)dword_563918 + 2313);
  v58 = v54;
  v8 = *((_DWORD *)dword_563918 + 2316);
  v57 = v7;
  v9 = *((_DWORD *)dword_563918 + 2315);
  v59 = v8;
  v10 = *((_DWORD *)dword_563918 + 2314);
  v60 = v9;
  v11 = *((_DWORD *)dword_563918 + 2317);
  v61 = v10;
  v12 = *((_DWORD *)dword_563918 + 2318);
  v62 = v11;
  v63 = v12;
  if ( !a2 )
  {
    switch ( a4 )
    {
      case 0:
        result = (char *)sub_401668(v6 - 2);
        break;
      case 1:
        result = (char *)OpenClipboard(0);
        if ( result )
        {
          v13 = v6[8153];
          v14 = 0;
          v64[0] = 0;
          if ( v13 <= 0 )
            goto LABEL_61;
          v15 = v13 + 8000;
          do
          {
            v16 = v15 % 4000;
            if ( v6[2 * (v15 % 4000) + 153] && v6[2 * v16 + 154] == 2 )
            {
              v17 = (unsigned int)&result[v16
                                        + 2
                                        + strlen((const char *)(v6[2 * v16 + 153]
                                                              + strlen((const char *)v6[2 * v16 + 153])
                                                              + 1))];
              v18 = &v64[-v17];
              do
              {
                v19 = *(_BYTE *)v17;
                v18[v17] = *(_BYTE *)v17;
                ++v17;
              }
              while ( v19 );
              if ( v64[0] )
              {
                v20 = GlobalAlloc(0x42u, 0x3E8u);
                v21 = v64;
                v22 = GlobalLock(v20);
                do
                {
                  v23 = *v21;
                  *v22++ = *v21++;
                }
                while ( v23 );
                goto LABEL_60;
              }
              goto LABEL_61;
            }
            ++v14;
            --v15;
          }
          while ( v14 < v13 );
          result = (char *)CloseClipboard();
        }
        break;
      case 2:
        result = (char *)OpenClipboard(0);
        if ( result )
        {
          v24 = v6[8153];
          v25 = 0;
          v64[0] = 0;
          if ( v24 <= 0 )
            goto LABEL_61;
          v26 = v24 + 8000;
          do
          {
            v27 = v26 % 4000;
            if ( v6[2 * (v26 % 4000) + 153] && !*(&v54 + v6[2 * v27 + 154]) )
            {
              v28 = (unsigned int)&result[v27
                                        + 2
                                        + strlen((const char *)(v6[2 * v27 + 153]
                                                              + strlen((const char *)v6[2 * v27 + 153])
                                                              + 1))];
              v29 = &v64[-v28];
              do
              {
                v30 = *(_BYTE *)v28;
                v29[v28] = *(_BYTE *)v28;
                ++v28;
              }
              while ( v30 );
              if ( v64[0] )
              {
                v20 = GlobalAlloc(0x42u, 0x3E8u);
                v31 = v64;
                v32 = GlobalLock(v20);
                do
                {
                  v33 = *v31;
                  *v32++ = *v31++;
                }
                while ( v33 );
                goto LABEL_60;
              }
              goto LABEL_61;
            }
            ++v25;
            --v26;
          }
          while ( v25 < v24 );
          result = (char *)CloseClipboard();
        }
        break;
      case 3:
        result = (char *)OpenClipboard(0);
        if ( result )
        {
          v43 = v6[8153];
          v44 = 0;
          v64[0] = 0;
          if ( v43 <= 0 )
            goto LABEL_61;
          do
          {
            v45 = (v43 - v44 + 8000) % 4000;
            v46 = (const char *)v6[2 * v45 + 153];
            if ( v46
              && !*(&v54 + v6[2 * v45 + 154])
              && !_stricmp(v46, (const char *)(*((_DWORD *)dword_563908 + 6897) + 32)) )
            {
              v48 = (unsigned int)&v46[v47 + 2 + strlen(&v46[strlen(v46) + 1])];
              v49 = &v64[-v48];
              do
              {
                v50 = *(_BYTE *)v48;
                v49[v48] = *(_BYTE *)v48;
                ++v48;
              }
              while ( v50 );
              if ( v64[0] )
              {
                v20 = GlobalAlloc(0x42u, 0x3E8u);
                v51 = v64;
                v52 = GlobalLock(v20);
                do
                {
                  v53 = *v51;
                  *v52++ = *v51++;
                }
                while ( v53 );
                goto LABEL_60;
              }
              goto LABEL_61;
            }
            v43 = v6[8153];
            ++v44;
          }
          while ( v44 < v43 );
          result = (char *)CloseClipboard();
        }
        break;
      case 4:
        result = (char *)OpenClipboard(0);
        if ( result )
        {
          v34 = v6[8153];
          v35 = 0;
          v64[0] = 0;
          if ( v34 > 0 )
          {
            while ( 1 )
            {
              v36 = (v34 - v35 + 8000) % 4000;
              v37 = (const char *)v6[2 * v36 + 153];
              if ( v37 )
              {
                if ( !*(&v54 + v6[2 * v36 + 154]) )
                {
                  v38 = &v37[strlen(v37) + 1];
                  v39 = (char *)&v38[strlen(v38) + 1];
                  if ( sub_48D1A0(v39, "http")
                    || sub_48D1A0(v39, ".com")
                    || sub_48D1A0(v39, ".org")
                    || sub_48D1A0(v39, ".gov")
                    || sub_48D1A0(v39, ".net")
                    || sub_48D1A0(v39, (char *)&unk_513EF4) )
                  {
                    break;
                  }
                }
              }
              v34 = v6[8153];
              if ( ++v35 >= v34 )
                return (char *)CloseClipboard();
            }
            strcpy(v64, v39);
            if ( v64[0] )
            {
              v20 = GlobalAlloc(0x42u, 0x3E8u);
              v40 = v64;
              v41 = GlobalLock(v20);
              do
              {
                v42 = *v40;
                *v41++ = *v40++;
              }
              while ( v42 );
LABEL_60:
              GlobalUnlock(v20);
              SetClipboardData(1u, v20);
            }
          }
LABEL_61:
          result = (char *)CloseClipboard();
        }
        break;
      case 5:
        result = (char *)sub_402243(v6 - 2);
        break;
      case 6:
        *((_DWORD *)dword_563918 + 2275) = 1;
        break;
      case 7:
        *((_DWORD *)dword_563918 + 2275) = 0;
        break;
      default:
        return result;
    }
  }
  return result;
}
// 401668: using guessed type int __thiscall sub_401668(_DWORD);
// 402243: using guessed type int __thiscall sub_402243(_DWORD);
// 445100: using guessed type char var_204[512];

//----- (00445780) --------------------------------------------------------
int __thiscall sub_445780(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void (__stdcall ***v3)(signed int); // ecx
  void (__stdcall ***v4)(signed int); // ecx
  int v5; // edi
  int v6; // ebx
  bool v7; // zf
  int v8; // ecx
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  void *v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  int result; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int v29; // eax
  int v30; // [esp+44h] [ebp+4h]

  v2 = this;
  v3 = (void (__stdcall ***)(signed int))this[8156];
  if ( v3 )
  {
    (**v3)(1);
    v2[8156] = 0;
  }
  v4 = (void (__stdcall ***)(signed int))v2[149];
  if ( v4 )
  {
    (**v4)(1);
    v2[149] = 0;
  }
  v2[5] = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2337) + 1516);
  v2[25] = 1;
  if ( a2 )
  {
    v2[8] = *a2;
    v2[9] = a2[1];
    v2[10] = a2[2];
    v2[11] = a2[3];
  }
  v5 = v2[10] - v2[8];
  v6 = v2[11] - v2[9];
  v7 = v2[17] == 0;
  v30 = v2[10] - v2[8];
  v2[12] = 0;
  v2[14] = v5 - 8;
  v2[13] = 0;
  v2[15] = v6;
  if ( !v7 )
  {
    v2[12] = *((_DWORD *)dword_563908 + 7649);
    v8 = v2[5];
    v2[14] = v5 - 8 - *((_DWORD *)dword_563908 + 7650);
    v2[13] = *((_DWORD *)dword_563908 + 7651);
    v2[15] = v6 - *(signed __int16 *)(*(_DWORD *)(v8 + 2052) + 174) - 2;
  }
  v9 = operator new(0xCCu);
  if ( v9 )
    v10 = sub_49FBC0(v9, v2[16], v5, v6, 0);
  else
    v10 = 0;
  v2[8156] = v10;
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, signed int, signed int))(*v10 + 68))(v10, 0, 0, -1, -1);
  v11 = (void *)v2[47];
  if ( v11 )
  {
    sub_402040(v2[47]);
    j__free(v11);
    v2[47] = 0;
  }
  v12 = operator new(0x420u);
  if ( v12 )
    v13 = sub_49A5F0(v12, 1, v2 + 8, 0);
  else
    v13 = 0;
  v2[149] = v13;
  if ( !*((_DWORD *)dword_563918 + 2275)
    || v2[6]
    || *((_DWORD *)dword_563908 + 1535) != *((_DWORD *)dword_563908 + 1499) )
  {
    v19 = operator new(0x18u);
    if ( v19 )
      v20 = sub_49A490(v19, 110, 0, v30 - 220, *((_DWORD *)dword_563908 + 7651), 1);
    else
      v20 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v20);
    v21 = operator new(0x18u);
    if ( v21 )
      v22 = sub_49A490(v21, 0, 0, 30, *((_DWORD *)dword_563908 + 7651), 1);
    else
      v22 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v22);
    v23 = operator new(0x18u);
    if ( v23 )
      v24 = sub_49A490(v23, 31, 0, 74, *((_DWORD *)dword_563908 + 7651), 2);
    else
      v24 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v24);
    v25 = operator new(0x18u);
    if ( v25 )
      v26 = sub_49A490(v25, v30 - 110, 0, 74, *((_DWORD *)dword_563908 + 7651), 3);
    else
      v26 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v26);
    v27 = operator new(0x18u);
    if ( v27 )
      v28 = sub_49A490(v27, 0, *((_DWORD *)dword_563908 + 7651), v30, v6 - *((_DWORD *)dword_563908 + 7651), 4);
    else
      v28 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v28);
    if ( operator new(0x7Cu) )
      v29 = sub_401BAE(
              *((_DWORD *)dword_563908 + 499),
              0,
              v2 + 1,
              v2[16],
              0,
              v2[14],
              v2[13] + v2[9],
              v2[15] - v2[13],
              1);
    else
      v29 = 0;
    v2[47] = v29;
    result = (*(int (__stdcall **)(_DWORD, _DWORD))v2[1])(0, 0);
  }
  else
  {
    v14 = operator new(0x18u);
    if ( v14 )
      v15 = sub_49A490(v14, 0, 0, 40, 12, 1);
    else
      v15 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v15);
    v16 = operator new(0x18u);
    if ( v16 )
      v17 = sub_49A490(v16, 0, 12, v30, v6 - 12, 4);
    else
      v17 = 0;
    result = (*(int (__stdcall **)(_DWORD *))(*(_DWORD *)v2[149] + 16))(v17);
  }
  return result;
}
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);

//----- (00445D20) --------------------------------------------------------
int __thiscall sub_445D20(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int result; // eax
  _DWORD *v8; // eax
  int v9; // ecx
  int v10; // esi

  v5 = this;
  v6 = this[47];
  if ( v6 && !v5[154] && !v5[150] )
    (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)v6 + 8))(a2, a3, a4, a5);
  result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v5[149] + 4))(a2, a3, 0, 0);
  switch ( result )
  {
    case 1:
      if ( !v5[154] )
      {
        sub_4024D2(v5);
        result = 1;
        v5[150] = 1;
        v5[151] = a3;
        v5[152] = *((_DWORD *)dword_563908 + 3109);
        *((_DWORD *)dword_563908 + 2690) = 1;
      }
      break;
    case 2:
      if ( v5[6] )
        result = sub_401CCB(0);
      else
        result = sub_401CCB(1);
      break;
    case 3:
      result = sub_401956(dword_563908);
      break;
    case 4:
      if ( a5 == 1 )
      {
        v8 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v9 = *((_DWORD *)dword_563908 + 355);
          if ( v9 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 36))(1);
            v8 = dword_563908;
          }
          v8[355] = 0;
        }
        if ( operator new(0xD18u) )
          v10 = sub_4010FF(
                  *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                  "Message Copy/Paste",
                  v5 + 2,
                  a2,
                  a3,
                  0,
                  0,
                  0);
        else
          v10 = 0;
        *((_DWORD *)dword_563908 + 355) = v10;
        sub_4024F0("Copy ~Current Line", 0, 0);
        sub_4024F0("Copy Last Pri~vate", 1, 0);
        sub_4024F0("Copy Last ~Received", 2, 0);
        sub_4024F0("Copy Last ~Sent", 3, 0);
        sub_4024F0("Copy Last ~URL", 4, 0);
        sub_4024F0(&Source, 0, 0);
        sub_4024F0("~Paste", 5, 0);
        sub_4024F0(&Source, 0, 0);
        if ( *((_DWORD *)dword_563918 + 2275) )
          result = sub_4024F0("~Opaque Messages", 7, 0);
        else
          result = sub_4024F0("~Transparent Messages", 6, 0);
      }
      break;
    default:
      return result;
  }
  return result;
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401956: using guessed type int __thiscall sub_401956(_DWORD);
// 401CCB: using guessed type _DWORD __stdcall sub_401CCB(_DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);

//----- (00446010) --------------------------------------------------------
int __thiscall sub_446010(int *this)
{
  int *v1; // esi
  _DWORD *v2; // edi
  int v3; // ecx
  int v4; // eax
  int v5; // edx
  int v6; // ecx
  int v7; // ebx
  int v8; // ecx
  int v9; // eax
  signed int v10; // eax
  int v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // ebx
  int v15; // ebx
  int v16; // eax
  bool v17; // zf
  int v18; // eax
  int v19; // ecx
  int v20; // ebx
  int v21; // eax
  __int64 v22; // rax
  int v23; // ebx
  int v24; // ebx
  __int16 v25; // ax
  int v26; // ebx
  __int16 v27; // ax
  int v28; // ebx
  __int16 v29; // ax
  int v30; // ebx
  __int16 v31; // ax
  int v32; // ebx
  int v33; // ebx
  unsigned int v34; // edx
  int v35; // ebx
  int v36; // ebx
  unsigned int v37; // edx
  int v38; // ebx
  int v39; // ebx
  signed int v40; // ecx
  int v41; // ecx
  _WORD *i; // eax
  int v43; // ecx
  int v44; // eax
  int v45; // ebx
  int v46; // ecx
  int v47; // eax
  int v48; // eax
  char *v49; // edx
  char v50; // cl
  int v51; // eax
  int v52; // ebx
  int v53; // ebx
  unsigned int v54; // edx
  int v55; // ebx
  int v56; // ebx
  __int16 v57; // ax
  const char *v58; // eax
  int v59; // ebx
  int v60; // ebx
  int v61; // ecx
  int v62; // eax
  int v63; // ecx
  signed int v64; // ecx
  unsigned __int64 v65; // st7
  int v66; // eax
  int *v67; // eax
  int v68; // eax
  int v69; // ecx
  int v70; // ebx
  int v71; // ecx
  int v72; // ebx
  int v73; // eax
  int v74; // ebx
  char *v75; // ecx
  int v76; // eax
  bool v77; // sf
  signed int v78; // eax
  int v79; // eax
  char *v80; // eax
  int v81; // edx
  char v82; // cl
  int v83; // ebx
  int v84; // ebx
  int v85; // ebx
  int v86; // ebx
  int v87; // ebx
  int v88; // ebx
  int v89; // eax
  int v90; // ebx
  int v91; // ebx
  signed int v92; // ecx
  unsigned __int64 v93; // st7
  int v94; // ecx
  int v95; // ebx
  double v96; // st7
  double v97; // st7
  int v98; // eax
  _DWORD *v99; // ecx
  int v100; // ST84_4
  int v101; // ebx
  unsigned __int64 v102; // st7
  unsigned int v103; // edx
  unsigned __int64 v104; // st7
  int v105; // eax
  int v106; // ecx
  int v107; // ebx
  int v108; // ecx
  int v109; // ebx
  int v110; // eax
  int v111; // ebx
  int v112; // eax
  int v113; // ebx
  const char *v114; // eax
  _DWORD *v115; // ecx
  int v116; // eax
  int v117; // eax
  _DWORD *v118; // ecx
  int v119; // eax
  int v120; // edx
  char *v121; // edx
  char *v122; // eax
  char *v123; // edx
  char v124; // cl
  int v125; // ecx
  int v126; // eax
  int v127; // ebx
  int v128; // ecx
  int v129; // ecx
  char *v130; // edx
  int result; // eax
  int v132; // ebx
  int v133; // ecx
  int v134; // esi
  int v135; // eax
  int v136; // [esp+60h] [ebp-1BFCh]
  int v137; // [esp+60h] [ebp-1BFCh]
  int v138; // [esp+60h] [ebp-1BFCh]
  int v139; // [esp+60h] [ebp-1BFCh]
  int v140; // [esp+64h] [ebp-1BF8h]
  char *Str; // [esp+68h] [ebp-1BF4h]
  char *Stra; // [esp+68h] [ebp-1BF4h]
  char *Strb; // [esp+68h] [ebp-1BF4h]
  char *Strc; // [esp+68h] [ebp-1BF4h]
  char *Strd; // [esp+68h] [ebp-1BF4h]
  const char *Stre; // [esp+68h] [ebp-1BF4h]
  char *Strf; // [esp+68h] [ebp-1BF4h]
  int v148; // [esp+6Ch] [ebp-1BF0h]
  int v149; // [esp+6Ch] [ebp-1BF0h]
  int v150; // [esp+6Ch] [ebp-1BF0h]
  int v151; // [esp+6Ch] [ebp-1BF0h]
  int v152; // [esp+6Ch] [ebp-1BF0h]
  char *v153; // [esp+6Ch] [ebp-1BF0h]
  signed int v154; // [esp+6Ch] [ebp-1BF0h]
  int v155; // [esp+6Ch] [ebp-1BF0h]
  int v156; // [esp+70h] [ebp-1BECh]
  int v157; // [esp+70h] [ebp-1BECh]
  int v158; // [esp+70h] [ebp-1BECh]
  int v159; // [esp+70h] [ebp-1BECh]
  char *v160; // [esp+74h] [ebp-1BE8h]
  int v161; // [esp+74h] [ebp-1BE8h]
  char *v162; // [esp+74h] [ebp-1BE8h]
  int v163; // [esp+74h] [ebp-1BE8h]
  int v164; // [esp+74h] [ebp-1BE8h]
  int v165; // [esp+74h] [ebp-1BE8h]
  int v166; // [esp+74h] [ebp-1BE8h]
  int v167; // [esp+74h] [ebp-1BE8h]
  int v168; // [esp+78h] [ebp-1BE4h]
  int v169; // [esp+78h] [ebp-1BE4h]
  int v170; // [esp+78h] [ebp-1BE4h]
  signed int *v171; // [esp+78h] [ebp-1BE4h]
  int v172; // [esp+78h] [ebp-1BE4h]
  int v173; // [esp+7Ch] [ebp-1BE0h]
  int v174; // [esp+7Ch] [ebp-1BE0h]
  int v175; // [esp+7Ch] [ebp-1BE0h]
  int *v176; // [esp+7Ch] [ebp-1BE0h]
  int v177; // [esp+7Ch] [ebp-1BE0h]
  int v178; // [esp+80h] [ebp-1BDCh]
  signed int v179; // [esp+80h] [ebp-1BDCh]
  signed int v180; // [esp+80h] [ebp-1BDCh]
  int v181; // [esp+80h] [ebp-1BDCh]
  int v182; // [esp+84h] [ebp-1BD8h]
  int v183; // [esp+84h] [ebp-1BD8h]
  int v184; // [esp+88h] [ebp-1BD4h]
  int v185; // [esp+8Ch] [ebp-1BD0h]
  int v186; // [esp+90h] [ebp-1BCCh]
  int v187; // [esp+94h] [ebp-1BC8h]
  int v188; // [esp+98h] [ebp-1BC4h]
  int v189; // [esp+9Ch] [ebp-1BC0h]
  int v190; // [esp+A0h] [ebp-1BBCh]
  int v191; // [esp+A4h] [ebp-1BB8h]
  int v192; // [esp+A8h] [ebp-1BB4h]
  int v193; // [esp+ACh] [ebp-1BB0h]
  int v194; // [esp+B0h] [ebp-1BACh]
  char *Str1[512]; // [esp+B4h] [ebp-1BA8h]
  char v196[4]; // [esp+8B4h] [ebp-13A8h]
  char Dest[4]; // [esp+8C4h] [ebp-1398h]
  char v198; // [esp+9C4h] [ebp-1298h]
  char v199; // [esp+9D4h] [ebp-1288h]
  char Str2[4]; // [esp+AD4h] [ebp-1188h]
  char v201; // [esp+B14h] [ebp-1148h]
  char v202; // [esp+B54h] [ebp-1108h]
  char v203; // [esp+B94h] [ebp-10C8h]
  char v204; // [esp+BD4h] [ebp-1088h]
  char v205; // [esp+C14h] [ebp-1048h]
  char Dst; // [esp+C54h] [ebp-1008h]

  v1 = this;
  v2 = (_DWORD *)*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2337) + 1516);
  v168 = v1[14] - v1[12];
  v140 = *(signed __int16 *)(v2[513] + 174);
  v3 = this[118] - (v1[15] - v1[13]);
  v193 = v1[15] - v1[13];
  v4 = v1[117];
  v5 = v4;
  if ( v4 >= v3 )
    v5 = v3;
  if ( v5 >= 0 )
  {
    if ( v4 >= v3 )
      v4 = v3;
  }
  else
  {
    v4 = 0;
  }
  v6 = v1[8156];
  v1[117] = v4;
  (*(void (__stdcall **)(int *))(*(_DWORD *)v6 + 64))(v1 + 12);
  v7 = v1[13] - v1[117];
  v8 = v1[12];
  v9 = v1[116] - 1;
  v194 = v1[13] - v1[117];
  v156 = v8;
  switch ( v9 )
  {
    case 0:
      v10 = abs(v1[115]);
      if ( v10 <= 5100 )
      {
        v11 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v10 + 8008);
        v136 = v11;
        if ( v11 )
        {
          v173 = (*(int (**)(void))(*(_DWORD *)v11 + 4))();
          sprintf(Dest, "%s : %s", v136 + 104, v136 + 72);
          sub_49B310(*((_DWORD **)dword_563908 + 1519), Dest, 2, (_DWORD *)v1[8156], v156, v7, 3, 0);
          v12 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1519) + 2052) + 174);
          v13 = v1[14];
          v185 = v1[12];
          v14 = v12 + v7;
          v188 = v14 + 3;
          v187 = v13;
          v186 = v14 + 1;
          (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v1[8156] + 40))(
            *((unsigned __int16 *)dword_563908 + 76),
            &v185);
          v15 = v14 + 8;
          v16 = sub_49AE50(v2, &Dst, *(void **)(v136 + 4), v168);
          v160 = &Dst;
          if ( v16 > 0 )
          {
            v148 = v16;
            do
            {
              sub_49B310(v2, v160, 0, (_DWORD *)v1[8156], v156, v15, 3, 0);
              v15 += v140;
              v17 = v148-- == 1;
              v160 += strlen(v160) + 1;
            }
            while ( !v17 );
          }
          v18 = sub_4027C0(v136 + 8, v15 + 4);
          v19 = v1[12];
          v20 = v18;
          v189 = (v168 - 32) / 2 + v19 + 16;
          v191 = (v168 - 32) / 2 + v19 + 17;
          v21 = *(_DWORD *)(v136 + 144);
          v190 = v20;
          if ( v21 )
            sprintf(Dest, "Weight:\t%.3f\tPrice:\t%d", (double)*(signed int *)(v136 + 132) / 1000.0, v21);
          else
            sprintf(Dest, "Weight:\t%.3f", (double)*(signed int *)(v136 + 132) / 1000.0);
          sub_401C21(Dest, v20);
          LOWORD(v22) = *(_WORD *)(v136 + 166);
          v23 = v140 + v20;
          if ( (_WORD)v22 )
          {
            v22 = (signed __int16)v22;
            if ( (v22 & 0x8000u) == 0i64 )
              sprintf(Dest, "Max Allowed(soft):\t%d", (HIDWORD(v22) ^ (unsigned int)v22) - HIDWORD(v22));
            else
              sprintf(Dest, "Max Allowed(hard):\t%d", (HIDWORD(v22) ^ (unsigned int)v22) - HIDWORD(v22));
          }
          else
          {
            sprintf(Dest, "Max Allowed:\tUnlimited");
          }
          sub_401C21(Dest, v23);
          v7 = v140 + v23;
          v161 = v7;
          switch ( v173 )
          {
            case 6:
            case 8:
              if ( v173 == 8 )
              {
                v41 = 0;
                for ( i = (_WORD *)(v136 + 668); *i > 0; ++v41 )
                  i += 8;
                sprintf(Dest, "Sub-Weapon Count:\t%d", v41);
                sub_401C21(Dest, v7);
                v7 += v140;
              }
              v157 = 0;
              if ( v173 == 8 )
              {
                v43 = *((_DWORD *)dword_563908 + 1507);
                v44 = sub_4028EC(*(signed __int16 *)(v136 + 668));
                v150 = v44;
                if ( v44 && (*(int (**)(void))(*(_DWORD *)v44 + 4))() == 6 )
                  v157 = v150;
              }
              else
              {
                v157 = v136;
              }
              sprintf(
                Dest,
                "Fire Delay:\t%d ms\tReload Delay:\t%d ms",
                10 * *(_DWORD *)(v136 + 288),
                10 * *(_DWORD *)(v136 + 320));
              sub_401C21(Dest, v7);
              v45 = v140 + v7;
              strcpy(Str2, "None");
              v46 = *((_DWORD *)dword_563908 + 1507);
              v47 = sub_4028EC(*(signed __int16 *)(v136 + 412));
              if ( v47 )
              {
                v48 = v47 + 72;
                v49 = &Str2[-v48];
                do
                {
                  v50 = *(_BYTE *)v48;
                  v49[v48] = *(_BYTE *)v48;
                  ++v48;
                }
                while ( v50 );
              }
              sprintf(Dest, "Ammo Capacity:\t%d\tAmmo Type:\t%s", *(signed __int16 *)(v136 + 406), Str2);
              sub_401C21(Dest, v45);
              v7 = v140 + v45;
              v161 = v7;
              if ( v157 )
              {
                v51 = *(_DWORD *)(v136 + 340);
                if ( v51 >= 0 )
                {
                  sprintf(
                    Dest,
                    "Ammo Per Shot:\t%d\tEnergy Cost:\t%.2f kJ",
                    *(signed __int16 *)(v136 + 404),
                    (double)*(signed int *)(v136 + 340) / 1000.0);
                }
                else
                {
                  if ( v51 == -1 )
                    sprintf(Dest, "Ammo Per Shot:\t%d\tEnergy Cost:\tNever", *(signed __int16 *)(v136 + 404));
                  if ( *(_DWORD *)(v136 + 340) == -2 )
                    sprintf(Dest, "Ammo Per Shot:\t%d\tEnergy Cost:\tAll", *(signed __int16 *)(v136 + 404));
                  if ( *(_DWORD *)(v136 + 340) == -3 )
                    sprintf(Dest, "Ammo Per Shot:\t%d\tEnergy Cost:\tLeft", *(signed __int16 *)(v136 + 404));
                }
                sub_401C21(Dest, v7);
                v52 = v140 + v7;
                sprintf(
                  Dest,
                  "Fire Angle:\t%d d\tFriction:\t%.2f%%/s",
                  (*(signed __int16 *)(v157 + 810) + *(signed __int16 *)(v157 + 812)) / 2,
                  (double)(10000 - *(signed __int16 *)(v157 + 792)));
                sub_401C21(Dest, v52);
                v53 = v140 + v52;
                v54 = (signed int)((unsigned __int64)(1717986919i64 * *(signed __int16 *)(v157 + 804)) >> 32) >> 2;
                sprintf(
                  Dest,
                  "Muzzle Velocity:\t%.2f m/s\tLifetime:\t%.2f s",
                  (double)(signed int)(v54 + (v54 >> 31)) * 0.0362857,
                  (double)(signed int)abs(*(_DWORD *)(v157 + 836)) / 100.0);
                sub_401C21(Dest, v53);
                v55 = v140 + v53;
                sprintf(
                  Dest,
                  "Wall Bounces:\t%d\tFloor Bounces:\t%d",
                  *(signed __int16 *)(v157 + 814),
                  *(signed __int16 *)(v157 + 830));
                sub_401C21(Dest, v55);
                v56 = v140 + v55;
                v57 = *(_WORD *)(v157 + 816);
                if ( v57 < 0 )
                  strcpy(v196, "None");
                else
                  sprintf(v196, "%.2f m", (double)v57 * 0.0362857);
                v58 = "No";
                if ( *(_WORD *)(v157 + 806) )
                  v58 = "Yes";
                sprintf(Dest, "Proximity Radius:\t%s\tBallistic:\t%s", v196, v58);
                sub_401C21(Dest, v56);
                v59 = v140 + v56;
                v175 = v1[12];
                v161 = v59;
                v60 = v140 + v59;
                v61 = v175 + 4 * v168 / 10;
                v62 = 3 * v168 / 10;
                v151 = v61;
                v63 = v62 + v61;
                v137 = v63 + v62;
                v170 = v63;
                sub_49B310(v2, "Damage Type", 2, (_DWORD *)v1[8156], v175, v60, 3, 0);
                sub_49B4F0(v2, "Inner", 2, (_DWORD *)v1[8156], v151, v60, 3, 0);
                sub_49B4F0(v2, "Outer", 2, (_DWORD *)v1[8156], v170, v60, 3, 0);
                sub_49B4F0(v2, "Blast Radius", 2, (_DWORD *)v1[8156], v137, v60, 3, 0);
                v7 = v140 + v60;
                v179 = 0;
                v64 = 0;
                Stra = (char *)(v157 + 1332);
                do
                {
                  if ( *((_BYTE *)dword_563908 + v64 + 57994) )
                  {
                    sub_49B310(v2, (char *)dword_563908 + v64 + 57994, 9, (_DWORD *)v1[8156], v175, v7, 3, 0);
                    sprintf(Dest, "%.2f", (double)*((signed int *)Stra - 1) / 1000.0);
                    sub_49B490(v2, Dest, 9, (_DWORD *)v1[8156], v151, v7, 3, 0);
                    sprintf(Dest, "%.2f", (double)*(signed int *)Stra / 1000.0);
                    sub_49B490(v2, Dest, 9, (_DWORD *)v1[8156], v170, v7, 3, 0);
                    *(double *)&v65 = (double)*((signed __int16 *)Stra - 4) * 0.0362857;
                    sprintf(Dest, "%.2f m", (_DWORD)v65, (_DWORD)(v65 >> 32));
                    sub_49B490(v2, Dest, 9, (_DWORD *)v1[8156], v137, v7, 3, 0);
                    v7 += v140;
                    v64 = v179;
                  }
                  Stra += 16;
                  v64 += 32;
                  v179 = v64;
                }
                while ( v64 < 192 );
              }
              break;
            case 7:
              v66 = sub_4B2F30(*((int **)dword_563908 + 1511), *(_DWORD *)(v136 + 608));
              if ( v66 )
              {
                sprintf(Dest, "Type:\t%s", v66 + 980);
                sub_401C21(Dest, v7);
                v7 += v140;
                v161 = v7;
              }
              break;
            case 13:
              sprintf(Dest, "Battery Capacity:\t%d kJ", *(_DWORD *)(v136 + 308));
              sub_401C21(Dest, v7);
              v24 = v140 + v7;
              sprintf(Dest, "Energy Rate:\t%.2f kJ/s", (double)*(signed int *)(v136 + 312) / 10.0);
              sub_401C21(Dest, v24);
              v25 = *(_WORD *)(v136 + 316);
              v26 = v140 + v24;
              if ( v25 < 0 )
                strcpy(Dest, "Stealth Distance:\tNone");
              else
                sprintf(Dest, "Stealth Distance:\t%.2f m", (double)v25 * 0.0362857);
              sub_401C21(Dest, v26);
              v27 = *(_WORD *)(v136 + 318);
              v28 = v140 + v26;
              if ( v27 < 0 )
                strcpy(Dest, "Cloak Distance:\tNone");
              else
                sprintf(Dest, "Cloak Distance:\t%.2f m", (double)v27 * 0.0362857);
              sub_401C21(Dest, v28);
              v29 = *(_WORD *)(v136 + 320);
              v30 = v140 + v28;
              if ( v29 == -1 )
                strcpy(Dest, "AntiStealth Distance:\tInfinite");
              else
                sprintf(Dest, "AntiStealth Distance:\t%.2f m", (double)v29 * 0.0362857);
              sub_401C21(Dest, v30);
              v31 = *(_WORD *)(v136 + 322);
              v32 = v140 + v30;
              if ( v31 == -1 )
                qmemcpy(Dest, "AntiCloak Distance:\tInfinite", 0x1Du);
              else
                sprintf(Dest, "AntiCloak Distance:\t%.2f m", (double)v31 * 0.0362857);
              sub_401C21(Dest, v32);
              v33 = v140 + v32;
              v34 = (signed int)((unsigned __int64)(27487790700i64 * *(signed __int16 *)(v136 + 338)) >> 32) >> 6;
              sprintf(Dest, "Speed Increase/Decrease:\t%d%%", v34 + (v34 >> 31));
              sub_401C21(Dest, v33);
              v35 = v140 + v33;
              sprintf(Dest, "Hyper-Speed Increase/Decrease:\t%d%%", 100 * *(signed __int16 *)(v136 + 340) / 1000);
              sub_401C21(Dest, v35);
              v36 = v140 + v35;
              v37 = (signed int)((unsigned __int64)(27487790700i64 * *(signed __int16 *)(v136 + 336)) >> 32) >> 6;
              sprintf(Dest, "Rotation Increase/Decrease:\t%d%%", v37 + (v37 >> 31));
              sub_401C21(Dest, v36);
              v38 = v140 + v36;
              sprintf(Dest, "Thrust Increase/Decrease:\t%d%%", 100 * *(signed __int16 *)(v136 + 334) / 1000);
              sub_401C21(Dest, v38);
              v178 = v1[12];
              v39 = v38 + 2 * v140;
              v174 = v178 + 4 * v168 / 10 + 3 * v168 / 10;
              v149 = v178 + 4 * v168 / 10;
              sub_49B310(v2, "Armor Type", 2, (_DWORD *)v1[8156], v178, v39, 3, 0);
              sub_49B4F0(v2, "Ignore-Damage", 2, (_DWORD *)v1[8156], v149, v39, 3, 0);
              sub_49B4F0(v2, "Protection", 2, (_DWORD *)v1[8156], v174, v39, 3, 0);
              v7 = v140 + v39;
              v169 = 0;
              v40 = 0;
              v161 = v7;
              Str = (char *)(v136 + 364);
              do
              {
                if ( *((_BYTE *)dword_563908 + v40 + 57994) )
                {
                  sub_49B310(v2, (char *)dword_563908 + v40 + 57994, 9, (_DWORD *)v1[8156], v178, v7, 3, 0);
                  sprintf(Dest, "%.2f", (double)*((signed int *)Str + 1) / 1000.0);
                  sub_49B490(v2, Dest, 9, (_DWORD *)v1[8156], v149, v7, 3, 0);
                  sprintf(Dest, "%.1f%%", (double)*(signed __int16 *)Str / 10.0);
                  sub_49B490(v2, Dest, 9, (_DWORD *)v1[8156], v174, v7, 3, 0);
                  v7 += v140;
                  v40 = v169;
                }
                Str += 8;
                v40 += 32;
                v169 = v40;
              }
              while ( v40 < 192 );
              break;
            default:
              break;
          }
          v192 = v161;
          v67 = &v189;
          goto LABEL_73;
        }
      }
      goto LABEL_150;
    case 1:
      v68 = sub_4B2F30(*((int **)dword_563908 + 1511), v1[115]);
      v138 = v68;
      if ( !v68 )
        goto LABEL_150;
      v182 = (*(int (**)(void))(*(_DWORD *)v68 + 4))();
      sub_49B310(*((_DWORD **)dword_563908 + 1519), (char *)(v138 + 980), 2, (_DWORD *)v1[8156], v156, v7, 3, 0);
      v69 = v1[14];
      v70 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1519) + 2052) + 174) + v7;
      v189 = v1[12];
      v192 = v70 + 3;
      v191 = v69;
      v71 = v1[8156];
      v190 = v70 + 1;
      (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v71 + 40))(*((unsigned __int16 *)dword_563908 + 76), &v189);
      v72 = v70 + 8;
      v73 = sub_49AE50(v2, &Dst, *(void **)(v138 + 4), v168);
      v162 = &Dst;
      if ( v73 > 0 )
      {
        v152 = v73;
        do
        {
          sub_49B310(v2, v162, 0, (_DWORD *)v1[8156], v156, v72, 3, 0);
          v72 += v140;
          v17 = v152-- == 1;
          v162 += strlen(v162) + 1;
        }
        while ( !v17 );
      }
      v74 = sub_4027C0(v138 + 916, v72 + 4);
      v158 = v1[12];
      v75 = Str2;
      Strb = (char *)(v158 + 256);
      v153 = Str2;
      v176 = (int *)(v138 + 1164);
      v180 = 6;
      do
      {
        v76 = *v176;
        v17 = *v176 == 0;
        v77 = *v176 < 0;
        *v75 = 0;
        if ( !v77 && !v17 )
        {
          v78 = abs(v76);
          if ( v78 <= 5100 )
          {
            v79 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v78 + 8008);
            if ( v79 )
            {
              v80 = (char *)(v79 + 72);
              v81 = v75 - v80;
              do
              {
                v82 = *v80;
                v80[v81] = *v80;
                ++v80;
              }
              while ( v82 );
              v75 = v153;
            }
          }
        }
        ++v176;
        v75 += 64;
        v17 = v180-- == 1;
        v153 = v75;
      }
      while ( !v17 );
      sub_49B310(v2, "Item #1:", 2, (_DWORD *)v1[8156], v158, v74, 3, 0);
      sub_49B4F0(v2, Str2, 9, (_DWORD *)v1[8156], (int)Strb, v74, 3, 0);
      v83 = v140 + v74;
      sub_49B310(v2, "Item #2:", 2, (_DWORD *)v1[8156], v158, v83, 3, 0);
      sub_49B4F0(v2, &v201, 9, (_DWORD *)v1[8156], (int)Strb, v83, 3, 0);
      v84 = v140 + v83;
      sub_49B310(v2, "Item #3:", 2, (_DWORD *)v1[8156], v158, v84, 3, 0);
      sub_49B4F0(v2, &v202, 9, (_DWORD *)v1[8156], (int)Strb, v84, 3, 0);
      v85 = v140 + v84;
      sub_49B310(v2, "Item #4:", 2, (_DWORD *)v1[8156], v158, v85, 3, 0);
      sub_49B4F0(v2, &v203, 9, (_DWORD *)v1[8156], (int)Strb, v85, 3, 0);
      v86 = v140 + v85;
      sub_49B310(v2, "Item #5:", 2, (_DWORD *)v1[8156], v158, v86, 3, 0);
      sub_49B4F0(v2, &v204, 9, (_DWORD *)v1[8156], (int)Strb, v86, 3, 0);
      v87 = v140 + v86;
      sub_49B310(v2, "Item #6:", 2, (_DWORD *)v1[8156], v158, v87, 3, 0);
      sub_49B4F0(v2, &v205, 9, (_DWORD *)v1[8156], (int)Strb, v87, 3, 0);
      v159 = v1[12];
      v88 = v87 + 2 * v140;
      Strc = (char *)(v159 + 4 * v168 / 10);
      v89 = 2 * v168 / 10;
      v177 = (int)&Strc[v89];
      v181 = (int)&Strc[v89 + v89];
      v163 = v181 + v89;
      sub_49B4F0(v2, "Vehicle", 2, (_DWORD *)v1[8156], v159 + 4 * v168 / 10, v88, 3, 0);
      sub_49B4F0(v2, "Vehicle", 2, (_DWORD *)v1[8156], v177, v88, 3, 0);
      sub_49B4F0(v2, "Occupant", 2, (_DWORD *)v1[8156], v181, v88, 3, 0);
      sub_49B4F0(v2, "Occupant", 2, (_DWORD *)v1[8156], v163, v88, 3, 0);
      v90 = v140 + v88;
      sub_49B310(v2, "Armor Type", 2, (_DWORD *)v1[8156], v159, v90, 3, 0);
      sub_49B4F0(v2, "Ignore", 2, (_DWORD *)v1[8156], (int)Strc, v90, 3, 0);
      sub_49B4F0(v2, "Protection", 2, (_DWORD *)v1[8156], v177, v90, 3, 0);
      sub_49B4F0(v2, "Ignore", 2, (_DWORD *)v1[8156], v181, v90, 3, 0);
      sub_49B4F0(v2, "Protection", 2, (_DWORD *)v1[8156], v163, v90, 3, 0);
      v91 = v140 + v90;
      v154 = 0;
      v171 = (signed int *)(v138 + 1100);
      v92 = 0;
      do
      {
        if ( *((_BYTE *)dword_563908 + v92 + 57994) )
        {
          sub_49B310(v2, (char *)dword_563908 + v92 + 57994, 9, (_DWORD *)v1[8156], v159, v91, 3, 0);
          sprintf(&v199, "%.2f", (double)*(v171 - 2) / 1000.0);
          sub_49B490(v2, &v199, 9, (_DWORD *)v1[8156], (int)Strc, v91, 3, 0);
          sprintf(&v199, "%.1f%%", (double)*(signed __int16 *)v171 / 10.0);
          sub_49B490(v2, &v199, 9, (_DWORD *)v1[8156], v177, v91, 3, 0);
          sprintf(&v199, "%.2f", (double)*(v171 - 1) / 1000.0);
          sub_49B490(v2, &v199, 9, (_DWORD *)v1[8156], v181, v91, 3, 0);
          *(double *)&v93 = (double)(1000 - *((signed __int16 *)v171 + 1)) / 10.0;
          sprintf(&v199, "%.1f%%", (_DWORD)v93, (_DWORD)(v93 >> 32));
          sub_49B490(v2, &v199, 9, (_DWORD *)v1[8156], v163, v91, 3, 0);
          v91 += v140;
          v92 = v154;
        }
        v171 += 3;
        v92 += 32;
        v154 = v92;
      }
      while ( v92 < 192 );
      v7 = v140 + v91;
      v94 = v138;
      v185 = v1[12] + 212;
      v17 = *(_WORD *)(v138 + 1052) == 0;
      v187 = v185 + 1;
      v186 = v7;
      v164 = v7;
      if ( !v17 )
      {
        sprintf(
          &v199,
          "Hit Points:\t%d\tEnergy Use:\t%.2f kJ/s",
          *(_DWORD *)(v138 + 1080),
          (double)*(signed int *)(v138 + 1064) / 10.0);
        sub_401C21(&v199, v7);
        v95 = v140 + v7;
        if ( *(_DWORD *)(v138 + 1068) < 0 )
          v96 = (double)*(signed int *)((char *)dword_563908 + 57650) / 1000.0;
        else
          v96 = (double)*(signed int *)(v138 + 1068) / 1000.0;
        sprintf(&v198, "%.2f", LODWORD(v96), (_DWORD)(*(unsigned __int64 *)&v96 >> 32));
        if ( *(_DWORD *)(v138 + 1072) < 0 )
          v97 = (double)*(signed int *)((char *)dword_563908 + 57654) / 1000.0;
        else
          v97 = (double)*(signed int *)(v138 + 1072) / 1000.0;
        sprintf(v196, "%.2f", LODWORD(v97), (_DWORD)(*(unsigned __int64 *)&v97 >> 32));
        sprintf(&v199, "Carry Weight:\t%s\tCarry Max:\t%s", &v198, v196);
        sub_401C21(&v199, v95);
        v7 = v140 + v95;
        v94 = v138;
        v164 = v7;
      }
      if ( v182 == 2 )
      {
        if ( *(_WORD *)(v94 + 1052) )
        {
          v103 = (signed int)((unsigned __int64)(1717986919i64 * *(signed int *)(v138 + 1928)) >> 32) >> 2;
          sprintf(
            &v199,
            "Top Speed:\t%.2f m/s\tRotate Rate:\t%.1f d/s",
            (double)(signed int)(v103 + (v103 >> 31)) * 0.0362857,
            (double)(36000 * *(_DWORD *)(v138 + 1924)) / 240000.0);
          sub_401C21(&v199, v7);
          v7 += v140;
          *(double *)&v104 = (double)(480 * *(_DWORD *)(v138 + 1920) / 127) * 0.0362857;
          sprintf(
            &v199,
            "Accel.:\t%.2f m/s/s\tFriction:\t%.2f%%/s",
            (_DWORD)v104,
            (_DWORD)(v104 >> 32),
            (double)(100 * (800 * *(_DWORD *)(v138 + 1916) / 255)) / 1000.0);
          goto LABEL_110;
        }
LABEL_111:
        v188 = v164;
        v67 = &v185;
        goto LABEL_73;
      }
      if ( v182 == 3 )
      {
        if ( *(_WORD *)(v94 + 1052) )
        {
          *(double *)&v102 = (double)(36000 * *(_DWORD *)(v138 + 1504)) / 240000.0;
          sprintf(&v199, "Rotate Rate:\t%.1f d/s", (_DWORD)v102, (_DWORD)(v102 >> 32));
LABEL_110:
          sub_401C21(&v199, v7);
          v7 += v140;
          v164 = v7;
          goto LABEL_111;
        }
        goto LABEL_111;
      }
      if ( v182 != 5 )
        goto LABEL_111;
      v184 = sub_4B2F30(*((int **)dword_563908 + 1511), *(_WORD *)(v138 + 1680));
      if ( !v184 || !*(_DWORD *)(v138 + 1676) )
        goto LABEL_111;
      v98 = *((_DWORD *)dword_563918 + 2337) + 1;
      if ( v98 > 4 )
        v98 = 4;
      v99 = (_DWORD *)*((_DWORD *)dword_563908 + v98 + 1516);
      v100 = *(signed __int16 *)(v99[513] + 174);
      sub_49B310(v99, "Chained Turret Requirements:", 0, (_DWORD *)v1[8156], v1[12], v7, 3, 0);
      v101 = v100 + v7;
      sprintf(
        &v199,
        "This turret requires %d %s turret(s) in a %d pixel radius in order to be operational.",
        *(signed __int16 *)(v138 + 1684),
        v184 + 980,
        *(signed __int16 *)(v138 + 1682));
      sub_49B310(v2, &v199, 2, (_DWORD *)v1[8156], v1[12], v101, 3, 0);
      v7 = v140 + v101;
      v188 = v164;
      v67 = &v185;
LABEL_73:
      (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v1[8156] + 40))(*((unsigned __int16 *)dword_563908 + 76), v67);
LABEL_150:
      result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[8156] + 68))(0, 0, -1, -1);
      v132 = v7 - v194;
      v133 = v1[47];
      v1[118] = v132;
      if ( v133 )
      {
        v134 = v1[117];
        v135 = v134 + v193;
        if ( v132 < v134 + v193 )
          v135 = v132;
        result = sub_401C67(0, v132, v134, v135, 0);
      }
      return result;
    case 3:
      v105 = sub_48E510(*((_DWORD **)dword_563908 + 1512), v1[115]);
      v165 = v105;
      if ( !v105 )
        goto LABEL_150;
      sprintf(Str2, "%s : %s", v105 + 40, v105 + 8);
      sub_49B310(*((_DWORD **)dword_563908 + 1519), Str2, 2, (_DWORD *)v1[8156], v156, v7, 3, 0);
      v106 = v1[14];
      v107 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1519) + 2052) + 174) + v7;
      v189 = v1[12];
      v192 = v107 + 3;
      v191 = v106;
      v108 = v1[8156];
      v190 = v107 + 1;
      (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v108 + 40))(*((unsigned __int16 *)dword_563908 + 76), &v189);
      v109 = v107 + 8;
      v110 = sub_49AE50(v2, &Dst, *(void **)(v165 + 4), v168);
      Strd = &Dst;
      if ( v110 > 0 )
      {
        v155 = v110;
        do
        {
          sub_49B310(v2, Strd, 0, (_DWORD *)v1[8156], v156, v109, 3, 0);
          v109 += v140;
          v17 = v155-- == 1;
          Strd += strlen(Strd) + 1;
        }
        while ( !v17 );
      }
      v111 = v109 + 4;
      if ( *(_DWORD *)(v165 + 196) != -1 )
      {
        v7 = sub_4027C0(v165 + 64, v111);
        goto LABEL_150;
      }
      v112 = v1[14];
      v185 = v1[12];
      v188 = v111 + 3;
      v187 = v112;
      v186 = v111 + 1;
      (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v1[8156] + 40))(*((unsigned __int16 *)dword_563908 + 76), &v185);
      v113 = v111 + 8;
      sub_49B310(v2, "Character Definition", 2, (_DWORD *)v1[8156], v156, v113, 3, 0);
      v7 = v140 + v113;
      v114 = (const char *)(v165 + 64);
      Stre = (const char *)(v165 + 64);
      if ( v165 == -64 )
        goto LABEL_150;
      break;
    case 4:
      v118 = dword_563908;
      v119 = 0;
      if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 12404) > 0 )
      {
        v120 = 6404 - (_DWORD)Str1;
        v118 = dword_563908;
        while ( 1 )
        {
          v121 = *(char **)((char *)&Str1[v119] + v120 + v118[1504]);
          v118 = dword_563908;
          Str1[v119++] = v121;
          if ( v119 >= *(_DWORD *)(v118[1504] + 12404) )
            break;
          v120 = 6404 - (_DWORD)Str1;
        }
      }
      sub_48DD90((unsigned int)Str1, *(_DWORD *)(v118[1504] + 12404), (int (__cdecl *)(_DWORD, _DWORD))&sub_401B86);
      Str2[0] = 1;
      Str2[1] = 0;
      v167 = 0;
      v172 = sub_49AD40(v2, "WWWWWWWWWWWWWWWWWWWW");
      Strf = 0;
      if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 12404) > 0 )
      {
        v139 = v7 + 1;
        do
        {
          if ( _stricmp(Str1[(_DWORD)Strf], Str2) )
          {
            v167 = 0;
            if ( Strf )
            {
              v7 += v140;
              v139 += v140;
            }
            v122 = Str1[(_DWORD)Strf];
            v123 = (char *)(Str2 - v122);
            do
            {
              v124 = *v122;
              v123[(_DWORD)v122] = *v122;
              ++v122;
            }
            while ( v124 );
            v183 = sub_49B310(v2, Str1[(_DWORD)Strf], 4, (_DWORD *)v1[8156], v156, v7, 3, 0);
            v125 = *((_DWORD *)dword_563908 + 1514);
            v126 = sub_401703(*((signed __int16 *)Str1[(_DWORD)Strf] + 50));
            if ( v126 > 0 )
            {
              sprintf(Dest, "Team-Flags: %d", v126);
              sub_49B310(v2, Dest, 1, (_DWORD *)v1[8156], v183 + v156 + 16, v7, 3, 0);
            }
            v127 = v140 + v7;
            v185 = v156;
            v188 = v127 + 3;
            v187 = v156 + 2 * v172;
            v128 = v1[8156];
            v186 = v140 + v139;
            (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v128 + 40))(
              *((unsigned __int16 *)dword_563908 + 83),
              &v185);
            v7 = v127 + 8;
            v139 += v140 + 8;
          }
          if ( !(v167 % 4) && v167 > 0 )
          {
            v185 = v156 + 8;
            v187 = v156 + 2 * v172;
            v188 = v139;
            v129 = v1[8156];
            v186 = v7;
            (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v129 + 40))(
              *((unsigned __int16 *)dword_563908 + 87),
              &v185);
            ++v7;
            ++v139;
          }
          ++v167;
          sub_49B310(v2, Str1[(_DWORD)Strf] + 32, 2, (_DWORD *)v1[8156], v156 + 8, v7, 3, 0);
          sub_49B310(v2, Str1[(_DWORD)Strf] + 64, 9, (_DWORD *)v1[8156], v172 + v156 + 8, v7, 3, 0);
          v130 = Str1[(_DWORD)Strf];
          if ( *((_DWORD *)v130 + 30) > 0 )
          {
            sprintf(Dest, "Flags: %d", *((_DWORD *)v130 + 30));
            sub_49B310(v2, Dest, 1, (_DWORD *)v1[8156], v156 + 2 * v172 + 8, v7, 3, 0);
          }
          v139 += v140;
          v7 += v140;
          ++Strf;
        }
        while ( (signed int)Strf < *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 12404) );
      }
      goto LABEL_150;
    default:
      goto LABEL_150;
  }
  while ( 1 )
  {
    if ( !*v114 )
      goto LABEL_150;
    v166 = j__atol(Stre);
    Stre = strchr(Stre, 38);
    if ( Stre )
      ++Stre;
    v115 = (_DWORD *)*((_DWORD *)dword_563908 + 1512);
    if ( v166 >= 0 )
    {
      v117 = sub_48E510(v115, v166);
      if ( v117 )
      {
        sprintf(Dest, "%s", v117 + 8);
        sub_49B310(v2, Dest, 0, (_DWORD *)v1[8156], v156 + 32, v7, 3, 0);
        goto LABEL_126;
      }
    }
    else
    {
      v116 = sub_48E510(v115, v166 / 1000);
      if ( v116 )
      {
        sprintf(Dest, "%s", v116 + 8);
        sub_49B310(v2, Dest, 0, (_DWORD *)v1[8156], v156 + 32, v7, 3, 0);
        sprintf(Dest, "%d", -v166 % 1000);
        sub_49B4F0(v2, Dest, 4, (_DWORD *)v1[8156], v156 + 30, v7, 3, 0);
LABEL_126:
        v7 += v140;
        goto LABEL_127;
      }
    }
LABEL_127:
    v114 = Stre;
    if ( !Stre )
      goto LABEL_150;
  }
}
// 401703: using guessed type _DWORD __stdcall sub_401703(_DWORD);
// 401C21: using guessed type _DWORD __stdcall sub_401C21(_DWORD, _DWORD);
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4027C0: using guessed type _DWORD __stdcall sub_4027C0(_DWORD, _DWORD);
// 4028EC: using guessed type _DWORD __stdcall sub_4028EC(_DWORD);

//----- (004489F0) --------------------------------------------------------
int __thiscall sub_4489F0(int *this, char *Str1, int a3, int a4, int a5, int a6)
{
  int result; // eax
  int *v7; // ebp
  char v8; // al
  _BYTE *v9; // ecx
  _DWORD *v10; // ecx
  int v11; // esi
  signed int v12; // edi
  int v13; // edx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  FILE *v17; // eax
  FILE *v18; // eax
  int *v19; // esi
  int v20; // ecx
  int v21; // ebp
  char *v22; // eax
  const char *v23; // esi
  unsigned int v24; // eax
  char *v25; // ecx
  int v26; // edx
  char v27; // al
  char *Buf1; // [esp+Ch] [ebp-210h]
  int v29; // [esp+14h] [ebp-208h]
  char String; // [esp+18h] [ebp-204h]

  result = a4;
  v7 = this;
  v29 = (int)this;
  Buf1 = (char *)a5;
  if ( !*Str1 || (result = sub_4B4E20(this[3], (int)Str1), result == -1) )
  {
    if ( a3 != 6 || *(_BYTE *)a5 != 60 || *(_BYTE *)(a5 + 1) != 60 || *((_DWORD *)dword_563918 + 2271) )
    {
      if ( v7[6] && a3 == 5 )
      {
        sub_401CCB(0);
        (*(void (__thiscall **)(int *, _DWORD, _DWORD))v7[1])(v7 + 1, 0, 0);
      }
      if ( *((_DWORD *)dword_563918 + 2232)
        && a3 == 2
        && _stricmp(Str1, (const char *)(*((_DWORD *)dword_563908 + 6897) + 32)) )
      {
        sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
      }
      if ( *((_DWORD *)dword_563918 + 2322) && strlen((const char *)a5) > 4 )
      {
        v8 = *(_BYTE *)a5;
        v9 = (_BYTE *)a5;
        if ( *(_BYTE *)a5 )
        {
          while ( v8 < 97 || v8 > 122 )
          {
            v8 = (v9++)[1];
            if ( !v8 )
              goto LABEL_22;
          }
        }
        if ( !*v9 )
        {
LABEL_22:
          strcpy(&String, (const char *)a5);
          _strlwr(&String);
          Buf1 = &String;
        }
      }
      if ( a6 >= 0 )
      {
        if ( (unsigned int)(a6 - 1) <= 0x1D )
        {
          v10 = (_DWORD *)v7[a6 + 118];
          if ( v10 )
LABEL_35:
            sub_4A7120(v10, 0, 0, 0, 0);
        }
      }
      else
      {
        switch ( a6 )
        {
          case -4:
            if ( *((_DWORD *)dword_563908 + 358) )
            {
              v10 = (_DWORD *)*((_DWORD *)dword_563908 + 358);
              goto LABEL_35;
            }
            break;
          case -3:
            if ( *((_DWORD *)dword_563908 + 360) )
            {
              v10 = (_DWORD *)*((_DWORD *)dword_563908 + 360);
              goto LABEL_35;
            }
            break;
          case -2:
            if ( *((_DWORD *)dword_563908 + 362) )
            {
              v10 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
              goto LABEL_35;
            }
            break;
          case -1:
            if ( *((_DWORD *)dword_563908 + 359) )
            {
              v10 = (_DWORD *)*((_DWORD *)dword_563908 + 359);
              goto LABEL_35;
            }
            break;
          default:
            break;
        }
      }
      if ( _stricmp(Str1, (const char *)(*((_DWORD *)dword_563908 + 6897) + 32)) && a3 == 2 )
      {
        v11 = (int)(v7 + 56);
        memcpy_0(v7 + 56, v7 + 48, 0xE0u);
        strcpy((char *)v7 + 192, Str1);
        v12 = 1;
        do
        {
          if ( !_stricmp(Str1, (const char *)v11) )
          {
            memcpy_0((void *)v11, (const void *)(v11 + 32), 32 * (7 - v12));
            *((_BYTE *)v7 + 416) = 0;
          }
          ++v12;
          v11 += 32;
        }
        while ( v12 < 8 );
        if ( *((_BYTE *)v7 + 37720) && abs(sub_401D39(v14, v13) - v7[9741]) > 300 && _memicmp(Buf1, "HELP", 4u) )
        {
          v7[9741] = sub_401D39(v16, v15);
          sub_402699(2, (int)Str1, (char *)v7 + 37720, 0);
        }
      }
      v17 = (FILE *)v7[8158];
      if ( v17 )
        sub_4C3361(v17, (int)"%d\t%s\t%s\t%s\n", a3, a4, Str1, Buf1);
      v18 = (FILE *)v7[8159];
      if ( v18 )
        sub_4C3361(v18, (int)"%d\t%s\t%s\t%s\n", a3, a4, Str1, Buf1);
      v19 = v7;
      v20 = v7[8155];
      v7[8155] = v20 + 1;
      v21 = v20 % 4000;
      if ( v19[2 * (v20 % 4000) + 155] )
      {
        free((void *)v19[2 * (v20 % 4000) + 155]);
        v19[2 * v21 + 155] = 0;
      }
      v22 = (char *)malloc(strlen(Str1) + strlen((const char *)a4) + strlen(Buf1) + 3);
      *(_DWORD *)(v29 + 8 * v21 + 620) = v22;
      strcpy(v22, Str1);
      v23 = strcpy(&v22[strlen(v22) + 1], (const char *)a4);
      v24 = (unsigned int)&v23[strlen(v23) + 1];
      v25 = Buf1;
      v26 = v24 - (_DWORD)Buf1;
      do
      {
        v27 = *v25;
        v25[v26] = *v25;
        ++v25;
      }
      while ( v27 );
      result = v29;
      *(_DWORD *)(v29 + 8 * v21 + 624) = a3;
      *(_DWORD *)(v29 + 100) = 1;
    }
  }
  return result;
}
// 401CCB: using guessed type _DWORD __stdcall sub_401CCB(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00448F90) --------------------------------------------------------
int __thiscall sub_448F90(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  bool v4; // zf
  int result; // eax

  v3 = this;
  v4 = this[7] == 1;
  this[6] = 1;
  if ( !v4 )
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
    v3[7] = v3[6];
  }
  result = a3;
  v3[116] = a2;
  v3[115] = a3;
  v3[117] = 0;
  v3[118] = 0;
  v3[25] = 1;
  return result;
}

//----- (00449010) --------------------------------------------------------
_DWORD *__thiscall sub_449010(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  char *v3; // eax
  int v4; // edx
  char v5; // cl
  char *v6; // eax
  struct tm *v7; // edi
  FILE *v8; // eax
  char *v9; // eax
  int *v10; // ebp
  signed int v11; // edi
  char *v12; // eax
  char *v13; // eax
  int v14; // ST2C_4
  char *v15; // eax
  char *v16; // eax
  int v18; // [esp+18h] [ebp-328h]
  int v19; // [esp+1Ch] [ebp-324h]
  int v20; // [esp+20h] [ebp-320h]
  int v21; // [esp+24h] [ebp-31Ch]
  __time64_t Time; // [esp+28h] [ebp-318h]
  char Dest; // [esp+30h] [ebp-310h]
  char Source; // [esp+130h] [ebp-210h]
  char Filename; // [esp+230h] [ebp-110h]
  int v26; // [esp+33Ch] [ebp-4h]

  v2 = this;
  this[1] = &off_511698;
  this[2] = &MenuTarget::`vftable';
  *this = &off_513EC8;
  this[1] = &MessageManager::`vftable';
  this[2] = &MessageManager::`vftable';
  this[16] = a2;
  sub_401F64((char *)dword_563908 + 30252, this + 17);
  sub_401F64((char *)dword_563908 + 30300, v2 + 21);
  v2[8156] = 0;
  v2[149] = 0;
  v2[8155] = 0;
  v2[9739] = 0;
  v2[26] = 0;
  *((_BYTE *)v2 + 37920) = 0;
  v2[9736] = 0;
  v2[9737] = 0;
  v2[150] = 0;
  v2[8158] = 0;
  v2[8159] = 0;
  *((_BYTE *)v2 + 37720) = 0;
  memset(v2 + 8224, 0, 0x12D8u);
  if ( *((_DWORD *)dword_563918 + 2226) )
  {
    v3 = (char *)dword_563908 + 27876;
    v4 = &Dest - ((_BYTE *)dword_563908 + 27876);
    do
    {
      v5 = *v3;
      v3[v4] = *v3;
      ++v3;
    }
    while ( v5 );
    v6 = sub_48D1A0(&Dest, ".cfg");
    if ( v6 )
      sprintf(v6, ".mc%d", *((_DWORD *)dword_563918 + 2204));
  }
  else
  {
    sprintf(&Dest, "lastused.mc%d", *((_DWORD *)dword_563918 + 2204));
  }
  sub_40169F(&Dest);
  if ( *((_DWORD *)dword_563918 + 2310) )
  {
    _time64(&Time);
    v7 = _localtime64(&Time);
    sprintf(&Filename, "Message%04d-%02d-%02d.log", v7->tm_year + 1900, v7->tm_mon + 1, v7->tm_mday);
    v8 = fopen(&Filename, "at");
    v2[8159] = v8;
    if ( v8 )
    {
      sub_4C3361(v8, (int)"---------------------------------------------------------------------\n");
      v9 = asctime(v7);
      sub_4C3361((FILE *)v2[8159], (int)"Log Started: %s", v9);
      sub_4C3361((FILE *)v2[8159], (int)"Zone=%s  Alias=%s\n", (char *)dword_563918 + 9864, (char *)dword_563918 + 9608);
      sub_4C3361((FILE *)v2[8159], (int)"---------------------------------------------------------------------\n");
    }
  }
  v2[153] = 0;
  v2[47] = 0;
  memset(v2 + 48, 0, 0x100u);
  v10 = v2 + 119;
  v2[5] = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2337) + 1516);
  v2[9741] = 0;
  v2[113] = -1;
  v2[114] = 0;
  memset(v2 + 119, 0, 0x78u);
  v11 = 0;
  do
  {
    *v10 = sub_4B39E0(*((_DWORD **)dword_563908 + 1515), (const char *)dword_563908 + v11 + 75610, 2, 0);
    v11 += 56;
    ++v10;
  }
  while ( v11 < 1680 );
  v2[112] = *((_DWORD *)dword_563908 + 3109);
  memset(v2 + 155, 0, 0x7D00u);
  v2[116] = 0;
  v2[115] = 0;
  v2[117] = 0;
  v2[118] = 0;
  v2[6] = 0;
  v2[7] = 0;
  v2[154] = 0;
  sprintf(&Source, "ignore.tx%d", *((_DWORD *)dword_563918 + 2204));
  v12 = (char *)operator new(0x114u);
  v26 = 0;
  if ( v12 )
    v13 = sub_4B4D00(v12, &Source, 0);
  else
    v13 = 0;
  v2[3] = v13;
  v14 = *((_DWORD *)dword_563918 + 2204);
  v26 = -1;
  sprintf(&Source, "marked.tx%d", v14);
  v15 = (char *)operator new(0x118u);
  v26 = 1;
  if ( v15 )
    v16 = sub_4B4E70(v15, &Source, 0);
  else
    v16 = 0;
  v2[4] = v16;
  v2[37] = 6;
  v2[38] = 6;
  v2[42] = 2;
  v2[39] = 2;
  v26 = -1;
  v2[40] = 4;
  v2[41] = 13;
  v2[43] = 11;
  v2[44] = 5;
  v2[46] = 12;
  v2[45] = 1;
  v18 = 0;
  v20 = 200;
  v19 = 100;
  v21 = 200;
  sub_401582(&v18);
  return v2;
}
// 401582: using guessed type _DWORD __stdcall sub_401582(_DWORD);
// 401F64: using guessed type _DWORD __stdcall sub_401F64(_DWORD, _DWORD);
// 5111D0: using guessed type void *MenuTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 513EB0: using guessed type void *MessageManager::`vftable';
// 513EBC: using guessed type void *MessageManager::`vftable';
// 513EC8: using guessed type int (__stdcall *off_513EC8)(int, int, int, int);

//----- (004495B0) --------------------------------------------------------
int __thiscall sub_4495B0(char *this, int a2)
{
  int result; // eax
  char *v3; // esi
  void *v4; // ecx
  signed int v5; // edi
  unsigned __int16 v6; // ax
  int v7; // ecx
  int v8; // edx
  int v9; // edi
  int v10; // ecx
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // eax
  unsigned __int16 v15; // ax
  bool v16; // zf
  _DWORD *v17; // ecx
  int v18; // eax
  int v19; // ecx
  int v20; // ST10_4
  int v21; // ST0C_4
  int v22; // eax
  _DWORD *v23; // ecx
  int v24; // edx
  int v25; // edi
  int v26; // ebp
  int v27; // eax
  int v28; // edi
  char *v29; // ebx
  int v30; // eax
  int v31; // edi
  int v32; // ebx
  int v33; // eax
  int v34; // edi
  int v35; // ecx
  int v36; // ecx
  int v37; // eax
  char v38; // cl
  int v39; // eax
  unsigned __int8 v40; // cl
  _DWORD *v41; // ecx
  int v42; // eax
  int v43; // eax
  int v44; // ecx
  int v45; // edx
  int v46; // ecx
  unsigned __int16 v47; // ax
  int v48; // esi
  int v49; // [esp+2Ch] [ebp-640h]
  int v50; // [esp+30h] [ebp-63Ch]
  int v51; // [esp+34h] [ebp-638h]
  int v52; // [esp+38h] [ebp-634h]
  int v53; // [esp+3Ch] [ebp-630h]
  int v54; // [esp+40h] [ebp-62Ch]
  int v55; // [esp+44h] [ebp-628h]
  int v56; // [esp+48h] [ebp-624h]
  int v57; // [esp+4Ch] [ebp-620h]
  int v58; // [esp+50h] [ebp-61Ch]
  int v59; // [esp+54h] [ebp-618h]
  int v60; // [esp+58h] [ebp-614h]
  int v61; // [esp+5Ch] [ebp-610h]
  int v62; // [esp+60h] [ebp-60Ch]
  int v63; // [esp+64h] [ebp-608h]
  char v64[512]; // [esp+68h] [ebp-604h]
  char v65[1024]; // [esp+268h] [ebp-404h]

  result = (int)dword_563918;
  v3 = this;
  v4 = dword_563908;
  if ( !*((_DWORD *)dword_563918 + 2275)
    || *((_DWORD *)v3 + 6)
    || *((_DWORD *)dword_563908 + 1535) != *((_DWORD *)dword_563908 + 1499) )
  {
    v53 = 0;
    v5 = 0;
  }
  else
  {
    v5 = 1;
    v53 = 1;
  }
  if ( *((_DWORD *)v3 + 114) != v5 )
    result = sub_401965(dword_563908);
  *((_DWORD *)v3 + 114) = v5;
  if ( v5 )
  {
    if ( a2 )
      return result;
    v6 = sub_40223E(dword_576828, *((_DWORD *)dword_563908 + 7665));
    v7 = *((_DWORD *)v3 + 8);
    v8 = *((_DWORD *)v3 + 9);
    v51 = *((_DWORD *)v3 + 10);
    v9 = *((_DWORD *)v3 + 11);
    v49 = v7;
    v50 = v8;
    v52 = v9;
    v51 = v7 + 40;
    v10 = *((_DWORD *)v3 + 16);
    v52 = v8 + 8;
    (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v10 + 40))(v6, &v49);
    v11 = *((_DWORD *)v3 + 10);
    v12 = *((_DWORD *)v3 + 5);
    v60 = *((_DWORD *)v3 + 8);
    v13 = *((_DWORD *)v3 + 9);
    v62 = v11;
    v63 = *((_DWORD *)v3 + 11);
    v61 = v13 + 8;
    v63 -= *(signed __int16 *)(*(_DWORD *)(v12 + 2052) + 174);
    sub_4022E8(*((_DWORD *)v3 + 16), &v60);
    goto LABEL_31;
  }
  v14 = *((_DWORD *)v3 + 8156);
  if ( !*(_DWORD *)(v14 + 20)
    || (result = (*(int (__thiscall **)(void *, _DWORD))(**(_DWORD **)(v14 + 20) + 96))(v4, *(_DWORD *)(v14 + 20))) != 0 )
  {
    result = sub_401582(v3 + 32);
  }
  if ( !a2 )
  {
    v15 = sub_40223E(dword_576828, *((_DWORD *)dword_563908 + 7648));
    v16 = *((_DWORD *)v3 + 25) == 0;
    v54 = v15;
    if ( v16 )
    {
      if ( *((_DWORD *)v3 + 26) > 0 )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**((_DWORD **)v3 + 8156) + 4))(
          0,
          *((_DWORD *)v3 + 16),
          *((_DWORD *)v3 + 8),
          *((_DWORD *)v3 + 9),
          0,
          0);
        --*((_DWORD *)v3 + 26);
      }
    }
    else
    {
      v17 = (_DWORD *)*((_DWORD *)v3 + 8156);
      v56 = 0;
      v58 = v17[1];
      v57 = 0;
      v59 = v17[2];
      (*(void (__stdcall **)(_DWORD, int *))(*v17 + 40))(v15, &v56);
      if ( *((_DWORD *)dword_563908 + 7647) )
        sub_401C58(v3);
      if ( *((_DWORD *)v3 + 150) != 1 )
      {
        v18 = *((_DWORD *)v3 + 6);
        if ( v18 )
        {
          if ( v18 == 1 )
            sub_401609(v3);
        }
        else
        {
          sub_4022E8(*((_DWORD *)v3 + 8156), v3 + 48);
        }
      }
      if ( !*((_DWORD *)dword_563908 + 7647) )
        sub_401C58(v3);
      v19 = *((_DWORD *)v3 + 8156);
      v20 = *((_DWORD *)v3 + 9);
      v21 = *((_DWORD *)v3 + 8);
      v22 = *((_DWORD *)v3 + 16);
      *((_DWORD *)v3 + 25) = 0;
      (*(void (__stdcall **)(_DWORD, int, int, int, _DWORD, _DWORD))(*(_DWORD *)v19 + 4))(0, v22, v21, v20, 0, 0);
      *((_DWORD *)v3 + 26) = (*(int (**)(void))(**((_DWORD **)v3 + 16) + 156))();
    }
LABEL_31:
    v23 = (_DWORD *)*((_DWORD *)v3 + 5);
    v24 = *((_DWORD *)v3 + 9736);
    v25 = *((_DWORD *)v3 + 10) - v23[774] - *((_DWORD *)v3 + 8) - (*((_DWORD *)dword_563908 + 7650) + 7);
    v26 = *((_DWORD *)dword_563908 + 7649) + 8;
    v55 = *((_DWORD *)dword_563908 + 7650) + 7;
    v27 = *((_DWORD *)v3 + 9737);
    v28 = v25 - v26;
    if ( v24 >= v27 )
    {
      if ( *((_DWORD *)v3 + 9736) > sub_49ADA0(v23, &v3[v27 + 37920], v28) + *((_DWORD *)v3 + 9737) )
      {
        do
          ++*((_DWORD *)v3 + 9737);
        while ( *((_DWORD *)v3 + 9736) > sub_49ADA0(*((_DWORD **)v3 + 5), &v3[*((_DWORD *)v3 + 9737) + 37920], v28)
                                       + *((_DWORD *)v3 + 9737) );
      }
    }
    else
    {
      *((_DWORD *)v3 + 9737) = v24;
    }
    v29 = &v3[*((_DWORD *)v3 + 9737) + 37920];
    v30 = sub_49ADA0(*((_DWORD **)v3 + 5), v29, v28);
    strcpy(v65, v29);
    v31 = *((_DWORD *)v3 + 11);
    v32 = v53;
    v65[v30] = 0;
    v33 = *((_DWORD *)v3 + 5);
    v34 = v31 - *(signed __int16 *)(*(_DWORD *)(v33 + 2052) + 174);
    if ( !v32 )
    {
      v35 = *((_DWORD *)v3 + 10) - v55;
      v60 = v26;
      v62 = v35;
      v36 = *((_DWORD *)v3 + 16);
      v61 = v34;
      v63 = v34 + *(signed __int16 *)(*(_DWORD *)(v33 + 2052) + 174);
      (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v36 + 40))((unsigned __int16)v54, &v60);
    }
    result = sub_49B310(*((_DWORD **)v3 + 5), v65, 0, *((_DWORD **)v3 + 16), v26, v34, 3, 0);
    if ( !*((_DWORD *)dword_563918 + 2344) || *((_DWORD *)v3 + 154) )
    {
      result = *((_DWORD *)dword_563908 + 2705) / 60;
      if ( *((_DWORD *)dword_563908 + 2705) % 60 < 40 )
      {
        v37 = 0;
        do
        {
          v38 = v65[v37];
          v64[v37++] = v38;
        }
        while ( v38 );
        v64[*((_DWORD *)v3 + 9736) - *((_DWORD *)v3 + 9737)] = 0;
        v39 = sub_49AD40(*((_DWORD **)v3 + 5), v64);
        v40 = v3[*((_DWORD *)v3 + 9736) + 37920];
        LOWORD(v60) = v40;
        if ( !v40 )
          LOBYTE(v60) = 32;
        v41 = (_DWORD *)*((_DWORD *)v3 + 5);
        v49 = v26 + v39;
        v42 = sub_49AD40(v41, (char *)&v60);
        v43 = v49 + v42;
        v44 = *((_DWORD *)v3 + 5);
        v51 = v43;
        v50 = v34;
        v45 = *((_DWORD *)v3 + 9736);
        v46 = v34 + *(signed __int16 *)(*(_DWORD *)(v44 + 2052) + 174);
        v52 = v46;
        if ( !v3[v45 + 37920] )
        {
          v50 = v46 - 2;
          v51 = v43 + 2;
        }
        if ( *((_DWORD *)v3 + 154) )
        {
          v47 = *((_WORD *)dword_563908 + 76);
        }
        else if ( *((_DWORD *)v3 + 9739) )
        {
          v47 = *((_WORD *)dword_563908 + 73);
        }
        else
        {
          v47 = *((_WORD *)dword_563908 + 82);
        }
        (*(void (__stdcall **)(_DWORD, int *))(**((_DWORD **)v3 + 16) + 40))(v47, &v49);
        result = sub_49B310(*((_DWORD **)v3 + 5), (char *)&v60, 14, *((_DWORD **)v3 + 16), v49, v34, 3, 0);
      }
    }
    v48 = *((_DWORD *)v3 + 47);
    if ( v48 )
    {
      if ( !v32 )
        result = (*(int (__thiscall **)(int))(*(_DWORD *)v48 + 40))(v48);
    }
    return result;
  }
  if ( !*((_DWORD *)v3 + 25) && !*((_DWORD *)v3 + 26) )
    result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**((_DWORD **)v3 + 8156) + 4))(
               0,
               *((_DWORD *)v3 + 16),
               *((_DWORD *)v3 + 8),
               *((_DWORD *)v3 + 9),
               0,
               0);
  return result;
}
// 401582: using guessed type _DWORD __stdcall sub_401582(_DWORD);
// 401609: using guessed type int __thiscall sub_401609(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401C58: using guessed type int __thiscall sub_401C58(_DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 4022E8: using guessed type _DWORD __stdcall sub_4022E8(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;
// 4495B0: using guessed type char var_404[1024];
// 4495B0: using guessed type char var_604[512];

//----- (00449C40) --------------------------------------------------------
char *__thiscall sub_449C40(char *this, char *Source, int a3)
{
  char *result; // eax
  signed int v4; // edi
  char v5; // al
  char *v6; // esi
  int v7; // ebx
  int v8; // eax
  _DWORD *v9; // esi
  int v10; // eax
  int v11; // eax
  char *v12; // edx
  char v13; // cl
  signed int v14; // eax
  int v15; // eax
  int v16; // eax
  char *v17; // edx
  char v18; // cl
  struct tm *v19; // esi
  unsigned int v20; // edx
  _DWORD **v21; // eax
  int v22; // edi
  void *v23; // ecx
  double v24; // st7
  unsigned int v25; // edx
  int v26; // edx
  int v27; // esi
  int v28; // eax
  char *j; // esi
  char *v30; // eax
  size_t v31; // edi
  size_t v32; // ebp
  int v33; // ebp
  int v34; // eax
  char v35; // cl
  int v36; // eax
  char v37; // cl
  int v38; // eax
  char v39; // cl
  int v40; // ecx
  char v41; // dl
  char *v42; // eax
  char *v43; // esi
  int v44; // edi
  char *v45; // esi
  int v46; // eax
  void (__stdcall **v47)(int); // edx
  int v48; // eax
  void (__stdcall **v49)(int); // edx
  int v50; // ecx
  int v51; // eax
  int v52; // ecx
  int v53; // ecx
  int v54; // eax
  char *v55; // edi
  int v56; // esi
  int v57; // esi
  int v58; // edi
  char v59; // al
  char *v60; // esi
  char *v61; // ecx
  bool v62; // zf
  char *v63; // ebp
  int v64; // ST44_4
  unsigned int v65; // kr00_4
  int v66; // ST44_4
  int v67; // eax
  void (__stdcall **v68)(int); // edx
  char *v69; // ebp
  int v70; // edi
  int v71; // ST44_4
  unsigned int v72; // kr08_4
  int v73; // ST44_4
  char *v74; // edi
  int v75; // eax
  void (__stdcall ***v76)(int); // ecx
  int v77; // ecx
  int v78; // eax
  int v79; // esi
  void *v80; // eax
  _BYTE *v81; // ecx
  char v82; // al
  int v83; // ecx
  int v84; // ecx
  int v85; // eax
  int v86; // edx
  int v87; // eax
  char *v88; // ecx
  int v89; // edx
  int v90; // ecx
  int v91; // esi
  int v92; // esi
  int v93; // ecx
  int v94; // ecx
  char *v95; // ecx
  char v96; // al
  signed int v97; // esi
  char *v98; // eax
  signed int v99; // ebx
  signed int v100; // esi
  signed int v101; // ebx
  signed int v102; // edi
  void *v103; // eax
  _DWORD *v104; // eax
  signed __int16 v105; // ax
  int v106; // eax
  int v107; // eax
  const char *v108; // edx
  char *v109; // eax
  char v110; // cl
  _DWORD *v111; // edi
  int v112; // eax
  int v113; // ebx
  signed int v114; // ebp
  int v115; // esi
  __int16 v116; // ax
  int v117; // ecx
  int v118; // eax
  int v119; // ecx
  int v120; // eax
  int v121; // ebp
  signed int v122; // ebx
  int v123; // esi
  __int16 v124; // ax
  int v125; // ecx
  int v126; // eax
  int v127; // ecx
  int v128; // ecx
  char *v129; // eax
  char *v130; // eax
  char *v131; // eax
  char *v132; // eax
  char *v133; // eax
  char *v134; // eax
  char *v135; // eax
  char *v136; // edi
  char *v137; // eax
  char *v138; // edi
  char *v139; // eax
  char *v140; // edi
  char *v141; // eax
  char *v142; // eax
  char *v143; // eax
  char *v144; // eax
  LPCRITICAL_SECTION *v145; // eax
  int v146; // eax
  int v147; // eax
  int v148; // eax
  int v149; // eax
  int v150; // eax
  char *v151; // ecx
  char v152; // al
  char *v153; // ecx
  char v154; // al
  char *v155; // ecx
  char v156; // al
  int v157; // edx
  FILE *v158; // ebp
  int v159; // eax
  int v160; // ecx
  int v161; // edi
  int v162; // esi
  const char *v163; // eax
  const char *v164; // eax
  bool v165; // sf
  unsigned __int8 v166; // of
  char *v167; // ecx
  char v168; // al
  FILE *v169; // eax
  int v170; // eax
  int v171; // edx
  int v172; // ecx
  signed int v173; // edi
  _DWORD *v174; // eax
  int v175; // ecx
  int v176; // eax
  int v177; // ecx
  int v178; // [esp+8h] [ebp-24B4h]
  char *i; // [esp+20h] [ebp-249Ch]
  int v180; // [esp+24h] [ebp-2498h]
  FILE *File; // [esp+28h] [ebp-2494h]
  int v182; // [esp+2Ch] [ebp-2490h]
  void *v183; // [esp+30h] [ebp-248Ch]
  __time64_t Time; // [esp+34h] [ebp-2488h]
  void *v185; // [esp+3Ch] [ebp-2480h]
  const char *v186; // [esp+40h] [ebp-247Ch]
  const char *v187; // [esp+44h] [ebp-2478h]
  const char *v188; // [esp+48h] [ebp-2474h]
  const char *v189; // [esp+4Ch] [ebp-2470h]
  const char *v190; // [esp+50h] [ebp-246Ch]
  const char *v191; // [esp+54h] [ebp-2468h]
  const char *v192; // [esp+58h] [ebp-2464h]
  const char *v193; // [esp+5Ch] [ebp-2460h]
  char SubStr; // [esp+7Ch] [ebp-2440h]
  char v195; // [esp+8Ah] [ebp-2432h]
  char v196; // [esp+8Bh] [ebp-2431h]
  char Dst[4]; // [esp+8Ch] [ebp-2430h]
  int v198; // [esp+F8h] [ebp-23C4h]
  int v199; // [esp+FCh] [ebp-23C0h]
  int v200; // [esp+100h] [ebp-23BCh]
  int v201; // [esp+104h] [ebp-23B8h]
  int v202; // [esp+108h] [ebp-23B4h]
  char Str1; // [esp+18Ch] [ebp-2330h]
  char v204[2]; // [esp+28Ch] [ebp-2230h]
  char Filename[256]; // [esp+2ACh] [ebp-2210h]
  char v206; // [esp+3ACh] [ebp-2110h]
  char v207; // [esp+3CCh] [ebp-20F0h]
  char v208; // [esp+3ECh] [ebp-20D0h]
  char v209; // [esp+40Ch] [ebp-20B0h]
  char v210; // [esp+42Ch] [ebp-2090h]
  char v211; // [esp+46Ch] [ebp-2050h]
  char v212[4]; // [esp+4ACh] [ebp-2010h]
  char v213[4]; // [esp+4ADh] [ebp-200Fh]
  int v214; // [esp+4B0h] [ebp-200Ch]
  __int16 v215; // [esp+4B4h] [ebp-2008h]
  char Dest; // [esp+8ACh] [ebp-1C10h]
  char Str; // [esp+8ADh] [ebp-1C0Fh]
  char Src; // [esp+8AEh] [ebp-1C0Eh]
  char v219; // [esp+8AFh] [ebp-1C0Dh]
  char v220; // [esp+973h] [ebp-1B49h]
  char v221; // [esp+10ABh] [ebp-1411h]
  char v222[2048]; // [esp+10ACh] [ebp-1410h]
  char v223[2048]; // [esp+18ACh] [ebp-C10h]
  char v224; // [esp+20ACh] [ebp-410h]
  int v225; // [esp+24B8h] [ebp-4h]

  result = Source;
  for ( i = this; *result == 32; ++result )
    ;
  v4 = 0;
  if ( !*result )
    return result;
  strncpy(&Dest, result, 0x800u);
  v5 = Dest;
  v221 = 0;
  v180 = 0;
  v6 = &Dest;
  if ( Dest )
  {
    do
    {
      if ( *v6 == 37 )
      {
        v4 = 1;
        if ( isdigit(v6[1]) || v6[1] == 45 )
        {
          v7 = j__atol(v6 + 1);
          v180 = v7;
          goto LABEL_11;
        }
      }
      ++v6;
    }
    while ( *v6 );
    if ( !v4 )
      goto LABEL_39;
    v7 = 0;
LABEL_11:
    sprintf(&v209, "%c%d", *((_DWORD *)dword_563908 + 62) / 16 / 80 + 65, *((_DWORD *)dword_563908 + 63) / 16 / 80 + 1);
    sprintf(&v207, "%d,%d", *((_DWORD *)dword_563908 + 62) / 16, *((_DWORD *)dword_563908 + 63) / 16);
    v212[0] = 0;
    v8 = sub_402086(*((_DWORD *)dword_563908 + 1500));
    v9 = dword_563908;
    if ( v8 >= 0 && v8 < 5000 )
    {
      v10 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v8 + 12408);
      if ( v10 )
      {
        v11 = v10 + 32;
        v12 = &v212[-v11];
        do
        {
          v13 = *(_BYTE *)v11;
          v12[v11] = *(_BYTE *)v11;
          ++v11;
        }
        while ( v13 );
      }
    }
    Filename[0] = 0;
    v14 = abs(sub_402941(v9[1500]));
    if ( v14 <= 5100 )
    {
      v15 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v14 + 8008);
      if ( v15 )
      {
        v16 = v15 + 72;
        v17 = &Filename[-v16];
        do
        {
          v18 = *(_BYTE *)v16;
          v17[v16] = *(_BYTE *)v16;
          ++v16;
        }
        while ( v18 );
      }
    }
    _time64(&Time);
    v19 = _localtime64(&Time);
    sprintf(&v211, "%d-%02d-%02d", v19->tm_year + 1900, v19->tm_mon + 1, v19->tm_mday);
    sprintf(&v210, "%d.%02d", v19->tm_hour, v19->tm_min);
    v20 = (signed int)((unsigned __int64)(1374389535i64 * *(signed int *)(*((_DWORD *)dword_563908 + 1514) + 31544)) >> 32) >> 5;
    sprintf(&v208, "%d", v20 + (v20 >> 31));
    sprintf(&v206, "%d", *(_DWORD *)(*((_DWORD *)dword_563908 + 6897) + 120));
    v21 = (_DWORD **)dword_563908;
    if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 6897) + 128) )
    {
      sprintf(v204, "%d", *((_DWORD *)dword_563908 + 6438) / 100);
      v21 = (_DWORD **)dword_563908;
    }
    else
    {
      strcpy(v204, "0");
    }
    v22 = 8;
    if ( v21[6898] )
    {
      (*(void (__thiscall **)(_DWORD *, int *, FILE **, void **))(*v21[6898] + 92))(v21[6898], &v182, &File, &v183);
      if ( v182 || File )
      {
        v24 = (double)(signed int)File;
        sub_4C444A(v23);
        v25 = (signed int)((unsigned __int64)(9382499224i64
                                            * (((24000000 - (signed int)((v24 + 1.57079632675) * -38197.18634314663))
                                              % 240000
                                              + 255000)
                                             % 240000)) >> 32) >> 16;
        v22 = v25 + (v25 >> 31);
      }
      v21 = (_DWORD **)dword_563908;
    }
    v26 = ((signed int)v21[65] + 255) % 240;
    v185 = "North";
    v186 = "North-East";
    v187 = "East";
    v188 = "South-East";
    v189 = "South";
    v190 = "South-West";
    v191 = "West";
    v192 = "North-West";
    v193 = "Holding-Still";
    v27 = 8 * v26 / 240;
    if ( v7 )
    {
      sprintf(&SubStr, "%%%d", v7);
      sub_48D100(&Dest, &SubStr, &::Source);
    }
    sub_48D100(&Dest, "%coord", &v209);
    sub_48D100(&Dest, "%exact", &v207);
    sub_48D100(&Dest, "%selfname", (void *)(*((_DWORD *)dword_563908 + 6897) + 32));
    sub_48D100(&Dest, "%date", &v211);
    sub_48D100(&Dest, "%time", &v210);
    sub_48D100(&Dest, "%killed", (char *)dword_563908 + 13684);
    sub_48D100(&Dest, "%killer", (char *)dword_563908 + 13620);
    sub_48D100(&Dest, "%tickname", v212);
    sub_48D100(&Dest, "%tickitem", Filename);
    sub_48D100(&Dest, "%tickitem", Filename);
    sub_48D100(&Dest, "%tickitem", Filename);
    sub_48D100(&Dest, "%squad", (void *)(*((_DWORD *)dword_563908 + 6897) + 64));
    sub_48D100(&Dest, "%flagdrop", &v208);
    sub_48D100(&Dest, "%flagcount", &v206);
    sub_48D100(&Dest, "%crownexpire", v204);
    sub_48D100(&Dest, "%heading", *(&v185 + v22));
    sub_48D100(&Dest, "%facing", *(&v185 + v27));
    if ( sub_48D1A0(&Dest, "%flagger") )
    {
      v28 = sub_401DE3(*((_DWORD *)dword_563908 + 1504));
      if ( v28 )
        sprintf(Dst, "%s:%d", v28 + 32, *(_DWORD *)(v28 + 120));
      else
        strcpy(Dst, "(none)");
      sub_48D100(&Dest, "%flagger", Dst);
    }
    for ( j = sub_48D1A0(&Dest, "%count["); j; j = sub_48D1A0(&Dest, "%count[") )
    {
      v30 = strchr(j + 7, 93);
      if ( !v30 )
        break;
      v31 = v30 - j;
      v32 = v30 - j - 7;
      memcpy(Dst, j + 7, v32);
      Dst[v32] = 0;
      ++v31;
      v33 = sub_401CE9(Dst);
      memcpy(Dst, j, v31);
      Dst[v31] = 0;
      sprintf(&SubStr, "%d", v33);
      sub_48D100(&Dest, Dst, &SubStr);
    }
LABEL_39:
    v5 = Dest;
  }
  if ( v5 == 47 )
  {
    if ( Str == 47 )
      goto LABEL_52;
    result = (char *)sub_401686(*((_DWORD *)dword_563908 + 1500));
    if ( !result )
      return result;
    sprintf(v212, ":%s:%s", result + 32, &Str);
    v34 = 0;
    do
    {
      v35 = v212[v34];
      *(&Dest + v34++) = v35;
    }
    while ( v35 );
    v5 = Dest;
  }
  switch ( v5 )
  {
    case 39:
      v36 = 0;
      do
      {
        v37 = *(&Str + v36);
        v223[v36++] = v37;
      }
      while ( v37 );
      return (char *)sub_402699(3, (int)&::Source, v223, v180);
    case 47:
      if ( Str == 47 )
      {
LABEL_52:
        v38 = 0;
        do
        {
          v39 = *(&Src + v38);
          v223[v38++] = v39;
        }
        while ( v39 );
        return (char *)sub_402699(3, (int)&::Source, v223, v180);
      }
      goto LABEL_317;
    case 34:
      result = (char *)sub_401686(*((_DWORD *)dword_563908 + 1500));
      if ( result )
      {
        v40 = 0;
        do
        {
          v41 = *(&Str + v40);
          v223[v40++] = v41;
        }
        while ( v41 );
        result = (char *)sub_402699(4, (int)(result + 32), v223, v180);
      }
      return result;
    case 58:
      v42 = strchr(&Str, 58);
      v43 = v42;
      if ( v42 )
      {
        v44 = v42 - &Dest;
        if ( Str == 35 )
        {
          memcpy(Dst, &Src, v44 - 2);
          *(&v195 + v44) = 0;
          return (char *)sub_402699(7, (int)Dst, v43 + 1, v180);
        }
        memcpy(Dst, &Str, v44 - 1);
        v45 = v43 + 1;
        *(&v196 + v44) = 0;
        if ( !_stricmp(v45, "?ignore") )
        {
          v46 = sub_4B4E20(*((_DWORD *)i + 3), (int)Dst);
          v47 = (void (__stdcall **)(int))**((_DWORD **)i + 3);
          if ( v46 == -1 )
          {
            v47[2]((int)Dst);
            sprintf(v222, "Ignoring: %s", Dst);
          }
          else
          {
            (*v47)(v46);
            sprintf(v222, "Listening: %s", Dst);
          }
          return (char *)sub_40244B(v222, 0);
        }
        if ( _stricmp(v45, "?mark") )
          return (char *)sub_402699(2, (int)Dst, v45, v180);
        v48 = sub_4B4E20(*((_DWORD *)i + 4), (int)Dst);
        v49 = (void (__stdcall **)(int))**((_DWORD **)i + 4);
        if ( v48 == -1 )
        {
          v49[2]((int)Dst);
          sprintf(v222, "Marked: %s", Dst);
          v50 = *((_DWORD *)dword_563908 + 1504);
          v51 = sub_401532(Dst);
          if ( v51 )
          {
            *(_DWORD *)(v51 + 144) = 1;
            v52 = *((_DWORD *)dword_563908 + 1504);
LABEL_75:
            sub_4010FA(v52);
            return (char *)sub_40244B(v222, 0);
          }
        }
        else
        {
          (*v49)(v48);
          sprintf(v222, "Unmarked: %s", Dst);
          v53 = *((_DWORD *)dword_563908 + 1504);
          v54 = sub_401532(Dst);
          if ( v54 )
          {
            *(_DWORD *)(v54 + 144) = 0;
            v52 = *((_DWORD *)dword_563908 + 1504);
            goto LABEL_75;
          }
        }
        return (char *)sub_40244B(v222, 0);
      }
LABEL_317:
      if ( a3 )
        result = (char *)sub_402699(1, (int)&::Source, &Dest, v180);
      else
        result = (char *)sub_402699(0, (int)&::Source, &Dest, v180);
      return result;
    case 59:
      v55 = &Str;
      v56 = 0;
      if ( isdigit(Str) && Src == 59 )
      {
        v56 = (Str - 49) & ((Str - 49 < 0) - 1);
        if ( v56 >= 9 )
          v56 = 9;
        v55 = &v219;
      }
      v57 = 32 * v56;
      result = (char *)dword_563918 + v57 + 10024;
      if ( *result )
        result = (char *)sub_402699(6, (int)dword_563918 + v57 + 10024, v55, v180);
      return result;
  }
  if ( v5 != 63 )
    goto LABEL_317;
  v220 = 0;
  v58 = 0;
  sub_40146F(dword_563908, *((_DWORD *)dword_563908 + 6897) + 32, 0, &::Source, &Dest, v180);
  v59 = Dest;
  v60 = &Dest;
  v61 = &Str1;
  if ( Dest != 32 )
  {
    do
    {
      if ( !v59 )
        break;
      ++v60;
      *v61 = v59;
      v59 = *v60;
      ++v61;
    }
    while ( *v60 != 32 );
  }
  v62 = *v60 == 32;
  *v61 = 0;
  if ( v62 )
  {
    do
      ++v60;
    while ( *v60 == 32 );
  }
  if ( !_stricmp(&Str1, "?ignore") )
  {
    if ( *v60 )
    {
      v67 = sub_4B4E20(*((_DWORD *)i + 3), (int)v60);
      v68 = (void (__stdcall **)(int))**((_DWORD **)i + 3);
      if ( v67 == -1 )
      {
        v68[2]((int)v60);
        sprintf(v222, "Ignoring: %s", v60);
      }
      else
      {
        (*v68)(v67);
        sprintf(v222, "Listening: %s", v60);
      }
      result = (char *)sub_40244B(v222, 0);
    }
    else
    {
      result = (char *)sub_4B4680(*((_DWORD **)i + 3));
      v63 = result;
      if ( result )
      {
        v222[0] = 0;
        if ( (signed int)result > 0 )
        {
          do
          {
            if ( v222[0] )
            {
              v65 = strlen(v222);
              v66 = sub_4B4700(*((_DWORD **)i + 3), v58);
              sprintf(&v222[v65], ", %s", v66);
            }
            else
            {
              v64 = sub_4B4700(*((_DWORD **)i + 3), v58);
              sprintf(v222, "Ignore List: %s", v64);
            }
            if ( strlen(v222) > 0x50 || (result = v63 - 1, (char *)v58 == v63 - 1) )
            {
              result = (char *)sub_40244B(v222, 0);
              v222[0] = 0;
            }
            ++v58;
          }
          while ( v58 < (signed int)v63 );
        }
      }
      else
      {
        result = (char *)sub_40244B("Nobody on ignore list", 0);
      }
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?mark") )
  {
    if ( !*v60 )
    {
      result = (char *)sub_4B4680(*((_DWORD **)i + 4));
      v69 = result;
      if ( !result )
        return (char *)sub_40244B("Nobody on marked list", 0);
      v70 = 0;
      v222[0] = 0;
      if ( (signed int)result > 0 )
      {
        do
        {
          if ( v222[0] )
          {
            v72 = strlen(v222);
            v73 = sub_4B4700(*((_DWORD **)i + 4), v70);
            sprintf(&v222[v72], ", %s", v73);
          }
          else
          {
            v71 = sub_4B4700(*((_DWORD **)i + 4), v70);
            sprintf(v222, "Marked List: %s", v71);
          }
          if ( strlen(v222) > 0x50 || (result = v69 - 1, (char *)v70 == v69 - 1) )
          {
            result = (char *)sub_40244B(v222, 0);
            v222[0] = 0;
          }
          ++v70;
        }
        while ( v70 < (signed int)v69 );
      }
      return result;
    }
    v74 = v60;
    if ( *v60 == 58 )
    {
LABEL_125:
      if ( *v74 )
        *v74++ = 0;
    }
    else
    {
      while ( *v74 )
      {
        if ( *++v74 == 58 )
          goto LABEL_125;
      }
    }
    v75 = sub_4B4E20(*((_DWORD *)i + 4), (int)v60);
    v76 = (void (__stdcall ***)(int))*((_DWORD *)i + 4);
    if ( v75 == -1 )
    {
      sub_4B4990((int)v76, (int)v60, (int)v74);
      sprintf(v222, "Marked: %s", v60);
      v77 = *((_DWORD *)dword_563908 + 1504);
      v78 = sub_401532(v60);
      v79 = v78;
      if ( v78 )
      {
        *(_DWORD *)(v78 + 144) = 1;
        if ( v74 && strlen(v74) )
        {
          if ( *(_DWORD *)(v79 + 148) )
          {
            j__free(*(void **)(v79 + 148));
            *(_DWORD *)(v79 + 148) = 0;
          }
          v80 = operator new(strlen(v74) + 1);
          *(_DWORD *)(v79 + 148) = v80;
          memset(v80, 0, strlen(v74) + 1);
          v81 = *(_BYTE **)(v79 + 148);
          do
          {
            v82 = *v74;
            *v81++ = *v74++;
          }
          while ( v82 );
        }
        v83 = *((_DWORD *)dword_563908 + 1504);
        goto LABEL_138;
      }
    }
    else
    {
      (**v76)(v75);
      sprintf(v222, "Unmarked: %s", v60);
      v84 = *((_DWORD *)dword_563908 + 1504);
      v85 = sub_401532(v60);
      if ( v85 )
      {
        *(_DWORD *)(v85 + 144) = 0;
        v83 = *((_DWORD *)dword_563908 + 1504);
LABEL_138:
        sub_4010FA(v83);
        return (char *)sub_40244B(v222, 0);
      }
    }
    return (char *)sub_40244B(v222, 0);
  }
  if ( !_stricmp(&Str1, "?ignoresave") )
  {
    (*(void (**)(void))(**((_DWORD **)i + 3) + 16))();
    return (char *)sub_40244B("Current ignore list permanently saved", 0);
  }
  if ( !_stricmp(&Str1, "?marksave") )
  {
    (*(void (**)(void))(**((_DWORD **)i + 4) + 16))();
    return (char *)sub_40244B("Current mark list permanently saved", 0);
  }
  if ( !_stricmp(&Str1, "?go") )
  {
    v86 = *((_DWORD *)Memory + 1);
    v87 = *(_DWORD *)Memory ^ *(_DWORD *)(v86 + 4 * *((_DWORD *)dword_563908 + 2677));
    if ( *((_DWORD *)dword_563908 + 7710) >= 0 )
      v87 = *((_DWORD *)dword_563908 + 7710);
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(v86 + 4 * *((_DWORD *)dword_563908 + 2679))) < v87 )
      return (char *)sub_40244B("You do not have enough energy to switch arenas", 0);
    v88 = (char *)dword_563908 + 10732;
    if ( *v60 )
    {
      sub_401767((char *)dword_563908 + 10732, v60, 0x10u);
    }
    else
    {
      *(_WORD *)v88 = 12845;
      v88[2] = 0;
    }
    result = (char *)dword_563908;
    if ( *((_DWORD *)dword_563908 + 6937) == -1 )
    {
      if ( *((_DWORD *)dword_563908 + 6898) )
      {
        if ( (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4 )
        {
          result = (char *)dword_563908;
        }
        else
        {
          v91 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 108))();
          result = (char *)dword_563908;
          v92 = 480 * v91;
          if ( !*(_DWORD *)((char *)dword_563908 + v92 + 59454) )
          {
            v93 = *((_DWORD *)dword_563908 + 1509);
            return (char *)sub_40244B("You can not switch arenas from this terrain type.  (Terrain restriction)", 0);
          }
          if ( *(_DWORD *)((char *)dword_563908 + v92 + 59926) > 0 )
          {
            *((_DWORD *)dword_563908 + 6937) = sub_401D39(v90, v89);
            sprintf(
              v212,
              "You will switch arenas in %d secs.  (Delay due to terrain restrictions)",
              *(_DWORD *)((char *)dword_563908 + v92 + 59926));
            v94 = *((_DWORD *)dword_563908 + 1509);
            return (char *)sub_40244B(v212, 0);
          }
        }
      }
      *((_DWORD *)result + 2682) = 1;
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?away") )
  {
    while ( *v60 == 32 || *v60 == 61 )
      ++v60;
    strcpy(i + 37720, v60);
    if ( i[37720] )
      result = (char *)sub_40244B("Away message turned ON", 0);
    else
      result = (char *)sub_40244B("Away message turned OFF", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?chat") )
  {
    if ( *v60 )
    {
      memset((char *)dword_563918 + 10024, 0, 0x120u);
      if ( _stricmp(v60, "off") )
      {
        v95 = (char *)(Filename - v60);
        do
        {
          v96 = *v60;
          v60[(_DWORD)v95] = *v60;
          ++v60;
        }
        while ( v96 );
        if ( Filename[0] )
        {
          v97 = 0;
          do
          {
            if ( v97 >= 288 )
              break;
            v98 = (char *)sub_48CA10((int)v212, Filename);
            if ( !v98 )
              break;
            sub_401767((char *)dword_563918 + v97 + 10024, v98, 0x20u);
            v97 += 32;
          }
          while ( Filename[0] );
        }
      }
    }
    goto LABEL_317;
  }
  if ( !_stricmp(&Str1, "?chatadd") )
  {
    v99 = 0;
    while ( 1 )
    {
      result = (char *)dword_563918 + v58 + 10024;
      if ( !*result )
        break;
      result = (char *)_stricmp((const char *)dword_563918 + v58 + 10024, v60);
      if ( !result )
        break;
      v58 += 32;
      ++v99;
      if ( v58 >= 288 )
        return result;
    }
    if ( v99 < 9 )
    {
      result = (char *)dword_563918 + 32 * v99 + 10024;
      if ( !*result )
      {
        sub_401767((char *)dword_563918 + 32 * v99 + 10024, v60, 0x20u);
        v100 = 0;
        *(_DWORD *)v212 = 1634231103;
        LOWORD(v214) = 8308;
        for ( BYTE2(v214) = 0; v100 <= v99; ++v100 )
        {
          if ( v100 )
            sprintf(&v212[&v212[strlen(v212) + 1] - v213], ",%s", (char *)dword_563918 + 32 * v100 + 10024);
          else
            sprintf(&v212[&v212[strlen(v212) + 1] - v213], "%s", (char *)dword_563918 + 10024);
        }
        result = (char *)sub_402793(v212, 0);
      }
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?chatdrop") )
  {
    v101 = 0;
    while ( 1 )
    {
      result = (char *)dword_563918 + v58 + 10024;
      if ( !*result )
        break;
      result = (char *)_stricmp((const char *)dword_563918 + v58 + 10024, v60);
      if ( !result )
        break;
      v58 += 32;
      ++v101;
      if ( v58 >= 288 )
        return result;
    }
    if ( v101 < 9 )
    {
      result = (char *)dword_563918 + 32 * v101;
      if ( result[10024] )
      {
        memcpy_0(result + 10024, result + 10056, 32 * (8 - v101));
        *((_BYTE *)dword_563918 + 10280) = 0;
        *(_DWORD *)v212 = 1634231103;
        LOWORD(v214) = 8308;
        BYTE2(v214) = 0;
        v102 = 0;
        do
        {
          if ( !*((_BYTE *)dword_563918 + 32 * v102 + 10024) )
            break;
          if ( v102 )
            sprintf(&v212[&v212[strlen(v212) + 1] - v213], ",%s", (char *)dword_563918 + 32 * v102 + 10024);
          else
            sprintf(&v212[&v212[strlen(v212) + 1] - v213], "%s", (char *)dword_563918 + 10024);
          ++v102;
        }
        while ( v102 < 9 );
        if ( !v102 )
        {
          *(_DWORD *)v212 = 1634231103;
          v214 = 1718558836;
          v215 = 102;
        }
        result = (char *)sub_402793(v212, 0);
      }
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?briefing") )
  {
    result = (char *)dword_563908;
    if ( *((_DWORD *)dword_563908 + 478) )
      return (char *)sub_4A7120(*((_DWORD **)result + 478), 0, 0, 0, 0);
    if ( *((_BYTE *)dword_563908 + 57966) )
    {
      if ( !_access((const char *)dword_563908 + 57966, 0) )
      {
        v103 = operator new(0xF0u);
        v183 = v103;
        v225 = 0;
        if ( v103 )
          v104 = sub_4A6C30(v103, *((_DWORD *)dword_563908 + 354), 0, 0, 1, (int)dword_563908 + 57966, 0);
        else
          v104 = 0;
        v225 = -1;
        *((_DWORD *)dword_563908 + 478) = v104;
      }
      result = (char *)dword_563908;
    }
    if ( *((_DWORD *)result + 478) )
      return (char *)sub_4A7120(*((_DWORD **)result + 478), 0, 0, 0, 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?alarm") )
  {
    *((_DWORD *)dword_563918 + 2232) = (*((_DWORD *)dword_563918 + 2232) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2232) )
      result = (char *)sub_40244B("Message alarm ON", 0);
    else
      result = (char *)sub_40244B("Message alarm OFF", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?fakealpha") )
  {
    *((_DWORD *)dword_563918 + 2248) = (*((_DWORD *)dword_563918 + 2248) + 1) % 2;
    sub_4A3A10(*((_DWORD *)dword_563918 + 2248));
    if ( *((_DWORD *)dword_563918 + 2248) )
      result = (char *)sub_40244B("Fake Alpha Blending YES", 0);
    else
      result = (char *)sub_40244B("Fake Alpha Blending NO", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?showphysics") )
  {
    *((_DWORD *)dword_563918 + 2323) = (*((_DWORD *)dword_563918 + 2323) + 1) % 2;
    result = (char *)dword_563918;
    if ( *((_DWORD *)dword_563918 + 2323) )
    {
      *((_DWORD *)dword_563918 + 2325) = 0;
      *((_DWORD *)dword_563918 + 2326) = 0;
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?showvehicle") )
  {
    result = (char *)dword_563918;
    *((_DWORD *)dword_563918 + 2324) = (*((_DWORD *)dword_563918 + 2324) + 1) % 2;
    return result;
  }
  if ( !_stricmp(&Str1, "?showstars") )
  {
    *((_DWORD *)dword_563918 + 2234) = (*((_DWORD *)dword_563918 + 2234) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2234) )
      result = (char *)sub_40244B("Starfield rendering ON", 0);
    else
      result = (char *)sub_40244B("Starfield rendering OFF", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?transparentmessages") )
  {
    *((_DWORD *)dword_563918 + 2275) = (*((_DWORD *)dword_563918 + 2275) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2275) )
      sub_40244B("Transparent messages ON", 0);
    else
      sub_40244B("Transparent messages OFF", 0);
    return (char *)sub_401965(dword_563908);
  }
  if ( !_stricmp(&Str1, "?transparentplayerlist") )
  {
    *((_DWORD *)dword_563918 + 2274) = (*((_DWORD *)dword_563918 + 2274) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2274) )
      sub_40244B("Transparent player-list ON", 0);
    else
      sub_40244B("Transparent player-list OFF", 0);
    return (char *)sub_401965(dword_563908);
  }
  if ( !_stricmp(&Str1, "?showlogo") )
  {
    *((_DWORD *)dword_563918 + 2222) = (*((_DWORD *)dword_563918 + 2222) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2222) )
      result = (char *)sub_40244B("Logo rendering ON", 0);
    else
      result = (char *)sub_40244B("Logo rendering OFF", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?showparallax") )
  {
    *((_DWORD *)dword_563918 + 2235) = (*((_DWORD *)dword_563918 + 2235) + 1) % 2;
    if ( *((_DWORD *)dword_563918 + 2235) )
      result = (char *)sub_40244B("Parallax rendering ON", 0);
    else
      result = (char *)sub_40244B("Parallax rendering OFF", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?showballtrail") )
  {
    if ( *v60 )
    {
      if ( j__atol(v60) <= 1000 && j__atol(v60) <= 0 )
      {
        v105 = 0;
      }
      else if ( j__atol(v60) <= 1000 )
      {
        v105 = j__atol(v60);
      }
      else
      {
        v105 = 1000;
      }
      *((_WORD *)dword_563918 + 4450) = v105;
    }
    sprintf(v212, "Ball Trail Length: %d", *((signed __int16 *)dword_563918 + 4450));
    return (char *)sub_40244B(v212, 0);
  }
  if ( !_stricmp(&Str1, "?showvision") )
  {
    *((_DWORD *)dword_563918 + 2325) = (*((_DWORD *)dword_563918 + 2325) + 1) % 2;
    result = (char *)dword_563918;
    if ( *((_DWORD *)dword_563918 + 2325) )
    {
      *((_DWORD *)dword_563918 + 2323) = 0;
      *((_DWORD *)dword_563918 + 2326) = 0;
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?showterrain") )
  {
    *((_DWORD *)dword_563918 + 2326) = (*((_DWORD *)dword_563918 + 2326) + 1) % 2;
    result = (char *)dword_563918;
    if ( *((_DWORD *)dword_563918 + 2326) )
    {
      *((_DWORD *)dword_563918 + 2325) = 0;
      *((_DWORD *)dword_563918 + 2323) = 0;
    }
    return result;
  }
  if ( !_stricmp(&Str1, "?showfog") )
  {
    if ( !_stricmp(v60, "alpha") )
    {
      *((_DWORD *)dword_563918 + 2240) = 1;
    }
    else if ( !_stricmp(v60, "normal") )
    {
      *((_DWORD *)dword_563918 + 2240) = 0;
    }
    else if ( !_stricmp(v60, "on") )
    {
      *((_DWORD *)dword_563918 + 2239) = 2;
    }
    else if ( !_stricmp(v60, "off") )
    {
      *((_DWORD *)dword_563918 + 2239) = 0;
    }
    else if ( !_stricmp(v60, "auto") )
    {
      *((_DWORD *)dword_563918 + 2239) = 1;
    }
    v106 = *((_DWORD *)dword_563918 + 2239);
    if ( v106 )
    {
      v107 = v106 - 1;
      if ( v107 )
      {
        if ( v107 == 1 )
        {
          v185 = (void *)2003789907;
          v186 = (const char *)1735345696;
          v187 = (const char *)&loc_4E4F20;
        }
        goto LABEL_289;
      }
      v186 = (const char *)1735345696;
      v185 = (void *)2003789907;
      v108 = (const char *)1414873376;
      LOWORD(v188) = 79;
    }
    else
    {
      v186 = (const char *)1735345696;
      v185 = (void *)2003789907;
      v108 = (const char *)1179012896;
      LOBYTE(v188) = 0;
    }
    v187 = v108;
LABEL_289:
    if ( *((_DWORD *)dword_563918 + 2240) )
    {
      v109 = (char *)&Time + 7;
      do
        v110 = (v109++)[1];
      while ( v110 );
      *(_DWORD *)v109 = 1818306592;
      *((_DWORD *)v109 + 1) = 694249584;
      v109[8] = 0;
    }
    return (char *)sub_40244B(&v185, 0);
  }
  if ( !_stricmp(&Str1, "?quit") )
  {
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2679))) >= (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2677))) )
      result = (char *)PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 0, 0);
    else
      result = (char *)sub_40244B("Cannot quick-quit unless you have full energy", 0);
    return result;
  }
  if ( !_stricmp(&Str1, "?flags") )
  {
    File = 0;
    v111 = dword_563908;
    v112 = *((_DWORD *)dword_563908 + 1514);
    v113 = 0;
    if ( *(_DWORD *)(v112 + 27436) > 0 )
    {
      v114 = 26412;
      do
      {
        v115 = *(_DWORD *)(v112 + v114);
        if ( *(_WORD *)(v115 + 10) > 0 )
        {
          v116 = *(_WORD *)(v115 + 14);
          if ( v116 < 0 )
          {
            sprintf(Dst, "%s: (unowned)", *(_DWORD *)(v115 + 16) + 8);
          }
          else
          {
            v117 = v111[1504];
            v118 = sub_402108(v116);
            if ( v118 )
              sprintf(Dst, "%s: %s", *(_DWORD *)(v115 + 16) + 8, v118);
            else
              sprintf(Dst, "%s: (unknown)", *(_DWORD *)(v115 + 16) + 8);
          }
          v119 = *((_DWORD *)dword_563908 + 1509);
          sub_40244B(Dst, 0);
          v111 = dword_563908;
          File = (FILE *)1;
        }
        v112 = v111[1514];
        ++v113;
        v114 += 4;
      }
      while ( v113 < *(_DWORD *)(v112 + 27436) );
    }
    v120 = v111[1514];
    v121 = 0;
    if ( *(_DWORD *)(v120 + 27436) > 0 )
    {
      v122 = 26412;
      do
      {
        v123 = *(_DWORD *)(v122 + v120);
        v124 = *(_WORD *)(v123 + 8);
        if ( v124 >= 0 )
        {
          v125 = v111[1504];
          v126 = sub_40105A(v124);
          if ( v126 )
          {
            sprintf(Dst, "%s: carried by %s (%s)", *(_DWORD *)(v123 + 16) + 8, v126 + 32, v126);
            v127 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B(Dst, 0);
            v111 = dword_563908;
            File = (FILE *)1;
          }
        }
        v120 = v111[1514];
        ++v121;
        v122 += 4;
      }
      while ( v121 < *(_DWORD *)(v120 + 27436) );
    }
    if ( !File )
    {
      v128 = v111[1509];
      sub_40244B("No flags currently found in game", 0);
    }
    goto LABEL_317;
  }
  if ( !_stricmp(&Str1, "?score_session") )
  {
    v129 = strstr(v60, "f:");
    if ( v129 )
    {
      *v129 = 0;
      v129 += 2;
    }
    result = (char *)sub_402603(18, (int)&::Source, v129);
  }
  else if ( !_stricmp(&Str1, "?score_current") )
  {
    v130 = strstr(v60, "f:");
    if ( v130 )
    {
      *v130 = 0;
      v130 += 2;
    }
    result = (char *)sub_402603(2, (int)&::Source, v130);
  }
  else if ( !_stricmp(&Str1, "?score_previous") )
  {
    v131 = strstr(v60, "f:");
    if ( v131 )
    {
      *v131 = 0;
      v131 += 2;
    }
    result = (char *)sub_402603(17, (int)&::Source, v131);
  }
  else if ( !_stricmp(&Str1, "?score_top100") )
  {
    v132 = strstr(v60, "f:");
    if ( v132 )
    {
      *v132 = 0;
      v132 += 2;
    }
    result = (char *)sub_402603(1, (int)&::Source, v132);
  }
  else if ( !_stricmp(&Str1, "?score_online") )
  {
    v133 = strstr(v60, "f:");
    if ( v133 )
    {
      *v133 = 0;
      v133 += 2;
    }
    result = (char *)sub_402603(0, (int)&::Source, v133);
  }
  else if ( !_stricmp(&Str1, "?score_top100_day") )
  {
    v134 = strstr(v60, "f:");
    if ( v134 )
    {
      *v134 = 0;
      v134 += 2;
    }
    result = (char *)sub_402603(3, (int)v60, v134);
  }
  else if ( !_stricmp(&Str1, "?score_top100_week") )
  {
    v135 = strstr(v60, "f:");
    v136 = v135;
    if ( v135 )
    {
      *v135 = 0;
      v136 = v135 + 2;
    }
    j__atol(v60);
    result = (char *)sub_402603(4, (int)v60, v136);
  }
  else if ( !_stricmp(&Str1, "?score_top100_month") )
  {
    v137 = strstr(v60, "f:");
    v138 = v137;
    if ( v137 )
    {
      *v137 = 0;
      v138 = v137 + 2;
    }
    j__atol(v60);
    result = (char *)sub_402603(5, (int)v60, v138);
  }
  else if ( !_stricmp(&Str1, "?score_top100_year") )
  {
    v139 = strstr(v60, "f:");
    v140 = v139;
    if ( v139 )
    {
      *v139 = 0;
      v140 = v139 + 2;
    }
    j__atol(v60);
    result = (char *)sub_402603(6, (int)v60, v140);
  }
  else if ( !_stricmp(&Str1, "?score_history_day") )
  {
    v141 = strstr(v60, "f:");
    if ( v141 )
    {
      *v141 = 0;
      v141 += 2;
    }
    result = (char *)sub_402603(7, (int)v60, v141);
  }
  else if ( !_stricmp(&Str1, "?score_history_week") )
  {
    v142 = strstr(v60, "f:");
    if ( v142 )
    {
      *v142 = 0;
      v142 += 2;
    }
    result = (char *)sub_402603(8, (int)v60, v142);
  }
  else if ( !_stricmp(&Str1, "?score_history_month") )
  {
    v143 = strstr(v60, "f:");
    if ( v143 )
    {
      *v143 = 0;
      v143 += 2;
    }
    result = (char *)sub_402603(9, (int)v60, v143);
  }
  else if ( !_stricmp(&Str1, "?score_history_year") )
  {
    v144 = strstr(v60, "f:");
    if ( v144 )
    {
      *v144 = 0;
      v144 += 2;
    }
    result = (char *)sub_402603(10, (int)v60, v144);
  }
  else
  {
    if ( !_stricmp(&Str1, "?lag") )
    {
      v145 = (LPCRITICAL_SECTION *)(*(int (**)(void))(*(_DWORD *)dword_56391C + 156))();
      if ( v145 )
      {
        sub_482190(v145, (int)Dst);
        if ( v198 >= 4000 )
          sprintf(v222, "PING UNKNOWN");
        else
          sprintf(
            v222,
            "PING Current=%d ms  Average=%d ms  Low=%d ms  High=%d ms  Last=%d ms",
            v198,
            v199,
            v200,
            v201,
            v202);
        sub_40244B(v222, 0);
      }
      goto LABEL_317;
    }
    if ( !_stricmp(&Str1, "?volume") )
    {
      if ( isdigit(*v60) )
      {
        if ( j__atol(v60) > 100 || j__atol(v60) >= 0 )
        {
          if ( j__atol(v60) <= 100 )
            v146 = j__atol(v60);
          else
            v146 = 100;
        }
        else
        {
          v146 = 0;
        }
        *((_DWORD *)dword_563918 + 2242) = v146;
        sub_4A6BF0(*((_DWORD **)dword_563908 + 354), *((_DWORD *)dword_563918 + 2242));
      }
      sprintf(v222, "Sound Volume: %d", *((_DWORD *)dword_563918 + 2242));
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?viewspeed") )
    {
      if ( isdigit(*v60) )
      {
        if ( j__atol(v60) < 0 || j__atol(v60) <= 100 )
        {
          if ( j__atol(v60) >= 0 )
            v147 = j__atol(v60);
          else
            v147 = 0;
        }
        else
        {
          v147 = 100;
        }
        *((_DWORD *)dword_563918 + 2249) = v147;
      }
      sprintf(v222, "View Speed: %d", *((_DWORD *)dword_563918 + 2249));
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?namewidth") )
    {
      if ( isdigit(*v60) )
        *((_DWORD *)dword_563918 + 2330) = j__atol(v60);
      sprintf(v222, "Name Width: %d", *((_DWORD *)dword_563918 + 2330));
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?radarsize") )
    {
      if ( isdigit(*v60) )
      {
        if ( j__atol(v60) >= 160 && j__atol(v60) >= 500 )
        {
          v148 = 500;
        }
        else if ( j__atol(v60) >= 160 )
        {
          v148 = j__atol(v60);
        }
        else
        {
          v148 = 160;
        }
        *((_DWORD *)dword_563908 + 3100) = v148;
        sub_401965(dword_563908);
      }
      sprintf(v222, "Radar Size: %d", *((_DWORD *)dword_563908 + 3100));
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?sounddelay") )
    {
      if ( isdigit(*v60) )
      {
        if ( j__atol(v60) < 1 || j__atol(v60) <= 50 )
        {
          if ( j__atol(v60) >= 1 )
            v149 = j__atol(v60);
          else
            v149 = 1;
        }
        else
        {
          v149 = 50;
        }
        *((_DWORD *)dword_563918 + 2264) = v149;
      }
      sprintf(v222, "Sound Delay: %d", *((_DWORD *)dword_563918 + 2264));
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?viewpercent") )
    {
      if ( isdigit(*v60) )
      {
        if ( 10 * j__atol(v60) < 0 || 10 * j__atol(v60) <= 1000 )
        {
          if ( 10 * j__atol(v60) >= 0 )
            v150 = 10 * j__atol(v60);
          else
            v150 = 0;
        }
        else
        {
          v150 = 1000;
        }
        *((_DWORD *)dword_563918 + 2250) = v150;
      }
      sprintf(v222, "View Percent: %d%%", *((_DWORD *)dword_563918 + 2250) / 10);
      result = (char *)sub_40244B(v222, 0);
    }
    else if ( !_stricmp(&Str1, "?rotatetime") )
    {
      if ( isdigit(*v60) )
        *((_DWORD *)dword_563918 + 2252) = j__atol(v60) / 10;
      sprintf(v222, "Rotation Ramp-up Time: %d ms", 10 * *((_DWORD *)dword_563918 + 2252));
      result = (char *)sub_40244B(v222, 0);
    }
    else
    {
      result = (char *)_stricmp(&Str1, "?loadmacro");
      if ( result )
      {
        result = (char *)_stricmp(&Str1, "?savemacro");
        if ( result )
        {
          if ( !_stricmp(&Str1, "?savehistory") )
          {
            if ( *v60 )
            {
              v155 = (char *)(Dst - v60);
              do
              {
                v156 = *v60;
                v60[(_DWORD)v155] = *v60;
                ++v60;
              }
              while ( v156 );
            }
            else
            {
              strcpy(Dst, "history.log");
            }
            v158 = fopen(Dst, "wt");
            File = v158;
            if ( v158 )
            {
              v159 = *((_DWORD *)i + 8155);
              v160 = (v159 - 4000) & ((v159 - 4000 < 0) - 1);
              v182 = (v159 - 4000) & ((v159 - 4000 < 0) - 1);
              if ( v160 < v159 )
              {
                do
                {
                  v161 = v160 % 4000;
                  v162 = *(_DWORD *)&i[8 * (v160 % 4000) + 620];
                  if ( v162 )
                  {
                    v163 = *(const char **)&i[8 * (v160 % 4000) + 620];
                    v164 = &v163[strlen(v163) + 1];
                    sub_4C3361(
                      File,
                      (int)"%d\t%s\t%s\t%s\n",
                      *(_DWORD *)&i[8 * v161 + 624],
                      v164,
                      v162,
                      &v164[v162 - v157 + 2 + strlen(v164)]);
                    v160 = v182;
                  }
                  v166 = __OFSUB__(++v160, *((_DWORD *)i + 8155));
                  v165 = v160 - *((_DWORD *)i + 8155) < 0;
                  v182 = v160;
                }
                while ( v165 ^ v166 );
                v158 = File;
              }
              fclose(v158);
              sprintf(v212, "Message history saved to file: %s", Dst);
              result = (char *)sub_40244B(v212, 0);
            }
            else
            {
              result = (char *)sub_40244B("Could not write to file", 0);
            }
          }
          else if ( !_stricmp(&Str1, "?log") )
          {
            if ( *((_DWORD *)i + 8158) )
            {
              fclose(*((FILE **)i + 8158));
              *((_DWORD *)i + 8158) = 0;
              sprintf(Dst, "Log file closed: %s", i + 32640);
              result = (char *)sub_40244B(Dst, 0);
            }
            else
            {
              if ( *v60 )
              {
                v167 = (char *)(Dst - v60);
                do
                {
                  v168 = *v60;
                  v60[(_DWORD)v167] = *v60;
                  ++v60;
                }
                while ( v168 );
              }
              else
              {
                strcpy(Dst, "session.log");
              }
              strcpy(i + 32640, Dst);
              v169 = fopen(i + 32640, "wt");
              *((_DWORD *)i + 8158) = v169;
              v178 = (int)(i + 32640);
              if ( v169 )
                sprintf(Dst, "Log file open: %s", v178);
              else
                sprintf(Dst, "Could not open log file: %s", v178);
              result = (char *)sub_40244B(Dst, 0);
            }
          }
          else
          {
            if ( !_stricmp(&Str1, "?teaminfo") )
              return (char *)sub_4020D1(5, 0);
            result = (char *)_stricmp(&Str1, "?cancel");
            if ( !result )
            {
              *((_DWORD *)dword_563908 + 6939) = 0;
              return result;
            }
            if ( _stricmp(&Str1, "?team") )
              goto LABEL_317;
            if ( *v60 )
            {
              v170 = *((_DWORD *)Memory + 1);
              v171 = *(_DWORD *)Memory;
              v172 = *(_DWORD *)Memory ^ *(_DWORD *)(v170 + 4 * *((_DWORD *)dword_563908 + 2680));
              v173 = 0;
              if ( v172 == -1 )
              {
                v173 = 1;
                v172 = v171 ^ *(_DWORD *)(v170 + 4 * *((_DWORD *)dword_563908 + 2677));
              }
              if ( (v171 ^ *(_DWORD *)(v170 + 4 * *((_DWORD *)dword_563908 + 2679))) < v172 )
              {
                if ( v173 )
                  return (char *)sub_40244B("Cannot switch teams unless you have full energy", 0);
                sprintf(&v224, "Cannot switch teams unless you have at least %d energy", v172 / 1000);
                return (char *)sub_40244B(&v224, 0);
              }
              goto LABEL_317;
            }
            result = (char *)(*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 24))();
            if ( result )
            {
              if ( (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 28))() != 1 )
              {
                if ( (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 20))() )
                {
                  v174 = dword_563908;
                  if ( *((_DWORD *)dword_563908 + 1535) )
                  {
                    v175 = *((_DWORD *)dword_563908 + 1535);
                    if ( v175 )
                    {
                      (*(void (__stdcall **)(signed int))(*(_DWORD *)v175 + 4))(1);
                      v174 = dword_563908;
                    }
                    v174[1535] = 0;
                  }
                }
                v183 = operator new(0x2Cu);
                v225 = 1;
                if ( v183 )
                  v176 = sub_401591(*((_DWORD *)dword_563908 + 89), (char *)dword_563908 + 12404);
                else
                  v176 = 0;
                v225 = -1;
                *((_DWORD *)dword_563908 + 1535) = v176;
              }
              v177 = *((_DWORD *)dword_563908 + 1535);
              result = (char *)sub_401154(16);
            }
          }
        }
        else if ( *v60 )
        {
          v153 = (char *)(Filename - v60);
          do
          {
            v154 = *v60;
            v60[(_DWORD)v153] = *v60;
            ++v60;
          }
          while ( v154 );
          if ( !strchr(Filename, 46) )
            sprintf(&Filename[strlen(Filename)], ".mc%d", *((_DWORD *)dword_563918 + 2204));
          sub_402374(Filename);
          result = (char *)sub_40244B("Macros saved", 0);
        }
      }
      else if ( *v60 )
      {
        v151 = (char *)(Filename - v60);
        do
        {
          v152 = *v60;
          v60[(_DWORD)v151] = *v60;
          ++v60;
        }
        while ( v152 );
        if ( !strchr(Filename, 46) )
          sprintf(&Filename[strlen(Filename)], ".mc%d", *((_DWORD *)dword_563918 + 2204));
        sub_40169F(Filename);
        result = (char *)sub_40244B("Macros loaded", 0);
      }
    }
  }
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 4010FA: using guessed type int __thiscall sub_4010FA(_DWORD);
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 40146F: using guessed type int __thiscall sub_40146F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 401686: using guessed type int __thiscall sub_401686(_DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401CE9: using guessed type _DWORD __stdcall sub_401CE9(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401DE3: using guessed type int __thiscall sub_401DE3(_DWORD);
// 402086: using guessed type int __thiscall sub_402086(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 402108: using guessed type _DWORD __stdcall sub_402108(_DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 402941: using guessed type int __thiscall sub_402941(_DWORD);
// 56391C: using guessed type int dword_56391C;
// 449C40: using guessed type char var_2010[4];
// 449C40: using guessed type char Filename[256];
// 449C40: using guessed type char var_C10[2048];
// 449C40: using guessed type char var_1410[2048];

//----- (0044D750) --------------------------------------------------------
char __thiscall sub_44D750(char *this, int a2, int a3)
{
  char *v3; // esi
  int v4; // ebx
  SHORT v5; // ax
  int v6; // ebp
  int v7; // edi
  _DWORD *v8; // ecx
  int v9; // eax
  int v10; // edx
  int v11; // edx
  int v12; // eax
  int v13; // edx
  int v14; // eax
  int v15; // edx
  int v16; // eax
  int v17; // edi
  char *v18; // edi
  bool v19; // zf
  bool v20; // sf
  int v21; // edx
  int v22; // ecx
  int v23; // ecx
  int v24; // edi
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // eax
  _BYTE *v29; // ebp
  signed int v30; // edi
  int v31; // edi
  int v32; // eax
  const char *v33; // eax
  int v35; // [esp+18h] [ebp-B4h]
  int v36; // [esp+1Ch] [ebp-B0h]
  int v37; // [esp+20h] [ebp-ACh]
  int v38; // [esp+24h] [ebp-A8h]
  int v39; // [esp+28h] [ebp-A4h]
  int v40; // [esp+2Ch] [ebp-A0h]
  int v41; // [esp+30h] [ebp-9Ch]
  int v42; // [esp+34h] [ebp-98h]
  int v43; // [esp+38h] [ebp-94h]
  int v44; // [esp+3Ch] [ebp-90h]
  int v45; // [esp+40h] [ebp-8Ch]
  int v46; // [esp+44h] [ebp-88h]
  char Dest; // [esp+48h] [ebp-84h]

  v3 = this;
  v35 = GetKeyState(16) & 0x8000;
  v4 = GetKeyState(18) & 0x8000;
  v5 = GetKeyState(17);
  v6 = v5 & 0x8000;
  v7 = a3 & 0x40000000;
  v36 = v5 & 0x8000;
  if ( *((_DWORD *)dword_56390C + 1567) )
    (**((void (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, -1);
  if ( *((_DWORD *)dword_56390C + 1568) )
    (**((void (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, 1);
  v8 = dword_563918;
  v9 = *((_DWORD *)dword_563918 + 2311);
  v38 = *((_DWORD *)dword_563918 + 2319);
  v10 = *((_DWORD *)dword_563918 + 2312);
  v37 = v9;
  v39 = v10;
  v11 = *((_DWORD *)dword_563918 + 2313);
  v41 = v9;
  v12 = *((_DWORD *)dword_563918 + 2316);
  v40 = v11;
  v13 = *((_DWORD *)dword_563918 + 2315);
  v42 = v12;
  v14 = *((_DWORD *)dword_563918 + 2314);
  v43 = v13;
  v15 = *((_DWORD *)dword_563918 + 2317);
  v44 = v14;
  v16 = *((_DWORD *)dword_563918 + 2318);
  v45 = v15;
  v46 = v16;
  if ( !v7 )
  {
    v16 = (int)dword_56390C + 6288;
    while ( !*(_DWORD *)(v16 + 72) )
    {
      if ( *(_DWORD *)v16 )
        goto LABEL_12;
      ++v7;
      v16 += 4;
      if ( v7 >= 12 )
        goto LABEL_17;
    }
    v7 += 12;
LABEL_12:
    if ( v7 >= 0 )
    {
      (**((void (__thiscall ***)(int, _DWORD, _DWORD))v3 + 1))((int)(v3 + 4), 0, 0);
      v17 = 201 * v7;
      if ( strlen(v3 + 37920) <= 1 )
      {
        LOBYTE(v16) = sub_402793(&v3[v17 + 32896], 1);
      }
      else
      {
        v18 = &v3[v17 + 32896];
        strncpy(v18, v3 + 37920, 0xC8u);
        v18[199] = 0;
        v3[37920] = 0;
        *((_DWORD *)v3 + 9736) = 0;
        *((_DWORD *)v3 + 9737) = 0;
        sprintf(&Dest, "Macro stored, press again to send.");
        LOBYTE(v16) = sub_40273E((char *)&Source, 5, (int)&Source, (int)&Dest, 0);
      }
      v6 = v36;
      v8 = dword_563918;
    }
  }
LABEL_17:
  if ( v4 )
  {
    if ( *((_DWORD *)v3 + 154) )
      return v16;
    v19 = a2 == 13;
    goto LABEL_90;
  }
  if ( v6 )
  {
    if ( *((_DWORD *)v3 + 154) )
    {
      LOBYTE(v16) = a2;
      switch ( a2 )
      {
        case 8:
          memcpy_0(v3 + 37920, &v3[*((_DWORD *)v3 + 9736) + 37920], strlen(&v3[*((_DWORD *)v3 + 9736) + 37920]) + 1);
          LOBYTE(v16) = 0;
          *((_DWORD *)v3 + 9736) = 0;
          *((_DWORD *)v3 + 9737) = 0;
          return v16;
        case 37:
          v16 = *((_DWORD *)v3 + 9736);
          if ( v16 >= 2 )
          {
            v25 = v16 - 2;
            *((_DWORD *)v3 + 9736) = v25;
            if ( v3[v25 + 37920] != 32 )
            {
              do
              {
                v26 = *((_DWORD *)v3 + 9736);
                if ( v26 <= 0 )
                  break;
                *((_DWORD *)v3 + 9736) = v26 - 1;
              }
              while ( v3[v26 + 37919] != 32 );
            }
            v16 = *((_DWORD *)v3 + 9736);
            if ( v16 )
              *((_DWORD *)v3 + 9736) = ++v16;
          }
          return v16;
        case 38:
          v16 = *((_DWORD *)v3 + 8155);
          if ( *((_DWORD *)v3 + 9738) > v16 )
            *((_DWORD *)v3 + 9738) = v16 + 1;
          v20 = (*((_DWORD *)v3 + 9738))-- - 1 < 0;
          v23 = *((_DWORD *)v3 + 9738);
          if ( v20 )
            return v16;
          v24 = v16 - 4000;
          while ( 2 )
          {
            if ( v23 <= v24 )
              return v16;
            v16 = v23 / 4000;
            v21 = v23 % 4000;
            if ( !*(_DWORD *)&v3[8 * (v23 % 4000) + 620] || (v16 = *(_DWORD *)&v3[8 * v21 + 624], *(&v37 + v16)) )
            {
              *((_DWORD *)v3 + 9738) = --v23;
              if ( v23 < 0 )
                return v16;
              continue;
            }
            break;
          }
          goto LABEL_31;
        case 39:
          if ( v3[*((_DWORD *)v3 + 9736) + 37920] != 32 )
          {
            do
            {
              v27 = *((_DWORD *)v3 + 9736);
              if ( !v3[v27 + 37920] )
                break;
              v28 = v27 + 1;
              *((_DWORD *)v3 + 9736) = v28;
            }
            while ( v3[v28 + 37920] != 32 );
          }
          v16 = *((_DWORD *)v3 + 9736);
          if ( v3[v16 + 37920] )
            *((_DWORD *)v3 + 9736) = ++v16;
          return v16;
        case 40:
          v20 = (*((_DWORD *)v3 + 9738))++ + 1 < 0;
          if ( v20 )
            *((_DWORD *)v3 + 9738) = 0;
          if ( *((_DWORD *)v3 + 9738) > *((_DWORD *)v3 + 8155) )
            return v16;
          break;
        case 45:
        case 67:
        case 99:
          LOBYTE(v16) = sub_401668(v3);
          return v16;
        case 46:
          v16 = *((_DWORD *)v3 + 9736);
          v3[v16 + 37920] = 0;
          return v16;
        case 86:
        case 118:
          goto LABEL_57;
        default:
          return v16;
      }
      while ( 1 )
      {
        v16 = *((_DWORD *)v3 + 9738) / 4000;
        v21 = *((_DWORD *)v3 + 9738) % 4000;
        if ( *(_DWORD *)&v3[8 * v21 + 620] )
        {
          v16 = *(_DWORD *)&v3[8 * v21 + 624];
          if ( !*(&v37 + v16) )
            break;
        }
        v22 = *((_DWORD *)v3 + 9738) + 1;
        *((_DWORD *)v3 + 9738) = v22;
        if ( v22 > *((_DWORD *)v3 + 8155) )
          return v16;
      }
LABEL_31:
      LOBYTE(v16) = sub_4013B6(v21);
    }
  }
  else
  {
    v29 = v3 + 37920;
    v30 = strlen(v3 + 37920);
    if ( *((_DWORD *)v3 + 154) )
    {
      LOBYTE(v16) = a2;
      switch ( a2 )
      {
        case 8:
          goto LABEL_99;
        case 13:
          sub_401CCB(0);
          (**((void (__thiscall ***)(int, _DWORD, _DWORD))v3 + 1))((int)(v3 + 4), 0, 0);
          if ( v30 > 0 )
          {
            sub_402793(v3 + 37920, 0);
            *v29 = 0;
            *((_DWORD *)v3 + 9736) = 0;
            *((_DWORD *)v3 + 9737) = 0;
          }
          *((_DWORD *)v3 + 154) = 0;
          sub_401113(dword_563908);
          LOBYTE(v16) = sub_402847(25);
          return v16;
        case 27:
          if ( !v35 )
          {
            *((_DWORD *)v3 + 154) = 0;
            sub_401113(dword_563908);
            LOBYTE(v16) = (_BYTE)dword_563918;
            if ( !*((_DWORD *)dword_563918 + 2344) )
            {
              v16 = strlen(v3 + 37920);
              *((_DWORD *)v3 + 9736) = v16;
              *((_DWORD *)v3 + 9737) = 0;
            }
          }
          return v16;
        case 35:
          v16 = strlen(v3 + 37920);
          *((_DWORD *)v3 + 9736) = v16;
          return v16;
        case 36:
          goto LABEL_98;
        case 37:
          v16 = *((_DWORD *)v3 + 9736) - 1 < 0 ? 0 : *((_DWORD *)v3 + 9736) - 1;
          *((_DWORD *)v3 + 9736) = v16;
          return v16;
        case 38:
          v32 = *((_DWORD *)v3 + 8155);
          if ( *((_DWORD *)v3 + 9738) > v32 )
            *((_DWORD *)v3 + 9738) = v32 + 1;
          v20 = (*((_DWORD *)v3 + 9738))-- - 1 < 0;
          v16 = *((_DWORD *)v3 + 9738);
          if ( v20 )
            return v16;
          while ( 2 )
          {
            if ( v16 <= *((_DWORD *)v3 + 8155) - 4000 )
              return v16;
            v31 = v16 % 4000;
            v33 = *(const char **)&v3[8 * (v16 % 4000) + 620];
            if ( !v33 || _stricmp(v33, (const char *)(*((_DWORD *)dword_563908 + 6897) + 32)) )
            {
              v16 = --*((_DWORD *)v3 + 9738);
              if ( v16 < 0 )
                return v16;
              continue;
            }
            break;
          }
          goto LABEL_66;
        case 39:
          v16 = *((_DWORD *)v3 + 9736) + 1;
          if ( v30 < v16 )
            v16 = v30;
          *((_DWORD *)v3 + 9736) = v16;
          return v16;
        case 40:
          v20 = (*((_DWORD *)v3 + 9738))++ + 1 < 0;
          if ( v20 )
            *((_DWORD *)v3 + 9738) = 0;
          if ( *((_DWORD *)v3 + 9738) > *((_DWORD *)v3 + 8155) )
            return v16;
          break;
        case 45:
          if ( v35 )
LABEL_57:
            LOBYTE(v16) = sub_402243(v3);
          return v16;
        case 46:
          v16 = *((_DWORD *)v3 + 9736);
          if ( v16 < v30 )
            LOBYTE(v16) = (unsigned int)memcpy_0(&v3[v16 + 37920], &v3[v16 + 37921], v30 - v16);
          return v16;
        default:
          return v16;
      }
      while ( 1 )
      {
        v31 = *((_DWORD *)v3 + 9738) % 4000;
        v16 = *(_DWORD *)&v3[8 * v31 + 620];
        if ( v16 )
        {
          v16 = _stricmp((const char *)v16, (const char *)(*((_DWORD *)dword_563908 + 6897) + 32));
          if ( !v16 )
            break;
        }
        if ( ++*((_DWORD *)v3 + 9738) > *((_DWORD *)v3 + 8155) )
          return v16;
      }
LABEL_66:
      LOBYTE(v16) = sub_4013B6(v31);
    }
    else
    {
      if ( v8[2344] )
      {
        if ( a2 != 13 )
          return v16;
        v19 = *((_DWORD *)v3 + 150) == 0;
LABEL_90:
        if ( v19 )
        {
          *((_DWORD *)v3 + 9738) = 999999999;
          *((_DWORD *)v3 + 154) = 1;
          LOBYTE(v16) = sub_4024D2(v3);
        }
        return v16;
      }
      LOBYTE(v16) = a2;
      if ( a2 == 8 )
      {
LABEL_99:
        v16 = *((_DWORD *)v3 + 9736);
        if ( v16 > 0 )
        {
          LOBYTE(v16) = (unsigned int)memcpy_0(&v3[v16 + 37919], &v3[v16 + 37920], v30 - v16 + 1);
          --*((_DWORD *)v3 + 9736);
        }
      }
      else if ( a2 == 13 )
      {
        v16 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 28))();
        if ( v16 != 1 || v30 )
        {
          sub_401CCB(0);
          LOBYTE(v16) = (**((int (__thiscall ***)(int, _DWORD, _DWORD))v3 + 1))((int)(v3 + 4), 0, 0);
          if ( v30 > 0 )
          {
            LOBYTE(v16) = sub_402793(v3 + 37920, 0);
            *v29 = 0;
LABEL_98:
            *((_DWORD *)v3 + 9736) = 0;
            *((_DWORD *)v3 + 9737) = 0;
          }
        }
      }
    }
  }
  return v16;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 4013B6: using guessed type _DWORD __stdcall sub_4013B6(_DWORD);
// 401668: using guessed type int __thiscall sub_401668(_DWORD);
// 401CCB: using guessed type _DWORD __stdcall sub_401CCB(_DWORD);
// 402243: using guessed type int __thiscall sub_402243(_DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);
// 402847: using guessed type _DWORD __stdcall sub_402847(_DWORD);

//----- (0044E220) --------------------------------------------------------
int __thiscall sub_44E220(_DWORD *this, int a2)
{
  int (__cdecl *v2)(_DWORD *); // edx

  v2 = *(int (__cdecl **)(_DWORD *))(*this + 8);
  this[7] = a2;
  return v2(this + 3);
}

//----- (0044E250) --------------------------------------------------------
int __thiscall sub_44E250(_DWORD *this, int a2, int a3)
{
  int result; // eax

  if ( this[7] )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)(this[7] + 4) + 28))(a2, a3);
  return result;
}

//----- (0044E270) --------------------------------------------------------
int __thiscall sub_44E270(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi

  v5 = this;
  if ( this[7] )
    (**(void (__stdcall ***)(int, int, int, int))(this[7] + 4))(a2, a3, a4, a5);
  return (*(int (__thiscall **)(_DWORD *, int, int, int))(*v5 + 4))(v5, a2, a3, a4);
}

//----- (0044E2C0) --------------------------------------------------------
int __thiscall sub_44E2C0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi

  v5 = this;
  if ( this[7] )
    (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)(this[7] + 4) + 12))(a2, a3, a4, a5);
  return (*(int (__thiscall **)(_DWORD *, int, int, int, int))(*v5 + 8))(v5, a2, a3, a4, a5);
}

//----- (0044E320) --------------------------------------------------------
int __thiscall sub_44E320(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi

  v5 = this;
  if ( this[7] )
    (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)(this[7] + 4) + 16))(a2, a3, a4, a5);
  return (*(int (__thiscall **)(_DWORD *, int, int, int))(*v5 + 4))(v5, a2, a3, a4);
}

//----- (0044E380) --------------------------------------------------------
signed int sub_44E380()
{
  return 1;
}

//----- (0044E390) --------------------------------------------------------
int __thiscall sub_44E390(_DWORD *this, char *a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int result; // eax
  char *v6; // ecx
  _BYTE *v7; // edx
  char v8; // al
  int v9; // edi
  int v10; // eax
  int v11; // edi
  int v12; // eax

  v4 = this;
  result = this[2734];
  if ( result < 150 )
  {
    v6 = a2;
    v7 = &v4[18 * result + 34];
    do
    {
      v8 = *v6;
      *v7++ = *v6++;
    }
    while ( v8 );
    v4[18 * v4[2734] + 50] = a3;
    v4[18 * v4[2734] + 51] = a4;
    if ( strchr((const char *)&v4[18 * v4[2734] + 34], 9) )
    {
      v4[2741] = 1;
    }
    else
    {
      v9 = v4[2744];
      if ( sub_49AD40(*((_DWORD **)dword_563908 + *((signed __int16 *)dword_563908 + 15364) + 1516), a2) <= v9 )
        v10 = v9;
      else
        v10 = sub_49AD40(*((_DWORD **)dword_563908 + *((signed __int16 *)dword_563908 + 15364) + 1516), a2);
      v4[2744] = v10;
      v11 = v10;
      if ( sub_49AD40(*((_DWORD **)dword_563908 + *((signed __int16 *)dword_563908 + 15366) + 1516), a2) <= v10 )
        v12 = v11;
      else
        v12 = sub_49AD40(*((_DWORD **)dword_563908 + *((signed __int16 *)dword_563908 + 15366) + 1516), a2);
      v4[2744] = v12;
    }
    if ( v4[2740] == -1 )
      v4[2740] = a3;
    ++v4[2734];
    result = abs(*(signed __int16 *)(*(_DWORD *)(v4[2743] + 360) + 18)) + 1;
    v4[2745] += result;
  }
  return result;
}

//----- (0044E540) --------------------------------------------------------
char *__thiscall sub_44E540(char *this, char *Str, int a3, int a4)
{
  char *v4; // esi
  char *result; // eax
  int v6; // edi
  int v7; // ecx
  int v8; // esi
  char v9; // cl

  v4 = this;
  result = strchr(Str, 9);
  if ( result )
  {
    *((_DWORD *)v4 + 2741) = 1;
  }
  else
  {
    v6 = *((_DWORD *)v4 + 2744);
    if ( sub_49AD40(*((_DWORD **)v4 + 2742), Str) <= v6 )
      result = (char *)v6;
    else
      result = (char *)sub_49AD40(*((_DWORD **)v4 + 2742), Str);
    *((_DWORD *)v4 + 2744) = result;
  }
  v7 = 0;
  if ( *((_DWORD *)v4 + 2734) > 0 )
  {
    result = v4 + 200;
    while ( *(_DWORD *)result != a3 )
    {
      ++v7;
      result += 72;
      if ( v7 >= *((_DWORD *)v4 + 2734) )
        return result;
    }
    v8 = (int)&v4[72 * v7];
    result = Str;
    do
    {
      v9 = *result;
      result[v8 + 136 - (_DWORD)Str] = *result;
      ++result;
    }
    while ( v9 );
    *(_DWORD *)(v8 + 204) = a4;
  }
  return result;
}

//----- (0044E630) --------------------------------------------------------
signed int __thiscall sub_44E630(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // edx
  _DWORD *v4; // eax

  v2 = this[2734];
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = this + 51;
  while ( *(v4 - 1) != a2 || !*v4 )
  {
    ++v3;
    v4 += 18;
    if ( v3 >= v2 )
      return 0;
  }
  return 1;
}

//----- (0044E680) --------------------------------------------------------
int __thiscall sub_44E680(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // ebp
  int v5; // edi
  _DWORD *v6; // edx
  int v7; // esi
  signed int v8; // edx
  int v9; // esi
  int v10; // edx

  result = abs(*(signed __int16 *)(*(_DWORD *)(this[2743] + 360) + 18));
  this[2740] = a2;
  if ( a3 )
  {
    v4 = this[2734];
    v5 = 0;
    if ( v4 > 0 )
    {
      v6 = this + 50;
      while ( *v6 != a2 )
      {
        ++v5;
        v6 += 18;
        if ( v5 >= v4 )
          goto LABEL_13;
      }
      v7 = v5 + a3;
      v8 = v4 - 1;
      if ( v4 - 1 >= (v7 < 0 ? 0 : v7) )
        v8 = v7 < 0 ? 0 : v7;
      this[2740] = this[18 * v8 + 50];
      v9 = v8 * (result + 1);
      result = (result + 1) * (v8 + 1);
      if ( this[2747] > v9 )
        this[2747] = v9;
      v10 = this[2746];
      if ( v10 + this[2747] < result )
      {
        result -= v10;
        this[2747] = result;
      }
    }
LABEL_13:
    if ( v5 == v4 )
    {
      result = this[50];
      this[2740] = result;
    }
  }
  return result;
}

//----- (0044E790) --------------------------------------------------------
signed int __thiscall sub_44E790(_DWORD *this, int a2, int a3)
{
  int v3; // ebp
  int v4; // esi
  int v5; // edi
  int v6; // eax
  int v7; // ebx
  int v8; // edi
  int v9; // esi
  int v10; // ebx
  int v11; // ebp
  int v12; // eax
  bool v13; // zf
  int v14; // eax
  signed int result; // eax
  int v16; // [esp+10h] [ebp-8h]

  v3 = this[2744];
  v4 = this[2738] - this[2736];
  v5 = this[2739] - this[2737];
  v16 = this[2739] - this[2737];
  if ( this[2741] )
    v3 = 3 * v4 / 4;
  v6 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 507) + 360) + 18));
  v7 = this[2745] + v6 + 4;
  if ( v5 - 4 < v7 )
    v7 = v5 - 4;
  v8 = v7 - v6 - 4;
  this[2746] = v8;
  v9 = (v4 - v3) / 2;
  v10 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 507) + 360) + 18)) + (v16 - v7) / 2 + 2;
  v11 = v9 + v3;
  if ( a2 < v9
    || a2 >= v11
    || a3 < v10
    || a3 >= v8 + v10
    || (v12 = (a3 + this[2747] - v10) / (abs(*(signed __int16 *)(*(_DWORD *)(this[2743] + 360) + 18)) + 1),
        v12 >= this[2734])
    || (v13 = this[18 * v12 + 51] == 0, v14 = (int)&this[18 * v12], v13) )
  {
    result = -1;
  }
  else
  {
    result = *(_DWORD *)(v14 + 200);
  }
  return result;
}

//----- (0044E910) --------------------------------------------------------
int __thiscall sub_44E910(_DWORD *this, int a2, int a3)
{
  int result; // eax

  result = a3;
  this[2747] += a3;
  return result;
}

//----- (0044E920) --------------------------------------------------------
int __thiscall sub_44E920(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int v3; // edi
  bool v4; // zf
  int v5; // eax
  int v6; // kr14_4
  int v7; // eax
  int v8; // ecx
  int v9; // ebp
  int v10; // eax
  int v11; // edi
  int v12; // ecx
  int v13; // ebx
  int v14; // edi
  int v15; // ecx
  int v16; // ecx
  int v17; // eax
  _DWORD *v18; // eax
  unsigned __int16 v19; // ax
  int v20; // ecx
  int v21; // edx
  int v22; // ecx
  unsigned __int16 v23; // ax
  int v24; // ecx
  int v25; // edx
  int v26; // ecx
  int v27; // ebx
  int v28; // ecx
  int v29; // ecx
  int v30; // eax
  int v31; // ecx
  int v32; // eax
  int v33; // ecx
  int v34; // edi
  int v35; // eax
  int v36; // ecx
  void *v37; // ebp
  int v38; // edx
  int v39; // eax
  int v40; // ecx
  int v41; // edi
  int v42; // ecx
  int v43; // ebp
  char *v44; // eax
  bool v45; // sf
  _DWORD *v46; // eax
  int v47; // edx
  int v48; // ebx
  _DWORD *v49; // ebx
  __int16 v50; // cx
  char *v51; // eax
  char v52; // cl
  char *v53; // ebx
  int v54; // eax
  int v55; // ebp
  char *v57; // [esp+14h] [ebp-180h]
  _DWORD *v58; // [esp+2Ch] [ebp-168h]
  _DWORD *v59; // [esp+2Ch] [ebp-168h]
  int v60; // [esp+30h] [ebp-164h]
  _DWORD *v61; // [esp+30h] [ebp-164h]
  int v62; // [esp+34h] [ebp-160h]
  int v63; // [esp+34h] [ebp-160h]
  int v64; // [esp+38h] [ebp-15Ch]
  int v65; // [esp+3Ch] [ebp-158h]
  int v66; // [esp+40h] [ebp-154h]
  char *v67; // [esp+44h] [ebp-150h]
  int v68; // [esp+48h] [ebp-14Ch]
  int v69; // [esp+4Ch] [ebp-148h]
  int v70; // [esp+50h] [ebp-144h]
  int v71; // [esp+54h] [ebp-140h]
  int v72; // [esp+58h] [ebp-13Ch]
  int v73; // [esp+5Ch] [ebp-138h]
  char *v74; // [esp+60h] [ebp-134h]
  int v75; // [esp+64h] [ebp-130h]
  int v76; // [esp+68h] [ebp-12Ch]
  int v77; // [esp+6Ch] [ebp-128h]
  int v78; // [esp+70h] [ebp-124h]
  char v79; // [esp+74h] [ebp-120h]
  char Str[256]; // [esp+84h] [ebp-110h]
  int v81; // [esp+190h] [ebp-4h]

  v1 = this;
  v2 = this[2738] - this[2736];
  v3 = v1[2739] - v1[2737];
  v4 = v1[2741] == 0;
  v5 = v1[2744];
  v72 = v2;
  v64 = v5;
  if ( !v4 )
    v64 = 3 * v2 / 4;
  v73 = abs(*(signed __int16 *)(*(_DWORD *)(v1[2743] + 360) + 18));
  v6 = v2 - (v64 + 40);
  v7 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 507) + 360) + 18));
  v8 = v1[2745] + v7 + 4;
  v9 = v6 / 2;
  if ( v3 - 4 < v8 )
    v8 = v3 - 4;
  v10 = v8 - v7 - 4;
  v1[2746] = v10;
  v11 = (v3 - v8) / 2;
  v58 = (_DWORD *)*((_DWORD *)dword_563908 + *((signed __int16 *)dword_563908 + 15368) + 1516);
  v62 = v64 + 40;
  if ( v10 != v1[2745] )
    v62 = v64 + 56;
  sub_40196F(v1[2735], *((_DWORD *)dword_563908 + 507), v9 + v1[2736], v11 + v1[2737], v62);
  v12 = *((_DWORD *)dword_563908 + 507);
  v13 = v11
      + (abs(*(signed __int16 *)(*(_DWORD *)(v12 + 360) + 18)) - (signed int)*(signed __int16 *)(v58[513] + 174)) / 2;
  v14 = abs(*(signed __int16 *)(*(_DWORD *)(v12 + 360) + 18)) + v11;
  v57 = (char *)(v1 + 2);
  if ( *((_DWORD *)dword_563908 + 7681) )
  {
    v15 = v64 + 40 - sub_49AD40(v58, v57);
    v60 = 2 * v15 - 32;
    v16 = sub_401D39(v15, v60) / 2 % v60;
    if ( v16 > v60 / 2 )
      v16 = v60 - v16;
    sub_49B310(
      v58,
      (char *)v1 + 8,
      *((signed __int16 *)dword_563908 + 15369),
      (_DWORD *)v1[2735],
      v16 + v1[2736] + v9 + 8,
      v13 + v1[2737],
      3,
      0);
  }
  else
  {
    v17 = sub_49AD40(v58, v57);
    sub_49B310(
      v58,
      (char *)v1 + 8,
      *((signed __int16 *)dword_563908 + 15369),
      (_DWORD *)v1[2735],
      v9 + v1[2736] + (v64 + 40 - v17) / 2,
      v13 + v1[2737],
      3,
      0);
  }
  v18 = dword_563908;
  if ( *((_BYTE *)dword_563908 + 30664) != -1
    || *((_BYTE *)dword_563908 + 30665) != -1
    || *((_BYTE *)dword_563908 + 30666) != -1 )
  {
    v19 = sub_40223E(dword_576828, *((_DWORD *)dword_563908 + 7666));
    v20 = v1[2746];
    v70 = v9 + v62;
    v21 = v20 + v14 + 4;
    v22 = v1[2735];
    v71 = v21;
    v68 = v6 / 2;
    v69 = v14;
    (*(void (__stdcall **)(signed int, _DWORD, int *))(*(_DWORD *)v22 + 44))(5, v19, &v68);
    v18 = dword_563908;
  }
  v23 = sub_40223E(dword_576828, v18[7665]);
  v24 = v1[2746];
  v70 = v9 + 1;
  v25 = v24 + v14 + 4;
  v26 = v1[2735];
  v71 = v25;
  v27 = v23;
  v68 = v6 / 2;
  v69 = v14;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v26 + 40))(v23, &v68);
  v28 = v1[2735];
  v68 = v62 + v9 - 1;
  v70 = v62 + v9;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v28 + 40))(v27, &v68);
  v29 = v1[2746];
  v70 = v62 + v9;
  v30 = v29 + v14 + 4;
  v31 = v1[2735];
  v69 = v30;
  v71 = v30 + 1;
  v68 = v6 / 2;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v31 + 40))(v27, &v68);
  v32 = v1[2746];
  v33 = v1[2745];
  v34 = v14 + 2;
  if ( v32 + v1[2747] > v33 )
    v1[2747] = v33 - v32;
  if ( v1[2747] < 0 )
    v1[2747] = 0;
  if ( v32 >= v33 )
  {
    v37 = (void *)v1[2748];
    if ( v37 )
    {
      sub_402040(v1[2748]);
      j__free(v37);
      v1[2748] = 0;
    }
  }
  else
  {
    if ( !v1[2748] )
    {
      v74 = (char *)operator new(0x7Cu);
      v81 = 0;
      if ( v74 )
        v35 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 0, v1, v1[2735], 0, v64 + 40 + v9, v34, v1[2746], 1);
      else
        v35 = 0;
      v81 = -1;
      v1[2748] = v35;
    }
    v36 = v1[2748];
    sub_401C67(0, v1[2745], v1[2747], v1[2747] + v1[2746], 0);
    (*(void (**)(void))(*(_DWORD *)v1[2748] + 40))();
  }
  v38 = v1[2746];
  v39 = v1[2736];
  v77 = v1[2738];
  v40 = v1[2735];
  v75 = v39;
  v78 = v34 + v38;
  v76 = v34;
  (*(void (__stdcall **)(char *))(*(_DWORD *)v40 + 72))(&v79);
  (*(void (__stdcall **)(int *))(*(_DWORD *)v1[2735] + 64))(&v75);
  v41 = v34 - v1[2747];
  v63 = (v72 - v64) / 2;
  v42 = *(_DWORD *)(v1[2743] + 360);
  v43 = abs(*(signed __int16 *)(v42 + 4));
  v44 = (char *)abs(*(signed __int16 *)(v42 + 28));
  v4 = v1[2734] == 0;
  v45 = v1[2734] < 0;
  v72 = v43;
  v74 = v44;
  v65 = 0;
  if ( !v45 && !v4 )
  {
    v46 = v1 + 50;
    v61 = v1 + 50;
    v67 = (char *)(Str - (char *)v1 - 136);
    while ( 1 )
    {
      v47 = v46[1];
      if ( v47 )
      {
        if ( *v46 != v1[2740] )
        {
          v49 = (_DWORD *)v1[2742];
          goto LABEL_38;
        }
        v48 = *((signed __int16 *)dword_563908 + 15366);
      }
      else
      {
        v48 = *((signed __int16 *)dword_563908 + 15370);
      }
      v49 = (_DWORD *)*((_DWORD *)dword_563908 + v48 + 1516);
LABEL_38:
      v59 = v49;
      if ( v47 )
      {
        if ( *v46 == v1[2740] )
          v50 = *((_WORD *)dword_563908 + 15367);
        else
          v50 = *((_WORD *)dword_563908 + 15365);
      }
      else
      {
        v50 = *((_WORD *)dword_563908 + 15371);
      }
      v66 = v50;
      v51 = (char *)(v46 - 16);
      do
      {
        v52 = *v51;
        v67[(_DWORD)v51] = *v51;
        ++v51;
      }
      while ( v52 );
      v53 = strchr(Str, 9);
      if ( v53 )
        v54 = v64;
      else
        v54 = sub_49AD40(v59, Str);
      if ( *v61 == v1[2740] )
        sub_40196F(v1[2735], v1[2743], v63 + v1[2736] - v43, v41 + v1[2737], &v74[v54 + v43]);
      v55 = (v73 - *(signed __int16 *)(*(_DWORD *)(v1[2742] + 2052) + 174)) / 2 + v41 + 1;
      if ( v53 )
      {
        *v53 = 0;
        sub_49B310(v59, Str, v66, (_DWORD *)v1[2735], v63 + v1[2736], v55 + v1[2737], 3, 0);
        sub_49B4F0(v59, v53 + 1, v66, (_DWORD *)v1[2735], v64 + v63 + v1[2736], v55 + v1[2737], 3, 0);
      }
      else
      {
        sub_49B310(v59, Str, v66, (_DWORD *)v1[2735], v63 + v1[2736], v55 + v1[2737], 3, 0);
      }
      v41 += v73 + 1;
      v67 -= 72;
      v61 += 18;
      if ( ++v65 >= v1[2734] )
        return (*(int (__stdcall **)(char *))(*(_DWORD *)v1[2735] + 64))(&v79);
      v43 = v72;
      v46 = v61;
    }
  }
  return (*(int (__stdcall **)(char *))(*(_DWORD *)v1[2735] + 64))(&v79);
}
// 40196F: using guessed type _DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;
// 44E920: using guessed type char Str[256];

//----- (0044F250) --------------------------------------------------------
int __thiscall sub_44F250(_DWORD **this, int a2)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int))(*this[2747] + 20))(a2);
  return result;
}

//----- (0044F270) --------------------------------------------------------
signed int __thiscall sub_44F270(_DWORD **this, int a2, int a3)
{
  _DWORD **v3; // esi
  signed int result; // eax

  v3 = this;
  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int))(*this[2747] + 24))(a2, a3);
  switch ( a2 )
  {
    case 35:
      sub_40261C(v3[2739], 1000);
      result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      break;
    case 36:
      sub_40261C(v3[2739], -1000);
      goto LABEL_8;
    case 38:
      sub_40261C(v3[2739], -1);
LABEL_8:
      result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      break;
    case 40:
      sub_40261C(v3[2739], 1);
      result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      break;
    default:
      return result;
  }
  return result;
}
// 40261C: using guessed type _DWORD __stdcall sub_40261C(_DWORD, _DWORD);

//----- (0044F3A0) --------------------------------------------------------
int __thiscall sub_44F3A0(_DWORD **this, int a2, int a3)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int))(*this[2747] + 28))(a2, a3);
  return result;
}

//----- (0044F3C0) --------------------------------------------------------
int __thiscall sub_44F3C0(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( this[2747] )
    result = (**this[2747])(a2, a3, a4, a5);
  return result;
}

//----- (0044F3E0) --------------------------------------------------------
int __thiscall sub_44F3E0(_DWORD **this, int a2, int a3, int a4)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int, int))(*this[2747] + 4))(a2, a3, a4);
  return result;
}

//----- (0044F400) --------------------------------------------------------
int __thiscall sub_44F400(_DWORD **this, int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[2747] + 8))(a2, a3, a4, a5);
  return result;
}

//----- (0044F420) --------------------------------------------------------
int __thiscall sub_44F420(_DWORD **this, int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[2747] + 12))(a2, a3, a4, a5);
  return result;
}

//----- (0044F440) --------------------------------------------------------
int __thiscall sub_44F440(_DWORD **this, int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( this[2747] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[2747] + 16))(a2, a3, a4, a5);
  return result;
}

//----- (0044F480) --------------------------------------------------------
char *__cdecl sub_44F480(char *Str, int a2)
{
  char *v2; // esi
  int v3; // edi
  char *v4; // eax
  char *v5; // eax

  v2 = Str;
  if ( a2 > 0 )
  {
    v3 = a2;
    do
    {
      v4 = strchr(v2, 44);
      if ( v4 )
        v2 = v4 + 1;
      --v3;
    }
    while ( v3 );
  }
  strcpy(::Str, v2);
  v5 = strchr(::Str, 44);
  if ( v5 )
    *v5 = 0;
  return ::Str;
}

//----- (0044F4F0) --------------------------------------------------------
signed int __thiscall sub_44F4F0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  signed int result; // eax
  int v6; // ecx
  int v7; // ebp
  int v8; // ecx
  int v9; // esi

  v4 = this;
  result = this[7];
  if ( result )
  {
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)(result + 4) + 4))(a2, a3, a4);
    v6 = v4[7];
    v7 = v4[8];
    result = sub_402298(a2, a3);
    v8 = v4[7];
    v4[8] = result;
    *(_DWORD *)(v8 + 10960) = result;
    v9 = v4[8];
    if ( v7 != v9 )
    {
      if ( v9 )
      {
        if ( v9 >= 0 )
          result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
      }
    }
  }
  return result;
}
// 402298: using guessed type _DWORD __stdcall sub_402298(_DWORD, _DWORD);

//----- (0044F580) --------------------------------------------------------
HINSTANCE __thiscall sub_44F580(int this, int a2)
{
  HINSTANCE result; // eax
  int *v3; // esi
  int v4; // ecx
  int v5; // edx
  int v6; // ecx
  signed int v7; // edi
  _DWORD *v8; // eax
  int v9; // ecx
  int v10; // ecx
  int v11; // eax
  int v12; // ecx
  int v13; // ecx
  char *v14; // edx
  char v15; // cl
  _DWORD *v16; // eax
  int v17; // ecx
  char *v18; // ecx
  char *v19; // edx
  char v20; // al
  int v21; // ecx
  void *v22; // ST34_4
  int v23; // eax
  int (__thiscall *v24)(int *, int *); // edx
  _DWORD *v25; // eax
  int v26; // ecx
  int v27; // ecx
  _DWORD *v28; // eax
  int v29; // ecx
  int v30; // eax
  _DWORD *v31; // eax
  int v32; // ecx
  int v33; // eax
  _DWORD *v34; // eax
  int v35; // ecx
  int v36; // eax
  _DWORD *v37; // eax
  int v38; // ecx
  int v39; // eax
  _DWORD *v40; // eax
  int v41; // ecx
  int v42; // ecx
  int v43; // eax
  int v44; // ecx
  int v45; // ecx
  _DWORD *v46; // eax
  int v47; // ecx
  _DWORD *v48; // eax
  int v49; // ecx
  int v50; // ecx
  int v51; // ecx
  int v52; // ecx
  int (__thiscall *v53)(int *, signed int); // edx
  _DWORD *v54; // eax
  int v55; // ecx
  int v56; // eax
  int (__thiscall *v57)(int *, signed int); // eax
  _DWORD *v58; // eax
  int v59; // ecx
  void *v60; // eax
  int (__thiscall *v61)(int *, int *); // edx
  int v62; // eax
  int v63; // ecx
  int v64; // eax
  void (__stdcall *v65)(signed int, BYTE *); // eax
  int (__thiscall *v66)(int *, int *); // edx
  int (__thiscall *v67)(int *, int *); // edx
  _DWORD *v68; // eax
  int v69; // ecx
  _DWORD *v70; // eax
  int v71; // ecx
  _DWORD *v72; // eax
  int v73; // ecx
  _DWORD *v74; // eax
  int v75; // ecx
  _DWORD *v76; // eax
  int v77; // ecx
  int (__thiscall *v78)(int *, int *); // edx
  int (__thiscall *v79)(int *, int *); // edx
  int (__thiscall *v80)(int *, int *); // edx
  int (__thiscall *v81)(int *, int *); // edx
  int (__thiscall *v82)(int *, int *); // edx
  int (__thiscall *v83)(int *, int *); // edx
  int (__thiscall *v84)(int *, int *); // edx
  int (__thiscall *v85)(int *, int *); // edx
  _DWORD *v86; // eax
  int v87; // ecx
  int v88; // eax
  _DWORD *v89; // eax
  int v90; // ecx
  int v91; // eax
  _DWORD *v92; // eax
  int v93; // ecx
  int (__thiscall *v94)(int *, int *); // edx
  int (__thiscall *v95)(int *, int *); // edx
  int (__thiscall *v96)(int *, int *); // edx
  int (__thiscall *v97)(int *, int *); // edx
  int (__thiscall *v98)(int *, int *); // edx
  int (__thiscall *v99)(int *, int *); // edx
  int (__thiscall *v100)(int *, int *); // edx
  int (__thiscall *v101)(int *, int *); // edx
  int (__thiscall *v102)(int *, int *); // edx
  int (__thiscall *v103)(int *, int *); // edx
  int v104; // ST1C_4
  char *v105; // eax
  int v106; // ST1C_4
  int v107; // eax
  int v108; // ST1C_4
  char *v109; // eax
  int v110; // ST1C_4
  int v111; // eax
  int v112; // ST1C_4
  char *v113; // eax
  int v114; // ST1C_4
  int v115; // eax
  int v116; // ST1C_4
  char *v117; // eax
  int v118; // ST1C_4
  int v119; // eax
  int v120; // ST1C_4
  char *v121; // eax
  int v122; // ST1C_4
  int v123; // eax
  int v124; // ecx
  int v125; // ST1C_4
  char *v126; // eax
  int v127; // ST1C_4
  int v128; // eax
  int v129; // ST1C_4
  char *v130; // eax
  int v131; // ST1C_4
  int v132; // eax
  int v133; // ST1C_4
  char *v134; // eax
  int v135; // ST1C_4
  int v136; // eax
  int v137; // ST1C_4
  char *v138; // eax
  int v139; // ST1C_4
  int v140; // eax
  int v141; // ecx
  int v142; // ST1C_4
  char *v143; // eax
  int v144; // ST1C_4
  int v145; // eax
  int v146; // ST1C_4
  char *v147; // eax
  int v148; // ST1C_4
  int v149; // eax
  int v150; // ST1C_4
  char *v151; // eax
  int v152; // ST1C_4
  int v153; // eax
  int v154; // ST1C_4
  char *v155; // eax
  int v156; // ST1C_4
  int v157; // eax
  int v158; // ST1C_4
  char *v159; // eax
  int v160; // ST1C_4
  int v161; // eax
  int v162; // ST1C_4
  char *v163; // eax
  int v164; // ST1C_4
  int v165; // eax
  int v166; // ST1C_4
  char *v167; // eax
  int v168; // ST1C_4
  int v169; // eax
  int v170; // ST1C_4
  char *v171; // eax
  int v172; // ST1C_4
  int v173; // eax
  int v174; // ST1C_4
  char *v175; // eax
  int v176; // ST1C_4
  int v177; // eax
  int v178; // ST1C_4
  char *v179; // eax
  int v180; // ST1C_4
  int v181; // eax
  int v182; // ST1C_4
  char *v183; // eax
  int v184; // ST1C_4
  int v185; // eax
  int v186; // ST1C_4
  char *v187; // eax
  int v188; // ST1C_4
  int v189; // eax
  int v190; // ST1C_4
  char *v191; // eax
  int v192; // ST1C_4
  int v193; // eax
  int v194; // ST1C_4
  char *v195; // eax
  int v196; // ST1C_4
  int v197; // eax
  int v198; // ST1C_4
  char *v199; // eax
  int v200; // ST1C_4
  int v201; // eax
  unsigned int v202; // edx
  _DWORD *v203; // eax
  int v204; // ecx
  void *v205; // ST34_4
  _DWORD *v206; // eax
  int v207; // ecx
  void *v208; // ST34_4
  _DWORD *v209; // eax
  int v210; // ecx
  void *v211; // ST34_4
  int v212; // ST1C_4
  char *v213; // eax
  int v214; // ST1C_4
  int v215; // eax
  int v216; // ecx
  _DWORD *v217; // eax
  int v218; // ecx
  void *v219; // ST34_4
  unsigned int v220; // edx
  _DWORD *v221; // eax
  int v222; // ecx
  void *v223; // ST34_4
  _DWORD *v224; // eax
  int v225; // ecx
  void *v226; // ST34_4
  int v227; // eax
  _DWORD *v228; // eax
  int v229; // ecx
  void *v230; // ST34_4
  int v231; // ST1C_4
  char *v232; // eax
  int v233; // eax
  int v234; // ST1C_4
  char *v235; // eax
  int v236; // eax
  int v237; // ST1C_4
  char *v238; // eax
  int v239; // ST1C_4
  int v240; // eax
  int v241; // ecx
  int v242; // ecx
  int v243; // ST1C_4
  char *v244; // eax
  int v245; // eax
  int v246; // ecx
  int v247; // ecx
  int v248; // ST1C_4
  char *v249; // eax
  int v250; // ST1C_4
  char *v251; // eax
  int v252; // ST1C_4
  int v253; // eax
  int v254; // ST1C_4
  char *v255; // eax
  int v256; // ST1C_4
  char *v257; // eax
  int v258; // ST1C_4
  char *v259; // eax
  int v260; // ST1C_4
  int v261; // eax
  int v262; // ST1C_4
  char *v263; // eax
  int v264; // ST1C_4
  int v265; // eax
  int v266; // ST1C_4
  char *v267; // eax
  int v268; // ST1C_4
  int v269; // eax
  int v270; // ST1C_4
  char *v271; // eax
  int v272; // ST1C_4
  int v273; // eax
  int v274; // ST1C_4
  char *v275; // eax
  int v276; // ST1C_4
  int v277; // eax
  int v278; // ST1C_4
  char *v279; // eax
  int v280; // ST1C_4
  int v281; // eax
  int v282; // ST1C_4
  char *v283; // eax
  int v284; // ST1C_4
  int v285; // eax
  int v286; // ST1C_4
  char *v287; // eax
  int v288; // ST1C_4
  int v289; // eax
  int v290; // ST1C_4
  char *v291; // eax
  int v292; // ST1C_4
  int v293; // eax
  int v294; // ST1C_4
  char *v295; // eax
  int v296; // ST1C_4
  int v297; // eax
  int v298; // ST1C_4
  char *v299; // eax
  int v300; // ST1C_4
  int v301; // eax
  int v302; // ST1C_4
  char *v303; // eax
  int v304; // ST1C_4
  int v305; // eax
  int v306; // ST1C_4
  char *v307; // eax
  int v308; // ST1C_4
  int v309; // eax
  int v310; // ST1C_4
  char *v311; // eax
  int v312; // ST1C_4
  int v313; // eax
  int v314; // ST1C_4
  char *v315; // eax
  int v316; // ST1C_4
  int v317; // eax
  int v318; // ST1C_4
  char *v319; // eax
  int v320; // ST1C_4
  int v321; // eax
  int v322; // ST1C_4
  char *v323; // eax
  int v324; // ST1C_4
  int v325; // eax
  int v326; // ST1C_4
  char *v327; // eax
  int v328; // ST1C_4
  int v329; // eax
  int v330; // ecx
  char *v331; // [esp-18h] [ebp-444h]
  char *v332; // [esp-18h] [ebp-444h]
  int v333; // [esp-14h] [ebp-440h]
  int v334; // [esp-Ch] [ebp-438h]
  int v335; // [esp-Ch] [ebp-438h]
  int v336; // [esp-Ch] [ebp-438h]
  char *v337; // [esp-8h] [ebp-434h]
  int v338; // [esp-8h] [ebp-434h]
  int v339; // [esp-8h] [ebp-434h]
  char *v340; // [esp-8h] [ebp-434h]
  signed int v341; // [esp-8h] [ebp-434h]
  int v342; // [esp-8h] [ebp-434h]
  int v343; // [esp-8h] [ebp-434h]
  int v344; // [esp-4h] [ebp-430h]
  int v345; // [esp-4h] [ebp-430h]
  int v346; // [esp-4h] [ebp-430h]
  int v347; // [esp-4h] [ebp-430h]
  int v348; // [esp-4h] [ebp-430h]
  char *v349; // [esp+18h] [ebp-414h]
  char Dest; // [esp+1Ch] [ebp-410h]
  CHAR File; // [esp+11Ch] [ebp-310h]
  char v352; // [esp+21Ch] [ebp-210h]
  char v353; // [esp+31Ch] [ebp-110h]
  int v354; // [esp+428h] [ebp-4h]

  result = (HINSTANCE)a2;
  v3 = (int *)this;
  *(_DWORD *)(this + 36) = a2;
  if ( !a2 )
    return result;
  if ( a2 < 0 )
    return result;
  v4 = *(_DWORD *)(this + 32);
  result = (HINSTANCE)sub_402955(a2);
  if ( !result )
    return result;
  result = (HINSTANCE)sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  v7 = v3[9];
  if ( v7 >= 7000 )
  {
    v8 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v9 = *((_DWORD *)dword_563908 + 355);
      if ( v9 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 36))(1);
        v8 = dword_563908;
      }
      v8[355] = 0;
    }
    v349 = (char *)operator new(0x82Cu);
    v354 = 0;
    if ( v349 )
      result = (HINSTANCE)sub_40108C(
                            *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                            v3[9] - 7000,
                            1000);
    else
      result = 0;
    *((_DWORD *)dword_563908 + 355) = result;
    v3[10] = 1;
    return result;
  }
  if ( v7 >= 6000 )
  {
    v344 = v7 - 6000;
    if ( v7 - 6000 < 50 )
    {
      v10 = *((_DWORD *)dword_563908 + 1504);
      v11 = sub_402108(v344);
      if ( v11 )
      {
        sprintf(&Dest, "?team %s", v11);
        v12 = *((_DWORD *)dword_563908 + 1509);
        sub_402793(&Dest, 0);
      }
      *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
      return (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
    }
    v13 = *((_DWORD *)dword_563908 + 1504);
    result = (HINSTANCE)sub_402108(v344);
    if ( !result )
      return result;
    v14 = (char *)(&unk_56C570 - (_UNKNOWN *)result);
    do
    {
      v15 = *(_BYTE *)result;
      *((_BYTE *)result + (_DWORD)v14) = *(_BYTE *)result;
      result = (HINSTANCE)((char *)result + 1);
    }
    while ( v15 );
    v16 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v17 = *((_DWORD *)dword_563908 + 355);
      if ( v17 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v17 + 36))(1);
        v16 = dword_563908;
      }
      v16[355] = 0;
    }
    v349 = (char *)operator new(0x420u);
    v354 = 1;
    if ( v349 )
    {
      result = (HINSTANCE)sub_4019E2(
                            *((_DWORD *)dword_563908 + 1519),
                            (int)"Enter Team Password",
                            (char *)&Source,
                            0,
                            0,
                            (int)v3,
                            86,
                            0);
      *((_DWORD *)dword_563908 + 355) = result;
      return result;
    }
LABEL_48:
    result = 0;
    *((_DWORD *)dword_563908 + 355) = 0;
    return result;
  }
  if ( v7 >= 5000 )
  {
    *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
    (*(void (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
    v18 = (char *)dword_563908 + 67 * (v7 - 5000) + 6179;
    v19 = (char *)dword_563918 + 9736;
    do
    {
      v20 = *v18;
      *v19++ = *v18++;
    }
    while ( v20 );
    return (HINSTANCE)PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 1u, 0);
  }
  if ( v7 >= 4000 )
  {
    sprintf(&File, "?go %s", (char *)dword_563908 + 35 * v7 - 137507);
    v21 = *((_DWORD *)dword_563908 + 1509);
    sub_402793(&File, 0);
    *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
    return (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
  }
  if ( v7 < 3000 )
  {
    if ( v7 >= 2000 )
    {
      (*(void (__stdcall **)(_DWORD, _DWORD, signed int))(**((_DWORD **)dword_563908 + 89) + 160))(
        *((_DWORD *)dword_563918 + v7 - 1982),
        *((_DWORD *)dword_563918 + v7 - 1950),
        16);
      sub_401965(dword_563908);
      *((_DWORD *)dword_563918 + 2211) = *((_DWORD *)dword_563918 + v7 - 1982);
      *((_DWORD *)dword_563918 + 2212) = *((_DWORD *)dword_563918 + v7 - 1950);
      return (HINSTANCE)(*(int (__thiscall **)(int *, _DWORD))(*v3 + 8))(v3, 0);
    }
    if ( v7 >= 1000 )
    {
      v349 = (char *)dword_563908 + 200 * v7 - 91766;
      sub_48CEB0(&v349, &v353);
      sub_48CEB0(&v349, &File);
      return ShellExecuteA(0, "open", &File, 0, 0, 1);
    }
    switch ( v7 )
    {
      case 1:
        return (HINSTANCE)PostMessageA(*((HWND *)dword_563918 + 3), 0x401u, 0, 0);
      case 2:
        v354 = 13;
        if ( !operator new(0x5468u) )
          goto LABEL_123;
        v23 = sub_4018CA(0, v3[2], v3 + 3);
        goto LABEL_124;
      case 3:
        if ( !*((_DWORD *)dword_563908 + 6945) )
        {
          v354 = 20;
          if ( operator new(0x3458u) )
            v56 = sub_401EF1(0, *((_DWORD *)dword_563908 + 89), (char *)dword_563908 + 12404);
          else
LABEL_137:
            v56 = 0;
LABEL_138:
          *((_DWORD *)dword_563908 + 1535) = v56;
          v57 = *(int (__thiscall **)(int *, signed int))(*v3 + 4);
          v354 = -1;
          return (HINSTANCE)v57(v3, 1);
        }
        *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
        v58 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v59 = *((_DWORD *)dword_563908 + 355);
          if ( v59 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v59 + 36))(1);
            v58 = dword_563908;
          }
          v58[355] = 0;
        }
        (*(void (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
        v60 = operator new(0x2Cu);
        v354 = 19;
        if ( v60 )
        {
          result = (HINSTANCE)sub_401E29(v60);
          *((_DWORD *)dword_563908 + 355) = result;
          return result;
        }
        break;
      case 4:
        v61 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 14;
        return (HINSTANCE)v61(v3, v3 + 3);
      case 5:
        v84 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 7;
        return (HINSTANCE)v84(v3, v3 + 3);
      case 6:
        v85 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 10;
        return (HINSTANCE)v85(v3, v3 + 3);
      case 7:
        v94 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 3;
        return (HINSTANCE)v94(v3, v3 + 3);
      case 8:
        v103 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 1;
        return (HINSTANCE)v103(v3, v3 + 3);
      case 9:
        v78 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 0;
        return (HINSTANCE)v78(v3, v3 + 3);
      case 10:
        v79 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 2;
        return (HINSTANCE)v79(v3, v3 + 3);
      case 11:
        *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1513);
        sub_4020DB(*((_DWORD *)dword_563908 + 1513));
        return (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
      case 12:
        sprintf(&File, "%d", *((_DWORD *)dword_563918 + 2249));
        v206 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v207 = *((_DWORD *)dword_563908 + 355);
          if ( v207 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v207 + 36))(1);
            v206 = dword_563908;
          }
          v206[355] = 0;
        }
        v208 = operator new(0x420u);
        v354 = 39;
        if ( !v208 )
          goto LABEL_48;
        v339 = 12;
        v335 = (int)v3;
        v333 = 1;
        v331 = &File;
        v43 = sub_402617(0x4Au);
        goto LABEL_92;
      case 13:
        sprintf(&File, "%d", *((signed __int16 *)dword_563918 + 4450));
        v209 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v210 = *((_DWORD *)dword_563908 + 355);
          if ( v210 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v210 + 36))(1);
            v209 = dword_563908;
          }
          v209[355] = 0;
        }
        v211 = operator new(0x420u);
        v354 = 40;
        if ( !v211 )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Ball Trail Length",
                              &File,
                              1,
                              0,
                              (int)v3,
                              13,
                              0);
        goto LABEL_78;
      case 14:
        v220 = (signed int)((unsigned __int64)(1717986919i64 * *((signed int *)dword_563918 + 2250)) >> 32) >> 2;
        sprintf(&File, "%d", v220 + (v220 >> 31));
        v221 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v222 = *((_DWORD *)dword_563908 + 355);
          if ( v222 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v222 + 36))(1);
            v221 = dword_563908;
          }
          v221[355] = 0;
        }
        v223 = operator new(0x420u);
        v354 = 42;
        if ( !v223 )
          goto LABEL_48;
        v339 = 14;
        v335 = (int)v3;
        v333 = 1;
        v331 = &File;
        v43 = sub_402617(0x4Bu);
        goto LABEL_92;
      case 15:
        sprintf(&File, "%d", *((_DWORD *)dword_563918 + 2251) / 10);
        v224 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v225 = *((_DWORD *)dword_563908 + 355);
          if ( v225 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v225 + 36))(1);
            v224 = dword_563908;
          }
          v224[355] = 0;
        }
        v226 = operator new(0x420u);
        v354 = 43;
        if ( !v226 )
          goto LABEL_48;
        v343 = 15;
        v336 = (int)v3;
        v332 = &File;
        v227 = sub_402617(0xC7u);
        goto LABEL_326;
      case 16:
        *((_DWORD *)dword_563918 + 2239) = (*((_DWORD *)dword_563918 + 2239) + 1) % 3;
        v104 = *((_DWORD *)dword_563918 + 2239);
        v105 = (char *)sub_402617(0x49u);
        v106 = sub_40263F(v105, v104);
        v107 = sub_402617(0x47u);
        sprintf(&Dest, "%s\t%s", v107, v106);
        v342 = 16;
        goto LABEL_362;
      case 17:
        *((_DWORD *)dword_563918 + 2240) = (*((_DWORD *)dword_563918 + 2240) + 1) % 2;
        v108 = *((_DWORD *)dword_563918 + 2240);
        v109 = (char *)sub_402617(0x42u);
        v110 = sub_40263F(v109, v108);
        v111 = sub_402617(0x48u);
        sprintf(&Dest, "%s\t%s", v111, v110);
        v342 = 17;
        goto LABEL_362;
      case 18:
        sprintf(&v352, "%d", 10 * *((_DWORD *)dword_563918 + 2252));
        v228 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v229 = *((_DWORD *)dword_563908 + 355);
          if ( v229 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v229 + 36))(1);
            v228 = dword_563908;
          }
          v228[355] = 0;
        }
        v230 = operator new(0x420u);
        v354 = 44;
        if ( !v230 )
          goto LABEL_48;
        v343 = 18;
        v336 = (int)v3;
        v332 = &v352;
        v227 = sub_402617(0x4Cu);
LABEL_326:
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v227, v332, 1, 0, v336, v343, 0);
        goto LABEL_93;
      case 19:
        *((_DWORD *)dword_563918 + 2248) = (*((_DWORD *)dword_563918 + 2248) + 1) % 2;
        v120 = *((_DWORD *)dword_563918 + 2248);
        v121 = (char *)sub_402617(0x42u);
        v122 = sub_40263F(v121, v120);
        v123 = sub_402617(0x56u);
        sprintf(&Dest, "%s\t%s", v123, v122);
        v124 = v3[8];
        sub_402383(&Dest, 19, 1);
        return (HINSTANCE)sub_4A3A10(*((_DWORD *)dword_563918 + 2248));
      case 20:
        *((_DWORD *)dword_563918 + 2221) = (*((_DWORD *)dword_563918 + 2221) + 1) % 2;
        v125 = *((_DWORD *)dword_563918 + 2221);
        v126 = (char *)sub_402617(0x42u);
        v127 = sub_40263F(v126, v125);
        v128 = sub_402617(0x43u);
        sprintf(&Dest, "%s\t%s", v128, v127);
        v342 = 20;
        goto LABEL_362;
      case 21:
        *((_DWORD *)dword_563918 + 2334) = (*((_DWORD *)dword_563918 + 2334) + 1) % 4;
        v150 = *((_DWORD *)dword_563918 + 2334);
        v151 = (char *)sub_402617(0xC4u);
        v152 = sub_40263F(v151, v150);
        v153 = sub_402617(0xC3u);
        sprintf(&Dest, "%s\t%s", v153, v152);
        v342 = 21;
        goto LABEL_362;
      case 22:
        *((_DWORD *)dword_563918 + 2266) = (*((_DWORD *)dword_563918 + 2266) + 1) % 2;
        v154 = *((_DWORD *)dword_563918 + 2266);
        v155 = (char *)sub_402617(0x42u);
        v156 = sub_40263F(v155, v154);
        v157 = sub_402617(0xB1u);
        sprintf(&Dest, "%s\t%s", v157, v156);
        v342 = 22;
        goto LABEL_362;
      case 23:
        *((_DWORD *)dword_563918 + 2327) = (*((_DWORD *)dword_563918 + 2327) + 1) % 2;
        v166 = *((_DWORD *)dword_563918 + 2327);
        v167 = (char *)sub_402617(0x42u);
        v168 = sub_40263F(v167, v166);
        v169 = sub_402617(0xC9u);
        sprintf(&Dest, "%s\t%s", v169, v168);
        v342 = 23;
        goto LABEL_362;
      case 24:
        *((_DWORD *)dword_563918 + 2223) = (*((_DWORD *)dword_563918 + 2223) + 1) % 2;
        v170 = *((_DWORD *)dword_563918 + 2223);
        v171 = (char *)sub_402617(0x42u);
        v172 = sub_40263F(v171, v170);
        v173 = sub_402617(0xBEu);
        sprintf(&Dest, "%s\t%s", v173, v172);
        v342 = 24;
        goto LABEL_362;
      case 25:
        *((_DWORD *)dword_563918 + 2267) = (*((_DWORD *)dword_563918 + 2267) + 1) % 2;
        v174 = *((_DWORD *)dword_563918 + 2267);
        v175 = (char *)sub_402617(0xB3u);
        v176 = sub_40263F(v175, v174);
        v177 = sub_402617(0xB2u);
        sprintf(&Dest, "%s\t%s", v177, v176);
        v342 = 25;
        goto LABEL_362;
      case 26:
        *((_DWORD *)dword_563918 + 2253) = (*((_DWORD *)dword_563918 + 2253) + 1) % 4;
        v198 = *((_DWORD *)dword_563918 + 2253);
        v199 = (char *)sub_402617(0xADu);
        v200 = sub_40263F(v199, v198);
        v201 = sub_402617(0x73u);
        sprintf(&Dest, "%s\t%s", v201, v200);
        v342 = 26;
        goto LABEL_362;
      case 27:
        result = (HINSTANCE)abs(sub_401D39(v6, v5) - *((_DWORD *)dword_563908 + 6931));
        if ( (signed int)result > 250 )
        {
          sub_401CEE(dword_563908);
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
          result = (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
        }
        return result;
      case 28:
        v97 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 4;
        return (HINSTANCE)v97(v3, v3 + 3);
      case 29:
        v102 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 8;
        return (HINSTANCE)v102(v3, v3 + 3);
      case 30:
        v98 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 11;
        return (HINSTANCE)v98(v3, v3 + 3);
      case 31:
        v100 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 13;
        return (HINSTANCE)v100(v3, v3 + 3);
      case 32:
        v101 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 12;
        return (HINSTANCE)v101(v3, v3 + 3);
      case 33:
        *((_DWORD *)dword_563918 + 2335) = (*((_DWORD *)dword_563918 + 2335) + 1) % 5;
        v231 = *((_DWORD *)dword_563918 + 2335);
        v232 = (char *)sub_402617(0x5Au);
        v346 = sub_40263F(v232, v231);
        v233 = sub_402617(0x5Bu);
        goto LABEL_334;
      case 34:
        *((_DWORD *)dword_563918 + 2336) = (*((_DWORD *)dword_563918 + 2336) + 1) % 5;
        v234 = *((_DWORD *)dword_563918 + 2336);
        v235 = (char *)sub_402617(0x5Au);
        v347 = sub_40263F(v235, v234);
        v236 = sub_402617(0x5Cu);
        goto LABEL_336;
      case 35:
        *((_DWORD *)dword_563918 + 2337) = (*((_DWORD *)dword_563918 + 2337) + 1) % 5;
        v237 = *((_DWORD *)dword_563918 + 2337);
        v238 = (char *)sub_402617(0x5Au);
        v239 = sub_40263F(v238, v237);
        v240 = sub_402617(0x5Du);
        sprintf(&Dest, "%s\t%s", v240, v239);
        v241 = v3[8];
        sub_402383(&Dest, v3[9], 1);
        v242 = *((_DWORD *)dword_563908 + 1509);
        return (HINSTANCE)sub_401582(0);
      case 36:
        *((_DWORD *)dword_563918 + 2338) = (*((_DWORD *)dword_563918 + 2338) + 1) % 5;
        v243 = *((_DWORD *)dword_563918 + 2338);
        v244 = (char *)sub_402617(0x5Au);
        v348 = sub_40263F(v244, v243);
        v245 = sub_402617(0x5Eu);
        goto LABEL_339;
      case 37:
        *((_DWORD *)dword_563918 + 2339) = (*((_DWORD *)dword_563918 + 2339) + 1) % 5;
        v248 = *((_DWORD *)dword_563918 + 2339);
        v249 = (char *)sub_402617(0x5Au);
        v348 = sub_40263F(v249, v248);
        v245 = sub_402617(0x5Fu);
LABEL_339:
        sprintf(&Dest, "%s\t%s", v245, v348);
        v246 = v3[8];
        sub_402383(&Dest, v3[9], 1);
        v247 = *((_DWORD *)dword_563908 + 1500);
        return (HINSTANCE)sub_401B18(0);
      case 38:
        *((_DWORD *)dword_563918 + 2340) = (*((_DWORD *)dword_563918 + 2340) + 1) % 5;
        v250 = *((_DWORD *)dword_563918 + 2340);
        v251 = (char *)sub_402617(0x5Au);
        v252 = sub_40263F(v251, v250);
        v253 = sub_402617(0x60u);
        sprintf(&Dest, "%s\t%s", v253, v252);
        v342 = v3[9];
        goto LABEL_362;
      case 39:
        *((_DWORD *)dword_563918 + 2341) = (*((_DWORD *)dword_563918 + 2341) + 1) % 5;
        v254 = *((_DWORD *)dword_563918 + 2341);
        v255 = (char *)sub_402617(0x5Au);
        v346 = sub_40263F(v255, v254);
        v233 = sub_402617(0x61u);
LABEL_334:
        sprintf(&Dest, "%s\t%s", v233, v346);
        v342 = v3[9];
        goto LABEL_362;
      case 40:
        *((_DWORD *)dword_563918 + 2342) = (*((_DWORD *)dword_563918 + 2342) + 1) % 5;
        v256 = *((_DWORD *)dword_563918 + 2342);
        v257 = (char *)sub_402617(0x5Au);
        v347 = sub_40263F(v257, v256);
        v236 = sub_402617(0x62u);
LABEL_336:
        sprintf(&Dest, "%s\t%s", v236, v347);
        v342 = v3[9];
        goto LABEL_362;
      case 42:
        *((_DWORD *)dword_563918 + 2268) = (*((_DWORD *)dword_563918 + 2268) + 1) % 2;
        v186 = *((_DWORD *)dword_563918 + 2268);
        v187 = (char *)sub_402617(0xB3u);
        v188 = sub_40263F(v187, v186);
        v189 = sub_402617(0xB5u);
        sprintf(&Dest, "%s\t%s", v189, v188);
        v342 = 42;
        goto LABEL_362;
      case 43:
        *((_DWORD *)dword_563918 + 2234) = (*((_DWORD *)dword_563918 + 2234) + 1) % 2;
        v112 = *((_DWORD *)dword_563918 + 2234);
        v113 = (char *)sub_402617(0x42u);
        v114 = sub_40263F(v113, v112);
        v115 = sub_402617(0xC5u);
        sprintf(&Dest, "%s\t%s", v115, v114);
        v342 = 43;
        goto LABEL_362;
      case 44:
        *((_DWORD *)dword_563918 + 2235) = (*((_DWORD *)dword_563918 + 2235) + 1) % 2;
        v116 = *((_DWORD *)dword_563918 + 2235);
        v117 = (char *)sub_402617(0x42u);
        v118 = sub_40263F(v117, v116);
        v119 = sub_402617(0xC6u);
        sprintf(&Dest, "%s\t%s", v119, v118);
        v342 = 44;
        goto LABEL_362;
      case 45:
        *((_DWORD *)dword_563918 + 2328) = (*((_DWORD *)dword_563918 + 2328) + 1) % 3;
        v129 = *((_DWORD *)dword_563918 + 2328);
        v130 = (char *)sub_402617(0xCBu);
        v131 = sub_40263F(v130, v129);
        v132 = sub_402617(0xCAu);
        sprintf(&Dest, "%s\t%s", v132, v131);
        v342 = 45;
        goto LABEL_362;
      case 46:
        *((_DWORD *)dword_563918 + 2255) = (*((_DWORD *)dword_563918 + 2255) + 1) % 3;
        v133 = *((_DWORD *)dword_563918 + 2255);
        v134 = (char *)sub_402617(0xCDu);
        v135 = sub_40263F(v134, v133);
        v136 = sub_402617(0xCCu);
        sprintf(&Dest, "%s\t%s", v136, v135);
        v342 = 46;
        goto LABEL_362;
      case 47:
        *((_DWORD *)dword_563918 + 2256) = (*((_DWORD *)dword_563918 + 2256) + 1) % 2;
        v137 = *((_DWORD *)dword_563918 + 2256);
        v138 = (char *)sub_402617(0x42u);
        v139 = sub_40263F(v138, v137);
        v140 = sub_402617(0xD2u);
        sprintf(&Dest, "%s\t%s", v140, v139);
        v141 = v3[8];
        sub_402383(&Dest, 47, 1);
        return (HINSTANCE)sub_401965(dword_563908);
      case 48:
        v354 = 14;
        if ( !operator new(0x27144u) )
          goto LABEL_123;
        v23 = sub_401569((char *)dword_563908 + 57798, v3[2], (int)(v3 + 3), 5);
        goto LABEL_124;
      case 49:
        v95 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 6;
        return (HINSTANCE)v95(v3, v3 + 3);
      case 50:
        v354 = 16;
        if ( !operator new(0x27144u) )
          goto LABEL_123;
        v23 = sub_401569("global.nws", v3[2], (int)(v3 + 3), 5);
        goto LABEL_124;
      case 51:
        v96 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 5;
        return (HINSTANCE)v96(v3, v3 + 3);
      case 52:
        v354 = 17;
        if ( !operator new(0x27144u) )
          goto LABEL_137;
        v56 = sub_401569("release.txt", v3[2], (int)(v3 + 3), 5);
        goto LABEL_138;
      case 53:
        *((_DWORD *)dword_563918 + 2254) = (*((_DWORD *)dword_563918 + 2254) + 1) % 2;
        v190 = *((_DWORD *)dword_563918 + 2254);
        v191 = (char *)sub_402617(0x42u);
        v192 = sub_40263F(v191, v190);
        v193 = sub_402617(0x80u);
        sprintf(&Dest, "%s\t%s", v193, v192);
        v342 = 53;
        goto LABEL_362;
      case 54:
        *((_DWORD *)dword_563918 + 2257) = (*((_DWORD *)dword_563918 + 2257) + 1) % 2;
        v194 = *((_DWORD *)dword_563918 + 2257);
        v195 = (char *)sub_402617(0x42u);
        v196 = sub_40263F(v195, v194);
        v197 = sub_402617(0xBDu);
        sprintf(&Dest, "%s\t%s", v197, v196);
        v342 = 54;
        goto LABEL_362;
      case 55:
        v50 = *((_DWORD *)dword_563908 + 1509);
        return (HINSTANCE)sub_402793("?squad", 0);
      case 56:
        v37 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v38 = *((_DWORD *)dword_563908 + 355);
          if ( v38 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v38 + 36))(1);
            v37 = dword_563908;
          }
          v37[355] = 0;
        }
        v354 = 7;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v345 = 0;
        v338 = 56;
        goto LABEL_76;
      case 57:
        v40 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v41 = *((_DWORD *)dword_563908 + 355);
          if ( v41 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v41 + 36))(1);
            v40 = dword_563908;
          }
          v40[355] = 0;
        }
        v354 = 8;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v345 = 2;
        v338 = 57;
LABEL_76:
        v334 = (int)v3;
        v39 = sub_402617(0x98u);
        goto LABEL_77;
      case 58:
        v51 = *((_DWORD *)dword_563908 + 1509);
        return (HINSTANCE)sub_402793("?squadleave", 0);
      case 59:
        result = (HINSTANCE)(*((_DWORD *)dword_563908 + 6897) + 64);
        if ( *(_BYTE *)result )
        {
          sprintf(&File, ":#%s:", *((_DWORD *)dword_563908 + 6897) + 64);
          v52 = *((_DWORD *)dword_563908 + 1509);
          result = (HINSTANCE)sub_4012D0(&File);
        }
        return result;
      case 60:
        result = (HINSTANCE)dword_563908;
        if ( !*(_BYTE *)(*((_DWORD *)dword_563908 + 6897) + 64) )
          return result;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v42 = *((_DWORD *)dword_563908 + 355);
          if ( v42 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v42 + 36))(1);
            result = (HINSTANCE)dword_563908;
          }
          *((_DWORD *)result + 355) = 0;
        }
        v354 = 9;
        if ( !operator new(0x420u) )
          goto LABEL_48;
        v339 = 60;
        v335 = (int)v3;
        v333 = 0;
        v331 = (char *)&Source;
        v43 = sub_402617(0xDCu);
LABEL_92:
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v43, v331, v333, 0, v335, v339, 0);
LABEL_93:
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 61:
        result = (HINSTANCE)dword_563908;
        if ( !*(_BYTE *)(*((_DWORD *)dword_563908 + 6897) + 64) )
          return result;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v44 = *((_DWORD *)dword_563908 + 355);
          if ( v44 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v44 + 36))(1);
            result = (HINSTANCE)dword_563908;
          }
          *((_DWORD *)result + 355) = 0;
        }
        v354 = 10;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v345 = 0;
        v338 = 61;
        v334 = (int)v3;
        v39 = sub_402617(0xDDu);
        goto LABEL_77;
      case 62:
        result = (HINSTANCE)dword_563908;
        if ( *(_BYTE *)(*((_DWORD *)dword_563908 + 6897) + 64) )
        {
          v45 = *((_DWORD *)dword_563908 + 1509);
          result = (HINSTANCE)sub_402793("?squadlistinvites squad", 0);
        }
        return result;
      case 63:
        v46 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v47 = *((_DWORD *)dword_563908 + 355);
          if ( v47 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v47 + 36))(1);
            v46 = dword_563908;
          }
          v46[355] = 0;
        }
        v354 = 11;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v345 = 0;
        v338 = 63;
        v334 = (int)v3;
        v39 = sub_402617(0xE0u);
        goto LABEL_77;
      case 64:
        v48 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v49 = *((_DWORD *)dword_563908 + 355);
          if ( v49 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v49 + 36))(1);
            v48 = dword_563908;
          }
          v48[355] = 0;
        }
        v354 = 12;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v345 = 0;
        v338 = 64;
        v334 = (int)v3;
        v39 = sub_402617(0xE1u);
LABEL_77:
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v39, (char *)&Source, 0, 0, v334, v338, v345);
        goto LABEL_78;
      case 65:
        v337 = "?squadlistinvites player";
        goto LABEL_50;
      case 66:
        v28 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v29 = *((_DWORD *)dword_563908 + 355);
          if ( v29 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v29 + 36))(1);
            v28 = dword_563908;
          }
          v28[355] = 0;
        }
        v354 = 4;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v30 = sub_402617(0x99u);
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v30, (char *)&Source, 0, 0, (int)v3, 66, 0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 67:
        v31 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v32 = *((_DWORD *)dword_563908 + 355);
          if ( v32 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v32 + 36))(1);
            v31 = dword_563908;
          }
          v31[355] = 0;
        }
        v354 = 5;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v33 = sub_402617(0x9Du);
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v33, (char *)&Source, 0, 0, (int)v3, 67, 0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 68:
        v34 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v35 = *((_DWORD *)dword_563908 + 355);
          if ( v35 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v35 + 36))(1);
            v34 = dword_563908;
          }
          v34[355] = 0;
        }
        v354 = 6;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        v36 = sub_402617(0x9Eu);
        result = (HINSTANCE)sub_4019E2(*((_DWORD *)dword_563908 + 1519), v36, (char *)&Source, 0, 0, (int)v3, 68, 0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 69:
        *((_DWORD *)dword_563918 + 2272) = (*((_DWORD *)dword_563918 + 2272) + 1) % 2;
        v178 = *((_DWORD *)dword_563918 + 2272);
        v179 = (char *)sub_402617(0xB3u);
        v180 = sub_40263F(v179, v178);
        v181 = sub_402617(0xBFu);
        sprintf(&Dest, "%s\t%s", v181, v180);
        v342 = 69;
        goto LABEL_362;
      case 70:
        *((_DWORD *)dword_563918 + 2273) = (*((_DWORD *)dword_563918 + 2273) + 1) % 2;
        v182 = *((_DWORD *)dword_563918 + 2273);
        v183 = (char *)sub_402617(0xB3u);
        v184 = sub_40263F(v183, v182);
        v185 = sub_402617(0xC0u);
        sprintf(&Dest, "%s\t%s", v185, v184);
        v342 = 70;
        goto LABEL_362;
      case 71:
        *((_DWORD *)dword_563918 + 2320) = (*((_DWORD *)dword_563918 + 2320) + 1) % 2;
        v262 = *((_DWORD *)dword_563918 + 2320);
        v263 = (char *)sub_402617(0x42u);
        v264 = sub_40263F(v263, v262);
        v265 = sub_402617(0xA3u);
        sprintf(&Dest, "%s\t%s", v265, v264);
        v342 = 71;
        goto LABEL_362;
      case 72:
        *((_DWORD *)dword_563918 + 2321) = (*((_DWORD *)dword_563918 + 2321) + 1) % 2;
        v266 = *((_DWORD *)dword_563918 + 2321);
        v267 = (char *)sub_402617(0x42u);
        v268 = sub_40263F(v267, v266);
        v269 = sub_402617(0xA4u);
        sprintf(&Dest, "%s\t%s", v269, v268);
        v342 = 72;
        goto LABEL_362;
      case 73:
        *((_DWORD *)dword_563918 + 2311) = (*((_DWORD *)dword_563918 + 2311) + 1) % 2;
        v294 = *((_DWORD *)dword_563918 + 2311);
        v295 = (char *)sub_402617(0x42u);
        v296 = sub_40263F(v295, v294);
        v297 = sub_402617(0xA5u);
        sprintf(&Dest, "%s\t%s", v297, v296);
        v342 = 73;
        goto LABEL_362;
      case 74:
        *((_DWORD *)dword_563918 + 2319) = (*((_DWORD *)dword_563918 + 2319) + 1) % 2;
        v298 = *((_DWORD *)dword_563918 + 2319);
        v299 = (char *)sub_402617(0x42u);
        v300 = sub_40263F(v299, v298);
        v301 = sub_402617(0xBCu);
        sprintf(&Dest, "%s\t%s", v301, v300);
        v342 = 74;
        goto LABEL_362;
      case 75:
        *((_DWORD *)dword_563918 + 2313) = (*((_DWORD *)dword_563918 + 2313) + 1) % 2;
        v302 = *((_DWORD *)dword_563918 + 2313);
        v303 = (char *)sub_402617(0x42u);
        v304 = sub_40263F(v303, v302);
        v305 = sub_402617(0xA6u);
        sprintf(&Dest, "%s\t%s", v305, v304);
        v342 = 75;
        goto LABEL_362;
      case 76:
        *((_DWORD *)dword_563918 + 2312) = (*((_DWORD *)dword_563918 + 2312) + 1) % 2;
        v306 = *((_DWORD *)dword_563918 + 2312);
        v307 = (char *)sub_402617(0x42u);
        v308 = sub_40263F(v307, v306);
        v309 = sub_402617(0xA7u);
        sprintf(&Dest, "%s\t%s", v309, v308);
        v342 = 76;
        goto LABEL_362;
      case 77:
        *((_DWORD *)dword_563918 + 2316) = (*((_DWORD *)dword_563918 + 2316) + 1) % 2;
        v318 = *((_DWORD *)dword_563918 + 2316);
        v319 = (char *)sub_402617(0x42u);
        v320 = sub_40263F(v319, v318);
        v321 = sub_402617(0xACu);
        sprintf(&Dest, "%s\t%s", v321, v320);
        v342 = 77;
        goto LABEL_362;
      case 78:
        *((_DWORD *)dword_563918 + 2314) = (*((_DWORD *)dword_563918 + 2314) + 1) % 2;
        v310 = *((_DWORD *)dword_563918 + 2314);
        v311 = (char *)sub_402617(0x42u);
        v312 = sub_40263F(v311, v310);
        v313 = sub_402617(0xA8u);
        sprintf(&Dest, "%s\t%s", v313, v312);
        v342 = 78;
        goto LABEL_362;
      case 79:
        *((_DWORD *)dword_563918 + 2315) = (*((_DWORD *)dword_563918 + 2315) + 1) % 2;
        v314 = *((_DWORD *)dword_563918 + 2315);
        v315 = (char *)sub_402617(0x42u);
        v316 = sub_40263F(v315, v314);
        v317 = sub_402617(0xA9u);
        sprintf(&Dest, "%s\t%s", v317, v316);
        v342 = 79;
        goto LABEL_362;
      case 80:
        *((_DWORD *)dword_563918 + 2317) = (*((_DWORD *)dword_563918 + 2317) + 1) % 2;
        v326 = *((_DWORD *)dword_563918 + 2317);
        v327 = (char *)sub_402617(0x42u);
        v328 = sub_40263F(v327, v326);
        v329 = sub_402617(0xABu);
        sprintf(&Dest, "%s\t%s", v329, v328);
        v342 = 80;
        goto LABEL_362;
      case 81:
        *((_DWORD *)dword_563918 + 2318) = (*((_DWORD *)dword_563918 + 2318) + 1) % 2;
        v322 = *((_DWORD *)dword_563918 + 2318);
        v323 = (char *)sub_402617(0x42u);
        v324 = sub_40263F(v323, v322);
        v325 = sub_402617(0xAAu);
        sprintf(&Dest, "%s\t%s", v325, v324);
        v342 = 81;
        goto LABEL_362;
      case 82:
        *((_DWORD *)dword_563918 + 2271) = (*((_DWORD *)dword_563918 + 2271) + 1) % 2;
        v274 = *((_DWORD *)dword_563918 + 2271);
        v275 = (char *)sub_402617(0x42u);
        v276 = sub_40263F(v275, v274);
        v277 = sub_402617(0xB9u);
        sprintf(&Dest, "%s\t%s", v277, v276);
        v342 = 82;
        goto LABEL_362;
      case 83:
        *((_DWORD *)dword_563918 + 2322) = (*((_DWORD *)dword_563918 + 2322) + 1) % 2;
        v270 = *((_DWORD *)dword_563918 + 2322);
        v271 = (char *)sub_402617(0x42u);
        v272 = sub_40263F(v271, v270);
        v273 = sub_402617(0xD5u);
        sprintf(&Dest, "%s\t%s", v273, v272);
        v342 = 83;
        goto LABEL_362;
      case 84:
        v86 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v87 = *((_DWORD *)dword_563908 + 355);
          if ( v87 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v87 + 36))(1);
            v86 = dword_563908;
          }
          v86[355] = 0;
        }
        v354 = 35;
        if ( operator new(0x218u) )
          v88 = sub_40146A(*((_DWORD *)dword_563908 + 1519), "Waiting For Arena List...", 1500, 0);
        else
          v88 = 0;
        v354 = -1;
        *((_DWORD *)dword_563908 + 355) = v88;
        v337 = "?arena";
        goto LABEL_50;
      case 85:
        v92 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v93 = *((_DWORD *)dword_563908 + 355);
          if ( v93 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v93 + 36))(1);
            v92 = dword_563908;
          }
          v92[355] = 0;
        }
        v354 = 37;
        if ( !operator new(0x420u) )
          goto LABEL_48;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Arena Name (begin with # for private)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              85,
                              0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 86:
        v24 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 16;
        return (HINSTANCE)v24(v3, v3 + 3);
      case 87:
        v25 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v26 = *((_DWORD *)dword_563908 + 355);
          if ( v26 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v26 + 36))(1);
            v25 = dword_563908;
          }
          v25[355] = 0;
        }
        v354 = 3;
        if ( !operator new(0x420u) )
          goto LABEL_48;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Team Name",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              87,
                              0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 88:
        v337 = "?teaminfo";
        goto LABEL_50;
      case 89:
        *((_DWORD *)dword_563918 + 2265) = (*((_DWORD *)dword_563918 + 2265) + 1) % 4;
        v258 = *((_DWORD *)dword_563918 + 2265);
        v259 = (char *)sub_402617(0xAFu);
        v260 = sub_40263F(v259, v258);
        v261 = sub_402617(0xAEu);
        sprintf(&Dest, "%s\t%s", v261, v260);
        v342 = 89;
        goto LABEL_362;
      case 90:
        return (HINSTANCE)sub_40168B(*((_DWORD *)dword_563908 + 1533));
      case 91:
        v202 = (signed int)((unsigned __int64)(1717986919i64 * *((signed int *)dword_563918 + 2270)) >> 32) >> 2;
        sprintf(&File, "%d", v202 + (v202 >> 31));
        v203 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v204 = *((_DWORD *)dword_563908 + 355);
          if ( v204 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v204 + 36))(1);
            v203 = dword_563908;
          }
          v203[355] = 0;
        }
        v205 = operator new(0x420u);
        v354 = 38;
        if ( !v205 )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Radar Gamma Adjust Percent",
                              &File,
                              1,
                              0,
                              (int)v3,
                              91,
                              0);
        goto LABEL_78;
      case 92:
        sprintf(&File, "%d", *((_DWORD *)dword_563918 + 2242));
        v217 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v218 = *((_DWORD *)dword_563908 + 355);
          if ( v218 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v218 + 36))(1);
            v217 = dword_563908;
          }
          v217[355] = 0;
        }
        v219 = operator new(0x420u);
        v354 = 41;
        if ( !v219 )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Sound Volume (0 to 100)",
                              &File,
                              1,
                              0,
                              (int)v3,
                              92,
                              0);
        goto LABEL_78;
      case 93:
        v89 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v90 = *((_DWORD *)dword_563908 + 355);
          if ( v90 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v90 + 36))(1);
            v89 = dword_563908;
          }
          v89[355] = 0;
        }
        v354 = 36;
        if ( operator new(0x218u) )
          v91 = sub_40146A(*((_DWORD *)dword_563908 + 1519), "Waiting For Zone List...", 1500, 0);
        else
          v91 = 0;
        v354 = -1;
        *((_DWORD *)dword_563908 + 355) = v91;
        v337 = "?zonelist";
LABEL_50:
        v27 = *((_DWORD *)dword_563908 + 1509);
        return (HINSTANCE)sub_402793(v337, 0);
      case 94:
        v354 = 25;
        if ( operator new(0x6F79Cu) )
          v64 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v64 = 0;
        v341 = 0;
        goto LABEL_175;
      case 95:
        v66 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 22;
        return (HINSTANCE)v66(v3, v3 + 3);
      case 96:
        v354 = 26;
        if ( operator new(0x6F79Cu) )
          v64 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v64 = 0;
        v341 = 2;
        goto LABEL_175;
      case 97:
        v354 = 27;
        if ( operator new(0x6F79Cu) )
          v64 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v64 = 0;
        v341 = 17;
        goto LABEL_175;
      case 98:
        v354 = 28;
        if ( operator new(0x6F79Cu) )
          v64 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v64 = 0;
        v341 = 18;
        goto LABEL_175;
      case 99:
        v354 = 21;
        if ( operator new(0x6F79Cu) )
          v62 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v62 = 0;
        v340 = "?lagchart";
        goto LABEL_158;
      case 100:
        v354 = 24;
        if ( operator new(0x6F79Cu) )
          v62 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v62 = 0;
        v340 = "?playerchart";
        goto LABEL_158;
      case 101:
        v354 = 22;
        if ( operator new(0x6F79Cu) )
          v62 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v62 = 0;
        v340 = "?chatchart";
        goto LABEL_158;
      case 102:
        v354 = 23;
        if ( operator new(0x6F79Cu) )
          v62 = sub_401FAA(v3[2], v3 + 3, 14);
        else
          v62 = 0;
        v340 = "?squadchart";
LABEL_158:
        *((_DWORD *)dword_563908 + 1535) = v62;
        v63 = *((_DWORD *)dword_563908 + 1509);
        v354 = -1;
        sub_402793(v340, 0);
        return (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
      case 103:
        v354 = 18;
        if ( !operator new(0x3CCC0u) )
          goto LABEL_137;
        v56 = sub_4010E1(v3[2], v3 + 3, 6);
        goto LABEL_138;
      case 104:
        *((_DWORD *)dword_563918 + 2224) = (*((_DWORD *)dword_563918 + 2224) + 1) % 2;
        v278 = *((_DWORD *)dword_563918 + 2224);
        v279 = (char *)sub_402617(0x42u);
        v280 = sub_40263F(v279, v278);
        v281 = sub_402617(0xC1u);
        sprintf(&Dest, "%s\t%s", v281, v280);
        v342 = 104;
        goto LABEL_362;
      case 105:
        *((_DWORD *)dword_563918 + 2232) = (*((_DWORD *)dword_563918 + 2232) + 1) % 2;
        v282 = *((_DWORD *)dword_563918 + 2232);
        v283 = (char *)sub_402617(0x42u);
        v284 = sub_40263F(v283, v282);
        v285 = sub_402617(0xC2u);
        sprintf(&Dest, "%s\t%s", v285, v284);
        v342 = 105;
        goto LABEL_362;
      case 106:
        *((_DWORD *)dword_563918 + 2275) = (*((_DWORD *)dword_563918 + 2275) + 1) % 2;
        v286 = *((_DWORD *)dword_563918 + 2275);
        v287 = (char *)sub_402617(0x42u);
        v288 = sub_40263F(v287, v286);
        v289 = sub_402617(0xCEu);
        sprintf(&Dest, "%s\t%s", v289, v288);
        v342 = 106;
        goto LABEL_362;
      case 107:
        *((_DWORD *)dword_563918 + 2274) = (*((_DWORD *)dword_563918 + 2274) + 1) % 2;
        v290 = *((_DWORD *)dword_563918 + 2274);
        v291 = (char *)sub_402617(0x42u);
        v292 = sub_40263F(v291, v290);
        v293 = sub_402617(0xCFu);
        sprintf(&Dest, "%s\t%s", v293, v292);
        v342 = 107;
        goto LABEL_362;
      case 108:
        *((_DWORD *)dword_563918 + 2276) = (*((_DWORD *)dword_563918 + 2276) + 1) % 2;
        v158 = *((_DWORD *)dword_563918 + 2276);
        v159 = (char *)sub_402617(0x42u);
        v160 = sub_40263F(v159, v158);
        v161 = sub_402617(0xD1u);
        sprintf(&Dest, "%s\t%s", v161, v160);
        v342 = 108;
        goto LABEL_362;
      case 109:
        *((_DWORD *)dword_563918 + 2277) = (*((_DWORD *)dword_563918 + 2277) + 1) % 2;
        v162 = *((_DWORD *)dword_563918 + 2277);
        v163 = (char *)sub_402617(0x42u);
        v164 = sub_40263F(v163, v162);
        v165 = sub_402617(0xD0u);
        sprintf(&Dest, "%s\t%s", v165, v164);
        v342 = 109;
        goto LABEL_362;
      case 110:
        v99 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 17;
        return (HINSTANCE)v99(v3, v3 + 3);
      case 111:
        *((_DWORD *)dword_563918 + 2343) = (*((_DWORD *)dword_563918 + 2343) + 1) % 2;
        v142 = *((_DWORD *)dword_563918 + 2343);
        v143 = (char *)sub_402617(0x42u);
        v144 = sub_40263F(v143, v142);
        v145 = sub_402617(0xD3u);
        sprintf(&Dest, "%s\t%s", v145, v144);
        v342 = 111;
        goto LABEL_362;
      case 112:
        *((_DWORD *)dword_563918 + 2344) = (*((_DWORD *)dword_563918 + 2344) + 1) % 2;
        v146 = *((_DWORD *)dword_563918 + 2344);
        v147 = (char *)sub_402617(0x42u);
        v148 = sub_40263F(v147, v146);
        v149 = sub_402617(0xD4u);
        sprintf(&Dest, "%s\t%s", v149, v148);
        v342 = 112;
LABEL_362:
        v330 = v3[8];
        return (HINSTANCE)sub_402383(&Dest, v342, 1);
      case 113:
        v80 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 18;
        return (HINSTANCE)v80(v3, v3 + 3);
      case 114:
        v83 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 20;
        return (HINSTANCE)v83(v3, v3 + 3);
      case 115:
        v81 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 19;
        return (HINSTANCE)v81(v3, v3 + 3);
      case 116:
        v82 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 21;
        return (HINSTANCE)v82(v3, v3 + 3);
      case 117:
        v54 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v55 = *((_DWORD *)dword_563908 + 355);
          if ( v55 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v55 + 36))(1);
            v54 = dword_563908;
          }
          v54[355] = 0;
        }
        v354 = 15;
        if ( !operator new(0x420u) )
          goto LABEL_48;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Help Request (ESC to abort)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              117,
                              0);
        *((_DWORD *)dword_563908 + 355) = result;
        return result;
      case 118:
        v67 = *(int (__thiscall **)(int *, int *))(*v3 + 8);
        v3[7] = 23;
        return (HINSTANCE)v67(v3, v3 + 3);
      case 119:
      case 120:
      case 121:
      case 122:
        v76 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v77 = *((_DWORD *)dword_563908 + 355);
          if ( v77 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v77 + 36))(1);
            v76 = dword_563908;
          }
          v76[355] = 0;
        }
        v354 = 34;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Player Name (blank=self)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              v3[9],
                              0);
        goto LABEL_78;
      case 123:
        v354 = 29;
        if ( operator new(0x6F79Cu) )
          v64 = sub_401FAA(v3[2], v3 + 3, 22);
        else
          v64 = 0;
        v341 = 1;
LABEL_175:
        *((_DWORD *)dword_563908 + 1535) = v64;
        v65 = *(void (__stdcall **)(signed int, BYTE *))(*(_DWORD *)dword_56391C + 56);
        v354 = -1;
        v65(v341, &Source);
        return (HINSTANCE)(*(int (__thiscall **)(int *, signed int))(*v3 + 4))(v3, 1);
      case 124:
        v74 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v75 = *((_DWORD *)dword_563908 + 355);
          if ( v75 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v75 + 36))(1);
            v74 = dword_563908;
          }
          v74[355] = 0;
        }
        v354 = 33;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Day (yyyy-mm-dd)(blank=today, -1=yesterday)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              v3[9],
                              0);
        goto LABEL_78;
      case 125:
        v72 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v73 = *((_DWORD *)dword_563908 + 355);
          if ( v73 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v73 + 36))(1);
            v72 = dword_563908;
          }
          v72[355] = 0;
        }
        v354 = 32;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Week (yyyy-mm-dd)(blank=this week, -1=last week)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              v3[9],
                              0);
        goto LABEL_78;
      case 126:
        v70 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v71 = *((_DWORD *)dword_563908 + 355);
          if ( v71 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v71 + 36))(1);
            v70 = dword_563908;
          }
          v70[355] = 0;
        }
        v354 = 31;
        if ( !operator new(0x420u) )
          goto LABEL_57;
        result = (HINSTANCE)sub_4019E2(
                              *((_DWORD *)dword_563908 + 1519),
                              (int)"Enter Month (yyyy-mm)(blank=this month, -1=last month)",
                              (char *)&Source,
                              0,
                              0,
                              (int)v3,
                              v3[9],
                              0);
        goto LABEL_78;
      case 127:
        v68 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v69 = *((_DWORD *)dword_563908 + 355);
          if ( v69 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v69 + 36))(1);
            v68 = dword_563908;
          }
          v68[355] = 0;
        }
        v354 = 30;
        if ( operator new(0x420u) )
        {
          result = (HINSTANCE)sub_4019E2(
                                *((_DWORD *)dword_563908 + 1519),
                                (int)"Enter Year (yyyy)(blank=this year, -1=last year)",
                                (char *)&Source,
                                0,
                                0,
                                (int)v3,
                                v3[9],
                                0);
LABEL_78:
          *((_DWORD *)dword_563908 + 355) = result;
        }
        else
        {
LABEL_57:
          result = 0;
          *((_DWORD *)dword_563908 + 355) = 0;
        }
        return result;
      case 128:
        *((_DWORD *)dword_563918 + 10772) = (*((_DWORD *)dword_563918 + 10772) + 1) % 2;
        v212 = *((_DWORD *)dword_563918 + 10772);
        v213 = (char *)sub_402617(0x42u);
        v214 = sub_40263F(v213, v212);
        v215 = sub_402617(0xD7u);
        sprintf(&Dest, "%s\t%s", v215, v214);
        v216 = v3[8];
        sub_402383(&Dest, 128, 1);
        return (HINSTANCE)sub_4026E4(dword_563908);
      default:
        return result;
    }
    goto LABEL_48;
  }
  v349 = (char *)dword_563908 + 128 * (v7 - 3000) + 114234;
  sub_48CEB0(&v349, &v353);
  sub_48CEB0(&v349, &File);
  v22 = operator new(0x27144u);
  v354 = 2;
  if ( v22 )
    v23 = sub_401569(&File, v3[2], (int)(v3 + 3), 5);
  else
LABEL_123:
    v23 = 0;
LABEL_124:
  *((_DWORD *)dword_563908 + 1535) = v23;
  v53 = *(int (__thiscall **)(int *, signed int))(*v3 + 4);
  v354 = -1;
  return (HINSTANCE)v53(v3, 1);
}
// 40108C: using guessed type _DWORD __stdcall sub_40108C(_DWORD, _DWORD, _DWORD);
// 4010E1: using guessed type _DWORD __stdcall sub_4010E1(_DWORD, _DWORD, _DWORD);
// 40146A: using guessed type _DWORD __stdcall sub_40146A(_DWORD, _DWORD, _DWORD, _DWORD);
// 401582: using guessed type _DWORD __stdcall sub_401582(_DWORD);
// 40168B: using guessed type int __thiscall sub_40168B(_DWORD);
// 4018CA: using guessed type _DWORD __stdcall sub_4018CA(_DWORD, _DWORD, _DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401B18: using guessed type _DWORD __stdcall sub_401B18(_DWORD);
// 401CEE: using guessed type int __thiscall sub_401CEE(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401E29: using guessed type int __thiscall sub_401E29(_DWORD);
// 401EF1: using guessed type _DWORD __stdcall sub_401EF1(_DWORD, _DWORD, _DWORD);
// 401FAA: using guessed type _DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD);
// 4020DB: using guessed type int __thiscall sub_4020DB(_DWORD);
// 402108: using guessed type _DWORD __stdcall sub_402108(_DWORD);
// 4026E4: using guessed type int __thiscall sub_4026E4(_DWORD);
// 402955: using guessed type _DWORD __stdcall sub_402955(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004534F0) --------------------------------------------------------
void *__thiscall sub_4534F0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  void *result; // eax
  int v4; // esi

  v2 = this;
  if ( this[10] )
  {
    result = dword_563908;
    if ( !*((_DWORD *)dword_563908 + 355) )
    {
      result = (void *)(*(int (__stdcall **)(_DWORD *))(*this + 8))(this + 3);
      v2[10] = 0;
    }
  }
  v4 = v2[8];
  if ( v4 )
  {
    if ( *(_DWORD *)(v4 + 10992) )
      result = (void *)(*(int (__stdcall **)(int))(**(_DWORD **)(v4 + 10992) + 36))(a2);
  }
  return result;
}

//----- (00453550) --------------------------------------------------------
int __thiscall sub_453550(_DWORD **this)
{
  _DWORD **v1; // esi

  v1 = this;
  (*(void (**)(void))(**((_DWORD **)dword_563908 + 1499) + 16))();
  (*(void (__stdcall **)(_DWORD **))(*v1[2] + 64))(v1 + 3);
  sub_401159(v1[8]);
  return (*(int (__stdcall **)(_DWORD, _DWORD, signed int, signed int))(*v1[2] + 68))(0, 0, -1, -1);
}
// 401159: using guessed type int __thiscall sub_401159(_DWORD);

//----- (004535A0) --------------------------------------------------------
void __thiscall sub_4535A0(int this, int a2, int a3, char *Str)
{
  _DWORD *v4; // edi
  int v5; // eax
  int v6; // ST1C_4
  int v7; // eax
  int v8; // ecx
  signed __int16 v9; // ax
  int v10; // ST1C_4
  int v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // ST1C_4
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  unsigned int v18; // edx
  int v19; // ST1C_4
  int v20; // eax
  int v21; // ecx
  int v22; // eax
  int v23; // ST1C_4
  int v24; // eax
  int v25; // ecx
  int v26; // ST1C_4
  int v27; // eax
  int v28; // ecx
  signed int v29; // eax
  int v30; // ST1C_4
  int v31; // eax
  int v32; // ecx
  char *v33; // edx
  int v34; // ecx
  _DWORD *v35; // eax
  int v36; // ecx
  int v37; // eax
  int v38; // ecx
  char *v39; // ecx
  char *v40; // ST18_4
  int v41; // ecx
  int v42; // ecx
  int v43; // ecx
  _DWORD *v44; // eax
  int v45; // ecx
  int v46; // eax
  void (__stdcall *v47)(signed int, char *); // eax
  const char *v48; // [esp-Ch] [ebp-330h]
  char *v49; // [esp-8h] [ebp-32Ch]
  signed int v50; // [esp-8h] [ebp-32Ch]
  char *v51; // [esp-4h] [ebp-328h]
  char *v52; // [esp-4h] [ebp-328h]
  char Dest; // [esp+14h] [ebp-310h]
  char Source; // [esp+114h] [ebp-210h]
  char v55; // [esp+214h] [ebp-110h]
  int v56; // [esp+320h] [ebp-4h]

  v4 = (_DWORD *)this;
  switch ( a2 )
  {
    case 12:
      if ( j__atol(Str) < 0 || j__atol(Str) <= 100 )
      {
        if ( j__atol(Str) >= 0 )
          v5 = j__atol(Str);
        else
          v5 = 0;
      }
      else
      {
        v5 = 100;
      }
      *((_DWORD *)dword_563918 + 2249) = v5;
      v6 = *((_DWORD *)dword_563918 + 2249);
      v7 = sub_402617(0x44u);
      sprintf(&Dest, "%s\t%d", v7, v6);
      v8 = v4[8];
      sub_402383(&Dest, 12, 1);
      return;
    case 13:
      if ( j__atol(Str) < 0 || j__atol(Str) <= 1000 )
      {
        if ( j__atol(Str) >= 0 )
          v9 = j__atol(Str);
        else
          v9 = 0;
      }
      else
      {
        v9 = 1000;
      }
      *((_WORD *)dword_563918 + 4450) = v9;
      v10 = *((signed __int16 *)dword_563918 + 4450);
      v11 = sub_402617(0xD6u);
      sprintf(&Dest, "%s\t%d", v11, v10);
      v12 = v4[8];
      sub_402383(&Dest, 13, 1);
      return;
    case 14:
      if ( 5 * j__atol(Str) & 0x40000000 || 10 * j__atol(Str) <= 1000 )
      {
        if ( 10 * j__atol(Str) >= 0 )
          v17 = 10 * j__atol(Str);
        else
          v17 = 0;
      }
      else
      {
        v17 = 1000;
      }
      *((_DWORD *)dword_563918 + 2250) = v17;
      v18 = (signed int)((unsigned __int64)(1717986919i64 * *((signed int *)dword_563918 + 2250)) >> 32) >> 2;
      v19 = v18 + (v18 >> 31);
      v20 = sub_402617(0x45u);
      sprintf(&Dest, "%s\t%d%%", v20, v19);
      v21 = v4[8];
      sub_402383(&Dest, 14, 1);
      return;
    case 15:
      if ( 10 * j__atol(Str) < 0 || 10 * j__atol(Str) <= 1000 )
      {
        if ( 10 * j__atol(Str) >= 0 )
          v22 = 10 * j__atol(Str);
        else
          v22 = 0;
      }
      else
      {
        v22 = 1000;
      }
      *((_DWORD *)dword_563918 + 2251) = v22;
      v23 = *((_DWORD *)dword_563918 + 2251) / 10;
      v24 = sub_402617(0xC8u);
      sprintf(&Dest, "%s\t%d%%", v24, v23);
      v25 = v4[8];
      sub_402383(&Dest, 15, 1);
      return;
    case 18:
      *((_DWORD *)dword_563918 + 2252) = j__atol(Str) / 10;
      v26 = 10 * *((_DWORD *)dword_563918 + 2252);
      v27 = sub_402617(0x46u);
      sprintf(&Dest, "%s\t%d ms", v27, v26);
      v28 = v4[8];
      sub_402383(&Dest, 18, 1);
      return;
    case 56:
    case 57:
      if ( a3 )
      {
        if ( a3 != 1 )
        {
          if ( a2 == 56 )
            sprintf(&Dest, "?squadcreate %s", &unk_56C570);
          else
            sprintf(&Dest, "?squadjoin %s", &unk_56C570);
          v33 = &Dest;
          goto LABEL_48;
        }
        if ( Str && *Str )
        {
          v51 = Str;
          v49 = (char *)&unk_56C570;
          if ( a2 == 56 )
          {
            sprintf(&Source, "?squadcreate %s:%s", &unk_56C570, Str);
            goto LABEL_80;
          }
          v48 = "?squadjoin %s:%s";
          goto LABEL_79;
        }
      }
      else if ( Str && *Str )
      {
        strcpy((char *)&unk_56C570, Str);
        v35 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v36 = *((_DWORD *)dword_563908 + 355);
          if ( v36 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v36 + 36))(1);
            v35 = dword_563908;
          }
          v35[355] = 0;
        }
        v56 = 0;
        if ( !operator new(0x420u) )
          goto LABEL_64;
        v37 = sub_402617(0x99u);
        *((_DWORD *)dword_563908 + 355) = sub_4019E2(
                                            *((_DWORD *)dword_563908 + 1519),
                                            v37,
                                            (char *)&::Source,
                                            0,
                                            0,
                                            (int)v4,
                                            a2,
                                            1);
      }
      return;
    case 60:
      if ( Str )
      {
        if ( *Str )
        {
          v38 = *((_DWORD *)dword_563908 + 6897);
          if ( *(_BYTE *)(v38 + 64) )
          {
            v51 = (char *)(v38 + 64);
            v49 = Str;
            v48 = "?squadinvite add:%s:%s";
            goto LABEL_79;
          }
        }
      }
      return;
    case 61:
      if ( Str )
      {
        if ( *Str )
        {
          v42 = *((_DWORD *)dword_563908 + 6897);
          if ( *(_BYTE *)(v42 + 64) )
          {
            v51 = (char *)(v42 + 64);
            v49 = Str;
            v48 = "?squadinvite remove:%s:%s";
LABEL_79:
            sprintf(&Source, v48, v49, v51);
            goto LABEL_80;
          }
        }
      }
      return;
    case 63:
      if ( Str && *Str )
      {
        sprintf(&Source, "?squadIresponse accept:%s", Str);
        goto LABEL_80;
      }
      return;
    case 64:
      if ( Str && *Str )
      {
        sprintf(&Source, "?squadIresponse reject:%s", Str);
LABEL_80:
        v39 = &Source;
        goto LABEL_81;
      }
      return;
    case 66:
      if ( Str && *Str )
      {
        sprintf(&Source, "?squadpassword %s", Str);
        goto LABEL_47;
      }
      return;
    case 67:
      if ( Str && *Str )
      {
        sprintf(&Source, "?squadkick %s", Str);
        goto LABEL_47;
      }
      return;
    case 68:
      if ( Str && *Str )
      {
        sprintf(&Source, "?squadtransfer %s", Str);
LABEL_47:
        v33 = &Source;
LABEL_48:
        v34 = *((_DWORD *)dword_563908 + 1509);
        sub_402793(v33, 0);
      }
      return;
    case 85:
      if ( Str && *Str )
      {
        sprintf(&Dest, "?go %s", Str);
        v39 = &Dest;
        goto LABEL_81;
      }
      return;
    case 86:
      if ( Str )
      {
        if ( *Str )
          sprintf(&Source, "?team %s:%s", &unk_56C570, Str);
        else
          sprintf(&Source, "?team %s", &unk_56C570);
        v43 = *((_DWORD *)dword_563908 + 1509);
        sub_402793(&Source, 0);
      }
      *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
      goto LABEL_159;
    case 87:
      if ( a3 )
      {
        if ( Str )
        {
          if ( *Str )
            sprintf(&v55, "?team %s:%s", &unk_56C570, Str);
          else
            sprintf(&v55, "?team %s", &unk_56C570);
          v39 = &v55;
LABEL_81:
          v40 = v39;
          v41 = *((_DWORD *)dword_563908 + 1509);
          sub_402793(v40, 0);
        }
      }
      else if ( Str && *Str )
      {
        strcpy((char *)&unk_56C570, Str);
        v44 = dword_563908;
        if ( *((_DWORD *)dword_563908 + 355) )
        {
          v45 = *((_DWORD *)dword_563908 + 355);
          if ( v45 )
          {
            (*(void (__stdcall **)(signed int))(*(_DWORD *)v45 + 36))(1);
            v44 = dword_563908;
          }
          v44[355] = 0;
        }
        v56 = 1;
        if ( operator new(0x420u) )
          *((_DWORD *)dword_563908 + 355) = sub_4019E2(
                                              *((_DWORD *)dword_563908 + 1519),
                                              (int)"Enter Team Password (optional)",
                                              (char *)&::Source,
                                              0,
                                              0,
                                              (int)v4,
                                              a2,
                                              1);
        else
LABEL_64:
          *((_DWORD *)dword_563908 + 355) = 0;
      }
      return;
    case 91:
      *((_DWORD *)dword_563918 + 2270) = 10 * j__atol(Str);
      v29 = *((_DWORD *)dword_563918 + 2270);
      if ( v29 >= 2000 )
        goto LABEL_42;
      if ( v29 >= 0 )
      {
        if ( v29 >= 2000 )
LABEL_42:
          v29 = 2000;
      }
      else
      {
        v29 = 0;
      }
      *((_DWORD *)dword_563918 + 2270) = v29;
      v30 = *((_DWORD *)dword_563918 + 2270) / 10;
      v31 = sub_402617(0xB6u);
      sprintf(&Dest, "%s\t%d%%", v31, v30);
      v32 = v4[8];
      sub_402383(&Dest, 91, 1);
      sub_4AAB20(*((char **)dword_563908 + 1508), *((_DWORD *)dword_563918 + 2270));
      sub_4023AB(*((_DWORD *)dword_563908 + 1505));
      return;
    case 92:
      if ( j__atol(Str) >= 100 || j__atol(Str) >= 0 )
      {
        if ( j__atol(Str) >= 100 )
          v13 = 100;
        else
          v13 = j__atol(Str);
      }
      else
      {
        v13 = 0;
      }
      *((_DWORD *)dword_563918 + 2242) = v13;
      v14 = *((_DWORD *)dword_563918 + 2242);
      v15 = sub_402617(0xB7u);
      sprintf(&Dest, "%s\t%d", v15, v14);
      v16 = v4[8];
      sub_402383(&Dest, 92, 1);
      sub_4A6BF0(*((_DWORD **)dword_563908 + 354), *((_DWORD *)dword_563918 + 2242));
      return;
    case 117:
      if ( !Str || !*Str )
        return;
      sprintf(&Dest, "?help %s", Str);
      v39 = &Dest;
      goto LABEL_81;
    case 119:
      if ( !Str )
        return;
      v56 = 9;
      if ( operator new(0x6F79Cu) )
        v46 = sub_401FAA(v4[2], v4 + 3, 23);
      else
        v46 = 0;
      v52 = Str;
      v50 = 7;
      goto LABEL_158;
    case 120:
      if ( !Str )
        return;
      v56 = 8;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 23);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 8;
      goto LABEL_158;
    case 121:
      if ( !Str )
        return;
      v56 = 7;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 23);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 9;
      goto LABEL_158;
    case 122:
      if ( !Str )
        return;
      v56 = 6;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 23);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 10;
      goto LABEL_158;
    case 124:
      if ( !Str )
        return;
      v56 = 5;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 22);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 3;
      goto LABEL_158;
    case 125:
      if ( !Str )
        return;
      v56 = 4;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 22);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 4;
      goto LABEL_158;
    case 126:
      if ( !Str )
        return;
      v56 = 3;
      if ( operator new(0x6F79Cu) )
      {
        v46 = sub_401FAA(v4[2], v4 + 3, 22);
        v52 = Str;
      }
      else
      {
        v52 = Str;
        v46 = 0;
      }
      v50 = 5;
      goto LABEL_158;
    case 127:
      if ( Str )
      {
        v56 = 2;
        if ( operator new(0x6F79Cu) )
        {
          v46 = sub_401FAA(v4[2], v4 + 3, 22);
          v52 = Str;
        }
        else
        {
          v52 = Str;
          v46 = 0;
        }
        v50 = 6;
LABEL_158:
        *((_DWORD *)dword_563908 + 1535) = v46;
        v47 = *(void (__stdcall **)(signed int, char *))(*(_DWORD *)dword_56391C + 56);
        v56 = -1;
        v47(v50, v52);
LABEL_159:
        if ( v4 )
          (*(void (__thiscall **)(_DWORD *, signed int))(*v4 + 4))(v4, 1);
      }
      break;
    default:
      return;
  }
}
// 401FAA: using guessed type _DWORD __stdcall sub_401FAA(_DWORD, _DWORD, _DWORD);
// 4023AB: using guessed type int __thiscall sub_4023AB(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004545A0) --------------------------------------------------------
_DWORD *__thiscall sub_4545A0(_DWORD *this, char *a2, int a3, _DWORD *a4)
{
  char *v4; // eax
  _DWORD *v5; // esi
  char *v6; // edi
  int v7; // edx
  char v8; // cl
  int v9; // edx

  v4 = a2;
  v5 = this;
  v6 = (char *)(this + 2);
  this[1] = &InputTarget::`vftable';
  v7 = (char *)(this + 2) - a2;
  *this = &off_51589C;
  this[1] = &InteriorMenu::`vftable';
  do
  {
    v8 = *v4;
    v4[v7] = *v4;
    ++v4;
  }
  while ( v8 );
  v5[2735] = a3;
  v5[2736] = *a4;
  v5[2737] = a4[1];
  v5[2738] = a4[2];
  v5[2739] = a4[3];
  v5[2734] = 0;
  v5[2740] = -1;
  v5[2741] = 0;
  v5[2742] = 0;
  v5[2743] = 0;
  v5[2744] = sub_49AD40(*((_DWORD **)dword_563908 + *((signed __int16 *)dword_563908 + 15368) + 1516), v6);
  v5[2742] = *((_DWORD *)dword_563908 + *((signed __int16 *)dword_563908 + 15364) + 1516);
  v9 = *((_DWORD *)dword_563908 + 4 * *((signed __int16 *)dword_563908 + 15372) + 523);
  v5[2745] = 0;
  v5[2746] = 0;
  v5[2747] = 0;
  v5[2748] = 0;
  v5[2743] = v9;
  return v5;
}
// 5111DC: using guessed type void *InputTarget::`vftable';
// 51586C: using guessed type void *InteriorMenu::`vftable';
// 51589C: using guessed type int (__stdcall *off_51589C)(int, int);

//----- (00454790) --------------------------------------------------------
int __thiscall sub_454790(_DWORD *this, _DWORD *a2)
{
  int v2; // ebx
  _DWORD *v3; // esi
  _DWORD *v4; // edi
  void *v5; // ebp
  int result; // eax
  int v7; // ST08_4
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // ecx
  int v16; // eax
  int v17; // ST08_4
  int v18; // eax
  int v19; // eax
  int v20; // ebp
  signed int v21; // edi
  int v22; // ecx
  int v23; // eax
  int v24; // ecx
  int v25; // eax
  int v26; // ecx
  int v27; // eax
  int v28; // ecx
  int v29; // ecx
  int v30; // eax
  int v31; // ecx
  int v32; // eax
  char *v33; // eax
  bool v34; // zf
  bool v35; // sf
  signed int v36; // ebp
  int v37; // edi
  __int16 v38; // cx
  int v39; // ecx
  int v40; // eax
  int v41; // ecx
  int v42; // ecx
  int v43; // ecx
  int v44; // ST0C_4
  char *v45; // eax
  int v46; // ST0C_4
  int v47; // eax
  int v48; // ecx
  int v49; // ST0C_4
  char *v50; // eax
  int v51; // ST0C_4
  int v52; // eax
  int v53; // ecx
  int v54; // eax
  signed int v55; // edi
  int v56; // eax
  char *v57; // eax
  int v58; // ecx
  int v59; // eax
  signed int v60; // edi
  int v61; // eax
  char *v62; // eax
  int v63; // ecx
  int v64; // eax
  int v65; // edi
  signed int v66; // ebp
  int v67; // eax
  char *v68; // eax
  int v69; // ecx
  int v70; // eax
  int v71; // edi
  signed int v72; // ebp
  char *v73; // eax
  int v74; // eax
  char *v75; // eax
  int v76; // ecx
  int v77; // eax
  char *v78; // eax
  signed int v79; // ebp
  int v80; // edi
  __int16 v81; // cx
  int v82; // ecx
  int v83; // eax
  int v84; // ecx
  signed int v85; // ebx
  signed int i; // ebp
  int v87; // ecx
  const char *v88; // eax
  const char *v89; // edi
  int v90; // ecx
  int v91; // eax
  int v92; // ecx
  int v93; // ST08_4
  int v94; // eax
  int v95; // eax
  int v96; // eax
  int v97; // ecx
  int v98; // eax
  int v99; // ecx
  int v100; // eax
  int v101; // ecx
  int v102; // ecx
  int v103; // ecx
  int v104; // ecx
  int v105; // ecx
  int v106; // ecx
  int v107; // eax
  int v108; // ecx
  int v109; // edx
  int v110; // ecx
  int v111; // ST08_4
  int v112; // eax
  int v113; // eax
  int v114; // eax
  int v115; // ecx
  int v116; // eax
  int v117; // ecx
  int v118; // eax
  int v119; // ecx
  int v120; // eax
  int v121; // ecx
  int v122; // eax
  int v123; // ecx
  int v124; // eax
  int v125; // ecx
  int v126; // eax
  int v127; // ecx
  int v128; // eax
  int v129; // ecx
  int v130; // eax
  int v131; // ecx
  int v132; // eax
  int v133; // ecx
  int v134; // eax
  int v135; // ecx
  int v136; // eax
  int v137; // ecx
  int v138; // eax
  int v139; // ecx
  int v140; // eax
  int v141; // ecx
  int v142; // eax
  int v143; // ecx
  int v144; // ecx
  int v145; // eax
  int v146; // ecx
  int v147; // ecx
  int v148; // eax
  int v149; // ecx
  int v150; // ecx
  int v151; // ecx
  int v152; // ecx
  int v153; // ecx
  int v154; // ecx
  int v155; // ecx
  int v156; // ecx
  int v157; // ecx
  int v158; // eax
  int v159; // ecx
  int v160; // ecx
  int v161; // ecx
  int v162; // ecx
  int v163; // eax
  int v164; // ecx
  int v165; // ecx
  int v166; // ST08_4
  int v167; // eax
  int v168; // eax
  int v169; // eax
  int v170; // ecx
  int v171; // eax
  int v172; // ecx
  int v173; // eax
  int v174; // ecx
  int v175; // ecx
  int v176; // ecx
  int v177; // ecx
  int v178; // ecx
  int v179; // eax
  int v180; // ST0C_4
  int v181; // eax
  int v182; // ecx
  int v183; // ST0C_4
  char *v184; // eax
  int v185; // ST0C_4
  int v186; // eax
  int v187; // ecx
  int v188; // ST0C_4
  char *v189; // eax
  int v190; // ST0C_4
  int v191; // eax
  int v192; // ecx
  int v193; // ST0C_4
  char *v194; // eax
  int v195; // ST0C_4
  int v196; // eax
  int v197; // ecx
  int v198; // eax
  int v199; // ST0C_4
  char *v200; // eax
  int v201; // ST0C_4
  int v202; // eax
  int v203; // ecx
  int v204; // ST0C_4
  char *v205; // eax
  int v206; // ST0C_4
  int v207; // eax
  int v208; // ecx
  int v209; // ST0C_4
  char *v210; // eax
  int v211; // ST0C_4
  int v212; // eax
  int v213; // ecx
  int v214; // ST0C_4
  char *v215; // eax
  int v216; // ST0C_4
  int v217; // eax
  int v218; // ecx
  int v219; // ST0C_4
  char *v220; // eax
  int v221; // ST0C_4
  int v222; // eax
  int v223; // ecx
  int v224; // ST0C_4
  char *v225; // eax
  int v226; // ST0C_4
  int v227; // eax
  int v228; // ecx
  int v229; // ST0C_4
  char *v230; // eax
  int v231; // ST0C_4
  int v232; // eax
  int v233; // ecx
  int v234; // ST0C_4
  char *v235; // eax
  int v236; // ST0C_4
  int v237; // eax
  int v238; // ecx
  int v239; // ST0C_4
  char *v240; // eax
  int v241; // ST0C_4
  int v242; // eax
  int v243; // ecx
  int v244; // ST0C_4
  char *v245; // eax
  int v246; // ST0C_4
  int v247; // eax
  int v248; // ecx
  int v249; // ST0C_4
  char *v250; // eax
  int v251; // ST0C_4
  int v252; // eax
  int v253; // ecx
  int v254; // ST0C_4
  char *v255; // eax
  int v256; // ST0C_4
  int v257; // eax
  int v258; // ecx
  int v259; // ST0C_4
  char *v260; // eax
  int v261; // ST0C_4
  int v262; // eax
  int v263; // ecx
  int v264; // ST0C_4
  char *v265; // eax
  int v266; // ST0C_4
  int v267; // eax
  int v268; // ecx
  int v269; // ST0C_4
  char *v270; // eax
  int v271; // ST0C_4
  int v272; // eax
  int v273; // ecx
  unsigned int v274; // edx
  int v275; // ST0C_4
  int v276; // eax
  int v277; // ecx
  int v278; // eax
  int v279; // ST0C_4
  char *v280; // eax
  int v281; // ST0C_4
  int v282; // eax
  int v283; // ecx
  int v284; // ST0C_4
  int v285; // eax
  int v286; // ecx
  int v287; // ST0C_4
  int v288; // eax
  int v289; // ecx
  unsigned int v290; // edx
  int v291; // ST0C_4
  int v292; // eax
  int v293; // ecx
  int v294; // ST0C_4
  int v295; // eax
  int v296; // ecx
  int v297; // ST0C_4
  char *v298; // eax
  int v299; // ST0C_4
  int v300; // eax
  int v301; // ecx
  int v302; // ST0C_4
  int v303; // eax
  int v304; // ecx
  int v305; // ST0C_4
  char *v306; // eax
  int v307; // ST0C_4
  int v308; // eax
  int v309; // ecx
  int v310; // ST08_4
  int v311; // eax
  int v312; // eax
  int v313; // ST0C_4
  char *v314; // eax
  int v315; // ST0C_4
  int v316; // eax
  int v317; // ecx
  int v318; // ST0C_4
  char *v319; // eax
  int v320; // ST0C_4
  int v321; // eax
  int v322; // ecx
  int v323; // ST0C_4
  char *v324; // eax
  int v325; // ST0C_4
  int v326; // eax
  int v327; // ecx
  int v328; // ST0C_4
  char *v329; // eax
  int v330; // ST0C_4
  int v331; // eax
  int v332; // ecx
  int v333; // ST0C_4
  char *v334; // eax
  int v335; // ST0C_4
  int v336; // eax
  int v337; // ecx
  int v338; // ST0C_4
  char *v339; // eax
  int v340; // ST0C_4
  int v341; // eax
  int v342; // ecx
  int v343; // ST0C_4
  char *v344; // eax
  int v345; // ST0C_4
  int v346; // eax
  int v347; // ecx
  int v348; // ST0C_4
  char *v349; // eax
  int v350; // ST0C_4
  int v351; // eax
  int v352; // ecx
  int v353; // ST08_4
  int v354; // eax
  int v355; // eax
  int v356; // ST0C_4
  char *v357; // eax
  int v358; // ST0C_4
  int v359; // eax
  int v360; // ecx
  int v361; // ST0C_4
  char *v362; // eax
  int v363; // ST0C_4
  int v364; // eax
  int v365; // ecx
  int v366; // ST0C_4
  char *v367; // eax
  int v368; // ST0C_4
  int v369; // eax
  int v370; // ecx
  int v371; // ST0C_4
  char *v372; // eax
  int v373; // ST0C_4
  int v374; // eax
  int v375; // ecx
  int v376; // ST0C_4
  char *v377; // eax
  int v378; // ST0C_4
  int v379; // eax
  int v380; // ecx
  int v381; // ST0C_4
  char *v382; // eax
  int v383; // ST0C_4
  int v384; // eax
  int v385; // ecx
  int v386; // ST0C_4
  char *v387; // eax
  int v388; // ST0C_4
  int v389; // eax
  int v390; // ecx
  int v391; // ST0C_4
  char *v392; // eax
  int v393; // ST0C_4
  int v394; // eax
  int v395; // ecx
  int v396; // ST0C_4
  char *v397; // eax
  int v398; // ST0C_4
  int v399; // eax
  int v400; // ecx
  int v401; // ST0C_4
  char *v402; // eax
  int v403; // ST0C_4
  int v404; // eax
  int v405; // ecx
  int v406; // ST0C_4
  char *v407; // eax
  int v408; // ST0C_4
  int v409; // eax
  int v410; // ecx
  int v411; // ST0C_4
  char *v412; // eax
  int v413; // ST0C_4
  int v414; // eax
  int v415; // ecx
  int v416; // ST0C_4
  char *v417; // eax
  int v418; // ST0C_4
  int v419; // eax
  int v420; // ecx
  int v421; // ST0C_4
  char *v422; // eax
  int v423; // ST0C_4
  int v424; // eax
  int v425; // ecx
  int v426; // ST0C_4
  char *v427; // eax
  int v428; // ST0C_4
  int v429; // eax
  int v430; // ecx
  int v431; // ST0C_4
  char *v432; // eax
  int v433; // ST0C_4
  int v434; // eax
  int v435; // ecx
  int v436; // ST0C_4
  char *v437; // eax
  int v438; // ST0C_4
  int v439; // eax
  int v440; // ecx
  int v441; // ST08_4
  int v442; // eax
  int v443; // eax
  int v444; // ebp
  signed int v445; // edi
  int v446; // ecx
  int v447; // ST08_4
  int v448; // eax
  int v449; // eax
  char *v450; // eax
  int v451; // ebp
  signed int v452; // edi
  int v453; // ecx
  char *v454; // eax
  char *v455; // edx
  char v456; // cl
  signed int v457; // eax
  int v458; // ecx
  int v459; // ecx
  signed int v460; // [esp-8h] [ebp-A70h]
  signed int v461; // [esp-8h] [ebp-A70h]
  signed int v462; // [esp-8h] [ebp-A70h]
  BOOL v463; // [esp-4h] [ebp-A6Ch]
  signed int v464; // [esp-4h] [ebp-A6Ch]
  signed int v465; // [esp-4h] [ebp-A6Ch]
  _BYTE *v466; // [esp+14h] [ebp-A54h]
  int v467[512]; // [esp+18h] [ebp-A50h]
  char Dest; // [esp+818h] [ebp-250h]
  char v469; // [esp+918h] [ebp-150h]
  char v470; // [esp+958h] [ebp-110h]
  int v471; // [esp+A64h] [ebp-4h]

  v2 = 0;
  v3 = this;
  if ( a2 )
  {
    this[3] = *a2;
    this[4] = a2[1];
    this[5] = a2[2];
    this[6] = a2[3];
  }
  v4 = (_DWORD *)this[8];
  if ( v4 )
  {
    v5 = (void *)v4[2748];
    *v4 = &off_51589C;
    v4[1] = &InteriorMenu::`vftable';
    if ( v5 )
    {
      sub_402040(v5);
      j__free(v5);
      v4[2748] = 0;
    }
    j__free(v4);
    v3[8] = 0;
  }
  result = v3[7];
  switch ( result )
  {
    case 0:
      v466 = operator new(0x2AF4u);
      v471 = 0;
      if ( v466 )
      {
        v7 = v3[2];
        v8 = sub_402617(0x24u);
        v9 = sub_4016A9(v8, v7, v3 + 3);
      }
      else
      {
        v9 = 0;
      }
      v471 = -1;
      v3[8] = v9;
      sub_401A50("Charts...", 4, 1);
      v10 = sub_402617(0x79u);
      v11 = v3[8];
      sub_401A50(v10, 49, 1);
      v12 = sub_402617(0x2Au);
      v13 = v3[8];
      sub_401A50(v12, 7, 1);
      v14 = sub_402617(0x78u);
      v15 = v3[8];
      sub_401A50(v14, 51, 1);
      v460 = 1;
      v16 = sub_402617(0x27u);
      goto LABEL_184;
    case 1:
      v466 = operator new(0x2AF4u);
      v471 = 22;
      if ( v466 )
      {
        v441 = v3[2];
        v442 = sub_402617(0x7Fu);
        v443 = sub_4016A9(v442, v441, v3 + 3);
      }
      else
      {
        v443 = 0;
      }
      v444 = 0;
      v471 = -1;
      v3[8] = v443;
      v445 = 0;
      do
      {
        v466 = (char *)dword_563908 + v445 + 108234;
        if ( !*v466 )
          break;
        sub_48CEB0(&v466, &Dest);
        sub_48CEB0(&v466, &v470);
        if ( !Dest )
          break;
        v446 = v3[8];
        sub_401A50(&Dest, v444 + 1000, 1);
        v445 += 200;
        ++v444;
      }
      while ( v445 < 6000 );
      v460 = 51;
      goto LABEL_183;
    case 2:
      v466 = operator new(0x2AF4u);
      v471 = 23;
      if ( v466 )
      {
        v447 = v3[2];
        v448 = sub_402617(0x65u);
        v449 = sub_4016A9(v448, v447, v3 + 3);
      }
      else
      {
        v449 = 0;
      }
      v3[8] = v449;
      v450 = (char *)dword_563918;
      v451 = 0;
      v34 = *((_DWORD *)dword_563918 + 17) == 0;
      v35 = *((_DWORD *)dword_563918 + 17) < 0;
      v471 = -1;
      if ( !v35 && !v34 )
      {
        v452 = 72;
        do
        {
          v453 = *(_DWORD *)&v450[v452];
          if ( v453 )
          {
            sprintf(&v469, "%d x %d", v453, *(_DWORD *)&v450[v452 + 128]);
          }
          else
          {
            v454 = (char *)sub_402617(0x2Cu);
            v455 = &v469;
            do
            {
              v456 = *v454;
              *v455++ = *v454++;
            }
            while ( v456 );
          }
          v457 = 1;
          if ( *((_DWORD *)dword_563918 + 2211) == *(_DWORD *)((char *)dword_563918 + v452)
            && *((_DWORD *)dword_563918 + 2212) == *(_DWORD *)((char *)dword_563918 + v452 + 128) )
          {
            v457 = 0;
          }
          v458 = v3[8];
          sub_401A50(&v469, v451 + 2000, v457);
          v450 = (char *)dword_563918;
          ++v451;
          v452 += 4;
        }
        while ( v451 < *((_DWORD *)dword_563918 + 17) );
      }
      goto LABEL_182;
    case 3:
      v466 = operator new(0x2AF4u);
      v471 = 16;
      if ( v466 )
      {
        v166 = v3[2];
        v167 = sub_402617(0x66u);
        v168 = sub_4016A9(v167, v166, v3 + 3);
      }
      else
      {
        v168 = 0;
      }
      v471 = -1;
      v3[8] = v168;
      v169 = sub_402617(0x64u);
      v170 = v3[8];
      sub_401A50(v169, 28, 1);
      v171 = sub_402617(0xA2u);
      v172 = v3[8];
      sub_401A50(v171, 29, 1);
      v173 = sub_402617(0x2Bu);
      v174 = v3[8];
      sub_401A50(v173, 10, 1);
      v175 = v3[8];
      sub_401A50("Graphic Options...", 30, 1);
      v176 = v3[8];
      sub_401A50("Sound Options...", 31, 1);
      v177 = v3[8];
      sub_401A50("Keyboard Config...", 110, 1);
      v178 = v3[8];
      sub_401A50("Misc. Options...", 32, 1);
      v460 = 9;
      goto LABEL_183;
    case 4:
      v466 = operator new(0x2AF4u);
      v471 = 20;
      if ( v466 )
      {
        v310 = v3[2];
        v311 = sub_402617(0x59u);
        v312 = sub_4016A9(v311, v310, v3 + 3);
      }
      else
      {
        v312 = 0;
      }
      v3[8] = v312;
      v313 = *((_DWORD *)dword_563918 + 2342);
      v471 = -1;
      v314 = (char *)sub_402617(0x5Au);
      v315 = sub_40263F(v314, v313);
      v316 = sub_402617(0x62u);
      sprintf(&Dest, "%s\t%s", v316, v315);
      v317 = v3[8];
      sub_401A50(&Dest, 40, 1);
      v318 = *((_DWORD *)dword_563918 + 2337);
      v319 = (char *)sub_402617(0x5Au);
      v320 = sub_40263F(v319, v318);
      v321 = sub_402617(0x5Du);
      sprintf(&Dest, "%s\t%s", v321, v320);
      v322 = v3[8];
      sub_401A50(&Dest, 35, 1);
      v323 = *((_DWORD *)dword_563918 + 2338);
      v324 = (char *)sub_402617(0x5Au);
      v325 = sub_40263F(v324, v323);
      v326 = sub_402617(0x5Eu);
      sprintf(&Dest, "%s\t%s", v326, v325);
      v327 = v3[8];
      sub_401A50(&Dest, 36, 1);
      v328 = *((_DWORD *)dword_563918 + 2339);
      v329 = (char *)sub_402617(0x5Au);
      v330 = sub_40263F(v329, v328);
      v331 = sub_402617(0x5Fu);
      sprintf(&Dest, "%s\t%s", v331, v330);
      v332 = v3[8];
      sub_401A50(&Dest, 37, 1);
      v333 = *((_DWORD *)dword_563918 + 2335);
      v334 = (char *)sub_402617(0x5Au);
      v335 = sub_40263F(v334, v333);
      v336 = sub_402617(0x5Bu);
      sprintf(&Dest, "%s\t%s", v336, v335);
      v337 = v3[8];
      sub_401A50(&Dest, 33, 1);
      v338 = *((_DWORD *)dword_563918 + 2340);
      v339 = (char *)sub_402617(0x5Au);
      v340 = sub_40263F(v339, v338);
      v341 = sub_402617(0x60u);
      sprintf(&Dest, "%s\t%s", v341, v340);
      v342 = v3[8];
      sub_401A50(&Dest, 38, 1);
      v343 = *((_DWORD *)dword_563918 + 2336);
      v344 = (char *)sub_402617(0x5Au);
      v345 = sub_40263F(v344, v343);
      v346 = sub_402617(0x5Cu);
      sprintf(&Dest, "%s\t%s", v346, v345);
      v347 = v3[8];
      sub_401A50(&Dest, 34, 1);
      v348 = *((_DWORD *)dword_563918 + 2341);
      v349 = (char *)sub_402617(0x5Au);
      v350 = sub_40263F(v349, v348);
      v351 = sub_402617(0x61u);
      sprintf(&Dest, "%s\t%s", v351, v350);
      v352 = v3[8];
      sub_401A50(&Dest, 39, 1);
      goto LABEL_182;
    case 5:
      v466 = operator new(0x2AF4u);
      v471 = 1;
      if ( v466 )
      {
        v17 = v3[2];
        v18 = sub_402617(0x7Cu);
        v19 = sub_4016A9(v18, v17, v3 + 3);
      }
      else
      {
        v19 = 0;
      }
      v471 = -1;
      v3[8] = v19;
      sub_401A50("Call for Help", 117, 1);
      v20 = 0;
      v21 = 0;
      do
      {
        v466 = (char *)dword_563908 + v21 + 114234;
        if ( !*v466 )
          break;
        sub_48CEB0(&v466, &Dest);
        sub_48CEB0(&v466, &v470);
        if ( !Dest )
          break;
        v22 = v3[8];
        sub_401A50(&Dest, v20 + 3000, 1);
        v21 += 128;
        ++v20;
      }
      while ( v21 < 3840 );
      v23 = sub_402617(0x75u);
      v24 = v3[8];
      sub_401A50(v23, 48, 1);
      v25 = sub_402617(0x76u);
      v26 = v3[8];
      sub_401A50(v25, 50, 1);
      v27 = sub_402617(0x7Du);
      v28 = v3[8];
      sub_401A50(v27, 52, 1);
      v29 = v3[8];
      sub_401A50("Tip of the Day", 90, 1);
      v463 = 1;
      v461 = 8;
      v30 = sub_402617(0x7Eu);
      goto LABEL_20;
    case 6:
      v466 = operator new(0x2AF4u);
      v471 = 10;
      if ( v466 )
      {
        v93 = v3[2];
        v94 = sub_402617(0x7Bu);
        v95 = sub_4016A9(v94, v93, v3 + 3);
      }
      else
      {
        v95 = 0;
      }
      v3[8] = v95;
      v34 = *((_DWORD *)dword_563908 + 7730) == 0;
      v471 = -1;
      if ( !v34 )
      {
        if ( *((_DWORD *)dword_563908 + 6945) )
        {
          sub_401A50("Class...", 3, 1);
        }
        else
        {
          v96 = sub_402617(0x26u);
          v97 = v3[8];
          sub_401A50(v96, 3, 1);
        }
      }
      if ( *((_DWORD *)dword_563908 + 7735) )
      {
        v98 = sub_402617(0x25u);
        v99 = v3[8];
        sub_401A50(v98, 2, 1);
      }
      v100 = sub_402617(0x29u);
      v101 = v3[8];
      sub_401A50(v100, 5, 1);
      v102 = v3[8];
      sub_401A50("Edit Banner...", 103, 1);
      v103 = v3[8];
      sub_401A50("Team...", 6, 1);
      v104 = v3[8];
      sub_401A50("Change Arena...", 84, 1);
      v105 = v3[8];
      sub_401A50("Create Arena...", 85, 1);
      v106 = v3[8];
      sub_401A50("Change Zones...", 93, 1);
      v107 = sub_402617(0x41u);
      v108 = v3[8];
      sub_401A50(v107, 11, 1);
      if ( *((_DWORD *)dword_563908 + 6898) )
      {
        if ( (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4 )
        {
          v463 = abs(sub_401D39(v110, v109) - *((_DWORD *)dword_563908 + 6931)) > 250;
          v461 = 27;
          v30 = sub_402617(0x4Eu);
        }
        else
        {
          v463 = abs(sub_401D39(v110, v109) - *((_DWORD *)dword_563908 + 6931)) > 250;
          v461 = 27;
          v30 = sub_402617(0x4Du);
        }
LABEL_20:
        v31 = v3[8];
        sub_401A50(v30, v461, v463);
      }
      v460 = 9;
      goto LABEL_183;
    case 7:
      v466 = operator new(0x2AF4u);
      v471 = 11;
      if ( v466 )
      {
        v111 = v3[2];
        v112 = sub_402617(0x92u);
        v113 = sub_4016A9(v112, v111, v3 + 3);
      }
      else
      {
        v113 = 0;
      }
      v471 = -1;
      v3[8] = v113;
      v114 = sub_402617(0xE3u);
      v115 = v3[8];
      sub_401A50(v114, -1, 0);
      v116 = sub_402617(0x93u);
      v117 = v3[8];
      sub_401A50(v116, 56, 1);
      v118 = sub_402617(0xD9u);
      v119 = v3[8];
      sub_401A50(v118, 60, 1);
      v120 = sub_402617(0xDAu);
      v121 = v3[8];
      sub_401A50(v120, 61, 1);
      v122 = sub_402617(0x9Cu);
      v123 = v3[8];
      sub_401A50(v122, 67, 1);
      v124 = sub_402617(0x9Fu);
      v125 = v3[8];
      sub_401A50(v124, 68, 1);
      v126 = sub_402617(0xE4u);
      v127 = v3[8];
      sub_401A50(v126, -2, 0);
      v128 = sub_402617(0x97u);
      v129 = v3[8];
      sub_401A50(v128, 59, 1);
      v130 = sub_402617(0x96u);
      v131 = v3[8];
      sub_401A50(v130, 55, 1);
      v132 = sub_402617(0xDBu);
      v133 = v3[8];
      sub_401A50(v132, 62, 1);
      v134 = sub_402617(0xE5u);
      v135 = v3[8];
      sub_401A50(v134, -3, 0);
      v136 = sub_402617(0xE2u);
      v137 = v3[8];
      sub_401A50(v136, 65, 1);
      v138 = sub_402617(0xDEu);
      v139 = v3[8];
      sub_401A50(v138, 63, 1);
      v140 = sub_402617(0xDFu);
      v141 = v3[8];
      sub_401A50(v140, 64, 1);
      v142 = sub_402617(0x95u);
      v143 = v3[8];
      sub_401A50(v142, 58, 1);
      v144 = v3[8];
      sub_401A50(&Source, -4, 0);
      v460 = 49;
      goto LABEL_183;
    case 8:
      v466 = operator new(0x2AF4u);
      v471 = 21;
      if ( v466 )
      {
        v353 = v3[2];
        v354 = sub_402617(0xA1u);
        v355 = sub_4016A9(v354, v353, v3 + 3);
      }
      else
      {
        v355 = 0;
      }
      v3[8] = v355;
      v356 = *((_DWORD *)dword_563918 + 2322);
      v471 = -1;
      v357 = (char *)sub_402617(0x42u);
      v358 = sub_40263F(v357, v356);
      v359 = sub_402617(0xD5u);
      sprintf(&Dest, "%s\t%s", v359, v358);
      v360 = v3[8];
      sub_401A50(&Dest, 83, 1);
      v361 = *((_DWORD *)dword_563918 + 2320);
      v362 = (char *)sub_402617(0x42u);
      v363 = sub_40263F(v362, v361);
      v364 = sub_402617(0xA3u);
      sprintf(&Dest, "%s\t%s", v364, v363);
      v365 = v3[8];
      sub_401A50(&Dest, 71, 1);
      v366 = *((_DWORD *)dword_563918 + 2321);
      v367 = (char *)sub_402617(0x42u);
      v368 = sub_40263F(v367, v366);
      v369 = sub_402617(0xA4u);
      sprintf(&Dest, "%s\t%s", v369, v368);
      v370 = v3[8];
      sub_401A50(&Dest, 72, 1);
      v371 = *((_DWORD *)dword_563918 + 2265);
      v372 = (char *)sub_402617(0xAFu);
      v373 = sub_40263F(v372, v371);
      v374 = sub_402617(0xAEu);
      sprintf(&Dest, "%s\t%s", v374, v373);
      v375 = v3[8];
      sub_401A50(&Dest, 89, 1);
      v376 = *((_DWORD *)dword_563918 + 2271);
      v377 = (char *)sub_402617(0x42u);
      v378 = sub_40263F(v377, v376);
      v379 = sub_402617(0xB9u);
      sprintf(&Dest, "%s\t%s", v379, v378);
      v380 = v3[8];
      sub_401A50(&Dest, 82, 1);
      v381 = *((_DWORD *)dword_563918 + 2224);
      v382 = (char *)sub_402617(0x42u);
      v383 = sub_40263F(v382, v381);
      v384 = sub_402617(0xC1u);
      sprintf(&Dest, "%s\t%s", v384, v383);
      v385 = v3[8];
      sub_401A50(&Dest, 104, 1);
      v386 = *((_DWORD *)dword_563918 + 2232);
      v387 = (char *)sub_402617(0x42u);
      v388 = sub_40263F(v387, v386);
      v389 = sub_402617(0xC2u);
      sprintf(&Dest, "%s\t%s", v389, v388);
      v390 = v3[8];
      sub_401A50(&Dest, 105, 1);
      v391 = *((_DWORD *)dword_563918 + 2275);
      v392 = (char *)sub_402617(0x42u);
      v393 = sub_40263F(v392, v391);
      v394 = sub_402617(0xCEu);
      sprintf(&Dest, "%s\t%s", v394, v393);
      v395 = v3[8];
      sub_401A50(&Dest, 106, 1);
      v396 = *((_DWORD *)dword_563918 + 2311);
      v397 = (char *)sub_402617(0x42u);
      v398 = sub_40263F(v397, v396);
      v399 = sub_402617(0xA5u);
      sprintf(&Dest, "%s\t%s", v399, v398);
      v400 = v3[8];
      sub_401A50(&Dest, 73, 1);
      v401 = *((_DWORD *)dword_563918 + 2319);
      v402 = (char *)sub_402617(0x42u);
      v403 = sub_40263F(v402, v401);
      v404 = sub_402617(0xBCu);
      sprintf(&Dest, "%s\t%s", v404, v403);
      v405 = v3[8];
      sub_401A50(&Dest, 74, 1);
      v406 = *((_DWORD *)dword_563918 + 2313);
      v407 = (char *)sub_402617(0x42u);
      v408 = sub_40263F(v407, v406);
      v409 = sub_402617(0xA6u);
      sprintf(&Dest, "%s\t%s", v409, v408);
      v410 = v3[8];
      sub_401A50(&Dest, 75, 1);
      v411 = *((_DWORD *)dword_563918 + 2312);
      v412 = (char *)sub_402617(0x42u);
      v413 = sub_40263F(v412, v411);
      v414 = sub_402617(0xA7u);
      sprintf(&Dest, "%s\t%s", v414, v413);
      v415 = v3[8];
      sub_401A50(&Dest, 76, 1);
      v416 = *((_DWORD *)dword_563918 + 2314);
      v417 = (char *)sub_402617(0x42u);
      v418 = sub_40263F(v417, v416);
      v419 = sub_402617(0xA8u);
      sprintf(&Dest, "%s\t%s", v419, v418);
      v420 = v3[8];
      sub_401A50(&Dest, 78, 1);
      v421 = *((_DWORD *)dword_563918 + 2315);
      v422 = (char *)sub_402617(0x42u);
      v423 = sub_40263F(v422, v421);
      v424 = sub_402617(0xA9u);
      sprintf(&Dest, "%s\t%s", v424, v423);
      v425 = v3[8];
      sub_401A50(&Dest, 79, 1);
      v426 = *((_DWORD *)dword_563918 + 2316);
      v427 = (char *)sub_402617(0x42u);
      v428 = sub_40263F(v427, v426);
      v429 = sub_402617(0xACu);
      sprintf(&Dest, "%s\t%s", v429, v428);
      v430 = v3[8];
      sub_401A50(&Dest, 77, 1);
      v431 = *((_DWORD *)dword_563918 + 2318);
      v432 = (char *)sub_402617(0x42u);
      v433 = sub_40263F(v432, v431);
      v434 = sub_402617(0xAAu);
      sprintf(&Dest, "%s\t%s", v434, v433);
      v435 = v3[8];
      sub_401A50(&Dest, 81, 1);
      v436 = *((_DWORD *)dword_563918 + 2317);
      v437 = (char *)sub_402617(0x42u);
      v438 = sub_40263F(v437, v436);
      v439 = sub_402617(0xABu);
      sprintf(&Dest, "%s\t%s", v439, v438);
      v440 = v3[8];
      sub_401A50(&Dest, 80, 1);
      goto LABEL_182;
    case 9:
      v466 = operator new(0x2AF4u);
      v471 = 2;
      if ( v466 )
        v32 = sub_4016A9("Select Arena", v3[2], v3 + 3);
      else
        v32 = 0;
      v3[8] = v32;
      v33 = (char *)dword_563908;
      v34 = *((_DWORD *)dword_563908 + 1498) == 0;
      v35 = *((_DWORD *)dword_563908 + 1498) < 0;
      v471 = -1;
      if ( !v35 && !v34 )
      {
        v36 = 4000;
        v37 = 0;
        do
        {
          v38 = *(_WORD *)&v33[v37 + 2525];
          if ( v38 >= 0 )
          {
            sprintf(&Dest, "%s\t%d", &v33[v37 + 2493], v38);
            v464 = 1;
          }
          else
          {
            sprintf(&Dest, "%s\t%d", &v33[v37 + 2493], -v38);
            v464 = 0;
          }
          v39 = v3[8];
          sub_401A50(&Dest, v36, v464);
          v33 = (char *)dword_563908;
          ++v36;
          v37 += 35;
        }
        while ( v36 - 4000 < *((_DWORD *)dword_563908 + 1498) );
      }
      v460 = 49;
      goto LABEL_183;
    case 10:
      v466 = operator new(0x2AF4u);
      v471 = 12;
      if ( v466 )
        v145 = sub_4016A9("Team Management", v3[2], v3 + 3);
      else
        v145 = 0;
      v471 = -1;
      v3[8] = v145;
      sub_401A50("Create Team...", 87, 1);
      v146 = v3[8];
      sub_401A50("Join Team...", 86, 1);
      v147 = v3[8];
      sub_401A50("Team Info", 88, 1);
      v460 = 49;
      goto LABEL_183;
    case 11:
      v466 = operator new(0x2AF4u);
      v471 = 18;
      if ( v466 )
        v198 = sub_4016A9("Graphic Options", v3[2], v3 + 3);
      else
        v198 = 0;
      v3[8] = v198;
      v199 = *((_DWORD *)dword_563918 + 2248);
      v471 = -1;
      v200 = (char *)sub_402617(0x42u);
      v201 = sub_40263F(v200, v199);
      v202 = sub_402617(0x56u);
      sprintf(&Dest, "%s\t%s", v202, v201);
      v203 = v3[8];
      sub_401A50(&Dest, 19, 1);
      v204 = *((_DWORD *)dword_563918 + 2239);
      v205 = (char *)sub_402617(0x49u);
      v206 = sub_40263F(v205, v204);
      v207 = sub_402617(0x47u);
      sprintf(&Dest, "%s\t%s", v207, v206);
      v208 = v3[8];
      sub_401A50(&Dest, 16, 1);
      v209 = *((_DWORD *)dword_563918 + 2240);
      v210 = (char *)sub_402617(0x42u);
      v211 = sub_40263F(v210, v209);
      v212 = sub_402617(0x48u);
      sprintf(&Dest, "%s\t%s", v212, v211);
      v213 = v3[8];
      sub_401A50(&Dest, 17, 1);
      v214 = *((_DWORD *)dword_563918 + 2253);
      v215 = (char *)sub_402617(0xADu);
      v216 = sub_40263F(v215, v214);
      v217 = sub_402617(0x73u);
      sprintf(&Dest, "%s\t%s", v217, v216);
      v218 = v3[8];
      sub_401A50(&Dest, 26, 1);
      v219 = *((_DWORD *)dword_563918 + 2266);
      v220 = (char *)sub_402617(0x42u);
      v221 = sub_40263F(v220, v219);
      v222 = sub_402617(0xB1u);
      sprintf(&Dest, "%s\t%s", v222, v221);
      v223 = v3[8];
      sub_401A50(&Dest, 22, 1);
      v224 = *((_DWORD *)dword_563918 + 2327);
      v225 = (char *)sub_402617(0x42u);
      v226 = sub_40263F(v225, v224);
      v227 = sub_402617(0xC9u);
      sprintf(&Dest, "%s\t%s", v227, v226);
      v228 = v3[8];
      sub_401A50(&Dest, 23, 1);
      v229 = *((_DWORD *)dword_563918 + 2276);
      v230 = (char *)sub_402617(0x42u);
      v231 = sub_40263F(v230, v229);
      v232 = sub_402617(0xD1u);
      sprintf(&Dest, "%s\t%s", v232, v231);
      v233 = v3[8];
      sub_401A50(&Dest, 108, 1);
      v234 = *((_DWORD *)dword_563918 + 2277);
      v235 = (char *)sub_402617(0x42u);
      v236 = sub_40263F(v235, v234);
      v237 = sub_402617(0xD0u);
      sprintf(&Dest, "%s\t%s", v237, v236);
      v238 = v3[8];
      sub_401A50(&Dest, 109, 1);
      v239 = *((_DWORD *)dword_563918 + 2255);
      v240 = (char *)sub_402617(0xCDu);
      v241 = sub_40263F(v240, v239);
      v242 = sub_402617(0xCCu);
      sprintf(&Dest, "%s\t%s", v242, v241);
      v243 = v3[8];
      sub_401A50(&Dest, 46, 1);
      v244 = *((_DWORD *)dword_563918 + 2274);
      v245 = (char *)sub_402617(0x42u);
      v246 = sub_40263F(v245, v244);
      v247 = sub_402617(0xCFu);
      sprintf(&Dest, "%s\t%s", v247, v246);
      v248 = v3[8];
      sub_401A50(&Dest, 107, 1);
      v249 = *((_DWORD *)dword_563918 + 2223);
      v250 = (char *)sub_402617(0x42u);
      v251 = sub_40263F(v250, v249);
      v252 = sub_402617(0xBEu);
      sprintf(&Dest, "%s\t%s", v252, v251);
      v253 = v3[8];
      sub_401A50(&Dest, 24, 1);
      v254 = *((_DWORD *)dword_563918 + 2334);
      v255 = (char *)sub_402617(0xC4u);
      v256 = sub_40263F(v255, v254);
      v257 = sub_402617(0xC3u);
      sprintf(&Dest, "%s\t%s", v257, v256);
      v258 = v3[8];
      sub_401A50(&Dest, 21, 1);
      v259 = *((_DWORD *)dword_563918 + 2254);
      v260 = (char *)sub_402617(0x42u);
      v261 = sub_40263F(v260, v259);
      v262 = sub_402617(0x80u);
      sprintf(&Dest, "%s\t%s", v262, v261);
      v263 = v3[8];
      sub_401A50(&Dest, 53, 1);
      v264 = *((_DWORD *)dword_563918 + 2257);
      v265 = (char *)sub_402617(0x42u);
      v266 = sub_40263F(v265, v264);
      v267 = sub_402617(0xBDu);
      sprintf(&Dest, "%s\t%s", v267, v266);
      v268 = v3[8];
      sub_401A50(&Dest, 54, 1);
      v269 = *((_DWORD *)dword_563918 + 2221);
      v270 = (char *)sub_402617(0x42u);
      v271 = sub_40263F(v270, v269);
      v272 = sub_402617(0x43u);
      sprintf(&Dest, "%s\t%s", v272, v271);
      v273 = v3[8];
      sub_401A50(&Dest, 20, 1);
      v274 = (signed int)((unsigned __int64)(1717986919i64 * *((signed int *)dword_563918 + 2270)) >> 32) >> 2;
      v275 = v274 + (v274 >> 31);
      v276 = sub_402617(0xB6u);
      sprintf(&Dest, "%s\t%d%%", v276, v275);
      v277 = v3[8];
      sub_401A50(&Dest, 91, 1);
      goto LABEL_182;
    case 12:
      v466 = operator new(0x2AF4u);
      v471 = 19;
      if ( v466 )
        v278 = sub_4016A9("Miscellaneous Options", v3[2], v3 + 3);
      else
        v278 = 0;
      v3[8] = v278;
      v279 = *((_DWORD *)dword_563918 + 2268);
      v471 = -1;
      v280 = (char *)sub_402617(0xB3u);
      v281 = sub_40263F(v280, v279);
      v282 = sub_402617(0xB5u);
      sprintf(&Dest, "%s\t%s", v282, v281);
      v283 = v3[8];
      sub_401A50(&Dest, 42, 1);
      v284 = *((_DWORD *)dword_563918 + 2249);
      v285 = sub_402617(0x44u);
      sprintf(&Dest, "%s\t%d", v285, v284);
      v286 = v3[8];
      sub_401A50(&Dest, 12, 1);
      v287 = *((_DWORD *)dword_563918 + 2250) / 10;
      v288 = sub_402617(0x45u);
      sprintf(&Dest, "%s\t%d%%", v288, v287);
      v289 = v3[8];
      sub_401A50(&Dest, 14, 1);
      v290 = (signed int)((unsigned __int64)(1717986919i64 * *((signed int *)dword_563918 + 2251)) >> 32) >> 2;
      v291 = v290 + (v290 >> 31);
      v292 = sub_402617(0xC8u);
      sprintf(&Dest, "%s\t%d%%", v292, v291);
      v293 = v3[8];
      sub_401A50(&Dest, 15, 1);
      v294 = 10 * *((_DWORD *)dword_563918 + 2252);
      v295 = sub_402617(0x46u);
      sprintf(&Dest, "%s\t%d ms", v295, v294);
      v296 = v3[8];
      sub_401A50(&Dest, 18, 1);
      v297 = *((_DWORD *)dword_563918 + 2328);
      v298 = (char *)sub_402617(0xCBu);
      v299 = sub_40263F(v298, v297);
      v300 = sub_402617(0xCAu);
      sprintf(&Dest, "%s\t%s", v300, v299);
      v301 = v3[8];
      sub_401A50(&Dest, 45, 1);
      v302 = *((signed __int16 *)dword_563918 + 4450);
      v303 = sub_402617(0xD6u);
      sprintf(&Dest, "%s\t%d", v303, v302);
      v304 = v3[8];
      sub_401A50(&Dest, 13, 1);
      v305 = *((_DWORD *)dword_563918 + 10772);
      v306 = (char *)sub_402617(0x42u);
      v307 = sub_40263F(v306, v305);
      v308 = sub_402617(0xD7u);
      sprintf(&Dest, "%s\t%s", v308, v307);
      v309 = v3[8];
      sub_401A50(&Dest, 128, 1);
      goto LABEL_182;
    case 13:
      v466 = operator new(0x2AF4u);
      v471 = 17;
      if ( v466 )
        v179 = sub_4016A9("Sound Options", v3[2], v3 + 3);
      else
        v179 = 0;
      v3[8] = v179;
      v180 = *((_DWORD *)dword_563918 + 2242);
      v471 = -1;
      v181 = sub_402617(0xB7u);
      sprintf(&Dest, "%s\t%d", v181, v180);
      v182 = v3[8];
      sub_401A50(&Dest, 92, 1);
      v183 = *((_DWORD *)dword_563918 + 2272);
      v184 = (char *)sub_402617(0xB3u);
      v185 = sub_40263F(v184, v183);
      v186 = sub_402617(0xBFu);
      sprintf(&Dest, "%s\t%s", v186, v185);
      v187 = v3[8];
      sub_401A50(&Dest, 69, 1);
      v188 = *((_DWORD *)dword_563918 + 2273);
      v189 = (char *)sub_402617(0xB3u);
      v190 = sub_40263F(v189, v188);
      v191 = sub_402617(0xC0u);
      sprintf(&Dest, "%s\t%s", v191, v190);
      v192 = v3[8];
      sub_401A50(&Dest, 70, 1);
      v193 = *((_DWORD *)dword_563918 + 2267);
      v194 = (char *)sub_402617(0xB3u);
      v195 = sub_40263F(v194, v193);
      v196 = sub_402617(0xB2u);
      sprintf(&Dest, "%s\t%s", v196, v195);
      v197 = v3[8];
      sub_401A50(&Dest, 25, 1);
      goto LABEL_182;
    case 14:
      v466 = operator new(0x2AF4u);
      v471 = 13;
      if ( v466 )
        v148 = sub_4016A9("Charts", v3[2], v3 + 3);
      else
        v148 = 0;
      v471 = -1;
      v3[8] = v148;
      sub_401A50("Score Online Players...", 94, 1);
      v149 = v3[8];
      sub_401A50("Score Current Session...", 98, 1);
      v150 = v3[8];
      sub_401A50("Score Current Game...", 96, 1);
      v151 = v3[8];
      sub_401A50("Score Previous Game...", 97, 1);
      v152 = v3[8];
      sub_401A50("Score Top 100...", 95, 1);
      v153 = v3[8];
      sub_401A50("Score History...", 118, 1);
      v154 = v3[8];
      sub_401A50("Players Profile Chart...", 100, 1);
      v155 = v3[8];
      sub_401A50("Lag Chart...", 99, 1);
      v156 = v3[8];
      sub_401A50("Chat Channel Chart...", 101, 1);
      v157 = v3[8];
      sub_401A50("Squad Online Chart...", 102, 1);
      v460 = 9;
      goto LABEL_183;
    case 15:
      v466 = operator new(0x2AF4u);
      v471 = 8;
      if ( v466 )
        v77 = sub_4016A9("Select Zone", v3[2], v3 + 3);
      else
        v77 = 0;
      v3[8] = v77;
      v78 = (char *)dword_563908;
      v34 = *((_DWORD *)dword_563908 + 1955) == 0;
      v35 = *((_DWORD *)dword_563908 + 1955) < 0;
      v471 = -1;
      if ( !v35 && !v34 )
      {
        v79 = 5000;
        v80 = 0;
        do
        {
          v81 = *(_WORD *)&v78[v80 + 6177];
          if ( v81 >= 0 )
          {
            sprintf(&Dest, "%s\t%d", &v78[v80 + 6145], v81);
            v465 = 1;
          }
          else
          {
            sprintf(&Dest, "%s\t%d", &v78[v80 + 6145], -v81);
            v465 = 0;
          }
          v82 = v3[8];
          sub_401A50(&Dest, v79, v465);
          v78 = (char *)dword_563908;
          ++v79;
          v80 += 67;
        }
        while ( v79 - 5000 < *((_DWORD *)dword_563908 + 1955) );
      }
      v460 = 49;
      goto LABEL_183;
    case 16:
      v466 = operator new(0x2AF4u);
      v471 = 9;
      if ( v466 )
        v83 = sub_4016A9("Select Team", v3[2], v3 + 3);
      else
        v83 = 0;
      v3[8] = v83;
      v84 = *((_DWORD *)dword_563908 + 1504);
      v471 = -1;
      v85 = sub_402842(v467);
      for ( i = 0; i < v85; ++i )
      {
        if ( i >= 20 )
          break;
        v87 = *((_DWORD *)dword_563908 + 1504);
        v88 = (const char *)sub_402108(v467[i]);
        v89 = v88;
        if ( v88 && _stricmp(v88, "spec") )
        {
          v90 = *((_DWORD *)dword_563908 + 1504);
          v91 = sub_4020B3(v467[i]);
          sprintf(&Dest, "%s\t%d", v89, v91);
          v92 = v3[8];
          sub_401A50(&Dest, v467[i] + 6000, *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) != v467[i]);
        }
      }
      v460 = 6;
      goto LABEL_183;
    case 17:
      v466 = operator new(0x2AF4u);
      v471 = 3;
      if ( v466 )
        v40 = sub_4016A9("Keystroke Settings", v3[2], v3 + 3);
      else
        v40 = 0;
      v471 = -1;
      v3[8] = v40;
      sub_401A50("Movement Keys...", 115, 1);
      v41 = v3[8];
      sub_401A50("Weapon/Arsenal Keys...", 116, 1);
      v42 = v3[8];
      sub_401A50("Interface Keys...", 114, 1);
      v43 = v3[8];
      sub_401A50("Message Macro Keys...", 113, 1);
      v44 = *((_DWORD *)dword_563918 + 2344);
      v45 = (char *)sub_402617(0x42u);
      v46 = sub_40263F(v45, v44);
      v47 = sub_402617(0xD4u);
      sprintf(&Dest, "%s\t%s", v47, v46);
      v48 = v3[8];
      sub_401A50(&Dest, 112, 1);
      v49 = *((_DWORD *)dword_563918 + 2343);
      v50 = (char *)sub_402617(0x42u);
      v51 = sub_40263F(v50, v49);
      v52 = sub_402617(0xD3u);
      sprintf(&Dest, "%s\t%s", v52, v51);
      v53 = v3[8];
      sub_401A50(&Dest, 111, 1);
LABEL_182:
      v460 = 7;
      goto LABEL_183;
    case 18:
      v466 = operator new(0x2AF4u);
      v471 = 4;
      if ( v466 )
        v54 = sub_4016A9("Message Macro Keys", v3[2], v3 + 3);
      else
        v54 = 0;
      v471 = -1;
      v3[8] = v54;
      v55 = 8536;
      do
      {
        if ( sub_48D1A0(*(char **)((char *)dword_563918 + v55), "macro") )
        {
          v56 = sub_4A9DE0(dword_56390C, v2);
          v57 = sub_4AA690(v56);
          sprintf(&Dest, "%s\t%s", *(_DWORD *)((char *)dword_563918 + v55), v57);
          v58 = v3[8];
          sub_401A50(&Dest, v2 + 7000, 1);
        }
        v55 += 4;
        ++v2;
      }
      while ( v55 < 8816 );
      v460 = 110;
      goto LABEL_183;
    case 19:
      v466 = operator new(0x2AF4u);
      v471 = 6;
      if ( v466 )
        v64 = sub_4016A9("Movement Keys", v3[2], v3 + 3);
      else
        v64 = 0;
      v471 = -1;
      v3[8] = v64;
      v65 = 0;
      v66 = 8536;
      do
      {
        if ( !v65 || v65 == 1 || v65 == 2 || v65 == 3 || v65 == 8 || v65 == 9 )
        {
          v67 = sub_4A9DE0(dword_56390C, v65);
          v68 = sub_4AA690(v67);
          sprintf(&Dest, "%s\t%s", *(_DWORD *)((char *)dword_563918 + v66), v68);
          v69 = v3[8];
          sub_401A50(&Dest, v65 + 7000, 1);
        }
        v66 += 4;
        ++v65;
      }
      while ( v66 < 8816 );
      v460 = 110;
      goto LABEL_183;
    case 20:
      v466 = operator new(0x2AF4u);
      v471 = 7;
      if ( v466 )
        v70 = sub_4016A9("Interface Keys", v3[2], v3 + 3);
      else
        v70 = 0;
      v471 = -1;
      v3[8] = v70;
      v71 = 0;
      v72 = 8536;
      do
      {
        v73 = *(char **)((char *)dword_563918 + v72);
        if ( *v73
          && !sub_48D1A0(v73, "macro")
          && (v71 < 11 || v71 > 26)
          && v71
          && v71 != 1
          && v71 != 2
          && v71 != 3
          && v71 != 8
          && v71 != 9 )
        {
          v74 = sub_4A9DE0(dword_56390C, v71);
          v75 = sub_4AA690(v74);
          sprintf(&Dest, "%s\t%s", *(_DWORD *)((char *)dword_563918 + v72), v75);
          v76 = v3[8];
          sub_401A50(&Dest, v71 + 7000, 1);
        }
        v72 += 4;
        ++v71;
      }
      while ( v72 < 8816 );
      v460 = 110;
      goto LABEL_183;
    case 21:
      v466 = operator new(0x2AF4u);
      v471 = 5;
      if ( v466 )
        v59 = sub_4016A9("Weapon/Arsenal Keys", v3[2], v3 + 3);
      else
        v59 = 0;
      v471 = -1;
      v3[8] = v59;
      v60 = 8536;
      do
      {
        if ( (unsigned int)(v2 - 11) <= 0xF )
        {
          v61 = sub_4A9DE0(dword_56390C, v2);
          v62 = sub_4AA690(v61);
          sprintf(&Dest, "%s\t%s", *(_DWORD *)((char *)dword_563918 + v60), v62);
          v63 = v3[8];
          sub_401A50(&Dest, v2 + 7000, 1);
        }
        v60 += 4;
        ++v2;
      }
      while ( v60 < 8816 );
      v460 = 110;
      goto LABEL_183;
    case 22:
      v466 = operator new(0x2AF4u);
      v471 = 14;
      if ( v466 )
        v158 = sub_4016A9("Top 100 Charts", v3[2], v3 + 3);
      else
        v158 = 0;
      v471 = -1;
      v3[8] = v158;
      sub_401A50("Lifetime...", 123, 1);
      v159 = v3[8];
      sub_401A50("Yearly...", 127, 1);
      v160 = v3[8];
      sub_401A50("Monthly...", 126, 1);
      v161 = v3[8];
      sub_401A50("Weekly...", 125, 1);
      v462 = 124;
      goto LABEL_131;
    case 23:
      v466 = operator new(0x2AF4u);
      v471 = 15;
      if ( v466 )
        v163 = sub_4016A9("Score History Charts", v3[2], v3 + 3);
      else
        v163 = 0;
      v471 = -1;
      v3[8] = v163;
      sub_401A50("Yearly...", 122, 1);
      v164 = v3[8];
      sub_401A50("Monthly...", 121, 1);
      v165 = v3[8];
      sub_401A50("Weekly...", 120, 1);
      v462 = 119;
LABEL_131:
      v162 = v3[8];
      sub_401A50("Daily...", v462, 1);
      v460 = 4;
LABEL_183:
      v16 = sub_402617(0x23u);
LABEL_184:
      v459 = v3[8];
      result = sub_401A50(v16, v460, 1);
      break;
    default:
      return result;
  }
  return result;
}
// 4016A9: using guessed type _DWORD __stdcall sub_4016A9(_DWORD, _DWORD, _DWORD);
// 401A50: using guessed type _DWORD __stdcall sub_401A50(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4020B3: using guessed type _DWORD __stdcall sub_4020B3(_DWORD);
// 402108: using guessed type _DWORD __stdcall sub_402108(_DWORD);
// 402842: using guessed type _DWORD __stdcall sub_402842(_DWORD);
// 51586C: using guessed type void *InteriorMenu::`vftable';
// 51589C: using guessed type int (__stdcall *off_51589C)(int, int);
// 454790: using guessed type int var_A50[512];

//----- (00457890) --------------------------------------------------------
void *__thiscall sub_457890(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  void *result; // eax
  int v5; // ecx

  v3 = this;
  if ( this[7] )
    result = (void *)(*(int (__stdcall **)(int, int))(*(_DWORD *)(this[7] + 4) + 24))(a2, a3);
  if ( a2 == 13 )
  {
    if ( !*((_DWORD *)dword_563918 + 2344) )
    {
      result = dword_563908;
      if ( !*(_BYTE *)(*((_DWORD *)dword_563908 + 1509) + 37920) )
        result = (void *)sub_4024E6((int)(v3 - 1), *(_DWORD *)(v3[7] + 10960));
    }
  }
  else
  {
    if ( a2 == 27 )
    {
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      switch ( v3[6] )
      {
        case 0:
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          result = dword_563908;
          *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
          if ( v3 != (_DWORD *)4 )
            result = (void *)(*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
          return result;
        case 1:
          v5 = (int)(v3 - 1);
          v3[6] = 5;
          goto LABEL_20;
        case 2:
        case 4:
        case 0xB:
        case 0xC:
          v3[6] = 3;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        case 3:
        case 6:
        case 0xE:
          v5 = (int)(v3 - 1);
          v3[6] = 0;
          goto LABEL_20;
        case 5:
          v3[6] = 0;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        case 7:
        case 0xF:
          v5 = (int)(v3 - 1);
          v3[6] = 6;
          goto LABEL_20;
        case 8:
        case 0xD:
        case 0x11:
          v5 = (int)(v3 - 1);
          v3[6] = 3;
          goto LABEL_20;
        case 9:
        case 0xA:
          v3[6] = 6;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        case 0x10:
          v3[6] = 10;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        case 0x12:
        case 0x13:
          v3[6] = 17;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        case 0x14:
        case 0x15:
          v5 = (int)(v3 - 1);
          v3[6] = 17;
          goto LABEL_20;
        case 0x16:
          v5 = (int)(v3 - 1);
          v3[6] = 14;
LABEL_20:
          (*(void (__stdcall **)(int))(*(_DWORD *)v5 + 8))(v5 + 12);
          break;
        case 0x17:
          v3[6] = 14;
          (*(void (__stdcall **)(_DWORD *))(*(v3 - 1) + 8))(v3 + 2);
          break;
        default:
          break;
      }
    }
    result = dword_56390C;
    if ( *((_DWORD *)dword_56390C + 1548) || *((_DWORD *)dword_56390C + 1549) || *((_DWORD *)dword_56390C + 1569) )
      result = (void *)sub_4024E6((int)(v3 - 1), *(_DWORD *)(v3[7] + 10960));
  }
  return result;
}

//----- (00457B70) --------------------------------------------------------
int __thiscall sub_457B70(int *this, int a2, int a3, int a4, int a5)
{
  int *v5; // esi

  v5 = this;
  if ( this[7] )
    (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)(this[7] + 4) + 8))(a2, a3, a4, a5);
  (*(void (__thiscall **)(int *, int, int, int))(*v5 + 4))(v5, a2, a3, a4);
  return sub_4024E6((int)(v5 - 1), v5[8]);
}

//----- (00457BD0) --------------------------------------------------------
_DWORD *__thiscall sub_457BD0(_DWORD *this, int a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  int v4; // edx

  v3 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = a2;
  *this = &off_515CDC;
  this[1] = &MainMenuScreen::`vftable';
  this[3] = *a3;
  this[4] = a3[1];
  this[5] = a3[2];
  v4 = a3[3];
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  this[6] = v4;
  sub_4021CB(a3);
  sub_401221(1);
  return v3;
}
// 401221: using guessed type _DWORD __stdcall sub_401221(_DWORD);
// 4021CB: using guessed type _DWORD __stdcall sub_4021CB(_DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 515CAC: using guessed type void *MainMenuScreen::`vftable';
// 515CDC: using guessed type int (__thiscall *off_515CDC)(int, int, int, char *Str);

//----- (00457C90) --------------------------------------------------------
int __thiscall sub_457C90(_DWORD *this)
{
  _DWORD *v1; // edi
  _DWORD *v2; // esi
  void *v3; // ebx

  v1 = this;
  *this = &off_515CDC;
  this[1] = &MainMenuScreen::`vftable';
  sub_401221(0);
  v2 = (_DWORD *)v1[8];
  if ( v2 )
  {
    v3 = (void *)v2[2748];
    *v2 = &off_51589C;
    v2[1] = &InteriorMenu::`vftable';
    if ( v3 )
    {
      sub_402040(v3);
      j__free(v3);
      v2[2748] = 0;
    }
    j__free(v2);
    v1[8] = 0;
  }
  return sub_4027A2(v1);
}
// 401221: using guessed type _DWORD __stdcall sub_401221(_DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 51586C: using guessed type void *InteriorMenu::`vftable';
// 51589C: using guessed type int (__stdcall *off_51589C)(int, int);
// 515CAC: using guessed type void *MainMenuScreen::`vftable';
// 515CDC: using guessed type int (__thiscall *off_515CDC)(int, int, int, char *Str);

//----- (00457D80) --------------------------------------------------------
void *__thiscall sub_457D80(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_40100A();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 40100A: using guessed type int sub_40100A(void);

//----- (00457DF0) --------------------------------------------------------
int __stdcall sub_457DF0(int a1, __int16 a2)
{
  int result; // eax
  int v3; // edx
  int v4; // esi
  int v5; // eax
  int v6; // ST04_4

  result = abs(a1);
  if ( result <= 5100 )
  {
    v3 = *((_DWORD *)dword_563908 + 1507);
    v4 = *(_DWORD *)(v3 + 4 * result + 8008);
    if ( v4 )
    {
      v5 = sub_401D39(dword_563908, v3);
      *(_WORD *)(v4 + 268) = a2;
      v5 ^= 0x12345678u;
      v6 = *(_DWORD *)(v4 + 272);
      *(_DWORD *)(v4 + 272) = v5;
      result = nullsub_3(v4 + 272, v6, v5);
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (00457E70) --------------------------------------------------------
int __thiscall sub_457E70(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void *v3; // edi
  void (__stdcall ***v4)(signed int); // ecx
  int v5; // edi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  int v10; // eax
  int v11; // edi
  int v12; // ebp
  int v13; // ebx
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  int v16; // eax
  _DWORD *v17; // eax
  _DWORD *v18; // eax
  int v19; // edi
  int v20; // ebx
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  int v23; // eax
  int v24; // edi
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  void (__thiscall *v27)(int (__thiscall ***)(_DWORD, signed int, _DWORD), signed int, _DWORD); // eax
  int (__thiscall ***v28)(_DWORD, signed int, _DWORD); // esi
  int v30; // [esp+20h] [ebp-14h]

  v1 = this;
  v2 = (void *)this[43];
  if ( v2 )
  {
    sub_402040(this[43]);
    j__free(v2);
    v1[43] = 0;
  }
  v3 = (void *)v1[26];
  if ( v3 )
  {
    sub_402040(v1[26]);
    j__free(v3);
    v1[26] = 0;
  }
  v4 = (void (__stdcall ***)(signed int))v1[49];
  if ( v4 )
  {
    (**v4)(1);
    v1[49] = 0;
  }
  v5 = v1[11] - v1[9];
  v6 = operator new(0x420u);
  if ( v6 )
    v7 = sub_49A5F0(v6, 1, v1 + 8, 0);
  else
    v7 = 0;
  v1[49] = v7;
  if ( (unsigned int)(v1[18] - 1) <= 1 )
  {
    v8 = operator new(0x18u);
    if ( v8 )
      v9 = sub_49A490(v8, 0, 0, *((_DWORD *)dword_563908 + 7654), v5, 8);
    else
      v9 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[49] + 16))(v9);
    v10 = *((_DWORD *)dword_563908 + 7656);
    v11 = v10 + *((_DWORD *)dword_563908 + 7658);
    v12 = v1[13] + v10 - *((_DWORD *)dword_563908 + 7659);
    v13 = v1[13] - *((_DWORD *)dword_563908 + 7659) - *((_DWORD *)dword_563908 + 7658);
    v1[24] = v13 / *(signed __int16 *)(*(_DWORD *)(v1[25] + 2052) + 174);
    v14 = operator new(0x18u);
    if ( v14 )
      v15 = sub_49A490(v14, *((_DWORD *)dword_563908 + 7654), v11, *((_DWORD *)dword_563908 + 7653) - 7, v13, 9);
    else
      v15 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[49] + 16))(v15);
    v30 = *((_DWORD *)dword_563908 + 7654) + *((_DWORD *)dword_563908 + 7653) - 7;
    if ( v1[10] - v1[8] >= 160 )
    {
      if ( operator new(0x7Cu) )
        v16 = sub_401BAE(*((_DWORD *)dword_563908 + 499), 1, v1 + 2, v1[12], 0, v30 + v1[8], v11 + v1[9], v13, 1);
      else
        v16 = 0;
      v1[26] = v16;
    }
    v17 = operator new(0x18u);
    if ( v17 )
      v18 = sub_49A490(
              v17,
              *((_DWORD *)dword_563908 + 7654),
              v12,
              *((_DWORD *)dword_563908 + 7653),
              *((_DWORD *)dword_563908 + 7659) + *((_DWORD *)dword_563908 + 7660),
              7);
    else
      v18 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[49] + 16))(v18);
    v19 = v1[13] + *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7660);
    v20 = *(_DWORD *)(v1[19] + 8) - *((_DWORD *)dword_563908 + 7661) - *((_DWORD *)dword_563908 + 7657) - v19;
    v1[40] = v20 / *(signed __int16 *)(*(_DWORD *)(v1[31] + 2052) + 174);
    v21 = operator new(0x18u);
    if ( v21 )
      v22 = sub_49A490(v21, *((_DWORD *)dword_563908 + 7654), v19, *((_DWORD *)dword_563908 + 7653) - 7, v20, 5);
    else
      v22 = 0;
    (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[49] + 16))(v22);
    if ( v1[10] - v1[8] >= 160 )
    {
      if ( operator new(0x7Cu) )
        v23 = sub_401BAE(*((_DWORD *)dword_563908 + 499), 2, v1 + 2, v1[12], 0, v30 + v1[8], v19 + v1[9], v20, 1);
      else
        v23 = 0;
      v1[43] = v23;
    }
    if ( *((_DWORD *)dword_563908 + 7662) )
    {
      v24 = *(_DWORD *)(v1[19] + 8) - *((_DWORD *)dword_563908 + 7657);
      v25 = operator new(0x18u);
      if ( v25 )
        v26 = sub_49A490(
                v25,
                *((_DWORD *)dword_563908 + 7654),
                v24 - 4,
                *((_DWORD *)dword_563908 + 7653),
                *(signed __int16 *)(*(_DWORD *)(v1[31] + 2052) + 174) + 4,
                6);
      else
        v26 = 0;
      (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[49] + 16))(v26);
    }
  }
  v27 = *(void (__thiscall **)(int (__thiscall ***)(_DWORD, signed int, _DWORD), signed int, _DWORD))v1[2];
  v28 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v1 + 2);
  v27(v28, 1, 0);
  return (**v28)(v28, 2, 0);
}
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);

//----- (004583C0) --------------------------------------------------------
int __thiscall sub_4583C0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void (__stdcall ***v3)(signed int); // ecx
  int v4; // edi
  int v5; // ebx
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // ecx
  int v9; // edi
  int v10; // kr00_4
  int v11; // eax

  v2 = this;
  v3 = (void (__stdcall ***)(signed int))this[19];
  if ( v3 )
  {
    (**v3)(1);
    v2[19] = 0;
  }
  v2[25] = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2339) + 1516);
  v2[31] = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2338) + 1516);
  v2[15] = 1;
  if ( a2 )
  {
    v2[8] = *a2;
    v2[9] = a2[1];
    v2[10] = a2[2];
    v2[11] = a2[3];
  }
  v4 = v2[10] - v2[8];
  v5 = v2[11] - v2[9];
  v6 = operator new(0xCCu);
  if ( v6 )
    v7 = sub_49FBC0(v6, v2[12], v4, v5, 0);
  else
    v7 = 0;
  v2[19] = v7;
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, signed int, signed int))(*v7 + 68))(v7, 0, 0, -1, -1);
  (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v2[19] + 40))(0, 0);
  v8 = *(_DWORD *)(v2[19] + 8) - *((_DWORD *)dword_563908 + 7657) - *((_DWORD *)dword_563908 + 7656);
  v9 = abs(*(signed __int16 *)(*(_DWORD *)(v2[36] + 360) + 6)) + 12;
  v10 = *(_DWORD *)(v2[19] + 8) - *((_DWORD *)dword_563908 + 7657) - *((_DWORD *)dword_563908 + 7656);
  if ( v10 / 2 < v9 )
    v9 = v10 / 2;
  v11 = v8 * *((_DWORD *)dword_563918 + 2263) / 10000;
  v2[13] = v11;
  if ( v11 < v9 )
    v2[13] = v9;
  if ( v8 - v2[13] < v9 )
    v2[13] = v8 - v9;
  return sub_401E6A();
}
// 401E6A: using guessed type int sub_401E6A(void);

//----- (004585C0) --------------------------------------------------------
_DWORD *__thiscall sub_4585C0(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax
  bool v4; // sf
  int v5; // esi
  signed int v6; // edx
  int v7; // eax
  int v8; // edx
  int v9; // esi
  int v10; // edx
  signed int v11; // edx
  int v12; // esi

  result = this;
  this[13] = 1;
  if ( a2 == 1 )
  {
    if ( !*((_DWORD *)dword_563908 + 1504) || !this[24] )
      return result;
    v9 = *((_DWORD *)dword_563908 + 1504);
    v10 = this[20];
    if ( v10 < *(_DWORD *)(v9 + 6400) - 1 && !*(_DWORD *)(v9 + 4 * v10) )
      this[20] = v10 + 1;
    v4 = a3 + this[21] < 0;
    this[21] += a3;
    if ( v4 )
      this[21] = 0;
    v5 = this[22];
    v11 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400) - v5 < 0 ? 0 : *(_DWORD *)(*((_DWORD *)dword_563908 + 1504)
                                                                                        + 6400)
                                                                            - v5;
    if ( this[21] > v11 )
      this[21] = v11;
    v7 = this[21];
    v8 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400);
  }
  else
  {
    if ( a2 != 2 || !this[41] )
      return result;
    v4 = a3 + this[40] < 0;
    this[40] += a3;
    if ( v4 )
      this[40] = 0;
    v5 = this[38];
    v6 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66) - v5 < 0 ? 0 : *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66)
                                                                               - v5;
    if ( this[40] > v6 )
      this[40] = v6;
    v7 = this[40];
    v8 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66);
  }
  v12 = v7 + v5;
  if ( v8 < v12 )
    v12 = v8;
  return (_DWORD *)sub_401C67(0, v8, v7, v12, 0);
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00458760) --------------------------------------------------------
int __thiscall sub_458760(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // edi
  int result; // eax
  int v7; // ecx
  int v8; // esi

  v5 = this;
  result = this[43];
  if ( result != 7 && result != 8 )
  {
    v7 = this[19] + a5;
    v8 = v7 / 120;
    v5[19] = v7 % 120;
    result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v5[48] + 4))(a2, a3, 0, 0);
    if ( result == 5 )
    {
      result = (*(int (__thiscall **)(_DWORD *, signed int, int))v5[1])(v5 + 1, 2, -v8);
    }
    else if ( result == 9 )
    {
      result = (*(int (__thiscall **)(_DWORD *, signed int, int))v5[1])(v5 + 1, 1, -v8);
    }
  }
  return result;
}

//----- (00458820) --------------------------------------------------------
char *__thiscall sub_458820(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // ecx
  int v7; // ebx
  int v8; // edx
  int v9; // eax
  char *result; // eax
  signed int v11; // eax
  int v12; // ecx
  int v13; // ebp
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // edx
  bool v18; // sf
  char v19; // [esp+18h] [ebp-4h]

  v4 = this;
  v5 = this[43];
  if ( v5 == 7 )
  {
    *((_DWORD *)dword_563908 + 2690) = 1;
    v6 = *(_DWORD *)(this[18] + 8) - *((_DWORD *)dword_563908 + 7657) - *((_DWORD *)dword_563908 + 7656);
    v7 = abs(*(signed __int16 *)(*(_DWORD *)(v4[35] + 360) + 6)) + 12;
    v8 = (*(_DWORD *)(v4[18] + 8) - *((_DWORD *)dword_563908 + 7657) - *((_DWORD *)dword_563908 + 7656)) / 2;
    if ( v8 >= v7 )
      v8 = v7;
    v9 = v4[46] - (v4[45] - a3);
    if ( v9 < v8 )
      v9 = v8;
    if ( v6 - v9 < v8 )
      v9 = v6 - v8;
    *((_DWORD *)dword_563918 + 2263) = (10000 * v9 + 9999) / v6;
    return (char *)sub_401B18(0);
  }
  if ( v5 == 8 )
  {
    *((_DWORD *)dword_563908 + 2690) = 4;
    *((_DWORD *)dword_563908 + 3110) = this[44] + this[47] - a2;
    v11 = *((_DWORD *)dword_563908 + 3110);
    if ( v11 > 160 )
      goto LABEL_29;
    if ( v11 <= 0 )
    {
      v11 = 0;
      goto LABEL_15;
    }
    if ( v11 > 160 )
LABEL_29:
      v11 = 160;
LABEL_15:
    *((_DWORD *)dword_563908 + 3110) = v11;
    this[6] = *((_DWORD *)dword_563908 + 3110);
    return (char *)sub_401965(dword_563908);
  }
  v12 = this[42];
  v13 = a4;
  if ( v12 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v12 + 4))(a2, a3, a4);
  v14 = v4[25];
  if ( v14 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v14 + 4))(a2, a3, v13);
  result = (char *)((*(int (__stdcall **)(int, int, char *, int *))(*(_DWORD *)v4[48] + 4))(a2, a3, &v19, &a4) - 7);
  if ( result )
  {
    v15 = (int)(result - 1);
    if ( v15 )
    {
      result = (char *)(v15 - 1);
      if ( !result )
      {
        v16 = a4 / *(signed __int16 *)(*(_DWORD *)(v4[24] + 2052) + 174);
        v17 = v4[22];
        v18 = v17 + v16 < 0;
        result = (char *)(v17 + v16);
        v4[20] = result;
        if ( v18 )
          v4[20] = 0;
      }
    }
    else
    {
      result = (char *)dword_563908;
      *((_DWORD *)dword_563908 + 2690) = 4;
    }
  }
  else
  {
    *((_DWORD *)dword_563908 + 2690) = 1;
  }
  return result;
}
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401B18: using guessed type _DWORD __stdcall sub_401B18(_DWORD);

//----- (00458A80) --------------------------------------------------------
_DWORD *__thiscall sub_458A80(int this, int a2, int a3)
{
  int v3; // esi
  int v4; // ebp
  int v5; // edi
  _DWORD *result; // eax
  int v7; // ebx
  int v8; // ebx
  int v9; // ecx
  int v10; // esi
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  signed int v15; // [esp-8h] [ebp-38h]
  int v16; // [esp+14h] [ebp-1Ch]
  int v17; // [esp+18h] [ebp-18h]
  int v18; // [esp+2Ch] [ebp-4h]
  void *v19; // [esp+38h] [ebp+8h]

  v3 = this;
  v4 = a2;
  v5 = a3;
  if ( a2 == -1 && a3 == a2 )
  {
    result = *(_DWORD **)(this + 88);
    if ( (signed int)result < 0 )
      return result;
    if ( (signed int)result >= *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400) )
      return result;
    v7 = (int)result - *(_DWORD *)(this + 92);
    result = (_DWORD *)(*(int (__stdcall **)(signed int, int *))(**(_DWORD **)(this + 196) + 12))(9, &v16);
    if ( !result )
      return result;
    v4 = v16;
    v5 = v17 + v7 * *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)(v3 + 100) + 2052) + 174);
  }
  result = dword_563908;
  v8 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * *(_DWORD *)(v3 + 88));
  if ( v8 )
  {
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v9 = *((_DWORD *)dword_563908 + 355);
      if ( v9 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 36))(1);
        result = dword_563908;
      }
      result[355] = 0;
    }
    v19 = operator new(0xD18u);
    v18 = 0;
    if ( v19 )
      v10 = sub_4010FF(
              *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
              v8 + 32,
              v3,
              v4,
              v5,
              2,
              *(signed __int16 *)(v8 + 96),
              0);
    else
      v10 = 0;
    v18 = -1;
    *((_DWORD *)dword_563908 + 355) = v10;
    v11 = sub_402617(0xEu);
    sub_4024F0(v11, 0, 0);
    v12 = sub_402617(0xDu);
    sub_4024F0(v12, 3, 0);
    if ( sub_4B4E20(*(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 12), v8 + 32) == -1 )
    {
      v15 = 1;
      v13 = sub_402617(0x1Eu);
    }
    else
    {
      v15 = 2;
      v13 = sub_402617(0x1Du);
    }
    sub_4024F0(v13, v15, 0);
    sub_4024F0("Ig~nore-Summon", 5, 0);
    if ( *(_DWORD *)(v8 + 144) )
      sub_4024F0("Un~mark", 6, 0);
    else
      sub_4024F0("~Mark", 6, 0);
    if ( *((_DWORD *)dword_563908 + 6898)
      && (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4
      && !sub_4014FB(v8) )
    {
      sub_4024F0(&Source, 0, 0);
      v14 = sub_402617(0x4Fu);
      sub_4024F0(v14, 4, 0);
    }
    sub_4024F0(&Source, 0, 0);
    if ( *((_DWORD *)dword_563918 + 2333) )
      sub_4024F0("Sort by Name", 7, 0);
    else
      sub_4024F0("Sort by Team", 8, 0);
    if ( *((_DWORD *)dword_563918 + 2274) )
      result = (_DWORD *)sub_4024F0("Opaque Player List", 9, 0);
    else
      result = (_DWORD *)sub_4024F0("Transparent Player List", 10, 0);
  }
  return result;
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);

//----- (00458DD0) --------------------------------------------------------
int __thiscall sub_458DD0(int this, int a2, int a3)
{
  int v3; // esi
  int v4; // ebx
  int v5; // edi
  int result; // eax
  _DWORD *v7; // edx
  int v8; // ecx
  signed int v9; // edi
  _WORD *v10; // ebp
  void *v11; // ST38_4
  int v12; // esi
  int (__thiscall *v13)(_WORD *); // edx
  int v14; // eax
  char *v15; // eax
  int v16; // eax
  char *v17; // eax
  int v18; // eax
  char *v19; // eax
  int v20; // eax
  char *v21; // eax
  int v22; // eax
  char *v23; // eax
  int v24; // eax
  char *v25; // eax
  int v26; // eax
  char *v27; // eax
  int v28; // eax
  char *v29; // eax
  int v30; // eax
  char *v31; // eax
  int v32; // eax
  char *v33; // eax
  int v34; // eax
  char *v35; // eax
  int v36; // eax
  char *v37; // eax
  int v38; // eax
  char *v39; // eax
  int v40; // eax
  char *v41; // eax
  int v42; // eax
  char *v43; // eax
  int v44; // eax
  char *v45; // eax
  int v46; // ST1C_4
  int v47; // eax
  int v48; // eax
  int v49; // eax
  int v50; // eax
  __int16 v51; // ax
  int v52; // ST1C_4
  int v53; // eax
  int v54; // eax
  int v55; // [esp+14h] [ebp-128h]
  int v56; // [esp+1Ch] [ebp-120h]
  int v57; // [esp+20h] [ebp-11Ch]
  char Dest; // [esp+2Ch] [ebp-110h]
  int v59; // [esp+138h] [ebp-4h]

  v3 = a3;
  v4 = this;
  if ( a2 == -1 && a3 == -1 )
  {
    v5 = *(_DWORD *)(this + 164) - *(_DWORD *)(this + 168);
    result = (*(int (__stdcall **)(signed int, int *))(**(_DWORD **)(this + 196) + 12))(5, &v56);
    if ( !result )
      return result;
    v3 = v57 + v5 * *(signed __int16 *)(*(_DWORD *)(*(_DWORD *)(v4 + 124) + 2052) + 174);
    a2 = v56;
  }
  v7 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 355) )
  {
    v8 = *((_DWORD *)dword_563908 + 355);
    if ( v8 )
    {
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v8 + 36))(1);
      v7 = dword_563908;
    }
    v7[355] = 0;
    v7 = dword_563908;
  }
  v55 = *(signed __int16 *)(v7[78] + 4 * *(_DWORD *)(v4 + 164) + 68);
  result = *(signed __int16 *)(v7[78] + 4 * *(_DWORD *)(v4 + 164) + 68);
  v9 = abs(v55);
  if ( v9 <= 5100 )
  {
    v10 = *(_WORD **)(v7[1507] + 4 * v9 + 8008);
    if ( v10 )
    {
      v11 = operator new(0xD18u);
      v59 = 0;
      if ( v11 )
        v12 = sub_4010FF(
                *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516),
                v10 + 36,
                v4,
                a2,
                v3,
                0,
                v55,
                0);
      else
        v12 = 0;
      *((_DWORD *)dword_563908 + 355) = v12;
      v13 = *(int (__thiscall **)(_WORD *))(*(_DWORD *)v10 + 8);
      v59 = -1;
      if ( v13(v10) || (*(int (__thiscall **)(_WORD *))(*(_DWORD *)v10 + 12))(v10) )
      {
        v14 = sub_4A9DE0(dword_56390C, 11);
        v15 = sub_4AA690(v14);
        sprintf(&Dest, "Weapon-~1 (%s)", v15);
        sub_4024F0(&Dest, 6, 0);
        v16 = sub_4A9DE0(dword_56390C, 12);
        v17 = sub_4AA690(v16);
        sprintf(&Dest, "Weapon-~2 (%s)", v17);
        sub_4024F0(&Dest, 7, 0);
        v18 = sub_4A9DE0(dword_56390C, 13);
        v19 = sub_4AA690(v18);
        sprintf(&Dest, "Weapon-~3 (%s)", v19);
        sub_4024F0(&Dest, 8, 0);
        v20 = sub_4A9DE0(dword_56390C, 14);
        v21 = sub_4AA690(v20);
        sprintf(&Dest, "Weapon-~4 (%s)", v21);
        sub_4024F0(&Dest, 9, 0);
        v22 = sub_4A9DE0(dword_56390C, 15);
        v23 = sub_4AA690(v22);
        sprintf(&Dest, "Weapon-~5 (%s)", v23);
        sub_4024F0(&Dest, 10, 0);
        v24 = sub_4A9DE0(dword_56390C, 16);
        v25 = sub_4AA690(v24);
        sprintf(&Dest, "Weapon-~6 (%s)", v25);
        sub_4024F0(&Dest, 11, 0);
        v26 = sub_4A9DE0(dword_56390C, 17);
        v27 = sub_4AA690(v26);
        sprintf(&Dest, "Weapon-~7 (%s)", v27);
        sub_4024F0(&Dest, 12, 0);
        v28 = sub_4A9DE0(dword_56390C, 18);
        v29 = sub_4AA690(v28);
        sprintf(&Dest, "Weapon-~8 (%s)", v29);
        sub_4024F0(&Dest, 13, 0);
        v30 = sub_4A9DE0(dword_56390C, 19);
        v31 = sub_4AA690(v30);
        sprintf(&Dest, "Weapon-~9 (%s)", v31);
        sub_4024F0(&Dest, 14, 0);
        v32 = sub_4A9DE0(dword_56390C, 20);
        v33 = sub_4AA690(v32);
        sprintf(&Dest, "Weapon-10 (%s)", v33);
        sub_4024F0(&Dest, 15, 0);
        v34 = sub_4A9DE0(dword_56390C, 21);
        v35 = sub_4AA690(v34);
        sprintf(&Dest, "Weapon-11 (%s)", v35);
        sub_4024F0(&Dest, 16, 0);
        v36 = sub_4A9DE0(dword_56390C, 22);
        v37 = sub_4AA690(v36);
        sprintf(&Dest, "Weapon-12 (%s)", v37);
        sub_4024F0(&Dest, 17, 0);
        v38 = sub_4A9DE0(dword_56390C, 23);
        v39 = sub_4AA690(v38);
        sprintf(&Dest, "Weapon-13 (%s)", v39);
        sub_4024F0(&Dest, 18, 0);
        v40 = sub_4A9DE0(dword_56390C, 24);
        v41 = sub_4AA690(v40);
        sprintf(&Dest, "Weapon-14 (%s)", v41);
        sub_4024F0(&Dest, 19, 0);
        v42 = sub_4A9DE0(dword_56390C, 25);
        v43 = sub_4AA690(v42);
        sprintf(&Dest, "Weapon-15 (%s)", v43);
        sub_4024F0(&Dest, 20, 0);
        v44 = sub_4A9DE0(dword_56390C, 26);
        v45 = sub_4AA690(v44);
        sprintf(&Dest, "Weapon-16 (%s)", v45);
        sub_4024F0(&Dest, 21, 0);
        if ( sub_40143D(v9) >= 0 )
        {
          sub_4024F0(&Source, 0, 0);
          sub_4024F0("Weapon ~None", 22, 0);
          sub_4024F0("~Reassign Key", 23, 0);
        }
        sub_4024F0(&Source, 0, 0);
      }
      if ( (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() != 4 && v55 > 0 && v10[82] )
      {
        v46 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 4 * *(_DWORD *)(v4 + 164) + 70);
        v47 = sub_402617(0x19u);
        sprintf(&Dest, "%s (%d)", v47, v46);
        sub_4024F0(&Dest, 0, 0);
        if ( *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * *(_DWORD *)(v4 + 164) + 70) > 1 )
        {
          v48 = sub_402617(0x1Bu);
          sub_4024F0(v48, 2, 0);
          if ( *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * *(_DWORD *)(v4 + 164) + 70) > 10 )
          {
            v49 = sub_402617(0x90u);
            sub_4024F0(v49, 3, 0);
            if ( *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * *(_DWORD *)(v4 + 164) + 70) > 50 )
            {
              v50 = sub_402617(0x91u);
              sub_4024F0(v50, 4, 0);
            }
          }
          v51 = *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * *(_DWORD *)(v4 + 164) + 70);
          if ( v51 > 5 )
          {
            v52 = v51 / 2;
            v53 = sub_402617(0x1Au);
            sprintf(&Dest, "%s (%d)", v53, v52);
            sub_4024F0(&Dest, 1, 0);
          }
        }
        sub_4024F0(&Source, 0, 0);
      }
      v54 = sub_402617(0xDu);
      result = sub_4024F0(v54, 5, 0);
    }
  }
  return result;
}
// 4010FF: using guessed type _DWORD __stdcall sub_4010FF(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40143D: using guessed type _DWORD __stdcall sub_40143D(_DWORD);
// 4024F0: using guessed type _DWORD __stdcall sub_4024F0(_DWORD, _DWORD, _DWORD);

//----- (00459720) --------------------------------------------------------
int __thiscall sub_459720(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi

  v5 = this;
  (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*this[48] + 4))(a2, a3, 0, 0);
  return ((int (__thiscall *)(_DWORD **, int, int, int, int))(*v5)[2])(v5, a2, a3, a4, a5);
}

//----- (00459770) --------------------------------------------------------
int __thiscall sub_459770(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax
  int v7; // ecx
  int v8; // ecx

  v5 = this;
  result = this[43];
  if ( result == 7 || result == 8 )
  {
    (*(void (__stdcall **)(int, int, int))(*this + 4))(a2, a3, a4);
    result = sub_401113(dword_563908);
    v5[43] = 0;
  }
  v7 = v5[42];
  if ( v7 )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v7 + 16))(a2, a3, a4, a5);
  v8 = v5[25];
  if ( v8 )
    result = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v8 + 16))(a2, a3, a4, a5);
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);

//----- (00459820) --------------------------------------------------------
int __userpurge sub_459820@<eax>(__int64 a1@<edx:eax>, _DWORD *a2@<ecx>, int a3)
{
  _DWORD *v3; // esi
  int result; // eax
  int v5; // ecx
  int v6; // ecx

  v3 = a2;
  if ( a2[28] )
  {
    if ( *((_DWORD *)dword_563908 + 3110) == 160 )
    {
      a1 = sub_401D39(a2, HIDWORD(a1)) - a2[29];
      if ( (signed int)((HIDWORD(a1) ^ a1) - HIDWORD(a1)) > 200 )
      {
        v3[28] = 0;
        sub_40253B(dword_563908);
      }
    }
  }
  result = sub_401D39(a2, HIDWORD(a1)) - v3[17];
  if ( result > 500 )
    v3[15] = 1;
  v5 = v3[43];
  if ( v5 )
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v5 + 36))(a3);
  v6 = v3[26];
  if ( v6 )
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v6 + 36))(a3);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40253B: using guessed type int __thiscall sub_40253B(_DWORD);

//----- (004598D0) --------------------------------------------------------
signed int __thiscall sub_4598D0(_DWORD *this)
{
  int v1; // eax
  signed int v2; // ecx
  signed int result; // eax

  v1 = *((_DWORD *)dword_563908 + 78);
  v2 = this[41];
  if ( v2 >= *(signed __int16 *)(v1 + 66) )
    result = -1;
  else
    result = *(signed __int16 *)(v1 + 4 * v2 + 68);
  return result;
}

//----- (00459900) --------------------------------------------------------
int __thiscall sub_459900(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // edx
  int result; // eax
  signed __int16 *v5; // esi

  v2 = *((_DWORD *)dword_563908 + 78);
  v3 = *(signed __int16 *)(v2 + 66);
  result = 0;
  if ( v3 > 0 )
  {
    v5 = (signed __int16 *)(v2 + 68);
    while ( *v5 != a2 )
    {
      ++result;
      v5 += 2;
      if ( result >= v3 )
        return result;
    }
    if ( this[41] != result )
    {
      this[15] = 1;
      this[41] = result;
    }
  }
  return result;
}

//----- (00459970) --------------------------------------------------------
int __thiscall sub_459970(_DWORD *this)
{
  int v1; // eax
  int v2; // ecx
  int result; // eax

  v1 = *((_DWORD *)dword_563908 + 1504);
  v2 = this[22];
  if ( v2 >= *(_DWORD *)(v1 + 6400) )
    result = 0;
  else
    result = *(_DWORD *)(v1 + 4 * v2);
  return result;
}

//----- (004599A0) --------------------------------------------------------
signed int __thiscall sub_4599A0(_DWORD *this)
{
  int v1; // eax
  int v2; // ecx
  int v3; // eax
  signed int result; // eax

  v1 = *((_DWORD *)dword_563908 + 1504);
  v2 = this[22];
  if ( v2 < *(_DWORD *)(v1 + 6400) && (v3 = *(_DWORD *)(v1 + 4 * v2)) != 0 )
    result = *(signed __int16 *)(v3 + 96);
  else
    result = -1;
  return result;
}

//----- (004599D0) --------------------------------------------------------
int __thiscall sub_4599D0(_DWORD *this, int a2)
{
  _DWORD *v2; // edx
  int v3; // esi
  int result; // eax

  v2 = (_DWORD *)*((_DWORD *)dword_563908 + 1504);
  v3 = v2[1600];
  result = 0;
  if ( v3 > 0 )
  {
    while ( !*v2 || *(signed __int16 *)(*v2 + 96) != a2 )
    {
      ++result;
      ++v2;
      if ( result >= v3 )
        return result;
    }
    this[22] = result;
  }
  return result;
}

//----- (00459A40) --------------------------------------------------------
BOOL sub_459A40()
{
  return *((_DWORD *)dword_563918 + 2274) && *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1499);
}

//----- (00459A80) --------------------------------------------------------
void *__thiscall sub_459A80(_DWORD *this)
{
  void *result; // eax
  _DWORD *v2; // esi
  int *v3; // edi
  int v4; // ebx
  unsigned __int16 v5; // ax
  int v6; // ecx
  int v7; // ecx
  signed __int16 *v8; // ebp
  int v9; // edi
  int v10; // ebx
  __int64 v11; // rax
  int v12; // ecx
  int v13; // edi
  int v14; // ST10_4
  int v15; // ecx
  _DWORD *v16; // esi
  int v17; // [esp+Ch] [ebp-10h]
  int v18; // [esp+10h] [ebp-Ch]
  int v19; // [esp+14h] [ebp-8h]
  int v20; // [esp+18h] [ebp-4h]

  result = dword_563908;
  v2 = this;
  if ( *((_BYTE *)dword_563908 + 30608) != -1
    || *((_BYTE *)dword_563908 + 30609) != -1
    || *((_BYTE *)dword_563908 + 30610) != -1 )
  {
    v3 = (int *)this[19];
    v4 = *v3;
    v5 = sub_40223E(dword_576828, *((_DWORD *)dword_563908 + 7652));
    result = (void *)(*(int (__thiscall **)(int *, _DWORD, _DWORD))(v4 + 40))(v3, v5, 0);
  }
  v6 = v2[3];
  if ( v6 )
  {
    sub_4A4DC0(v6, v2[19], 0, v2[19], 0, 0, 3, 0, 0, 0);
    v7 = v2[3];
    v8 = *(signed __int16 **)(v7 + 360);
    v9 = abs(v8[3]);
    v10 = *(_DWORD *)(v2[19] + 8) - abs(v8[15]);
    v11 = v8[9];
    if ( abs((_DWORD)v11) > 0 && v9 < v10 )
    {
      do
      {
        sub_4A4DC0(v7, SHIDWORD(v11), 1, v2[19], 0, v9, 3, 0, 0, 0);
        v7 = v2[3];
        v11 = *(signed __int16 *)(*(_DWORD *)(v7 + 360) + 18);
        v9 += abs((_DWORD)v11);
      }
      while ( v9 < v10 );
    }
    v12 = v2[3];
    v13 = v2[19];
    v14 = *(_DWORD *)(v13 + 8) - abs(*(signed __int16 *)(*(_DWORD *)(v12 + 360) + 30));
    sub_4A4DC0(v12, v14, 2, v13, 0, v14, 3, 0, 0, 0);
    v15 = v2[3];
    result = (void *)abs(*(signed __int16 *)(*(_DWORD *)(v15 + 360) + 4));
    if ( (signed int)result < *(_DWORD *)(v2[19] + 4) )
    {
      v16 = (_DWORD *)v2[19];
      v17 = abs(*(signed __int16 *)(*(_DWORD *)(v15 + 360) + 4));
      v18 = 0;
      v19 = v16[1];
      v20 = v16[2];
      result = (void *)(*(int (__thiscall **)(_DWORD *, _DWORD, int *))(*v16 + 40))(v16, 0, &v17);
    }
  }
  return result;
}
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (00459C50) --------------------------------------------------------
unsigned __int16 *__fastcall sub_459C50(_DWORD *a1, int a2, _DWORD *a3, int a4, int a5)
{
  int v5; // ebp
  _DWORD *v6; // esi
  int v7; // ecx
  int v8; // ebx
  int v9; // ebp
  int v10; // ebx
  __int64 v11; // rax
  _DWORD *v12; // ecx
  int v13; // ebp
  int v14; // edx
  signed int v15; // eax
  int v16; // eax
  int v17; // ebx
  int v18; // edx
  unsigned __int16 *result; // eax
  int v20; // ecx
  int v21; // eax
  int v22; // ebx
  void (__thiscall *v23)(_DWORD *, _DWORD, int *); // edx
  size_t v24; // ebx
  _DWORD *v25; // ecx
  int v26; // ebx
  int v27; // ecx
  int v28; // eax
  _DWORD *v29; // esi
  int v30; // ecx
  int v31; // eax
  int v32; // edx
  size_t v33; // ST40_4
  _DWORD *v34; // ecx
  int v35; // eax
  int v36; // ST40_4
  int v37; // edx
  char *v38; // ecx
  __int16 v39; // ax
  int v40; // [esp+10h] [ebp-11Ch]
  int v41; // [esp+10h] [ebp-11Ch]
  int v42; // [esp+14h] [ebp-118h]
  int v43; // [esp+14h] [ebp-118h]
  int v44; // [esp+18h] [ebp-114h]
  int v45; // [esp+1Ch] [ebp-110h]
  int v46; // [esp+20h] [ebp-10Ch]
  int v47; // [esp+24h] [ebp-108h]
  BOOL v48; // [esp+24h] [ebp-108h]
  int v49; // [esp+28h] [ebp-104h]
  char *Source; // [esp+2Ch] [ebp-100h]
  char *Sourcea; // [esp+2Ch] [ebp-100h]
  int v52; // [esp+30h] [ebp-FCh]
  int v53; // [esp+34h] [ebp-F8h]
  _DWORD *v54; // [esp+38h] [ebp-F4h]
  int v55; // [esp+3Ch] [ebp-F0h]
  int v56; // [esp+40h] [ebp-ECh]
  int v57; // [esp+48h] [ebp-E4h]
  int v58; // [esp+4Ch] [ebp-E0h]
  int v59; // [esp+50h] [ebp-DCh]
  int v60; // [esp+54h] [ebp-D8h]
  int v61; // [esp+58h] [ebp-D4h]
  int v62; // [esp+5Ch] [ebp-D0h]
  int v63; // [esp+60h] [ebp-CCh]
  int v64; // [esp+64h] [ebp-C8h]
  char Dest; // [esp+68h] [ebp-C4h]
  char v66; // [esp+E8h] [ebp-44h]

  v5 = a5 + *((_DWORD *)dword_563908 + 7656);
  v6 = a1;
  sub_4A4DC0(
    a1[36],
    a2,
    0,
    (int)a3,
    a4 + *((_DWORD *)dword_563908 + 7655),
    a5 + *((_DWORD *)dword_563908 + 7656),
    3,
    0,
    0,
    0);
  v7 = v6[36];
  v8 = *(_DWORD *)(v7 + 360);
  v9 = abs(*(signed __int16 *)(v8 + 6)) + v5;
  v10 = a5 + v6[13] + *((_DWORD *)dword_563908 + 7656) - abs(*(signed __int16 *)(v8 + 30));
  v11 = *(signed __int16 *)(*(_DWORD *)(v7 + 360) + 18);
  if ( abs((_DWORD)v11) > 0 && v9 < v10 )
  {
    do
    {
      sub_4A4DC0(v7, (int)dword_563908, 1, (int)a3, a4 + *((_DWORD *)dword_563908 + 7655), v9, 3, 0, 0, 0);
      v7 = v6[36];
      v11 = *(signed __int16 *)(*(_DWORD *)(v7 + 360) + 18);
      v9 += abs((_DWORD)v11);
    }
    while ( v9 < v10 );
  }
  sub_4A4DC0(v6[36], SHIDWORD(v11), 2, (int)a3, a4 + *((_DWORD *)dword_563908 + 7655), v10, 3, 0, 0, 0);
  v12 = dword_563908;
  v13 = a5 + *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7658);
  if ( v6[23] < 0 )
  {
    v6[23] = 0;
    v12 = dword_563908;
  }
  v14 = v6[24];
  v15 = *(_DWORD *)(v12[1504] + 6400) - v14 < 0 ? 0 : *(_DWORD *)(v12[1504] + 6400) - v14;
  if ( v6[23] > v15 )
  {
    v6[23] = v15;
    v12 = dword_563908;
  }
  v56 = *(_DWORD *)(v12[1504] + 6400);
  if ( *(_DWORD *)(v12[1504] + 6400) >= v14 + v6[23] )
    v56 = v14 + v6[23];
  v54 = (_DWORD *)v12[(*((_DWORD *)dword_563918 + 2339) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2339) - 1) + 1516];
  v49 = (*(signed __int16 *)(*(_DWORD *)(v6[25] + 2052) + 174) - *(signed __int16 *)(v54[513] + 174)) / 2;
  v16 = sub_49AD40(v54, "S") - 4;
  v17 = a4 + v16 + *((_DWORD *)dword_563908 + 7654);
  v44 = *((_DWORD *)dword_563908 + 7653) - v16 - 7;
  v53 = *(signed __int16 *)(*(_DWORD *)(v6[25] + 2052) + 174);
  v18 = 0;
  v6[27] = 0;
  result = (unsigned __int16 *)dword_563908;
  v52 = v17;
  v45 = 0;
  if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400) > 0 )
  {
    do
    {
      v20 = *(_DWORD *)(*((_DWORD *)result + 1504) + 4 * v18);
      v40 = *(_DWORD *)(*((_DWORD *)result + 1504) + 4 * v18);
      Source = 0;
      if ( v20 )
      {
        v21 = sub_4014FB(v20);
        v18 = v45;
        v20 = v40;
        Source = (char *)v21;
        if ( !v21 )
          ++v6[27];
        result = (unsigned __int16 *)dword_563908;
      }
      if ( v18 >= v6[23] && v18 < v56 )
      {
        if ( v20 )
        {
          v48 = 0;
          if ( *((_DWORD *)result + 6898) )
          {
            v48 = *(_WORD *)(v20 + 100) == *(_WORD *)(*((_DWORD *)result + 6897) + 100);
            v20 = v40;
          }
          v32 = v44;
          if ( *(_DWORD *)(v20 + 144) )
            v32 = v44 - 5;
          v33 = sub_49ADA0((_DWORD *)v6[25], (char *)(v20 + 32), v32) + 1;
          strncpy(&Dest, (const char *)(v40 + 32), v33);
          v34 = dword_563918;
          *((_BYTE *)&v64 + v33 + 3) = 0;
          v35 = v48 != 0 ? 4 : 0;
          v43 = v48 != 0 ? 4 : 0;
          if ( !v34[2333] && !v35 && *((_DWORD *)dword_563908 + 6898) )
          {
            v36 = *(signed __int16 *)(v40 + 100);
            if ( (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 284))() == v36 )
              v43 = 11;
            v35 = v43;
          }
          if ( v45 == v6[22] )
          {
            v61 = v17 - 2;
            v37 = v6[25];
            v63 = v17 - 2 + v44 + 4;
            v62 = v13;
            v64 = v13 + *(signed __int16 *)(*(_DWORD *)(v37 + 2052) + 174);
            (*(void (__thiscall **)(_DWORD *, _DWORD, int *))(*a3 + 40))(
              a3,
              *((unsigned __int16 *)dword_563908 + v35 + 100),
              &v61);
            v43 = 14;
            v35 = 14;
          }
          if ( *(_DWORD *)(v40 + 144) )
          {
            v38 = *(char **)(v40 + 148);
            if ( v38 )
            {
              sub_49B4F0((_DWORD *)v6[25], v38, v35 != 14 ? 1 : 14, a3, v17 + 4, v13, 3, 0);
            }
            else
            {
              if ( v35 == 14 )
                v39 = 0;
              else
                v39 = *((_WORD *)dword_563908 + 73);
              sub_4022E3(a3, v17 + 4, v53 / 2 + v13 - 1, 4, v39);
            }
            sub_49B310((_DWORD *)v6[25], &Dest, v43, a3, v17 + 5, v13, 3, 0);
          }
          else
          {
            sub_49B310((_DWORD *)v6[25], &Dest, v35, a3, v17, v13, 3, 0);
          }
          if ( Source )
          {
            sub_49B4F0(v54, "S", 5, a3, v17 - 2, v49 + v13, 3, 0);
            if ( *(_DWORD *)(v40 + 128) )
              sub_49B4F0(v54, "K", 2, a3, v17 - 7, v49 + v13, 3, 0);
          }
          else if ( *(_DWORD *)(v40 + 128) )
          {
            sub_49B4F0(v54, "K", 2, a3, v17 - 2, v13 + v49, 3, 0);
          }
        }
        else
        {
          Sourcea = *(char **)(*((_DWORD *)result + 1504) + 4 * v18 + 4);
          v47 = *((signed __int16 *)Sourcea + 50);
          v41 = 0;
          v55 = v18 + 1;
          v46 = *(_DWORD *)(*((_DWORD *)result + 1504) + 6400);
          if ( v18 + 1 < v46 )
          {
            v42 = *((_DWORD *)result + 1504) + 4 * v45 + 4;
            do
            {
              if ( !*(_DWORD *)v42 )
                break;
              if ( *(signed __int16 *)(*(_DWORD *)v42 + 100) != v47 )
                break;
              ++v41;
              v42 += 4;
              ++v55;
            }
            while ( v55 < v46 );
          }
          v22 = v17 - 2;
          v59 = v22 + v44 + 4;
          v60 = v13 + 1;
          v23 = *(void (__thiscall **)(_DWORD *, _DWORD, int *))(*a3 + 40);
          v57 = v22;
          v58 = v13;
          v23(a3, result[87], &v57);
          v24 = sub_49ADA0((_DWORD *)v6[25], Sourcea, v44 - 16) + 1;
          strncpy(&Dest, Sourcea, v24);
          v25 = (_DWORD *)v6[25];
          *((_BYTE *)&v64 + v24 + 3) = 0;
          v26 = v52 + (v44 - sub_49AD40(v25, &Dest)) / 2;
          sub_49B310((_DWORD *)v6[25], &Dest, 5, a3, v26, v13, 3, 0);
          sprintf(&Dest, "%d", v41);
          sub_49B4F0((_DWORD *)v6[25], &Dest, 5, a3, v44 + v52, v13, 3, 0);
          v27 = *((_DWORD *)dword_563908 + 1514);
          v28 = sub_401703(v47);
          if ( v28 > 0 )
          {
            sprintf(&Dest, "%d ", v28);
            sub_49B4F0((_DWORD *)v6[25], &Dest, 6, a3, v26, v13, 3, 0);
          }
          v17 = v52;
        }
        v13 += v53;
        result = (unsigned __int16 *)dword_563908;
        v18 = v45;
      }
      v45 = ++v18;
    }
    while ( v18 < *(_DWORD *)(*((_DWORD *)result + 1504) + 6400) );
  }
  if ( *((_BYTE *)result + 30768) )
  {
    v29 = *(_DWORD **)&result[2 * *((_DWORD *)result + 7688) + 3032];
    sprintf(&v66, (const char *)result + 30768, *(_DWORD *)(*((_DWORD *)result + 1504) + 12404));
    v30 = *((_DWORD *)dword_563908 + 7690);
    if ( v30 == -1 )
    {
      v31 = sub_49AD40(v29, &v66);
      result = (unsigned __int16 *)sub_49B310(
                                     v29,
                                     &v66,
                                     *((_DWORD *)dword_563908 + 7689),
                                     a3,
                                     a4
                                   + *((_DWORD *)dword_563908 + 7654)
                                   + (*((_DWORD *)dword_563908 + 7653) - v31) / 2,
                                     a5 + *((_DWORD *)dword_563908 + 7691),
                                     3,
                                     0);
    }
    else
    {
      result = (unsigned __int16 *)sub_49B310(
                                     v29,
                                     &v66,
                                     *((_DWORD *)dword_563908 + 7689),
                                     a3,
                                     a4 + v30,
                                     a5 + *((_DWORD *)dword_563908 + 7691),
                                     3,
                                     0);
    }
  }
  return result;
}
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401703: using guessed type _DWORD __stdcall sub_401703(_DWORD);
// 4022E3: using guessed type _DWORD __cdecl sub_4022E3(_DWORD, _DWORD, _DWORD, _DWORD, __int16);

//----- (0045A5F0) --------------------------------------------------------
int __fastcall sub_45A5F0(_DWORD *a1, int a2, _DWORD *a3, int a4, int a5)
{
  int result; // eax
  _DWORD *v6; // edi
  int v7; // esi
  int v8; // ecx
  signed __int16 *v9; // ebx
  int v10; // esi
  int v11; // ebp
  int v12; // ebx
  _DWORD *v13; // ecx
  int v14; // esi
  int v15; // eax
  int v16; // edx
  int v17; // eax
  int v18; // eax
  _DWORD *v19; // ecx
  int v20; // edx
  int v21; // ebp
  int v22; // ebp
  signed int v23; // eax
  char *v24; // ebx
  const char *v25; // eax
  char *v26; // ecx
  char v27; // dl
  int v28; // esi
  int v29; // esi
  int v30; // ecx
  void (__stdcall *v31)(_DWORD, int *); // edx
  int v32; // eax
  bool v33; // sf
  unsigned __int8 v34; // of
  signed int v35; // ebp
  int v36; // esi
  int v37; // eax
  int v38; // ebp
  int v39; // eax
  int v40; // [esp+28h] [ebp-148h]
  int v41; // [esp+2Ch] [ebp-144h]
  int v42; // [esp+30h] [ebp-140h]
  int v43; // [esp+34h] [ebp-13Ch]
  int v44; // [esp+38h] [ebp-138h]
  int v45; // [esp+3Ch] [ebp-134h]
  _DWORD *v46; // [esp+40h] [ebp-130h]
  int v47; // [esp+44h] [ebp-12Ch]
  int v48; // [esp+48h] [ebp-128h]
  int v49; // [esp+4Ch] [ebp-124h]
  int v50; // [esp+50h] [ebp-120h]
  int v51; // [esp+54h] [ebp-11Ch]
  int v52; // [esp+58h] [ebp-118h]
  char v53; // [esp+5Ch] [ebp-114h]
  char Dest[256]; // [esp+6Ch] [ebp-104h]

  result = (int)dword_563908;
  v6 = a1;
  if ( *((_DWORD *)dword_563908 + 6898) )
  {
    v7 = a5 + a1[13] + *((_DWORD *)dword_563908 + 7656);
    sub_4A4DC0(a1[32], a2, 0, (int)a3, a4 + *((_DWORD *)dword_563908 + 7655), v7, 3, 0, 0, 0);
    v8 = v6[32];
    v9 = *(signed __int16 **)(v8 + 360);
    v10 = abs(v9[3]) + v7;
    v11 = a5 + *(_DWORD *)(v6[19] + 8) - *((_DWORD *)dword_563908 + 7657) - abs(v9[15]);
    if ( abs(v9[9]) > 0 && v10 < v11 )
    {
      do
      {
        sub_4A4DC0(
          v8,
          a4 + *((_DWORD *)dword_563908 + 7655),
          1,
          (int)a3,
          a4 + *((_DWORD *)dword_563908 + 7655),
          v10,
          3,
          0,
          0,
          0);
        v8 = v6[32];
        v10 += abs(*(signed __int16 *)(*(_DWORD *)(v8 + 360) + 18));
      }
      while ( v10 < v11 );
    }
    v12 = a4;
    sub_4A4DC0(v6[32], (int)a3, 2, (int)a3, a4 + *((_DWORD *)dword_563908 + 7655), v11, 3, 0, 0, 0);
    v13 = dword_563908;
    v14 = a5 + v6[13] + *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7660);
    if ( v6[42] < 0 )
    {
      v6[42] = 0;
      v13 = dword_563908;
    }
    v15 = v6[40];
    v16 = (*(signed __int16 *)(v13[78] + 66) - v15) & ((*(signed __int16 *)(v13[78] + 66) - v15 < 0) - 1);
    if ( v6[42] > v16 )
    {
      v6[42] = v16;
      v13 = dword_563908;
    }
    v17 = v6[42] + v15;
    v43 = *(signed __int16 *)(v13[78] + 66);
    if ( v43 >= v17 )
      v43 = v17;
    v46 = (_DWORD *)v13[(*((_DWORD *)dword_563918 + 2338) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2338) - 1) + 1516];
    v47 = (*(signed __int16 *)(*(_DWORD *)(v6[31] + 2052) + 174) - *(signed __int16 *)(v46[513] + 174)) / 2;
    v18 = sub_49AD40(v46, "B3");
    v19 = dword_563908;
    v18 -= 4;
    v20 = *((_DWORD *)dword_563908 + 7653) - v18;
    v21 = v18 + *((_DWORD *)dword_563908 + 7654);
    result = v6[42];
    v22 = a4 + v21;
    v45 = v20 - 7;
    v42 = v14;
    v40 = result;
    if ( result < v43 )
    {
      v41 = 4 * result + 68;
      while ( 1 )
      {
        v44 = *(signed __int16 *)(v19[78] + v41);
        v23 = abs(v44);
        if ( v23 <= 5100 )
        {
          v24 = *(char **)(v19[1507] + 4 * v23 + 8008);
          if ( v24 )
          {
            v48 = sub_49ADA0((_DWORD *)v6[31], v24 + 72, v45);
            v26 = v24 + 72;
            do
            {
              v27 = *v26;
              v26[Dest - (v24 + 72)] = *v26;
              ++v26;
            }
            while ( v27 );
            Dest[v48] = 0;
            goto LABEL_20;
          }
        }
        else
        {
          v24 = 0;
        }
        v25 = (const char *)sub_402617(0x20u);
        sprintf(Dest, v25);
LABEL_20:
        v28 = 0;
        if ( v44 >= 0 )
        {
          if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v24 + 8))(v24) )
          {
            v29 = *((_DWORD *)v24 + 63);
            if ( *((signed __int16 *)v24 + 206) == *((_DWORD *)v24 + 32) )
              v28 = v29 != 0 ? 6 : 13;
            else
              v28 = v29 != 0 ? 2 : 9;
          }
          else if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v24 + 12))(v24) )
          {
            v28 = *((_DWORD *)v24 + 63) != 0 ? 4 : 11;
          }
        }
        else
        {
          v28 = *((_DWORD *)v24 + 63) != 0 ? 5 : 12;
        }
        if ( v40 == v6[41] )
        {
          v30 = v6[31];
          v49 = v22 - 2;
          v51 = v22 - 2 + v45 + 4;
          v50 = v42;
          v31 = *(void (__stdcall **)(_DWORD, int *))(*a3 + 40);
          v52 = v42 + *(signed __int16 *)(*(_DWORD *)(v30 + 2052) + 174);
          v31(*((unsigned __int16 *)dword_563908 + v28 + 100), &v49);
          v28 = 14;
        }
        v53 = 0;
        v32 = sub_40143D(v44);
        if ( v32 >= 0 )
        {
          sprintf(&v53, "%d", v32 + 1);
          sub_49B4F0(v46, &v53, 0, a3, v22 - 2, v42 + v47, 3, 0);
        }
        sub_49B310((_DWORD *)v6[31], Dest, v28, a3, v22, v42, 3, 0);
        v41 += 4;
        v19 = dword_563908;
        result = v40 + 1;
        v34 = __OFSUB__(v40 + 1, v43);
        v33 = v40 + 1 - v43 < 0;
        v42 += *(signed __int16 *)(*(_DWORD *)(v6[31] + 2052) + 174);
        ++v40;
        if ( !(v33 ^ v34) )
        {
          v12 = a4;
          break;
        }
      }
    }
    if ( v19[7662] )
    {
      v35 = 0;
      v36 = a5 + *(_DWORD *)(v6[19] + 8) - v19[7657];
      if ( v19[6898] )
      {
        v37 = (*(int (**)(void))(*(_DWORD *)v19[6898] + 60))();
        v19 = dword_563908;
        v35 = v37;
      }
      sprintf(Dest, "%.2f kg (%d%%)", (double)(signed int)v19[79] / 1000.0, v35 / 10);
      if ( v35 )
        v38 = v35 < 1000 ? 4 : 1;
      else
        v38 = 2;
      v39 = sub_49AD40((_DWORD *)v6[31], Dest);
      result = sub_49B310(
                 (_DWORD *)v6[31],
                 Dest,
                 v38,
                 a3,
                 v12 + *((_DWORD *)dword_563908 + 7654) + (*((_DWORD *)dword_563908 + 7653) - v39) / 2,
                 v36,
                 3,
                 0);
    }
  }
  return result;
}
// 40143D: using guessed type _DWORD __stdcall sub_40143D(_DWORD);
// 45A5F0: using guessed type char Dest[256];

//----- (0045AC90) --------------------------------------------------------
int __thiscall sub_45AC90(void *this, _DWORD *a2)
{
  int v2; // ebp
  void (__thiscall *v3)(_DWORD *, int); // eax
  void *v4; // esi
  int v5; // ST38_4
  int v6; // eax
  _DWORD *v7; // ecx
  int v8; // edi
  int v9; // ebx
  int v10; // edx
  int v11; // edx
  int v12; // ecx
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // edx
  int v17; // edx
  int v18; // ecx
  _WORD *v19; // eax
  int v20; // ebx
  unsigned __int16 v21; // cx
  int v22; // edi
  bool v23; // zf
  int v24; // edi
  int v25; // eax
  _DWORD *v26; // edi
  int v27; // ebx
  int v28; // ecx
  int v29; // ecx
  int v30; // eax
  int v31; // ebx
  int v32; // ecx
  signed int v33; // eax
  int v34; // eax
  int v35; // eax
  _DWORD *v36; // ecx
  int v37; // edi
  int v38; // edx
  int v39; // ebx
  signed int v40; // eax
  int v41; // ecx
  int v42; // ebx
  int v43; // eax
  int v44; // eax
  char *v45; // eax
  int v46; // edi
  signed int v47; // eax
  _DWORD *v48; // ebp
  int v49; // ebx
  signed int v50; // edx
  _DWORD *v51; // eax
  int v52; // edx
  int v53; // edi
  int v54; // ebx
  __int16 v55; // ax
  int v56; // ecx
  signed int v57; // eax
  int v58; // eax
  __int16 v59; // ax
  __int16 v60; // ax
  __int16 v61; // ax
  __int16 v62; // ax
  int v63; // eax
  char v64; // cl
  int v65; // eax
  int v66; // edi
  _DWORD *v67; // ebp
  int v68; // eax
  signed int v69; // edi
  int v70; // ebx
  int v71; // edx
  int v72; // ecx
  signed int v73; // eax
  int v74; // eax
  int v75; // eax
  int v76; // eax
  char *v77; // eax
  int v79; // [esp+44h] [ebp-184h]
  signed int v80; // [esp+44h] [ebp-184h]
  int v81; // [esp+44h] [ebp-184h]
  int v82; // [esp+44h] [ebp-184h]
  int v83; // [esp+44h] [ebp-184h]
  int v84; // [esp+48h] [ebp-180h]
  _WORD *v85; // [esp+48h] [ebp-180h]
  int v86; // [esp+48h] [ebp-180h]
  int v87; // [esp+48h] [ebp-180h]
  int v88; // [esp+48h] [ebp-180h]
  int v89; // [esp+4Ch] [ebp-17Ch]
  int v90; // [esp+4Ch] [ebp-17Ch]
  signed int v91; // [esp+50h] [ebp-178h]
  int v92; // [esp+50h] [ebp-178h]
  int v93; // [esp+50h] [ebp-178h]
  int v94; // [esp+50h] [ebp-178h]
  int v95; // [esp+54h] [ebp-174h]
  _DWORD *v96; // [esp+58h] [ebp-170h]
  int v97; // [esp+5Ch] [ebp-16Ch]
  int v98; // [esp+60h] [ebp-168h]
  char Dest[4]; // [esp+64h] [ebp-164h]
  char v100[2]; // [esp+84h] [ebp-144h]
  char v101[256]; // [esp+C4h] [ebp-104h]

  v2 = (int)a2;
  v3 = *(void (__thiscall **)(_DWORD *, int))(*a2 + 64);
  v4 = this;
  v5 = *((_DWORD *)dword_563908 + 1499) + 8;
  v96 = a2;
  v3(a2, v5);
  v6 = *((_DWORD *)v4 + 18);
  if ( v6 != 2 && v6 != 1 )
    return (*(int (__thiscall **)(int, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v2 + 68))(v2, 0, 0, -1, -1);
  v7 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1499) )
  {
    v8 = *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7658);
    v9 = *((_DWORD *)v4 + 8);
    v10 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400);
    if ( v10 >= *((_DWORD *)v4 + 24) + *((_DWORD *)v4 + 23) )
    {
      v10 = *((_DWORD *)v4 + 24) + *((_DWORD *)v4 + 23);
      v84 = *((_DWORD *)v4 + 24) + *((_DWORD *)v4 + 23);
    }
    else
    {
      v84 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400);
    }
    v95 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v4 + 25) + 2052) + 174);
    v79 = *((_DWORD *)v4 + 23);
    if ( *((_DWORD *)v4 + 23) < v10 )
    {
      do
      {
        v11 = *(_DWORD *)(v7[1504] + 4 * v79);
        if ( v11 )
        {
          if ( *(_DWORD *)(v11 + 120) > 0 )
          {
            sprintf(Dest, "%d", *(_DWORD *)(v11 + 120));
            sub_49B4F0(*((_DWORD **)v4 + 25), Dest, 6, a2, v9, v8, 3, 0);
LABEL_14:
            v7 = dword_563908;
            goto LABEL_15;
          }
          if ( v7[1501] )
          {
            v12 = v7[1501];
            if ( sub_401FE1(*(signed __int16 *)(v11 + 96)) >= 0 )
              sub_49B4F0(*((_DWORD **)v4 + 25), "*", 5, a2, v9, v8, 3, 0);
            goto LABEL_14;
          }
        }
LABEL_15:
        v8 += v95;
        ++v79;
      }
      while ( v79 < v84 );
    }
  }
  if ( v7[2687] )
  {
    v13 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**((_DWORD **)v4 + 49) + 4))(
            *((_DWORD *)v4 + 49),
            v7[2688],
            v7[2689],
            0,
            0)
        - 5;
    if ( !v13 )
    {
      v35 = *((_DWORD *)v4 + 42);
      v87 = *((_DWORD *)v4 + 8);
      v36 = dword_563908;
      v37 = *((_DWORD *)v4 + 13) + *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7660);
      v38 = v35 + *((_DWORD *)v4 + 40);
      if ( *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66) < v38 )
        v38 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66);
      if ( v35 < v38 )
      {
        v39 = 4 * v35 + 68;
        v83 = 4 * v35 + 68;
        v93 = v38 - v35;
        do
        {
          v40 = abs(*(signed __int16 *)(v39 + v36[78]));
          if ( v40 <= 5100 && *(_DWORD *)(v36[1507] + 4 * v40 + 8008) )
          {
            v41 = v36[78];
            if ( *(_WORD *)(v41 + v39) <= 0 )
              strcpy(v100, "-");
            else
              sprintf(v100, "%d", *(signed __int16 *)(v41 + v39 + 2));
            v42 = sub_49AB80(*((int **)v4 + 31), v100, 0, *((_DWORD **)v4 + 12), v87, v37, 3, 0);
            v43 = sub_40143D(abs(*(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + v83)));
            if ( v43 >= 0 )
            {
              v44 = sub_4A9DE0(dword_56390C, v43 + 11);
              v45 = sub_4AA690(v44);
              sprintf(v100, "%s  ", v45);
              sub_49B4F0(*((_DWORD **)v4 + 31), v100, 4, *((_DWORD **)v4 + 12), v87 - v42, v37, 3, 0);
            }
            v39 = v83;
            v37 += *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v4 + 31) + 2052) + 174);
            v36 = dword_563908;
          }
          v39 += 4;
          v23 = v93-- == 1;
          v83 = v39;
        }
        while ( !v23 );
      }
      return (*(int (__thiscall **)(int, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v2 + 68))(v2, 0, 0, -1, -1);
    }
    v14 = v13 - 1;
    if ( !v14 )
    {
      v26 = dword_563908;
      v86 = *((_DWORD *)v4 + 8);
      v82 = *((_DWORD *)v4 + 13) + *((_DWORD *)dword_563908 + 7656) + *((_DWORD *)dword_563908 + 7660);
      if ( *((_DWORD *)dword_563908 + 6898) )
      {
        v27 = *(_DWORD *)(*((_DWORD *)v4 + 19) + 8) - *((_DWORD *)dword_563908 + 7657);
        v28 = *((_DWORD *)dword_563908 + 6897);
        sub_4018CF(&v95, &v96);
        sprintf(Dest, "max=%.2f kg", (double)v95 / 1000.0);
        sub_49AB80(*((int **)v4 + 31), Dest, 2, *((_DWORD **)v4 + 12), v86, v27, 3, 0);
        v26 = dword_563908;
      }
      v29 = *((_DWORD *)v4 + 42);
      v30 = v29 + *((_DWORD *)v4 + 40);
      if ( *(signed __int16 *)(v26[78] + 66) < v30 )
        v30 = *(signed __int16 *)(v26[78] + 66);
      if ( v29 < v30 )
      {
        v31 = 4 * v29 + 68;
        v92 = v30 - v29;
        do
        {
          v32 = v26[78];
          v33 = abs(*(signed __int16 *)(v32 + v31));
          if ( v33 <= 5100 )
          {
            v34 = *(_DWORD *)(v26[1507] + 4 * v33 + 8008);
            if ( v34 )
            {
              if ( *(_WORD *)(v32 + v31) > 0 )
              {
                v95 = *(_DWORD *)(v34 + 132) * *(signed __int16 *)(v32 + v31 + 2);
                sprintf(Dest, "%.2f kg", (double)v95 / 1000.0);
                sub_49AB80(*((int **)v4 + 31), Dest, 0, *((_DWORD **)v4 + 12), v86, v82, 3, 0);
                v26 = dword_563908;
              }
              v82 += *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v4 + 31) + 2052) + 174);
            }
          }
          v31 += 4;
          --v92;
        }
        while ( v92 );
      }
      return (*(int (__thiscall **)(int, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v2 + 68))(v2, 0, 0, -1, -1);
    }
    v7 = dword_563908;
    if ( v14 == 3 )
    {
      v15 = *((_DWORD *)dword_563908 + 1504);
      v16 = *((_DWORD *)v4 + 21);
      if ( v16 < *(_DWORD *)(v15 + 6400) )
      {
        if ( *((_DWORD *)dword_563918 + 2223) )
        {
          v17 = *(_DWORD *)(v15 + 4 * v16);
          if ( v17 )
          {
            if ( *(_DWORD *)(v17 + 136) != *((_DWORD *)dword_563908 + 3117) )
            {
              v18 = *((_DWORD *)dword_563908 + 2689) - 12;
              v89 = *((_DWORD *)v4 + 8) - 40;
              v19 = (_WORD *)(v17 + 152);
              v95 = *((_DWORD *)dword_563908 + 2689) - 12;
              v80 = 18;
              while ( 1 )
              {
                v20 = v18;
                v85 = v19;
                v91 = 12;
                do
                {
                  v21 = *v19;
                  if ( *v19 )
                  {
                    v22 = v21;
                    (*(void (__thiscall **)(_DWORD *, int, int, _DWORD))(*a2 + 24))(a2, v89, v20, v21);
                    (*(void (__thiscall **)(_DWORD *, int, int, int))(*a2 + 24))(a2, v89 + 1, v20, v22);
                    (*(void (__thiscall **)(_DWORD *, int, int, int))(*a2 + 24))(a2, v89, v20 + 1, v22);
                    (*(void (__thiscall **)(_DWORD *, int, int, int))(*a2 + 24))(a2, v89 + 1, v20 + 1, v22);
                    v19 = v85;
                  }
                  ++v19;
                  v20 += 2;
                  v23 = v91-- == 1;
                  v85 = v19;
                }
                while ( !v23 );
                v89 += 2;
                if ( !--v80 )
                  break;
                v18 = v95;
              }
              v7 = dword_563908;
            }
          }
        }
      }
    }
  }
  if ( v7[1535] == v7[1499] )
  {
    v24 = *((_DWORD *)v4 + 42);
    v81 = *((_DWORD *)v4 + 8);
    v90 = *((_DWORD *)v4 + 13) + v7[7656] + v7[7660];
    v25 = *((_DWORD *)v4 + 40) + v24;
    if ( *(signed __int16 *)(v7[78] + 66) >= v25 )
    {
      v95 = *((_DWORD *)v4 + 40) + v24;
    }
    else
    {
      v25 = *(signed __int16 *)(v7[78] + 66);
      v95 = *(signed __int16 *)(v7[78] + 66);
    }
    v94 = v24;
    if ( v24 < v25 )
    {
      v88 = 4 * v24 + 68;
      while ( 1 )
      {
        v46 = *(signed __int16 *)(v7[78] + v88);
        v47 = abs(v46);
        v97 = v47;
        if ( v47 <= 5100 )
        {
          v98 = *(_DWORD *)(v7[1507] + 4 * v47 + 8008);
          v48 = (_DWORD *)v98;
          if ( v98 )
            break;
        }
LABEL_123:
        v90 += *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v4 + 31) + 2052) + 174);
        v88 += 4;
        if ( ++v94 >= v95 )
        {
          v2 = (int)v96;
          return (*(int (__thiscall **)(int, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v2 + 68))(
                   v2,
                   0,
                   0,
                   -1,
                   -1);
        }
      }
      v49 = 0;
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)v98 + 8))(v98) )
      {
        v7 = dword_563908;
        if ( v94 != *((_DWORD *)v4 + 41) )
        {
          v50 = 0;
          v51 = (char *)dword_563908 + 27612;
          while ( *(v51 - 1) != v46 )
          {
            if ( *v51 == v46 )
            {
              ++v50;
              break;
            }
            if ( v51[1] == v46 )
            {
              v50 += 2;
              break;
            }
            if ( v51[2] == v46 )
            {
              v50 += 3;
              break;
            }
            v50 += 4;
            v51 += 4;
            if ( v50 >= 16 )
              break;
          }
          if ( v50 == 16 )
            goto LABEL_116;
        }
        v52 = *(_DWORD *)(v98 + 128);
        v53 = 2;
        if ( v52 != *((_DWORD *)dword_563908 + 6919)
          || abs(sub_401D39(dword_563908, v52) - *((_DWORD *)dword_563908 + 6920)) >= 25 )
        {
          if ( (*(_DWORD *)(v98 + 260) ^ 0x12345678) > 200 )
            v53 = 1;
        }
        else
        {
          v53 = 5;
        }
        v54 = sub_402676(*(_DWORD *)(v98 + 128));
        v55 = *(_WORD *)(v98 + 412);
        if ( v55 <= 0 )
        {
          v61 = *(_WORD *)(v98 + 166);
          if ( v61 && v54 > abs(v61) )
          {
            strcpy(Dest, "(over)--");
            v53 = 1;
          }
          else
          {
            strcpy(Dest, "--");
          }
        }
        else
        {
          v56 = sub_402676(v55);
          v57 = abs(*(signed __int16 *)(v98 + 412));
          if ( v57 <= 5100
            && (v58 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v57 + 8008)) != 0
            && (v59 = *(_WORD *)(v58 + 166)) != 0
            && v56 > abs(v59)
            || (v60 = *(_WORD *)(v98 + 166)) != 0 && v54 > abs(v60) )
          {
            sprintf(Dest, "(over)%d", v56);
            v53 = 1;
          }
          else
          {
            sprintf(Dest, "%d", v56);
          }
        }
        v62 = *(_WORD *)(v98 + 406);
        if ( v62 > 0 && (*(_DWORD *)(v98 + 256) ^ 0x12345678) == v62 )
        {
          sprintf(v101, "(load)%s", Dest);
          v63 = 0;
          do
          {
            v64 = v101[v63];
            Dest[v63++] = v64;
          }
          while ( v64 );
          v53 = 1;
        }
        v65 = sub_49AB80(*((int **)v4 + 31), Dest, v53, *((_DWORD **)v4 + 12), v81, v90, 3, 0);
        v66 = v48[65] ^ 0x12345678;
        v49 = v65;
        if ( v66 > 300 )
        {
          v67 = (_DWORD *)*((_DWORD *)dword_563908
                          + (*((_DWORD *)dword_563918 + 2338) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2338) - 1)
                          + 1516);
          sprintf(v100, "%d.%d ", v66 / 100, v66 % 100 / 10);
          v68 = sub_49B4F0(
                  v67,
                  v100,
                  1,
                  *((_DWORD **)v4 + 12),
                  v81 - v49,
                  v90
                + (*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)v4 + 31) + 2052) + 174)
                 - *(signed __int16 *)(v67[513] + 174))
                / 2,
                  3,
                  0);
          v48 = (_DWORD *)v98;
          v49 += v68;
        }
      }
      else if ( (*(int (__thiscall **)(int))(*(_DWORD *)v98 + 12))(v98) && *(_DWORD *)(v98 + 264) )
      {
        v69 = 0;
        if ( *((_DWORD *)dword_563908 + 6898) )
        {
          v70 = (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 56))();
          v73 = abs(sub_401D39(v72, v71) - v70);
          if ( *(_WORD *)(v98 + 318) >= 0 && v73 < *(signed __int16 *)(v98 + 328) )
            v69 = 1;
          if ( *(_WORD *)(v98 + 316) >= 0 && v73 < *(signed __int16 *)(v98 + 326) )
            v69 = 1;
        }
        v49 = sub_49B4F0(*((_DWORD **)v4 + 31), "On", 4 * (v69 == 0) + 1, *((_DWORD **)v4 + 12), v81, v90, 3, 0);
      }
      v7 = dword_563908;
LABEL_116:
      if ( v48[37] && (v48[70] ^ 0x12345678) >= 0 && v48[70] != 305419896 )
      {
        sprintf(v100, "%d.%d ", (v48[70] ^ 0x12345678) / 100, (v48[70] ^ 0x12345678) % 100 / 10);
        v74 = sub_49B4F0(*((_DWORD **)v4 + 31), v100, 4, *((_DWORD **)v4 + 12), v81 - v49, v90, 3, 0);
        v7 = dword_563908;
        v49 += v74;
      }
      if ( *((_DWORD *)dword_563918 + 2257) )
      {
        v75 = sub_40143D(v97);
        if ( v75 >= 0 )
        {
          v76 = sub_4A9DE0(dword_56390C, v75 + 11);
          v77 = sub_4AA690(v76);
          sprintf(v101, "%s  ", v77);
          sub_49B4F0(*((_DWORD **)v4 + 31), v101, 4, *((_DWORD **)v4 + 12), v81 - v49, v90, 3, 0);
        }
        v7 = dword_563908;
      }
      goto LABEL_123;
    }
  }
  return (*(int (__thiscall **)(int, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v2 + 68))(v2, 0, 0, -1, -1);
}
// 40143D: using guessed type _DWORD __stdcall sub_40143D(_DWORD);
// 4018CF: using guessed type _DWORD __stdcall sub_4018CF(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401FE1: using guessed type _DWORD __stdcall sub_401FE1(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 45AC90: using guessed type char var_104[256];

//----- (0045BAF0) --------------------------------------------------------
_DWORD *__thiscall sub_45BAF0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // edx

  v2 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = &off_511698;
  *this = &off_515F9C;
  this[1] = &NotepadManager::`vftable';
  this[2] = &NotepadManager::`vftable';
  this[12] = a2;
  sub_401F64((char *)dword_563908 + 30348, this + 3);
  sub_401F64((char *)dword_563908 + 30396, v2 + 36);
  sub_401F64((char *)dword_563908 + 30444, v2 + 32);
  v2[19] = 0;
  v2[16] = 0;
  v2[43] = 0;
  v2[26] = 0;
  v2[25] = 0;
  v2[31] = 0;
  v2[27] = 0;
  v2[28] = 0;
  v2[29] = 0;
  v2[14] = 0;
  v2[44] = 0;
  v2[45] = 0;
  v2[46] = 0;
  v2[47] = 0;
  v2[18] = 2;
  v3 = *((_DWORD *)dword_563918 + 2245);
  v2[20] = 0;
  v2[21] = 0;
  v2[22] = 0;
  v2[23] = 0;
  v2[24] = 0;
  v2[41] = 0;
  v2[42] = 0;
  v2[40] = 0;
  v2[49] = 0;
  v2[7] = v3;
  return v2;
}
// 401F64: using guessed type _DWORD __stdcall sub_401F64(_DWORD, _DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 515F60: using guessed type void *NotepadManager::`vftable';
// 515F6C: using guessed type void *NotepadManager::`vftable';
// 515F9C: using guessed type int (__stdcall *off_515F9C)(int, int, int);

//----- (0045BC20) --------------------------------------------------------
void __thiscall sub_45BC20(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  void (__stdcall ***v3)(signed int); // ecx
  void *v4; // edi
  void *v5; // edi

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[19];
  *v1 = &off_515F9C;
  v1[1] = &NotepadManager::`vftable';
  v1[2] = &NotepadManager::`vftable';
  if ( v2 )
  {
    (**v2)(1);
    v1[19] = 0;
  }
  v3 = (void (__stdcall ***)(signed int))v1[49];
  if ( v3 )
  {
    (**v3)(1);
    v1[49] = 0;
  }
  v4 = (void *)v1[43];
  if ( v4 )
  {
    sub_402040(v1[43]);
    j__free(v4);
    v1[43] = 0;
  }
  v5 = (void *)v1[26];
  if ( v5 )
  {
    sub_402040(v1[26]);
    j__free(v5);
    v1[26] = 0;
  }
}
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 515F60: using guessed type void *NotepadManager::`vftable';
// 515F6C: using guessed type void *NotepadManager::`vftable';
// 515F9C: using guessed type int (__stdcall *off_515F9C)(int, int, int);

//----- (0045BCD0) --------------------------------------------------------
int __thiscall sub_45BCD0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  this[18] = a2;
  result = sub_401E6A();
  v2[15] = 1;
  return result;
}
// 401E6A: using guessed type int sub_401E6A(void);

//----- (0045BCF0) --------------------------------------------------------
int __thiscall sub_45BCF0(_DWORD *this, int a2, unsigned int a3, int a4)
{
  int result; // eax
  int v5; // esi
  int v6; // ecx
  char *v7; // ecx
  char *v8; // ST04_4
  int v9; // ecx
  void *v10; // ecx
  int v11; // edx
  int v12; // edi
  signed __int16 *v13; // edx
  int v14; // ecx
  int v15; // esi
  _DWORD *v16; // eax
  int v17; // ecx
  int v18; // eax
  int v19; // eax
  __int16 v20; // ax
  int v21; // [esp-4h] [ebp-238h]
  int v22; // [esp+14h] [ebp-220h]
  int v23; // [esp+18h] [ebp-21Ch]
  int v24; // [esp+1Ch] [ebp-218h]
  _DWORD *v25; // [esp+20h] [ebp-214h]
  char Dest; // [esp+24h] [ebp-210h]
  char v27; // [esp+124h] [ebp-110h]
  int v28; // [esp+230h] [ebp-4h]

  v25 = this;
  if ( a2 )
  {
    result = a2 - 2;
    if ( a2 == 2 && a3 <= 0x1387 )
    {
      result = (int)dword_563908;
      v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * a3 + 12408);
      if ( v5 )
      {
        switch ( a4 )
        {
          case 0:
            sprintf(&Dest, ":%s:", v5 + 32);
            v6 = *((_DWORD *)dword_563908 + 1509);
            return sub_4012D0(&Dest);
          case 1:
          case 2:
            sprintf(&Dest, "?ignore %s", v5 + 32);
            goto LABEL_15;
          case 3:
            sprintf(&v27, ":%s:?info", v5 + 32);
            v21 = 0;
            v7 = &v27;
            goto LABEL_19;
          case 4:
            if ( *((_DWORD *)dword_563908 + 6898) )
            {
              result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))();
              if ( result == 4 )
                result = (*(int (__stdcall **)(_DWORD, signed int))(*(_DWORD *)dword_56391C + 148))(
                           *(signed __int16 *)(v5 + 96),
                           -1);
            }
            return result;
          case 5:
            sprintf(&Dest, "?summon %s", v5 + 32);
            goto LABEL_15;
          case 6:
            sprintf(&Dest, "?mark %s", v5 + 32);
LABEL_15:
            v21 = 1;
            v7 = &Dest;
LABEL_19:
            v8 = v7;
            v9 = *((_DWORD *)dword_563908 + 1509);
            result = sub_402793(v8, v21);
            break;
          case 7:
            *((_DWORD *)dword_563918 + 2333) = 0;
            result = sub_4010FA(*((_DWORD *)dword_563908 + 1504));
            break;
          case 8:
            *((_DWORD *)dword_563918 + 2333) = 1;
            result = sub_4010FA(*((_DWORD *)dword_563908 + 1504));
            break;
          case 9:
            result = (int)dword_563918;
            *((_DWORD *)dword_563918 + 2274) = 0;
            break;
          case 10:
            *((_DWORD *)dword_563918 + 2274) = 1;
            break;
          default:
            return result;
        }
      }
    }
  }
  else
  {
    v10 = dword_563908;
    v11 = *((_DWORD *)dword_563908 + 78);
    result = *(signed __int16 *)(v11 + 66);
    v12 = 0;
    if ( result > 0 )
    {
      v13 = (signed __int16 *)(v11 + 68);
      while ( *v13 != a3 )
      {
        ++v12;
        v13 += 2;
        if ( v12 >= result )
          return result;
      }
      if ( v12 != -1 )
      {
        v22 = 0;
        LOWORD(v23) = 0;
        HIWORD(v23) = a3;
        LOWORD(v24) = 0;
        v22 = *((unsigned __int16 *)dword_563908 + 124);
        HIWORD(v22) = *((_WORD *)dword_563908 + 126);
        result = abs((signed __int16)a3);
        if ( result <= 5100 )
        {
          if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * result + 8008) )
          {
            switch ( a4 )
            {
              case 0:
                LOWORD(v24) = *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * v12 + 70);
                goto LABEL_30;
              case 1:
                LOWORD(v24) = *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 4 * v12 + 70) / 2;
                goto LABEL_32;
              case 2:
                LOWORD(v24) = 1;
                goto LABEL_30;
              case 3:
                LOWORD(v24) = 10;
LABEL_32:
                (*(void (__stdcall **)(int *))(*(_DWORD *)dword_56391C + 36))(&v22);
                goto LABEL_50;
              case 4:
                LOWORD(v24) = 50;
LABEL_30:
                (*(void (__stdcall **)(int *))(*(_DWORD *)dword_56391C + 36))(&v22);
                goto LABEL_50;
              case 5:
                v14 = *((_DWORD *)dword_563908 + 1509);
                sub_4020D1(1, a3);
                goto LABEL_50;
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 14:
              case 15:
              case 16:
              case 17:
              case 18:
              case 19:
              case 20:
              case 21:
              case 22:
                v19 = sub_40143D(a3);
                if ( v19 >= 0 )
                  *((_DWORD *)dword_563908 + v19 + 6902) = 0;
                v20 = 0;
                if ( a4 != 22 )
                {
                  v20 = a4 - 5;
                  *((_DWORD *)dword_563908 + a4 - 5 + 6901) = a3;
                }
                sub_4023A1(abs(a3), v20);
                v25[15] = 1;
                goto LABEL_50;
              case 23:
                v15 = sub_40143D(a3);
                v16 = dword_563908;
                if ( *((_DWORD *)dword_563908 + 355) )
                {
                  v17 = *((_DWORD *)dword_563908 + 355);
                  if ( v17 )
                  {
                    (*(void (__stdcall **)(signed int))(*(_DWORD *)v17 + 36))(1);
                    v16 = dword_563908;
                  }
                  v16[355] = 0;
                }
                v25 = operator new(0x82Cu);
                v28 = 0;
                if ( v25 )
                  v18 = sub_40108C(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2335) + 1516), v15 + 11, 1000);
                else
                  v18 = 0;
                v28 = -1;
                *((_DWORD *)dword_563908 + 355) = v18;
LABEL_50:
                v10 = dword_563908;
                break;
              default:
                break;
            }
            result = sub_401640(v10);
          }
        }
      }
    }
  }
  return result;
}
// 40108C: using guessed type _DWORD __stdcall sub_40108C(_DWORD, _DWORD, _DWORD);
// 4010FA: using guessed type int __thiscall sub_4010FA(_DWORD);
// 40143D: using guessed type _DWORD __stdcall sub_40143D(_DWORD);
// 401640: using guessed type int __thiscall sub_401640(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 4023A1: using guessed type _DWORD __stdcall sub_4023A1(_DWORD, __int16);
// 56391C: using guessed type int dword_56391C;

//----- (0045C2C0) --------------------------------------------------------
_DWORD *__fastcall sub_45C2C0(int a1, int a2, int a3, int a4)
{
  int v4; // ebx
  int v5; // esi
  _DWORD *v6; // ecx
  int v7; // edi
  int v8; // ecx
  void *v9; // ecx
  signed int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v13; // edx
  int v14; // eax
  int v15; // eax
  __int64 v16; // rax
  signed int v17; // edi
  _DWORD *result; // eax
  int v19; // ecx
  int v20; // eax
  bool v21; // zf
  int v22; // ecx
  int v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // ecx
  char v27; // [esp+10h] [ebp-Ch]
  char v28; // [esp+14h] [ebp-8h]
  char v29; // [esp+18h] [ebp-4h]

  v4 = 0;
  v5 = a1;
  if ( *((_DWORD *)dword_563908 + 6898)
    && (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))() == 4
    && *((_DWORD *)dword_56390C + 1549) )
  {
    v6 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 1501) && *(_DWORD *)((char *)dword_563908 + 58554) > 0 )
    {
      v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 400);
      while ( 1 )
      {
        v8 = v6[1501];
        v7 = (v7 + 1) % 5;
        if ( sub_4017AD(v7, &v29, &v28, &v27) )
          break;
        if ( ++v4 >= 5 )
          break;
        v6 = dword_563908;
      }
      sub_402063(-1, v7);
      LOWORD(v4) = 0;
    }
    else
    {
      sub_4013A7(*((_DWORD *)dword_563908 + 6898));
    }
  }
  v9 = dword_56390C;
  v10 = 0;
  if ( *((_DWORD *)dword_56390C + 1604) )
    v10 = -1;
  if ( *((_DWORD *)dword_56390C + 1605) )
  {
    v10 = 1;
  }
  else if ( !v10 )
  {
    goto LABEL_29;
  }
  *(_DWORD *)(v5 + 160) += v10;
  v11 = *(_DWORD *)(v5 + 160);
  *(_DWORD *)(v5 + 56) = 1;
  v12 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66);
  if ( v11 >= v12 )
    *(_DWORD *)(v5 + 160) = v12 - 1;
  if ( *(_DWORD *)(v5 + 160) < 0 )
    *(_DWORD *)(v5 + 160) = 0;
  v13 = *(_DWORD *)(v5 + 160);
  if ( *(_DWORD *)(v5 + 164) > v13 )
    *(_DWORD *)(v5 + 164) = v13;
  v14 = *(_DWORD *)(v5 + 156);
  if ( v13 >= v14 + *(_DWORD *)(v5 + 164) )
    *(_DWORD *)(v5 + 164) = v13 - v14 + 1 < 0 ? 0 : v13 - v14 + 1;
  v15 = *((_DWORD *)dword_563908 + 78);
  if ( *(_WORD *)(v15 + 66) != (_WORD)v4 && *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
  {
    v16 = *(signed __int16 *)(v15 + 4 * v13 + 68);
    sub_4020D1(1, (HIDWORD(v16) ^ v16) - HIDWORD(v16));
  }
  (**(void (__thiscall ***)(int, signed int, _DWORD))(v5 + 4))(v5 + 4, 2, 0);
LABEL_29:
  v17 = 0;
  if ( *((_DWORD *)dword_56390C + 1565) )
    v17 = -1;
  if ( *((_DWORD *)dword_56390C + 1566) )
  {
    v17 = 1;
  }
  else if ( !v17 )
  {
    goto LABEL_36;
  }
  *(_DWORD *)(v5 + 112) = sub_401D39(v9, a2);
  if ( *((_DWORD *)dword_563908 + 3110) < 20 )
  {
    *(_DWORD *)(v5 + 108) = 1;
    sub_40253B(dword_563908);
  }
LABEL_36:
  result = dword_563908;
  if ( *(_DWORD *)(v5 + 84) < *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400)
    && *((_DWORD *)dword_563908 + 6898)
    && (result = (_DWORD *)(*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 6898) + 72) + 4))(),
        result == (_DWORD *)4)
    && (result = dword_56390C, *((_DWORD *)dword_56390C + 1548)) )
  {
    v19 = *(_DWORD *)(v5 + 84);
    v20 = *((_DWORD *)dword_563908 + 1504);
    v21 = *(_DWORD *)(v20 + 4 * v19) == 0;
    result = (_DWORD *)(v20 + 4 * v19);
    if ( !v21 )
    {
      result = (_DWORD *)sub_4014FB(*result);
      if ( !result )
        result = (_DWORD *)(*(int (__stdcall **)(_DWORD, signed int))(*(_DWORD *)dword_56391C + 148))(
                             *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * *(_DWORD *)(v5 + 84))
                                               + 96),
                             -1);
    }
  }
  else if ( v17 )
  {
    *(_DWORD *)(v5 + 84) += v17;
    v22 = *(_DWORD *)(v5 + 84);
    *(_DWORD *)(v5 + 56) = 1;
    v23 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400);
    if ( v22 >= v23 )
      *(_DWORD *)(v5 + 84) = v23 - 1;
    if ( *(_DWORD *)(v5 + 84) < 0 )
      *(_DWORD *)(v5 + 84) = 0;
    v24 = *(_DWORD *)(v5 + 84);
    if ( !*(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v24) )
    {
      if ( v24 )
      {
        *(_DWORD *)(v5 + 84) = v17 + v24;
      }
      else
      {
        *(_DWORD *)(v5 + 84) = 1;
        *(_DWORD *)(v5 + 88) = 0;
      }
    }
    v25 = *(_DWORD *)(v5 + 84);
    if ( *(_DWORD *)(v5 + 88) > v25 )
      *(_DWORD *)(v5 + 88) = v25;
    v26 = *(_DWORD *)(v5 + 92);
    if ( v25 >= v26 + *(_DWORD *)(v5 + 88) )
      *(_DWORD *)(v5 + 88) = v25 - v26 + 1 < 0 ? 0 : v25 - v26 + 1;
    result = (_DWORD *)(**(int (__thiscall ***)(int, signed int, _DWORD))(v5 + 4))(v5 + 4, 1, 0);
  }
  if ( *((_DWORD *)dword_56390C + 1589) )
    result = (_DWORD *)sub_40220C(-1, -1);
  return result;
}
// 4013A7: using guessed type int __thiscall sub_4013A7(_DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 4017AD: using guessed type _DWORD __stdcall sub_4017AD(_DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402063: using guessed type _DWORD __stdcall sub_402063(_DWORD, _DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 40220C: using guessed type _DWORD __stdcall sub_40220C(_DWORD, _DWORD);
// 40253B: using guessed type int __thiscall sub_40253B(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0045C6D0) --------------------------------------------------------
int __thiscall sub_45C6D0(_DWORD *this)
{
  _DWORD *v1; // ebp
  int v2; // edx
  int result; // eax
  int v4; // ecx
  signed int v5; // esi
  int v6; // edi
  signed __int16 *v7; // ecx
  signed int v8; // ebx
  _DWORD *v9; // esi
  int v10; // edx
  int v11; // ecx
  int v12; // esi
  signed __int16 *v13; // edx
  _DWORD *v14; // [esp+10h] [ebp-4h]

  v1 = dword_563908;
  v2 = *((_DWORD *)dword_563908 + 78);
  result = *(signed __int16 *)(v2 + 66);
  v14 = this;
  v4 = this[41];
  if ( v4 >= result )
    v5 = -1;
  else
    v5 = *(signed __int16 *)(v2 + 4 * v4 + 68);
  v6 = 0;
  if ( result > 0 )
  {
    v7 = (signed __int16 *)(v2 + 68);
    do
    {
      if ( *v7 == v5 )
        break;
      ++v6;
      v7 += 2;
    }
    while ( v6 < result );
  }
  v8 = 1;
  if ( result < 1 )
    return result;
  while ( 1 )
  {
    result = abs(*(signed __int16 *)(v1[78] + 4 * ((v8 + v6) % *(signed __int16 *)(v1[78] + 66)) + 68));
    if ( result > 5100 )
      goto LABEL_13;
    v9 = *(_DWORD **)(v1[1507] + 4 * result + 8008);
    if ( !v9 )
      goto LABEL_13;
    result = (*(int (__thiscall **)(_DWORD *))(*v9 + 8))(v9);
    if ( result )
      break;
    v1 = dword_563908;
LABEL_13:
    if ( ++v8 > *(signed __int16 *)(v1[78] + 66) )
      return result;
  }
  v10 = *((_DWORD *)dword_563908 + 78);
  v11 = *(signed __int16 *)(v10 + 66);
  v12 = v9[32];
  result = 0;
  if ( v11 > 0 )
  {
    v13 = (signed __int16 *)(v10 + 68);
    while ( *v13 != v12 )
    {
      ++result;
      v13 += 2;
      if ( result >= v11 )
        return result;
    }
    if ( v14[41] != result )
    {
      v14[15] = 1;
      v14[41] = result;
    }
  }
  return result;
}

//----- (0045C830) --------------------------------------------------------
int __fastcall sub_45C830(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi
  int result; // eax
  int v8; // ecx
  int v9; // ebp
  int v10; // edi
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // eax
  int v15; // ecx
  int v16; // edx
  int v17; // ebx
  __int64 v18; // rax
  int v19; // ecx
  int v20; // eax
  int v21; // eax
  int v22; // ecx

  v6 = a1;
  result = *(_DWORD *)(a1 + 172);
  if ( result != 7 && result != 8 )
  {
    v8 = *(_DWORD *)(a1 + 168);
    v9 = a4;
    v10 = a5;
    if ( v8 )
      (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)v8 + 8))(a3, a4, a5, a6);
    v11 = *(_DWORD *)(v6 + 100);
    if ( v11 )
      (*(void (__stdcall **)(int, int, int, int))(*(_DWORD *)v11 + 8))(a3, v9, v10, a6);
    result = (*(int (__stdcall **)(int, int, int *, int *))(**(_DWORD **)(v6 + 192) + 4))(a3, v9, &a4, &a5);
    switch ( result )
    {
      case 5:
        v13 = *(_DWORD *)(v6 + 120);
        *(_DWORD *)(v6 + 56) = 1;
        v14 = *(_DWORD *)(v6 + 164) + a5 / *(signed __int16 *)(*(_DWORD *)(v13 + 2052) + 174);
        *(_DWORD *)(v6 + 160) = v14;
        v15 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 66);
        if ( v14 >= v15 )
          *(_DWORD *)(v6 + 160) = v15 - 1;
        if ( *(_DWORD *)(v6 + 160) < 0 )
          *(_DWORD *)(v6 + 160) = 0;
        result = *((_DWORD *)dword_563908 + 78);
        if ( *(_WORD *)(result + 66) )
        {
          v16 = *(_DWORD *)(v6 + 160);
          v17 = *(signed __int16 *)(result + 4 * v16 + 68);
          if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
          {
            v18 = *(signed __int16 *)(result + 4 * v16 + 68);
            sub_4020D1(1, (HIDWORD(v18) ^ v18) - HIDWORD(v18));
          }
          result = (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 28))();
          if ( result == 3 )
          {
            v19 = *((_DWORD *)dword_563908 + 1535);
            result = sub_4010AF(abs(v17));
          }
          if ( a6 == 1 )
            result = sub_401D16(a3, v9);
        }
        return result;
      case 7:
        *((_DWORD *)dword_563908 + 2690) = 1;
        result = sub_4024D2(v6 != 4 ? v6 : 0);
        v12 = *(_DWORD *)(v6 + 48);
        *(_DWORD *)(v6 + 180) = v9;
        *(_DWORD *)(v6 + 172) = 7;
        *(_DWORD *)(v6 + 184) = v12;
        return result;
      case 8:
        *(_DWORD *)(v6 + 188) = *((_DWORD *)dword_563908 + 3110);
        *((_DWORD *)dword_563908 + 2690) = 4;
        result = sub_4024D2(v6 != 4 ? v6 : 0);
        *(_DWORD *)(v6 + 176) = a3;
        *(_DWORD *)(v6 + 172) = 8;
        return result;
      case 9:
        v20 = *(_DWORD *)(v6 + 96);
        *(_DWORD *)(v6 + 56) = 1;
        v21 = *(_DWORD *)(v6 + 88) + a5 / *(signed __int16 *)(*(_DWORD *)(v20 + 2052) + 174);
        *(_DWORD *)(v6 + 84) = v21;
        v22 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 6400);
        if ( v21 >= v22 )
          *(_DWORD *)(v6 + 84) = v22 - 1;
        if ( *(_DWORD *)(v6 + 84) < 0 )
          *(_DWORD *)(v6 + 84) = 0;
        result = (**(int (__thiscall ***)(int, signed int, _DWORD))(v6 + 4))(v6 + 4, 1, 0);
        if ( a6 == 1 )
          result = sub_40220C(a3, v9);
        return result;
      case 10:
        *((_DWORD *)dword_563918 + 2311) = *((_DWORD *)dword_563918 + 2311) == 0;
        *(_DWORD *)(v6 + 56) = 1;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        return sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
      case 11:
        *((_DWORD *)dword_563918 + 2312) = *((_DWORD *)dword_563918 + 2312) == 0;
        goto LABEL_23;
      case 12:
        *((_DWORD *)dword_563918 + 2313) = *((_DWORD *)dword_563918 + 2313) == 0;
        *(_DWORD *)(v6 + 56) = 1;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        return sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
      case 13:
        *((_DWORD *)dword_563918 + 2314) = *((_DWORD *)dword_563918 + 2314) == 0;
        goto LABEL_23;
      case 14:
        *((_DWORD *)dword_563918 + 2315) = *((_DWORD *)dword_563918 + 2315) == 0;
        *(_DWORD *)(v6 + 56) = 1;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        return sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
      case 15:
        *((_DWORD *)dword_563918 + 2316) = *((_DWORD *)dword_563918 + 2316) == 0;
        goto LABEL_23;
      case 16:
        *((_DWORD *)dword_563918 + 2317) = *((_DWORD *)dword_563918 + 2317) == 0;
        *(_DWORD *)(v6 + 56) = 1;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        result = sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
        break;
      case 17:
        *((_DWORD *)dword_563918 + 2318) = *((_DWORD *)dword_563918 + 2318) == 0;
LABEL_23:
        *(_DWORD *)(v6 + 56) = 1;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
        result = sub_4A7120(*((_DWORD **)dword_563908 + 358), 0, 0, 0, 0);
        break;
      default:
        return result;
    }
  }
  return result;
}
// 4010AF: using guessed type _DWORD __stdcall sub_4010AF(_DWORD);
// 401D16: using guessed type _DWORD __stdcall sub_401D16(_DWORD, _DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 40220C: using guessed type _DWORD __stdcall sub_40220C(_DWORD, _DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);

//----- (0045CDD0) --------------------------------------------------------
unsigned int __thiscall sub_45CDD0(_DWORD *this, int a2, int a3, int a4)
{
  unsigned int result; // eax

  result = this[18] - 1;
  if ( result <= 1 )
  {
    sub_401938(a2, a3, a4);
    result = sub_4021C6(a2, a3, a4);
  }
  return result;
}
// 401938: using guessed type _DWORD __stdcall sub_401938(_DWORD, _DWORD, _DWORD);
// 4021C6: using guessed type _DWORD __stdcall sub_4021C6(_DWORD, _DWORD, _DWORD);

//----- (0045CE20) --------------------------------------------------------
int __thiscall sub_45CE20(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  int result; // eax
  int v5; // edx
  void *v6; // ecx
  BOOL v7; // edi
  int v8; // edi
  int v9; // ebx
  int v10; // ebp
  int v11; // ecx
  int v12; // ST0C_4
  int v13; // ST08_4
  int v14; // eax
  _DWORD *v15; // ecx
  _DWORD *v16; // ecx

  v2 = this;
  v3 = this[19];
  if ( !v3
    || !*(_DWORD *)(v3 + 20)
    || (result = (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(v3 + 20) + 96))(*(_DWORD *)(v3 + 20))) != 0 )
  {
    result = sub_401B18(v2 + 8);
  }
  v6 = dword_563908;
  v7 = 0;
  if ( *((_DWORD *)dword_563918 + 2274) )
  {
    v5 = *((_DWORD *)dword_563908 + 1535);
    if ( v5 == *((_DWORD *)dword_563908 + 1499) )
      v7 = 1;
  }
  if ( v2[14] != v7 )
    result = sub_401965(dword_563908);
  v2[14] = v7;
  if ( v7 )
  {
    if ( a2 )
      return result;
    if ( v2[15] )
    {
      sub_401640(dword_563908);
      v2[15] = 0;
    }
    v8 = v2[9];
    v9 = v2[8];
    v10 = v2[12];
    if ( (unsigned int)(v2[18] - 1) <= 1 )
    {
      sub_401938(v10, v9, v2[9]);
      sub_4021C6(v10, v9, v8);
    }
    goto LABEL_25;
  }
  if ( !a2 )
  {
    if ( v2[15] )
    {
      v2[17] = sub_401D39(v6, v5);
      sub_401640(dword_563908);
      sub_402207(v2);
      sub_402527(v2[19], 0, 0);
      v11 = v2[19];
      v12 = v2[9];
      v13 = v2[8];
      v14 = v2[12];
      v2[15] = 0;
      (*(void (__stdcall **)(_DWORD, int, int, int, _DWORD, _DWORD))(*(_DWORD *)v11 + 4))(0, v14, v13, v12, 0, 0);
      v2[16] = (*(int (**)(void))(*(_DWORD *)v2[12] + 156))();
    }
    else if ( v2[16] > 0 )
    {
      (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v2[19] + 4))(
        0,
        v2[12],
        v2[8],
        v2[9],
        0,
        0);
      --v2[16];
    }
LABEL_25:
    v15 = (_DWORD *)v2[43];
    if ( v15 && (v15[12] != v15[14] || v15[13] != v15[15] || v15[6]) )
      (*(void (**)(void))(*v15 + 40))();
    v16 = (_DWORD *)v2[26];
    if ( v16 && (v16[12] != v16[14] || v16[13] != v16[15] || v16[6]) )
      (*(void (**)(void))(*v16 + 40))();
    return sub_401857(v2[12]);
  }
  if ( !v2[15] && !v2[16] )
    result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v2[19] + 4))(
               0,
               v2[12],
               v2[8],
               v2[9],
               0,
               0);
  return result;
}
// 401640: using guessed type int __thiscall sub_401640(_DWORD);
// 401857: using guessed type _DWORD __stdcall sub_401857(_DWORD);
// 401938: using guessed type _DWORD __stdcall sub_401938(_DWORD, _DWORD, _DWORD);
// 401965: using guessed type int __thiscall sub_401965(_DWORD);
// 401B18: using guessed type _DWORD __stdcall sub_401B18(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 4021C6: using guessed type _DWORD __stdcall sub_4021C6(_DWORD, _DWORD, _DWORD);
// 402207: using guessed type int __thiscall sub_402207(_DWORD);
// 402527: using guessed type _DWORD __stdcall sub_402527(_DWORD, _DWORD, _DWORD);

//----- (0045D060) --------------------------------------------------------
void sub_45D060()
{
  srand(0x3A93u);
}

//----- (0045D070) --------------------------------------------------------
_DWORD *__thiscall sub_45D070(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  this[1600] = 0;
  this[3101] = 0;
  memset(this + 3102, 0, 0x4E20u);
  return v1;
}

//----- (0045D0B0) --------------------------------------------------------
int __thiscall sub_45D0B0(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // ecx

  v2 = this[3101];
  result = 0;
  if ( v2 > 0 )
  {
    v4 = (int)(this + 1601);
    do
    {
      if ( *(signed __int16 *)(*(_DWORD *)v4 + 100) == a2 )
        ++result;
      v4 += 4;
      --v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (0045D0F0) --------------------------------------------------------
int __thiscall sub_45D0F0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // ebp
  int v4; // edi
  int v5; // esi
  int i; // edx

  result = 0;
  v3 = 0;
  if ( this[3101] > 0 )
  {
    v4 = (int)(this + 1601);
    do
    {
      v5 = *(signed __int16 *)(*(_DWORD *)v4 + 100);
      for ( i = 0; i < result; ++i )
      {
        if ( *(_DWORD *)(a2 + 4 * i) == v5 )
          break;
      }
      if ( i == result )
        *(_DWORD *)(a2 + 4 * result++) = v5;
      ++v3;
      v4 += 4;
    }
    while ( v3 < this[3101] );
  }
  return result;
}

//----- (0045D170) --------------------------------------------------------
char *__thiscall sub_45D170(_DWORD *this, signed int a2)
{
  int v2; // edx
  int v3; // eax
  int v4; // esi
  char *result; // eax

  v2 = this[3101];
  v3 = 0;
  if ( v2 <= 0 )
  {
LABEL_5:
    if ( a2 >= 50 )
      result = 0;
    else
      result = (char *)dword_563908 + 618 * a2 + 77306;
  }
  else
  {
    v4 = (int)(this + 1601);
    while ( *(signed __int16 *)(*(_DWORD *)v4 + 100) != a2 )
    {
      ++v3;
      v4 += 4;
      if ( v3 >= v2 )
        goto LABEL_5;
    }
    result = (char *)this[v3 + 1601];
  }
  return result;
}

//----- (0045D1F0) --------------------------------------------------------
int __thiscall sub_45D1F0(_DWORD *this, char *Str2)
{
  _DWORD *v2; // ebx
  int v3; // esi
  int v4; // edi

  v2 = this;
  v3 = 0;
  if ( this[3101] <= 0 )
    return 0;
  v4 = (int)(this + 1601);
  while ( _stricmp((const char *)(*(_DWORD *)v4 + 32), Str2) )
  {
    ++v3;
    v4 += 4;
    if ( v3 >= v2[3101] )
      return 0;
  }
  return v2[v3 + 1601];
}

//----- (0045D3A0) --------------------------------------------------------
void __thiscall sub_45D3A0(char *this)
{
  char *v1; // esi
  int v2; // ecx
  int v3; // ecx
  char Dest; // [esp+4h] [ebp-104h]

  v1 = this;
  if ( !*((_DWORD *)dword_563908 + 3114) && *((_DWORD *)dword_563918 + 2321) )
  {
    sprintf(&Dest, "Leaving: %s", this + 32);
    v2 = *((_DWORD *)dword_563908 + 1510);
    sub_40245F(&Dest, 5, 400, 0, 0);
  }
  v3 = *((_DWORD *)dword_563908 + 1503);
  sub_401D3E(*((signed __int16 *)v1 + 48));
  if ( *((_DWORD *)v1 + 27) )
  {
    *((_DWORD *)dword_563908 + 6898) = 0;
    *((_DWORD *)dword_563908 + 6897) = 0;
  }
  if ( *((_DWORD *)v1 + 37) )
  {
    j__free(*((void **)v1 + 37));
    *((_DWORD *)v1 + 37) = 0;
  }
}
// 401D3E: using guessed type _DWORD __stdcall sub_401D3E(_DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045D4B0) --------------------------------------------------------
int __thiscall sub_45D4B0(_DWORD *this, _WORD *a2)
{
  _WORD *v2; // edi
  int v3; // eax
  _BYTE *v4; // edx
  int v5; // eax
  unsigned __int16 *v6; // esi
  signed int v7; // ebp
  __int16 v8; // bx
  __int16 v9; // bx
  unsigned __int16 v10; // bx
  int result; // eax
  signed int v12; // [esp+10h] [ebp-4h]

  v2 = a2;
  v3 = -1;
  v4 = a2;
  if ( a2 < a2 + 216 )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( v4 < (_BYTE *)a2 + 432 );
  }
  v5 = ~v3;
  this[34] = v5;
  *(_DWORD *)((char *)this + 102) = v5;
  v6 = (unsigned __int16 *)(this + 38);
  v12 = 18;
  do
  {
    v7 = 12;
    do
    {
      v8 = (unsigned __int8)(4 * ((unsigned int)(unsigned __int16)*v2 >> 5)) | (unsigned __int16)(32
                                                                                                * ((*v2 >> 8) & 0xF8));
      if ( dword_576828 == 2 )
        v9 = v8 & 0xFFF8;
      else
        v9 = 2 * (v8 & 0xFFFC);
      v10 = *v2 & 0x1F | 4 * v9;
      result = v10;
      *v6 = v10;
      ++v2;
      ++v6;
      --v7;
    }
    while ( v7 );
    --v12;
  }
  while ( v12 );
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (0045D5E0) --------------------------------------------------------
int __thiscall sub_45D5E0(int this, _DWORD *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // edi
  int result; // eax
  int v6; // edx

  v3 = *((_DWORD *)dword_563908 + 1503);
  v4 = *(_DWORD *)(v3 + 4 * *(signed __int16 *)(this + 96) + 4);
  result = *(_DWORD *)(v3 + 4 * *(_DWORD *)(this + 132) + 4);
  *a2 = *(_DWORD *)((char *)dword_563908 + 57650);
  if ( result && (v6 = *(_DWORD *)(*(_DWORD *)(result + 72) + 1068), v6 >= 0)
    || v4 && (v6 = *(_DWORD *)(*(_DWORD *)(v4 + 72) + 1068), v6 >= 0) )
  {
    *a2 = v6;
  }
  *a3 = *(_DWORD *)((char *)dword_563908 + 57654);
  if ( result && (result = *(_DWORD *)(*(_DWORD *)(result + 72) + 1072), result >= 0)
    || v4 && (result = *(_DWORD *)(*(_DWORD *)(v4 + 72) + 1072), result >= 0) )
  {
    *a3 = result;
  }
  if ( *(_DWORD *)(this + 108) )
  {
    *a2 += *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 86));
    *a3 += *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 86));
    *a2 += *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 52);
    result = *((_DWORD *)dword_563908 + 78);
    *a3 += *(_DWORD *)(result + 56);
  }
  return result;
}

//----- (0045D710) --------------------------------------------------------
int __thiscall sub_45D710(int this)
{
  int v1; // eax
  int v2; // esi
  int v3; // edx
  int result; // eax
  int v5; // edx

  v1 = *((_DWORD *)dword_563908 + 1503);
  v2 = *(_DWORD *)(v1 + 4 * *(signed __int16 *)(this + 96) + 4);
  v3 = *(_DWORD *)(v1 + 4 * *(_DWORD *)(this + 132) + 4);
  result = *(_DWORD *)((char *)dword_563908 + 57762);
  if ( v3 && (v5 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1084), v5 >= 0)
    || v2 && (v5 = *(_DWORD *)(*(_DWORD *)(v2 + 72) + 1084), v5 >= 0) )
  {
    result = v5;
  }
  if ( *(_DWORD *)(this + 108) )
    result += *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 48);
  return result;
}

//----- (0045D790) --------------------------------------------------------
int __thiscall sub_45D790(int this)
{
  int v1; // eax
  int v2; // esi
  int v3; // edx
  int result; // eax
  int v5; // edx

  v1 = *((_DWORD *)dword_563908 + 1503);
  v2 = *(_DWORD *)(v1 + 4 * *(signed __int16 *)(this + 96) + 4);
  v3 = *(_DWORD *)(v1 + 4 * *(_DWORD *)(this + 132) + 4);
  result = *(_DWORD *)((char *)dword_563908 + 57646);
  if ( v3 && (v5 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1372), v5 > 0)
    || v2 && (v5 = *(_DWORD *)(*(_DWORD *)(v2 + 72) + 1372), v5 > 0) )
  {
    result = v5;
  }
  if ( *(_DWORD *)(this + 108) )
    result += *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 36);
  return result;
}

//----- (0045D810) --------------------------------------------------------
int __thiscall sub_45D810(int this, _DWORD *a2)
{
  int v2; // eax
  int v3; // ebp
  int v4; // ebx
  _DWORD *v5; // esi
  int v6; // eax
  int v7; // eax
  int result; // eax
  int v9; // ecx
  int v10; // ebp
  signed __int16 *v11; // ebx
  signed int v12; // eax
  int v13; // edi
  __int16 v14; // ax
  __int16 v15; // ax
  unsigned int v16; // edx
  __int16 v17; // ax
  signed __int16 *v18; // ebp
  signed int v19; // eax
  int v20; // edi
  int v21; // ebx
  unsigned int v22; // edx
  signed int v23; // [esp+10h] [ebp-4h]
  int v24; // [esp+18h] [ebp+4h]

  v2 = *((_DWORD *)dword_563908 + 1503);
  v3 = *(_DWORD *)(v2 + 4 * *(signed __int16 *)(this + 96) + 4);
  v4 = *(_DWORD *)(v2 + 4 * *(_DWORD *)(this + 132) + 4);
  v5 = a2;
  a2[3] = *(_DWORD *)((char *)dword_563908 + 57502);
  if ( v4 && (v6 = *(_DWORD *)(*(_DWORD *)(v4 + 72) + 1360), v6 > 0)
    || v3 && (v6 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1360), v6 > 0) )
  {
    a2[3] = v6;
  }
  a2[4] = 240000 * *(_DWORD *)((char *)dword_563908 + 57506) / 360 / 1000;
  if ( v4 && (v7 = *(_DWORD *)(*(_DWORD *)(v4 + 72) + 1364), v7 > 0)
    || v3 && (v7 = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1364), v7 > 0) )
  {
    a2[4] = 240000 * v7 / 360 / 1000;
  }
  result = *((signed __int16 *)dword_563908 + 28755);
  a2[5] = result;
  if ( v4 && (result = *(_DWORD *)(*(_DWORD *)(v4 + 72) + 1368), result > 0)
    || v3 && (result = *(_DWORD *)(*(_DWORD *)(v3 + 72) + 1368), result > 0) )
  {
    a2[5] = --result;
  }
  if ( *(_DWORD *)(this + 108) )
  {
    v9 = *((_DWORD *)dword_563908 + 78) + 60;
    v10 = 0;
    v24 = *((_DWORD *)dword_563908 + 78) + 60;
    if ( *(_WORD *)(*((_DWORD *)dword_563908 + 78) + 66) > 0 )
    {
      v11 = (signed __int16 *)(*((_DWORD *)dword_563908 + 78) + 68);
      do
      {
        v12 = abs(*v11);
        if ( v12 <= 5100 )
        {
          v13 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v12 + 8008);
          if ( v13 )
          {
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)v13 + 12))(v13) && *(_DWORD *)(v13 + 264) )
            {
              v14 = *(_WORD *)(v13 + 342);
              if ( v14 != -1 )
                v5[3] = v14;
              v15 = *(_WORD *)(v13 + 346);
              if ( v15 != -1 )
              {
                v16 = (signed int)((unsigned __int64)(274877907i64 * (240000 * v15 / 360)) >> 32) >> 6;
                v5[4] = v16 + (v16 >> 31);
              }
              v17 = *(_WORD *)(v13 + 344);
              if ( v17 != -1 )
                v5[5] = v17;
            }
            v9 = v24;
          }
        }
        result = *(signed __int16 *)(v9 + 6);
        ++v10;
        v11 += 2;
      }
      while ( v10 < result );
    }
    v23 = 0;
    if ( *(_WORD *)(v9 + 6) > 0 )
    {
      v18 = (signed __int16 *)(v9 + 8);
      do
      {
        v19 = abs(*v18);
        if ( v19 <= 5100 )
        {
          v20 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v19 + 8008);
          if ( v20 )
          {
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)v20 + 12))(v20) )
            {
              if ( *(_DWORD *)(v20 + 264) )
              {
                v21 = v5[4];
                v5[3] += v5[3] * (signed int)*(signed __int16 *)(v20 + 348) / 1000;
                v22 = (signed int)((unsigned __int64)(274877907i64 * v21 * *(signed __int16 *)(v20 + 350)) >> 32) >> 6;
                v5[4] = v21 + v22 + (v22 >> 31);
              }
            }
            v9 = v24;
          }
        }
        result = v23 + 1;
        v18 += 2;
        ++v23;
      }
      while ( v23 < *(signed __int16 *)(v9 + 6) );
    }
  }
  return result;
}

//----- (0045DB80) --------------------------------------------------------
void *__thiscall sub_45DB80(_DWORD *this, int a2, int a3, int a4)
{
  void *result; // eax
  _DWORD *v5; // esi
  signed int v6; // ebp
  _WORD *v7; // edi
  signed int v8; // esi

  result = dword_563918;
  v5 = this;
  if ( (!this[27] || *((_DWORD *)dword_563918 + 2277))
    && this[34] != *((_DWORD *)dword_563908 + 3117)
    && *((_DWORD *)dword_563918 + 2223) )
  {
    (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 0, 0);
    v6 = 0;
    v7 = v5 + 38;
    do
    {
      v8 = 0;
      do
      {
        if ( *v7 )
          (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 24))(
            a2,
            a3 + v6,
            v8 + a4,
            (unsigned __int16)*v7);
        ++v8;
        ++v7;
      }
      while ( v8 < 12 );
      ++v6;
    }
    while ( v6 < 18 );
    result = (void *)(*(int (__thiscall **)(int))(*(_DWORD *)a2 + 96))(a2);
  }
  return result;
}

//----- (0045DCA0) --------------------------------------------------------
int __thiscall sub_45DCA0(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = this[33];
  if ( v1 < 0 )
    result = 0;
  else
    result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v1 + 4);
  return result;
}

//----- (0045DCD0) --------------------------------------------------------
BOOL __thiscall sub_45DCD0(_DWORD *this)
{
  int v1; // eax
  int v2; // eax
  BOOL result; // eax

  v1 = this[33];
  result = 0;
  if ( v1 >= 0 )
  {
    v2 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v1 + 4);
    if ( v2 )
    {
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v2 + 72) + 4))(*(_DWORD *)(v2 + 72)) == 4 )
        result = 1;
    }
  }
  return result;
}

//----- (0045DD20) --------------------------------------------------------
__int16 __fastcall sub_45DD20(signed int a1, int a2, _DWORD *a3)
{
  signed int v3; // esi
  char *v4; // edi
  int v6; // eax
  signed int v7; // edx
  int v8; // esi
  int v9; // esi
  int v10; // ecx
  int v11; // ecx
  char *v12; // ecx

  v3 = a1;
  *a3 = (*(_DWORD *)(a1 + 144) != 0) + 2;
  v4 = (char *)dword_563908;
  if ( *(_DWORD *)(a1 + 108) )
  {
    a1 = 30;
    a2 = *((_DWORD *)dword_563908 + 2705) % 30;
    if ( a2 < 15 )
      return *((_WORD *)dword_563908 + 115);
  }
  if ( *(_DWORD *)(v3 + 120) > 0 )
  {
    if ( *(_DWORD *)((char *)dword_563908 + 58330) )
    {
      if ( sub_401D39(a1, a2) % 50 < 20 )
        return *((_WORD *)dword_563908 + 116);
      v4 = (char *)dword_563908;
    }
    if ( *(_DWORD *)(v3 + 120) > 0 && *(_DWORD *)(v4 + 58330) )
    {
      *a3 = (*a3 == 2) + 2;
      v4 = (char *)dword_563908;
    }
  }
  v6 = 0;
  if ( *((_DWORD *)v4 + 6898) )
  {
    v6 = (*(int (**)(void))(**((_DWORD **)v4 + 6898) + 284))();
    v4 = (char *)dword_563908;
  }
  v7 = *(signed __int16 *)(v3 + 100);
  v8 = *(_DWORD *)(v3 + 132);
  if ( v8 >= 0 )
  {
    v9 = *(_DWORD *)(*((_DWORD *)v4 + 1503) + 4 * v8 + 4);
    if ( v9 )
    {
      v10 = *(_DWORD *)(v9 + 72);
      v11 = v7 == v6 ? *(_DWORD *)(v10 + 20) : *(_DWORD *)(v10 + 24);
      if ( v11 != -1 )
        return sub_40113B(dword_576828, (v11 >> 16) & 0xFF, BYTE1(v11), (unsigned __int8)v11);
    }
  }
  if ( v7 < 50 )
  {
    v12 = &v4[618 * v7 + 77920];
    if ( v4[618 * v7 + 77922] || v4[618 * v7 + 77921] || *v12 )
      return sub_40223E(dword_576828, *(_DWORD *)v12);
  }
  if ( v7 == v6 )
    return *((_WORD *)v4 + 117);
  return *((_WORD *)v4 + 118);
}
// 40113B: using guessed type _DWORD __cdecl sub_40113B(_DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (0045DF00) --------------------------------------------------------
int __thiscall sub_45DF00(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[33] = a2;
  return result;
}

//----- (0045DF10) --------------------------------------------------------
int __fastcall sub_45DF10(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // esi
  __int64 v4; // rax

  v3 = a1;
  LODWORD(v4) = *(_DWORD *)((char *)a1 + 102);
  if ( a1[34] != (_DWORD)v4 && a1[35] != (_DWORD)v4 )
  {
    LODWORD(v4) = dword_563918;
    if ( *((_DWORD *)dword_563918 + 2223) )
    {
      v4 = sub_401D39(a1, a2) - *((_DWORD *)dword_563908 + 3226);
      LODWORD(v4) = (HIDWORD(v4) ^ v4) - HIDWORD(v4);
      if ( (signed int)v4 > *((_DWORD *)dword_563908 + 7736) )
      {
        *((_DWORD *)dword_563908 + 3226) = sub_401D39(dword_563908, HIDWORD(v4));
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)dword_56391C + 132))(*((signed __int16 *)v3 + 48));
        LODWORD(v4) = *(_DWORD *)((char *)v3 + 102);
        v3[35] = v4;
      }
    }
  }
  return v4;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0045DFF0) --------------------------------------------------------
void sub_45DFF0()
{
  srand(0x3A94u);
}

//----- (0045E000) --------------------------------------------------------
int __cdecl sub_45E000(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (0045E170) --------------------------------------------------------
int __thiscall sub_45E170(_DWORD *this)
{
  int v1; // ebx
  bool v2; // zf
  bool v3; // sf
  _DWORD *v4; // edi
  int v5; // ebp
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // esi
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v14; // [esp+Ch] [ebp-18h]
  int v15; // [esp+10h] [ebp-14h]
  int v16; // [esp+14h] [ebp-10h]
  int v17; // [esp+18h] [ebp-Ch]
  _DWORD *v18; // [esp+1Ch] [ebp-8h]
  char v19; // [esp+20h] [ebp-4h]

  v1 = 0;
  v2 = this[3101] == 0;
  v3 = this[3101] < 0;
  v18 = this;
  v14 = 0;
  v15 = 0;
  if ( !v3 && !v2 )
  {
    v4 = dword_563908;
    v5 = (int)(this + 1601);
    do
    {
      v6 = *(_DWORD *)v5;
      if ( *(_DWORD *)(*(_DWORD *)v5 + 120) > 0 && *(_WORD *)(v6 + 100) != *(_WORD *)(v4[6897] + 100) )
      {
        v7 = *(_DWORD *)(v6 + 132);
        if ( v7 >= 0 )
        {
          v8 = v4[1503];
          v9 = *(_DWORD *)(v8 + 4 * v7 + 4);
          if ( v9 )
          {
            if ( sub_40237E(*(_DWORD *)(v8 + 4 * v7 + 4)) && (*(int (__thiscall **)(int))(*(_DWORD *)v9 + 8))(v9) > 0 )
            {
              (*(void (__thiscall **)(int, int *, int *, char *))(*(_DWORD *)v9 + 84))(v9, &v16, &v17, &v19);
              v4 = dword_563908;
              v10 = abs(v16 / 10000 - *((_DWORD *)dword_563908 + 62));
              v11 = abs(v17 / 10000 - *((_DWORD *)dword_563908 + 63));
              v12 = v10 * v10 + v11 * v11;
              if ( !v1 || v12 < v14 )
              {
                v1 = *(_DWORD *)v5;
                v14 = v12;
              }
            }
            else
            {
              v4 = dword_563908;
            }
          }
        }
      }
      v5 += 4;
      ++v15;
    }
    while ( v15 < v18[3101] );
  }
  return v1;
}
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (0045E300) --------------------------------------------------------
int __thiscall sub_45E300(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx
  int v3; // esi
  int *v4; // edi
  int v5; // ecx
  int result; // eax

  v2 = this;
  v3 = 0;
  if ( this[3101] > 0 )
  {
    v4 = this + 1601;
    do
    {
      v5 = *v4;
      result = sub_401870(a2);
      ++v3;
      ++v4;
    }
    while ( v3 < v2[3101] );
  }
  return result;
}
// 401870: using guessed type _DWORD __stdcall sub_401870(_DWORD);

//----- (0045E350) --------------------------------------------------------
_DWORD *__thiscall sub_45E350(_DWORD *this)
{
  int v1; // eax
  void (__thiscall **v2)(int, signed int, _DWORD); // edx
  int (__thiscall ***v3)(_DWORD, signed int, _DWORD); // edi
  _DWORD *v4; // esi
  _DWORD *result; // eax
  int v6; // eax
  int v7; // ecx
  signed int v8; // edx
  bool v9; // zf
  bool v10; // sf
  _DWORD *v11; // ecx

  v1 = *((_DWORD *)dword_563908 + 1500);
  v2 = *(void (__thiscall ***)(int, signed int, _DWORD))(v1 + 8);
  v3 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v1 + 8);
  v4 = this;
  *(_DWORD *)(v1 + 60) = 1;
  (*v2)(v1 + 8, 1, 0);
  result = (_DWORD *)(**v3)(v3, 2, 0);
  if ( *((_DWORD *)dword_563908 + 6897) )
  {
    v6 = *((_DWORD *)dword_563918 + 2333);
    if ( v6 )
    {
      result = (_DWORD *)(v6 - 1);
      if ( !result )
      {
        result = sub_48DD90((unsigned int)(v4 + 1601), v4[3101], (int (__cdecl *)(_DWORD, _DWORD))&sub_4010C3);
        v7 = 0;
        v8 = -1;
        v9 = v4[3101] == 0;
        v10 = v4[3101] < 0;
        v4[1600] = 0;
        if ( !v10 && !v9 )
        {
          result = v4 + 1601;
          do
          {
            if ( *(signed __int16 *)(*result + 100) != v8 )
              v4[v4[1600]++] = 0;
            v4[v4[1600]++] = *result;
            v8 = *(signed __int16 *)(*result + 100);
            ++v7;
            ++result;
          }
          while ( v7 < v4[3101] );
        }
      }
    }
    else
    {
      sub_48DD90((unsigned int)(v4 + 1601), v4[3101], (int (__cdecl *)(_DWORD, _DWORD))&sub_401343);
      result = 0;
      v9 = v4[3101] == 0;
      v10 = v4[3101] < 0;
      v4[1600] = 0;
      if ( !v10 && !v9 )
      {
        v11 = v4 + 1601;
        do
        {
          v4[v4[1600]++] = *v11;
          result = (_DWORD *)((char *)result + 1);
          ++v11;
        }
        while ( (signed int)result < v4[3101] );
      }
    }
  }
  return result;
}

//----- (0045E4F0) --------------------------------------------------------
_DWORD *__thiscall sub_45E4F0(_DWORD *this, const void *a2, int a3)
{
  _DWORD *v3; // ebp
  int v4; // ecx
  int v5; // eax
  const char *v6; // eax
  const char *v7; // ebx
  size_t v8; // esi
  void *v9; // eax
  int v10; // ecx
  char Dest; // [esp+10h] [ebp-2B4h]
  char v13; // [esp+110h] [ebp-1B4h]

  v3 = this;
  qmemcpy(this, a2, 0x6Au);
  this[27] = a3;
  this[33] = -1;
  if ( a3 )
    *((_DWORD *)dword_563908 + 6897) = this;
  if ( *((_DWORD *)dword_563908 + 2705) > 0 && *((_DWORD *)dword_563918 + 2320) )
  {
    sprintf(&Dest, "Entering: %s", this + 8);
    v4 = *((_DWORD *)dword_563908 + 1510);
    sub_40245F(&Dest, 5, 400, 0, 0);
  }
  v3[28] = 0;
  v3[29] = 0;
  v3[30] = 0;
  v3[32] = 0;
  v3[36] = 0;
  v3[37] = 0;
  if ( sub_4B4E20(*(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 16), (int)(v3 + 8)) >= 0 )
  {
    v5 = sub_4B4E20(*(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 16), (int)(v3 + 8));
    v3[36] = 1;
    v6 = (const char *)sub_4B4980(*(_DWORD **)(*((_DWORD *)dword_563908 + 1509) + 16), v5);
    v7 = v6;
    if ( v6 )
    {
      if ( strlen(v6) )
      {
        v8 = strlen(v7);
        v9 = operator new(v8 + 1);
        v3[37] = v9;
        memset(v9, 0, v8 + 1);
        strncpy((char *)v3[37], v7, v8);
      }
    }
  }
  v3[35] = 0;
  v3[34] = *((_DWORD *)dword_563908 + 3117);
  memset(v3 + 38, 0, 0x1B0u);
  v10 = *((_DWORD *)dword_563918 + 2131);
  if ( sub_40239C(*(_DWORD *)((char *)v3 + 102), &v13) )
    sub_4020F9(&v13);
  return v3;
}
// 4020F9: using guessed type _DWORD __stdcall sub_4020F9(_DWORD);
// 40239C: using guessed type _DWORD __stdcall sub_40239C(_DWORD, _DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045E750) --------------------------------------------------------
void __thiscall sub_45E750(_DWORD *this)
{
  _DWORD *v1; // ebp
  int v2; // ebx
  void **v3; // edi
  void *v4; // esi

  v1 = this;
  v2 = 0;
  if ( this[3101] > 0 )
  {
    v3 = (void **)(this + 1601);
    do
    {
      v4 = *v3;
      if ( *v3 )
      {
        sub_4024B4(*v3);
        j__free(v4);
        *v3 = 0;
      }
      ++v2;
      ++v3;
    }
    while ( v2 < v1[3101] );
  }
}
// 4024B4: using guessed type int __thiscall sub_4024B4(_DWORD);

//----- (0045E7B0) --------------------------------------------------------
int __thiscall sub_45E7B0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // eax
  int v5; // edi
  signed int v6; // eax
  int v7; // ecx
  int v8; // eax

  v3 = this;
  if ( operator new(0x248u) )
    v4 = sub_402752(a2, v3[3101] == 0);
  else
    v4 = 0;
  v3[v3[3101] + 1601] = v4;
  v3[*(signed __int16 *)(a2 + 96) + 3102] = v4;
  v5 = v3[v3[3101] + 1601];
  if ( a3 )
    v6 = *(signed __int16 *)(v5 + 96);
  else
    v6 = -1;
  v7 = *((_DWORD *)dword_563908 + 1503);
  v8 = sub_4023FB(*(signed __int16 *)(v5 + 96), *(signed __int16 *)(v5 + 98), v6, 0, 0);
  if ( *(_DWORD *)(v5 + 108) )
    *((_DWORD *)dword_563908 + 6898) = v8;
  ++v3[3101];
  return sub_4010FA(v3);
}
// 4010FA: using guessed type int __thiscall sub_4010FA(_DWORD);
// 4023FB: using guessed type _DWORD __stdcall sub_4023FB(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402752: using guessed type _DWORD __stdcall sub_402752(_DWORD, _DWORD);

//----- (0045E8E0) --------------------------------------------------------
int __thiscall sub_45E8E0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  void *v3; // eax
  void *v4; // edi

  v2 = this;
  v3 = (void *)sub_402211(this + 1601, this + 3101, this[a2 + 3102]);
  v4 = v3;
  v2[a2 + 3102] = 0;
  if ( v3 )
  {
    sub_4024B4(v3);
    j__free(v4);
  }
  return sub_4010FA(v2);
}
// 4010FA: using guessed type int __thiscall sub_4010FA(_DWORD);
// 402211: using guessed type _DWORD __cdecl sub_402211(_DWORD, _DWORD, char);
// 4024B4: using guessed type int __thiscall sub_4024B4(_DWORD);

//----- (0045E950) --------------------------------------------------------
_DWORD *__thiscall sub_45E950(void *Dst)
{
  _DWORD *v1; // esi

  v1 = Dst;
  memset(Dst, 0, 0x420u);
  memset(v1 + 272, 0, 0x400u);
  v1[264] = 0;
  v1[265] = 0;
  v1[266] = 0;
  v1[267] = 0;
  return v1;
}

//----- (0045E9C0) --------------------------------------------------------
void __thiscall sub_45E9C0(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // edi
  char *v7; // eax
  char v8; // dl
  signed int v9; // edx
  int v10; // edi
  int v11; // ecx
  int v12; // ecx

  if ( *(_BYTE *)a2 == 42 )
  {
    v6 = *(char *)(a2 + 1) - 48;
    if ( v6 < 4 )
    {
      v7 = (char *)(a2 + 2);
      do
      {
        v8 = *v7;
        v7[(_DWORD)((char *)&this[64 * v6 + 271] - a2 + 2)] = *v7;
        ++v7;
      }
      while ( v8 );
      this[v6 + 264] = a4;
    }
  }
  else
  {
    v9 = 0;
    if ( this[131] < this[65] )
      v9 = 1;
    if ( this[197] < this[66 * v9 + 65] )
      v9 = 2;
    if ( this[263] < this[66 * v9 + 65] )
      v9 = 3;
    v10 = (int)&this[66 * v9];
    strcpy((char *)v10, (const char *)a2);
    *(_DWORD *)(v10 + 256) = a3;
    *(_DWORD *)(v10 + 260) = a4;
    if ( a5 )
    {
      if ( a6 || !*((_DWORD *)dword_563918 + 2317) )
      {
        v11 = *((_DWORD *)dword_563908 + 1509);
        sub_40273E((char *)&Source, 8, (int)&Source, a2, 0);
      }
    }
    else
    {
      v12 = *((_DWORD *)dword_563908 + 1509);
      sub_40273E((char *)&Source, 9, (int)&Source, a2, 0);
    }
  }
}

//----- (0045EB40) --------------------------------------------------------
int __thiscall sub_45EB40(void *this)
{
  int v1; // ebx
  char *v2; // ecx
  int v3; // eax
  int v4; // ebp
  _DWORD *v5; // edi
  int v6; // esi
  int v7; // ebp
  int *v8; // ebx
  int result; // eax
  int v10; // ebx
  signed int v11; // esi
  _BYTE *v12; // edi
  int *v13; // edx
  int v14; // eax
  char *v15; // eax
  int v16; // [esp+10h] [ebp-114h]
  int v17; // [esp+14h] [ebp-110h]
  int v18; // [esp+18h] [ebp-10Ch]
  int *v19; // [esp+1Ch] [ebp-108h]
  char Dest; // [esp+20h] [ebp-104h]

  v1 = (int)this;
  v2 = (char *)dword_563908;
  v3 = *((_DWORD *)dword_563908 + 89);
  v4 = *(_DWORD *)(v3 + 4) - *((_DWORD *)dword_563908 + 3110);
  v5 = (_DWORD *)*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2340) + 1516);
  v6 = *(_DWORD *)(v3 + 8) - *(signed __int16 *)(v5[513] + 174) - *((_DWORD *)dword_563908 + 3109);
  v19 = (int *)v1;
  v7 = v4 - 8;
  v8 = (int *)(v1 + 256);
  v18 = 4;
  do
  {
    if ( v8[1] > 0 )
    {
      sub_49B310(v5, (char *)v8 - 256, *v8, *((_DWORD **)v2 + 89), 5, v6, 3, 0);
      v2 = (char *)dword_563908;
    }
    result = v5[513];
    v6 -= *(signed __int16 *)(result + 174);
    v8 += 66;
    --v18;
  }
  while ( v18 );
  v10 = 0;
  v11 = 0;
  v12 = v19 + 272;
  v13 = v19 + 264;
  v18 = 0;
  v19 += 264;
  do
  {
    if ( !*v12 )
      goto LABEL_13;
    v17 = 0;
    v16 = 0;
    result = *v13;
    if ( !*v13 )
    {
      sub_401F32(&v16, &v17, v12, *(_DWORD *)&v2[v11 + 31778], *(_DWORD *)&v2[v11 + 31794]);
      result = sub_4011E0(
                 *((_DWORD *)dword_563908 + 89),
                 v12,
                 *(_DWORD *)((char *)dword_563908 + v11 + 31778),
                 *(_DWORD *)((char *)dword_563908 + v11 + 31794),
                 *(_DWORD *)((char *)dword_563908 + v11 + 31810),
                 v7 - v16,
                 v10);
LABEL_11:
      v2 = (char *)dword_563908;
      goto LABEL_12;
    }
    if ( *v13 > 0 )
    {
      sprintf(&Dest, "%s%d:%02d", v12, result / 6000, result / 100 % 60);
      sub_401F32(
        &v16,
        &v17,
        &Dest,
        *(_DWORD *)((char *)dword_563908 + v11 + 31778),
        *(_DWORD *)((char *)dword_563908 + v11 + 31794));
      v10 = v18;
      result = sub_4011E0(
                 *((_DWORD *)dword_563908 + 89),
                 &Dest,
                 *(_DWORD *)((char *)dword_563908 + v11 + 31778),
                 *(_DWORD *)((char *)dword_563908 + v11 + 31794),
                 *(_DWORD *)((char *)dword_563908 + v11 + 31810),
                 v7 - v16,
                 v18);
      goto LABEL_11;
    }
LABEL_12:
    v10 += v17 + 1;
    v13 = v19;
    v18 = v10;
LABEL_13:
    v11 += 4;
    ++v13;
    v12 += 256;
    v19 = v13;
  }
  while ( v11 < 16 );
  if ( *(_DWORD *)(v2 + 58250) )
  {
    result = *((_DWORD *)v2 + 1514);
    if ( *(_DWORD *)(result + 27436) > 0 && *(_DWORD *)(result + 31560) > 0 )
    {
      sprintf(&Dest, "Flags %d/%d", *(_DWORD *)(*((_DWORD *)v2 + 1514) + 31556), *(_DWORD *)(result + 31560));
      sub_401F32(
        &v16,
        &v17,
        &Dest,
        *((signed __int16 *)dword_563908 + 15405),
        *((signed __int16 *)dword_563908 + 15406));
      sub_4011E0(
        *((_DWORD *)dword_563908 + 89),
        &Dest,
        *((signed __int16 *)dword_563908 + 15405),
        *((signed __int16 *)dword_563908 + 15406),
        *((signed __int16 *)dword_563908 + 15407),
        v7 - v16,
        v10);
      result = v17;
      v2 = (char *)dword_563908;
      v10 += v17 + 1;
    }
  }
  if ( *((_DWORD *)v2 + 6898) )
  {
    result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)v2 + 6898) + 72) + 4))();
    if ( result == 4 )
    {
      result = (*(int (**)(void))(**((_DWORD **)dword_563908 + 1535) + 28))();
      if ( !result )
      {
        if ( *((_DWORD *)dword_563918 + 2257) )
        {
          v14 = sub_4A9DE0(dword_56390C, 49);
          v15 = sub_4AA690(v14);
          sprintf(&Dest, "%s=Join Game", v15);
          sub_401F32(
            &v16,
            &v17,
            &Dest,
            *((signed __int16 *)dword_563908 + 15373),
            *((signed __int16 *)dword_563908 + 15374));
          result = sub_4011E0(
                     *((_DWORD *)dword_563908 + 89),
                     &Dest,
                     *((signed __int16 *)dword_563908 + 15373),
                     *((signed __int16 *)dword_563908 + 15374),
                     *((signed __int16 *)dword_563908 + 15375),
                     v7 - v16,
                     v10);
        }
      }
    }
  }
  return result;
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0045F000) --------------------------------------------------------
int __thiscall sub_45F000(char *this, int a2)
{
  _DWORD *v2; // eax
  signed int v3; // edx
  bool v4; // sf
  int *v5; // edx
  _BYTE *v6; // ecx
  signed int v7; // esi
  int result; // eax

  v2 = this + 260;
  v3 = 4;
  do
  {
    v4 = *v2 - a2 < 0;
    *v2 -= a2;
    if ( v4 )
      *v2 = 0;
    v2 += 66;
    --v3;
  }
  while ( v3 );
  v5 = (int *)(this + 1056);
  v6 = this + 1088;
  v7 = 4;
  do
  {
    result = *v5;
    if ( *v5 > 0 )
    {
      result -= a2;
      *v5 = result;
      if ( result <= 0 )
      {
        *v6 = 0;
        *v5 = 0;
      }
    }
    ++v5;
    v6 += 256;
    --v7;
  }
  while ( v7 );
  return result;
}

//----- (0045F0D0) --------------------------------------------------------
int __cdecl sub_45F0D0(int a1, int a2)
{
  int v2; // ST04_4

  v2 = (unsigned __int8)(a2 + a1);
  *(_WORD *)((char *)&v2 + 1) = (unsigned __int8)(BYTE1(a2) + BYTE1(a1));
  BYTE2(v2) = BYTE2(a2) + BYTE2(a1);
  return v2;
}

//----- (0045F130) --------------------------------------------------------
int __cdecl sub_45F130(int a1, int a2)
{
  return a2 * ((a1 + 120000 / a2) % 240000) / 240000;
}

//----- (0045F1C0) --------------------------------------------------------
int __cdecl sub_45F1C0(signed __int16 *a1, int a2, int a3, int a4, int a5)
{
  signed __int16 v5; // ax
  int v6; // edi
  unsigned int v7; // edx
  int v8; // ecx
  unsigned int v9; // edx
  int v10; // edi
  int result; // eax

  v5 = a1[97];
  if ( v5 == 2 )
  {
    v6 = a1[88];
    v7 = (signed int)((unsigned __int64)(1717986919i64 * v6 * abs(a4)) >> 32) >> 6;
    v8 = v7 + (v7 >> 31);
    if ( v8 >= v6 - 1 )
      v8 = a1[88] - 1;
  }
  else if ( v5 == 1 )
  {
    v9 = (signed int)((unsigned __int64)(1172812403i64 * a1[88] * ((1000 * a2 + 120000 / a1[88]) % 240000)) >> 32) >> 16;
    v8 = v9 + (v9 >> 31);
  }
  else
  {
    v8 = 0;
  }
  v10 = a5;
  if ( a5 || (v10 = a1[85]) != 0 )
    result = v8 * a1[89] + a1[89] * (a3 % v10) / v10;
  else
    result = v8 * a1[89];
  return result;
}

//----- (0045F320) --------------------------------------------------------
void __thiscall sub_45F320(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  *this = &ProjectileWeapon::`vftable';
  if ( *(_DWORD *)(this[14] + 848) )
    sub_402919(this);
  sub_4A71E0(v1);
}
// 402919: using guessed type _DWORD __stdcall sub_402919(_DWORD);
// 516020: using guessed type void *ProjectileWeapon::`vftable';

//----- (0045F3B0) --------------------------------------------------------
int __thiscall sub_45F3B0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  __int16 v4; // di
  unsigned int v5; // edx
  unsigned int v6; // edx
  _DWORD **v7; // edx
  __int16 v8; // ax
  int v9; // ecx
  unsigned int v10; // edx
  _WORD *v11; // eax
  __int16 v12; // dx
  __int16 v13; // di
  int v14; // ST54_4
  unsigned int v15; // edx
  signed __int16 *v16; // eax
  unsigned int v17; // edx
  int v18; // ebx
  __int16 v19; // ax
  int v20; // ecx
  int v21; // edi
  __int16 v22; // ax
  int v23; // edi
  int v24; // eax
  _DWORD *v25; // ecx
  unsigned int v26; // edx
  signed __int16 *v27; // ecx
  int v28; // edx
  int v29; // eax
  bool v30; // zf
  int v31; // edx
  int v32; // eax
  _DWORD *i; // edi
  int v34; // eax
  int v35; // ST60_4
  int v36; // ST5C_4
  int v37; // ST58_4
  int v39; // [esp+7Ch] [ebp-40h]
  int v40; // [esp+80h] [ebp-3Ch]
  int v41; // [esp+84h] [ebp-38h]
  int v42; // [esp+88h] [ebp-34h]
  int v43; // [esp+8Ch] [ebp-30h]
  int v44; // [esp+90h] [ebp-2Ch]
  int v45; // [esp+94h] [ebp-28h]
  int v46; // [esp+98h] [ebp-24h]
  int v47; // [esp+9Ch] [ebp-20h]
  int v48; // [esp+A0h] [ebp-1Ch]
  int v49; // [esp+A4h] [ebp-18h]
  int v50; // [esp+A8h] [ebp-14h]
  int v51; // [esp+ACh] [ebp-10h]
  int v52; // [esp+B8h] [ebp-4h]

  v2 = this;
  v3 = this[14];
  this[15] = 1;
  v4 = *(_WORD *)(v3 + 788);
  if ( v4 )
  {
    v5 = (unsigned __int64)(274877907i64 * (signed int)this[21]) >> 32;
    sub_402590(
      v4,
      0,
      this[6] / 10000,
      this[7] / 10000,
      this[8] / 10000,
      0,
      this[16] / 10,
      this[17] / 10,
      this[18] / 10,
      ((signed int)v5 >> 6) + (v5 >> 31),
      this[31],
      this[12],
      this[13],
      this[4],
      this[30],
      0,
      0,
      0);
  }
  if ( !v2[12] && v2[13] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v6 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[6]) >> 32) >> 12;
    (*(void (__stdcall **)(_DWORD, unsigned int, int, int))(*(_DWORD *)dword_56391C + 80))(
      *(_DWORD *)(v2[14] + 128),
      v6 + (v6 >> 31),
      v2[7] / 10000,
      v2[8] / 10000);
  }
  v2[27] = -1;
  v7 = (_DWORD **)dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
  {
    v8 = *(_WORD *)(v2[14] + 736);
    if ( v8
      && (v8 != 1 || !v2[12] && v2[13] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96))
      && (v8 != 2 || v2[4] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100))
      && (v8 != 4 || v2[4] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100)) )
    {
      if ( v8 != 3
        || (v9 = *((_DWORD *)dword_563908 + 6897), v2[4] != *(signed __int16 *)(v9 + 100))
        || !v2[12] && v2[13] == *(signed __int16 *)(v9 + 96) )
      {
        if ( v8 != 5 || *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) != a2 )
          goto LABEL_42;
      }
    }
    if ( sub_4014FB(*((_DWORD *)dword_563908 + 6897))
      || *(_WORD *)(v2[14] + 740)
      && (v10 = (unsigned __int64)(1759218605i64 * (signed int)v2[7]) >> 32,
          !sub_4B5060(
             *((signed __int16 **)dword_563908 + 1508),
             10000,
             *((_DWORD *)dword_563908 + 62),
             *((_DWORD *)dword_563908 + 63),
             v2[6] / 10000,
             ((signed int)v10 >> 12) + (v10 >> 31),
             0)) )
    {
LABEL_41:
      v7 = (_DWORD **)dword_563908;
LABEL_42:
      v27 = (signed __int16 *)v2[14];
      if ( v27[372] && v27[378] )
      {
        v28 = v2[7];
        v39 = v2[6] / 10000;
        v29 = v28 / 10000;
        v30 = v2[12] == 0;
        v31 = v2[16];
        v40 = v29;
        v32 = v2[17];
        v41 = v31;
        v42 = v32;
        v43 = v27[378];
        v44 = v27[372];
        v45 = v27[375];
        v46 = v27[376];
        v51 = v27[380];
        v47 = v27[368];
        if ( v30 )
          v48 = -1;
        else
          v48 = v2[13];
        v49 = v2[4];
        v50 = rand();
        sub_401A69(&v39, *(signed __int16 *)(v2[14] + 758));
        v7 = (_DWORD **)dword_563908;
      }
      if ( v2[44] )
      {
        for ( i = (_DWORD *)*v7[352]; i; i = (_DWORD *)i[1] )
        {
          if ( i != v2 && !i[15] )
          {
            v34 = i[43];
            if ( v34 )
            {
              if ( i[44] == v2[44] )
              {
                if ( v34 == 2 )
                  sub_401B09(a2);
                i[15] = 1;
              }
            }
          }
        }
      }
      goto LABEL_58;
    }
    v11 = (_WORD *)v2[14];
    v12 = v11[372];
    if ( v12 )
    {
      v13 = v11[373];
      if ( v13 )
      {
        v14 = v12;
        v15 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[6]) >> 32) >> 12;
        (*(void (__stdcall **)(unsigned int, int, _DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD, _DWORD))(**((_DWORD **)dword_563908 + 6898) + 208))(
          v15 + (v15 >> 31),
          v2[7] / 10000,
          v2[16],
          v2[17],
          v13,
          (signed __int16)v11[374],
          v14,
          (signed __int16)v11[375],
          (signed __int16)v11[376],
          (signed __int16)v11[377]);
      }
    }
    v16 = (signed __int16 *)v2[14];
    v17 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[6]) >> 32) >> 12;
    v18 = (*(int (__stdcall **)(unsigned int, int, int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**((_DWORD **)dword_563908 + 6898) + 212))(
            v17 + (v17 >> 31),
            v2[7] / 10000,
            v2[8] / 10000,
            v16[386],
            v16[389],
            v16[390],
            v16[388],
            v16[387],
            v16[391],
            v16[392]);
    v19 = *(_WORD *)(v2[14] + 790);
    if ( v19 )
    {
      v20 = *((_DWORD *)dword_563908 + 1507);
      v21 = sub_4028EC(v19);
      if ( v21 )
      {
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)v21 + 4))(v21) == 11 && v18 < abs(*(_DWORD *)(v21 + 608)) )
        {
          v22 = *(_WORD *)(v21 + 628);
          if ( !v22 )
          {
            v23 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
            goto LABEL_35;
          }
          if ( v22 == 1 )
          {
            v23 = *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 56);
LABEL_35:
            if ( v23 != -1 )
            {
              v52 = 0;
              if ( operator new(0x2Cu) )
                v24 = sub_401E3D(*(signed __int16 *)(v2[14] + 790), v23, 0, v2[12], v2[13]);
              else
                v24 = 0;
              v25 = (_DWORD *)*((_DWORD *)dword_563908 + 353);
              v52 = -1;
              sub_4A7300(v25, v24);
            }
            goto LABEL_40;
          }
        }
      }
    }
LABEL_40:
    v26 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[6]) >> 32) >> 12;
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, unsigned int, int, int, _DWORD))(**((_DWORD **)dword_563908 + 6898)
                                                                                  + 140))(
      v2[12],
      v2[13],
      v2[4],
      v26 + (v26 >> 31),
      v2[7] / 10000,
      v2[8] / 10000,
      v2[14]);
    goto LABEL_41;
  }
LABEL_58:
  v35 = v2[18];
  v36 = v2[17];
  v37 = v2[16];
  return sub_4028FB(
           *(_DWORD *)(v2[14] + 1452),
           *(_DWORD *)(v2[14] + 1456),
           *(_DWORD *)(v2[14] + 1464),
           v2[14] + 1108,
           v2[6],
           v2[7],
           v2[8]);
}
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 401A69: using guessed type _DWORD __stdcall sub_401A69(_DWORD, _DWORD);
// 401B09: using guessed type _DWORD __stdcall sub_401B09(_DWORD);
// 401E3D: using guessed type _DWORD __stdcall sub_401E3D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4028EC: using guessed type _DWORD __stdcall sub_4028EC(_DWORD);
// 4028FB: using guessed type _DWORD __cdecl sub_4028FB(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0045FBF0) --------------------------------------------------------
void __thiscall sub_45FBF0(signed int *this, _DWORD *a2)
{
  signed int *v2; // ebp
  _DWORD *v3; // esi
  signed int v4; // eax
  int v5; // eax
  signed int v6; // ecx
  unsigned int v7; // edx
  int v8; // edi
  signed int v9; // edx
  unsigned int v10; // ebx
  int v11; // ecx
  int v12; // ebx
  signed int v13; // ecx
  long double v14; // st7
  int v15; // ebx
  double v16; // ST2C_8
  unsigned int v17; // edi
  unsigned int v18; // edx
  int v19; // eax
  double v20; // st7
  double v21; // st6
  int v22; // [esp+20h] [ebp-14h]
  int v23; // [esp+24h] [ebp-10h]
  int v24; // [esp+38h] [ebp+4h]
  signed int v25; // [esp+38h] [ebp+4h]

  v2 = this;
  if ( !this[15] )
  {
    v3 = a2;
    v4 = a2[11];
    if ( this[42] != v4 )
    {
      if ( (this[42] = v4, (v5 = a2[8]) == 0)
        || v5 == 1 && (this[12] || this[13] != a2[9])
        || v5 == 2 && this[4] != a2[10]
        || v5 == 4 && this[4] == a2[10]
        || v5 == 3 && this[4] == a2[10] && (this[12] || this[13] != a2[9]) )
      {
        v6 = this[7];
        v7 = (signed int)((unsigned __int64)(1759218605i64 * v2[6]) >> 32) >> 12;
        v8 = v7 + (v7 >> 31);
        v9 = (signed int)((unsigned __int64)(1759218605i64 * v6) >> 32) >> 12;
        v10 = (signed int)((unsigned __int64)(1759218605i64 * v6) >> 32) >> 12;
        v11 = *((_DWORD *)dword_563908 + 1508);
        v12 = v9 + (v10 >> 31);
        if ( *((_BYTE *)dword_563908 + 480 * sub_40137F(v8 / 16, v12 / 16) + 59600) )
        {
          v13 = a2[5];
          v23 = v12 - a2[1];
          v22 = (v8 - *a2) * (v8 - *a2) + v23 * v23;
          if ( v22 <= v13 * v13 )
          {
            v24 = 10 * a2[4];
            if ( v13 < 0 )
              v24 = (signed int)(((double)(signed int)abs(v13) - sqrt((double)v22)) * (double)v24 / (double)-v13);
            v14 = (double)v23;
            sub_4C444A((void *)v13);
            v15 = v3[7];
            v16 = (double)v24;
            v17 = ((signed int)((unsigned __int64)(274877907i64 * v15 * v3[2]) >> 32) >> 6)
                + (signed int)(cos(v14) * v16)
                + ((unsigned int)((unsigned __int64)(274877907i64 * v15 * v3[2]) >> 32) >> 31);
            v25 = (signed int)(sin(v14) * v16);
            v18 = (signed int)((unsigned __int64)(274877907i64 * v15 * v3[3]) >> 32) >> 6;
            v19 = v18 + v25 + (v18 >> 31);
            if ( v3[12] )
            {
              v2[16] = v17;
              v2[17] = v19;
            }
            else
            {
              v2[16] += v17;
              v2[17] += v19;
            }
            v20 = (double)v2[17];
            v21 = (double)v2[16];
            sub_4C444A((void *)(v18 + v25));
            v2[21] = sub_4012C6(v20);
          }
        }
      }
    }
  }
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);

//----- (0045FEA0) --------------------------------------------------------
void __thiscall sub_45FEA0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // ebp
  int v7; // edi
  int v8; // ebx
  unsigned int v9; // edx
  _BYTE *v10; // edi
  int v11; // ST1C_4
  int v12; // ecx
  unsigned int v13; // edx
  int v14; // eax
  int v15; // ecx
  int v16; // edi
  int v17; // eax
  unsigned int v18; // edx
  int v19; // edi
  int v20; // eax
  int v21; // ecx
  int v22; // ebx
  int v23; // eax
  int v24; // ecx
  int v25; // edi
  int v26; // eax
  int v27; // [esp+Ch] [ebp+8h]
  int v28; // [esp+Ch] [ebp+8h]

  v4 = this;
  if ( !this[22] )
  {
    v5 = this[6];
    v6 = v5 / 10000 - a3;
    v7 = v4[7];
    v8 = v7 / 10000 - a4;
    if ( v6 >= -128 && v6 <= *(_DWORD *)(a2 + 4) && v8 >= -128 && v8 <= *(_DWORD *)(a2 + 8) )
    {
      v27 = v4[39];
      if ( v4[39] )
      {
        v9 = (signed int)((unsigned __int64)(1759218605i64 * v7) >> 32) >> 16;
        v10 = dword_563908;
        v11 = v5 / 160000;
        v12 = *((_DWORD *)dword_563908 + 1508);
        if ( !v10[480 * sub_40137F(v11, v9 + (v9 >> 31)) + 59595] )
        {
          v13 = (signed int)((unsigned __int64)(274877907i64 * (signed int)v4[21]) >> 32) >> 6;
          v14 = sub_4025D1(v27, v13 + (v13 >> 31), v4[23], v4[8] / 10000, *(signed __int16 *)(v4[14] + 1044));
          v15 = v4[14];
          v16 = v14;
          v17 = *(_DWORD *)(v15 + 1040);
          if ( *(_BYTE *)(v15 + 824) & 2 )
            v17 = sub_4015FF(v17, v4[41]);
          sub_4A50B0(v4[39], v16, a2, v6, v8, v4[40], v17, 0, 0, 0);
        }
      }
      v18 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[8]) >> 32) >> 12;
      v19 = v18 + (v18 >> 31);
      v20 = sub_40212B(v18 + (v18 >> 31));
      v21 = v4[33];
      v22 = v8 - v20;
      v28 = v20;
      if ( v21 )
      {
        v23 = sub_4025D1(v21, v4[21] / 1000, v4[23], v19, *(signed __int16 *)(v4[14] + 984));
        v24 = v4[14];
        v25 = v23;
        v26 = *(_DWORD *)(v24 + 980);
        if ( *(_BYTE *)(v24 + 824) & 1 )
          v26 = sub_4015FF(v26, v4[41]);
        sub_4A50B0(v4[33], v25, a2, v6, v22, v4[34], v26, v28, 0, 0);
      }
    }
  }
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);
// 40212B: using guessed type _DWORD __cdecl sub_40212B(_DWORD);
// 4025D1: using guessed type _DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00460120) --------------------------------------------------------
int __thiscall sub_460120(signed int *this)
{
  signed int v1; // edi
  int v2; // eax
  int v3; // eax
  __int16 v4; // ax
  int result; // eax
  int v6; // ST04_4
  unsigned int v7; // edx
  int v8; // ecx
  signed int v9; // [esp-Ch] [ebp-14h]
  signed int v10; // [esp-8h] [ebp-10h]
  int v11; // [esp-4h] [ebp-Ch]
  signed int v12; // [esp+4h] [ebp-4h]

  v1 = this[14];
  v2 = *(_DWORD *)(v1 + 844);
  v3 = BYTE1(v2) | 32 * ((*(_DWORD *)(v1 + 844) >> 16) & 0xF8);
  if ( dword_576828 == 2 )
    v4 = v3 & 0xFFF8;
  else
    v4 = 2 * (v3 & 0xFFFC);
  result = (unsigned __int16)(((signed int)(unsigned __int8)*(_DWORD *)(v1 + 844) >> 3) | 4 * v4);
  switch ( *(_WORD *)(v1 + 818) )
  {
    case 1:
      v12 = 0;
      v11 = (unsigned __int16)result;
      v10 = 1;
      v9 = 1;
      break;
    case 2:
      v12 = 0;
      v11 = (unsigned __int16)result;
      v10 = 2;
      v9 = 2;
      break;
    case 3:
      v12 = 1;
      v11 = (unsigned __int16)result;
      v10 = 2;
      v9 = 2;
      break;
    default:
      return result;
  }
  v6 = this[7] / 160000;
  v7 = (signed int)((unsigned __int64)(1759218605i64 * this[6]) >> 32) >> 16;
  v8 = *((_DWORD *)dword_563908 + 1505);
  return sub_401A7D(v7 + (v7 >> 31), v6, v9, v10, v11, 1, v12);
}
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (00460210) --------------------------------------------------------
void sub_460210()
{
  srand(0x8FBu);
}

//----- (00460220) --------------------------------------------------------
signed int __thiscall sub_460220(int *this, int a2)
{
  int *v2; // esi
  int v3; // ecx
  int v4; // eax
  _DWORD *v6; // edi
  int v7; // ecx
  int v8; // ecx
  double v9; // st7
  int v10; // edx
  int v11; // ecx
  _DWORD *v12; // edi
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  long double v16; // st7
  int v17; // eax
  int v18; // ecx
  int v19; // edx
  int v20; // edx
  signed __int16 *v21; // ecx
  int v22; // eax
  int *v23; // ecx
  unsigned int v24; // edx
  int v25; // eax
  unsigned int v26; // edx
  int v27; // ecx
  int *v28; // edi
  int *v29; // ebx
  int v30; // edx
  signed int v31; // eax
  int v32; // ecx
  int v33; // eax
  int *v34; // ecx
  unsigned int v35; // edx
  int v36; // eax
  unsigned int v37; // edx
  int v38; // ecx
  unsigned int v39; // edx
  __int16 v40; // ax
  unsigned int v41; // edx
  int v42; // eax
  __int16 v43; // cx
  int v44; // ecx
  int v45; // eax
  void *v46; // ST7C_4
  int v47; // ebx
  unsigned int v48; // edx
  int v49; // edi
  void (__thiscall *v50)(int, int); // edx
  _DWORD *v51; // ecx
  double v52; // st7
  double v53; // st6
  int v54; // ecx
  int v55; // eax
  int v56; // eax
  int v57; // ebx
  int v58; // edi
  int v59; // eax
  __int16 v60; // dx
  int v61; // eax
  signed int v62; // ebx
  signed int v63; // edi
  int v64; // ST30_4
  int v65; // ecx
  int v66; // eax
  int v67; // edi
  int v68; // eax
  signed int v69; // [esp+14h] [ebp-68h]
  int v70; // [esp+14h] [ebp-68h]
  int v71; // [esp+14h] [ebp-68h]
  int v72; // [esp+18h] [ebp-64h]
  signed int v73; // [esp+1Ch] [ebp-60h]
  int v74; // [esp+20h] [ebp-5Ch]
  int v75; // [esp+24h] [ebp-58h]
  int v76; // [esp+28h] [ebp-54h]
  int v77; // [esp+28h] [ebp-54h]
  int v78; // [esp+2Ch] [ebp-50h]
  int v79; // [esp+30h] [ebp-4Ch]
  int v80; // [esp+34h] [ebp-48h]
  int v81; // [esp+38h] [ebp-44h]
  double v82; // [esp+3Ch] [ebp-40h]
  signed int v83; // [esp+48h] [ebp-34h]
  int v84; // [esp+4Ch] [ebp-30h]
  int v85; // [esp+50h] [ebp-2Ch]
  int v86; // [esp+54h] [ebp-28h]
  int v87; // [esp+58h] [ebp-24h]
  int v88; // [esp+5Ch] [ebp-20h]
  int v89; // [esp+60h] [ebp-1Ch]
  char v90; // [esp+64h] [ebp-18h]
  char v91; // [esp+68h] [ebp-14h]
  int v92; // [esp+78h] [ebp-4h]

  v2 = this;
  if ( this[15] )
    return 1;
  v3 = this[22];
  v4 = a2;
  if ( v3 > 0 )
  {
    v4 = v3 + a2;
    a2 += v3;
    v2[22] = 0;
  }
  v75 = *(signed __int16 *)(v2[14] + 820);
  v78 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1514) + 26408);
  if ( !*(_DWORD *)(*((_DWORD *)dword_563908 + 1514) + 26408) )
    v75 = 0;
  if ( v4 <= 0 )
    return 0;
  while ( 1 )
  {
    if ( v4 >= 5 )
      v4 = 5;
    v74 = v4;
    v73 = 0;
    v81 = 0;
    if ( v4 > 0 )
    {
      v72 = a2 - 1;
      do
      {
        ++v2[23];
        v6 = (_DWORD *)v2[14];
        v7 = v2[23];
        if ( v7 > abs(v6[209]) && v2[27] < 0 )
        {
          if ( *(_DWORD *)(v2[14] + 836) < 0 )
LABEL_88:
            sub_401B09(-1);
          return 1;
        }
        if ( v7 < v6[214] && v7 >= v6[213] )
        {
          v8 = v2[26];
          v9 = (double)v2[19];
          v2[21] = (v8 + v2[21] + 240000) % 240000;
          v10 = v8 + v6[216];
          v11 = v2[21];
          v2[26] = v10;
          v2[16] = (signed int)(dbl_562808[v11 / 1000] * v9);
          v2[17] = (signed int)(v9 * dbl_563188[v11 / 1000]);
        }
        if ( v75 )
        {
          v76 = 0;
          if ( v78 > 0 )
          {
            v69 = 25384;
            do
            {
              v12 = *(_DWORD **)(v69 + *((_DWORD *)dword_563908 + 1514));
              v13 = (v2[6] - v12[6]) / 10000;
              v14 = (v2[7] - v12[7]) / 10000;
              v83 = v14;
              v15 = v13 * v13 + v14 * v14;
              if ( v15 > 0 && v15 < v12[4] )
              {
                v82 = (double)v15;
                v16 = sqrt(v82);
                if ( (signed int)v16 < *(signed __int16 *)(v12[2] + 44) )
                  return 1;
                v2[16] -= (signed int)((double)((v2[6] - v12[6]) / 10000) / v16 * (double)(signed int)v12[5] / v82);
                v2[17] -= (signed int)((double)v83 / v16 * (double)(signed int)v12[5] / v82);
                v73 = 1;
              }
              v69 += 4;
              ++v76;
            }
            while ( v76 < v78 );
          }
        }
        if ( v2[20] )
        {
          sub_4B59C0(*((_DWORD **)dword_563908 + 1508), &v84, &v85, v2[6], v2[7], v2[8], v2[8]);
          v2[18] += v2[20];
          v17 = v2[18];
          v2[8] += v17;
          v18 = v2[8];
          v19 = v84;
          if ( v18 < v84 || (v19 = v85, v18 > v85) )
          {
            v20 = 2 * v19 - v18;
            v21 = (signed __int16 *)v2[14];
            v2[8] = v20;
            v2[18] = v17 * v21[413] / -1000;
            v2[16] = v2[16] * v21[414] / 1000;
            v2[17] = v2[17] * v21[414] / 1000;
            v22 = v2[25];
            if ( v22 <= 0 )
            {
              if ( v21[415] >= 0 )
                goto LABEL_88;
              v2[18] = 0;
              v2[16] = 0;
              v2[17] = 0;
              v2[20] = 0;
            }
            v23 = (int *)v2[32];
            v2[25] = v22 - 1;
            if ( v23 )
            {
              v24 = (unsigned __int64)(1759218605i64 * v2[7]) >> 32;
              v25 = ((signed int)v24 >> 12) + (v24 >> 31);
              v26 = (signed int)((unsigned __int64)(1759218605i64 * v2[6]) >> 32) >> 12;
              sub_4A6E90(v23, v26 + (v26 >> 31), v25, 0, 0, 0, 0, 0);
            }
          }
        }
        v27 = v2[14];
        v28 = v2 + 16;
        v2[16] = v2[16] * *(signed __int16 *)(v27 + 792) / 10000;
        v29 = v2 + 17;
        v2[17] = v2[17] * *(signed __int16 *)(v27 + 792) / 10000;
        v30 = v2[8];
        v2[19] = v2[19] * *(signed __int16 *)(v27 + 792) / 10000;
        v31 = sub_4AB0E0(
                *((_DWORD **)dword_563908 + 1508),
                v30 / 10000,
                v30 / 10000,
                v2 + 6,
                v2 + 7,
                v2 + 16,
                v2 + 17,
                v27 + 592,
                *(_WORD *)(v27 + 814) == -1);
        if ( v31 )
        {
          if ( v31 == 2 )
            return 1;
          v33 = v2[24];
          if ( v33 <= 0 )
          {
            if ( *(_WORD *)(v2[14] + 814) != -2 )
            {
              sub_401B09(-1);
              return 1;
            }
            return 1;
          }
          v34 = (int *)v2[32];
          v2[24] = v33 - 1;
          if ( v34 )
          {
            v35 = (unsigned __int64)(1759218605i64 * v2[7]) >> 32;
            v36 = ((signed int)v35 >> 12) + (v35 >> 31);
            v37 = (signed int)((unsigned __int64)(1759218605i64 * v2[6]) >> 32) >> 12;
            sub_4A6E90(v34, v37 + (v37 >> 31), v36, 0, 0, 0, 0, 0);
          }
          v38 = v2[14];
          *v28 = *v28 * *(signed __int16 *)(v38 + 808) / 1000;
          *v29 = *v29 * *(signed __int16 *)(v38 + 808) / 1000;
          v39 = (signed int)((unsigned __int64)(274877907i64 * v2[19] * *(signed __int16 *)(v38 + 808)) >> 32) >> 6;
          v32 = v39 + (v39 >> 31);
          v2[19] = v32;
          v73 = 1;
        }
        if ( *((_DWORD *)dword_563918 + 2327) )
        {
          v70 = v2[35];
          if ( v2[35] )
          {
            v40 = *(_WORD *)(v2[14] + 742);
            if ( v40 > 0 )
            {
              v32 = v40;
              if ( !(v2[23] % v40) )
              {
                if ( *(_WORD *)(v70 + 194) == 1 )
                {
                  v41 = (signed int)((unsigned __int64)(1172812403i64
                                                      * *(signed __int16 *)(v70 + 176)
                                                      * ((v2[21] % 240000 + 120000 / *(signed __int16 *)(v70 + 176))
                                                       % 240000)) >> 32) >> 16;
                  v79 = v41 + (v41 >> 31);
                }
                else
                {
                  v70 = v2[35];
                  v79 = rand() % *(signed __int16 *)(v70 + 176);
                }
                v80 = abs(*(signed __int16 *)(*(_DWORD *)(v70 + 360) + 4)) / 4;
                v77 = *(signed __int16 *)(v70 + 170);
                v42 = v2[14];
                v43 = *(_WORD *)(v42 + 1104);
                if ( v43 )
                  v77 = v43;
                v44 = *(_DWORD *)(v42 + 1100);
                v71 = *(_DWORD *)(v42 + 1100);
                if ( *(_BYTE *)(v42 + 824) & 4 )
                {
                  v45 = v2[41];
                  LOBYTE(v71) = v44 + v45;
                  BYTE1(v71) = BYTE1(v45) + BYTE1(v44);
                  HIWORD(v71) = (unsigned __int8)(BYTE2(v71) + ((unsigned int)v2[41] >> 16));
                }
                v46 = operator new(0x44u);
                v92 = 0;
                if ( v46 )
                {
                  v47 = v80 * *v29;
                  if ( dword_53A7C4 )
                  {
                    v48 = (signed int)((unsigned __int64)(12025908433i64 * v47) >> 32) >> 2;
                    v47 = v48 + (v48 >> 31);
                  }
                  v49 = sub_4025CC(
                          v2[35],
                          v2[6] - v80 * *v28,
                          v2[7] - v47,
                          v2[8] - 5 * v2[18],
                          0,
                          0,
                          0,
                          v79,
                          v77,
                          v77,
                          v2[36],
                          v71,
                          0);
                }
                else
                {
                  v49 = 0;
                }
                v50 = *(void (__thiscall **)(int, int))(*(_DWORD *)v49 + 4);
                v92 = -1;
                v50(v49, v72);
                if ( *(_DWORD *)((char *)dword_563908 + 32946) )
                  v51 = (_DWORD *)*((_DWORD *)dword_563908 + 350);
                else
                  v51 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
                sub_4A7300(v51, v49);
              }
            }
          }
        }
        --v72;
        ++v81;
      }
      while ( v81 < v74 );
      if ( v73 )
      {
        v52 = (double)v2[17];
        v53 = (double)v2[16];
        sub_4C444A((void *)v32);
        v2[21] = (24000000 - (signed int)((v52 + 1.57079632675) * -38197.18634314663)) % 240000;
      }
    }
    v54 = v2[14];
    v55 = *(_DWORD *)(v54 + 840);
    if ( (v55 < 0 || v2[23] < v55)
      && (v55 != -1 || v2[24] == *(signed __int16 *)(v54 + 814) && v2[25] == abs(*(signed __int16 *)(v54 + 830))) )
    {
      goto LABEL_85;
    }
    v56 = v2[27];
    if ( v56 < 0 )
      break;
    v57 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v56 + 4);
    v58 = 0;
    v59 = -1;
    if ( v57 )
    {
      (*(void (__thiscall **)(int, int *, int *, char *))(*(_DWORD *)v57 + 84))(v57, &v86, &v87, &v90);
      v58 = (v86 - v2[6]) / 10000 * ((v86 - v2[6]) / 10000) + (v87 - v2[7]) / 10000 * ((v87 - v2[7]) / 10000);
      v59 = (*(int (__thiscall **)(int))(*(_DWORD *)v57 + 16))(v57);
    }
    v2[28] -= a2;
    if ( !v58 || v58 > v2[29] || v2[28] < 0 )
      goto LABEL_94;
    v2[29] = v58;
LABEL_85:
    a2 -= v74;
    if ( a2 <= 0 )
      return 0;
    v4 = a2;
  }
  v60 = *(_WORD *)(v54 + 816);
  if ( v60 < 0 )
    goto LABEL_85;
  LOWORD(v61) = *(_WORD *)(v54 + 738);
  if ( (_WORD)v61 == 3 )
    goto LABEL_85;
  v62 = -1;
  v61 = (signed __int16)v61;
  v63 = -1;
  if ( (_WORD)v61 )
  {
    if ( v61 == 1 )
      v62 = v2[4];
  }
  else
  {
    v63 = v2[4];
  }
  v64 = *(_DWORD *)(v54 + 832);
  v65 = *((_DWORD *)dword_563908 + 1503);
  v66 = sub_4014DD(v62, v63, v2[5], v2[6] / 10000, v2[7] / 10000, v2[8] / 10000, v60, v64);
  v2[27] = v66;
  if ( v66 < 0 )
    goto LABEL_85;
  v2[28] = *(_DWORD *)((char *)dword_563908 + 57690);
  v67 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v66 + 4);
  if ( !v67 )
    goto LABEL_85;
  (*(void (__thiscall **)(int, int *, int *, char *))(*(_DWORD *)v67 + 84))(v67, &v88, &v89, &v91);
  v68 = v2[14];
  v2[29] = (v88 - v2[6]) / 10000 * ((v88 - v2[6]) / 10000) + (v89 - v2[7]) / 10000 * ((v89 - v2[7]) / 10000);
  if ( *(_WORD *)(v68 + 816) >= 12 && !*(_DWORD *)(v68 + 848) )
    goto LABEL_85;
  v59 = (*(int (__thiscall **)(int))(*(_DWORD *)v67 + 16))(v67);
LABEL_94:
  sub_401B09(v59);
  return 1;
}
// 4014DD: using guessed type _DWORD __stdcall sub_4014DD(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401B09: using guessed type _DWORD __stdcall sub_401B09(_DWORD);
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00460F00) --------------------------------------------------------
_DWORD *__thiscall sub_460F00(_DWORD *this, int a2, int a3, int a4, int a5, int a6, signed int a7, signed int a8, int a9, int a10, int a11, int a12, unsigned int a13, int a14, int a15, int a16, int a17, int a18)
{
  _DWORD *v18; // esi
  signed int v19; // ecx
  __int16 v20; // ax
  int v21; // eax
  signed int v22; // edx
  signed int v23; // edi
  int v24; // edx
  int v25; // ST48_4
  int *v26; // ecx
  int v27; // edi
  __int16 v28; // ax
  long double v29; // ST60_8
  long double v30; // st7
  long double v31; // st6
  long double v32; // st5
  double v33; // st4
  int v34; // eax
  unsigned int v35; // edx
  int v36; // ebx
  int v37; // ST58_4
  long double v38; // st4
  double v39; // st3
  long double v40; // ST48_8
  double v41; // st7
  int v42; // ST54_4
  int v43; // ST58_4
  double v44; // ST60_8
  int v45; // edx
  signed __int16 *v46; // edi
  unsigned int v47; // edx
  int v48; // ebx
  __int16 v49; // ax
  int v50; // edi
  int v51; // eax
  int v52; // ecx
  int v53; // eax
  signed int v55; // [esp+14h] [ebp-40h]
  signed int v56; // [esp+14h] [ebp-40h]
  int v57; // [esp+20h] [ebp-34h]
  int v58; // [esp+24h] [ebp-30h]
  int v59; // [esp+2Ch] [ebp-28h]
  int v60; // [esp+70h] [ebp+1Ch]

  v18 = this;
  this[43] = a17;
  this[31] = a11;
  this[4] = a14;
  this[44] = a18;
  this[30] = a15;
  *this = &ProjectileWeapon::`vftable';
  this[42] = 0;
  this[5] = -1;
  this[12] = a12;
  this[13] = a13;
  this[15] = 0;
  if ( !a12 )
  {
    v19 = a13 > 0x1387 ? 0 : *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * a13 + 12408);
    v18[5] = a13;
    if ( v19 )
      v18[4] = *(signed __int16 *)(v19 + 100);
  }
  v18[14] = a2;
  v20 = *(_WORD *)(a2 + 764);
  if ( v20 )
    v21 = -v20;
  else
    v21 = *(_DWORD *)(a2 + 128);
  v18[3] = v21;
  v18[22] = a3;
  v18[27] = -1;
  v18[23] = 0;
  v18[35] = 0;
  v18[29] = 0;
  v18[26] = *(_DWORD *)(a2 + 860);
  v18[6] = 10000 * a4;
  v18[7] = 10000 * a5;
  v22 = v18[4];
  v18[8] = 10000 * (a6 + *(signed __int16 *)(a2 + 798));
  v18[41] = 0;
  if ( v22 >= 0 )
  {
    if ( v22 >= 50 )
    {
      v23 = 1;
      if ( *(_DWORD *)((char *)dword_563908 + 108206) >= 1 )
        v23 = *(_DWORD *)((char *)dword_563908 + 108206);
      v22 %= v23;
    }
    v24 = 618 * v22;
    LOBYTE(v25) = *(_WORD *)((char *)dword_563908 + v24 + 77362);
    BYTE1(v25) = *(_WORD *)((char *)dword_563908 + v24 + 77360);
    HIWORD(v25) = (unsigned __int8)*(_WORD *)((char *)dword_563908 + v24 + 77358);
    v18[41] = v25;
  }
  v18[33] = *(_DWORD *)(a2 + 1428);
  v18[34] = *(_DWORD *)(a2 + 1432);
  v18[39] = *(_DWORD *)(a2 + 1436);
  v18[40] = *(_DWORD *)(a2 + 1440);
  v18[35] = *(_DWORD *)(a2 + 1444);
  v18[36] = *(_DWORD *)(a2 + 1448);
  v18[37] = *(_DWORD *)(a2 + 1420);
  v18[38] = *(_DWORD *)(a2 + 1424);
  if ( !a16 )
  {
    v26 = *(int **)(a2 + 1460);
    if ( v26 )
      sub_4A6E90(v26, a4, a5, 0, 0, 0, 0, 0);
  }
  v27 = v18[14];
  v18[32] = *(_DWORD *)(v27 + 1468);
  v28 = *(_WORD *)(v27 + 806);
  if ( v28 == 1 )
    v18[20] = 10 * *(_DWORD *)((char *)dword_563908 + 57722);
  else
    v18[20] = 10 * v28;
  v18[24] = *(signed __int16 *)(v27 + 814);
  v18[25] = abs(*(signed __int16 *)(v27 + 830));
  if ( *(_WORD *)(v27 + 794) >= 0 )
  {
    v35 = (signed int)((unsigned __int64)(274877907i64 * a7 * *(signed __int16 *)(v27 + 794)) >> 32) >> 6;
    v60 = v35 + (v35 >> 31);
    v34 = a8 * *(signed __int16 *)(v27 + 794) / 1000;
  }
  else
  {
    v29 = (double)(1000 * (a10 + 180) % 240000) * 0.00002617993877916667;
    v30 = cos(v29);
    v31 = sin(v29);
    v32 = (double)a8 * v31 + (double)a7 * v30;
    v33 = (double)-*(signed __int16 *)(v27 + 794);
    v60 = (signed int)(v30 * v32 * v33 / 1000.0);
    v34 = (signed int)(v31 * v32 * v33 / 1000.0);
  }
  v57 = v18[30];
  v36 = a9 * *(signed __int16 *)(v27 + 796) / 1000;
  v59 = *(signed __int16 *)(v27 + 802) - *(signed __int16 *)(v27 + 800);
  v55 = *(signed __int16 *)(v27 + 800);
  if ( v59 > 0 )
  {
    v37 = (9301 * v57 + 49297) % 233280;
    v57 = (9301 * v37 + 49297) % 233280;
    v55 += abs(v37 ^ (v57 << 12)) % v59;
  }
  v38 = (double)(1000 * (a10 + 180) % 240000) * 0.00002617993877916667 + (double)v55 * 2.0 * 3.1415926535 / 360.0;
  if ( *(_WORD *)(v27 + 810) == -1000 )
  {
    v39 = (double)(signed int)v18[31];
  }
  else
  {
    v58 = *(signed __int16 *)(v27 + 812) - *(signed __int16 *)(v27 + 810);
    v56 = *(signed __int16 *)(v27 + 810);
    if ( v58 > 0 )
      v56 += abs((9301 * v57 + 49297) % 233280 ^ ((9301 * ((9301 * v57 + 49297) % 233280) + 49297) % 233280 << 12))
           % v58;
    v39 = (double)v56;
  }
  v40 = 3.1415926535 * (2.0 * v39) / 360.0;
  v41 = (double)(signed int)(cos(v40) * (double)(10 * *(signed __int16 *)(v27 + 804)));
  v42 = (signed int)(cos(v38) * v41) + 10 * v60;
  v18[16] = v42;
  v43 = (signed int)(v41 * sin(v38)) + 10 * v34;
  v18[17] = v43;
  v18[18] = (signed int)(sin(v40) * (double)(10 * *(signed __int16 *)(v27 + 804)) + (double)(10 * v36));
  v44 = (double)v43;
  v18[19] = (signed int)sqrt(v44 * v44 + (double)v42 * (double)v42);
  sub_4C444A((void *)(10 * v36));
  v45 = (24000000 - (signed int)((v44 + 1.57079632675) * -38197.18634314663)) % 240000;
  v46 = (signed __int16 *)v18[37];
  v18[21] = v45;
  if ( v46 )
  {
    if ( v46[97] == 1 )
    {
      v47 = (signed int)((unsigned __int64)(1172812403i64 * v46[88] * ((v45 + 120000 / v46[88]) % 240000)) >> 32) >> 16;
      v48 = v47 + (v47 >> 31);
    }
    else
    {
      v46 = (signed __int16 *)v18[37];
      v48 = rand() % v46[88];
    }
    v49 = *(_WORD *)(v18[14] + 924);
    v50 = v46[85];
    if ( v49 )
      v50 = v49;
    if ( operator new(0x44u) )
      v51 = sub_4025CC(
              v18[37],
              v18[6],
              v18[7],
              v18[8],
              v18[16] / 4,
              v18[17] / 4,
              v18[18] / 4,
              v48,
              v50,
              v50,
              v18[38],
              *(_DWORD *)(v18[14] + 920),
              0);
    else
      v51 = 0;
    sub_4A7300(*((_DWORD **)dword_563908 + 353), v51);
  }
  v52 = v18[14];
  v18[9] = *(_DWORD *)(v52 + 848) * *(_DWORD *)(v52 + 848);
  v53 = 10000 * *(_DWORD *)(v52 + 848);
  v18[10] = v53;
  v18[11] = abs(v53);
  if ( *(_DWORD *)(v52 + 848) )
    sub_4028E2(v18);
  return v18;
}
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4028E2: using guessed type _DWORD __stdcall sub_4028E2(_DWORD);
// 516020: using guessed type void *ProjectileWeapon::`vftable';

//----- (00461790) --------------------------------------------------------
void *__thiscall sub_461790(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4010DC();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4010DC: using guessed type int sub_4010DC(void);

//----- (004618B0) --------------------------------------------------------
int __thiscall sub_4618B0(_DWORD *this)
{
  _DWORD *v1; // esi
  int (__stdcall ***v2)(signed int); // ecx
  int result; // eax

  v1 = this;
  v2 = (int (__stdcall ***)(signed int))this[6];
  *v1 = &off_516048;
  if ( v2 )
  {
    result = (**v2)(1);
    v1[6] = 0;
  }
  return result;
}
// 516048: using guessed type int (__stdcall *off_516048)(int, int, int, int);

//----- (004618E0) --------------------------------------------------------
int __thiscall sub_4618E0(_DWORD *this, int a2)
{
  int result; // eax
  _DWORD *v3; // ecx

  result = a2;
  this[7] = a2;
  v3 = (_DWORD *)this[6];
  if ( v3 )
    result = sub_49E420(v3, 0);
  return result;
}

//----- (00461910) --------------------------------------------------------
int __thiscall sub_461910(_DWORD *this)
{
  _DWORD *v1; // ecx
  int result; // eax

  v1 = (_DWORD *)this[6];
  if ( v1 )
    result = sub_49E420(v1, 0);
  return result;
}

//----- (00461950) --------------------------------------------------------
int __thiscall sub_461950(_DWORD **this, int *a2)
{
  _DWORD **v2; // esi
  int result; // eax
  int *v4; // ecx
  int v5; // ebp
  int v6; // eax
  int v7; // edi
  _DWORD *v8; // ecx
  unsigned int v9; // edx
  int v10; // esi
  bool v11; // sf
  int v12; // eax
  int v13; // ecx
  int v14; // edx
  __int16 v15; // bx
  _DWORD *v16; // eax
  int v17; // edx
  int v18; // ecx
  int v19; // esi
  int v20; // edx
  _DWORD **v21; // [esp+8h] [ebp-Ch]
  char v22; // [esp+Ch] [ebp-8h]
  char v23; // [esp+10h] [ebp-4h]

  v2 = this;
  v21 = this;
  result = (*(int (__stdcall **)(char *, char *))(*this[6] + 92))(&v23, &v22);
  if ( result )
  {
    v4 = a2;
    v5 = a2[1];
    if ( v5 < a2[3] )
    {
      v6 = a2[2];
      do
      {
        v7 = *v4;
        if ( *v4 < v6 )
        {
          do
          {
            v8 = v21[7];
            v9 = (signed int)((unsigned __int64)(274877907i64 * v5 * (signed int)v21[7]) >> 32) >> 6;
            v10 = v9 + (v9 >> 31);
            v11 = v7 * (signed int)v8 / 1000 < 0;
            v12 = v7 * (signed int)v8 / 1000;
            v13 = *((_DWORD *)dword_563908 + 1508);
            if ( v11 || (v14 = *(_DWORD *)(v13 + 4), v12 >= v14) || v10 < 0 || v10 >= *(_DWORD *)(v13 + 8) )
              v15 = *(_WORD *)(v13 + 5188);
            else
              v15 = *(_WORD *)(*(_DWORD *)(v13 + 5184)
                             + 2
                             * ((unsigned int)*(unsigned __int16 *)(3 * (v12 + v10 * v14) + *(_DWORD *)(v13 + 5168)) >> 7));
            v16 = v21[6];
            v17 = v16[1];
            v18 = v7 + v16[186] - v16[184];
            if ( v18 >= v17 )
              v18 -= v17;
            v19 = v16[2];
            v20 = v5 + v16[187] - v16[185];
            if ( v20 >= v19 )
              v20 -= v19;
            *(_WORD *)(v16[19] + v20 * v16[14] + 2 * v18) = v15;
            v6 = a2[2];
            ++v7;
          }
          while ( v7 < v6 );
          v4 = a2;
        }
        ++v5;
      }
      while ( v5 < v4[3] );
      v2 = v21;
    }
    result = (*(int (**)(void))(*v2[6] + 96))();
  }
  return result;
}

//----- (00461AF0) --------------------------------------------------------
void __thiscall sub_461AF0(int *this, int a2, int a3, int a4, int a5, int a6)
{
  int *v6; // edi
  int v7; // ecx
  int v8; // esi
  int v9; // ebx
  int v10; // ebp
  int v11; // ecx
  int v12; // esi
  int v13; // ebx
  int v14; // esi
  int v15; // eax

  v6 = this;
  if ( a4 )
  {
    if ( *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1513) )
    {
      v7 = *((_DWORD *)dword_563908 + 1513);
      sub_40199C(a2, a3, a4, a5, a6);
    }
    v8 = v6[7];
    v9 = v6[6];
    v10 = v6[1];
    v11 = v6[12] + *(_DWORD *)(v10 + 4) + 1000 * a2 / v8 - *(_DWORD *)(v9 + 736) - *((_DWORD *)dword_563908 + 3099);
    v12 = *(_DWORD *)(v10 + 8) + 1000 * a3 / v8 - *(_DWORD *)(v9 + 740);
    v13 = *(signed __int16 *)(a6 + 56);
    v14 = v6[10] + v12 - *((_DWORD *)dword_563908 + 3099);
    if ( *(_WORD *)(a6 + 56) || (v13 = *(signed __int16 *)(a4 + 170), *(_WORD *)(a4 + 170)) )
      v15 = *(signed __int16 *)(a4 + 178) * (*((_DWORD *)dword_563908 + 2705) % v13) / v13;
    else
      v15 = 0;
    sub_4A50B0(a4, v15, v6[1], v11, v14, a5, *(_DWORD *)(a6 + 52), 0, 0, 0);
  }
}
// 40199C: using guessed type _DWORD __stdcall sub_40199C(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00461C40) --------------------------------------------------------
int __thiscall sub_461C40(_DWORD *this, int a2, int a3, unsigned __int16 a4)
{
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // eax
  int v7; // ecx
  int v8; // ebx
  int v9; // ebp
  int v10; // edi
  int v11; // ecx
  int v12; // eax
  bool v13; // zf
  bool v14; // sf
  unsigned __int8 v15; // of
  _DWORD *v16; // ecx
  int v17; // ebp
  int v18; // eax
  int v19; // edi
  int result; // eax
  int v21; // ebp
  int v22; // edi
  int v23; // edi
  int v24; // ebp
  int v25; // edi
  int v26; // ebp
  int v27; // [esp+68h] [ebp-20h]
  int v28; // [esp+6Ch] [ebp-1Ch]
  int v29; // [esp+70h] [ebp-18h]
  int v30; // [esp+78h] [ebp-10h]
  int v31; // [esp+7Ch] [ebp-Ch]
  int v32; // [esp+80h] [ebp-8h]
  int v33; // [esp+84h] [ebp-4h]
  int v34; // [esp+8Ch] [ebp+4h]
  int v35; // [esp+8Ch] [ebp+4h]
  int v36; // [esp+8Ch] [ebp+4h]

  v4 = this;
  v5 = this[6];
  v6 = *(_DWORD *)(v5 + 4);
  v7 = *(_DWORD *)(v5 + 8);
  v31 = v6;
  v8 = a3 - v7 / 2;
  v30 = v7 / 2;
  v33 = v7;
  v9 = v6 / 2;
  v10 = a2 - v6 / 2;
  v11 = abs(a3 - v7 / 2);
  v12 = abs(a2 - v6 / 2);
  v15 = __OFSUB__(v12, v11);
  v13 = v12 == v11;
  v14 = v12 - v11 < 0;
  v16 = (_DWORD *)v4[1];
  v32 = v9;
  if ( (unsigned __int8)(v14 ^ v15) | v13 )
  {
    if ( v8 >= 0 )
    {
      v36 = *((_DWORD *)dword_563908 + 3099);
      v25 = v9 + v4[12] + v16[1] + v10 * (v33 - v30) / v8 - v36;
      v26 = v4[10] + v16[2] - v36 + v33 - 1;
      (*(void (__stdcall **)(int, int, _DWORD, int, int, int))(*v16 + 20))(v25, v26, a4, v27, v28, v29);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 1, v26 - 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25, v26 - 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 + 1, v26 - 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 2, v26 - 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 1, v26 - 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25, v26 - 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 + 1, v26 - 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 + 2, v26 - 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 3, v26 - 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 2, v26 - 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 + 2, v26 - 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 + 3, v26 - 3, a4);
      v26 -= 4;
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v25 - 4, v26, a4);
      result = (*(int (__thiscall **)(_DWORD, int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v4[1], v25 + 4, v26, a4);
    }
    else
    {
      v35 = *((_DWORD *)dword_563908 + 3099);
      v23 = v9 + v4[12] + v16[1] - v30 * v10 / v8 - v35;
      v24 = v4[10] + v16[2] - v35;
      (*(void (__stdcall **)(int, int, _DWORD))(*v16 + 20))(v23, v24, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 1, v24 + 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23, v24 + 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 + 1, v24 + 1, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 2, v24 + 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 1, v24 + 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23, v24 + 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 + 1, v24 + 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 + 2, v24 + 2, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 3, v24 + 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 2, v24 + 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 + 2, v24 + 3, a4);
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 + 3, v24 + 3, a4);
      v24 += 4;
      (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v23 - 4, v24, a4);
      result = (*(int (__thiscall **)(_DWORD, int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v4[1], v23 + 4, v24, a4);
    }
  }
  else if ( v10 >= 0 )
  {
    v21 = v4[12] + v16[1] - *((_DWORD *)dword_563908 + 3099) + v31 - 1;
    v22 = v30 + v4[10] + v16[2] + v8 * (v31 - v32) / v10 - *((_DWORD *)dword_563908 + 3099);
    (*(void (__stdcall **)(int, int, _DWORD, int, int, int))(*v16 + 20))(v21, v22, a4, v27, v28, v29);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 1, v22 - 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 1, v22, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 1, v22 + 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 2, v22 - 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 2, v22 - 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 2, v22, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 2, v22 + 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 2, v22 + 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 3, v22 - 3, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 3, v22 - 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 3, v22 + 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21 - 3, v22 + 3, a4);
    v21 -= 4;
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v21, v22 - 4, a4);
    result = (*(int (__thiscall **)(_DWORD, int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v4[1], v21, v22 + 4, a4);
  }
  else
  {
    v34 = *((_DWORD *)dword_563908 + 3099);
    v17 = v4[12] + v16[1] - v34;
    v18 = v32 * v8 / v10;
    v19 = v30 + v4[10] + v16[2] - v18 - v34;
    (*(void (__stdcall **)(int, int, _DWORD))(*v16 + 20))(v17, v30 + v4[10] + v16[2] - v18 - v34, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 1, v19, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 1, v19 - 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 1, v19 + 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 2, v19 - 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 2, v19 - 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 2, v19, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 2, v19 + 1, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 2, v19 + 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 3, v19 + 3, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 3, v19 + 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 3, v19 - 2, a4);
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17 + 3, v19 - 3, a4);
    v17 += 4;
    (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v17, v19 + 4, a4);
    result = (*(int (__thiscall **)(_DWORD, int, int, _DWORD))(*(_DWORD *)v4[1] + 20))(v4[1], v17, v19 - 4, a4);
  }
  return result;
}

//----- (00462480) --------------------------------------------------------
void __thiscall sub_462480(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // edx
  _DWORD *v7; // ebp
  int v8; // ecx
  int v9; // eax
  int v10; // eax
  _DWORD *v11; // eax
  int v12; // ecx
  int v13; // ecx
  bool v14; // zf
  int v15; // ecx
  int v16; // eax

  v5 = this;
  if ( !this[8] )
  {
    v6 = this[1];
    v7 = dword_563908;
    v8 = *((_DWORD *)dword_563908 + 3099);
    v9 = *(_DWORD *)(v6 + 4) - v8;
    if ( a2 >= v9 )
    {
      if ( a3 >= *(_DWORD *)(v6 + 8) - v8 && a2 <= v5[12] + v9 + 4 )
      {
        v5[8] = *((_DWORD *)dword_563908 + 3099);
        v5[9] = a2;
        *((_DWORD *)dword_563908 + 2690) = 4;
        sub_4024D2(v5);
        return;
      }
      v7 = dword_563908;
    }
    v10 = v7[3099];
    if ( a2 > *(_DWORD *)(v6 + 4) + v5[12] - v10
      && a3 > *(_DWORD *)(v6 + 8) - v10
      && (*(int (**)(void))(*(_DWORD *)v7[1535] + 24))() )
    {
      if ( a5 )
      {
        if ( a5 == 1 )
        {
          v16 = 130 * v5[7] / 100;
          if ( v16 > 8000 )
            v16 = 1000;
          sub_401E9C(v16);
        }
      }
      else
      {
        v11 = dword_563908;
        v12 = *((_DWORD *)dword_563908 + 1535);
        if ( v12 == *((_DWORD *)dword_563908 + 1513) )
        {
          v13 = *((_DWORD *)dword_563908 + 1499);
        }
        else
        {
          if ( v12 )
          {
            v14 = (*(int (**)(void))(*(_DWORD *)v12 + 20))() == 0;
            v11 = dword_563908;
            if ( !v14 )
            {
              if ( *((_DWORD *)dword_563908 + 1535) )
              {
                v15 = *((_DWORD *)dword_563908 + 1535);
                if ( v15 )
                {
                  (*(void (__stdcall **)(signed int))(*(_DWORD *)v15 + 4))(1);
                  v11 = dword_563908;
                }
                v11[1535] = 0;
                v11 = dword_563908;
              }
            }
          }
          sub_4020DB(v11[1513]);
          v11 = dword_563908;
          v13 = *((_DWORD *)dword_563908 + 1513);
        }
        v11[1535] = v13;
        *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 100) = 1;
      }
    }
  }
}
// 401E9C: using guessed type _DWORD __stdcall sub_401E9C(_DWORD);
// 4020DB: using guessed type int __thiscall sub_4020DB(_DWORD);
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);

//----- (00462680) --------------------------------------------------------
int __thiscall sub_462680(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (00462690) --------------------------------------------------------
int __thiscall sub_462690(_DWORD *this, int a2, int a3, int a4)
{
  signed int v4; // eax
  int result; // eax
  int v6; // edx
  int v7; // esi

  if ( this[8] )
  {
    *((_DWORD *)dword_563908 + 2690) = 4;
    *((_DWORD *)dword_563908 + 3100) = this[8] + this[9] - a2;
    v4 = *((_DWORD *)dword_563908 + 3100);
    if ( v4 < 160 )
      goto LABEL_14;
    if ( v4 >= 500 )
    {
      v4 = 500;
      goto LABEL_7;
    }
    if ( v4 < 160 )
LABEL_14:
      v4 = 160;
LABEL_7:
    *((_DWORD *)dword_563908 + 3100) = v4;
    return sub_401965(dword_563908);
  }
  v6 = this[1];
  v7 = *((_DWORD *)dword_563908 + 3099);
  result = *(_DWORD *)(v6 + 4) - v7;
  if ( a2 >= result && a3 >= *(_DWORD *)(v6 + 8) - v7 && a2 <= this[12] + result + 4 )
    *((_DWORD *)dword_563908 + 2690) = 4;
  return result;
}
// 401965: using guessed type int __thiscall sub_401965(_DWORD);

//----- (00462770) --------------------------------------------------------
int __thiscall sub_462770(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  if ( this[8] )
  {
    (*(void (__stdcall **)(int, int, int))(*this + 4))(a2, a3, a4);
    result = sub_401113(dword_563908);
    v5[8] = 0;
  }
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);

//----- (004627C0) --------------------------------------------------------
_DWORD *__thiscall sub_4627C0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // edi
  int v4; // ecx

  v2 = this;
  *this = &off_516048;
  this[1] = a2;
  v3 = this + 2;
  sub_401F64((char *)dword_563908 + 30492, this + 2);
  v4 = *v3;
  v2[6] = 0;
  v2[8] = 0;
  v2[9] = 0;
  v2[7] = 1000;
  v2[10] = abs(*(signed __int16 *)(*(_DWORD *)(v4 + 360) + 90));
  v2[11] = abs(*(signed __int16 *)(*(_DWORD *)(v4 + 360) + 78));
  v2[12] = abs(*(signed __int16 *)(*(_DWORD *)(v4 + 360) + 52));
  v2[13] = abs(*(signed __int16 *)(*(_DWORD *)(v4 + 360) + 64));
  return v2;
}
// 401F64: using guessed type _DWORD __stdcall sub_401F64(_DWORD, _DWORD);
// 516048: using guessed type int (__stdcall *off_516048)(int, int, int, int);

//----- (00462870) --------------------------------------------------------
int __thiscall sub_462870(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  _DWORD *v7; // ebp
  int v8; // ecx
  int v9; // ebx
  _DWORD *v10; // ecx
  int result; // eax
  int v12; // edi
  int v13; // ebx
  _DWORD *v14; // ecx
  _DWORD *v15; // ecx
  int v16; // eax
  int v17; // edi
  int v18; // [esp+8h] [ebp-10h]
  int v19; // [esp+Ch] [ebp-Ch]
  int v20; // [esp+10h] [ebp-8h]
  int v21; // [esp+14h] [ebp-4h]

  v6 = this;
  if ( this[6] )
  {
    v7 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1513) && a5 )
    {
      v8 = *((_DWORD *)dword_563908 + 1513);
      sub_4018A2(a2, a3, a4);
      v7 = dword_563908;
    }
    v9 = v6[7];
    v10 = (_DWORD *)v6[6];
    result = 1000 * a3 / v9;
    v12 = 1000 * a2 / v9 - v10[184];
    v13 = result - v10[185];
    if ( v12 < 2 || v13 < 2 || (result = v10[1] - 3, v12 > result) || v13 > v10[2] - 3 )
    {
      if ( a6 )
        result = sub_402883(v12, v13, a4);
    }
    else
    {
      v14 = (_DWORD *)v6[1];
      v18 = v6[12] + v14[1] - v7[3099] + v12 - 2;
      v19 = v13 + v6[10] + v14[2] - v7[3099];
      v20 = v18 + 5;
      v21 = v19 + 1;
      (*(void (__stdcall **)(_DWORD, int *))(*v14 + 40))((unsigned __int16)a4, &v18);
      v15 = (_DWORD *)v6[1];
      v16 = v12 + v6[12] + v15[1] - *((_DWORD *)dword_563908 + 3099);
      v18 = v16;
      v17 = v6[10] + v15[2] - *((_DWORD *)dword_563908 + 3099);
      v20 = v16 + 1;
      v19 = v17 + v13 - 2;
      v21 = v19 + 5;
      result = (*(int (__stdcall **)(_DWORD, int *))(*v15 + 40))((unsigned __int16)a4, &v18);
    }
  }
  return result;
}
// 4018A2: using guessed type _DWORD __stdcall sub_4018A2(_DWORD, _DWORD, __int16);
// 402883: using guessed type _DWORD __stdcall sub_402883(_DWORD, _DWORD, _DWORD);

//----- (00462A30) --------------------------------------------------------
int __thiscall sub_462A30(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // edi
  int result; // eax
  int v10; // ebx
  int v11; // ecx
  int v12; // ebp
  _DWORD *v13; // ecx
  int v14; // esi
  _DWORD *v15; // ecx
  int v16; // esi
  int v17; // [esp+Ch] [ebp-14h]
  int v18; // [esp+10h] [ebp-10h]
  int v19; // [esp+14h] [ebp-Ch]
  int v20; // [esp+18h] [ebp-8h]
  int v21; // [esp+1Ch] [ebp-4h]

  v8 = this;
  result = (a5 - 1) / 2;
  v10 = (a4 - 1) / 2;
  v17 = (a5 - 1) / 2;
  if ( this[6] )
  {
    if ( *((_DWORD *)dword_563908 + 1535) == *((_DWORD *)dword_563908 + 1513) && a7 )
    {
      v11 = *((_DWORD *)dword_563908 + 1513);
      sub_401488(a2, a3, a4, a5, a6);
    }
    v12 = v8[7];
    v13 = (_DWORD *)v8[6];
    v14 = 1000 * a2 / v12 - v13[184];
    result = 1000 * a3 / v12 - v13[185];
    if ( v14 < v10 || result < v17 || v14 > v10 + v13[1] - a4 || result > v17 + v13[2] - a5 )
    {
      if ( a8 )
        result = sub_402883(v14, result, a6);
    }
    else
    {
      v15 = (_DWORD *)v8[1];
      v18 = v14 + v8[12] + v15[1] - *((_DWORD *)dword_563908 + 3099) - v10;
      v16 = result + v8[10] + v15[2] - *((_DWORD *)dword_563908 + 3099) - v17;
      v20 = a4 + v18;
      v19 = v16;
      v21 = a5 + v16;
      result = (*(int (__stdcall **)(_DWORD, int *))(*v15 + 40))((unsigned __int16)a6, &v18);
    }
  }
  return result;
}
// 401488: using guessed type _DWORD __stdcall sub_401488(_DWORD, _DWORD, _DWORD, _DWORD, __int16);
// 402883: using guessed type _DWORD __stdcall sub_402883(_DWORD, _DWORD, _DWORD);

//----- (00462BC0) --------------------------------------------------------
void __thiscall sub_462BC0(int *this, int a2)
{
  int *v2; // esi
  _DWORD *v3; // edi
  int v4; // ecx
  int v5; // ebx
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // eax
  int v9; // ecx
  int v10; // ebp
  int v11; // ebx
  int v12; // ecx
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  int v16; // ecx
  _DWORD **v17; // eax
  signed __int16 *v18; // edi
  int v19; // ecx
  int v20; // edi
  signed __int16 *v21; // edi
  int v22; // ecx
  int v23; // edi
  signed __int16 *v24; // edi
  int v25; // ecx
  int v26; // edi
  signed __int16 *v27; // edi
  int v28; // ecx
  __int64 v29; // rax
  int v30; // edi
  int v31; // ecx
  int v32; // ST08_4
  int v33; // ecx
  int v34; // ST0C_4
  int v35; // ecx
  int v36; // edi
  int v37; // ST08_4
  _DWORD *v38; // edi
  int v39; // eax
  __int16 v40; // dx
  __int16 v41; // ax
  __int16 v42; // dx
  _DWORD *v43; // ecx
  unsigned __int16 v44; // ax
  int v45; // edx
  int v46; // ebx
  int v47; // ebp
  int i; // [esp+30h] [ebp-80h]
  int v49; // [esp+30h] [ebp-80h]
  int j; // [esp+30h] [ebp-80h]
  int v51; // [esp+30h] [ebp-80h]
  int v52; // [esp+34h] [ebp-7Ch]
  int v53; // [esp+34h] [ebp-7Ch]
  int v54; // [esp+34h] [ebp-7Ch]
  int v55; // [esp+34h] [ebp-7Ch]
  int v56; // [esp+38h] [ebp-78h]
  int v57; // [esp+3Ch] [ebp-74h]
  int v58; // [esp+40h] [ebp-70h]
  int v59; // [esp+44h] [ebp-6Ch]
  int v60; // [esp+48h] [ebp-68h]
  int v61; // [esp+4Ch] [ebp-64h]
  int v62; // [esp+50h] [ebp-60h]
  int v63; // [esp+54h] [ebp-5Ch]
  int v64; // [esp+58h] [ebp-58h]
  int v65; // [esp+5Ch] [ebp-54h]
  char v66; // [esp+60h] [ebp-50h]
  char v67; // [esp+70h] [ebp-40h]
  char Dest; // [esp+80h] [ebp-30h]
  int v69; // [esp+ACh] [ebp-4h]

  v2 = this;
  if ( a2 )
    return;
  v3 = dword_563908;
  v4 = this[6];
  v5 = *((_DWORD *)dword_563908 + 3099) - v2[13] - v2[12];
  if ( v4 )
  {
    if ( *(_DWORD *)(v4 + 4) == v5 )
      goto LABEL_10;
    if ( v4 )
    {
      (**(void (__stdcall ***)(signed int))v4)(1);
      v2[6] = 0;
    }
  }
  v6 = operator new(0x2F0u);
  v69 = 0;
  if ( v6 )
    v7 = sub_49FEF0(v6, v2[1], v5, *((_DWORD *)dword_563908 + 3099) - v2[11] - v2[10], 0);
  else
    v7 = 0;
  v2[6] = (int)v7;
  v3 = dword_563908;
  v69 = -1;
LABEL_10:
  v8 = v2[1];
  v9 = v3[3099];
  v10 = *(_DWORD *)(v8 + 4) - v9;
  v11 = *(_DWORD *)(v8 + 8) - v9;
  v12 = v2[7];
  sub_49FF60(
    (_DWORD *)v2[6],
    1000 * (*((_DWORD *)dword_563908 + 62) / 16 - v12 * (*(_DWORD *)(v2[6] + 4) / 2) / 1000) / v12,
    1000 * (v3[63] / 16 - v12 * (*(_DWORD *)(v2[6] + 8) / 2) / 1000) / v12);
  while ( (*(int (__stdcall **)(char *))(*(_DWORD *)v2[6] + 108))(&v66) )
    sub_401FB4(&v66);
  (*(void (__stdcall **)(_DWORD, int, int, int, _DWORD, _DWORD))(*(_DWORD *)v2[6] + 4))(
    0,
    v2[1],
    v10 + v2[12],
    v11 + v2[10],
    0,
    0);
  (*(void (__stdcall **)(char *))(*(_DWORD *)v2[1] + 72))(&v67);
  v13 = v2[6];
  v58 = v10 + v2[12];
  v14 = v11 + v2[10];
  v60 = v58 + *(_DWORD *)(v13 + 4);
  v59 = v14;
  v61 = v14 + *(_DWORD *)(v13 + 8);
  (*(void (__stdcall **)(int *))(*(_DWORD *)v2[1] + 64))(&v58);
  if ( *((_DWORD *)dword_563908 + 6897) )
  {
    v15 = sub_40277F(*((_DWORD *)dword_563908 + 6897));
    if ( v15 > 0 )
    {
      v16 = *((_DWORD *)dword_563908 + 1534);
      sub_4026B2(v15);
    }
  }
  sub_401FA5(*((_DWORD *)dword_563908 + 1514));
  sub_401217(*((_DWORD *)dword_563908 + 1503));
  v17 = (_DWORD **)dword_563908;
  if ( *((_DWORD *)dword_563908 + 1501) )
  {
    sub_40191F(*((_DWORD *)dword_563908 + 1501));
    v17 = (_DWORD **)dword_563908;
  }
  sub_4A73C0(v17[352]);
  if ( *((_DWORD *)dword_563908 + 6939)
    && (*(int (**)(void))(**((_DWORD **)dword_563908 + 6939) + 4))() == 17
    && *((_DWORD *)dword_563908 + 2705) % 40 < 20 )
  {
    sub_401A7D(
      *((_DWORD *)dword_563908 + 6940) / 16,
      *((_DWORD *)dword_563908 + 6941) / 16,
      2,
      2,
      *((unsigned __int16 *)dword_563908 + 82),
      1,
      0);
  }
  (*(void (__stdcall **)(char *))(*(_DWORD *)v2[1] + 64))(&v67);
  v18 = *(signed __int16 **)(v2[2] + 360);
  v52 = abs(v18[27]);
  v19 = *(_DWORD *)(v2[1] + 8) - abs(v18[15]);
  v20 = v11 + abs(v18[3]);
  for ( i = v19; v20 < i; v20 += v52 )
    sub_4A4DC0(v2[2], v2[1], 4, v2[1], v10, v20, 3, 0, 0, 0);
  v21 = *(signed __int16 **)(v2[2] + 360);
  v53 = abs(v21[33]);
  v22 = abs(v21[32]);
  v49 = *(_DWORD *)(v2[1] + 8) - abs(v21[21]);
  v23 = v11 + abs(v21[9]);
  v56 = v22;
  if ( v23 < v49 )
  {
    while ( 1 )
    {
      sub_4A4DC0(v2[2], *(_DWORD *)(v2[1] + 4) - v22, 5, v2[1], *(_DWORD *)(v2[1] + 4) - v22, v23, 3, 0, 0, 0);
      v23 += v53;
      if ( v23 >= v49 )
        break;
      v22 = v56;
    }
  }
  v24 = *(signed __int16 **)(v2[2] + 360);
  v54 = abs(v24[38]);
  v25 = *(_DWORD *)(v2[1] + 4) - abs(v24[8]);
  v26 = v10 + abs(v24[2]);
  for ( j = v25; v26 < j; v26 += v54 )
    sub_4A4DC0(v2[2], v2[1], 7, v2[1], v26, v11, 3, 0, 0, 0);
  v27 = *(signed __int16 **)(v2[2] + 360);
  v55 = abs(v27[38]);
  v28 = abs(v27[39]);
  v51 = *(_DWORD *)(v2[1] + 4) - abs(v27[20]);
  v29 = v27[14];
  v30 = v10 + abs(v27[14]);
  v57 = v28;
  if ( v30 < v51 )
  {
    while ( 1 )
    {
      sub_4A4DC0(v2[2], *(_DWORD *)(v2[1] + 8) - v28, 6, v2[1], v30, *(_DWORD *)(v2[1] + 8) - v28, 3, 0, 0, 0);
      v30 += v55;
      if ( v30 >= v51 )
        break;
      v28 = v57;
    }
  }
  sub_4A4DC0(v2[2], SHIDWORD(v29), 0, v2[1], v10, v11, 3, 0, 0, 0);
  v31 = v2[2];
  v32 = *(_DWORD *)(v2[1] + 4) - abs(*(signed __int16 *)(*(_DWORD *)(v31 + 360) + 16));
  sub_4A4DC0(v31, v32, 1, v2[1], v32, v11, 3, 0, 0, 0);
  v33 = v2[2];
  v34 = *(_DWORD *)(v2[1] + 8) - abs(*(signed __int16 *)(*(_DWORD *)(v33 + 360) + 30));
  sub_4A4DC0(v33, v34, 2, v2[1], v10, v34, 3, 0, 0, 0);
  v35 = v2[2];
  v36 = v2[1];
  v37 = *(_DWORD *)(v36 + 4) - abs(*(signed __int16 *)(*(_DWORD *)(v35 + 360) + 40));
  sub_4A4DC0(
    v35,
    v37,
    3,
    v2[1],
    v37,
    *(_DWORD *)(v36 + 8) - abs(*(signed __int16 *)(*(_DWORD *)(v35 + 360) + 42)),
    3,
    0,
    0,
    0);
  v38 = dword_563908;
  v39 = *((_DWORD *)dword_563908 + 3099);
  if ( v39 > *((_DWORD *)dword_563908 + 3106) && *((_DWORD *)dword_563908 + 3108) > v39 )
  {
    v40 = (unsigned __int8)(*((_WORD *)dword_563908 + 15326) >> 8) | (unsigned __int16)(32
                                                                                      * ((*((_DWORD *)dword_563908 + 7663) >> 16) & 0xF8));
    v41 = (unsigned __int8)*((_DWORD *)dword_563908 + 7663) >> 3;
    if ( dword_576828 == 2 )
      v42 = v40 & 0xFFF8;
    else
      v42 = 2 * (v40 & 0xFFFC);
    v43 = (_DWORD *)v2[1];
    v62 = v10;
    v44 = v41 | 4 * v42;
    v64 = v43[1] - *((_DWORD *)dword_563908 + 3106);
    v45 = v43[2] - *((_DWORD *)dword_563908 + 3108);
    v65 = v11;
    v63 = v45;
    (*(void (__stdcall **)(_DWORD, int *))(*v43 + 40))(v44, &v62);
    v38 = dword_563908;
  }
  if ( *((_DWORD *)dword_563918 + 2334) > 0 )
  {
    switch ( *((_DWORD *)dword_563918 + 2334) )
    {
      case 1:
        sprintf(&Dest, "%c%d", v38[62] / 16 / 80 + 65, v38[63] / 16 / 80 + 1);
        break;
      case 2:
        sprintf(&Dest, "%d,%d", v38[62] / 16, v38[63] / 16);
        break;
      case 3:
        sprintf(&Dest, "%c%d  %d,%d", v38[62] / 16 / 80 + 65, v38[63] / 16 / 80 + 1, v38[62] / 16, v38[63] / 16);
        break;
      default:
LABEL_47:
        v46 = v2[10] + v11 + 4;
        v47 = v2[12] + v10 + 4;
        sub_49B310(
          (_DWORD *)v38[*((_DWORD *)dword_563918 + 2338) + 1516],
          &Dest,
          14,
          (_DWORD *)v2[1],
          v47 - 1,
          v46 - 1,
          3,
          0);
        sub_49B310(
          *((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2338) + 1516),
          &Dest,
          14,
          (_DWORD *)v2[1],
          v47 - 1,
          v46 + 1,
          3,
          0);
        sub_49B310(
          *((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2338) + 1516),
          &Dest,
          14,
          (_DWORD *)v2[1],
          v47 + 1,
          v46 - 1,
          3,
          0);
        sub_49B310(
          *((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2338) + 1516),
          &Dest,
          14,
          (_DWORD *)v2[1],
          v47 + 1,
          v46 + 1,
          3,
          0);
        sub_49B310(
          *((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2338) + 1516),
          &Dest,
          2,
          (_DWORD *)v2[1],
          v47,
          v46,
          3,
          0);
        return;
    }
    v38 = dword_563908;
    goto LABEL_47;
  }
}
// 401217: using guessed type int __thiscall sub_401217(_DWORD);
// 40191F: using guessed type int __thiscall sub_40191F(_DWORD);
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401FA5: using guessed type int __thiscall sub_401FA5(_DWORD);
// 401FB4: using guessed type _DWORD __stdcall sub_401FB4(_DWORD);
// 4026B2: using guessed type _DWORD __stdcall sub_4026B2(_DWORD);
// 40277F: using guessed type int __thiscall sub_40277F(_DWORD);
// 576828: using guessed type int dword_576828;

//----- (00463640) --------------------------------------------------------
void __thiscall sub_463640(_DWORD *this)
{
  *this = &off_5114B8;
  this[1] = &MainScreen::`vftable';
}
// 511488: using guessed type void *MainScreen::`vftable';
// 5114B8: using guessed type int (__stdcall *off_5114B8)(int, int, int);

//----- (004636A0) --------------------------------------------------------
signed int sub_4636A0()
{
  return 1;
}

//----- (004636B0) --------------------------------------------------------
signed int sub_4636B0()
{
  return 1;
}

//----- (004636D0) --------------------------------------------------------
int __thiscall sub_4636D0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int (__stdcall ***v3)(signed int); // ecx

  v1 = this;
  *this = &off_516088;
  if ( *((_DWORD **)dword_563908 + 622) == this )
    result = sub_401113(dword_563908);
  v3 = (int (__stdcall ***)(signed int))v1[2];
  if ( v3 )
  {
    result = (**v3)(1);
    v1[2] = 0;
  }
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);
// 516088: using guessed type int (__stdcall *off_516088)(int, int, int, int);

//----- (00463720) --------------------------------------------------------
_DWORD *__thiscall sub_463720(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a2;
  *a2 = this[16];
  a2[1] = this[17];
  a2[2] = this[18];
  a2[3] = this[19];
  return result;
}

//----- (00463750) --------------------------------------------------------
int __thiscall sub_463750(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int v7; // eax
  int v8; // eax
  void (__stdcall ***v9)(signed int); // ecx
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  int v12; // edi
  bool v13; // zf
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  int v18; // ebp
  int v19; // ebx
  int result; // eax
  double v21; // st7
  double v22; // st6
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  int v33; // ebp
  int v34; // ebx
  double v35; // st7
  double v36; // st6
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  int v42; // [esp+38h] [ebp+14h]
  int v43; // [esp+38h] [ebp+14h]

  v6 = this;
  this[6] = a6;
  v7 = a2;
  this[12] = a2;
  this[13] = a3;
  if ( a2 <= a4 )
    v7 = a4;
  this[14] = v7;
  v8 = a5;
  if ( a3 < a5 )
    v8 = a3;
  v9 = (void (__stdcall ***)(signed int))this[2];
  v6[15] = v8;
  if ( v9 )
  {
    (**v9)(1);
    v6[2] = 0;
  }
  v10 = operator new(0x420u);
  if ( v10 )
    v11 = sub_49A5F0(v10, 1, v6 + 16, 0);
  else
    v11 = 0;
  v12 = v6[28];
  v13 = v6[5] == 0;
  v6[2] = v11;
  if ( v13 )
  {
    if ( v6[14] > v6[12] )
    {
      v29 = operator new(0x18u);
      if ( v29 )
        v30 = sub_49A490(v29, 0, 0, v12, v12, 1);
      else
        v30 = 0;
      (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v30);
    }
    if ( v6[15] < v6[13] )
    {
      v31 = operator new(0x18u);
      if ( v31 )
        v32 = sub_49A490(v31, 0, v6[11] - v12, v12, v12, 2);
      else
        v32 = 0;
      (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v32);
    }
    v33 = v6[12];
    v34 = v6[11] - 2 * v12;
    result = v6[13] - v33;
    if ( v34 > 0 && result > 0 && !v6[6] )
    {
      v35 = (double)(v6[11] - 2 * v12);
      v36 = (double)(v6[13] - v33);
      v43 = v6[15] - v33;
      v6[20] = (signed int)((double)(v6[14] - v33) * v35 / v36);
      v13 = v6[14] == v33;
      v6[21] = (signed int)(v35 * (double)v43 / v36);
      if ( !v13 || (result = v6[13], v6[15] != result) )
      {
        v37 = operator new(0x18u);
        if ( v37 )
          v38 = sub_49A490(v37, 0, v12, v12, v6[20], 3);
        else
          v38 = 0;
        (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v38);
        v39 = operator new(0x18u);
        if ( v39 )
          v40 = sub_49A490(v39, 0, v12 + v6[20], v12, v6[21] - v6[20], 5);
        else
          v40 = 0;
        (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v40);
        v41 = operator new(0x18u);
        if ( v41 )
        {
          v28 = sub_49A490(v41, 0, v12 + v6[21], v12, v34 - v6[21], 4);
          return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)v6[2] + 16))(v6[2], v28);
        }
LABEL_57:
        v28 = 0;
        return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)v6[2] + 16))(v6[2], v28);
      }
    }
  }
  else
  {
    if ( v6[14] > v6[12] )
    {
      v14 = operator new(0x18u);
      if ( v14 )
        v15 = sub_49A490(v14, 0, 0, v12, v12, 1);
      else
        v15 = 0;
      (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v15);
    }
    if ( v6[15] < v6[13] )
    {
      v16 = operator new(0x18u);
      if ( v16 )
        v17 = sub_49A490(v16, v6[11] - v12, 0, v12, v12, 2);
      else
        v17 = 0;
      (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v17);
    }
    v18 = v6[12];
    v19 = v6[11] - 2 * v12;
    result = v6[13] - v18;
    if ( v19 > 0 && result > 0 && !v6[6] )
    {
      v21 = (double)(v6[11] - 2 * v12);
      v22 = (double)(v6[13] - v18);
      v42 = v6[15] - v18;
      v6[20] = (signed int)((double)(v6[14] - v18) * v21 / v22);
      v13 = v6[14] == v18;
      v6[21] = (signed int)(v21 * (double)v42 / v22);
      if ( !v13 || (result = v6[13], v6[15] != result) )
      {
        v23 = operator new(0x18u);
        if ( v23 )
          v24 = sub_49A490(v23, v12, 0, v6[20], v12, 3);
        else
          v24 = 0;
        (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v24);
        v25 = operator new(0x18u);
        if ( v25 )
          v26 = sub_49A490(v25, v12 + v6[20], 0, v6[21] - v6[20], v12, 5);
        else
          v26 = 0;
        (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v6[2] + 16))(v26);
        v27 = operator new(0x18u);
        if ( v27 )
        {
          v28 = sub_49A490(v27, v12 + v6[21], 0, v19 - v6[21], v12, 4);
          return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)v6[2] + 16))(v6[2], v28);
        }
        goto LABEL_57;
      }
    }
  }
  return result;
}

//----- (00463CF0) --------------------------------------------------------
int __thiscall sub_463CF0(void *this, int a2, int a3, int a4, int a5)
{
  return (*(int (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
}

//----- (00463D10) --------------------------------------------------------
signed int __thiscall sub_463D10(int this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int (__thiscall ***v5)(_DWORD, _DWORD, signed int); // edi
  int v6; // ecx
  int v7; // eax
  signed int result; // eax
  int v9; // edi
  int v10; // [esp+10h] [ebp+8h]

  v4 = (_DWORD *)this;
  if ( *(_DWORD *)(this + 96) == 5 )
  {
    v5 = *(int (__thiscall ****)(_DWORD, _DWORD, signed int))(this + 12);
    v6 = *(_DWORD *)(this + 52) - *(_DWORD *)(this + 48);
    v7 = v4[27];
    if ( v4[5] )
      v10 = a2 + v7 - v4[26] - v4[20];
    else
      v10 = a3 + v7 - v4[25] - v4[20];
    result = (**v5)(v5, v4[8], (signed int)((double)v10 * (double)v6 / (double)(v4[11] - 2 * v4[28])));
  }
  else
  {
    v9 = *(_DWORD *)(this + 88);
    result = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**(_DWORD **)(this + 8) + 4))(a2, a3, 0, 0);
    v4[22] = result;
    if ( v9 != result && (result == 1 || result == 2 || result == 5) )
      result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  }
  return result;
}

//----- (00463E30) --------------------------------------------------------
int __thiscall sub_463E30(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax
  int v7; // eax
  int v8; // eax

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[22] > 0 )
  {
    sub_4024D2(v5);
    v7 = v5[22];
    v5[24] = v7;
    result = v7 - 1;
    v5[26] = a2;
    v5[25] = a3;
    v5[23] = -15;
    switch ( result )
    {
      case 0:
        v8 = v5[7];
        goto LABEL_4;
      case 1:
        result = (**(int (__stdcall ***)(_DWORD, _DWORD))v5[3])(v5[8], abs(v5[7]));
        break;
      case 2:
        v8 = v5[15] - v5[14];
LABEL_4:
        result = (**(int (__stdcall ***)(_DWORD, int))v5[3])(v5[8], -abs(v8));
        break;
      case 3:
        result = (**(int (__stdcall ***)(_DWORD, _DWORD))v5[3])(v5[8], abs(v5[15] - v5[14]));
        break;
      case 4:
        result = v5[20];
        v5[27] = result;
        break;
      default:
        return result;
    }
  }
  return result;
}
// 4024D2: using guessed type _DWORD __stdcall sub_4024D2(_DWORD);

//----- (00463F50) --------------------------------------------------------
int __thiscall sub_463F50(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax

  v5 = this;
  result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  if ( v5[24] )
  {
    result = sub_401113(dword_563908);
    v5[24] = 0;
  }
  return result;
}
// 401113: using guessed type int __thiscall sub_401113(_DWORD);

//----- (00463FB0) --------------------------------------------------------
int __thiscall sub_463FB0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int v7; // eax

  v2 = this;
  result = this[24];
  v4 = this[22];
  if ( result == v4 && result )
  {
    v5 = v2[7];
    if ( v5 >= 0 || v4 == 3 || v4 == 4 )
    {
      v2[23] += a2;
      result = v2[23];
      if ( result >= 5 )
      {
        do
        {
          result = v2[22];
          switch ( result )
          {
            case 1:
              result = (**(int (__stdcall ***)(_DWORD, int))v2[3])(v2[8], -v2[7]);
              break;
            case 2:
              result = (**(int (__stdcall ***)(_DWORD, _DWORD))v2[3])(v2[8], v2[7]);
              break;
            case 3:
              v7 = -abs(v2[15] - v2[14]);
              goto LABEL_16;
            case 4:
              v7 = abs(v2[15] - v2[14]);
LABEL_16:
              result = (**(int (__stdcall ***)(_DWORD, int))v2[3])(v2[8], v7);
              break;
            default:
              break;
          }
          v2[23] -= 5;
        }
        while ( v2[23] >= 5 );
      }
    }
    else
    {
      result = a2 * abs(v5);
      v6 = v4 - 1;
      if ( v6 )
      {
        if ( v6 == 1 )
          result = (**(int (__stdcall ***)(_DWORD, int))v2[3])(v2[8], result);
      }
      else
      {
        result = (**(int (__stdcall ***)(_DWORD, int))v2[3])(v2[8], -result);
      }
    }
  }
  return result;
}

//----- (004640F0) --------------------------------------------------------
int __thiscall sub_4640F0(int *this)
{
  int *v1; // esi
  int v2; // edi
  int v3; // ebx
  int v4; // ecx
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  int v8; // ebp
  int v9; // ebx
  signed int v10; // ebx
  int v11; // ebp
  int v12; // eax
  int v13; // ebx
  __int64 v14; // rax
  signed int v15; // ebp
  int v16; // ecx
  int v17; // ecx
  int v18; // edi
  int v19; // ebp
  int v20; // ecx
  int v21; // ebx
  int v22; // ecx
  int v23; // ST08_4
  int v24; // eax
  int v25; // ecx
  int v26; // ebp
  int v27; // ebx
  signed int v28; // ebx
  int v29; // ebp
  int v30; // eax
  int v31; // ebx
  int v32; // edx
  signed int v33; // ebp
  int v34; // ecx
  int v35; // ecx
  int v36; // edi
  int v37; // ebp
  signed int v39; // [esp+10h] [ebp-24h]
  int v40; // [esp+10h] [ebp-24h]
  signed int v41; // [esp+10h] [ebp-24h]
  int v42; // [esp+10h] [ebp-24h]
  int v43; // [esp+14h] [ebp-20h]
  int v44; // [esp+18h] [ebp-1Ch]
  int v45; // [esp+1Ch] [ebp-18h]
  int v46; // [esp+20h] [ebp-14h]
  char v47; // [esp+24h] [ebp-10h]

  v1 = this;
  (*(void (__stdcall **)(char *))(*(_DWORD *)this[4] + 72))(&v47);
  v2 = v1[28];
  if ( v1[5] )
  {
    v3 = v1[9];
    v43 = v2 + v1[9];
    v4 = v1[1];
    v5 = v1[10];
    v45 = v1[11] + v3 - v2 - abs(*(signed __int16 *)(*(_DWORD *)(v4 + 360) + 184));
    v46 = v5 + v2;
    v6 = v1[22];
    v44 = v5;
    sub_4A50B0(v4, v6 != 1 ? 8 : 24, v1[4], v3, v5, 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], v1[22] != 2 ? 9 : 25, v1[4], v1[11] + v1[9] - v2, v1[10], 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], 13, v1[4], v43, v44, 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], 15, v1[4], v45, v44, 3, 0, 0, 0, 0);
    if ( v45 > v43 )
    {
      (*(void (__stdcall **)(int *))(*(_DWORD *)v1[4] + 64))(&v43);
      v7 = v1[1];
      v8 = v45;
      v9 = v43 + abs(*(signed __int16 *)(*(_DWORD *)(v7 + 360) + 160));
      if ( v9 < v45 )
      {
        do
        {
          sub_4A50B0(v7, 14, v1[4], v9, v44, 3, 0, 0, 0, 0);
          v7 = v1[1];
          v9 += abs(*(signed __int16 *)(*(_DWORD *)(v7 + 360) + 172));
        }
        while ( v9 < v8 );
      }
      if ( !v1[6] )
      {
        v10 = 8;
        v39 = 8;
        if ( v1[22] == 5 )
        {
          v10 = 24;
          v39 = 24;
        }
        (*(void (__stdcall **)(char *))(*(_DWORD *)v1[4] + 64))(&v47);
        v11 = v1[9];
        v12 = v1[1];
        v43 = v2 + v11 + v1[20];
        v13 = 12 * v10;
        v14 = *(signed __int16 *)(*(_DWORD *)(v12 + 360) + v13 + 52);
        LODWORD(v14) = (HIDWORD(v14) ^ v14) - HIDWORD(v14);
        HIDWORD(v14) = v11 + v1[21];
        v15 = v39;
        v16 = v1[4];
        v45 = v2 + HIDWORD(v14) - v14;
        sub_4A50B0(v1[1], v39 + 2, v16, v43, v44, 3, 0, 0, 0, 0);
        sub_4A50B0(v1[1], v39 + 4, v1[4], v45, v44, 3, 0, 0, 0, 0);
        (*(void (__stdcall **)(int *))(*(_DWORD *)v1[4] + 64))(&v43);
        v17 = v1[1];
        v40 = v45;
        v18 = v43 + abs(*(signed __int16 *)(*(_DWORD *)(v17 + 360) + v13 + 28));
        if ( v18 < v45 )
        {
          v19 = v15 + 3;
          do
          {
            sub_4A50B0(v17, v19, v1[4], v18, v44, 3, 0, 0, 0, 0);
            v17 = v1[1];
            v18 += abs(*(signed __int16 *)(*(_DWORD *)(v17 + 360) + v13 + 40));
          }
          while ( v18 < v40 );
        }
      }
    }
  }
  else
  {
    v20 = v1[10];
    v21 = v1[10];
    v43 = v1[9];
    v45 = v2 + v43;
    v44 = v2 + v20;
    v22 = v1[1];
    v23 = v1[9];
    v24 = -(v1[22] != 1);
    v46 = v1[11] + v21 - v2 - abs(*(signed __int16 *)(*(_DWORD *)(v22 + 360) + 90));
    sub_4A50B0(v22, (v24 & 0xFFFFFFF0) + 16, v1[4], v23, v21, 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], v1[22] != 2 ? 1 : 17, v1[4], v1[9], v1[10] + v1[11] - v2, 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], 5, v1[4], v43, v44, 3, 0, 0, 0, 0);
    sub_4A50B0(v1[1], 7, v1[4], v43, v46, 3, 0, 0, 0, 0);
    if ( v46 > v44 )
    {
      (*(void (__stdcall **)(int *))(*(_DWORD *)v1[4] + 64))(&v43);
      v25 = v1[1];
      v26 = v46;
      v27 = v44 + abs(*(signed __int16 *)(*(_DWORD *)(v25 + 360) + 66));
      if ( v27 < v46 )
      {
        do
        {
          sub_4A50B0(v25, 6, v1[4], v43, v27, 3, 0, 0, 0, 0);
          v25 = v1[1];
          v27 += abs(*(signed __int16 *)(*(_DWORD *)(v25 + 360) + 78));
        }
        while ( v27 < v26 );
      }
      if ( !v1[6] )
      {
        v28 = 0;
        v41 = 0;
        if ( v1[22] == 5 )
        {
          v28 = 16;
          v41 = 16;
        }
        (*(void (__stdcall **)(char *))(*(_DWORD *)v1[4] + 64))(&v47);
        v29 = v1[10];
        v30 = v1[1];
        v44 = v2 + v29 + v1[20];
        v31 = 12 * v28;
        v32 = v29 + v1[21];
        v33 = v41;
        v34 = v1[4];
        v46 = v2 + v32 - abs(*(signed __int16 *)(*(_DWORD *)(v30 + 360) + v31 + 54));
        sub_4A50B0(v1[1], v41 + 2, v34, v43, v44, 3, 0, 0, 0, 0);
        sub_4A50B0(v1[1], v41 + 4, v1[4], v43, v46, 3, 0, 0, 0, 0);
        (*(void (__stdcall **)(int *))(*(_DWORD *)v1[4] + 64))(&v43);
        v35 = v1[1];
        v42 = v46;
        v36 = v44 + abs(*(signed __int16 *)(*(_DWORD *)(v35 + 360) + v31 + 30));
        if ( v36 < v46 )
        {
          v37 = v33 + 3;
          do
          {
            sub_4A50B0(v35, v37, v1[4], v43, v36, 3, 0, 0, 0, 0);
            v35 = v1[1];
            v36 += abs(*(signed __int16 *)(*(_DWORD *)(v35 + 360) + v31 + 42));
          }
          while ( v36 < v42 );
        }
      }
    }
  }
  return (*(int (__stdcall **)(char *))(*(_DWORD *)v1[4] + 64))(&v47);
}

//----- (00464740) --------------------------------------------------------
int __thiscall sub_464740(_DWORD *this, int a2, int a3, int a4)
{
  bool v4; // zf

  v4 = this[5] == 0;
  this[9] = a2;
  this[10] = a3;
  this[11] = a4;
  this[16] = a2;
  this[17] = a3;
  if ( v4 )
  {
    this[18] = a2 + this[28];
    this[19] = a4 + a3;
  }
  else
  {
    this[18] = a4 + a2;
    this[19] = a3 + this[28];
  }
  return sub_401C67(this[12], this[13], this[14], this[15], 0);
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004647C0) --------------------------------------------------------
_DWORD *__thiscall sub_4647C0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  _DWORD *v10; // esi
  __int64 v11; // rax

  v10 = this;
  this[8] = a3;
  this[4] = a5;
  this[3] = a4;
  this[2] = 0;
  this[12] = 0;
  this[14] = 0;
  this[24] = 0;
  this[5] = a6;
  this[1] = a2;
  this[13] = 100;
  this[15] = 100;
  this[7] = a10;
  *this = &off_516088;
  this[22] = -1;
  v11 = *(signed __int16 *)(*(_DWORD *)(a2 + 360) + 4);
  this[23] = 0;
  this[28] = (HIDWORD(v11) ^ v11) - HIDWORD(v11);
  LODWORD(v11) = dword_576828;
  *((_WORD *)this + 58) = dword_576828 != 2 ? 384 : 192;
  *((_WORD *)this + 59) = (_DWORD)v11 != 2 ? 1024 : 512;
  *((_WORD *)this + 60) = (_DWORD)v11 != 2 ? 2016 : 992;
  sub_4011BD(a7, a8, a9);
  return v10;
}
// 4011BD: using guessed type _DWORD __stdcall sub_4011BD(_DWORD, _DWORD, _DWORD);
// 516088: using guessed type int (__stdcall *off_516088)(int, int, int, int);
// 576828: using guessed type int dword_576828;

//----- (004648D0) --------------------------------------------------------
int __thiscall sub_4648D0(_DWORD *this, char *a2, const char *a3)
{
  char *v3; // eax
  _DWORD *v4; // esi
  int v5; // edx
  char v6; // cl
  _DWORD *v7; // ebp
  signed int v8; // edi
  char *v9; // eax
  int v10; // edi
  char *v11; // ecx
  _BYTE *v12; // edx
  char v13; // al
  int v14; // eax
  bool v15; // zf
  char Str; // [esp+Ch] [ebp-504h]
  char Dst; // [esp+10Ch] [ebp-404h]

  v3 = a2;
  v4 = this;
  v5 = (char *)(this + 3) - a2;
  do
  {
    v6 = *v3;
    v3[v5] = *v3;
    ++v3;
  }
  while ( v6 );
  v4[69] = -1;
  v4[67] = -1;
  v4[70] = 1;
  v4[68] = 0;
  v4[114150] = 0;
  v4[48613] = 0;
  v4[551] = 0;
  v4[553] = 0;
  v4[612] = 0;
  v4[552] = 0;
  v7 = (_DWORD *)*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  strcpy(&Dst, a3);
  if ( Dst )
  {
    do
    {
      sub_48CA10((int)&Str, &Dst);
      v8 = sub_49AB50(v7, "88888888");
      v9 = strrchr(&Str, 58);
      if ( v9 )
      {
        *v9 = 0;
        v10 = j__atol(v9 + 1);
        v8 = sub_49AB50(v7, (const char *)&unk_511B9C) * v10 + 16;
      }
      v11 = &Str;
      v12 = &v4[8 * v4[612] + 71];
      do
      {
        v13 = *v11;
        *v12++ = *v11++;
      }
      while ( v13 );
      if ( v8 < 75 )
        v8 = 75;
      v4[v4[612] + 564] = v8;
      v14 = v4[612];
      if ( v14 )
        v4[552] += v4[v14 + 564];
      v15 = Dst == 0;
      v4[612] = v14 + 1;
    }
    while ( !v15 );
  }
  return (*(int (__thiscall **)(_DWORD *, _DWORD))(*v4 + 8))(v4, 0);
}

//----- (00464AE0) --------------------------------------------------------
int __thiscall sub_464AE0(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v5; // ST10_4
  int v6; // ST0C_4
  int v7; // eax
  int v8; // edi
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // ST10_4
  void (__stdcall *v12)(_DWORD *); // eax
  int v13; // ST10_4
  int v14; // ST0C_4
  int v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  _DWORD *v18; // ST10_4
  void (__stdcall *v19)(_DWORD *); // eax
  int v20; // ebp
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // ST10_4
  void (__stdcall *v24)(_DWORD *); // eax
  int v25; // edx
  int v26; // ebx
  int v27; // eax
  bool v28; // zf
  bool v29; // sf
  unsigned __int8 v30; // of
  _DWORD *v31; // ecx
  int v32; // edi
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // ST10_4
  void (__stdcall *v36)(_DWORD *); // eax
  int v37; // edi
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  _DWORD *v40; // ST10_4
  int (__stdcall *v41)(_DWORD *); // eax
  int v43; // [esp+14h] [ebp-2Ch]
  int v44; // [esp+18h] [ebp-28h]
  int v45; // [esp+1Ch] [ebp-24h]
  int v46; // [esp+20h] [ebp-20h]
  _DWORD *v47; // [esp+24h] [ebp-1Ch]
  int v48; // [esp+28h] [ebp-18h]
  _DWORD *v49; // [esp+2Ch] [ebp-14h]
  _DWORD *v50; // [esp+30h] [ebp-10h]
  int v51; // [esp+3Ch] [ebp-4h]

  v1 = this;
  v2 = (void (__stdcall ***)(signed int))this[554];
  if ( v2 )
  {
    (**v2)(1);
    v1[554] = 0;
  }
  v1[555] = 0;
  v3 = operator new(0x420u);
  v49 = v3;
  v51 = 0;
  if ( v3 )
    v4 = sub_49A5F0(v3, 1, v1 + 546, 0);
  else
    v4 = 0;
  v1[554] = v4;
  v5 = *((signed __int16 *)dword_563908 + 15401);
  v6 = *((signed __int16 *)dword_563908 + 15400);
  v51 = -1;
  v7 = sub_402617(0x23u);
  sub_401F32(&v43, &v44, v7, v6, v5);
  v8 = v1[548] - v43 - 28;
  v9 = operator new(0x18u);
  v49 = v9;
  v51 = 1;
  if ( v9 )
    v10 = sub_49A490(v9, v8, 11, v43, v44, 3);
  else
    v10 = 0;
  v11 = v10;
  v12 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[554] + 16);
  v51 = -1;
  v12(v11);
  v13 = *((signed __int16 *)dword_563908 + 15401);
  v14 = *((signed __int16 *)dword_563908 + 15400);
  v15 = sub_402617(0xBBu);
  sub_401F32(&v43, &v44, v15, v14, v13);
  v16 = operator new(0x18u);
  v49 = v16;
  v51 = 2;
  if ( v16 )
    v17 = sub_49A490(v16, 32, 11, v43, v44, 4);
  else
    v17 = 0;
  v18 = v17;
  v19 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[554] + 16);
  v51 = -1;
  v19(v18);
  v20 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 519) + 360) + 18));
  v21 = operator new(0x18u);
  v49 = v21;
  v51 = 3;
  if ( v21 )
    v22 = sub_49A490(v21, v1[546] + 32, 60, v1[564], v20, 1000);
  else
    v22 = 0;
  v23 = v22;
  v24 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[554] + 16);
  v51 = -1;
  v24(v23);
  v25 = v1[564] + v1[546] + 32;
  v26 = v25 - v1[553];
  v27 = v25 + v1[561];
  v30 = __OFSUB__(v1[612], 1);
  v28 = v1[612] == 1;
  v29 = v1[612] - 1 < 0;
  v48 = v1[564] + v1[546] + 32;
  v49 = (_DWORD *)v27;
  v46 = 1;
  if ( !((unsigned __int8)(v29 ^ v30) | v28) )
  {
    v31 = v1 + 565;
    v47 = v1 + 565;
    do
    {
      v45 = v25;
      if ( v25 <= v26 )
        v45 = v26;
      v32 = v26 + *v31;
      if ( v27 < v32 )
        v32 = v27;
      if ( v45 < v32 )
      {
        v33 = operator new(0x18u);
        v50 = v33;
        v51 = 4;
        if ( v33 )
          v34 = sub_49A490(v33, v45, 60, v32 - v45, v20, v46 + 1000);
        else
          v34 = 0;
        v35 = v34;
        v36 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[554] + 16);
        v51 = -1;
        v36(v35);
        v25 = v48;
        v27 = (int)v49;
        v31 = v47;
      }
      v26 += *v31;
      ++v31;
      v30 = __OFSUB__(v46 + 1, v1[612]);
      v29 = v46++ + 1 - v1[612] < 0;
      v47 = v31;
    }
    while ( v29 ^ v30 );
  }
  v37 = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  v38 = operator new(0x18u);
  v50 = v38;
  v51 = 5;
  if ( v38 )
    v39 = sub_49A490(v38, 32, v20 + 64, v1[561], v1[562] * (*(signed __int16 *)(*(_DWORD *)(v37 + 2052) + 174) + 2), 2);
  else
    v39 = 0;
  v40 = v39;
  v41 = *(int (__stdcall **)(_DWORD *))(*(_DWORD *)v1[554] + 16);
  v51 = -1;
  return v41(v40);
}
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00464F20) --------------------------------------------------------
int __thiscall sub_464F20(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  signed int v3; // ebp
  int v4; // edi
  int v5; // ecx
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // edi
  int v10; // eax
  _DWORD *v11; // ecx
  int v12; // edx
  void *v13; // edi
  void *v14; // edi
  int v15; // eax
  int v16; // eax
  int v18; // [esp+14h] [ebp-14h]
  int v19; // [esp+18h] [ebp-10h]
  signed int v20; // [esp+2Ch] [ebp+4h]

  v2 = this;
  if ( a2 )
  {
    this[546] = *a2;
    this[547] = a2[1];
    this[548] = a2[2];
    this[549] = a2[3];
  }
  v3 = this[612];
  v4 = this[548] - this[546];
  v5 = this[549] - this[547];
  v20 = 128;
  if ( v3 > 0 )
    v20 = v2[564];
  v6 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 519) + 360) + 18)) + 64;
  v19 = v6;
  v7 = v5 - v6 - 36;
  v8 = v7
     / (*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516) + 2052) + 174)
      + 2);
  v18 = v7;
  if ( v8 < 1 )
    v8 = 1;
  v2[562] = v8;
  v9 = v4 - v20 - 60;
  v10 = 0;
  v2[561] = v9;
  if ( v3 > 1 )
  {
    v11 = v2 + 565;
    v12 = v3 - 1;
    do
    {
      v10 += *v11;
      ++v11;
      --v12;
    }
    while ( v12 );
  }
  if ( v9 < v10 )
    v10 = v9;
  v13 = (void *)v2[559];
  v2[561] = v10;
  if ( v13 )
  {
    sub_402040(v13);
    j__free(v13);
    v2[559] = 0;
  }
  v14 = (void *)v2[560];
  if ( v14 )
  {
    sub_402040(v2[560]);
    j__free(v14);
    v2[560] = 0;
  }
  if ( operator new(0x7Cu) )
    v15 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 0, v2 + 2, v2[550], 0, v2[561] + v2[546] + v20 + 33, v19, v18, 1);
  else
    v15 = 0;
  v2[559] = v15;
  if ( operator new(0x7Cu) )
    v16 = sub_401BAE(
            *((_DWORD *)dword_563908 + 503),
            1,
            v2 + 2,
            v2[550],
            1,
            v2[546] + v20 + 32,
            v18 + v19 + 1,
            v2[561],
            1);
  else
    v16 = 0;
  v2[560] = v16;
  (*(void (__stdcall **)(_DWORD, _DWORD))v2[2])(0, 0);
  return sub_401541(v2);
}
// 401541: using guessed type int __thiscall sub_401541(_DWORD);
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);

//----- (00465240) --------------------------------------------------------
int __thiscall sub_465240(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ecx
  int v5; // edi
  int v6; // edx
  int v7; // eax
  int v8; // ebx
  int v9; // edx
  int v10; // ST04_4
  int v11; // ecx
  int v12; // edx
  int v13; // edi
  int v14; // ecx
  int v15; // eax
  int v16; // ebx
  int v17; // ecx

  v3 = this;
  if ( a2 )
    this[551] += a3;
  else
    this[549] += a3;
  v4 = this[48611];
  v5 = v3[560];
  v6 = v3[549];
  v7 = v3[48611] - v5;
  v8 = v3[549];
  if ( v6 >= v7 )
    v8 = v3[48611] - v5;
  if ( v8 >= 0 )
  {
    if ( v6 < v7 )
      v7 = v3[549];
  }
  else
  {
    v7 = 0;
  }
  v9 = v5 + v7;
  v3[549] = v7;
  if ( v4 < v5 + v7 )
    v9 = v4;
  v10 = v4;
  v11 = v3[557];
  sub_401C67(0, v10, v7, v9, 0);
  v12 = v3[550];
  v13 = v3[559];
  v14 = v3[551];
  v15 = v3[550] - v13;
  v16 = v3[551];
  if ( v14 >= v15 )
    v16 = v3[550] - v13;
  if ( v16 >= 0 )
  {
    if ( v14 < v15 )
      v15 = v3[551];
  }
  else
  {
    v15 = 0;
  }
  v17 = v3[558];
  v3[551] = v15;
  sub_401C67(0, v12, v15, v15 + v13, 0);
  return sub_401541(v3 - 2);
}
// 401541: using guessed type int __thiscall sub_401541(_DWORD);
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00465340) --------------------------------------------------------
int __thiscall sub_465340(const char *this, _DWORD *a2, int a3)
{
  const char *v3; // esi
  int v4; // ecx
  int v5; // eax
  _DWORD *v6; // edx
  int v7; // ecx
  _DWORD *v8; // ecx
  int v9; // ebp
  int v10; // ecx
  int v11; // ebx
  int v12; // edi
  _DWORD *v13; // ecx
  int v14; // eax
  char *v15; // edx
  char v16; // cl
  char *v17; // eax
  _DWORD *v18; // ecx
  int v19; // eax
  int v20; // ecx
  int v21; // ebx
  int v22; // edi
  signed int v23; // eax
  int v24; // ebp
  const char *v25; // eax
  char *v26; // eax
  char *v27; // edx
  char v28; // cl
  int v29; // eax
  int v30; // edi
  _DWORD *v31; // ecx
  char *v32; // edx
  char v33; // cl
  double v34; // st7
  double v35; // st7
  int v36; // ebx
  int v38; // [esp+8h] [ebp-184h]
  int v39; // [esp+Ch] [ebp-180h]
  const char *v40; // [esp+Ch] [ebp-180h]
  int v41; // [esp+28h] [ebp-164h]
  char **v42; // [esp+28h] [ebp-164h]
  int v43; // [esp+2Ch] [ebp-160h]
  const char **v44; // [esp+2Ch] [ebp-160h]
  char *v45; // [esp+30h] [ebp-15Ch]
  int v46; // [esp+30h] [ebp-15Ch]
  int v47; // [esp+34h] [ebp-158h]
  int v48; // [esp+34h] [ebp-158h]
  int v49; // [esp+38h] [ebp-154h]
  int *v50; // [esp+3Ch] [ebp-150h]
  _DWORD *v51; // [esp+40h] [ebp-14Ch]
  _BYTE *v52; // [esp+44h] [ebp-148h]
  int v53; // [esp+48h] [ebp-144h]
  int v54; // [esp+4Ch] [ebp-140h]
  int v55; // [esp+50h] [ebp-13Ch]
  _DWORD *v56; // [esp+54h] [ebp-138h]
  char *EndPtr; // [esp+58h] [ebp-134h]
  int v58; // [esp+5Ch] [ebp-130h]
  double v59; // [esp+60h] [ebp-12Ch]
  _DWORD *v60; // [esp+68h] [ebp-124h]
  int v61; // [esp+6Ch] [ebp-120h]
  double v62; // [esp+70h] [ebp-11Ch]
  char v63; // [esp+78h] [ebp-114h]
  char Str[4]; // [esp+88h] [ebp-104h]

  v3 = this;
  (*(void (__stdcall **)(char *))(**((_DWORD **)this + 550) + 72))(&v63);
  v4 = *((_DWORD *)v3 + 546) + *((_DWORD *)v3 + 564) + 32;
  v5 = v4 + *((_DWORD *)v3 + 561);
  if ( a2 )
  {
    if ( v4 <= a3 )
      v4 = a3;
  }
  else
  {
    v4 = a3;
  }
  v6 = *(_DWORD **)&v3[4 * (_DWORD)a2 + 2256];
  v53 = v4;
  v7 = (int)v6 + v4;
  v55 = v5;
  if ( v5 >= v7 )
    v55 = v7;
  v8 = (_DWORD *)*((_DWORD *)v3 + 550);
  v56 = (_DWORD *)(*((_DWORD *)v3 + 549) - 36);
  v54 = 60;
  (*(void (__stdcall **)(int *))(*v8 + 64))(&v53);
  (*(void (__stdcall **)(_DWORD, _DWORD))(**((_DWORD **)v3 + 550) + 92))(0, 0);
  v9 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 519) + 360) + 18));
  v10 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1519) + 2052) + 174);
  v11 = *((_DWORD *)v3 + 547) + 60;
  v12 = v11 + (v9 - 2 * v10) / 2;
  v43 = v12 + v10;
  v41 = 7;
  if ( a2 == *((_DWORD **)v3 + 69) )
    v41 = 1;
  if ( *((_DWORD *)v3 + 555) == (_DWORD)(a2 + 250) )
    v41 = 4;
  v13 = *(_DWORD **)&v3[4 * (_DWORD)a2 + 2256];
  v51 = *(_DWORD **)&v3[4 * (_DWORD)a2 + 2256];
  if ( !a2 )
  {
    v13 -= 2;
    v51 = v13;
  }
  sub_40196F(*((_DWORD *)v3 + 550), *((_DWORD *)dword_563908 + 519), a3, v11, v13);
  v14 = (int)&v3[32 * (_DWORD)a2 + 284];
  v52 = (_BYTE *)v14;
  v15 = &Str[-v14];
  do
  {
    v16 = *(_BYTE *)v14;
    v15[v14] = *(_BYTE *)v14;
    ++v14;
  }
  while ( v16 );
  v17 = strrchr(Str, 32);
  v45 = v17;
  if ( Str[0] == 45 )
  {
    if ( v17 )
    {
      sub_49B310(*((_DWORD **)dword_563908 + 1519), v17 + 1, v41, *((_DWORD **)v3 + 550), a3 + 4, v43, 3, 0);
      *v45 = 0;
      sub_49B310(*((_DWORD **)dword_563908 + 1519), &Str[1], v41, *((_DWORD **)v3 + 550), a3 + 4, v12, 3, 0);
    }
    else
    {
      sub_49B310(*((_DWORD **)dword_563908 + 1519), &Str[1], v41, *((_DWORD **)v3 + 550), a3 + 4, v43, 3, 0);
    }
  }
  else
  {
    v39 = v43;
    v47 = a3 + *(_DWORD *)&v3[4 * (_DWORD)a2 + 2256] - 4;
    v38 = a3 + *(_DWORD *)&v3[4 * (_DWORD)a2 + 2256] - 4;
    if ( v17 )
    {
      sub_49B4F0(*((_DWORD **)dword_563908 + 1519), v17 + 1, v41, *((_DWORD **)v3 + 550), v38, v43, 3, 0);
      v39 = v12;
      *v45 = 0;
      v38 = v47;
    }
    sub_49B4F0(*((_DWORD **)dword_563908 + 1519), Str, v41, *((_DWORD **)v3 + 550), v38, v39, 3, 0);
  }
  v18 = (_DWORD *)*((_DWORD *)v3 + 562);
  v50 = (int *)*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  v19 = *((_DWORD *)v3 + 551);
  v58 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516) + 2052) + 174);
  v20 = (int)v18 + v19;
  v21 = v11 + v9 + 4;
  if ( *((_DWORD *)v3 + 48613) < v20 )
    v20 = *((_DWORD *)v3 + 48613);
  if ( v19 < v20 )
  {
    v46 = v19 + 1;
    v44 = (const char **)&v3[192 * v19 + 2456];
    v22 = 48 * v19;
    v49 = 48 * v19;
    v42 = (char **)&v3[4 * (_DWORD)&a2[12 * v19] + 2452];
    v48 = v20 - v19;
    while ( 1 )
    {
      v23 = *((_DWORD *)v3 + 480);
      v24 = 0;
      if ( v23 < 0 )
      {
        if ( !_stricmp((const char *)(*((_DWORD *)dword_563908 + 6897) + 32), *(v44 - 1)) )
        {
          v24 = 4;
        }
        else
        {
          v25 = (const char *)(*((_DWORD *)dword_563908 + 6897) + 64);
          if ( *v25 && !_stricmp(v25, *v44) )
            v24 = 11;
        }
      }
      else if ( !_stricmp(v3 + 1924, *(const char **)&v3[4 * (v22 + v23) + 2452]) )
      {
        v24 = 5;
      }
      v26 = *v42;
      if ( *v52 == 45 )
      {
        v27 = (char *)(Str - v26);
        do
        {
          v28 = *v26;
          v27[(_DWORD)v26] = *v26;
          ++v26;
        }
        while ( v28 );
        v29 = sub_49ADA0(v50, Str, (int)(v51 - 1));
        v30 = a3;
        v31 = (_DWORD *)*((_DWORD *)v3 + 550);
        Str[v29] = 0;
        sub_49B310(v50, Str, v24, v31, a3 + 2, v21, 3, 0);
      }
      else
      {
        v32 = (char *)(Str - v26);
        do
        {
          v33 = *v26;
          v32[(_DWORD)v26] = *v26;
          ++v26;
        }
        while ( v33 );
        if ( *((_DWORD *)v3 + 69) >= 0 )
        {
          v62 = strtod(Str, &EndPtr);
          v34 = strtod((const char *)*(_DWORD *)&v3[4 * (v22 + *((_DWORD *)v3 + 69)) + 2452], &EndPtr);
          if ( 0.0 == v34 )
          {
            strcpy(Str, "---");
          }
          else
          {
            v35 = (double)*((signed int *)v3 + 70) * v62 / v34;
            if ( v35 >= 10.0 )
            {
              if ( v35 >= 100.0 )
                v40 = "%.1f";
              else
                v40 = "%.2f";
              sprintf(Str, v40, LODWORD(v35), (_DWORD)(*(unsigned __int64 *)&v35 >> 32));
            }
            else
            {
              sprintf(Str, "%.3f", LODWORD(v35), (_DWORD)(*(unsigned __int64 *)&v35 >> 32));
            }
          }
        }
        sub_49AB80(v50, Str, v24, *((_DWORD **)v3 + 550), a3 + *(_DWORD *)&v3[4 * (_DWORD)a2 + 2256] - 2, v21, 3, 0);
        v30 = a3;
      }
      v36 = v58 + v21;
      if ( !(v46 % 5) )
      {
        LODWORD(v59) = v30 + 1;
        HIDWORD(v59) = v36;
        v61 = v36 + 1;
        if ( a2 == (_DWORD *)-1 )
          v60 = (_DWORD *)(v30 + *((_DWORD *)v3 + 564) - 8);
        else
          v60 = (_DWORD *)(v30 + *(_DWORD *)&v3[4 * (_DWORD)a2 + 2256]);
        (*(void (__stdcall **)(_DWORD, double *))(**((_DWORD **)v3 + 550) + 40))(
          *((unsigned __int16 *)dword_563908 + 92),
          &v59);
      }
      v49 += 48;
      v44 += 48;
      v42 += 48;
      ++v46;
      v21 = v36 + 2;
      if ( !--v48 )
        break;
      v22 = v49;
    }
  }
  (*(void (**)(void))(**((_DWORD **)v3 + 550) + 96))();
  return (*(int (__stdcall **)(char *))(**((_DWORD **)v3 + 550) + 64))(&v63);
}
// 40196F: using guessed type _DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00465B30) --------------------------------------------------------
char *__thiscall sub_465B30(_DWORD *this, char *a2, int a3)
{
  _DWORD *v3; // esi
  char *result; // eax
  int v5; // edi

  v3 = this;
  result = (char *)(GetKeyState(16) & 0x8000);
  if ( !result )
  {
    result = a2;
    switch ( (unsigned int)a2 )
    {
      case 0x1Bu:
        if ( v3[544] >= 0 )
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          if ( operator new(0x2Cu) )
            v5 = sub_401591(*((_DWORD *)dword_563908 + 89), v3 + 545);
          else
            v5 = 0;
          sub_401154(v3[544]);
          result = (char *)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = v5;
          if ( v3 != (_DWORD *)4 )
            result = (char *)(*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        else
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          result = (char *)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          if ( v3 != (_DWORD *)4 )
            result = (char *)(*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        break;
      case 0x25u:
        result = (char *)(*(int (__thiscall **)(_DWORD *, signed int, signed int))v3[1])(v3 + 1, 1, -20);
        break;
      case 0x26u:
        result = (char *)(*(int (__thiscall **)(_DWORD *, _DWORD, signed int))v3[1])(v3 + 1, 0, -1);
        break;
      case 0x27u:
        result = (char *)(*(int (__thiscall **)(_DWORD *, signed int, signed int))v3[1])(v3 + 1, 1, 20);
        break;
      case 0x28u:
        result = (char *)(*(int (__thiscall **)(_DWORD *, _DWORD, signed int))v3[1])(v3 + 1, 0, 1);
        break;
      case 0x6Bu:
        result = (char *)v3[69];
        if ( (signed int)result > 100 )
        {
          if ( result == (char *)1000 )
            goto LABEL_37;
          if ( result == (char *)3600 )
            goto LABEL_36;
          if ( result == (char *)10000 )
            v3[69] = 100000;
        }
        else
        {
          if ( result == (char *)100 )
            goto LABEL_38;
          if ( !--result )
            goto LABEL_31;
          result -= 9;
          if ( !result )
            goto LABEL_30;
          result -= 50;
          if ( !result )
            goto LABEL_20;
        }
        break;
      case 0x6Du:
        result = (char *)v3[69];
        if ( (signed int)result > 1000 )
        {
          if ( result == (char *)3600 )
          {
LABEL_38:
            v3[69] = 1000;
          }
          else if ( result == (char *)10000 )
          {
LABEL_37:
            v3[69] = 3600;
          }
          else if ( result == (char *)100000 )
          {
LABEL_36:
            v3[69] = 10000;
          }
        }
        else if ( result == (char *)1000 )
        {
LABEL_20:
          v3[69] = 100;
        }
        else if ( result == (char *)10 )
        {
          v3[69] = 1;
        }
        else if ( result == (char *)60 )
        {
LABEL_31:
          v3[69] = 10;
        }
        else if ( result == (char *)100 )
        {
LABEL_30:
          v3[69] = 60;
        }
        break;
      default:
        return result;
    }
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (00465FF0) --------------------------------------------------------
int __thiscall sub_465FF0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int result; // eax

  v5 = this;
  (*(void (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  v6 = v5[557] + a5;
  result = v6 / 120;
  v5[557] = v6 % 120;
  if ( v5[554] == 2 )
    result = (*(int (__thiscall **)(_DWORD *, _DWORD, int))v5[1])(v5 + 1, 0, v6 / -120);
  return result;
}

//----- (00466080) --------------------------------------------------------
int __thiscall sub_466080(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // ebp
  int v6; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 2216);
  v6 = (*(int (__stdcall **)(int, int, int, int))(**(_DWORD **)(this + 2212) + 4))(a2, a3, this + 2220, this + 2224);
  *(_DWORD *)(v4 + 2216) = v6;
  if ( v5 != v6 && v6 && v6 >= 0 && v6 != 2 )
    sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  (*(void (__stdcall **)(int, int, int))(**(_DWORD **)(v4 + 2232) + 4))(a2, a3, a4);
  return (*(int (__stdcall **)(int, int, int))(**(_DWORD **)(v4 + 2236) + 4))(a2, a3, a4);
}

//----- (00466130) --------------------------------------------------------
int __thiscall sub_466130(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (00466140) --------------------------------------------------------
int __thiscall sub_466140(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi

  v5 = this;
  ((void (__stdcall *)(int, int, int))(*this)[1])(a2, a3, a4);
  (*(void (__stdcall **)(int, int, int, int))(*v5[558] + 16))(a2, a3, a4, a5);
  return (*(int (__stdcall **)(int, int, int, int))(*v5[559] + 16))(a2, a3, a4, a5);
}

//----- (004661B0) --------------------------------------------------------
int __thiscall sub_4661B0(int this, int a2)
{
  int v2; // esi
  int result; // eax

  v2 = this;
  if ( *(_DWORD *)(this + 2448) > 0 )
  {
    (*(void (__stdcall **)(int))(**(_DWORD **)(this + 2236) + 36))(a2);
    result = (*(int (__stdcall **)(int))(**(_DWORD **)(v2 + 2240) + 36))(a2);
  }
  return result;
}

//----- (004661F0) --------------------------------------------------------
int __thiscall sub_4661F0(char *this, const char *a2)
{
  char *v2; // esi
  int v3; // ebx
  char *i; // edi
  int (__thiscall *v5)(char *, _DWORD, _DWORD); // edx
  int v7; // [esp+Ch] [ebp-504h]
  char Dst; // [esp+10Ch] [ebp-404h]

  v2 = this;
  strcpy(&Dst, a2);
  v3 = 0;
  for ( i = &v2[*((_DWORD *)v2 + 114150) + 194456]; v3 < *((_DWORD *)v2 + 612); i += strlen((const char *)&v7) + 1 )
  {
    sub_48CA10((int)&v7, &Dst);
    strcpy(i, (const char *)&v7);
    *(_DWORD *)&v2[4 * (v3++ + 48 * *((_DWORD *)v2 + 48613)) + 2452] = i;
  }
  v5 = (int (__thiscall *)(char *, _DWORD, _DWORD))**((_DWORD **)v2 + 2);
  ++*((_DWORD *)v2 + 48613);
  *((_DWORD *)v2 + 114150) = i - v2 - 194456;
  return v5(v2 + 8, 0, 0);
}

//----- (00466330) --------------------------------------------------------
char *__stdcall sub_466330(int File, char *Str)
{
  char *result; // eax
  char *v3; // esi
  int i; // edi
  char *v5; // eax
  char Dest[2048]; // [esp+4h] [ebp-804h]

  result = Str;
  if ( File && Str )
  {
    v3 = strtok(Str, Delim);
    for ( i = 0; v3; v3 = strtok(0, Delim) )
    {
      v5 = strchr(v3, 58);
      if ( v5 )
        *v5 = 0;
      if ( i )
        i += sprintf(&Dest[i], ",\"%s\"", v3);
      else
        i = sprintf(Dest, "\"%s\"", v3);
    }
    sprintf(&Dest[i], "\n");
    result = (char *)sub_4C3361((FILE *)File, (int)Dest);
  }
  return result;
}
// 466330: using guessed type char Dest[2048];

//----- (00466450) --------------------------------------------------------
int __stdcall sub_466450(FILE *File, int a2)
{
  int result; // eax

  if ( File )
  {
    result = a2;
    if ( a2 )
    {
      sub_4C3361(File, a2);
      result = sub_4C3361(File, (int)"\n");
    }
  }
  return result;
}

//----- (00466490) --------------------------------------------------------
int __cdecl sub_466490(char *EndPtr, int a2)
{
  int v2; // eax
  int v3; // ebx
  const char *v4; // esi
  char *v5; // edi
  const char *v6; // edx
  double v8; // st7
  int v9; // ecx
  int v10; // eax
  const char *v11; // esi
  double v12; // st7
  double v13; // st4
  double v14; // st6
  double v15; // [esp+Ch] [ebp-18h]
  double v16; // [esp+14h] [ebp-10h]
  double v17; // [esp+1Ch] [ebp-8h]

  v2 = *(_DWORD *)(dword_56C6A4 + 268);
  v3 = a2;
  v4 = *(const char **)(a2 + 4 * v2);
  v5 = EndPtr;
  v6 = *(const char **)&EndPtr[4 * v2];
  if ( *(_BYTE *)(32 * v2 + dword_56C6A4 + 284) == 45 )
    return (2 * (*(_DWORD *)(dword_56C6A4 + 272) == 0) - 1) * _stricmp(v6, v4);
  v15 = strtod(v6, &EndPtr);
  v8 = strtod(v4, &EndPtr);
  v17 = v8;
  v9 = dword_56C6A4;
  if ( *(_DWORD *)(dword_56C6A4 + 276) < 0 )
  {
    v14 = v15;
  }
  else
  {
    v10 = 4 * *(_DWORD *)(dword_56C6A4 + 276);
    v11 = *(const char **)(v10 + v3);
    v16 = strtod((const char *)*(_DWORD *)&v5[v10], &EndPtr);
    v12 = strtod(v11, &EndPtr);
    v13 = -1.0;
    if ( v16 != 0.0 )
      v13 = v15 / v16;
    v9 = dword_56C6A4;
    v14 = v13;
    if ( 0.0 == v12 )
      v8 = -1.0;
    else
      v8 = v17 / v12;
  }
  if ( v14 < v8 )
    return 1 - 2 * (*(_DWORD *)(v9 + 272) == 0);
  if ( v14 <= v8 )
    return 0;
  return 2 * (*(_DWORD *)(v9 + 272) == 0) - 1;
}
// 56C6A4: using guessed type int dword_56C6A4;

//----- (00466630) --------------------------------------------------------
_DWORD *__thiscall sub_466630(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  _DWORD *v4; // esi

  v4 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = &off_511698;
  this[558] = 0;
  this[553] = 0;
  this[554] = 0;
  this[559] = 0;
  this[560] = 0;
  *((_BYTE *)this + 1924) = 0;
  this[545] = a4;
  *this = &off_51613C;
  this[1] = &ScoreScreen::`vftable';
  this[2] = &off_516100;
  this[550] = a2;
  this[480] = -1;
  this[546] = *a3;
  this[547] = a3[1];
  this[548] = a3[2];
  this[549] = a3[3];
  sub_4025E0(&Source, &Source);
  return v4;
}
// 4025E0: using guessed type _DWORD __stdcall sub_4025E0(_DWORD, _DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 516100: using guessed type int (__stdcall *off_516100)(int, int);
// 51610C: using guessed type void *ScoreScreen::`vftable';
// 51613C: using guessed type int (__stdcall *off_51613C)(int, int, char *Filename);

//----- (00466750) --------------------------------------------------------
int __thiscall sub_466750(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void *v3; // edi
  void (__stdcall ***v4)(signed int); // ecx

  v1 = this;
  *this = &off_51613C;
  this[1] = &ScoreScreen::`vftable';
  this[2] = &off_516100;
  v2 = (void *)this[559];
  if ( v2 )
  {
    sub_402040(v2);
    j__free(v2);
    v1[559] = 0;
  }
  v3 = (void *)v1[560];
  if ( v3 )
  {
    sub_402040(v1[560]);
    j__free(v3);
    v1[560] = 0;
  }
  v4 = (void (__stdcall ***)(signed int))v1[554];
  if ( v4 )
  {
    (**v4)(1);
    v1[554] = 0;
  }
  return sub_4027A2(v1);
}
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 516100: using guessed type int (__stdcall *off_516100)(int, int);
// 51610C: using guessed type void *ScoreScreen::`vftable';
// 51613C: using guessed type int (__stdcall *off_51613C)(int, int, char *Filename);

//----- (00466840) --------------------------------------------------------
int __thiscall sub_466840(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // ebx
  int v3; // ST18_4
  int v4; // ST14_4
  int v5; // eax
  int v6; // ecx
  __int16 v7; // di
  __int16 v8; // cx
  int v9; // ST14_4
  int v10; // ST0C_4
  int v11; // ST08_4
  int v12; // eax
  int v13; // ecx
  __int16 v14; // dx
  __int16 v15; // cx
  int v16; // ST10_4
  int v17; // ST0C_4
  int v18; // ST08_4
  int v19; // eax
  int v20; // ecx
  int v21; // edi
  int v22; // ebp
  int v23; // eax
  DWORD v24; // eax
  int v25; // eax
  int v26; // edi
  int v27; // ecx
  int v28; // eax
  int *v29; // ebp
  int v30; // eax
  int v31; // ebp
  int v32; // edi
  int v33; // edx
  int v34; // edi
  int v35; // ecx
  int v36; // edi
  signed int v37; // ebp
  bool v38; // zf
  bool v39; // sf
  unsigned __int8 v40; // of
  _DWORD *v41; // eax
  __int16 v42; // dx
  __int16 v43; // ax
  __int16 v44; // dx
  int v45; // edi
  int v46; // ebx
  int v47; // edi
  int v48; // ecx
  int v49; // ebp
  DWORD v50; // ST30_4
  int v51; // ebx
  int v52; // ecx
  int v53; // ecx
  int v54; // ecx
  int v55; // ecx
  int v56; // ecx
  int v57; // eax
  int v58; // edx
  int v59; // ecx
  int v60; // edx
  int v62; // [esp+24h] [ebp-44h]
  int v63; // [esp+24h] [ebp-44h]
  int v64; // [esp+24h] [ebp-44h]
  int v65; // [esp+28h] [ebp-40h]
  int v66; // [esp+2Ch] [ebp-3Ch]
  DWORD v67; // [esp+30h] [ebp-38h]
  int v68; // [esp+34h] [ebp-34h]
  int v69; // [esp+38h] [ebp-30h]
  int v70; // [esp+3Ch] [ebp-2Ch]
  int *v71; // [esp+40h] [ebp-28h]
  LARGE_INTEGER PerformanceCount; // [esp+44h] [ebp-24h]
  int v73; // [esp+4Ch] [ebp-1Ch]
  int v74; // [esp+50h] [ebp-18h]
  char Dest; // [esp+54h] [ebp-14h]

  v1 = this;
  v2 = this + 546;
  sub_401BE0(this[550], this + 546);
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[550] + 64))(v1 + 546);
  v3 = *((signed __int16 *)dword_563908 + 15401);
  v4 = *((signed __int16 *)dword_563908 + 15400);
  v5 = sub_402617(0x23u);
  sub_401F32(&v74, &v73, v5, v4, v3);
  v6 = v1[555];
  if ( v6 == 3 )
    v7 = *((_WORD *)dword_563908 + 15404);
  else
    v7 = *((_WORD *)dword_563908 + 15402);
  if ( v6 == 3 )
    v8 = *((_WORD *)dword_563908 + 15403);
  else
    v8 = *((_WORD *)dword_563908 + 15401);
  v9 = v1[548] - v74 - 28;
  v10 = v8;
  v11 = *((signed __int16 *)dword_563908 + 15400);
  v12 = sub_402617(0x23u);
  sub_4011E0(v1[550], v12, v11, v10, v7, v9, 11);
  v13 = v1[555];
  if ( v13 == 4 )
    v14 = *((_WORD *)dword_563908 + 15404);
  else
    v14 = *((_WORD *)dword_563908 + 15402);
  if ( v13 == 4 )
    v15 = *((_WORD *)dword_563908 + 15403);
  else
    v15 = *((_WORD *)dword_563908 + 15401);
  v16 = v14;
  v17 = v15;
  v18 = *((signed __int16 *)dword_563908 + 15400);
  v19 = sub_402617(0xBBu);
  sub_4011E0(v1[550], v19, v18, v17, v16, 32, 11);
  sub_49B310(*((_DWORD **)dword_563908 + 1520), (char *)v1 + 12, 2, (_DWORD *)v1[550], 32, v73 + 14, 3, 0);
  v20 = v1[547];
  v21 = v1[548] - *v2;
  v22 = v1[549] - v20;
  if ( !v1[612] )
  {
    v23 = sub_49AD40(*((_DWORD **)dword_563908 + 1519), "Downloading chart, please wait...");
    sub_49B310(
      *((_DWORD **)dword_563908 + 1519),
      "Downloading chart, please wait...",
      2,
      (_DWORD *)v1[550],
      *v2 + (v21 - v23) / 2,
      v1[547] + v22 / 3,
      3,
      0);
    goto LABEL_38;
  }
  v24 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 519) + 360) + 18));
  PerformanceCount.s.LowPart = v24;
  v25 = v20 + v24 + 64;
  v26 = *((_DWORD *)dword_563918 + 2342);
  v27 = v1[551];
  v70 = v25;
  v62 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + v26 + 1516) + 2052) + 174);
  v65 = v1[48613];
  if ( v1[48613] >= v1[562] + v27 )
    v65 = v1[562] + v27;
  v28 = v26 - 1;
  if ( v26 - 1 > 1 )
    goto LABEL_21;
  if ( v28 >= 0 )
  {
    if ( v28 <= 1 )
      goto LABEL_22;
LABEL_21:
    v28 = 1;
    goto LABEL_22;
  }
  v28 = 0;
LABEL_22:
  v29 = (int *)*((_DWORD *)dword_563908 + v28 + 1516);
  v30 = (v62 - *(signed __int16 *)(v29[513] + 174)) / 2;
  v71 = v29;
  if ( v27 < v65 )
  {
    v63 = v62 + 2;
    v31 = v30 + v70;
    do
    {
      v32 = v27 + 1;
      sprintf(&Dest, "%d", v27 + 1);
      sub_49AB80(v71, &Dest, 4, (_DWORD *)v1[550], *v2 + 31, v31, 3, 0);
      v31 += v63;
      v27 = v32;
    }
    while ( v32 < v65 );
  }
  sub_4019BF(0, *v2 + 32);
  v33 = v1[564];
  v34 = v33 + *v2 + 32;
  v35 = v34 + v1[561];
  v71 = (int *)(v33 + *v2 + 32);
  v36 = v34 - v1[553];
  v37 = 1;
  v40 = __OFSUB__(v1[612], 1);
  v38 = v1[612] == 1;
  v39 = v1[612] - 1 < 0;
  v70 = v35;
  if ( !((unsigned __int8)(v39 ^ v40) | v38) )
  {
    v41 = v1 + 565;
    v64 = (int)(v1 + 565);
    do
    {
      if ( v36 + *v41 >= (signed int)v71 && v36 < v35 )
      {
        sub_4019BF(v37, v36);
        v41 = (_DWORD *)v64;
        v35 = v70;
      }
      v36 += *v41;
      ++v37;
      ++v41;
      v64 = (int)v41;
    }
    while ( v37 < v1[612] );
  }
  v42 = (unsigned __int8)(*((_WORD *)dword_563908 + 15334) >> 8) | (unsigned __int16)(32
                                                                                    * ((*((_DWORD *)dword_563908 + 7667) >> 16) & 0xF8));
  v43 = (unsigned __int8)*((_DWORD *)dword_563908 + 7667) >> 3;
  if ( dword_576828 == 2 )
    v44 = v42 & 0xFFF8;
  else
    v44 = 2 * (v42 & 0xFFFC);
  v45 = *v2;
  v46 = v1[549];
  v47 = v45 + 32;
  v68 = v47 + 1;
  v48 = v1[550];
  v67 = PerformanceCount.s.LowPart + 60;
  v49 = (unsigned __int16)(v43 | 4 * v44);
  v50 = PerformanceCount.s.LowPart + 60;
  v51 = v46 - 36;
  v66 = v47;
  v69 = v51;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v48 + 40))(v49, &v66);
  v66 = v1[564] + v47 - 9;
  v68 = v66 + 1;
  v67 = v50;
  v52 = v1[550];
  v69 = v51;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v52 + 40))(v49, &v66);
  v53 = v1[550];
  v66 = v47 + v1[564];
  v68 = v66 + 1;
  v67 = v50;
  v69 = v51;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v53 + 40))(v49, &v66);
  v66 = v1[564] + v1[561] + v47 - 1;
  v68 = v66 + 1;
  v67 = v50;
  v54 = v1[550];
  v69 = v51;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v54 + 40))(v49, &v66);
  v55 = v1[564] + v47 - 8;
  v67 = v51 - 1;
  v68 = v55;
  v56 = v1[550];
  v69 = v51;
  v66 = v47;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v56 + 40))(v49, &v66);
  v57 = v1[564];
  v58 = v1[561];
  v66 = v57 + v47 + 1;
  v59 = v1[550];
  v68 = v57 + v58 + v47 - 1;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v59 + 40))(v49, &v66);
  if ( Frequency.QuadPart )
  {
    QueryPerformanceCounter(&PerformanceCount);
    v60 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
  }
  else
  {
    v60 = GetTickCount() / 0xA;
  }
  sub_49B310(*((_DWORD **)dword_563908 + 1517), off_538698[v60 / 500 % 3], 2, (_DWORD *)v1[550], v47, v51 + 17, 3, 0);
LABEL_38:
  (*(void (**)(void))(*(_DWORD *)v1[559] + 40))();
  (*(void (**)(void))(*(_DWORD *)v1[560] + 40))();
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[550] + 68))(
           v1[550],
           0,
           0,
           -1,
           -1);
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4019BF: using guessed type _DWORD __stdcall sub_4019BF(_DWORD, _DWORD);
// 401BE0: using guessed type _DWORD __stdcall sub_401BE0(_DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 538698: using guessed type char *off_538698[3];
// 576828: using guessed type int dword_576828;

//----- (00466FB0) --------------------------------------------------------
void __thiscall sub_466FB0(_DWORD *this, int a2, int a3)
{
  this[67] = a2;
  this[68] = a3;
  dword_56C6A4 = (int)this;
  sub_48D810((int)(this + 613), this[48613], 0xC0u, (int)sub_401ED8);
}
// 56C6A4: using guessed type int dword_56C6A4;

//----- (00467000) --------------------------------------------------------
FILE *__thiscall sub_467000(_DWORD *this, int a2, int a3, char *Filename)
{
  FILE *result; // eax
  _DWORD *v5; // esi
  FILE *v6; // edi
  int v7; // ebx
  bool v8; // zf
  bool v9; // sf
  _BYTE *v10; // eax
  unsigned int v11; // eax
  char *v12; // edi
  char v13; // cl
  int v14; // ebx
  char **v15; // eax
  char *v16; // eax
  char *v17; // edx
  char v18; // cl
  char *v19; // edx
  char v20; // cl
  double v21; // st7
  double v22; // st7
  char *v23; // edi
  char v24; // al
  unsigned int v25; // eax
  char *v26; // edi
  char v27; // cl
  const char *v28; // [esp-4h] [ebp-A4Ch]
  _DWORD *v29; // [esp+18h] [ebp-A30h]
  _BYTE *v30; // [esp+1Ch] [ebp-A2Ch]
  int v31; // [esp+20h] [ebp-A28h]
  char **v32; // [esp+24h] [ebp-A24h]
  int v33; // [esp+28h] [ebp-A20h]
  FILE *v34; // [esp+2Ch] [ebp-A1Ch]
  int v35; // [esp+30h] [ebp-A18h]
  char *EndPtr; // [esp+34h] [ebp-A14h]
  double v37; // [esp+38h] [ebp-A10h]
  char Str[4]; // [esp+40h] [ebp-A08h]
  char Dest; // [esp+140h] [ebp-908h]
  char v40; // [esp+23Fh] [ebp-809h]
  char v41; // [esp+240h] [ebp-808h]

  result = (FILE *)Filename;
  v5 = this;
  v29 = this;
  if ( a2 == 4 )
  {
    if ( Filename )
    {
      if ( *Filename )
      {
        result = fopen(Filename, "wt");
        v6 = result;
        v34 = result;
        if ( result )
        {
          v7 = 0;
          v8 = v5[612] == 0;
          v9 = v5[612] < 0;
          v41 = 0;
          if ( !v9 && !v8 )
          {
            do
            {
              v10 = &v5[8 * v7 + 71];
              if ( *v10 == 45 )
                v10 = (char *)&v5[8 * v7 + 71] + 1;
              if ( v7 )
                sprintf(&Dest, ",%s", v10);
              else
                sprintf(&Dest, "%s", v10);
              v11 = strlen(&Dest) + 1;
              v12 = &v40;
              do
                v13 = (v12++)[1];
              while ( v13 );
              qmemcpy(v12, &Dest, v11);
              ++v7;
              v5 = v29;
            }
            while ( v7 < v29[612] );
            v6 = v34;
          }
          sub_401E8D((int)v6, &v41);
          v35 = 0;
          if ( v5[48613] > 0 )
          {
            v31 = 0;
            v33 = (int)(v5 + 613);
            do
            {
              v14 = 0;
              v8 = v5[612] == 0;
              v9 = v5[612] < 0;
              v41 = 0;
              if ( !v9 && !v8 )
              {
                v15 = (char **)v33;
                v32 = (char **)v33;
                v30 = v5 + 71;
                while ( 1 )
                {
                  v16 = *v15;
                  if ( *v30 == 45 )
                  {
                    v17 = (char *)(Str - v16);
                    do
                    {
                      v18 = *v16;
                      v16[(_DWORD)v17] = *v16;
                      ++v16;
                    }
                    while ( v18 );
                  }
                  else
                  {
                    v19 = (char *)(Str - v16);
                    do
                    {
                      v20 = *v16;
                      v16[(_DWORD)v19] = *v16;
                      ++v16;
                    }
                    while ( v20 );
                    if ( v5[69] >= 0 )
                    {
                      v37 = strtod(Str, &EndPtr);
                      v21 = strtod((const char *)v5[v31 + 613 + v5[69]], &EndPtr);
                      if ( 0.0 == v21 )
                      {
                        strcpy(Str, "---");
                      }
                      else
                      {
                        v22 = (double)(signed int)v5[70] * v37 / v21;
                        if ( v22 >= 10.0 )
                        {
                          if ( v22 >= 100.0 )
                            v28 = "%.1f";
                          else
                            v28 = "%.2f";
                          sprintf(Str, v28, LODWORD(v22), (_DWORD)(*(unsigned __int64 *)&v22 >> 32));
                        }
                        else
                        {
                          sprintf(Str, "%.3f", LODWORD(v22), (_DWORD)(*(unsigned __int64 *)&v22 >> 32));
                        }
                      }
                    }
                  }
                  if ( v14 > 0 )
                  {
                    v23 = &v40;
                    do
                      v24 = (v23++)[1];
                    while ( v24 );
                    *(_WORD *)v23 = 44;
                  }
                  v25 = strlen(Str) + 1;
                  v26 = &v40;
                  do
                    v27 = (v26++)[1];
                  while ( v27 );
                  ++v32;
                  v30 += 32;
                  qmemcpy(v26, Str, v25);
                  ++v14;
                  v5 = v29;
                  if ( v14 >= v29[612] )
                    break;
                  v15 = v32;
                }
                v6 = v34;
              }
              sub_4C3361(v6, (int)&v41);
              sub_4C3361(v6, (int)"\n");
              v31 += 48;
              v33 += 192;
              ++v35;
            }
            while ( v35 < v5[48613] );
          }
          result = (FILE *)fclose(v6);
        }
      }
    }
  }
  return result;
}

//----- (00467400) --------------------------------------------------------
_DWORD *__thiscall sub_467400(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = &off_511698;
  this[545] = -1;
  this[480] = -1;
  *this = &off_51613C;
  this[1] = &ScoreScreen::`vftable';
  this[2] = &off_516100;
  this[550] = 0;
  this[558] = 0;
  this[553] = 0;
  this[554] = 0;
  this[559] = 0;
  this[560] = 0;
  *((_BYTE *)this + 1924) = 0;
  sub_4025E0(&Source, &Source);
  return v1;
}
// 4025E0: using guessed type _DWORD __stdcall sub_4025E0(_DWORD, _DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 516100: using guessed type int (__stdcall *off_516100)(int, int);
// 51610C: using guessed type void *ScoreScreen::`vftable';
// 51613C: using guessed type int (__stdcall *off_51613C)(int, int, char *Filename);

//----- (004674E0) --------------------------------------------------------
void *__thiscall sub_4674E0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4025FE();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4025FE: using guessed type int sub_4025FE(void);

//----- (00467510) --------------------------------------------------------
char __thiscall sub_467510(char *this, int a2, int a3, int a4, int a5)
{
  char *v5; // esi
  int v6; // eax
  int v7; // eax
  signed int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  _DWORD *v12; // eax
  int v13; // ecx
  int v14; // edi
  int v15; // ebp
  int v16; // ebp
  int v17; // edi
  _BYTE *v18; // ecx
  _BYTE *v19; // edx

  v5 = this;
  (*(void (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
  (*(void (__stdcall **)(int, int, int, int))(**((_DWORD **)v5 + 558) + 8))(a2, a3, a4, a5);
  (*(void (__stdcall **)(int, int, int, int))(**((_DWORD **)v5 + 559) + 8))(a2, a3, a4, a5);
  v6 = *((_DWORD *)v5 + 554);
  if ( v6 && v6 >= 0 )
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  LOBYTE(v7) = a5;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      v7 = *((_DWORD *)v5 + 554);
      if ( v7 >= 1000 )
      {
        v7 -= 1000;
        if ( *((_DWORD *)v5 + 68) == v7 )
          *((_DWORD *)v5 + 68) = -1;
        else
          *((_DWORD *)v5 + 68) = v7;
      }
    }
  }
  else
  {
    v8 = *((_DWORD *)v5 + 554);
    if ( v8 < 1000 )
    {
      v10 = v8 - 2;
      if ( v10 )
      {
        v11 = v10 - 1;
        if ( v11 )
        {
          v7 = v11 - 1;
          if ( !v7 )
          {
            v12 = dword_563908;
            if ( *((_DWORD *)dword_563908 + 355) )
            {
              v13 = *((_DWORD *)dword_563908 + 355);
              if ( v13 )
              {
                (*(void (__stdcall **)(signed int))(*(_DWORD *)v13 + 36))(1);
                v12 = dword_563908;
              }
              v12[355] = 0;
            }
            if ( operator new(0x420u) )
            {
              v7 = sub_4019E2(
                     *((_DWORD *)dword_563908 + 1519),
                     (int)"Enter Export Filename",
                     (char *)&Source,
                     0,
                     0,
                     (int)(v5 - 4),
                     4,
                     0);
              *((_DWORD *)dword_563908 + 355) = v7;
            }
            else
            {
              LOBYTE(v7) = 0;
              *((_DWORD *)dword_563908 + 355) = 0;
            }
          }
        }
        else if ( *((_DWORD *)v5 + 544) >= 0 )
        {
          if ( operator new(0x2Cu) )
            v14 = sub_401591(*((_DWORD *)dword_563908 + 89), v5 + 2180);
          else
            v14 = 0;
          sub_401154(*((_DWORD *)v5 + 544));
          LOBYTE(v7) = (_BYTE)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = v14;
          if ( v5 != (char *)4 )
            LOBYTE(v7) = (*(int (__stdcall **)(signed int))(*((_DWORD *)v5 - 1) + 4))(1);
        }
        else
        {
          LOBYTE(v7) = (_BYTE)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          if ( v5 != (char *)4 )
            LOBYTE(v7) = (*(int (__stdcall **)(signed int))(*((_DWORD *)v5 - 1) + 4))(1);
        }
      }
      else
      {
        v7 = (*(int (__stdcall **)(int, signed int, _DWORD, _DWORD))(**((_DWORD **)v5 + 553) + 4))(a2, 61, 0, 0);
        v15 = v7;
        if ( v7 >= 1000 )
        {
          v7 = *((_DWORD *)v5 + 556)
             / (*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516)
                                              + 2052)
                                  + 174)
              + 2);
          v16 = v15 - 1000;
          v17 = *((_DWORD *)v5 + 550) + v7;
          if ( v17 >= 0 && v17 < *((_DWORD *)v5 + 48612) )
          {
            if ( *((_DWORD *)v5 + 479) != v16
              || (v7 = _stricmp(v5 + 1920, *(const char **)&v5[4 * (v16 + 48 * v17) + 2448])) != 0 )
            {
              *((_DWORD *)v5 + 479) = v16;
              v18 = *(_BYTE **)&v5[4 * (v16 + 48 * v17) + 2448];
              v19 = v5 + 1920;
              do
              {
                LOBYTE(v7) = *v18;
                *v19++ = *v18++;
              }
              while ( (_BYTE)v7 );
            }
            else
            {
              *((_DWORD *)v5 + 479) = -1;
              v5[1920] = 0;
            }
          }
        }
      }
    }
    else
    {
      v9 = v8 - 1000;
      if ( *((_DWORD *)v5 + 66) == v9 )
        LOBYTE(v7) = sub_401E0B(v9, *((_DWORD *)v5 + 67) == 0);
      else
        LOBYTE(v7) = sub_401E0B(v9, *((_DWORD *)v5 + 67));
    }
  }
  return v7;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 401E0B: using guessed type _DWORD __stdcall sub_401E0B(_DWORD, _DWORD);

//----- (004679B0) --------------------------------------------------------
void __thiscall sub_4679B0(_DWORD *this)
{
  if ( *this <= 0 )
    *this = 35;
}

//----- (004679C0) --------------------------------------------------------
_DWORD *__thiscall sub_4679C0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  _DWORD *v3; // ecx
  int v4; // ecx
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  int v8; // edi
  _DWORD *result; // eax

  v2 = this;
  if ( a2 > 0 )
  {
    v3 = (_DWORD *)this[3];
    if ( v3 )
      sub_4A7120(v3, 0, 0, 0, 0);
  }
  v4 = v2[1];
  v5 = Memory;
  v5[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4);
  v6 = v5 + 1;
  v7 = a2 ^ *v5;
  v8 = v5[1];
  result = v5 + 4;
  *(_DWORD *)(v8 + 4 * v4) = v7;
  *result ^= *(_DWORD *)(*v6 + 4 * v4);
  return result;
}

//----- (00467A30) --------------------------------------------------------
int __thiscall sub_467A30(_DWORD *this)
{
  return *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[1]);
}

//----- (00467A50) --------------------------------------------------------
int __thiscall sub_467A50(_DWORD *this, int a2)
{
  int result; // eax

  result = this[2];
  if ( a2 <= result )
    this[2] = result;
  else
    this[2] = a2;
  return result;
}

//----- (00467A70) --------------------------------------------------------
int __thiscall sub_467A70(int *this, int a2)
{
  int v2; // edx
  int v3; // ebp
  _DWORD *v4; // edi
  _DWORD *v5; // esi
  _DWORD *v6; // ebx
  int result; // eax

  v2 = this[1];
  v3 = a2;
  v4 = Memory;
  v5 = (char *)Memory + 4;
  v6 = (_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2);
  if ( a2 <= (*(_DWORD *)Memory ^ *v6) )
    v3 = *(_DWORD *)Memory ^ *v6;
  *((_DWORD *)Memory + 4) ^= *v6;
  *(_DWORD *)(*v5 + 4 * v2) = v3 ^ *v4;
  v4[4] ^= *(_DWORD *)(*v5 + 4 * v2);
  result = a2 + 10;
  if ( a2 + 10 <= *this )
    *this = *this;
  else
    *this = result;
  return result;
}

//----- (00467AE0) --------------------------------------------------------
_DWORD *__thiscall sub_467AE0(_DWORD *this, int a2)
{
  _DWORD *v2; // edx
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v2 = Memory;
  v3 = this[1];
  result = (_DWORD *)*((_DWORD *)Memory + 1);
  if ( (*(_DWORD *)Memory ^ result[v3]) >= 0 && *(_DWORD *)Memory != result[v3] )
  {
    v5 = a2 + (*(_DWORD *)Memory ^ result[v3]);
    if ( v5 < 0 )
      v5 = 1;
    *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3);
    result = v2 + 4;
    *(_DWORD *)(v2[1] + 4 * v3) = v5 ^ *v2;
    *result ^= *(_DWORD *)(v2[1] + 4 * v3);
  }
  return result;
}

//----- (00467B40) --------------------------------------------------------
bool __thiscall sub_467B40(_DWORD *this)
{
  return *this <= 10;
}

//----- (00467B50) --------------------------------------------------------
bool __thiscall sub_467B50(_DWORD *this)
{
  return this[2] <= 0;
}

//----- (00467B80) --------------------------------------------------------
signed int __thiscall sub_467B80(char *this, int a2)
{
  signed int result; // eax
  int v3; // ecx

  result = 0;
  v3 = (int)(this + 20);
  while ( *(_DWORD *)(*(_DWORD *)v3 + 17) || *(signed __int16 *)(*(_DWORD *)v3 + 13) != a2 )
  {
    ++result;
    v3 += 4;
    if ( result >= 5 )
      return -1;
  }
  return result;
}

//----- (00467BC0) --------------------------------------------------------
int __thiscall sub_467BC0(_DWORD *this, int a2, int a3)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(this[a2 + 5] + 52) = a3;
  return result;
}

//----- (00467BE0) --------------------------------------------------------
int __thiscall sub_467BE0(_DWORD *this, int a2, int a3)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(this[a2 + 5] + 64) = a3;
  return result;
}

//----- (00467C00) --------------------------------------------------------
char *__thiscall sub_467C00(char *this)
{
  char *v1; // esi
  _BYTE *v2; // edi
  signed int v3; // eax
  char *v4; // eax
  int v5; // edx
  char v6; // cl
  int v7; // eax
  int v8; // ecx
  char *v9; // eax
  int v10; // edx
  char v11; // cl
  int v12; // eax
  int v13; // ecx
  char *v14; // eax
  int v15; // edx
  char v16; // cl
  int v17; // eax
  int v18; // ecx
  char Dst; // [esp+Ch] [ebp-104h]

  v1 = this;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  *((_DWORD *)this + 4) = 0;
  this[20] = 0;
  *(_WORD *)(this + 13) = -1;
  memset(this + 316, 0, 0x2EE0u);
  *((double *)v1 + 10) = 1000000.0;
  *((_DWORD *)v1 + 16) = -1;
  *((_DWORD *)v1 + 3079) = 0;
  *((_DWORD *)v1 + 6) = 0;
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
  *((_DWORD *)v1 + 9) = 0;
  *((_DWORD *)v1 + 10) = 0;
  *((_DWORD *)v1 + 11) = 0;
  *((_DWORD *)v1 + 12) = 0;
  *((_DWORD *)v1 + 13) = 0;
  *((_DWORD *)v1 + 14) = 0;
  *((_DWORD *)v1 + 15) = 0;
  *((_DWORD *)v1 + 18) = 0;
  *((_DWORD *)v1 + 17) = 0;
  v2 = v1 + 88;
  v3 = 0;
  do
  {
    *v2 = *((_BYTE *)dword_563908 + v3 + 59596);
    v3 += 480;
    ++v2;
  }
  while ( v3 < 7680 );
  v4 = (char *)dword_563908 + 58766;
  v5 = &Dst - ((_BYTE *)dword_563908 + 58766);
  do
  {
    v6 = *v4;
    v4[v5] = *v4;
    ++v4;
  }
  while ( v6 );
  sub_401A78((int)(v1 + 136), &Dst);
  v7 = sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), v1 + 136, (int)(v1 + 160));
  v8 = 0;
  *((_DWORD *)v1 + 28) = v7;
  if ( v7 )
    v8 = (*(unsigned __int16 *)(v7 + 192) + 3) | ((*((signed __int16 *)v1 + 92) | (*((signed __int16 *)v1 + 93) << 7)) << 16) | 0x100;
  *((_DWORD *)v1 + 31) = v8 | 0x80000000;
  v9 = (char *)dword_563908 + 58934;
  v10 = &Dst - ((_BYTE *)dword_563908 + 58934);
  do
  {
    v11 = *v9;
    v9[v10] = *v9;
    ++v9;
  }
  while ( v11 );
  sub_401A78((int)(v1 + 256), &Dst);
  v12 = sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), v1 + 256, (int)(v1 + 280));
  v13 = 0;
  *((_DWORD *)v1 + 30) = v12;
  if ( v12 )
    v13 = (*(unsigned __int16 *)(v12 + 192) + 3) | ((*((signed __int16 *)v1 + 152) | (*((signed __int16 *)v1 + 153) << 7)) << 16) | 0x100;
  *((_DWORD *)v1 + 33) = v13 | 0x80000000;
  v14 = (char *)dword_563908 + 58850;
  v15 = &Dst - ((_BYTE *)dword_563908 + 58850);
  do
  {
    v16 = *v14;
    v14[v15] = *v14;
    ++v14;
  }
  while ( v16 );
  sub_401A78((int)(v1 + 196), &Dst);
  v17 = sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), v1 + 196, (int)(v1 + 220));
  v18 = 0;
  *((_DWORD *)v1 + 29) = v17;
  if ( v17 )
    v18 = (*(unsigned __int16 *)(v17 + 192) + 3) | ((*((signed __int16 *)v1 + 122) | (*((signed __int16 *)v1 + 123) << 7)) << 16) | 0x100;
  *((_DWORD *)v1 + 32) = v18 | 0x80000000;
  *((_DWORD *)v1 + 27) = sub_4B39E0(*((_DWORD **)dword_563908 + 1515), (const char *)dword_563908 + 59270, 2, 1);
  *((_DWORD *)v1 + 26) = sub_4B39E0(*((_DWORD **)dword_563908 + 1515), (const char *)dword_563908 + 59186, 2, 1);
  return v1;
}

//----- (00467F40) --------------------------------------------------------
signed int __fastcall sub_467F40(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // ebp
  int v9; // ebx
  int v10; // eax
  int v11; // ST28_4
  int v12; // eax
  int v13; // ecx
  int v14; // edx

  v7 = a1;
  if ( abs(sub_401D39(a1, a2) - *(_DWORD *)(a1 + 56)) < 200 )
    return 0;
  if ( !*(_DWORD *)(v7 + 17) )
    return 0;
  v9 = *(_DWORD *)(v7 + 28) / 10000;
  v10 = v9 - a5;
  if ( dword_53A7C4 )
    v10 = 10 * v10 / 7;
  v11 = v10;
  v12 = *(_DWORD *)((char *)dword_563908 + 58546) * (*(_DWORD *)(v7 + 32) / 10000 - a6) / 1000;
  if ( (*(_DWORD *)(v7 + 24) / 10000 - a4) * (*(_DWORD *)(v7 + 24) / 10000 - a4) + v11 * v11 + v12 * v12 > a7 * a7 )
    return 0;
  v13 = *(_DWORD *)(v7 + 60);
  if ( v13 < *(_DWORD *)((char *)dword_563908 + 58602) )
    return 0;
  if ( *(signed __int16 *)(v7 + 13) == a3 )
  {
    v14 = *(_DWORD *)((char *)dword_563908 + 58730);
    if ( v14 == -1 )
    {
      if ( *(_DWORD *)(v7 + 36) || *(_DWORD *)(v7 + 40) )
        return 0;
    }
    else if ( v13 < v14 )
    {
      return 0;
    }
  }
  if ( !sub_4B5060(*((signed __int16 **)dword_563908 + 1508), a7, a4, a5, *(_DWORD *)(v7 + 24) / 10000, v9, 0) )
    return 0;
  return 1;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (004680E0) --------------------------------------------------------
void __thiscall sub_4680E0(_DWORD *this, signed int a2)
{
  char *v2; // esi
  int v3; // eax
  int v4; // edx
  int v5; // ecx
  char *v6; // ebp
  int *v7; // ebx
  bool v8; // zf
  signed int v9; // ecx
  int v10; // edi
  int v11; // eax
  int v12; // ecx
  _DWORD *v13; // edi
  int v14; // ecx
  int v15; // eax
  int v16; // edx
  int v17; // ecx
  double v18; // st6
  int *v19; // edi
  signed int v20; // eax
  double v21; // st7
  int v22; // ecx
  signed int v23; // eax
  signed int v24; // eax
  int *v25; // ecx
  unsigned int v26; // edx
  int v27; // edi
  unsigned int v28; // edx
  int v29; // ebx
  signed int v30; // eax
  int v31; // eax
  int v32; // ecx
  int v33; // eax
  int v34; // edi
  int v35; // eax
  int v36; // eax
  int v37; // ecx
  unsigned int v38; // edx
  int v39; // ecx
  int v40; // eax
  int v41; // ecx
  int v42; // eax
  __int16 v43; // bx
  int v44; // eax
  int v45; // edi
  void *v46; // ST4C_4
  int v47; // eax
  int v48; // ST2C_4
  int v49; // ST28_4
  int v50; // ST1C_4
  int v51; // ST0C_4
  int v52; // eax
  _DWORD *v53; // ecx
  _DWORD *v54; // edx
  int v55; // eax
  signed int v56; // [esp+14h] [ebp-28h]
  signed int v57; // [esp+18h] [ebp-24h]
  signed int v58; // [esp+1Ch] [ebp-20h]
  int v59; // [esp+20h] [ebp-1Ch]
  int v60; // [esp+24h] [ebp-18h]
  int v61; // [esp+28h] [ebp-14h]
  int v62; // [esp+2Ch] [ebp-10h]
  int v63; // [esp+38h] [ebp-4h]

  v2 = (char *)this;
  v3 = this[13];
  if ( v3 > 0 )
    this[13] = v3 - a2;
  v8 = *(_DWORD *)((char *)this + 17) == 0;
  v4 = this[15];
  v59 = this[15];
  this[15] = v4 + a2;
  if ( !v8 )
  {
    v5 = 0;
    v58 = 0;
    if ( a2 > 0 )
    {
      v6 = (char *)dword_563908;
      while ( 1 )
      {
        v7 = (int *)(v2 + 36);
        v56 = -1;
        if ( !*((_DWORD *)v2 + 9) && !*((_DWORD *)v2 + 10) && !*((_DWORD *)v2 + 11) && !*((_DWORD *)v2 + 8) )
          goto LABEL_42;
        v57 = 0;
        if ( *((_WORD *)dword_563918 + 4450) > 0 )
        {
          v9 = (v4 + v5) & 0x80000001;
          v8 = v9 == 0;
          if ( v9 < 0 )
            v8 = (((_BYTE)v9 - 1) | 0xFFFFFFFE) == -1;
          if ( v8 )
          {
            *(_DWORD *)&v2[12 * *((_DWORD *)v2 + 3079) + 316] = *((_DWORD *)v2 + 6) / 10000;
            *(_DWORD *)&v2[12 * *((_DWORD *)v2 + 3079) + 320] = *((_DWORD *)v2 + 7) / 10000;
            *(_DWORD *)&v2[12 * (*((_DWORD *)v2 + 3079) + 27)] = *((_DWORD *)v2 + 8) / 10000;
            *((_DWORD *)v2 + 3079) = (*((_DWORD *)v2 + 3079) + 1) % *((signed __int16 *)dword_563918 + 4450);
            v6 = (char *)dword_563908;
          }
        }
        if ( *(_DWORD *)(v6 + 58638) )
        {
          sub_4B59C0(
            *((_DWORD **)v6 + 1508),
            &v60,
            &v61,
            *((_DWORD *)v2 + 6),
            *((_DWORD *)v2 + 7),
            *((_DWORD *)v2 + 8),
            *((_DWORD *)v2 + 8));
          v10 = v60;
          *((_DWORD *)v2 + 11) += 10 * *(_DWORD *)((char *)dword_563908 + 58638);
          v11 = *((_DWORD *)v2 + 11);
          *((_DWORD *)v2 + 8) += v11;
          v12 = *((_DWORD *)v2 + 8);
          if ( v12 >= v10 )
          {
            if ( v12 > v61 )
            {
              *((_DWORD *)v2 + 8) = 2 * v61 - v12;
              goto LABEL_23;
            }
          }
          else
          {
            if ( abs(v11) >= 1000 )
            {
              *((_DWORD *)v2 + 8) = 2 * v10 - v12;
LABEL_23:
              v13 = (_DWORD *)*((_DWORD *)dword_563908 + 1508);
              v14 = *((_DWORD *)v2 + 6) / 160000;
              v15 = *((_DWORD *)v2 + 7) / 160000;
              if ( v14 < 0 || v15 < 0 || (v16 = v13[1], v14 >= v16) || v15 >= v13[2] )
                v56 = 0;
              else
                v56 = v13[(*(_BYTE *)(3 * (v14 + v15 * v16) + v13[1292]) & 0x7F) + 520];
              *v7 = *v7 * *(_DWORD *)((char *)dword_563908 + 58646) / 1000;
              *((_DWORD *)v2 + 10) = *((_DWORD *)v2 + 10) * *(_DWORD *)((char *)dword_563908 + 58646) / 1000;
              v17 = *((_DWORD *)v2 + 11) * *(_DWORD *)((char *)dword_563908 + 58642);
              *((_DWORD *)v2 + 11) = v17 / -1000;
              if ( abs(v17 / -1000) > 1000 )
                v57 = 1;
              goto LABEL_31;
            }
            *((_DWORD *)v2 + 8) = v10;
            *((_DWORD *)v2 + 11) = 0;
          }
        }
LABEL_31:
        v18 = (double)*((signed int *)v2 + 10);
        v19 = (int *)(v2 + 40);
        *v7 = (signed int)((double)*v7 * *((double *)v2 + 10) / 1000000.0);
        v20 = (signed int)(v18 * *((double *)v2 + 10) / 1000000.0);
        v62 = *(signed __int16 *)(v2 + 15);
        *((_DWORD *)v2 + 10) = v20;
        v21 = *((double *)v2 + 10) - (double)v62;
        *((double *)v2 + 10) = v21;
        if ( v21 < 0.0 )
        {
          *((double *)v2 + 10) = 0.0;
          return;
        }
        if ( sub_4AB0E0(
               *((_DWORD **)dword_563908 + 1508),
               *((_DWORD *)v2 + 8) / 10000,
               *((_DWORD *)v2 + 8) / 10000,
               (int *)v2 + 6,
               (int *)v2 + 7,
               (int *)v2 + 9,
               (int *)v2 + 10,
               (int)(v2 + 88),
               *(_DWORD *)((char *)dword_563908 + 58610))
          && ((*v7 = *v7 * *(_DWORD *)((char *)dword_563908 + 58650) / 1000,
               v22 = *v19 * *(_DWORD *)((char *)dword_563908 + 58650) / 1000,
               v23 = *v7,
               *v19 = v22,
               abs(v23) > 1000)
           || abs(v22) > 1000) )
        {
          v24 = 1;
        }
        else
        {
          v24 = v57;
        }
        if ( a2 < 10 )
        {
          if ( v24 )
          {
            v25 = (int *)*((_DWORD *)v2 + 27);
            if ( v25 )
            {
              v26 = (signed int)((unsigned __int64)(1759218605i64 * *((signed int *)v2 + 6)) >> 32) >> 12;
              sub_4A6E90(v25, v26 + (v26 >> 31), *((_DWORD *)v2 + 7) / 10000, 0, 0, 0, 0, 0);
            }
          }
        }
        v6 = (char *)dword_563908;
LABEL_42:
        if ( *(_WORD *)(v2 + 13) == *(_WORD *)(*((_DWORD *)v6 + 6897) + 96) )
        {
          v27 = *((_DWORD *)v2 + 6) / 160000;
          v28 = (signed int)((unsigned __int64)(1759218605i64 * *((signed int *)v2 + 7)) >> 32) >> 16;
          v29 = v28 + (v28 >> 31);
          if ( *(_DWORD *)(v6 + 58558) && *((_DWORD *)v2 + 8) / 10000 )
          {
            v30 = v56;
          }
          else
          {
            v54 = (_DWORD *)*((_DWORD *)v6 + 1508);
            if ( v27 < 0 || v29 < 0 || (v55 = v54[1], v27 >= v55) || v29 >= v54[2] )
            {
              v30 = 0;
LABEL_47:
              v31 = *(_DWORD *)&v6[480 * v30 + 59638];
              if ( v31 == -2 || v31 == *(signed __int16 *)(*((_DWORD *)v6 + 6897) + 100) )
              {
                v32 = *((_DWORD *)v6 + 1508);
                if ( *(_DWORD *)&v6[480 * sub_40137F(*(signed __int16 *)(v2 + 7) / 16, *(signed __int16 *)(v2 + 9) / 16)
                                  + 59642] > 0 )
                {
                  v33 = *(_DWORD *)(v2 + 17);
                  if ( v33 != *((_DWORD *)v2 + 17) )
                  {
                    *((_DWORD *)v2 + 17) = v33;
                    (*(void (__stdcall **)(_DWORD, int, int, int))(*(_DWORD *)dword_56391C + 112))(*v2, v33, v27, v29);
                    v6 = (char *)dword_563908;
                  }
                }
              }
              goto LABEL_52;
            }
            v30 = v54[(*(_BYTE *)(3 * (v27 + v29 * v55) + v54[1292]) & 0x7F) + 520];
          }
          if ( v30 >= 0 )
            goto LABEL_47;
        }
LABEL_52:
        if ( *(_DWORD *)(v2 + 17)
          && (abs(*((_DWORD *)v2 + 9)) > 1000 || abs(*((_DWORD *)v2 + 10)) > 1000 || abs(*((_DWORD *)v2 + 11)) > 1000) )
        {
          v34 = *((_DWORD *)v2 + 29);
          if ( v34 )
          {
            v35 = --*((_DWORD *)v2 + 18);
            if ( v35 > 0 )
              goto LABEL_69;
            v36 = v35 + 6;
            if ( v36 < 1 )
              v36 = 1;
            v37 = *((_DWORD *)v2 + 6);
            *((_DWORD *)v2 + 18) = v36;
            v6 = (char *)dword_563908;
            v38 = (unsigned __int64)(1759218605i64 * v37) >> 32;
            v39 = *((_DWORD *)dword_563908 + 60);
            v40 = ((signed int)v38 >> 12) + (v38 >> 31);
            if ( v40 >= v39 - 128 && v40 <= *((_DWORD *)dword_563908 + 3103) + v39 + 128 )
            {
              v41 = *((_DWORD *)dword_563908 + 61);
              v42 = *((_DWORD *)v2 + 7) / 10000;
              if ( v42 >= v41 - 128 && v42 <= *((_DWORD *)dword_563908 + 3104) + v41 + 128 )
              {
                v43 = *((_WORD *)v2 + 126);
                v44 = sub_4025D1(v34, 0, 0, *((_DWORD *)v2 + 8) / 10000, v43)
                    / (signed int)*(signed __int16 *)(v34 + 178);
                v45 = *(signed __int16 *)(v34 + 170);
                v62 = v44;
                if ( v43 )
                  v45 = v43;
                v46 = operator new(0x44u);
                v47 = 0;
                v63 = 0;
                if ( v46 )
                {
                  v48 = *((_DWORD *)v2 + 62);
                  v49 = *((_DWORD *)v2 + 32);
                  v50 = v62;
                  v51 = *((_DWORD *)v2 + 8) - 5 * *((_DWORD *)v2 + 11);
                  v52 = sub_401FD2(5 * *((_DWORD *)v2 + 10));
                  v47 = sub_4025CC(
                          *((_DWORD *)v2 + 29),
                          *((_DWORD *)v2 + 6) - 5 * *((_DWORD *)v2 + 9),
                          *((_DWORD *)v2 + 7) - v52,
                          v51,
                          0,
                          0,
                          0,
                          v50,
                          v45,
                          v45,
                          v49,
                          v48,
                          0);
                }
                v53 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
                v63 = -1;
                sub_4A7300(v53, v47);
LABEL_69:
                v6 = (char *)dword_563908;
                goto LABEL_70;
              }
            }
          }
        }
LABEL_70:
        v5 = v58++ + 1;
        if ( v58 >= a2 )
          return;
        v4 = v59;
      }
    }
  }
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 401FD2: using guessed type _DWORD __cdecl sub_401FD2(_DWORD);
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4025D1: using guessed type _DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004689D0) --------------------------------------------------------
void __thiscall sub_4689D0(int this)
{
  int v1; // ebx
  unsigned int v2; // edx
  int v3; // esi
  unsigned int v4; // edx
  int v5; // edi
  _DWORD *v6; // ebx
  signed int v7; // ebp
  unsigned int v8; // eax
  int v9; // eax
  int v10; // ebx
  int v11; // ecx
  int v12; // ecx
  int v13; // [esp+Ch] [ebp-14h]
  int v14; // [esp+10h] [ebp-10h]
  int v15; // [esp+14h] [ebp-Ch]
  int v16; // [esp+18h] [ebp-8h]
  char v17; // [esp+1Ch] [ebp-4h]

  v1 = *(_DWORD *)(this + 17);
  if ( v1 || *(_WORD *)(this + 13) >= 0 )
  {
    v2 = (signed int)((unsigned __int64)(1759218605i64 * *(signed int *)(this + 24)) >> 32) >> 16;
    v3 = v2 + (v2 >> 31);
    v4 = (signed int)((unsigned __int64)(1759218605i64 * *(signed int *)(this + 28)) >> 32) >> 16;
    v5 = v4 + (v4 >> 31);
    if ( v1 )
    {
      if ( *((_DWORD *)dword_563908 + 2705) % 20 < 10 )
      {
        v12 = *((_DWORD *)dword_563908 + 1505);
        sub_401A7D(v3, v5, 3, 3, *((unsigned __int16 *)dword_563908 + 119), 1, 1);
      }
    }
    else
    {
      v6 = dword_563908;
      v7 = 2;
      v13 = 2;
      v14 = *((unsigned __int16 *)dword_563908 + 119);
      v8 = *(signed __int16 *)(this + 13);
      if ( v8 <= 0x1387 )
      {
        v15 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v8 + 12408);
        if ( v15 )
        {
          v14 = (unsigned __int16)sub_40161D(&v13);
          v9 = sub_401D57(v15);
          v10 = v9;
          if ( v9 && sub_40237E(v9) )
          {
            (*(void (__thiscall **)(int, int *, int *, char *))(*(_DWORD *)v10 + 84))(v10, &v15, &v16, &v17);
            v3 = v15 / 160000;
            v5 = v16 / 160000;
          }
          v6 = dword_563908;
          v7 = v13;
        }
      }
      v11 = v6[1505];
      if ( v6[2705] % 50 >= 15 )
        sub_401A7D(v3, v5, v7, v7, v14, 1, 1);
      else
        sub_401A7D(v3, v5, v7 + 1, v7 + 1, *((unsigned __int16 *)v6 + 119), 1, 1);
    }
  }
}
// 40161D: using guessed type _DWORD __stdcall sub_40161D(_DWORD);
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00468C90) --------------------------------------------------------
void __userpurge sub_468C90(int a1@<ecx>, int a2@<ebp>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7, int a8, int a9, unsigned __int16 a10)
{
  _DWORD *v10; // esi
  unsigned __int16 v11; // cx
  int v12; // eax
  int v13; // eax
  int v14; // [esp+8h] [ebp-14h]
  int v15; // [esp+Ch] [ebp-10h]
  int v16; // [esp+10h] [ebp-Ch]
  signed int v17; // [esp+18h] [ebp-4h]

  if ( *(_WORD *)(a1 + 13) != -1 || *(_DWORD *)(a1 + 17) )
  {
    v17 = 0;
    if ( *((_WORD *)dword_563918 + 4450) > 0 )
    {
      v16 = a2;
      v15 = a4;
      v14 = a3;
      v10 = (_DWORD *)(a1 + 320);
      do
      {
        if ( dword_576828 == 2 )
          v11 = 16912;
        else
          v11 = -31728;
        v12 = *(v10 - 1);
        if ( v12 || *v10 || v10[1] )
        {
          (*(void (__thiscall **)(int, int, int, _DWORD, int, int, int))(*(_DWORD *)a5 + 24))(
            a5,
            v12 - a6,
            *v10 - a7,
            v11,
            v14,
            v15,
            v16);
          if ( dword_53A7C4 )
            v13 = 7 * v10[1] / 10;
          else
            v13 = 0;
          v16 = a10;
          v15 = *v10 - v13 - a7;
          v14 = *(v10 - 1) - a6;
          (*(void (__thiscall **)(int))(*(_DWORD *)a5 + 24))(a5);
        }
        v10 += 3;
        ++v17;
      }
      while ( v17 < *((signed __int16 *)dword_563918 + 4450) );
    }
  }
}
// 468C90: could not find valid save-restore pair for ebp
// 468C90: could not find valid save-restore pair for edi
// 468C90: could not find valid save-restore pair for esi
// 53A7C4: using guessed type int dword_53A7C4;
// 576828: using guessed type int dword_576828;

//----- (00468DD0) --------------------------------------------------------
void __fastcall sub_468DD0(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // ebp
  unsigned int v8; // edx
  int v9; // edi
  int v10; // ebx
  int v11; // ST2C_4
  int v12; // ecx
  int v13; // ST24_4
  int v14; // ST20_4
  unsigned int v15; // edx
  int v16; // eax
  unsigned int v17; // edx
  int v18; // ebx
  int v19; // eax
  int v20; // edi
  int v21; // eax
  int v22; // eax
  int v23; // edx
  int v24; // [esp+Ch] [ebp+8h]
  int v25; // [esp+10h] [ebp+Ch]

  v5 = a1;
  if ( a1[13] <= 0 )
  {
    if ( *(_DWORD *)((char *)a1 + 17) )
    {
      if ( abs(sub_401D39(a1, a2) - a1[12]) < 1500 )
      {
        v6 = v5[6];
        v7 = v6 / 10000 - a4;
        v8 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v5[7]) >> 32) >> 12;
        v9 = v8 + (v8 >> 31) - a5;
        if ( v7 > -64 && v7 < *(_DWORD *)(a3 + 4) && v9 > -64 && v9 < *(_DWORD *)(a3 + 8) )
        {
          v10 = v5[30];
          if ( v10 )
          {
            v11 = v6 / 160000;
            v12 = *((_DWORD *)dword_563908 + 1508);
            if ( !*((_BYTE *)dword_563908 + 480 * sub_40137F(v11, v5[7] / 160000) + 59595) )
            {
              v13 = v5[77];
              v14 = v5[33];
              v15 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v5[8]) >> 32) >> 12;
              v16 = sub_4025D1(v10, 0, v5[15], v15 + (v15 >> 31), *((signed __int16 *)v5 + 156));
              sub_4A50B0(v10, v16, a3, v7, v9, v14, v13, 0, 0, 0);
            }
          }
          v17 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v5[8]) >> 32) >> 12;
          v18 = v17 + (v17 >> 31);
          v19 = sub_40212B(v17 + (v17 >> 31));
          v20 = v9 - v19;
          v24 = v19;
          v21 = v5[28];
          v25 = v5[28];
          if ( v21 )
          {
            v22 = sub_4025D1(v21, 0, v5[15], v18, *((signed __int16 *)v5 + 96));
            v23 = v5[31];
            if ( v5[13] > 0 )
              v23 = v23 & 0xFFFFFFF6 | 6;
            sub_4A50B0(v25, v22, a3, v7, v20, v23, v5[47], v24, 0, 0);
          }
        }
      }
    }
  }
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40212B: using guessed type _DWORD __cdecl sub_40212B(_DWORD);
// 4025D1: using guessed type _DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004692B0) --------------------------------------------------------
signed int __thiscall sub_4692B0(int this, int *a2, int *a3, int *a4)
{
  int *v4; // ebp
  int *v6; // ebx
  int *v7; // edi
  unsigned int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // esi
  int v12; // eax
  int *v13; // ecx
  unsigned int v14; // edx
  int *v15; // ecx

  v4 = a4;
  *a4 = -1;
  if ( !*(_DWORD *)(this + 17) && *(_WORD *)(this + 13) < 0 )
    return 0;
  v6 = a3;
  v7 = a2;
  *a2 = *(_DWORD *)(this + 24) / 10000;
  *v6 = *(_DWORD *)(this + 28) / 10000;
  if ( !*(_DWORD *)(this + 17) )
  {
    v8 = *(signed __int16 *)(this + 13);
    if ( v8 <= 0x1387 )
    {
      v9 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v8 + 12408);
      if ( v9 )
      {
        v10 = sub_401D57(v9);
        v11 = v10;
        if ( v10 )
        {
          if ( sub_40237E(v10) )
          {
            v12 = (*(int (__thiscall **)(int, int **, int **, int **))(*(_DWORD *)v11 + 84))(v11, &a4, &a2, &a3);
            v13 = a4;
            *v4 = v12;
            v14 = (unsigned __int64)(1759218605i64 * (signed int)v13) >> 32;
            v15 = a2;
            *v7 = ((signed int)v14 >> 12) + (v14 >> 31);
            *v6 = (signed int)v15 / 10000;
          }
        }
      }
    }
  }
  return 1;
}
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (004693F0) --------------------------------------------------------
_DWORD *__thiscall sub_4693F0(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // edi
  signed int v3; // ebx
  void *v4; // eax
  int v5; // eax

  v1 = this;
  this[1] = sub_4AA830((int *)Memory);
  v1[3] = sub_4B39E0(*((_DWORD **)dword_563908 + 1515), (const char *)dword_563908 + 59018, 2, 1);
  v1[4] = sub_4B39E0(*((_DWORD **)dword_563908 + 1515), (const char *)dword_563908 + 59102, 2, 1);
  *v1 = 0;
  v1[2] = 0;
  v2 = v1 + 5;
  v3 = 5;
  do
  {
    v4 = operator new(0x3020u);
    if ( v4 )
      v5 = sub_401A46(v4);
    else
      v5 = 0;
    *v2 = v5;
    ++v2;
    --v3;
  }
  while ( v3 );
  return v1;
}
// 401A46: using guessed type int __thiscall sub_401A46(_DWORD);

//----- (00469520) --------------------------------------------------------
int __thiscall sub_469520(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // ecx

  v5 = this[a2 + 5];
  return sub_402045(a3, a4, a5);
}
// 402045: using guessed type _DWORD __stdcall sub_402045(_DWORD, _DWORD, _DWORD);

//----- (00469570) --------------------------------------------------------
int __fastcall sub_469570(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v5; // ecx
  __int64 v6; // rax
  _DWORD *v7; // eax
  int v8; // ecx
  _DWORD *v9; // ecx

  v3 = a1;
  v4 = sub_401D39(a1, a2);
  v5 = *(_DWORD *)(v3 + 4 * a3 + 20);
  v6 = v4 - *(_DWORD *)(v5 + 56);
  LODWORD(v6) = (HIDWORD(v6) ^ v6) - HIDWORD(v6);
  if ( (signed int)v6 >= 200 )
  {
    *(_DWORD *)(*(_DWORD *)(v3 + 4 * a3 + 20) + 56) = sub_401D39(v5, HIDWORD(v6));
    v7 = Memory;
    v8 = *(_DWORD *)(v3 + 4);
    v7[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v8);
    *(_DWORD *)(v7[1] + 4 * v8) = *v7;
    v7[4] ^= *(_DWORD *)(v7[1] + 4 * v8);
    v9 = *(_DWORD **)(v3 + 16);
    if ( v9 && *(_DWORD *)(*(_DWORD *)(v3 + 4 * a3 + 20) + 52) <= 0 )
      sub_4A7120(v9, 0, 0, 0, 0);
    LODWORD(v6) = (*(int (__stdcall **)(int, _DWORD, bool))(*(_DWORD *)dword_56391C + 104))(
                    a3,
                    *(_DWORD *)(*(_DWORD *)(v3 + 4 * a3 + 20) + 17),
                    *(_DWORD *)(*(_DWORD *)(v3 + 4 * a3 + 20) + 52) > 0);
  }
  return v6;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00469640) --------------------------------------------------------
int __thiscall sub_469640(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int v3; // eax
  int *v4; // esi
  signed int v5; // ebp
  int v6; // ecx
  _DWORD *v7; // ecx
  int v8; // esi
  int v9; // edx
  int result; // eax
  int v11; // edi
  int v12; // eax
  int *v13; // eax
  int v14; // ecx
  int v15; // edi
  _DWORD *v16; // edx
  int v17; // esi

  v2 = this;
  if ( *this > 0 )
    *this -= a2;
  v3 = this[2];
  if ( v3 > 0 )
    this[2] = v3 - a2;
  v4 = this + 5;
  v5 = 5;
  do
  {
    v6 = *v4;
    sub_401C0D(a2);
    ++v4;
    --v5;
  }
  while ( v5 );
  if ( *((_DWORD *)dword_563908 + 6898) && *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 156) >= 0 )
  {
    v7 = Memory;
    v8 = v2[1];
    v9 = *((_DWORD *)Memory + 1);
    result = *(_DWORD *)Memory ^ *(_DWORD *)(v9 + 4 * v8);
    if ( result >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v9 + 4 * v8) )
    {
      v11 = *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v8);
      v12 = *(_DWORD *)Memory;
      *((_DWORD *)Memory + 4) ^= v11;
      result = (v11 ^ v12) - a2;
      *(_DWORD *)(v7[1] + 4 * v8) = result ^ *v7;
      v7[4] ^= *(_DWORD *)(v7[1] + 4 * v8);
      if ( result <= 0 )
        result = (*(int (__stdcall **)(_DWORD))(**((_DWORD **)dword_563908 + 6898) + 252))(0);
    }
  }
  else
  {
    v13 = (int *)Memory;
    v14 = v2[1];
    v13[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v14);
    v15 = v13[1];
    v16 = v13 + 1;
    v17 = *v13;
    result = (int)(v13 + 4);
    *(_DWORD *)(v15 + 4 * v14) = v17;
    *(_DWORD *)result ^= *(_DWORD *)(*v16 + 4 * v14);
  }
  return result;
}
// 401C0D: using guessed type _DWORD __stdcall sub_401C0D(_DWORD);

//----- (00469760) --------------------------------------------------------
int __thiscall sub_469760(int *this, int a2, __int16 a3, int a4)
{
  int *v4; // esi
  signed int v5; // edi
  int v6; // ecx
  int result; // eax

  v4 = this + 5;
  v5 = 5;
  do
  {
    v6 = *v4;
    result = sub_40106E(a2, a3, a4);
    ++v4;
    --v5;
  }
  while ( v5 );
  return result;
}
// 40106E: using guessed type _DWORD __stdcall sub_40106E(_DWORD, __int16, _DWORD);

//----- (004697A0) --------------------------------------------------------
int __thiscall sub_4697A0(int *this, int a2, int a3, int a4)
{
  int *v4; // esi
  signed int v5; // edi
  int v6; // ecx
  int result; // eax

  v4 = this + 5;
  v5 = 5;
  do
  {
    v6 = *v4;
    result = sub_402739(a2, a3, a4);
    ++v4;
    --v5;
  }
  while ( v5 );
  return result;
}
// 402739: using guessed type _DWORD __stdcall sub_402739(_DWORD, _DWORD, _DWORD);

//----- (004697E0) --------------------------------------------------------
void *__thiscall sub_4697E0(_DWORD *this)
{
  void *result; // eax
  _DWORD *v2; // esi
  signed int v3; // edi

  result = dword_563908;
  if ( *(_DWORD *)((char *)dword_563908 + 58606) )
  {
    v2 = this + 5;
    v3 = 5;
    do
    {
      result = (void *)sub_40140B(*v2);
      ++v2;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 40140B: using guessed type int __thiscall sub_40140B(_DWORD);

//----- (00469820) --------------------------------------------------------
void __thiscall sub_469820(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // ebx
  int v9; // eax
  __int16 v10; // ST28_2
  int v11; // ST24_4
  int v12; // ST20_4
  int v13; // ST1C_4
  int v14; // eax
  int v15; // ecx

  v15 = this[5];
  v8 = *(_DWORD *)(v15 + 112);
  if ( v8 )
  {
    if ( dword_53A7C4 )
      v9 = 7 * (a8 + a7) / 10;
    else
      v9 = 0;
    v10 = v9;
    v11 = *(_DWORD *)(v15 + 188);
    v12 = *(_DWORD *)(v15 + 124);
    v13 = a6 - a4 - v9;
    v14 = sub_4025D1(v8, 0, *((_DWORD *)dword_563908 + 2705), a8 + a7, *(signed __int16 *)(v15 + 192));
    sub_4A50B0(v8, v14, a2, a5 - a3, v13, v12, v11, v10, 0, 0);
  }
}
// 4025D1: using guessed type _DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00469830) --------------------------------------------------------
signed int __thiscall sub_469830(int *this, int a2, int a3, int a4, int a5, int a6)
{
  signed int v6; // edi
  int *v7; // esi
  int v8; // ecx

  if ( a2 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) && this[2] > 0 )
    return -1;
  v6 = 0;
  v7 = this + 5;
  while ( 1 )
  {
    v8 = *v7;
    if ( sub_40233D(a2, a3, a4, a5, a6) )
      break;
    ++v6;
    ++v7;
    if ( v6 >= 5 )
      return -1;
  }
  return v6;
}
// 40233D: using guessed type _DWORD __stdcall sub_40233D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004698C0) --------------------------------------------------------
void *__thiscall sub_4698C0(void **this)
{
  void **v1; // ebx
  void **v2; // esi
  signed int v3; // edi
  void *result; // eax

  v1 = this;
  v2 = this + 5;
  v3 = 5;
  do
  {
    if ( *v2 )
      j__free(*v2);
    ++v2;
    --v3;
  }
  while ( v3 );
  result = Memory;
  *((_BYTE *)v1[1] + *((_DWORD *)Memory + 2)) = 0;
  return result;
}

//----- (00469910) --------------------------------------------------------
signed int sub_469910()
{
  return 3;
}

//----- (00469920) --------------------------------------------------------
int __thiscall sub_469920(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // edi
  _DWORD *v3; // ebx
  int v4; // ST2C_4
  int v5; // ST28_4
  int v6; // eax
  int v7; // edx
  __int16 v8; // bp
  __int16 v9; // dx
  int v10; // ST28_4
  int v11; // ST20_4
  int v12; // ST1C_4
  int v13; // eax
  int v14; // eax
  int v15; // edi
  char *v16; // eax
  int v17; // ebp
  int v18; // eax
  int v19; // ebp
  int v20; // ST44_4
  int v21; // edx
  int v22; // edi
  _DWORD *v23; // ST1C_4
  char *v24; // eax
  int v25; // eax
  int v26; // ecx
  int v27; // edi
  int v28; // ebp
  int v29; // ST24_4
  _DWORD *v30; // ST1C_4
  char *v31; // eax
  int v32; // eax
  int v33; // edi
  int v34; // eax
  char *v35; // edx
  int v36; // ecx
  int v37; // ecx
  int v38; // edx
  int v39; // ecx
  int v40; // ecx
  void (__stdcall *v41)(int, int *); // eax
  int v42; // ST28_4
  int v43; // ecx
  int v44; // ecx
  int v45; // ecx
  int v46; // ST24_4
  _DWORD *v47; // ST1C_4
  char *v48; // eax
  int v49; // edi
  int v50; // eax
  int v51; // ecx
  int v52; // edi
  int v53; // edi
  int v54; // eax
  __int16 v55; // cx
  int v56; // edi
  _DWORD *v57; // ST1C_4
  char *v58; // eax
  int v59; // edi
  int v60; // ST44_4
  int v61; // edi
  __int16 v62; // dx
  __int16 v63; // dx
  int v64; // eax
  __int16 v65; // dx
  __int16 v66; // dx
  int v67; // ST24_4
  _DWORD *v68; // ST1C_4
  char *v69; // eax
  int v70; // ebp
  int v71; // edi
  unsigned int v72; // eax
  int v73; // ST20_4
  _DWORD *v74; // ST1C_4
  int v75; // ST18_4
  char *v76; // eax
  int v77; // eax
  int v78; // edx
  int v79; // ST20_4
  _DWORD *v80; // ST1C_4
  int v81; // ST18_4
  char *v82; // ST14_4
  int v83; // edx
  int v84; // edi
  int v85; // ebx
  bool v86; // zf
  int v87; // ecx
  int v88; // edx
  int v89; // ecx
  __int16 v90; // ax
  int v91; // edi
  int v92; // edx
  int v93; // ecx
  int v94; // edi
  int v95; // ecx
  int v96; // ecx
  int v97; // ecx
  int v98; // ecx
  int v99; // ecx
  int v101; // [esp+40h] [ebp-17Ch]
  int v102; // [esp+40h] [ebp-17Ch]
  int v103; // [esp+40h] [ebp-17Ch]
  int v104; // [esp+40h] [ebp-17Ch]
  int v105; // [esp+44h] [ebp-178h]
  int v106; // [esp+44h] [ebp-178h]
  __int16 v107; // [esp+44h] [ebp-178h]
  __int16 v108; // [esp+44h] [ebp-178h]
  int v109; // [esp+44h] [ebp-178h]
  int v110; // [esp+48h] [ebp-174h]
  int v111; // [esp+48h] [ebp-174h]
  int v112; // [esp+48h] [ebp-174h]
  int v113; // [esp+4Ch] [ebp-170h]
  int v114; // [esp+4Ch] [ebp-170h]
  int v115; // [esp+4Ch] [ebp-170h]
  int v116; // [esp+4Ch] [ebp-170h]
  int v117; // [esp+4Ch] [ebp-170h]
  int v118; // [esp+50h] [ebp-16Ch]
  int v119; // [esp+50h] [ebp-16Ch]
  int v120; // [esp+54h] [ebp-168h]
  int v121; // [esp+58h] [ebp-164h]
  int v122; // [esp+5Ch] [ebp-160h]
  int v123; // [esp+60h] [ebp-15Ch]
  int v124; // [esp+64h] [ebp-158h]
  int v125; // [esp+68h] [ebp-154h]
  int v126; // [esp+6Ch] [ebp-150h]
  int v127; // [esp+70h] [ebp-14Ch]
  int v128; // [esp+74h] [ebp-148h]
  int *v129; // [esp+78h] [ebp-144h]
  int v130; // [esp+7Ch] [ebp-140h]
  int v131; // [esp+80h] [ebp-13Ch]
  int v132; // [esp+84h] [ebp-138h]
  int v133; // [esp+88h] [ebp-134h]
  int v134; // [esp+8Ch] [ebp-130h]
  int v135; // [esp+90h] [ebp-12Ch]
  char v136; // [esp+94h] [ebp-128h]
  char v137[4]; // [esp+98h] [ebp-124h]
  int v138; // [esp+A0h] [ebp-11Ch]
  char v139; // [esp+A8h] [ebp-114h]
  char Dest[4]; // [esp+B8h] [ebp-104h]

  v1 = this;
  v2 = this + 3;
  sub_401BE0(this[7], this + 3);
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[7] + 64))(v1 + 3);
  (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v1[7] + 92))(0, 0);
  v3 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
  (*(void (**)(void))(*(_DWORD *)v1[3092] + 40))();
  (*(void (**)(void))(*(_DWORD *)v1[5400] + 40))();
  (*(void (**)(void))(*(_DWORD *)v1[13] + 40))();
  v4 = *((signed __int16 *)dword_563908 + 15401);
  v5 = *((signed __int16 *)dword_563908 + 15400);
  v6 = sub_402617(0x23u);
  sub_401F32(&v131, &v136, v6, v5, v4);
  v7 = v1[10];
  if ( v7 == 6 )
    v8 = *((_WORD *)dword_563908 + 15404);
  else
    v8 = *((_WORD *)dword_563908 + 15402);
  if ( v7 == 6 )
    v9 = *((_WORD *)dword_563908 + 15403);
  else
    v9 = *((_WORD *)dword_563908 + 15401);
  v10 = v1[5] - v131 - 12;
  v11 = v9;
  v12 = *((signed __int16 *)dword_563908 + 15400);
  v13 = sub_402617(0x23u);
  sub_4011E0(v1[7], v13, v12, v11, v8, v10, 11);
  v14 = *v2;
  v15 = v1[4];
  v124 = v14 + 12;
  v15 += 11;
  v16 = (char *)sub_402617(0x6Du);
  v17 = sub_49AD40(v3, v16);
  v18 = sub_49AD40(v3, "00000000") + v17 + 40;
  v19 = v124;
  v20 = v18;
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v124, v15, v18);
  v21 = *((_DWORD *)dword_563908 + 511);
  v124 += v20;
  sub_40196F(v1[7], v21, v124, v15, 28);
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 511), v124 + 28, v15, 28);
  sprintf(Dest, "%d", *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 60));
  v22 = (*(signed __int16 *)(*((_DWORD *)dword_563908 + 511) + 174) - *(signed __int16 *)(v3[513] + 174)) / 2 + v15;
  v19 += 16;
  v23 = (_DWORD *)v1[7];
  v24 = (char *)sub_402617(0x6Du);
  v25 = sub_49B310(v3, v24, 2, v23, v19, v22, 3, 0);
  sub_49B310(v3, Dest, 0, (_DWORD *)v1[7], v19 + v25 + 8, v22, 3, 0);
  v26 = *((_DWORD *)dword_563908 + 515);
  v118 = abs(*(signed __int16 *)(*(_DWORD *)(v26 + 360) + 18));
  v27 = v1[4] + 40;
  v28 = v1[3] + 16;
  sub_40196F(v1[7], v26, v28, v27, v1[3093]);
  v29 = v27 + (v118 - *(signed __int16 *)(v3[513] + 174)) / 2;
  v30 = (_DWORD *)v1[7];
  v31 = (char *)sub_402617(0x69u);
  sub_49B310(v3, v31, 7, v30, v28 + 4, v29, 3, 0);
  v32 = *(signed __int16 *)(*(_DWORD *)(v1[8] + 2052) + 174);
  v124 = v118 + v27;
  v33 = v118 + v27 + 4;
  v105 = v32;
  v34 = v1[3090];
  v113 = v1[3088];
  if ( v1[3088] >= v34 + v1[3091] )
    v113 = v34 + v1[3091];
  v110 = v1[3090];
  if ( v34 < v113 )
  {
    v35 = (char *)&v1[8 * (v34 + 2)];
    v101 = (int)&v1[8 * (v34 + 2)];
    while ( 1 )
    {
      v36 = 0;
      if ( v34 == v1[3089] )
      {
        v37 = v1[8];
        v127 = v28 + v1[3093];
        v125 = v28;
        v126 = v33 - 1;
        v38 = *(signed __int16 *)(*(_DWORD *)(v37 + 2052) + 174) + v33;
        v39 = v1[7];
        v128 = v38;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v39 + 40))(*((unsigned __int16 *)dword_563908 + 100), &v125);
        v35 = (char *)v101;
        v36 = 14;
      }
      sub_49B310((_DWORD *)v1[8], v35, v36, (_DWORD *)v1[7], v28 + 2, v33, 3, 0);
      v101 += 32;
      v33 += v105 + 2;
      if ( ++v110 >= v113 )
        break;
      v35 = (char *)v101;
      v34 = v110;
    }
  }
  v123 = v124 + (v105 + 2) * v1[3091];
  v122 = v28 + 1;
  v40 = v1[7];
  v121 = v124;
  v120 = v28;
  v41 = *(void (__stdcall **)(int, int *))(*(_DWORD *)v40 + 40);
  v42 = *((unsigned __int16 *)dword_563908 + 94);
  v130 = v105 + 2;
  v41(v42, &v120);
  v43 = v1[7];
  v120 = v1[3093] + v28 - 1;
  v122 = v120 + 1;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v43 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v120);
  v44 = v1[3093] + v28 - 1;
  v121 += (v105 + 2) * v1[3091];
  v122 = v44;
  v45 = v1[7];
  v123 = v121 + 1;
  v120 = v28;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v45 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v120);
  v102 = v1[6] - 43;
  if ( v1[4630] > 0 )
  {
    v46 = v1[6] - 43;
    v47 = (_DWORD *)v1[7];
    v48 = (char *)sub_402617(0x6Eu);
    v49 = sub_49B310(v3, v48, 2, v47, v28, v46, 3, 0);
    sprintf(Dest, "%d", v1[12]);
    v114 = v1[3 * v1[v1[3089] + 4631] + 3094];
    v50 = sub_402676(*(_DWORD *)(v114 + 128));
    v51 = v114;
    v106 = v50;
    v111 = 0;
    if ( v1[10] == 8 )
    {
      if ( *(_DWORD *)(v114 + 140) == -1 || v1[12] > v50 )
        v111 = 1;
      sub_49B310(v3, Dest, v111, (_DWORD *)v1[7], v49 + v28, v102, 3, 0);
      v52 = sub_49AD40(v3, "000  ") + v49;
      v53 = sub_49B310(v3, "Sell: ", 2, (_DWORD *)v1[7], v52 + v28, v102, 3, 0) + v52;
      v54 = *(_DWORD *)(v114 + 140);
      if ( v54 == -1 )
        strcpy(Dest, "---");
      else
        sprintf(Dest, "%d", v54 * v1[12]);
      sub_49B310(v3, Dest, v111, (_DWORD *)v1[7], v28 + v53, v102, 3, 0);
      goto LABEL_33;
    }
    if ( *(_WORD *)(v114 + 166) < 0 )
    {
      if ( v50 + v1[12] > sub_4025EA(*(_DWORD *)(v114 + 128)) )
      {
        sub_49B310(v3, Dest, 1, (_DWORD *)v1[7], v49 + v28, v102, 3, 0);
LABEL_32:
        v56 = sub_49AD40(v3, "000  ") + v49;
        v57 = (_DWORD *)v1[7];
        v58 = (char *)sub_402617(0x6Fu);
        v59 = sub_49B310(v3, v58, 2, v57, v56 + v28, v102, 3, 0) + v56;
        v60 = v1[12] * *(_DWORD *)(v114 + 144);
        sprintf(Dest, "%d", v60);
        sub_49B310(
          v3,
          Dest,
          v60 > *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 60),
          (_DWORD *)v1[7],
          v28 + v59,
          v102,
          3,
          0);
LABEL_33:
        (*(void (__stdcall **)(char *))(*(_DWORD *)v1[13] + 44))(v137);
        v61 = v138 + 8;
        v115 = v1[10];
        if ( v115 == 5 )
          v62 = *((_WORD *)dword_563908 + 15404);
        else
          v62 = *((_WORD *)dword_563908 + 15402);
        v107 = v62;
        if ( v115 == 5 )
          v63 = *((_WORD *)dword_563908 + 15403);
        else
          v63 = *((_WORD *)dword_563908 + 15401);
        v64 = sub_4011E0(v1[7], &unk_5116A8, *((signed __int16 *)dword_563908 + 15400), v63, v107, v138 + 8, v1[6] - 38);
        if ( v1[14] )
        {
          v116 = v1[10];
          if ( v116 == 8 )
            v65 = *((_WORD *)dword_563908 + 15404);
          else
            v65 = *((_WORD *)dword_563908 + 15402);
          v108 = v65;
          if ( v116 == 8 )
            v66 = *((_WORD *)dword_563908 + 15403);
          else
            v66 = *((_WORD *)dword_563908 + 15401);
          sub_4011E0(v1[7], "Sell", *((signed __int16 *)dword_563908 + 15400), v66, v108, v64 + v61 + 16, v1[6] - 38);
        }
        if ( !sub_4025B8(dword_563908) && *((_DWORD *)dword_563908 + 2705) % 100 < 70 )
        {
          v67 = v1[6] - 50;
          v68 = (_DWORD *)v1[7];
          v69 = (char *)sub_402617(0x8Au);
          sub_49B310((_DWORD *)v1[8], v69, 1, v68, v61, v67, 3, 0);
        }
        goto LABEL_50;
      }
      v50 = v106;
      v51 = v114;
    }
    v55 = *(_WORD *)(v51 + 166);
    if ( v55 > 0 && v50 + v1[12] > v55 )
      v111 = 4;
    sub_49B310(v3, Dest, v111, (_DWORD *)v1[7], v49 + v28, v102, 3, 0);
    goto LABEL_32;
  }
LABEL_50:
  v70 = v1[3093] + v28 + 30;
  v103 = v1[4] + 40;
  sub_40196F(v1[7], *((_DWORD *)dword_563908 + 515), v70, v103, v1[5401]);
  v71 = v103 + (v118 - *(signed __int16 *)(v3[513] + 174)) / 2;
  v129 = (int *)*((_DWORD *)dword_563908
                + (*((_DWORD *)dword_563918 + 2342) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2342) - 1)
                + 1516);
  v72 = v70 + sub_49AB50(v129, "00000");
  v73 = v72;
  v109 = v72;
  v74 = (_DWORD *)v1[7];
  v75 = v1[10] != 3 ? 7 : 4;
  v76 = (char *)sub_402617(0x6Au);
  sub_49B310(v3, v76, v75, v74, v73, v71, 3, 0);
  v77 = v1[10];
  v78 = v1[5401];
  if ( v77 == 8 )
  {
    sub_49B4F0(v3, "Sell Price", 7, (_DWORD *)v1[7], v78 + v70 - 2, v71, 3, 0);
  }
  else
  {
    v79 = v78 + v70 - 2;
    v80 = (_DWORD *)v1[7];
    v81 = v77 != 4 ? 7 : 4;
    v82 = (char *)sub_402617(0x6Bu);
    sub_49B4F0(v3, v82, v81, v80, v79, v71, 3, 0);
  }
  v83 = v1[v1[3089] + 5015];
  v84 = v103 + v118 + 4;
  v117 = v1[4630];
  if ( v1[4630] >= v83 + v1[5399] )
    v117 = v83 + v1[5399];
  v112 = v1[v1[3089] + 5015];
  if ( v83 < v117 )
  {
    v119 = v83 + 1;
    v104 = (int)&v1[3 * v83 + 3094];
    do
    {
      v85 = 0;
      if ( v1[10] == 8 )
      {
        if ( *(_DWORD *)(*(_DWORD *)v104 + 140) == -1 )
        {
          strcpy(v137, "---");
LABEL_63:
          v85 = 1;
          goto LABEL_64;
        }
        sprintf(v137, "%d", *(_DWORD *)(*(_DWORD *)v104 + 140));
        v86 = *(_WORD *)(v104 + 8) == 0;
      }
      else
      {
        sprintf(v137, "%d", *(_DWORD *)(*(_DWORD *)v104 + 144));
        v86 = *(_DWORD *)(v104 + 4) == 0;
      }
      if ( v86 )
        goto LABEL_63;
LABEL_64:
      if ( v112 == v1[v1[3089] + 4631] )
      {
        v87 = v1[5401];
        v88 = v1[8];
        v125 = v109;
        v127 = v70 + v87;
        v126 = v84 - 1;
        v89 = v1[7];
        v128 = *(signed __int16 *)(*(_DWORD *)(v88 + 2052) + 174) + v84;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v89 + 40))(
          *((unsigned __int16 *)dword_563908 + v85 + 100),
          &v125);
        v85 = 14;
      }
      v90 = *(_WORD *)(v104 + 8);
      if ( v90 > 0 )
      {
        sprintf(&v139, "%d", v90);
        sub_49AB80(
          v129,
          &v139,
          4,
          (_DWORD *)v1[7],
          v109,
          v84 + (*(signed __int16 *)(*(_DWORD *)(v1[8] + 2052) + 174) - *(signed __int16 *)(v129[513] + 174)) / 2,
          3,
          0);
      }
      sub_49B310((_DWORD *)v1[8], (char *)(*(_DWORD *)v104 + 72), v85, (_DWORD *)v1[7], v109 + 2, v84, 3, 0);
      sub_49AB80((int *)v1[8], v137, v85, (_DWORD *)v1[7], v1[5401] + v70 - 2, v84, 3, 0);
      v91 = *(signed __int16 *)(*(_DWORD *)(v1[8] + 2052) + 174) + v84;
      if ( !(v119 % 5) )
      {
        v92 = v1[5401];
        v93 = v1[7];
        v135 = v91 + 1;
        v134 = v70 + v92;
        v132 = v70;
        v133 = v91;
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v93 + 40))(*((unsigned __int16 *)dword_563908 + 92), &v132);
      }
      v104 += 12;
      ++v119;
      v84 = v91 + 2;
      ++v112;
    }
    while ( v112 < v117 );
  }
  v94 = v130;
  v95 = v130 * v1[5399];
  v122 = v70 + 1;
  v121 = v124;
  v123 = v124 + v95;
  v96 = v1[7];
  v120 = v70;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v96 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v120);
  v97 = v1[7];
  v120 = v1[5401] + v70 - 1;
  v122 = v120 + 1;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v97 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v120);
  v98 = v1[5401] + v70 - 1;
  v121 += v94 * v1[5399];
  v122 = v98;
  v99 = v1[7];
  v123 = v121 + 1;
  v120 = v70;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v99 + 40))(*((unsigned __int16 *)dword_563908 + 94), &v120);
  (*(void (**)(void))(*(_DWORD *)v1[7] + 96))();
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[7] + 68))(
           v1[7],
           0,
           0,
           -1,
           -1);
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40196F: using guessed type _DWORD __stdcall sub_40196F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401BE0: using guessed type _DWORD __stdcall sub_401BE0(_DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4025B8: using guessed type int __thiscall sub_4025B8(_DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);

//----- (0046A8F0) --------------------------------------------------------
int __thiscall sub_46A8F0(int (__stdcall ****this)(_DWORD, _DWORD, _DWORD, _DWORD), int a2, int a3, int a4, int a5)
{
  int (__stdcall ****v5)(_DWORD, _DWORD, _DWORD, _DWORD); // esi
  int result; // eax

  v5 = this;
  if ( this[5399] )
    result = (**this[5399])(a2, a3, a4, a5);
  if ( v5[3091] )
    result = (**v5[3091])(a2, a3, a4, a5);
  if ( v5[12] )
    result = (**v5[12])(a2, a3, a4, a5);
  return result;
}

//----- (0046A980) --------------------------------------------------------
signed int __thiscall sub_46A980(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ebp
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // edi
  int v8; // ecx
  int v9; // ecx
  int v10; // ebp
  signed int result; // eax

  v4 = a4;
  v5 = this;
  v6 = this[5399];
  v7 = a3;
  if ( v6 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v6 + 4))(a2, a3, a4);
  v8 = v5[3091];
  if ( v8 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v8 + 4))(a2, v7, v4);
  v9 = v5[12];
  if ( v9 )
    (*(void (__stdcall **)(int, int, int))(*(_DWORD *)v9 + 4))(a2, v7, v4);
  v10 = v5[9];
  result = (*(int (__stdcall **)(int, int, int *, int *))(*(_DWORD *)v5[8] + 4))(a2, v7, &a3, &a4);
  v5[9] = result;
  if ( v10 != result && (result == 3 || result == 4 || result == 5 || result == 6 || result == 8) )
    result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  return result;
}

//----- (0046AA50) --------------------------------------------------------
signed int __thiscall sub_46AA50(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int result; // eax
  int v3; // ecx
  int v4; // edi
  int v5; // ebx
  int v6; // edi
  int v7; // ecx
  _DWORD *v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // eax
  char Dest; // [esp+14h] [ebp-110h]
  int v13; // [esp+120h] [ebp-4h]

  v1 = this;
  result = sub_4025B8(dword_563908);
  if ( result )
  {
    if ( v1[4630] > 0 )
    {
      v4 = v1[3 * v1[v1[3089] + 4631] + 3094];
      v5 = sub_402676(*(_DWORD *)(v4 + 128));
      if ( v1[12] * *(_DWORD *)(v4 + 144) <= *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 60) )
      {
        v6 = sub_4025EA(*(_DWORD *)(v4 + 128));
        if ( v5 + v1[12] <= v6 )
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          v8 = dword_563908;
          if ( *((_DWORD *)dword_563908 + 355) )
          {
            v9 = *((_DWORD *)dword_563908 + 355);
            if ( v9 )
            {
              (*(void (__stdcall **)(signed int))(*(_DWORD *)v9 + 36))(1);
              v8 = dword_563908;
            }
            v8[355] = 0;
          }
          v13 = 0;
          if ( operator new(0x218u) )
          {
            v10 = sub_402617(0x71u);
            v11 = sub_40146A(*((_DWORD *)dword_563908 + 1519), v10, 1500, 1);
          }
          else
          {
            v11 = 0;
          }
          *((_DWORD *)dword_563908 + 355) = v11;
          result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)dword_56391C + 60))(
                     *(_DWORD *)(v1[3 * v1[v1[3089] + 4631] + 3094] + 128),
                     v1[12]);
        }
        else
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
          sprintf(&Dest, "You are only allowed to have %d of this item, meaning you can only buy %d more.", v6, v6 - v5);
          v7 = *((_DWORD *)dword_563908 + 1509);
          result = sub_40273E((char *)&Source, 5, (int)&Source, (int)&Dest, 0);
        }
      }
      else
      {
        result = sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
      }
    }
  }
  else
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
    v3 = *((_DWORD *)dword_563908 + 1509);
    result = sub_40273E(
               (char *)&Source,
               5,
               (int)&Source,
               (int)"You are not allowed to use the store from your current location.",
               0);
  }
  return result;
}
// 40146A: using guessed type _DWORD __stdcall sub_40146A(_DWORD, _DWORD, _DWORD, _DWORD);
// 4025B8: using guessed type int __thiscall sub_4025B8(_DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0046AD50) --------------------------------------------------------
signed int __thiscall sub_46AD50(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int result; // eax
  int v3; // ecx
  int v4; // edi
  int v5; // eax
  int v6; // ecx
  int v7; // ecx
  int v8; // ecx
  _DWORD *v9; // eax
  int v10; // ecx
  int v11; // eax
  int v12; // eax

  v1 = this;
  result = sub_4025B8(dword_563908);
  if ( result )
  {
    if ( v1[4630] > 0 )
    {
      v4 = v1[3 * v1[v1[3089] + 4631] + 3094];
      v5 = sub_402676(*(_DWORD *)(v4 + 128));
      if ( v5 )
      {
        if ( v1[12] <= v5 )
        {
          if ( *(_DWORD *)(v4 + 140) == -1 )
          {
            v8 = *((_DWORD *)dword_563908 + 1509);
            sub_40244B("Store will not buy back this item.", 0);
            result = sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
          }
          else
          {
            sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
            v9 = dword_563908;
            if ( *((_DWORD *)dword_563908 + 355) )
            {
              v10 = *((_DWORD *)dword_563908 + 355);
              if ( v10 )
              {
                (*(void (__stdcall **)(signed int))(*(_DWORD *)v10 + 36))(1);
                v9 = dword_563908;
              }
              v9[355] = 0;
            }
            if ( operator new(0x218u) )
            {
              v11 = sub_402617(0xB0u);
              v12 = sub_40146A(*((_DWORD *)dword_563908 + 1519), v11, 1500, 1);
            }
            else
            {
              v12 = 0;
            }
            *((_DWORD *)dword_563908 + 355) = v12;
            result = (*(int (__stdcall **)(_DWORD, int))(*(_DWORD *)dword_56391C + 60))(
                       *(_DWORD *)(v1[3 * v1[v1[3089] + 4631] + 3094] + 128),
                       -v1[12]);
          }
        }
        else
        {
          v7 = *((_DWORD *)dword_563908 + 1509);
          sub_40273E((char *)&Source, 5, (int)&Source, (int)"You do not have that many of this item to sell.", 0);
          result = sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
        }
      }
      else
      {
        v6 = *((_DWORD *)dword_563908 + 1509);
        sub_40273E((char *)&Source, 5, (int)&Source, (int)"You do not have any of this item to sell.", 0);
        result = sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
      }
    }
  }
  else
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 359), 0, 0, 0, 0);
    v3 = *((_DWORD *)dword_563908 + 1509);
    result = sub_40273E(
               (char *)&Source,
               5,
               (int)&Source,
               (int)"You are not allowed to use the store from your current location.",
               0);
  }
  return result;
}
// 40146A: using guessed type _DWORD __stdcall sub_40146A(_DWORD, _DWORD, _DWORD, _DWORD);
// 40244B: using guessed type _DWORD __stdcall sub_40244B(_DWORD, _DWORD);
// 4025B8: using guessed type int __thiscall sub_4025B8(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0046B080) --------------------------------------------------------
int __thiscall sub_46B080(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int result; // eax

  v5 = this;
  if ( this[5399] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[5399] + 12))(a2, a3, a4, a5);
  if ( v5[3091] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[3091] + 12))(a2, a3, a4, a5);
  if ( v5[12] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[12] + 12))(a2, a3, a4, a5);
  return result;
}

//----- (0046B110) --------------------------------------------------------
int __thiscall sub_46B110(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi
  int result; // eax

  v5 = this;
  if ( this[5399] )
    result = (*(int (__stdcall **)(int, int, int, int))(*this[5399] + 16))(a2, a3, a4, a5);
  if ( v5[3091] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[3091] + 16))(a2, a3, a4, a5);
  if ( v5[12] )
    result = (*(int (__stdcall **)(int, int, int, int))(*v5[12] + 16))(a2, a3, a4, a5);
  return result;
}

//----- (0046B1B0) --------------------------------------------------------
int __thiscall sub_46B1B0(_DWORD **this, int a2)
{
  _DWORD **v2; // esi
  int result; // eax

  v2 = this;
  if ( this[5400] )
    result = (*(int (__stdcall **)(int))(*this[5400] + 36))(a2);
  if ( v2[3092] )
    result = (*(int (__stdcall **)(int))(*v2[3092] + 36))(a2);
  if ( v2[13] )
    result = (*(int (__stdcall **)(int))(*v2[13] + 36))(a2);
  return result;
}

//----- (0046B210) --------------------------------------------------------
int __thiscall sub_46B210(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v5; // ecx
  int v6; // eax
  bool v7; // sf
  _DWORD *v8; // eax
  signed int v9; // eax
  int v10; // edx
  bool v11; // zf
  unsigned __int8 v12; // of
  signed int *v13; // edx
  int v14; // edx
  int v15; // esi
  int v16; // eax
  int v17; // ecx
  int v18; // eax
  int v19; // edi
  int v20; // edx
  int v21; // edx
  int v22; // esi
  int v23; // ecx

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      this[this[3087] + 5013] += a3;
      v6 = this[3087];
      v7 = this[v6 + 5013] < 0;
      v8 = &this[v6 + 5013];
      if ( v7 )
        *v8 = 0;
      v9 = this[4628] - this[5397] < 0 ? 0 : this[4628] - this[5397];
      v10 = this[3087];
      v12 = __OFSUB__(this[v10 + 5013], v9);
      v11 = this[v10 + 5013] == v9;
      v7 = this[v10 + 5013] - v9 < 0;
      v13 = &this[v10 + 5013];
      if ( !((unsigned __int8)(v7 ^ v12) | v11) )
        *v13 = v9;
      v14 = this[this[3087] + 5013];
      v15 = this[5397] + v14;
      v16 = this[4628];
      if ( v16 < v15 )
        v15 = this[4628];
      v17 = this[5398];
      result = sub_401C67(0, v16, v14, v15, 0);
    }
    else
    {
      result = a2 - 2;
      if ( a2 == 2 )
      {
        this[10] += a3;
        if ( this[10] < 1 )
          this[10] = 1;
        if ( this[10] > 200 )
          this[10] = 200;
        v4 = this[10];
        v5 = this[11];
        result = sub_401C67(-4, 205, v4 - 5, v4 + 5, 0);
      }
    }
  }
  else
  {
    v7 = a3 + this[3088] < 0;
    this[3088] += a3;
    if ( v7 )
      this[3088] = 0;
    v18 = this[3086];
    v19 = this[3089];
    v20 = (v18 - v19) & ((v18 - v19 < 0) - 1);
    if ( this[3088] > v20 )
      this[3088] = v20;
    v21 = this[3088];
    v22 = v19 + v21;
    if ( v18 < v19 + v21 )
      v22 = v18;
    v23 = this[3090];
    result = sub_401C67(0, v18, v21, v22, 0);
  }
  return result;
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0046B440) --------------------------------------------------------
int __thiscall sub_46B440(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void *v3; // edi
  void *v4; // edi
  void (__stdcall ***v5)(signed int); // ecx
  int v6; // ecx

  v1 = this;
  *this = &StoreScreen::`vftable';
  this[1] = &StoreScreen::`vftable';
  this[2] = &off_516458;
  v2 = (void *)this[13];
  if ( v2 )
  {
    sub_402040(v2);
    j__free(v2);
    v1[13] = 0;
  }
  v3 = (void *)v1[5400];
  if ( v3 )
  {
    sub_402040(v1[5400]);
    j__free(v3);
    v1[5400] = 0;
  }
  v4 = (void *)v1[3092];
  if ( v4 )
  {
    sub_402040(v1[3092]);
    j__free(v4);
    v1[3092] = 0;
  }
  v5 = (void (__stdcall ***)(signed int))v1[9];
  if ( v5 )
  {
    (**v5)(1);
    v1[9] = 0;
  }
  v6 = *((_DWORD *)dword_563908 + 1509);
  sub_401CCB(0);
  return sub_4027A2(v1);
}
// 401CCB: using guessed type _DWORD __stdcall sub_401CCB(_DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 516458: using guessed type int (__stdcall *off_516458)(int, int);
// 516464: using guessed type void *StoreScreen::`vftable';
// 516494: using guessed type void *StoreScreen::`vftable';

//----- (0046B560) --------------------------------------------------------
void __thiscall sub_46B560(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // ebx
  int v5; // eax
  int v6; // edi
  int v7; // ecx
  int v8; // eax
  int v9; // eax
  int v10; // eax
  _DWORD *v11; // ecx
  int v12; // eax
  int v13; // [esp+Ch] [ebp-4h]

  v2 = this;
  v3 = this[3089];
  v4 = 0;
  v13 = 0;
  if ( v3 == a2 )
    v13 = this[3 * this[v3 + 4631] + 3094];
  this[3089] = a2;
  this[4630] = 0;
  v5 = *((_DWORD *)dword_563908 + 1507);
  if ( *(_DWORD *)(v5 + 8000) > 0 )
  {
    do
    {
      v6 = *(_DWORD *)(v5 + 4 * v4);
      if ( *(_DWORD *)(v6 + 144) && !strcmp((const char *)(v6 + 104), (const char *)&v2[8 * (v2[3089] + 2)]) )
      {
        v2[3 * v2[4630] + 3094] = v6;
        if ( *((_DWORD *)dword_563908 + 6898) )
          v7 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060);
        else
          v7 = 0;
        v2[3 * v2[4630] + 3095] = sub_494C40(
                                    (void *)(v2[3 * v2[4630] + 3094] + 8),
                                    *((_DWORD *)dword_563908 + 78) + 60,
                                    v7);
        v8 = (int)&v2[3 * v2[4630]];
        if ( *(_DWORD *)(v8 + 12380) && (*(int (**)(void))(**(_DWORD **)(v8 + 12376) + 4))() == 15 )
        {
          if ( *((_DWORD *)dword_563908 + 6898) )
            v9 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 72) + 1060);
          else
            v9 = 0;
          v2[3 * v2[4630] + 3095] = sub_495320(
                                      *((_DWORD *)dword_563908 + 1507),
                                      v2[3 * v2[4630] + 3094],
                                      *((_DWORD *)dword_563908 + 78) + 60,
                                      v9);
        }
        LOWORD(v2[3 * (v2[4630] + 1032)]) = sub_402676(*(_DWORD *)(v2[3 * v2[4630] + 3094] + 128));
        ++v2[4630];
      }
      v5 = *((_DWORD *)dword_563908 + 1507);
      ++v4;
    }
    while ( v4 < *(_DWORD *)(v5 + 8000) );
  }
  if ( v2[11] )
    sub_48DD20(v2 + 3094, v2[4630], 0xCu, (int)&sub_401F14);
  else
    sub_48DD20(v2 + 3094, v2[4630], 0xCu, (int)&sub_401D66);
  if ( v13 )
  {
    v10 = 0;
    if ( v2[4630] > 0 )
    {
      v11 = v2 + 3094;
      while ( *v11 != v13 )
      {
        ++v10;
        v11 += 3;
        if ( v10 >= v2[4630] )
          goto LABEL_27;
      }
      v2[v2[3089] + 4631] = v10;
    }
  }
LABEL_27:
  if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
  {
    v12 = v2[v2[3089] + 4631];
    if ( v12 < v2[4630] )
      sub_4020D1(1, *(_DWORD *)(v2[3 * v12 + 3094] + 128));
  }
}
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);

//----- (0046B8B0) --------------------------------------------------------
int __thiscall sub_46B8B0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void *v3; // edi
  void *v4; // edi
  void *v5; // edi
  void (__stdcall ***v6)(signed int); // ecx
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  int v9; // ST20_4
  int v10; // ST1C_4
  int v11; // eax
  int v12; // edi
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // ST20_4
  void (__stdcall *v16)(_DWORD *); // eax
  _DWORD *v17; // ebp
  char *v18; // eax
  int v19; // eax
  int v20; // edi
  bool v21; // zf
  bool v22; // sf
  char *v23; // ebx
  int v24; // eax
  int v25; // ecx
  int v26; // eax
  int v27; // ebx
  int v28; // eax
  int v29; // edi
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // ST20_4
  void (__stdcall *v33)(_DWORD *); // eax
  int v34; // eax
  int v35; // ebx
  int v36; // ebx
  char *v37; // eax
  int v38; // edi
  _DWORD *v39; // ebp
  int v40; // ST1C_4
  int v41; // eax
  _DWORD *v42; // eax
  _DWORD *v43; // ST20_4
  void (__stdcall *v44)(_DWORD *); // eax
  char *v45; // eax
  int v46; // edi
  int v47; // eax
  int v48; // ebx
  int v49; // edi
  int v50; // eax
  int v51; // ebx
  int v52; // edx
  int v53; // ST20_4
  int v54; // edi
  int v55; // ebx
  int v56; // ebp
  _DWORD *v57; // eax
  _DWORD *v58; // eax
  _DWORD *v59; // ST20_4
  void (__stdcall *v60)(_DWORD *); // eax
  int v61; // edi
  _DWORD *v62; // eax
  _DWORD *v63; // eax
  _DWORD *v64; // ST20_4
  void (__stdcall *v65)(_DWORD *); // eax
  int v66; // edi
  _DWORD *v67; // ebp
  char *v68; // eax
  int v69; // ebx
  int v70; // ebx
  _DWORD *v71; // eax
  _DWORD *v72; // eax
  _DWORD *v73; // ST20_4
  void (__stdcall *v74)(_DWORD *); // eax
  char *v75; // eax
  int v76; // ebx
  unsigned int v77; // eax
  int v78; // ebx
  _DWORD *v79; // eax
  _DWORD *v80; // eax
  _DWORD *v81; // ST20_4
  void (__stdcall *v82)(_DWORD *); // eax
  _DWORD *v83; // eax
  _DWORD *v84; // eax
  _DWORD *v85; // ST20_4
  void (__stdcall *v86)(_DWORD *); // eax
  int v87; // eax
  void (__thiscall **v88)(int (__thiscall ***)(_DWORD, signed int, _DWORD), signed int, _DWORD); // edx
  void (__thiscall *v89)(int (__thiscall ***)(_DWORD, signed int, _DWORD), signed int, _DWORD); // eax
  int (__thiscall ***v90)(_DWORD, signed int, _DWORD); // esi
  int v92; // [esp+18h] [ebp-30h]
  int v93; // [esp+1Ch] [ebp-2Ch]
  int v94; // [esp+20h] [ebp-28h]
  int v95; // [esp+24h] [ebp-24h]
  int v96; // [esp+28h] [ebp-20h]
  int v97; // [esp+2Ch] [ebp-1Ch]
  int v98; // [esp+30h] [ebp-18h]
  int v99; // [esp+34h] [ebp-14h]
  void *v100; // [esp+38h] [ebp-10h]
  int v101; // [esp+44h] [ebp-4h]
  _DWORD *v102; // [esp+4Ch] [ebp+4h]
  void *v103; // [esp+4Ch] [ebp+4h]

  v2 = this;
  sub_401A87(this[3089]);
  if ( a2 )
  {
    v2[3] = *a2;
    v2[4] = a2[1];
    v2[5] = a2[2];
    v2[6] = a2[3];
  }
  v3 = (void *)v2[13];
  if ( v3 )
  {
    sub_402040(v2[13]);
    j__free(v3);
    v2[13] = 0;
  }
  v4 = (void *)v2[5400];
  if ( v4 )
  {
    sub_402040(v2[5400]);
    j__free(v4);
    v2[5400] = 0;
  }
  v5 = (void *)v2[3092];
  if ( v5 )
  {
    sub_402040(v2[3092]);
    j__free(v5);
    v2[3092] = 0;
  }
  v6 = (void (__stdcall ***)(signed int))v2[9];
  if ( v6 )
  {
    (**v6)(1);
    v2[9] = 0;
  }
  v99 = v2[5] - v2[3];
  v94 = v2[6] - v2[4];
  v7 = operator new(0x420u);
  v101 = 0;
  if ( v7 )
    v8 = sub_49A5F0(v7, 1, v2 + 3, 0);
  else
    v8 = 0;
  v2[9] = v8;
  v9 = *((signed __int16 *)dword_563908 + 15401);
  v10 = *((signed __int16 *)dword_563908 + 15400);
  v101 = -1;
  v11 = sub_402617(0x23u);
  sub_401F32(&v92, &v93, v11, v10, v9);
  v12 = v2[5] - v92 - 12;
  v13 = operator new(0x18u);
  v101 = 1;
  if ( v13 )
    v14 = sub_49A490(v13, v12, 11, v92, v93, 6);
  else
    v14 = 0;
  v15 = v14;
  v16 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v16(v15);
  v17 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
  v102 = (_DWORD *)*((_DWORD *)dword_563908 + 1519);
  v95 = *(signed __int16 *)(v17[513] + 174);
  v18 = (char *)sub_402617(0x69u);
  v19 = sub_49AD40(v17, v18);
  v20 = 0;
  v21 = v2[3088] == 0;
  v22 = v2[3088] < 0;
  v2[3093] = v19 + 8;
  if ( !v22 && !v21 )
  {
    v23 = (char *)(v2 + 16);
    do
    {
      v24 = sub_49AD40((_DWORD *)v2[8], v23);
      if ( v24 > v2[3093] )
        v2[3093] = v24;
      ++v20;
      v23 += 32;
    }
    while ( v20 < v2[3088] );
  }
  v2[3093] += 4;
  v25 = v2[8];
  v26 = abs(*(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 515) + 360) + 18));
  v27 = v26 + 44;
  v96 = v26;
  v28 = (v94 - (v26 + 44) - 50) / (*(signed __int16 *)(*(_DWORD *)(v25 + 2052) + 174) + 2);
  v98 = v27;
  if ( v28 < 1 )
    v28 = 1;
  v2[3091] = v28;
  v29 = v28 * (*(signed __int16 *)(*(_DWORD *)(v25 + 2052) + 174) + 2);
  v97 = v28 * (*(signed __int16 *)(*(_DWORD *)(v25 + 2052) + 174) + 2);
  v30 = operator new(0x18u);
  v100 = v30;
  v101 = 2;
  if ( v30 )
    v31 = sub_49A490(v30, 16, v27, v2[3093], v29, 1);
  else
    v31 = 0;
  v32 = v31;
  v33 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v33(v32);
  v100 = operator new(0x7Cu);
  v101 = 3;
  if ( v100 )
    v34 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 0, v2 + 2, v2[7], 0, v2[3093] + 16, v27, v29, 1);
  else
    v34 = 0;
  v35 = v94;
  v101 = -1;
  v2[3092] = v34;
  v36 = v35 - 43;
  v37 = (char *)sub_402617(0x6Eu);
  v38 = sub_49AD40(v17, v37);
  v39 = operator new(0x18u);
  v100 = v39;
  v101 = 4;
  if ( v39 )
  {
    v40 = v95;
    v41 = sub_49AD40(v102, (char *)&unk_5116A4);
    v42 = sub_49A490(v39, 16, v36, v38 + v41, v40, 7);
  }
  else
  {
    v42 = 0;
  }
  v43 = v42;
  v44 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v44(v43);
  v45 = (char *)sub_402617(0x6Fu);
  v46 = sub_49AD40(v102, v45) + v38;
  v47 = sub_49AD40(v102, "000  000000");
  v48 = v95 + v36;
  v49 = v47 + v46;
  v100 = operator new(0x7Cu);
  v101 = 5;
  if ( v100 )
    v50 = sub_401BAE(*((_DWORD *)dword_563908 + 499), 2, v2 + 2, v2[7], 1, 16, v48, v49, 1);
  else
    v50 = 0;
  v51 = v94;
  v2[13] = v50;
  v52 = *((signed __int16 *)dword_563908 + 15400);
  v53 = *((signed __int16 *)dword_563908 + 15401);
  v101 = -1;
  v54 = v49 + 24;
  v55 = v51 - 38;
  sub_401F32(&v92, &v93, &unk_5116A8, v52, v53);
  v56 = v92;
  v57 = operator new(0x18u);
  v100 = v57;
  v101 = 6;
  if ( v57 )
    v58 = sub_49A490(v57, v54, v55, v92, v93, 5);
  else
    v58 = 0;
  v59 = v58;
  v60 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v60(v59);
  if ( v2[14] )
  {
    v61 = v54 + v56 + 16;
    sub_401F32(&v92, &v93, "Sell", *((signed __int16 *)dword_563908 + 15400), *((signed __int16 *)dword_563908 + 15401));
    v62 = operator new(0x18u);
    v100 = v62;
    v101 = 7;
    if ( v62 )
      v63 = sub_49A490(v62, v61, v55, v92, v93, 8);
    else
      v63 = 0;
    v64 = v63;
    v65 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
    v101 = -1;
    v65(v64);
  }
  v66 = v2[3093] + 46;
  v2[5401] = v99 - v66 - 31;
  v67 = (_DWORD *)*((_DWORD *)dword_563908
                  + (*((_DWORD *)dword_563918 + 2342) - 1 < 0 ? 0 : *((_DWORD *)dword_563918 + 2342) - 1)
                  + 1516);
  v68 = (char *)sub_402617(0x6Au);
  v69 = sub_49AD40(v102, v68);
  v70 = sub_49AB50(v67, "00000") + v69;
  v71 = operator new(0x18u);
  v100 = v71;
  v101 = 8;
  if ( v71 )
    v72 = sub_49A490(v71, v66, 40, v70, v96, 3);
  else
    v72 = 0;
  v73 = v72;
  v74 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v74(v73);
  v75 = (char *)sub_402617(0x6Bu);
  v76 = sub_49AD40(v102, v75);
  if ( v76 <= (signed int)sub_49AB50((_DWORD *)v2[8], "0000000") )
    v77 = sub_49AB50((_DWORD *)v2[8], "0000000");
  else
    v77 = v76;
  v78 = v77 + 4;
  v79 = operator new(0x18u);
  v101 = 9;
  if ( v79 )
    v80 = sub_49A490(v79, v2[5401] + v66 - v78, 40, v78, v96, 4);
  else
    v80 = 0;
  v81 = v80;
  v82 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v82(v81);
  v2[5399] = v2[3091];
  v83 = operator new(0x18u);
  v101 = 10;
  if ( v83 )
    v84 = sub_49A490(v83, v66, v98, v2[5401], v97, 2);
  else
    v84 = 0;
  v85 = v84;
  v86 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[9] + 16);
  v101 = -1;
  v86(v85);
  v103 = operator new(0x7Cu);
  v101 = 11;
  if ( v103 )
    v87 = sub_401BAE(*((_DWORD *)dword_563908 + 503), 1, v2 + 2, v2[7], 0, v66 + v2[5401], v98, v97, 1);
  else
    v87 = 0;
  v88 = (void (__thiscall **)(int (__thiscall ***)(_DWORD, signed int, _DWORD), signed int, _DWORD))v2[2];
  v2[5400] = v87;
  v89 = *v88;
  v90 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v2 + 2);
  v101 = -1;
  v89(v90, 2, 0);
  (**v90)(v90, 0, 0);
  return (**v90)(v90, 1, 0);
}
// 401A87: using guessed type _DWORD __stdcall sub_401A87(_DWORD);
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);

//----- (0046C180) --------------------------------------------------------
signed int __thiscall sub_46C180(_DWORD *this, signed int a2, int a3)
{
  _DWORD *v3; // esi
  bool v4; // zf
  signed int result; // eax
  int v6; // edi
  _DWORD *v7; // ecx
  int v8; // eax
  int v9; // eax
  int v10; // ecx
  int v11; // edi
  int v12; // eax
  int v13; // ecx
  bool v14; // sf
  unsigned __int8 v15; // of
  _DWORD *v16; // eax
  int v17; // ecx
  int v18; // ecx
  int v19; // edx
  int v20; // eax
  int v21; // eax
  int v22; // ecx

  v3 = this;
  if ( *((_DWORD *)dword_56390C + 1548) || *((_DWORD *)dword_56390C + 1549) || *((_DWORD *)dword_56390C + 1569) )
    return sub_4025E5(this - 1);
  v4 = (unsigned __int16)(GetKeyState(16) & 0x8000) == 0;
  result = a2;
  if ( v4 )
  {
    switch ( a2 )
    {
      case 27:
        if ( v3[14] )
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          result = (signed int)dword_563908;
          *((_DWORD *)dword_563908 + 1535) = *((_DWORD *)dword_563908 + 1499);
          if ( v3 != (_DWORD *)4 )
            result = (*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        else
        {
          sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
          if ( operator new(0x2Cu) )
            v11 = sub_401591(*((_DWORD *)dword_563908 + 89), v3 + 2);
          else
            v11 = 0;
          result = sub_401154(6);
          *((_DWORD *)dword_563908 + 1535) = v11;
          if ( v3 != (_DWORD *)4 )
            result = (*(int (__stdcall **)(signed int))(*(v3 - 1) + 4))(1);
        }
        return result;
      case 35:
        v3[v3[3088] + 4630] = v3[4629] - 1;
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        break;
      case 36:
        v3[v3[3088] + 4630] = 0;
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        break;
      case 37:
        (*(void (__thiscall **)(_DWORD *, signed int, signed int))v3[1])(v3 + 1, 2, -1);
        break;
      case 38:
        --v3[v3[3088] + 4630];
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        break;
      case 39:
        (*(void (__thiscall **)(_DWORD *, signed int, signed int))v3[1])(v3 + 1, 2, 1);
        break;
      case 40:
        ++v3[v3[3088] + 4630];
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        break;
      default:
        break;
    }
    v12 = v3[3088];
    v13 = v3[4629];
    v15 = __OFSUB__(v3[v12 + 4630], v13);
    v14 = v3[v12 + 4630] - v13 < 0;
    v16 = &v3[v12 + 4630];
    if ( !(v14 ^ v15) )
      *v16 = v13 - 1;
    v17 = v3[3088];
    if ( v3[v17 + 4630] < 0 )
      v3[v17 + 4630] = 0;
    v18 = v3[3088];
    v19 = v3[5398];
    v20 = v3[v18 + 4630];
    if ( v20 >= v19 + v3[v18 + 5014] )
      v3[v18 + 5014] = v20 - v19 + 1 < 0 ? 0 : v20 - v19 + 1;
    v21 = v3[3088];
    v22 = v3[v21 + 4630];
    if ( v22 < v3[v21 + 5014] )
      v3[v21 + 5014] = v22;
    (*(void (__thiscall **)(_DWORD *, signed int, _DWORD))v3[1])(v3 + 1, 1, 0);
    result = (signed int)dword_563908;
    if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
    {
      result = v3[v3[3088] + 4630];
      if ( result < v3[4629] )
        result = sub_4020D1(1, *(_DWORD *)(v3[3 * result + 3093] + 128));
    }
  }
  else
  {
    switch ( a2 )
    {
      case 35:
        v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        v6 = v3[3087] - 1;
        goto LABEL_12;
      case 36:
        v6 = 0;
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        goto LABEL_13;
      case 38:
        result = v3[3088];
        if ( result <= 0 )
          return result;
        v6 = result - 1;
        v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
        goto LABEL_12;
      case 40:
        result = v3[3088];
        v6 = result + 1;
        if ( result + 1 < v3[3087] )
        {
          v7 = (_DWORD *)*((_DWORD *)dword_563908 + 362);
LABEL_12:
          result = sub_4A7120(v7, 0, 0, 0, 0);
          if ( v6 != -1 )
          {
LABEL_13:
            v8 = v3[3087];
            if ( v6 > v8 )
              v6 = v8 - 1;
            if ( v6 < 0 )
              v6 = 0;
            sub_401A87(v6);
            v9 = v3[3090];
            v10 = v3[3088];
            if ( v10 >= v9 + v3[3089] )
              v3[3089] = v10 - v9 + 1 < 0 ? 0 : v10 - v9 + 1;
            if ( v10 < v3[3089] )
              v3[3089] = v10;
            result = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD))v3[1])(v3 + 1, 0, 0);
          }
        }
        break;
      default:
        return result;
    }
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 401A87: using guessed type _DWORD __stdcall sub_401A87(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 4025E5: using guessed type int __thiscall sub_4025E5(_DWORD);

//----- (0046C750) --------------------------------------------------------
int __thiscall sub_46C750(_DWORD *this, int a2, int a3, int a4, void *a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // ebp
  int v8; // edi
  int v9; // ecx
  int v10; // ecx
  int result; // eax
  int v12; // edi
  int v13; // ebx
  int v14; // eax
  int (__thiscall **v15)(int, signed int, _DWORD); // edx
  int v16; // ST28_4
  int v17; // edi
  int v18; // edi
  int v19; // edi
  bool v20; // zf

  v5 = this;
  v6 = this[5399];
  v7 = a4;
  v8 = a3;
  if ( v6 )
    (*(void (__stdcall **)(int, int, int, void *))(*(_DWORD *)v6 + 8))(a2, a3, a4, a5);
  v9 = v5[3091];
  if ( v9 )
    (*(void (__stdcall **)(int, int, int, void *))(*(_DWORD *)v9 + 8))(a2, v8, v7, a5);
  v10 = v5[12];
  if ( v10 )
    (*(void (__stdcall **)(int, int, int, void *))(*(_DWORD *)v10 + 8))(a2, v8, v7, a5);
  result = (*(int (__stdcall **)(int, int, int *, int *))(*(_DWORD *)v5[8] + 4))(a2, v8, &a3, &a4);
  v5[9] = result;
  switch ( result )
  {
    case 1:
      result = a4 / (*(signed __int16 *)(*(_DWORD *)(v5[7] + 2052) + 174) + 2);
      v18 = v5[3089] + result;
      if ( v18 < v5[3087] )
      {
        sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        result = sub_401A87(v18);
      }
      break;
    case 2:
      result = a4 / (*(signed __int16 *)(*(_DWORD *)(v5[7] + 2052) + 174) + 2);
      v19 = v5[v5[3088] + 5014] + result;
      if ( v19 < v5[4629] )
      {
        result = sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
        v20 = a5 == 0;
        v5[v5[3088] + 4630] = v19;
        if ( v20 && *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
          result = sub_4020D1(1, *(_DWORD *)(v5[3 * v19 + 3093] + 128));
      }
      break;
    case 3:
    case 4:
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      v16 = v5[3088];
      v5[10] = v5[9] == 4;
      result = sub_401A87(v16);
      break;
    case 5:
      result = sub_4025E5(v5 - 1);
      break;
    case 6:
      sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
      a5 = operator new(0x2Cu);
      if ( a5 )
        v17 = sub_401591(*((_DWORD *)dword_563908 + 89), v5 + 2);
      else
        v17 = 0;
      sub_401154(6);
      result = (int)dword_563908;
      *((_DWORD *)dword_563908 + 1535) = v17;
      if ( v5 != (_DWORD *)4 )
        result = (*(int (__stdcall **)(signed int))(*(v5 - 1) + 4))(1);
      break;
    case 7:
      result = v5[v5[3088] + 4630] + 1031;
      v12 = v5[3 * result];
      if ( v12 )
      {
        v13 = sub_402676(*(_DWORD *)(v12 + 128));
        v14 = sub_4025EA(*(_DWORD *)(v12 + 128));
        v15 = (int (__thiscall **)(int, signed int, _DWORD))v5[1];
        v5[11] = v14 - v13;
        result = (*v15)((int)(v5 + 1), 2, 0);
      }
      break;
    case 8:
      result = sub_401294(v5 - 1);
      break;
    default:
      return result;
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401294: using guessed type int __thiscall sub_401294(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);
// 401A87: using guessed type _DWORD __stdcall sub_401A87(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 4025E5: using guessed type int __thiscall sub_4025E5(_DWORD);
// 4025EA: using guessed type _DWORD __stdcall sub_4025EA(_DWORD);
// 402676: using guessed type _DWORD __stdcall sub_402676(_DWORD);

//----- (0046CB00) --------------------------------------------------------
int __thiscall sub_46CB00(const char *this, int a2)
{
  int result; // eax
  const char *v3; // esi
  int v4; // ebp
  int v5; // edi
  const char *v6; // ebx
  void (__thiscall *v7)(const char *, _DWORD, _DWORD); // edx
  _DWORD *v8; // ecx

  result = abs(a2);
  v3 = this;
  if ( result <= 5100 )
  {
    v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * result + 8008);
    if ( v4 )
    {
      v5 = 0;
      if ( *((_DWORD *)this + 3088) > 0 )
      {
        v6 = this + 64;
        while ( 1 )
        {
          result = strcmp(v6, (const char *)(v4 + 104));
          if ( !result )
          {
            sub_401A87(v5);
            v7 = (void (__thiscall *)(const char *, _DWORD, _DWORD))**((_DWORD **)v3 + 2);
            *((_DWORD *)v3 + 3089) = v5;
            *((_DWORD *)v3 + 3090) = v5;
            v7(v3 + 8, 0, 0);
            result = 0;
            if ( *((_DWORD *)v3 + 4630) > 0 )
              break;
          }
LABEL_10:
          ++v5;
          v6 += 32;
          if ( v5 >= *((_DWORD *)v3 + 3088) )
            return result;
        }
        v8 = v3 + 12376;
        while ( *v8 != v4 )
        {
          ++result;
          v8 += 3;
          if ( result >= *((_DWORD *)v3 + 4630) )
            goto LABEL_10;
        }
        *(_DWORD *)&v3[4 * *((_DWORD *)v3 + 3089) + 18524] = result;
        *(_DWORD *)&v3[4 * *((_DWORD *)v3 + 3089) + 20060] = result;
        (**((void (__thiscall ***)(int, signed int, _DWORD))v3 + 2))((int)(v3 + 8), 1, 0);
        result = (int)dword_563908;
        if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 1509) + 24) == 1 )
          result = sub_4020D1(1, *(_DWORD *)(v4 + 128));
      }
    }
  }
  return result;
}
// 401A87: using guessed type _DWORD __stdcall sub_401A87(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);

//----- (0046CC80) --------------------------------------------------------
const char *__thiscall sub_46CC80(char *this, int a2, int a3, int a4)
{
  const char *v4; // esi
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // ebp
  const char *v9; // edi
  int v10; // eax
  char *v11; // ecx
  char *v12; // eax
  char v13; // dl
  int v14; // ecx
  int i; // [esp+28h] [ebp+4h]
  const char *v17; // [esp+2Ch] [ebp+8h]

  v4 = this;
  *((_DWORD *)this + 1) = &InputTarget::`vftable';
  *((_DWORD *)this + 2) = &off_511698;
  *((_DWORD *)this + 7) = a3;
  *(_DWORD *)this = &StoreScreen::`vftable';
  *((_DWORD *)this + 1) = &StoreScreen::`vftable';
  *((_DWORD *)this + 2) = &off_516458;
  *((_DWORD *)this + 15) = a2;
  *((_DWORD *)this + 8) = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 5400) = 0;
  *((_DWORD *)this + 3092) = 0;
  *((_DWORD *)this + 13) = 0;
  *((_DWORD *)this + 10) = 0;
  *((_DWORD *)this + 12) = 1;
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 3088) = 0;
  v5 = *((_DWORD *)dword_563908 + 1507);
  v6 = 0;
  for ( i = 0; v6 < *(_DWORD *)(v5 + 8000); i = v6 )
  {
    v7 = *(_DWORD *)(v5 + 4 * v6);
    if ( *(_BYTE *)(v7 + 104) != 35 && *(_DWORD *)(v7 + 144) )
    {
      if ( *(_DWORD *)(v7 + 140) >= 0 )
        *((_DWORD *)v4 + 14) = 1;
      v8 = 0;
      if ( *((_DWORD *)v4 + 3088) > 0 )
      {
        v17 = (const char *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v6) + 104);
        v9 = v4 + 64;
        do
        {
          if ( !strcmp(v17, v9) )
            break;
          ++v8;
          v9 += 32;
        }
        while ( v8 < *((_DWORD *)v4 + 3088) );
        v6 = i;
      }
      v10 = *((_DWORD *)v4 + 3088);
      if ( v8 == v10 )
      {
        v11 = (char *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v6) + 104);
        v12 = (char *)&v4[32 * (v10 + 2)];
        do
        {
          v13 = *v11;
          *v12++ = *v11++;
        }
        while ( v13 );
        ++*((_DWORD *)v4 + 3088);
        v6 = i;
      }
    }
    v5 = *((_DWORD *)dword_563908 + 1507);
    ++v6;
  }
  sub_48DD20((void *)(v4 + 64), *((_DWORD *)v4 + 3088), 0x20u, (int)&sub_401910);
  *((_DWORD *)v4 + 3089) = -1;
  *((_DWORD *)v4 + 3090) = 0;
  *((_DWORD *)v4 + 11) = 0;
  memset((void *)(v4 + 18524), 0, 0x600u);
  memset((void *)(v4 + 20060), 0, 0x600u);
  sub_401A87(0);
  sub_402077(a4);
  if ( *((_DWORD *)v4 + 4630) > 0 )
  {
    v14 = *((_DWORD *)dword_563908 + 1509);
    sub_4020D1(1, *(_DWORD *)(*((_DWORD *)v4 + 3094) + 128));
  }
  return v4;
}
// 401A87: using guessed type _DWORD __stdcall sub_401A87(_DWORD);
// 402077: using guessed type _DWORD __stdcall sub_402077(_DWORD);
// 4020D1: using guessed type _DWORD __stdcall sub_4020D1(_DWORD, _DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 516458: using guessed type int (__stdcall *off_516458)(int, int);
// 516464: using guessed type void *StoreScreen::`vftable';
// 516494: using guessed type void *StoreScreen::`vftable';

//----- (0046CF60) --------------------------------------------------------
void *__thiscall sub_46CF60(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_401208();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 401208: using guessed type int sub_401208(void);

//----- (0046CF90) --------------------------------------------------------
_BYTE *__cdecl sub_46CF90(const char *a1)
{
  const char *v1; // esi
  _BYTE *v2; // eax
  _BYTE *v3; // edx
  char v4; // cl

  v1 = a1;
  v2 = malloc(strlen(a1) + 1);
  v3 = v2;
  do
  {
    v4 = *v1;
    *v2++ = *v1++;
  }
  while ( v4 );
  return v3;
}

//----- (0046CFF0) --------------------------------------------------------
int __thiscall sub_46CFF0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  bool v3; // zf
  bool v4; // sf

  v1 = this;
  v2 = 0;
  v3 = this[2] == 0;
  v4 = this[2] < 0;
  *this = &off_5164D0;
  if ( !v4 && !v3 )
  {
    do
      free(*(void **)(v1[1] + 4 * v2++));
    while ( v2 < v1[2] );
  }
  return sub_48C990(v1[1], 0, 1);
}
// 5164D0: using guessed type int (__stdcall *off_5164D0)(int, int, int);

//----- (0046D040) --------------------------------------------------------
void __thiscall sub_46D040(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // eax
  int v3; // ecx
  int v4; // eax

  v1 = this;
  if ( this[2] > 0 )
  {
    *((_DWORD *)dword_563918 + 2269) = (*((_DWORD *)dword_563918 + 2269) + 100 * this[2]) % this[2];
    v2 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 355) )
    {
      v3 = *((_DWORD *)dword_563908 + 355);
      if ( v3 )
      {
        (*(void (__stdcall **)(signed int))(*(_DWORD *)v3 + 36))(1);
        v2 = dword_563908;
      }
      v2[355] = 0;
    }
    if ( operator new(0x1644u) )
      v4 = sub_402504(
             "Tip of the Day",
             *((_DWORD *)dword_563908 + 1518),
             v1,
             *(_DWORD *)(v1[1] + 4 * *((_DWORD *)dword_563918 + 2269)),
             "Previous,Next,Close,Don't Show Again",
             0,
             0,
             3 * *(_DWORD *)(*((_DWORD *)dword_563908 + 89) + 4) / 4,
             5);
    else
      v4 = 0;
    *((_DWORD *)dword_563908 + 355) = v4;
    ++*((_DWORD *)dword_563918 + 2269);
  }
}
// 402504: using guessed type _DWORD __stdcall sub_402504(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0046D1A0) --------------------------------------------------------
_DWORD *__thiscall sub_46D1A0(_DWORD *this, char *Filename)
{
  _DWORD *v2; // edi
  FILE *v3; // eax
  FILE *v4; // esi
  _BYTE *v5; // eax
  int *v6; // esi
  _BYTE *v7; // eax
  _BYTE *v8; // edx
  char v9; // cl
  FILE *v11; // [esp+Ch] [ebp-808h]
  char v12[2048]; // [esp+10h] [ebp-804h]

  v2 = this;
  *this = &off_5164D0;
  this[2] = 0;
  this[1] = 0;
  v3 = fopen(Filename, "rt");
  v4 = v3;
  v11 = v3;
  if ( v3 )
  {
    if ( !feof(v3) )
    {
      do
      {
        v12[0] = 0;
        v5 = (_BYTE *)sub_4C352E((int)v12, 2048, v4);
        if ( v5 )
        {
          if ( *v5 )
          {
            while ( *v5 >= 32 )
            {
              if ( !*++v5 )
                goto LABEL_9;
            }
            *v5 = 0;
          }
LABEL_9:
          v2[1] = sub_48C990(v2[1], 4 * ++v2[2], 256);
          v6 = (int *)v12;
          v7 = malloc(strlen(v12) + 1);
          v8 = v7;
          do
          {
            v9 = *(_BYTE *)v6;
            *v7 = *(_BYTE *)v6;
            v6 = (int *)((char *)v6 + 1);
            ++v7;
          }
          while ( v9 );
          v4 = v11;
          *(_DWORD *)(v2[1] + 4 * v2[2] - 4) = v8;
        }
      }
      while ( !feof(v4) );
    }
    fclose(v4);
  }
  return v2;
}
// 5164D0: using guessed type int (__stdcall *off_5164D0)(int, int, int);

//----- (0046D320) --------------------------------------------------------
void *__thiscall sub_46D320(void *this, int a1, int a2, int a3)
{
  void *result; // eax

  if ( !a3 )
  {
    *((_DWORD *)dword_563918 + 2269) -= 2;
    return (void *)sub_40168B(this);
  }
  if ( a3 == 1 )
    return (void *)sub_40168B(this);
  result = (void *)(a3 - 3);
  if ( a3 == 3 )
  {
    result = dword_563918;
    *((_DWORD *)dword_563918 + 2268) = 0;
  }
  return result;
}
// 40168B: using guessed type int __thiscall sub_40168B(_DWORD);

//----- (0046D370) --------------------------------------------------------
BOOL __thiscall sub_46D370(_DWORD *this, int a2)
{
  int v2; // ebp
  _DWORD *v3; // edi
  int v4; // ecx
  signed int v5; // eax
  int v6; // esi
  int v7; // ebx
  int v8; // eax

  v2 = a2;
  v3 = this;
  v4 = this[3];
  if ( a2 > *(_DWORD *)(v4 + 612) - v3[8] )
    v2 = *(_DWORD *)(v4 + 612) - v3[8];
  if ( !v3[10] )
  {
    v5 = *(signed __int16 *)(v4 + 628);
    if ( v5 >= 0 )
    {
      if ( v5 <= 1 )
      {
        v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v3[9] + 4);
        if ( v6 )
        {
          v7 = (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 168))(v6);
          v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 172))(v6);
          if ( v7 <= 0 )
            return 1;
          if ( v7 + v2 * v3[7] < v8 )
            v8 = v7 + v2 * v3[7];
          if ( v8 > 0 )
          {
            (*(void (__thiscall **)(int, int))(*(_DWORD *)v6 + 176))(v6, v8);
          }
          else if ( *(_WORD *)(v3[3] + 624) )
          {
            if ( v6 == *((_DWORD *)dword_563908 + 6898) )
            {
              (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)v6 + 236))(v6, v3[4], v3[5]);
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 176))(v6, 0);
            }
          }
          else
          {
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v6 + 176))(v6, 1);
          }
        }
      }
      else if ( v5 == 2 )
      {
        sub_401992(v2 * v3[7]);
      }
    }
  }
  v3[8] += v2;
  return v3[8] == *(_DWORD *)(v3[3] + 612);
}
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);

//----- (0046D4F0) --------------------------------------------------------
int __thiscall sub_46D4F0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int result; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // ebx
  _DWORD *v9; // edi
  int v10; // ST1C_4
  int v11; // ST18_4
  int v12; // ST10_4
  int v13; // eax
  int v14; // [esp+8h] [ebp-8h]
  int v15; // [esp+Ch] [ebp-4h]

  v4 = this;
  result = this[3];
  if ( *(_DWORD *)(result + 744) )
  {
    result = *((_DWORD *)dword_563908 + 1503);
    v6 = *(_DWORD *)(result + 4 * this[9] + 4);
    if ( v6 )
    {
      (*(void (__stdcall **)(int *, int *))(*(_DWORD *)v6 + 32))(&v15, &v14);
      v7 = v4[3];
      v8 = v14 + 4;
      v14 += 4;
      v15 += *(signed __int16 *)(*(_DWORD *)(v7 + 744) + 172) / -2;
      result = v15;
      if ( v15 >= -64 && v15 <= *(_DWORD *)(a2 + 4) && v8 >= -64 && v8 <= *(_DWORD *)(a2 + 8) )
      {
        v9 = (_DWORD *)v4[3];
        v10 = v9[171];
        v11 = v9[187];
        v12 = v15;
        v13 = sub_401B59(0, v4[8], *(signed __int16 *)(v9[186] + 170));
        result = sub_4A50B0(v9[186], v13, a2, v12, v8, v11, v10, 0, 0, 0);
      }
    }
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);

//----- (0046D600) --------------------------------------------------------
_DWORD *__thiscall sub_46D600(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  _DWORD *v7; // ST28_4
  int v8; // edx
  int v9; // ecx
  signed int v10; // eax
  int v11; // eax
  _DWORD *v12; // edi
  int *v13; // ecx
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  signed int v17; // ecx

  v6 = this;
  v7 = this;
  v8 = a4;
  v9 = a6;
  v7[4] = a5;
  v6[10] = v8;
  v6[5] = v9;
  v10 = abs(a2);
  *v6 = &off_516508;
  v6[7] = 0;
  v6[9] = a3;
  v6[8] = 0;
  if ( v10 <= 5100 )
    v11 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v10 + 8008);
  else
    v11 = 0;
  v6[3] = v11;
  if ( v11 )
  {
    v12 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * a3 + 4);
    if ( v12 )
    {
      (*(void (__thiscall **)(_DWORD *, int *, int *, int *))(*v12 + 84))(v12, &a6, &a5, &a4);
      v13 = *(int **)(v6[3] + 752);
      if ( v13 )
        sub_4A6E90(v13, a6 / 10000, a5 / 10000, 0, 0, 0, 0, 0);
      if ( !v6[10] )
      {
        v14 = v6[3];
        v15 = 0;
        if ( *(_WORD *)(v14 + 628) )
        {
          if ( *(_WORD *)(v14 + 628) != 1 )
          {
            if ( *(_WORD *)(v14 + 628) != 2 || v6[9] >= 5001 )
              goto LABEL_19;
            v16 = (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2677)))
                / 1000;
            goto LABEL_18;
          }
          if ( v6[9] >= 5001 )
          {
LABEL_17:
            v16 = *(_DWORD *)(v12[18] + 1080);
LABEL_18:
            v15 = 1000 * *(_DWORD *)(v14 + 616) + *(_DWORD *)(v14 + 620) * v16;
            goto LABEL_19;
          }
        }
        else if ( v6[9] < 5001 )
        {
          goto LABEL_17;
        }
LABEL_19:
        v17 = *(_DWORD *)(v14 + 612);
        if ( v17 < 1 )
          v17 = 1;
        v6[7] = v15 / v17;
        return v6;
      }
    }
  }
  return v6;
}
// 516508: using guessed type int (__thiscall *off_516508)(void *Memory, char);

//----- (0046D850) --------------------------------------------------------
void *__thiscall sub_46D850(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4A71E0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0046D880) --------------------------------------------------------
int __cdecl sub_46D880(int a1, int a2, int a3, int a4)
{
  signed int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax

  if ( a4 )
  {
    v4 = (signed int)((double)BYTE1(a1) * 0.71516 + (double)BYTE2(a1) * 0.212671 + (double)(unsigned __int8)a1
                                                                                 * 0.072169);
    BYTE1(a1) = v4;
    LOBYTE(a1) = v4;
  }
  else
  {
    LOBYTE(v4) = BYTE2(a1);
  }
  v5 = a2 * ((unsigned __int8)v4 + BYTE2(a3)) / 1000;
  BYTE2(a1) = -1;
  if ( v5 <= 255 )
    BYTE2(a1) = v5;
  v6 = a2 * (BYTE1(a1) + BYTE1(a3)) / 1000;
  BYTE1(a1) = -1;
  if ( v6 <= 255 )
    BYTE1(a1) = v6;
  v7 = a2 * ((unsigned __int8)a1 + (unsigned __int8)a3) / 1000;
  LOBYTE(a1) = -1;
  if ( v7 <= 255 )
    LOBYTE(a1) = v7;
  return a1;
}

//----- (0046D9D0) --------------------------------------------------------
char *__thiscall sub_46D9D0(char *this, _DWORD *a2)
{
  char *result; // eax

  result = &this[4 * ((a2[5] + a2[7]) / 2048 + 32 * ((a2[4] + a2[6]) / 2048)) + 120008];
  a2[13] = *(_DWORD *)result;
  *(_DWORD *)result = a2;
  return result;
}

//----- (0046DA30) --------------------------------------------------------
_DWORD *__thiscall sub_46DA30(_DWORD *this, _DWORD *a2)
{
  int v2; // esi
  _DWORD *result; // eax
  _DWORD *v4; // ecx

  v2 = (a2[5] + a2[7]) / 2048 + 32 * ((a2[4] + a2[6]) / 2048);
  result = (_DWORD *)this[v2 + 30002];
  v4 = &this[v2 + 30002];
  if ( result )
  {
    while ( result != a2 )
    {
      v4 = result + 13;
      result = (_DWORD *)result[13];
      if ( !result )
        return result;
    }
    result = (_DWORD *)result[13];
    *v4 = result;
  }
  return result;
}

//----- (0046DAC0) --------------------------------------------------------
_DWORD *__thiscall sub_46DAC0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi

  v2 = this;
  this[30001] = 0;
  *this = a2;
  memset(this + 1, 0, 0xEA60u);
  memset(v2 + 30002, 0, 0x1000u);
  return v2;
}

//----- (0046DB10) --------------------------------------------------------
int __thiscall sub_46DB10(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // edi
  int (__stdcall ****v3)(signed int); // esi
  int result; // eax

  v1 = this;
  v2 = 0;
  if ( this[30001] > 0 )
  {
    v3 = (int (__stdcall ****)(signed int))(this + 15001);
    do
    {
      if ( *v3 )
      {
        result = (***v3)(1);
        *v3 = 0;
      }
      ++v2;
      ++v3;
    }
    while ( v2 < v1[30001] );
  }
  return result;
}

//----- (0046DB60) --------------------------------------------------------
int __thiscall sub_46DB60(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ebx
  int v6; // ebp
  int v7; // edi
  int v8; // eax
  _DWORD *v9; // eax
  int v10; // esi
  int v12; // [esp+10h] [ebp-Ch]
  _DWORD *v13; // [esp+14h] [ebp-8h]
  char v14; // [esp+18h] [ebp-4h]

  v4 = this;
  v13 = this;
  v12 = 0;
  if ( this[30001] <= 0 )
    return 0;
  v5 = a3;
  v6 = a2;
  v7 = (int)(this + 15001);
  while ( 1 )
  {
    v8 = (*(int (**)(void))(**(_DWORD **)v7 + 204))();
    if ( v8 == -1 )
      goto LABEL_8;
    if ( v8 == a4 )
      goto LABEL_8;
    v9 = *(_DWORD **)v7;
    if ( *(_DWORD *)(*(_DWORD *)v7 + 152) <= 0 )
      goto LABEL_8;
    v10 = v9[38] * v9[38];
    (*(void (__stdcall **)(int *, int *, char *))(*v9 + 84))(&a3, &a2, &v14);
    if ( (a3 / 10000 - v6) * (a3 / 10000 - v6) + (a2 / 10000 - v5) * (a2 / 10000 - v5) < v10 )
      return v13[v12 + 15001];
    v4 = v13;
LABEL_8:
    v7 += 4;
    if ( ++v12 >= v4[30001] )
      return 0;
  }
}

//----- (0046DCA0) --------------------------------------------------------
int __thiscall sub_46DCA0(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx
  int v3; // esi
  int v4; // edi
  int result; // eax

  v2 = this;
  v3 = 0;
  if ( this[30001] > 0 )
  {
    v4 = (int)(this + 15001);
    do
    {
      result = (*(int (__stdcall **)(int))(**(_DWORD **)v4 + 36))(a2);
      ++v3;
      v4 += 4;
    }
    while ( v3 < v2[30001] );
  }
  return result;
}

//----- (0046DCF0) --------------------------------------------------------
void *__thiscall sub_46DCF0(int this)
{
  int v1; // ebx
  void *result; // eax
  int v3; // esi
  int v4; // edi

  v1 = this;
  result = memset((void *)(this + 120008), 0, 0x1000u);
  v3 = 0;
  if ( *(_DWORD *)(v1 + 120004) > 0 )
  {
    v4 = v1 + 60004;
    do
    {
      result = (void *)(*(int (**)(void))(**(_DWORD **)v4 + 312))();
      ++v3;
      v4 += 4;
    }
    while ( v3 < *(_DWORD *)(v1 + 120004) );
  }
  return result;
}

//----- (0046DD60) --------------------------------------------------------
int __fastcall sub_46DD60(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // edi
  int v7; // ebx
  int v8; // ebp
  int v9; // esi
  int v10; // eax
  int v12; // [esp+Ch] [ebp-14h]
  int v13; // [esp+10h] [ebp-10h]
  int v14; // [esp+14h] [ebp-Ch]
  int v15; // [esp+18h] [ebp-8h]
  char v16; // [esp+1Ch] [ebp-4h]

  v6 = a1;
  v14 = a1;
  v12 = 0;
  v15 = a5 * a5;
  v13 = 0;
  if ( *(_DWORD *)(a1 + 120004) <= 0 )
    return 0;
  v7 = a4;
  v8 = a3;
  a5 = a1 + 60004;
  do
  {
    v9 = *(_DWORD *)a5;
    if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)a5 + 8))(*(_DWORD *)a5) > 0 )
    {
      (*(void (__thiscall **)(int, int *, int *, char *))(*(_DWORD *)v9 + 84))(v9, &a4, &a3, &v16);
      v10 = v7 - a3 / 10000;
      if ( dword_53A7C4 )
      {
        v6 = v14;
        v10 = 10 * v10 / 7;
      }
      if ( (v8 - a4 / 10000) * (v8 - a4 / 10000) + v10 * v10 < v15 )
        *(_DWORD *)(a6 + 4 * v12++) = v9;
    }
    a5 += 4;
    ++v13;
  }
  while ( v13 < *(_DWORD *)(v6 + 120004) );
  return v12;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0046DED0) --------------------------------------------------------
int __thiscall sub_46DED0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // ebp
  int v5; // ebx
  signed int v6; // esi
  int v8; // [esp+8h] [ebp-2720h]
  _DWORD *v9; // [esp+10h] [ebp-2718h]
  char Dst[10000]; // [esp+14h] [ebp-2714h]

  v3 = this;
  v4 = 0;
  v9 = this;
  memset(Dst, 0, 0x2710u);
  v8 = 0;
  if ( v3[30001] > 0 )
  {
    v5 = (int)(v3 + 15001);
    do
    {
      v6 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v5 + 72) + 1076);
      if ( v6 < 10000 && !Dst[v6] && (*(int (**)(void))(**(_DWORD **)v5 + 204))() == a3 )
      {
        *(_DWORD *)(a2 + 4 * v4++) = v6;
        Dst[v6] = 1;
      }
      v5 += 4;
      ++v8;
    }
    while ( v8 < v9[30001] );
  }
  return v4;
}
// 46DED0: using guessed type char Dst[10000];

//----- (0046DFD0) --------------------------------------------------------
signed int __thiscall sub_46DFD0(char *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ebp
  int v10; // esi
  int v11; // edi
  int v12; // ebx
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // esi
  _DWORD *v17; // esi
  int v18; // eax
  int v19; // eax
  int v20; // ebx
  int v21; // edi
  long double v22; // st7
  signed int v23; // eax
  int v24; // eax
  bool v26; // zf
  bool v27; // sf
  unsigned __int8 v28; // of
  int v29; // [esp+10h] [ebp-1Ch]
  int v30; // [esp+14h] [ebp-18h]
  _DWORD **v31; // [esp+18h] [ebp-14h]
  int v32; // [esp+1Ch] [ebp-10h]
  int v33; // [esp+20h] [ebp-Ch]
  int v34; // [esp+24h] [ebp-8h]
  int v35; // [esp+28h] [ebp-4h]
  int v36; // [esp+48h] [ebp+1Ch]

  v9 = a8;
  v10 = (a5 - a8 - 128) / 1024;
  v11 = (a5 + a8 + 128) / 1024;
  v12 = (a6 - a8 - 128) / 1024;
  v13 = (a6 + a8 + 128) / 1024;
  v30 = (a5 + a8 + 128) / 1024;
  v29 = (a6 - a8 - 128) / 1024;
  v36 = (a6 + a8 + 128) / 1024;
  if ( v10 >= 31 )
  {
    v10 = 31;
  }
  else if ( v10 < 0 )
  {
    v10 = 0;
  }
  if ( v11 >= 31 )
  {
    v30 = 31;
  }
  else if ( v11 < 0 )
  {
    v30 = 0;
  }
  if ( v12 >= 31 )
  {
    v29 = 31;
  }
  else if ( v12 < 0 )
  {
    v29 = 0;
  }
  if ( v13 >= 31 )
  {
    v36 = 31;
  }
  else if ( v13 < 0 )
  {
    v36 = 0;
  }
  v33 = v10;
  if ( v10 <= v30 )
  {
    v14 = v29;
    v15 = v36;
    v16 = (int)&this[4 * (v29 + 32 * v10) + 120008];
    v34 = v16;
    do
    {
      v32 = v14;
      if ( v14 <= v15 )
      {
        v31 = (_DWORD **)v16;
        do
        {
          v17 = *v31;
          if ( *v31 )
          {
            do
            {
              if ( v17[16] != a4 )
              {
                v18 = v17[11];
                if ( v18 != -1 && (a2 == -1 || a2 == v18) && (a3 == -1 || a3 != v18) )
                {
                  v19 = a6 - v17[2];
                  if ( dword_53A7C4 )
                    v19 = 10 * v19 / 7;
                  v20 = v17[3];
                  v35 = (a5 - v17[1]) * (a5 - v17[1]) + v19 * v19;
                  if ( v35 <= (v20 + v9) * (v20 + v9) )
                  {
                    v21 = v17[9];
                    if ( a7 <= v21 )
                    {
                      v21 = v17[8];
                      if ( a7 >= v21 )
                        v21 = a7;
                    }
                    v22 = sqrt((double)v35);
                    v23 = (signed int)v22 - v20 < 0 ? 0 : (signed int)v22 - v20;
                    if ( v23 * v23 + (v21 - a7) * (v21 - a7) <= v9 * v9
                      && !(*(int (__thiscall **)(_DWORD *))(*v17 + 148))(v17) )
                    {
                      v24 = (*(int (__thiscall **)(_DWORD *))(*v17 + 232))(v17);
                      if ( a9 >= 0 )
                      {
                        if ( v24 >= a9 )
                          return v17[14];
                      }
                      else if ( v24 <= -a9 )
                      {
                        return v17[14];
                      }
                    }
                  }
                }
              }
              v17 = (_DWORD *)v17[13];
            }
            while ( v17 );
            v15 = v36;
          }
          ++v31;
          ++v32;
        }
        while ( v32 <= v15 );
        v14 = v29;
      }
      v16 = v34 + 128;
      v28 = __OFSUB__(v33 + 1, v30);
      v26 = v33 + 1 == v30;
      v27 = v33++ + 1 - v30 < 0;
      v34 += 128;
    }
    while ( (unsigned __int8)(v27 ^ v28) | v26 );
  }
  return -1;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0046E2F0) --------------------------------------------------------
signed int __thiscall sub_46E2F0(char *this, _DWORD *a2, int a3, int a4, _DWORD *a5, _DWORD *a6, _DWORD *a7, int a8, int a9)
{
  char *v9; // edi
  int v10; // ebx
  int v11; // ebp
  int v12; // ecx
  int v13; // esi
  int v14; // ecx
  int v15; // ebx
  int v16; // eax
  char *v17; // edi
  int v18; // esi
  _DWORD *v19; // ecx
  int v20; // edx
  bool v21; // zf
  bool v22; // sf
  unsigned __int8 v23; // of
  int v25; // eax
  int v26; // edi
  int v27; // esi
  int v28; // eax
  int v29; // [esp+10h] [ebp-14h]
  int v30; // [esp+14h] [ebp-10h]
  char *v31; // [esp+18h] [ebp-Ch]
  int v32; // [esp+1Ch] [ebp-8h]
  int v33; // [esp+20h] [ebp-4h]
  signed int v34; // [esp+2Ch] [ebp+8h]
  int v35; // [esp+30h] [ebp+Ch]
  int v36; // [esp+3Ch] [ebp+18h]

  v9 = this;
  v10 = a3 + a7[2];
  v11 = a3 + *a7;
  v12 = a4;
  v35 = a4 + a7[3];
  v29 = v12 + a7[1];
  v36 = (v29 - 128) / 1024;
  v33 = v10;
  v13 = (v11 - 128) / 1024;
  v14 = (v10 + 128) / 1024;
  v15 = (v35 + 128) / 1024;
  v34 = v14;
  if ( v13 >= 31 )
  {
    v13 = 31;
  }
  else if ( v13 < 0 )
  {
    v13 = 0;
  }
  if ( v14 >= 31 )
  {
    v34 = 31;
  }
  else if ( v14 < 0 )
  {
    v34 = 0;
  }
  if ( v36 >= 31 )
  {
    v36 = 31;
  }
  else if ( v36 < 0 )
  {
    v36 = 0;
  }
  if ( v15 >= 31 )
  {
    v15 = 31;
  }
  else if ( v15 < 0 )
  {
    v15 = 0;
  }
  v32 = (*(int (**)(void))(*a2 + 204))();
  v30 = v13;
  if ( v13 > v34 )
    return 0;
  v16 = v36;
  v17 = &v9[4 * (v36 + 32 * v13) + 120008];
  v31 = v17;
  while ( 1 )
  {
    v18 = v16;
    if ( v16 <= v15 )
      break;
LABEL_33:
    v17 = v31 + 128;
    v23 = __OFSUB__(v30 + 1, v34);
    v21 = v30 + 1 == v34;
    v22 = v30++ + 1 - v34 < 0;
    v31 += 128;
    if ( !((unsigned __int8)(v22 ^ v23) | v21) )
      return 0;
  }
  while ( 1 )
  {
    v19 = *(_DWORD **)v17;
    if ( *(_DWORD *)v17 )
      break;
LABEL_31:
    ++v18;
    v17 += 4;
    if ( v18 > v15 )
    {
      v16 = v36;
      goto LABEL_33;
    }
  }
  while ( 1 )
  {
    v20 = v19[10];
    if ( v20 != -1
      && v20 != v32
      && v19 != a2
      && v19[4] < v33
      && v19[6] > v11
      && v19[5] < v35
      && v19[7] > v29
      && v19[8] < a9
      && v19[9] > a8 )
    {
      break;
    }
    v19 = (_DWORD *)v19[13];
    if ( !v19 )
      goto LABEL_31;
  }
  v25 = abs(v11 - v19[6]);
  v26 = abs(v33 - v19[4]);
  if ( v26 >= v25 )
    v26 = v25;
  v27 = abs(v35 - v19[5]);
  v28 = abs(v29 - v19[7]);
  if ( v27 < v28 )
    v28 = v27;
  if ( v26 >= v28 )
    *a6 = -*a6;
  else
    *a5 = -*a5;
  return 1;
}

//----- (0046E5A0) --------------------------------------------------------
int __thiscall sub_46E5A0(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // esi
  int v3; // edi
  int result; // eax

  v1 = this;
  v2 = 0;
  if ( this[30001] > 0 )
  {
    v3 = (int)(this + 15001);
    do
    {
      result = (*(int (**)(void))(**(_DWORD **)v3 + 12))();
      ++v2;
      v3 += 4;
    }
    while ( v2 < v1[30001] );
  }
  return result;
}

//----- (0046E5E0) --------------------------------------------------------
int __thiscall sub_46E5E0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // ebx
  int v6; // esi
  int v7; // edi
  int result; // eax

  v5 = this;
  v6 = 0;
  if ( this[30001] > 0 )
  {
    v7 = (int)(this + 15001);
    do
    {
      result = (*(int (__stdcall **)(int, int, int, int))(**(_DWORD **)v7 + 116))(a2, a3, a4, a5);
      ++v6;
      v7 += 4;
    }
    while ( v6 < v5[30001] );
  }
  return result;
}

//----- (0046E650) --------------------------------------------------------
void *__thiscall sub_46E650(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // ebx
  int v5; // edi
  int v6; // esi
  void *result; // eax

  v4 = this;
  v5 = 0;
  if ( this[30001] > 0 )
  {
    v6 = (int)(this + 15001);
    do
    {
      if ( *(_DWORD *)v6 != *((_DWORD *)dword_563908 + 6898) )
        (*(void (__stdcall **)(int, int, int))(**(_DWORD **)v6 + 40))(a2, a3, a4);
      ++v5;
      v6 += 4;
    }
    while ( v5 < v4[30001] );
  }
  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
    result = (void *)(*(int (__stdcall **)(int, int, int))(**((_DWORD **)dword_563908 + 6898) + 40))(a2, a3, a4);
  return result;
}

//----- (0046E6F0) --------------------------------------------------------
void *__thiscall sub_46E6F0(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // edi
  int v3; // esi
  void *result; // eax

  v1 = this;
  v2 = 0;
  if ( this[30001] > 0 )
  {
    v3 = (int)(this + 15001);
    do
    {
      if ( *(_DWORD *)v3 != *((_DWORD *)dword_563908 + 6898) )
        (*(void (**)(void))(**(_DWORD **)v3 + 44))();
      ++v2;
      v3 += 4;
    }
    while ( v2 < v1[30001] );
  }
  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6898) )
    result = (void *)(*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 44))();
  return result;
}

//----- (0046E770) --------------------------------------------------------
int __thiscall sub_46E770(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int result; // eax
  int v6; // esi

  result = a2;
  v6 = this[a2 + 1];
  if ( v6 )
  {
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 276))(v6, a4, a5);
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)v6 + 24))(v6, a3);
  }
  return result;
}

//----- (0046E7C0) --------------------------------------------------------
int __thiscall sub_46E7C0(_DWORD *this)
{
  return *(_DWORD *)(this[18] + 1056);
}

//----- (0046E7F0) --------------------------------------------------------
int __thiscall sub_46E7F0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int result; // eax

  v1 = this;
  *this = &Vehicle::`vftable';
  v2 = *((_DWORD *)dword_563908 + 1503);
  sub_4024FA(v1);
  result = v1[35];
  *(_BYTE *)(*((_DWORD *)Memory + 2) + result) = 0;
  return result;
}
// 4024FA: using guessed type _DWORD __stdcall sub_4024FA(_DWORD);
// 516554: using guessed type void *Vehicle::`vftable';

//----- (0046E8A0) --------------------------------------------------------
int sub_46E8A0()
{
  return 0;
}

//----- (0046E8B0) --------------------------------------------------------
signed int sub_46E8B0()
{
  int v0; // ecx
  unsigned int v1; // edx
  int v2; // ecx
  signed int result; // eax
  unsigned int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v0 = *((_DWORD *)dword_563908 + 6897);
  sub_4018CF(&v5, &v4);
  v1 = (signed int)((unsigned __int64)(274877907i64 * (signed int)(v4 - v5)) >> 32) >> 6;
  v2 = v1 + (v1 >> 31);
  v4 = v1 + (v1 >> 31);
  if ( v2 <= 0
    || (result = (*((_DWORD *)dword_563908 + 79) - v5) / v2 < 0 ? 0 : (unsigned int)((*((_DWORD *)dword_563908 + 79) - v5)
                                                                                   / v2),
        result > 1000) )
  {
    result = 1000;
  }
  return result;
}
// 4018CF: using guessed type _DWORD __stdcall sub_4018CF(_DWORD, _DWORD);

//----- (0046E940) --------------------------------------------------------
int __thiscall sub_46E940(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax
  int v5; // edx
  BOOL v6; // ebx
  int v7; // eax

  result = abs(*(signed __int16 *)(a2 + 8));
  if ( result <= 5100 )
  {
    result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * result + 8008);
    if ( result )
    {
      v5 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
      v6 = this[16] == v5 || this[14] == v5;
      result = (*(int (__thiscall **)(int))(*(_DWORD *)result + 4))(result);
      if ( result == 11 )
      {
        if ( operator new(0x2Cu) )
          v7 = sub_401E3D(*(signed __int16 *)(a2 + 8), *(_DWORD *)a2, v6 == 0, a3, a4);
        else
          v7 = 0;
        result = sub_4A7300(*((_DWORD **)dword_563908 + 353), v7);
      }
    }
  }
  return result;
}
// 401E3D: using guessed type _DWORD __stdcall sub_401E3D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0046EA70) --------------------------------------------------------
int sub_46EA70()
{
  return *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
}

//----- (0046EA90) --------------------------------------------------------
int __thiscall sub_46EA90(_DWORD *this)
{
  unsigned int v1; // edx
  signed int v2; // esi
  _DWORD *v3; // edi
  int v4; // ecx
  int result; // eax
  int v6; // edx

  v1 = this[16];
  if ( v1 == -1 )
  {
    v2 = 0;
    v3 = this + 27;
    while ( 1 )
    {
      if ( *v3 )
      {
        v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * *v3 + 4);
        if ( v4 )
        {
          result = (*(int (**)(void))(*(_DWORD *)v4 + 204))();
          if ( result != -1 )
            break;
        }
      }
      ++v2;
      ++v3;
      if ( v2 >= 8 )
        return -1;
    }
  }
  else
  {
    result = -1;
    if ( v1 <= 0x1387 )
    {
      v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v1 + 12408);
      if ( v6 )
        result = *(signed __int16 *)(v6 + 100);
    }
  }
  return result;
}

//----- (0046EB20) --------------------------------------------------------
unsigned int __thiscall sub_46EB20(_DWORD *this)
{
  _DWORD *v1; // esi
  int v3; // eax
  int v4; // eax

  v1 = this;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) <= 0 )
    return sub_402617(0xBu);
  v3 = (*(int (__thiscall **)(_DWORD *))(*this + 204))(this);
  if ( v3 != -1 && v3 != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) )
    return sub_402617(0xAu);
  if ( v1[16] != -1 )
    return sub_402617(0x67u);
  v4 = v1[18];
  if ( !*(_WORD *)(v4 + 1052) )
    return sub_402617(0x68u);
  if ( *(_DWORD *)(v4 + 1460) )
    return (*(int (**)(void))(*(_DWORD *)v4 + 4))() == 5 ? (unsigned int)"NO WAY" : 0;
  return sub_402617(0x86u);
}

//----- (0046EC00) --------------------------------------------------------
BOOL __thiscall sub_46EC00(int this)
{
  int v1; // esi
  signed int v2; // eax
  int v4; // edx
  int v5; // ecx

  v1 = this;
  v2 = *(_DWORD *)(this + 56);
  if ( v2 < 5001 && *(_DWORD *)(this + 64) != v2 )
    return 0;
  if ( (*(int (**)(void))(**(_DWORD **)(this + 72) + 4))() == 5
    || *(_DWORD *)(v1 + 64) == -1
    || v1 == *((_DWORD *)dword_563908 + 6898) )
  {
    return 1;
  }
  return abs(sub_401D39(v5, v4) - *(_DWORD *)(v1 + 332)) <= 300;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (0046EC80) --------------------------------------------------------
int __thiscall sub_46EC80(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // ecx
  int (__thiscall *v4)(_DWORD *); // eax
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // eax
  int v12; // edx
  int v13; // ecx
  signed int v14; // edx
  unsigned int v15; // eax
  int v16; // ecx
  int v17; // eax
  int v18; // ecx
  int (__thiscall *v19)(_DWORD *); // eax
  int v20; // eax
  int v21; // edx
  int v22; // ecx

  v1 = this;
  result = sub_40237E(this);
  if ( result )
  {
    if ( v1[84] <= 0 )
    {
      v3 = v1[43];
      v1[1] = v1[42] / 10000;
      v4 = *(int (__thiscall **)(_DWORD *))(*v1 + 200);
      v1[2] = v3 / 10000;
      v5 = v4(v1);
      v6 = v1[21];
      v7 = v1[19];
      v1[3] = v5;
      v8 = v1[1];
      v9 = v8 + v6;
      v10 = v8 + v7;
      v11 = v1[2];
      v1[6] = v9;
      v12 = v11 + v1[22];
      v1[4] = v10;
      v13 = v11 + v1[20];
      v1[7] = v12;
      v14 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[44]) >> 32) >> 12;
      v15 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[44]) >> 32) >> 12;
      v1[5] = v13;
      v16 = v1[18];
      v17 = v14 + (v15 >> 31);
      v1[8] = v17 + *(signed __int16 *)(v16 + 1046);
      v18 = v17 + *(signed __int16 *)(v16 + 1048);
      v19 = *(int (__thiscall **)(_DWORD *))(*v1 + 288);
      v1[9] = v18;
      v20 = v19(v1);
      v21 = *v1;
      v1[10] = v20;
      v1[11] = (*(int (__thiscall **)(_DWORD *))(v21 + 292))(v1);
      v22 = *((_DWORD *)dword_563908 + 1503);
      result = sub_4028CE(v1);
    }
  }
  return result;
}
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);
// 4028CE: using guessed type _DWORD __stdcall sub_4028CE(_DWORD);

//----- (0046EDB0) --------------------------------------------------------
int __thiscall sub_46EDB0(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int v2; // edi
  int result; // eax
  int v4; // edx

  v1 = this;
  v2 = -1;
  if ( this[45] || this[46] )
    return v2;
  result = (*(int (**)(void))(*this + 204))();
  if ( result < 0 )
  {
    v4 = v1[18];
    switch ( *(_WORD *)(v4 + 1022) )
    {
      case 0:
        return -2;
      case 1:
        return -1;
      case 2:
        return -2;
    }
    result = -1;
  }
  else if ( *(_WORD *)(v1[18] + 1020) )
  {
    if ( *(_WORD *)(v1[18] + 1020) != 1 )
    {
      if ( *(_WORD *)(v1[18] + 1020) != 2 )
        return v2;
      return -2;
    }
    return -1;
  }
  return result;
}

//----- (0046EE50) --------------------------------------------------------
int __thiscall sub_46EE50(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // edx

  v1 = this;
  result = (*(int (**)(void))(*this + 204))();
  if ( result >= 0 )
  {
    if ( !*(_WORD *)(v1[18] + 1024) )
      return result;
    if ( *(_WORD *)(v1[18] + 1024) != 1 )
    {
      if ( *(_WORD *)(v1[18] + 1024) == 2 )
        return -2;
      return -1;
    }
    return -1;
  }
  v3 = v1[18];
  switch ( *(_WORD *)(v3 + 1026) )
  {
    case 0:
      return -2;
    case 1:
      return -1;
    case 2:
      return -2;
  }
  return -1;
}

//----- (0046EEC0) --------------------------------------------------------
signed int __thiscall sub_46EEC0(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  signed int v4; // edx
  signed int v5; // edx
  int v6; // eax
  signed int v7; // edx
  signed int v8; // ecx
  signed int result; // eax

  v3 = a2 - this[42] / 10000;
  v4 = this[23];
  if ( v4 > -16 )
    v4 = -16;
  if ( v3 < v4 )
    goto LABEL_17;
  v5 = this[25];
  if ( v5 < 16 )
    v5 = 16;
  if ( v3 > v5 )
    goto LABEL_17;
  v6 = a3 - this[43] / 10000;
  v7 = this[24];
  if ( v7 > -24 )
    v7 = -24;
  if ( v6 < v7 )
    goto LABEL_17;
  v8 = this[26];
  if ( v8 < 16 )
    v8 = 16;
  if ( v6 > v8 )
LABEL_17:
    result = 0;
  else
    result = 1;
  return result;
}

//----- (0046EF70) --------------------------------------------------------
char *__thiscall sub_46EF70(_DWORD *this, char *Dest)
{
  _DWORD *v2; // esi
  int v3; // edi
  unsigned int v4; // esi
  int v5; // eax
  int v6; // ecx
  char *result; // eax
  char *v8; // esi
  char v9; // dl
  unsigned int v10; // eax
  char *v11; // ecx
  char *v12; // esi
  char v13; // dl

  v2 = this;
  v3 = 0;
  if ( this[14] >= 5001 )
  {
    v10 = this[16];
    if ( v10 != -1 )
    {
      if ( v10 > 0x1387 )
        v3 = 0;
      else
        v3 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v10 + 12408);
    }
    if ( (*(int (__thiscall **)(_DWORD *))(*this + 192))(this) == -1 )
    {
      v11 = (char *)(v2[18] + 980);
      if ( v3 )
      {
        sprintf(Dest, "%s (%s)", v11, v3 + 32);
        result = Dest;
      }
      else
      {
        result = Dest;
        v12 = Dest;
        do
        {
          v13 = *v11;
          *v12++ = *v11++;
        }
        while ( v13 );
      }
    }
    else
    {
      if ( v3 )
        sprintf(Dest, "  %s (%s)", v2[18] + 980, v3 + 32);
      else
        sprintf(Dest, "  %s", v2[18] + 980);
      result = Dest;
    }
  }
  else
  {
    v4 = this[16];
    if ( v4 <= 0x1387 && (v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v4 + 12408)) != 0 )
    {
      v6 = v5 + 32;
      result = Dest;
      v8 = &Dest[-v6];
      do
      {
        v9 = *(_BYTE *)v6;
        v8[v6] = *(_BYTE *)v6;
        ++v6;
      }
      while ( v9 );
    }
    else
    {
      result = Dest;
      *(_DWORD *)Dest = 707406378;
      Dest[4] = 0;
    }
  }
  return result;
}

//----- (0046F0F0) --------------------------------------------------------
int __thiscall sub_46F0F0(_DWORD *this, int a2)
{
  int result; // eax

  result = 10000 * a2;
  this[44] = 10000 * a2;
  return result;
}

//----- (0046F110) --------------------------------------------------------
int __thiscall sub_46F110(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int result; // eax

  this[48] = a2;
  result = a4;
  this[45] = a3;
  this[46] = a4;
  this[47] = a5;
  return result;
}

//----- (0046F150) --------------------------------------------------------
int __thiscall sub_46F150(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int result; // eax

  this[42] = a2;
  this[43] = a3;
  this[44] = a4;
  this[48] = a5;
  this[45] = a6;
  result = a8;
  this[46] = a7;
  this[47] = a8;
  return result;
}

//----- (0046F1B0) --------------------------------------------------------
int __thiscall sub_46F1B0(signed int *this)
{
  int v1; // esi
  unsigned int v2; // edx
  bool v3; // sf
  int v4; // eax
  _DWORD *v5; // edx
  int v6; // ecx
  int result; // eax

  v1 = this[43] / 160000;
  v2 = (signed int)((unsigned __int64)(1759218605i64 * this[42]) >> 32) >> 16;
  v3 = (signed int)(v2 + (v2 >> 31)) < 0;
  v4 = v2 + (v2 >> 31);
  v5 = (_DWORD *)*((_DWORD *)dword_563908 + 1508);
  if ( v3 || v1 < 0 || (v6 = v5[1], v4 >= v6) || v1 >= v5[2] )
    result = 0;
  else
    result = v5[(*(_BYTE *)(3 * (v4 + v1 * v6) + v5[1292]) & 0x7F) + 520];
  return result;
}

//----- (0046F240) --------------------------------------------------------
int __thiscall sub_46F240(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  *a2 = this[42];
  *a3 = this[43];
  *a4 = this[44];
  return this[48];
}

//----- (0046F280) --------------------------------------------------------
int __thiscall sub_46F280(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  *a2 = this[42];
  *a3 = this[43];
  *a4 = this[44];
  return this[48];
}

//----- (0046F2C0) --------------------------------------------------------
int __thiscall sub_46F2C0(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax

  *a2 = this[45];
  *a3 = this[46];
  result = this[47];
  *a4 = result;
  return result;
}

//----- (0046F2F0) --------------------------------------------------------
int __thiscall sub_46F2F0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // ecx
  _WORD *v4; // ecx
  int v5; // edi
  int v6; // ecx
  int v7; // ST10_4
  int v8; // ecx
  int v9; // edi
  _DWORD *v10; // eax
  int v11; // ecx
  int v12; // ecx

  v1 = this;
  this[39] = -1;
  result = (int)dword_563908;
  if ( *((_DWORD *)dword_563908 + 1501) )
  {
    result = (int)Memory;
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) > 0 && this[16] != -1 )
    {
      result = sub_40237E(this);
      if ( result )
      {
        result = (*(int (**)(void))(*(_DWORD *)v1[18] + 4))();
        if ( result != 4 )
        {
          v3 = *((_DWORD *)dword_563908 + 1501);
          result = sub_401FE1(v1[16]);
          v1[39] = result;
          if ( result < 0 )
          {
            result = 0;
            if ( v1[93] <= 0 )
            {
LABEL_11:
              result = (*(int (__thiscall **)(_DWORD *))(*v1 + 108))(v1);
              v5 = v1[18];
              v6 = *(signed __int16 *)(v5 + 2 * result + 1416);
              if ( v6 < 0 )
                v6 = *(_DWORD *)((char *)dword_563908 + 58618);
              if ( v1 == *((_DWORD **)dword_563908 + 6898) )
              {
                result = v6 * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 32) / 1000;
                v6 += result;
              }
              if ( v6 > 0 )
              {
                v7 = v6;
                v8 = *((_DWORD *)dword_563908 + 1501);
                result = sub_4010BE(
                           v1[16],
                           v1[42] / 10000,
                           v1[43] / 10000,
                           ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[44]) >> 32) >> 12)
                         + (*(signed __int16 *)(v5 + 1046) + *(signed __int16 *)(v5 + 1048)) / 2
                         + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v1[44]) >> 32) >> 31),
                           v7);
                v9 = result;
                if ( result >= 0 )
                {
                  v10 = dword_563908;
                  if ( v1[16] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
                  {
                    v11 = *((_DWORD *)dword_563908 + 1501);
                    sub_402743(v9);
                    v10 = dword_563908;
                  }
                  v12 = v10[1501];
                  result = sub_40131B(v9, *(_DWORD *)((char *)v10 + 58722));
                }
              }
            }
            else
            {
              v4 = v1 + 85;
              while ( *v4 != 30000 )
              {
                ++result;
                ++v4;
                if ( result >= v1[93] )
                  goto LABEL_11;
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 4010BE: using guessed type _DWORD __stdcall sub_4010BE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40131B: using guessed type _DWORD __stdcall sub_40131B(_DWORD, _DWORD);
// 401FE1: using guessed type _DWORD __stdcall sub_401FE1(_DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);
// 402743: using guessed type _DWORD __stdcall sub_402743(_DWORD);

//----- (0046F520) --------------------------------------------------------
int __thiscall sub_46F520(_DWORD *this)
{
  int v1; // esi
  int v2; // ecx
  int result; // eax

  if ( *((_DWORD *)dword_563908 + 1501) )
  {
    v1 = *(signed __int16 *)(this[18] + 1392);
    if ( v1 < 0 )
      v1 = *(_DWORD *)((char *)dword_563908 + 58614);
    v2 = *((_DWORD *)dword_563908 + 1501);
    result = sub_401979(v1 + v1 * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 28) / 1000);
  }
  return result;
}
// 401979: using guessed type _DWORD __stdcall sub_401979(_DWORD);

//----- (0046F590) --------------------------------------------------------
int __thiscall sub_46F590(_DWORD *this)
{
  int result; // eax
  int v2; // edx
  _DWORD *v3; // esi
  int v4; // ecx
  unsigned int v5; // edx
  int v6; // edi
  int v7; // ebp
  int v8; // ebx
  int v9; // ecx
  unsigned int v10; // edx
  int v11; // esi
  int v12; // eax
  int v13; // edx
  int v14; // ecx
  int v15; // ecx
  int v16; // [esp+4h] [ebp-8h]
  int v17; // [esp+8h] [ebp-4h]

  result = (int)Memory;
  v2 = *((_DWORD *)Memory + 1);
  v3 = this;
  v4 = *(_DWORD *)Memory ^ *(_DWORD *)(v2 + 4 * this[35]);
  if ( v4 > 0 && v3[16] >= 0 )
  {
    result = abs(sub_401D39(v4, v2) - v3[83]);
    if ( result <= 300 )
    {
      if ( v3[81] )
      {
        result = v3[16];
        if ( (unsigned int)result <= 0x1387 )
        {
          result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408);
          v16 = result;
          if ( result )
          {
            v5 = (unsigned __int64)(1759218605i64 * (signed int)v3[42]) >> 32;
            v6 = ((signed int)v5 >> 16) + (v5 >> 31);
            v7 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
            v8 = v3[43] / 160000;
            if ( v7 == (*(int (__thiscall **)(_DWORD *))(*v3 + 204))(v3) )
              goto LABEL_17;
            v9 = v3[42] / 10000 - *((_DWORD *)dword_563908 + 62);
            v10 = (unsigned __int64)(1759218605i64 * (signed int)v3[43]) >> 32;
            v11 = v3[37];
            v12 = ((signed int)v10 >> 12) + (v10 >> 31) - *((_DWORD *)dword_563908 + 63);
            v13 = v9 * v9;
            v14 = *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 24);
            result = v13 + v12 * v12;
            if ( v11 > v14 )
              v14 = v11;
            if ( result < v14 * v14 )
            {
LABEL_17:
              result = (unsigned __int16)sub_40161D(&v17);
              if ( (_WORD)result )
              {
                v15 = *((_DWORD *)dword_563908 + 1505);
                if ( v16 == *((_DWORD *)dword_563908 + 6897) )
                  result = sub_401D7F(v6, v8, result, 1, 0);
                else
                  result = sub_401A7D(v6, v8, v17, v17, result, 1, 0);
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 40161D: using guessed type _DWORD __stdcall sub_40161D(_DWORD);
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401D7F: using guessed type _DWORD __stdcall sub_401D7F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0046F780) --------------------------------------------------------
signed int sub_46F780()
{
  return -1;
}

//----- (0046F790) --------------------------------------------------------
void *__thiscall sub_46F790(_DWORD *this)
{
  void *result; // eax
  _DWORD *v2; // esi
  int v3; // eax
  unsigned int v4; // edx
  char Dest; // [esp+4h] [ebp-104h]

  result = dword_563908;
  v2 = this;
  if ( !*((_BYTE *)dword_563908 + 2220) )
  {
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) < 0
      || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35]) )
    {
      v3 = sub_402617(0xBu);
      sprintf(&Dest, "%s (%s)", v2[18] + 980, v3);
    }
    else
    {
      sprintf(&Dest, "%s", this[18] + 980);
    }
    v4 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[42]) >> 32) >> 12;
    result = (void *)sub_40243C(&Dest, v4 + (v4 >> 31), v2[43] / 10000);
  }
  return result;
}
// 40243C: using guessed type _DWORD __stdcall sub_40243C(_DWORD, _DWORD, _DWORD);

//----- (0046F8A0) --------------------------------------------------------
int __thiscall sub_46F8A0(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int result; // eax

  *a2 = this[49];
  result = this[50];
  *a3 = result;
  return result;
}

//----- (0046F8D0) --------------------------------------------------------
int __thiscall sub_46F8D0(_DWORD *this)
{
  int result; // eax

  result = 0;
  this[45] = 0;
  this[46] = 0;
  this[47] = 0;
  return result;
}

//----- (0046F8F0) --------------------------------------------------------
signed int __thiscall sub_46F8F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  _DWORD *v11; // ebp
  int v12; // edx
  int v13; // ecx
  int v14; // eax
  signed int v15; // esi
  int v16; // esi
  int v17; // edi
  int v18; // eax
  int v19; // edx
  int v20; // ecx
  int v21; // esi
  long double v22; // st7
  signed int v23; // edi
  int v25; // ecx
  int v26; // edi
  _DWORD *v27; // ebx
  int v28; // eax
  int v29; // edi
  _DWORD *v30; // ebx
  int v31; // eax
  int v32; // edi
  _DWORD *v33; // ebx
  int v34; // eax
  int v35; // edi
  _DWORD *v36; // ebx
  int v37; // eax
  unsigned int v38; // edx
  int v39; // ecx
  unsigned int v40; // edx
  int v41; // ecx
  unsigned int v42; // edx
  int v43; // ecx
  int v44; // [esp+Ch] [ebp+4h]

  v11 = this;
  v12 = this[43];
  v13 = this[42] / 10000 - a2;
  v14 = v12 / 10000 - a3;
  if ( dword_53A7C4 )
    v14 = 10 * v14 / 7;
  v15 = (signed int)sqrt((double)(v13 * v13 + v14 * v14));
  if ( v15 - (*(int (__thiscall **)(_DWORD *))(*v11 + 200))(v11) >= 0 )
    v44 = v15 - (*(int (__thiscall **)(_DWORD *))(*v11 + 200))(v11);
  else
    v44 = 0;
  v16 = v11[18];
  v17 = *(signed __int16 *)(v16 + 1046);
  v18 = v11[44] / 10000;
  v19 = 0;
  if ( a4 >= v17 + v18 )
  {
    v21 = *(signed __int16 *)(v16 + 1048);
    if ( a4 <= v21 + v18 )
      goto LABEL_11;
    v20 = a4 - v21;
  }
  else
  {
    v20 = a4 - v17;
  }
  v19 = v20 - v18;
LABEL_11:
  v22 = sqrt((double)(v44 * v44 + v19 * v19));
  v23 = (signed int)v22;
  if ( (*(int (__thiscall **)(_DWORD *))(*v11 + 144))(v11) )
    return (signed int)v22;
  if ( v23 < abs(a5) )
  {
    v25 = 1000;
    if ( a5 < 0 )
      v25 = 1000 * (v23 + a5) / a5;
    if ( a8 )
    {
      v26 = *((_DWORD *)dword_563908 + 83);
      v27 = Memory;
      v28 = a8 * v25 / 1000;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v26)) > v28 )
        v28 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v26);
      *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v26);
      *(_DWORD *)(v27[1] + 4 * v26) = v28 ^ *v27;
      v27[4] ^= *(_DWORD *)(v27[1] + 4 * v26);
    }
    if ( a7 )
    {
      v29 = *((_DWORD *)dword_563908 + 82);
      v30 = Memory;
      v31 = a7 * v25 / 1000;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v29)) > v31 )
        v31 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v29);
      *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v29);
      *(_DWORD *)(v30[1] + 4 * v29) = v31 ^ *v30;
      v30[4] ^= *(_DWORD *)(v30[1] + 4 * v29);
    }
    if ( a6 )
    {
      v32 = *((_DWORD *)dword_563908 + 80);
      v33 = Memory;
      v34 = a6 * v25 / 1000;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v32)) > v34 )
        v34 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v32);
      *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v32);
      *(_DWORD *)(v33[1] + 4 * v32) = v34 ^ *v33;
      v33[4] ^= *(_DWORD *)(v33[1] + 4 * v32);
    }
    if ( a9 )
    {
      v35 = *((_DWORD *)dword_563908 + 81);
      v36 = Memory;
      v37 = a9 * v25 / 1000;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v35)) > v37 )
        v37 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v35);
      *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v35);
      *(_DWORD *)(v36[1] + 4 * v35) = v37 ^ *v36;
      v36[4] ^= *(_DWORD *)(v36[1] + 4 * v35);
    }
    if ( *((_DWORD *)dword_563908 + 1501) )
    {
      if ( v11[39] < 0 )
      {
        if ( a10 )
        {
          v42 = (signed int)((unsigned __int64)(274877907i64 * a10 * v25) >> 32) >> 6;
          v43 = *((_DWORD *)dword_563908 + 1501);
          sub_401988(v42 + (v42 >> 31));
        }
      }
      else
      {
        if ( a11 > 0 )
        {
          v38 = (signed int)((unsigned __int64)(274877907i64 * a11 * v25) >> 32) >> 6;
          v39 = *((_DWORD *)dword_563908 + 1501);
          sub_401285(v38 + (v38 >> 31));
          return (signed int)v22;
        }
        if ( a11 < 0 )
        {
          v40 = (unsigned __int64)(274877907i64 * a11 * v25) >> 32;
          v41 = *((_DWORD *)dword_563908 + 1501);
          sub_40133E(((signed int)v40 >> 6) + (v40 >> 31));
          return (signed int)v22;
        }
      }
    }
  }
  return (signed int)v22;
}
// 401285: using guessed type _DWORD __stdcall sub_401285(_DWORD);
// 40133E: using guessed type _DWORD __stdcall sub_40133E(_DWORD);
// 401988: using guessed type _DWORD __stdcall sub_401988(_DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0046FD50) --------------------------------------------------------
int __thiscall sub_46FD50(_DWORD *this, double a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int result; // eax
  _DWORD *v11; // edi
  int v12; // eax
  int v13; // eax
  int v14; // esi
  long double v15; // st7
  int v16; // eax
  int v17; // edx
  long double v18; // st7
  unsigned int v19; // esi
  unsigned int v20; // eax
  int v21; // eax
  int v22; // [esp+Ch] [ebp-20h]
  int v23; // [esp+10h] [ebp-1Ch]
  int v24; // [esp+14h] [ebp-18h]
  double v25; // [esp+18h] [ebp-14h]
  char v26; // [esp+20h] [ebp-Ch]
  long double v27; // [esp+24h] [ebp-8h]
  signed int v28; // [esp+34h] [ebp+8h]
  signed int v29; // [esp+40h] [ebp+14h]

  result = (int)dword_563908;
  v11 = this;
  if ( *((_BYTE *)dword_563908 + 480 * *((_DWORD *)dword_563908 + 66) + 59599) )
  {
    if ( this[78] <= 0 )
    {
      (*(void (__thiscall **)(_DWORD *, int *, int *, char *))(*this + 84))(this, &v22, &v23, &v26);
      v12 = v23 / 10000 - HIDWORD(a2);
      v24 = v12;
      result = (v22 / 10000 - LODWORD(a2)) * (v22 / 10000 - LODWORD(a2)) + v12 * v12;
      LODWORD(v25) = v22 / 10000 - LODWORD(a2);
      v28 = result;
      if ( result < a7 * a7 )
      {
        v13 = 10 * a5;
        v29 = v13;
        v14 = v13;
        if ( a7 < 0 )
        {
          v27 = (double)-a7;
          v15 = (v27 - sqrt((double)v28)) * (double)v13 / v27;
          v13 = (signed int)v15;
          v29 = (signed int)v15;
        }
        v16 = a8 * v13 / v14;
        v11[77] = v16;
        v17 = v16;
        if ( v16 >= a8 )
          v17 = a8;
        if ( v17 >= 0 )
        {
          if ( v16 >= a8 )
            v16 = a8;
        }
        else
        {
          v16 = 0;
        }
        v18 = (double)v24;
        v11[77] = v16;
        sub_4C444A((void *)a8);
        v27 = v18;
        v25 = (double)v29;
        v19 = ((signed int)((unsigned __int64)(274877907i64 * a9 * a3) >> 32) >> 6)
            + (signed int)(cos(v18) * v25)
            + ((unsigned int)((unsigned __int64)(274877907i64 * a9 * a3) >> 32) >> 31);
        v20 = (signed int)((unsigned __int64)(274877907i64 * a9 * a4) >> 32) >> 6;
        v21 = v20 + (signed int)(sin(v18) * v25) + (v20 >> 31);
        if ( a10 )
        {
          v21 -= v11[46];
          v19 -= v11[45];
        }
        result = (*(int (__thiscall **)(_DWORD *, unsigned int, int, int))(*v11 + 244))(v11, v19, v21, 10 * a6);
      }
    }
  }
  return result;
}

//----- (0046FFA0) --------------------------------------------------------
int __thiscall sub_46FFA0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebp
  _DWORD *v6; // ebx
  unsigned int v7; // eax
  int v8; // edi
  int v9; // edx
  int v10; // esi
  __int16 v11; // ax
  char *v12; // ecx
  unsigned int v13; // eax
  char *v14; // edi
  char v15; // cl
  int v16; // eax
  int v17; // eax
  int v18; // esi
  int v19; // eax
  _DWORD *v20; // ebx
  signed int v21; // esi
  int v22; // ecx
  int v24; // [esp+10h] [ebp-210h]
  int v25; // [esp+18h] [ebp-208h]
  char Dest; // [esp+1Ch] [ebp-204h]
  char v27; // [esp+11Ch] [ebp-104h]

  v5 = a4;
  v6 = this;
  v7 = this[16];
  v8 = a3;
  this[49] = a3;
  this[50] = a4;
  v25 = a4;
  if ( v7 != -1 )
  {
    if ( v7 <= 0x1387 )
    {
      v9 = *((_DWORD *)dword_563908 + 1504);
      v10 = *(_DWORD *)(v9 + 4 * v7 + 12408);
      v24 = *(_DWORD *)(v9 + 4 * v7 + 12408);
      if ( v10 )
      {
        if ( v10 != *((_DWORD *)dword_563908 + 6897) || *((_DWORD *)dword_563918 + 2277) )
        {
          if ( *((_DWORD *)dword_563908 + 7740) )
            sprintf(&Dest, "%s (%d)", v10 + 32, *(_DWORD *)(v10 + 112));
          else
            sprintf(&Dest, "%s", v10 + 32);
          v11 = *(_WORD *)(v6[18] + 1036);
          if ( v11 == 1
            || (v12 = (char *)dword_563908, v11 == 2)
            && *(_WORD *)(v10 + 100) == *(_WORD *)(*((_DWORD *)dword_563908 + 6897) + 100) )
          {
            sprintf(
              &v27,
              " (hp=%d)",
              ((*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v6[35])) + 999) / 1000);
            v13 = strlen(&v27) + 1;
            v14 = (char *)&v25 + 3;
            do
              v15 = (v14++)[1];
            while ( v15 );
            qmemcpy(v14, &v27, v13);
            v12 = (char *)dword_563908;
            v10 = v24;
            v8 = a3;
          }
          v16 = 0;
          if ( *((_DWORD *)v12 + 6898) )
          {
            v16 = (*(int (**)(void))(**((_DWORD **)v12 + 6898) + 284))();
            v12 = (char *)dword_563908;
          }
          if ( *(signed __int16 *)(v10 + 100) == v16 )
            v17 = *(_DWORD *)(v12 + 59390);
          else
            v17 = *(_DWORD *)(v12 + 59394);
          if ( v6[51] != -1 )
            v17 = v6[51];
          if ( v10 == *((_DWORD *)v12 + 6897) )
            v17 = *(_DWORD *)(v12 + 59386);
          sub_40145B(&Dest, v17, v8, a4, a5);
          v18 = sub_49AD40(*((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2341) + 1516), &Dest) + v8 + 2;
          if ( *(_DWORD *)(v24 + 120) > 0 )
          {
            sprintf(&Dest, "[%d]", *(_DWORD *)(v24 + 120));
            sub_40145B(&Dest, 0, v18, a4, a5);
            v18 += sub_49AD40(*((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2341) + 1516), &Dest) + 2;
          }
          if ( *(_DWORD *)(v24 + 116) > 0 )
          {
            sprintf(&Dest, " %d", *(_DWORD *)(v24 + 116));
            sub_40145B(&Dest, 5, v18, a4, a5);
          }
          if ( (*(int (**)(void))(*(_DWORD *)v6[18] + 4))() != 3 )
            sub_401C1C(a2, a3 - 20, a4);
          v8 = a3;
        }
        v5 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2341) + 1516) + 2052)
                               + 174)
           + a4;
      }
    }
    if ( v6[14] >= 5001 )
    {
      v19 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v6[16] + 4);
      if ( v19 )
      {
        *(_DWORD *)(v19 + 196) = v6[49];
        *(_DWORD *)(v19 + 200) = v6[50];
      }
    }
  }
  v20 = v6 + 27;
  v21 = 8;
  do
  {
    if ( *v20 )
    {
      v22 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * *v20 + 4);
      if ( v22 )
        v5 += (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v22 + 48))(a2, v8, v5, a5);
    }
    ++v20;
    --v21;
  }
  while ( v21 );
  return v5 - v25;
}
// 40145B: using guessed type _DWORD __stdcall sub_40145B(_DWORD, _DWORD, __int16, __int16, _DWORD);
// 401C1C: using guessed type _DWORD __stdcall sub_401C1C(_DWORD, _DWORD, _DWORD);

//----- (00470430) --------------------------------------------------------
int __thiscall sub_470430(_DWORD *this)
{
  return this[16];
}

//----- (00470440) --------------------------------------------------------
int __thiscall sub_470440(_DWORD *this, unsigned int a2)
{
  _DWORD *v2; // esi
  _DWORD **v3; // ebx
  int v4; // edx
  int v5; // ecx
  bool v6; // sf
  unsigned __int8 v7; // of
  int v8; // ecx
  _DWORD *v9; // ecx
  _DWORD *v10; // eax
  int v11; // eax
  int v12; // edi
  int v13; // edx
  int v14; // ebp
  signed int v15; // esi
  int v16; // ecx
  int v17; // eax
  signed int v18; // esi
  int v19; // eax
  int v20; // eax
  char v22; // [esp+Ch] [ebp-8h]
  char v23; // [esp+10h] [ebp-4h]

  v2 = (_DWORD *)a2;
  v3 = (_DWORD **)this;
  if ( a2 <= 0x1387 && *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * a2 + 12408) )
    sub_40208B(this[14]);
  ((void (__thiscall *)(_DWORD **))(*v3)[16])(v3);
  v7 = __OFSUB__(v3[14], 5001);
  v6 = (signed int)v3[14] - 5001 < 0;
  v3[16] = v2;
  if ( !(v6 ^ v7) )
    v3[83] = (_DWORD *)sub_401D39(v5, v4);
  if ( *((_DWORD *)dword_563908 + 1501) )
  {
    v8 = *((_DWORD *)dword_563908 + 1501);
    v3[39] = (_DWORD *)sub_401FE1(v2);
  }
  v3[93] = 0;
  v9 = dword_563908;
  if ( v2 == (_DWORD *)*(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    ((void (__thiscall *)(_DWORD **))(*v3)[5])(v3);
    v10 = dword_563908;
    if ( *((_DWORD *)dword_563908 + 6898) )
    {
      (*(void (__thiscall **)(_DWORD))(**((_DWORD **)dword_563908 + 6898) + 224))(*((_DWORD *)dword_563908 + 6898));
      v10 = dword_563908;
    }
    v10[6898] = v3;
    sub_4015BE(dword_563908);
    *((_DWORD *)dword_563908 + 2692) = -1;
    sub_401B9F(dword_563908);
    v11 = (*(int (**)(void))(*v3[18] + 4))();
    v9 = dword_563908;
    if ( v11 == 4 )
    {
      v12 = 0;
      if ( *(_DWORD *)((char *)dword_563908 + 58554) > 0 )
      {
        v13 = rand() % 5;
        if ( v13 > 0 )
        {
          v14 = v13;
          do
          {
            v15 = 0;
            do
            {
              v12 = (v12 + 1) % 5;
              v16 = *((_DWORD *)dword_563908 + 1501);
              if ( sub_4017AD(v12, &v23, &v22, &a2) )
                break;
              ++v15;
            }
            while ( v15 < 5 );
            --v14;
          }
          while ( v14 );
        }
        sub_402063(-1, v12);
        goto LABEL_29;
      }
      v17 = *((_DWORD *)dword_563908 + 1504);
      if ( *(_DWORD *)(v17 + 12404) > 0 )
      {
        v18 = 6404;
        while ( 1 )
        {
          v19 = sub_4014FB(*(_DWORD *)(v18 + v17));
          v9 = dword_563908;
          if ( !v19 )
          {
            v20 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + v18) + 96);
            if ( v20 >= 0 )
              break;
          }
          v17 = *((_DWORD *)dword_563908 + 1504);
          ++v12;
          v18 += 4;
          if ( v12 >= *(_DWORD *)(v17 + 12404) )
            goto LABEL_27;
        }
        (*(void (__stdcall **)(int, signed int))(*(_DWORD *)dword_56391C + 148))(v20, -1);
        v9 = dword_563908;
      }
LABEL_27:
      if ( *(_DWORD *)(v9[1514] + 27436) > 0 )
      {
        sub_4013A7(v3);
LABEL_29:
        v9 = dword_563908;
        goto LABEL_30;
      }
    }
  }
LABEL_30:
  sub_4015BE(v9);
  return ((int (__thiscall *)(_DWORD **, _DWORD))(*v3)[1])(v3, 0);
}
// 4013A7: using guessed type int __thiscall sub_4013A7(_DWORD);
// 4014FB: using guessed type int __thiscall sub_4014FB(_DWORD);
// 4015BE: using guessed type int __thiscall sub_4015BE(_DWORD);
// 4017AD: using guessed type _DWORD __stdcall sub_4017AD(_DWORD, _DWORD, _DWORD, _DWORD);
// 401B9F: using guessed type int __thiscall sub_401B9F(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401FE1: using guessed type _DWORD __stdcall sub_401FE1(_DWORD);
// 402063: using guessed type _DWORD __stdcall sub_402063(_DWORD, _DWORD);
// 40208B: using guessed type _DWORD __stdcall sub_40208B(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00470730) --------------------------------------------------------
int __thiscall sub_470730(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ecx
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int v7; // ecx
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // edx
  int v15; // ecx
  int v16; // ecx
  __int64 v17; // rax
  bool v18; // sf

  v2 = this;
  v3 = this[35];
  v2[49] = -999;
  v2[50] = -999;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3)) <= 0 || v2[16] == -1 )
  {
    v4 = v2[18];
    v2[45] = 0;
    v2[46] = 0;
    v2[47] = 0;
    if ( (*(int (**)(void))(*(_DWORD *)v4 + 4))() != 5 )
      v2[93] = 0;
  }
  v5 = v2[16];
  if ( v5 >= 0 && v2[14] >= 5001 )
  {
    v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v5 + 4);
    if ( v6 )
      (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 96))(
        v2[42],
        v2[43],
        v2[44],
        v2[48],
        v2[45],
        v2[46],
        v2[47]);
  }
  v7 = v2[81];
  v8 = v2[82];
  if ( v7 >= v8 )
  {
    if ( v7 <= v8 )
      goto LABEL_16;
    v9 = v7 - 16 * a2;
    v2[81] = v9;
    if ( v9 > v8 )
      goto LABEL_14;
  }
  else
  {
    v9 = 16 * a2 + v7;
    v2[81] = v9;
    if ( v9 < v8 )
    {
LABEL_14:
      v8 = v9;
      goto LABEL_15;
    }
  }
LABEL_15:
  v2[81] = v8;
LABEL_16:
  v10 = v2[84];
  if ( v10 > 0 )
    v2[84] = v10 - a2;
  v11 = v2[77];
  if ( v11 > 0 )
    v2[77] = v11 - a2;
  v12 = v2[78];
  if ( v12 > 0 )
  {
    v13 = v12 - a2;
    if ( v13 >= 1000 )
      v13 = 1000;
    v2[78] = v13;
    if ( v13 < 0 )
      v2[78] = 0;
  }
  (*(void (__thiscall **)(_DWORD *))(*v2 + 180))(v2);
  v17 = sub_401D39(v15, v14) - v2[95];
  LODWORD(v17) = (HIDWORD(v17) ^ v17) - HIDWORD(v17);
  if ( (signed int)v17 > 50 )
  {
    LODWORD(v17) = sub_401D39(v16, HIDWORD(v17));
    v18 = v2[16] < 0;
    v2[95] = v17;
    if ( !v18 )
    {
      LODWORD(v17) = sub_40237E(v2);
      if ( (_DWORD)v17 )
      {
        LODWORD(v17) = 480 * (*(int (__thiscall **)(_DWORD *))(*v2 + 108))(v2);
        if ( *((_BYTE *)dword_563908 + v17 + 59602) )
          LODWORD(v17) = sub_401136(v2[16]);
      }
    }
  }
  return v17;
}
// 401136: using guessed type _DWORD __stdcall sub_401136(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00470960) --------------------------------------------------------
void __thiscall sub_470960(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ebp
  unsigned int v5; // edx
  long double v6; // st7
  int v7; // esi
  int v8; // edi
  unsigned int v9; // edx
  int v10; // ebx
  double v11; // ST2C_8
  int v12; // ecx

  if ( this[39] >= 0 && *((_DWORD *)dword_563908 + 1501) )
  {
    v4 = this[18];
    v5 = (unsigned __int64)(1759218605i64 * (signed int)this[42]) >> 32;
    v6 = (double)((this[48] + 180000) % 240000) * 0.00002617993877916667;
    v7 = ((signed int)v5 >> 12) + (v5 >> 31);
    v8 = this[43] / 10000;
    v9 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)this[44]) >> 32) >> 12;
    v10 = v9 + (v9 >> 31);
    if ( *(_WORD *)(v4 + 1028) )
    {
      v11 = (double)*(signed __int16 *)(v4 + 1028);
      v7 += (signed int)(cos(v6) * v11);
      v8 += sub_401FD2((signed int)(sin(v6) * v11));
    }
    v12 = *((_DWORD *)dword_563908 + 1501);
    sub_40207C(a2, a3, a4, v7, v8, v10, *(signed __int16 *)(v4 + 1030));
  }
}
// 401FD2: using guessed type _DWORD __cdecl sub_401FD2(_DWORD);
// 40207C: using guessed type _DWORD __cdecl sub_40207C(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00470AC0) --------------------------------------------------------
void __thiscall sub_470AC0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // ebx
  signed int v5; // eax
  int v6; // ebp
  int v7; // esi
  int v8; // eax
  int v9; // ecx
  int v10; // edi
  int v11; // esi
  unsigned int v12; // edx
  int v13; // ecx
  int v14; // eax
  int v15; // ebx
  long double v16; // st7
  int v17; // edi
  int v18; // eax
  int v19; // esi
  double v20; // ST4C_8
  int v21; // eax
  int v22; // eax
  int v23; // [esp+Ch] [ebp-34h]
  signed __int16 *v24; // [esp+10h] [ebp-30h]
  signed int v25; // [esp+14h] [ebp-2Ch]
  int v26; // [esp+18h] [ebp-28h]
  _DWORD *v27; // [esp+1Ch] [ebp-24h]
  int v28; // [esp+20h] [ebp-20h]
  int v29; // [esp+2Ch] [ebp-14h]
  int v30; // [esp+30h] [ebp-10h]
  int v31; // [esp+34h] [ebp-Ch]
  long double v32; // [esp+38h] [ebp-8h]

  v4 = this;
  v27 = this;
  v28 = 0;
  if ( this[93] > 0 )
  {
    v24 = (signed __int16 *)(this + 85);
    do
    {
      v5 = abs(abs(*v24));
      if ( v5 <= 5100 )
      {
        v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1507) + 4 * v5 + 8008);
        if ( v6 )
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 8))(v6) )
          {
            v7 = *(_DWORD *)(v6 + 568);
            v23 = *(_DWORD *)(v6 + 568);
            if ( v7 )
            {
              v8 = (*(int (__thiscall **)(_DWORD *, int *, int *, int *))(*v4 + 84))(v4, &v29, &v30, &v31);
              v9 = *(signed __int16 *)(v7 + 176);
              v10 = v8;
              v11 = *(signed __int16 *)(v6 + 508);
              v12 = (signed int)((unsigned __int64)(1172812403i64 * v9 * ((v8 + 120000 / v9) % 240000)) >> 32) >> 16;
              v13 = v12 + (v12 >> 31);
              if ( *(_WORD *)(v6 + 508) || (v11 = *(signed __int16 *)(v23 + 170), *(_WORD *)(v23 + 170)) )
              {
                v14 = v13 * *(signed __int16 *)(v23 + 178)
                    + *(signed __int16 *)(v23 + 178) * (*((_DWORD *)dword_563908 + 2705) % v11) / v11;
                v4 = v27;
              }
              else
              {
                v14 = v13 * *(signed __int16 *)(v23 + 178);
              }
              v15 = v4[18];
              v26 = v14;
              v25 = *(signed __int16 *)(v15 + 1028);
              v16 = (double)((v10 + 180000) % 240000) * 0.00002617993877916667;
              v32 = v16;
              v17 = v29 / 10000;
              if ( dword_53A7C4 )
                v18 = 7 * (v31 / 10000) / 10;
              else
                v18 = 0;
              v19 = v30 / 10000 - v18;
              if ( v25 )
              {
                v20 = (double)v25;
                v17 += (signed int)(cos(v16) * v20);
                v21 = (signed int)(sin(v32) * v20);
                if ( dword_53A7C4 )
                  v21 = 7 * v21 / 10;
                v19 += v21;
              }
              if ( dword_53A7C4 )
                v22 = 7 * *(signed __int16 *)(v15 + 1030) / 10;
              else
                v22 = 0;
              sub_4A50B0(v23, v26, a2, v17 - a3, v19 - v22 - a4, *(_DWORD *)(v6 + 572), *(_DWORD *)(v6 + 504), 0, 0, 0);
              v4 = v27;
            }
          }
        }
      }
      ++v24;
      ++v28;
    }
    while ( v28 < v4[93] );
  }
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00470E10) --------------------------------------------------------
_WORD *__thiscall sub_470E10(_DWORD *this, int a2, int a3, int a4)
{
  _WORD *result; // eax
  bool v5; // zf
  _DWORD *v6; // ebx
  int v7; // eax
  int v8; // edi
  int v9; // eax
  int v10; // esi
  signed int v11; // ebp
  int v12; // edi
  char v13; // al
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  __int16 v17; // ax
  int v18; // eax
  int v19; // edi
  int v20; // ST38_4
  int v21; // edx
  __int64 v22; // rax
  int v23; // ebp
  int v24; // ST38_4
  int v25; // ebp
  int v26; // eax
  int v27; // eax
  __int64 v28; // rax
  int v29; // ebp
  int v30; // ebp
  int v31; // edi
  double v32; // st7
  int v33; // eax
  double v34; // st7
  signed int v35; // eax
  long double v36; // st7
  unsigned int v37; // edx
  int v38; // ecx
  int v39; // ebx
  int v40; // esi
  int v41; // edi
  int v42; // ebx
  signed __int64 v43; // rax
  int v44; // ecx
  int v45; // edx
  int v46; // eax
  int v47; // eax
  int v48; // ST08_4
  signed int v49; // [esp+20h] [ebp-60h]
  int v50; // [esp+24h] [ebp-5Ch]
  int v51; // [esp+24h] [ebp-5Ch]
  signed __int16 *v52; // [esp+24h] [ebp-5Ch]
  signed int v53; // [esp+28h] [ebp-58h]
  int v54; // [esp+2Ch] [ebp-54h]
  int v55; // [esp+30h] [ebp-50h]
  int v56; // [esp+34h] [ebp-4Ch]
  int v57; // [esp+38h] [ebp-48h]
  int v58; // [esp+3Ch] [ebp-44h]
  int v59; // [esp+40h] [ebp-40h]
  int v60; // [esp+44h] [ebp-3Ch]
  int v61; // [esp+48h] [ebp-38h]
  int v62; // [esp+4Ch] [ebp-34h]
  int v63; // [esp+50h] [ebp-30h]
  int v64; // [esp+54h] [ebp-2Ch]
  int v65[2]; // [esp+5Ch] [ebp-24h]
  double v66; // [esp+64h] [ebp-1Ch]
  char v67; // [esp+6Ch] [ebp-14h]
  long double v68; // [esp+70h] [ebp-10h]
  long double v69; // [esp+78h] [ebp-8h]

  result = dword_563918;
  v5 = *((_DWORD *)dword_563918 + 2276) == 0;
  v6 = this;
  LODWORD(v66) = this;
  if ( !v5 )
  {
    result = (_WORD *)this[18];
    if ( result[610] || result[611] )
    {
      v7 = (*(int (__stdcall **)(int *, int *, int *))(*this + 84))(&v54, &v55, &v56);
      v54 = 10000 * (v54 / 10000);
      v55 = 10000 * (v55 / 10000);
      v8 = 10000 * (v56 / 10000);
      v65[1] = v7;
      v56 = 10000 * (v56 / 10000);
      v61 = (v7 + 180000) % 240000;
      v69 = (double)v61 * 0.00002617993877916667;
      v68 = cos(v69);
      v69 = sin(v69);
      v9 = *(signed __int16 *)(v6[18] + 1030);
      v10 = a2;
      v59 = 0;
      v60 = 0;
      v11 = 1228;
      v62 = v9;
      v49 = 1228;
      v53 = 1232;
      while ( 1 )
      {
        if ( dword_53A7C4 )
          v58 = 70000 * v59 * (v62 + v8 / 10000) / 10;
        else
          v58 = 0;
        v12 = v6[18];
        if ( *(_WORD *)(v12 + v11 - 4) > 0 && abs(*(signed __int16 *)(v12 + v11 - 8)) > 0 )
        {
          v13 = *(_BYTE *)(v53 + v12);
          v14 = *(_DWORD *)(v53 + v12) >> 8;
          BYTE2(v57) = *(_DWORD *)(v53 + v12) >> 16;
          BYTE1(v57) = v14;
          LOBYTE(v57) = v13;
          v63 = (unsigned __int16)sub_40223E(dword_576828, v57);
          v17 = *(_WORD *)(v12 + v11);
          if ( v17 <= 0 )
          {
            if ( v17 >= 0 )
            {
              v50 = *(signed __int16 *)(v12 + 1028) + 16;
            }
            else
            {
              v22 = *(signed __int16 *)(v12 + v11);
              v23 = abs(*(signed __int16 *)(v12 + v11));
              v24 = v23 - sub_401D39(v16, HIDWORD(v22)) % v23 - 1;
              v25 = v6[18];
              v26 = abs(*(signed __int16 *)(v49 + v25));
              v61 = v26;
              v27 = v24 * *(signed __int16 *)(v49 + v25 - 4) / v26;
              v11 = v49;
              v50 = v27 + *(signed __int16 *)(v12 + 1028) + 16;
            }
          }
          else
          {
            v18 = v12;
            v19 = *(signed __int16 *)(v12 + v11);
            v20 = v18;
            v61 = v19;
            v21 = sub_401D39(v16, v15) % v19;
            v12 = v6[18];
            v61 = abs(v61);
            v50 = v21 * *(signed __int16 *)(v20 + v11 - 4) / v61 + *(signed __int16 *)(v12 + 1028) + 16;
          }
          v28 = *(signed __int16 *)(v12 + v11 - 8);
          v29 = HIDWORD(v28) ^ *(signed __int16 *)(v12 + v11 - 8);
          v61 = *(signed __int16 *)(v12 + v49 - 4);
          v30 = v29 - HIDWORD(v28);
          (*(void (__thiscall **)(int, char *, char *))(*(_DWORD *)v10 + 92))(v10, &v67, (char *)&v66 + 4);
          v31 = v50;
          if ( v50 <= v30 )
          {
            v51 = 10000 * v50;
            v63 = (unsigned __int16)v63;
            v65[0] = 10000 * v61;
            do
            {
              v32 = (double)v51;
              v64 = (signed int)(v68 * v32);
              v33 = (signed int)(v32 * v69);
              if ( dword_53A7C4 )
                v33 = 7 * v33 / 10;
              (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v10 + 24))(
                v10,
                (v64 + v54) / 10000 - a3,
                (v55 + v33 - v58) / 10000 - a4,
                v63);
              v31 += v61;
              v51 += v65[0];
            }
            while ( v31 <= v30 );
          }
          (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 96))(v10);
          v11 = v49;
        }
        result = (_WORD *)v6[18];
        v52 = *(signed __int16 **)&result[v53 / 2u + 116];
        if ( *(_DWORD *)&result[v53 / 2u + 116] )
        {
          v65[0] = 10000 * abs(*(signed __int16 *)((char *)result + v11 - 8));
          v34 = (double)v65[0];
          v35 = (signed int)(v68 * v34);
          v36 = v34 * v69;
          if ( dword_53A7C4 )
          {
            v37 = (signed int)((unsigned __int64)(12025908433i64 * (signed int)v36) >> 32) >> 2;
            v38 = v37 + (v37 >> 31);
          }
          else
          {
            v38 = (signed int)v36;
          }
          v39 = v6[18];
          v65[0] = *(_DWORD *)(v39 + v53 + 240);
          v40 = (v35 + v54) / 10000 - a3;
          v41 = (v55 + v38 - v58) / 10000 - a4;
          v42 = *(signed __int16 *)(v39 + v60 + 1296);
          v43 = 1172812403i64 * v52[88] * ((v65[1] + 120000 / v52[88]) % 240000);
          v44 = (SHIDWORD(v43) >> 16) + (HIDWORD(v43) >> 31);
          v45 = (int)v52;
          if ( v42 || (v42 = v52[85]) != 0 )
          {
            v47 = *((_DWORD *)dword_563908 + 2705);
            v61 = v52[89];
            v46 = v44 * v61 + v61 * (v47 % v42) / v42;
            v45 = (int)v52;
          }
          else
          {
            v46 = v44 * v52[89];
          }
          v6 = (_DWORD *)LODWORD(v66);
          v48 = v40;
          v10 = a2;
          result = (_WORD *)sub_4A50B0(
                              v45,
                              v46,
                              a2,
                              v48,
                              v41,
                              v65[0],
                              *(_DWORD *)(*(_DWORD *)(LODWORD(v66) + 72) + v60 + 1292),
                              0,
                              0,
                              0);
          v11 = v49;
        }
        ++v59;
        v53 += 4;
        v60 += 60;
        v11 += 2;
        v49 = v11;
        if ( v11 >= 1232 )
          break;
        v8 = v56;
      }
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;
// 576828: using guessed type int dword_576828;

//----- (004714A0) --------------------------------------------------------
int __thiscall sub_4714A0(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // edx
  int v6; // eax
  int v7; // esi
  int v8; // ecx
  int (__stdcall *v9)(_DWORD, int *, signed int); // eax
  int v11; // [esp+4h] [ebp-10h]
  int v12; // [esp+8h] [ebp-Ch]
  int v13; // [esp+Ch] [ebp-8h]
  int v14; // [esp+10h] [ebp-4h]

  v4 = this[42] / 10000;
  v11 = v4 + this[19] - a3;
  v5 = this[43];
  v6 = this[21] - a3 + v4 + 1;
  v7 = this[20];
  v8 = this[22];
  v13 = v6;
  v14 = v8 - a4 + v5 / 10000 + 1;
  v9 = *(int (__stdcall **)(_DWORD, int *, signed int))(*(_DWORD *)a2 + 56);
  v12 = v5 / 10000 + v7 - a4;
  return v9(*((unsigned __int16 *)dword_563908 + 89), &v11, 1);
}

//----- (00471570) --------------------------------------------------------
int __thiscall sub_471570(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // edi
  int v4; // edi
  int v5; // eax
  unsigned int v6; // edx

  v1 = this;
  result = this[18];
  if ( *(_WORD *)(result + 1038) )
  {
    v3 = *(_DWORD *)((char *)dword_563908 + 57678);
    result = abs(this[42] / 10000 - *((_DWORD *)dword_563908 + 62));
    if ( result < v3 )
    {
      result = abs(this[43] / 10000 - *((_DWORD *)dword_563908 + 63));
      if ( result < v3 )
      {
        v4 = this[18];
        v5 = (*(int (__thiscall **)(_DWORD *))(*this + 204))(this);
        v6 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[42]) >> 32) >> 12;
        result = sub_402590(
                   *(signed __int16 *)(v4 + 1038),
                   0,
                   v6 + (v6 >> 31),
                   v1[43] / 10000,
                   *(signed __int16 *)(v4 + 1030) + v1[44] / 10000,
                   0,
                   v1[45] / 10,
                   v1[46] / 10,
                   v1[47] / 10,
                   v1[48] / 1000,
                   0,
                   0,
                   v1[16],
                   v5,
                   0,
                   0,
                   0,
                   0);
      }
    }
  }
  return result;
}
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00471730) --------------------------------------------------------
bool __thiscall sub_471730(_DWORD *this)
{
  return (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) <= 0;
}

//----- (00471760) --------------------------------------------------------
_DWORD *__thiscall sub_471760(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // edx
  _DWORD *v4; // edi
  int v5; // ecx
  int v6; // esi
  int v7; // eax
  int v8; // esi
  _DWORD *v9; // eax
  int v10; // ecx
  _DWORD *v11; // edx
  _DWORD *v12; // eax
  int v13; // edi
  _DWORD *v14; // ecx
  int v15; // edx
  int v16; // esi

  result = Memory;
  v3 = *((_DWORD *)Memory + 1);
  v4 = this;
  v5 = this[35];
  v6 = *(_DWORD *)Memory ^ *(_DWORD *)(v3 + 4 * v5);
  if ( v6 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v3 + 4 * v5) )
  {
    v7 = (*(int (__thiscall **)(_DWORD *))(*v4 + 172))(v4);
    v8 = a2 + v6;
    if ( v8 > 0 )
    {
      if ( v8 > v7 )
        v8 = v7;
    }
    else
    {
      if ( *((_BYTE *)dword_563908 + 480 * *((_DWORD *)dword_563908 + 66) + 59598) )
      {
        v9 = Memory;
        v10 = v4[35];
        v11 = (char *)Memory + 4;
        v9[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v10);
        *(_DWORD *)(*v11 + 4 * v10) = v8 ^ *v9;
        v9[4] ^= *(_DWORD *)(*v11 + 4 * v10);
        return (_DWORD *)(*(int (__thiscall **)(_DWORD *, signed int, _DWORD))(*v4 + 236))(
                           v4,
                           2,
                           *((_DWORD *)dword_563908 + 66));
      }
      v8 = 1;
    }
    v12 = Memory;
    v13 = v4[35];
    v12[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v13);
    v14 = v12 + 1;
    v15 = v8 ^ *v12;
    v16 = v12[1];
    result = v12 + 4;
    *(_DWORD *)(v16 + 4 * v13) = v15;
    *result ^= *(_DWORD *)(*v14 + 4 * v13);
  }
  return result;
}

//----- (00471870) --------------------------------------------------------
_DWORD *__thiscall sub_471870(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // edx
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // edi
  int v7; // eax
  int v8; // edi
  _DWORD *v9; // eax
  int v10; // ecx
  _DWORD *v11; // edx
  _DWORD *v12; // eax
  int v13; // esi
  _DWORD *v14; // ecx
  int v15; // edx
  int v16; // edi

  result = Memory;
  v3 = *((_DWORD *)Memory + 1);
  v4 = this;
  v5 = this[35];
  v6 = *(_DWORD *)Memory ^ *(_DWORD *)(v3 + 4 * v5);
  if ( v6 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v3 + 4 * v5) )
  {
    v7 = (*(int (__thiscall **)(_DWORD *))(*v4 + 172))(v4);
    v8 = a2 + v6;
    if ( v8 > 0 )
    {
      if ( v8 > v7 )
        v8 = v7;
    }
    else
    {
      if ( *(_DWORD *)((char *)dword_563908 + 58290) )
      {
        v9 = Memory;
        v10 = v4[35];
        v11 = (char *)Memory + 4;
        v9[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v10);
        *(_DWORD *)(*v11 + 4 * v10) = v8 ^ *v9;
        v9[4] ^= *(_DWORD *)(*v11 + 4 * v10);
        return (_DWORD *)(*(int (__thiscall **)(_DWORD *, signed int, _DWORD))(*v4 + 236))(v4, 3, 0);
      }
      v8 = 1;
    }
    v12 = Memory;
    v13 = v4[35];
    v12[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v13);
    v14 = v12 + 1;
    v15 = v8 ^ *v12;
    v16 = v12[1];
    result = v12 + 4;
    *(_DWORD *)(v16 + 4 * v13) = v15;
    *result ^= *(_DWORD *)(*v14 + 4 * v13);
  }
  return result;
}

//----- (00471970) --------------------------------------------------------
_DWORD *__thiscall sub_471970(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // edx
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // edi
  int v7; // eax
  int v8; // edi
  _DWORD *v9; // eax
  int v10; // ecx
  _DWORD *v11; // edx
  _DWORD *v12; // eax
  int v13; // esi
  _DWORD *v14; // ecx
  int v15; // edx
  int v16; // edi

  result = Memory;
  v3 = *((_DWORD *)Memory + 1);
  v4 = this;
  v5 = this[35];
  v6 = *(_DWORD *)Memory ^ *(_DWORD *)(v3 + 4 * v5);
  if ( v6 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v3 + 4 * v5) )
  {
    v7 = (*(int (__thiscall **)(_DWORD *))(*v4 + 172))(v4);
    v8 = a2 + v6;
    if ( v8 > 0 )
    {
      if ( v8 > v7 )
        v8 = v7;
    }
    else
    {
      if ( *(_DWORD *)((char *)dword_563908 + 31730) )
      {
        v9 = Memory;
        v10 = v4[35];
        v11 = (char *)Memory + 4;
        v9[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v10);
        *(_DWORD *)(*v11 + 4 * v10) = v8 ^ *v9;
        v9[4] ^= *(_DWORD *)(*v11 + 4 * v10);
        return (_DWORD *)(*(int (__thiscall **)(_DWORD *, signed int, _DWORD))(*v4 + 236))(v4, 4, 0);
      }
      v8 = 1;
    }
    v12 = Memory;
    v13 = v4[35];
    v12[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v13);
    v14 = v12 + 1;
    v15 = v8 ^ *v12;
    v16 = v12[1];
    result = v12 + 4;
    *(_DWORD *)(v16 + 4 * v13) = v15;
    *result ^= *(_DWORD *)(*v14 + 4 * v13);
  }
  return result;
}

//----- (00471A70) --------------------------------------------------------
_DWORD *__thiscall sub_471A70(_DWORD *this, int a2)
{
  _DWORD *v2; // eax
  int v3; // ecx
  _DWORD *v4; // edx
  int v5; // esi
  _DWORD *result; // eax

  v2 = Memory;
  v3 = this[35];
  v4 = (char *)Memory + 4;
  v2[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3);
  v5 = a2 ^ *v2;
  result = v2 + 4;
  *(_DWORD *)(*v4 + 4 * v3) = v5;
  *result ^= *(_DWORD *)(*v4 + 4 * v3);
  return result;
}

//----- (00471AC0) --------------------------------------------------------
int __thiscall sub_471AC0(_DWORD *this)
{
  return *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35]);
}

//----- (00471AE0) --------------------------------------------------------
int __thiscall sub_471AE0(_DWORD *this)
{
  int result; // eax

  result = 1000 * *(_DWORD *)(this[18] + 1080);
  if ( this[14] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
    result += *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 84));
  if ( result < 1 )
    result = 1;
  return result;
}

//----- (00471B40) --------------------------------------------------------
int __thiscall sub_471B40(_DWORD *this)
{
  return this[81];
}

//----- (00471B50) --------------------------------------------------------
BOOL __thiscall sub_471B50(_DWORD *this)
{
  int v1; // esi
  int v2; // eax
  int v3; // edi
  int v4; // esi
  int v5; // ebx

  v1 = this[42] / 10000 - *((_DWORD *)dword_563908 + 62);
  v2 = this[43] / 10000 - *((_DWORD *)dword_563908 + 63);
  v3 = v1 * v1 + v2 * v2;
  v4 = this[36];
  if ( this[36] <= *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 20) )
    v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 20);
  v5 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
  return (*(int (**)(void))(*this + 204))() != v5 && v3 >= v4 * v4;
}

//----- (00471C10) --------------------------------------------------------
int __thiscall sub_471C10(_DWORD *this)
{
  int v1; // edi
  _DWORD *v2; // esi
  signed int v3; // ebx
  int v4; // ecx
  int v5; // eax

  v1 = this[40];
  v2 = this + 27;
  v3 = 8;
  do
  {
    if ( *v2 )
    {
      v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * *v2 + 4);
      if ( v4 )
      {
        v5 = (*(int (**)(void))(*(_DWORD *)v4 + 56))();
        if ( v5 > v1 )
          v1 = v5;
      }
    }
    ++v2;
    --v3;
  }
  while ( v3 );
  return v1;
}

//----- (00471C70) --------------------------------------------------------
int __thiscall sub_471C70(signed __int16 *this)
{
  signed __int16 *v1; // esi
  int result; // eax
  signed __int16 *v3; // ebx
  signed int v4; // eax
  signed __int16 *v5; // edi
  signed int v6; // eax
  int v7; // ebp
  int v8; // edx
  int v9; // ecx
  signed __int16 v10; // cx
  int v11; // ebp
  int v12; // edx
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  unsigned int v16; // eax
  int v17; // eax
  unsigned int v18; // edx
  int v19; // ecx
  int v20; // edx
  int v21; // ecx
  int v22; // edi
  int v23; // edx
  int v24; // ecx
  int v25; // [esp+8h] [ebp-4h]

  v1 = this;
  *((_DWORD *)this + 36) = 0x7FFF;
  *((_DWORD *)this + 37) = 0x7FFF;
  *((_DWORD *)this + 38) = 0;
  result = sub_40237E(this);
  if ( !result )
  {
    *((_DWORD *)v1 + 81) = 0;
    *((_DWORD *)v1 + 82) = 0;
    return result;
  }
  v25 = 0;
  if ( *((_DWORD *)v1 + 93) > 0 )
  {
    v3 = v1 + 170;
    do
    {
      v4 = abs(*v3);
      if ( v4 <= 5100 )
      {
        v5 = *(signed __int16 **)(*((_DWORD *)dword_563908 + 1507) + 4 * v4 + 8008);
        if ( v5 )
        {
          if ( (*(int (__thiscall **)(signed __int16 *))(*(_DWORD *)v5 + 12))(v5) )
          {
            v6 = 100000;
            if ( v5[164] > 0 || v5[163] )
            {
              v7 = (*(int (__thiscall **)(signed __int16 *))(*(_DWORD *)v1 + 56))(v1);
              v6 = abs(sub_401D39(v9, v8) - v7);
            }
            v10 = v5[159];
            if ( v10 >= 0 && v6 >= v5[164] && (signed int)v10 < *((_DWORD *)v1 + 36) )
              *((_DWORD *)v1 + 36) = v10;
            if ( v5[158] >= 0 )
            {
              v11 = (*(int (__thiscall **)(signed __int16 *))(*(_DWORD *)v1 + 56))(v1);
              if ( abs(sub_401D39(v13, v12) - v11) >= (signed int)v5[163] )
              {
                v14 = v5[158];
                if ( v14 < *((_DWORD *)v1 + 37) )
                  *((_DWORD *)v1 + 37) = v14;
              }
            }
            LOWORD(v15) = v5[162];
            if ( (v15 & 0x8000u) == 0 )
            {
              v15 = (signed __int16)v15;
              if ( (signed int)(signed __int16)v15 > *((_DWORD *)v1 + 38) )
                *((_DWORD *)v1 + 38) = v15;
            }
          }
        }
      }
      ++v3;
      ++v25;
    }
    while ( v25 < *((_DWORD *)v1 + 93) );
  }
  v16 = *((_DWORD *)v1 + 16);
  if ( v16 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    result = 1000;
    *((_DWORD *)v1 + 82) = 1000;
    *((_DWORD *)v1 + 81) = 1000;
    return result;
  }
  if ( !*(_DWORD *)((char *)dword_563908 + 58334) && (v16 & 0x80000000) == 0 && v16 <= 0x1387 )
  {
    v17 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v16 + 12408);
    if ( v17 )
    {
      if ( *(_DWORD *)(v17 + 120) > 0 )
        goto LABEL_32;
    }
  }
  v18 = (signed int)((unsigned __int64)(1759218605i64 * *((signed int *)v1 + 42)) >> 32) >> 16;
  v19 = *((_DWORD *)dword_563908 + 1532);
  if ( sub_401B13(v18 + (v18 >> 31), *((_DWORD *)v1 + 43) / 160000) )
  {
    *((_DWORD *)v1 + 80) = sub_401D39(v21, v20);
LABEL_32:
    result = *((_DWORD *)v1 + 81);
    *((_DWORD *)v1 + 82) = 1000;
    return result;
  }
  v22 = sub_401A9B(*((_DWORD *)dword_563908 + 6897));
  if ( abs(sub_401D39(v24, v23) - *((_DWORD *)v1 + 80)) > v22 )
    *((_DWORD *)v1 + 82) = 0;
  return *((_DWORD *)v1 + 81);
}
// 401A9B: using guessed type int __thiscall sub_401A9B(_DWORD);
// 401B13: using guessed type _DWORD __stdcall sub_401B13(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00471F50) --------------------------------------------------------
int __thiscall sub_471F50(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int result; // eax
  signed int v7; // edx

  v5 = this;
  result = this[16];
  if ( result != -1 && (*((_WORD *)dword_563908 + 28756) || this == *((_DWORD **)dword_563908 + 6898)) )
  {
    if ( a5 )
    {
      v7 = -1;
      if ( (unsigned int)result <= 0x1387 )
      {
        result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408);
        if ( result )
          v7 = *(signed __int16 *)(result + 100);
      }
      if ( a4 == v7 )
      {
        result = abs(this[42] / 10000 - a2);
        if ( result < a5 )
        {
          result = abs(this[43] / 10000 - a3);
          if ( result < a5 )
          {
            result = sub_40237E(this);
            if ( result )
              result = (*(int (__thiscall **)(_DWORD *))(*v5 + 112))(v5);
          }
        }
      }
    }
    else if ( result == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
    {
      result = (*(int (__thiscall **)(_DWORD *))(*this + 112))(this);
    }
  }
  return result;
}
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00472060) --------------------------------------------------------
unsigned int __thiscall sub_472060(_DWORD *this)
{
  _DWORD *v1; // esi
  unsigned int result; // eax
  int v3; // eax
  int v4; // ecx
  int v5; // [esp+Ch] [ebp-24h]
  int v6; // [esp+10h] [ebp-20h]
  char v7; // [esp+14h] [ebp-1Ch]
  int v8; // [esp+18h] [ebp-18h]
  int v9; // [esp+1Ch] [ebp-14h]
  int v10; // [esp+20h] [ebp-10h]
  int v11; // [esp+2Ch] [ebp-4h]

  v1 = this;
  result = this[16];
  if ( result <= 0x1387 && *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408) )
  {
    v3 = (*(int (__thiscall **)(_DWORD *, int *, int *, char *))(*this + 84))(this, &v5, &v6, &v7);
    v8 = v5 / 160000;
    v9 = v6 / 160000;
    v10 = v3 / 1000;
    sub_4017FD(&v8);
    if ( *((_WORD *)dword_563908 + 28756) == 2 && v1 != *((_DWORD **)dword_563908 + 6898) )
      v11 = 0;
    v4 = *((_DWORD *)dword_563908 + 1532);
    result = sub_4014C9(&v8);
  }
  return result;
}
// 4014C9: using guessed type _DWORD __stdcall sub_4014C9(_DWORD);
// 4017FD: using guessed type _DWORD __stdcall sub_4017FD(_DWORD);

//----- (00472170) --------------------------------------------------------
int __thiscall sub_472170(_DWORD *this)
{
  return *(signed __int16 *)(this[18] + 1032);
}

//----- (00472180) --------------------------------------------------------
int __thiscall sub_472180(_DWORD *this)
{
  return *(signed __int16 *)(this[18] + 1034);
}

//----- (00472190) --------------------------------------------------------
int __thiscall sub_472190(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edx
  void *v5; // ecx
  void *v6; // edx
  int result; // eax
  _WORD *v8; // ecx

  *((_DWORD *)dword_563908 + 6939) = 0;
  v3 = this;
  v4 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)this[42]) >> 32) >> 12;
  (*(void (__stdcall **)(_DWORD, int, int, unsigned int, int, int, int))(*(_DWORD *)dword_56391C + 28))(
    this[14],
    a2,
    a3,
    v4 + (v4 >> 31),
    this[43] / 10000,
    this[44] / 10000,
    this[48] / 1000);
  (*(void (__thiscall **)(_DWORD *))(*v3 + 316))(v3);
  v5 = dword_563908;
  *((_DWORD *)dword_563908 + 6933) = a2;
  v6 = dword_563908;
  *((_DWORD *)dword_563908 + 6934) = a3;
  result = sub_401D39(v5, v6);
  *((_DWORD *)dword_563908 + 6932) = result;
  v8 = dword_563908;
  if ( *((_DWORD *)dword_563908 + 6923) )
  {
    *((_DWORD *)dword_563908 + 6923) = 0;
    v8 = dword_563908;
  }
  if ( v8[15417] )
    result = sub_401415();
  return result;
}
// 401415: using guessed type int sub_401415(void);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (004722D0) --------------------------------------------------------
_DWORD *__thiscall sub_4722D0(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  _DWORD *v12; // esi
  _DWORD *v13; // eax
  int v14; // ecx
  _DWORD *result; // eax
  int v16; // edx
  int v17; // ecx
  int v18; // esi
  __int16 v19; // dx
  int v20; // eax
  BOOL v21; // ebp
  signed int v22; // eax
  int v23; // eax
  int v24; // ecx
  int v25; // eax
  int v26; // edi
  int v27; // ecx
  char *v28; // eax
  char *v29; // ecx
  char *v30; // edx
  char v31; // al
  char *v32; // ecx
  _BYTE *v33; // edx
  char v34; // al
  char *v35; // edi
  char v36; // al
  int v37; // eax
  int v38; // ecx
  signed int v39; // [esp+10h] [ebp-110h]
  BOOL v40; // [esp+14h] [ebp-10Ch]
  char v41; // [esp+1Bh] [ebp-105h]
  char Dest[256]; // [esp+1Ch] [ebp-104h]

  v12 = this;
  this[42] = 10000 * a5;
  this[43] = 10000 * a6;
  this[44] = 10000 * a7;
  this[48] = 1000 * a8;
  this[93] = 0;
  *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 562) += a11;
  *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 558) += a11;
  *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 60) += a12;
  v13 = Memory;
  v14 = this[35];
  v13[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v14);
  *(_DWORD *)(v13[1] + 4 * v14) = *v13;
  v13[4] ^= *(_DWORD *)(v13[1] + 4 * v14);
  result = dword_563908;
  if ( a2 != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    (*(void (__thiscall **)(_DWORD *))(*v12 + 316))(v12);
    v12[41] = sub_401D39(v17, v16);
    result = dword_563908;
  }
  if ( v12[14] < 5001 && a2 <= 0x1387 )
  {
    v18 = *(_DWORD *)(result[1504] + 4 * a2 + 12408);
    if ( v18 )
    {
      if ( result[2705] > 0 )
      {
        v19 = *(_WORD *)(v18 + 100);
        *(_DWORD *)(v18 + 112) = 0;
        v20 = *((_DWORD *)dword_563908 + 6897);
        v39 = 0;
        v21 = v19 == *(_WORD *)(v20 + 100);
        v40 = v19 == *(_WORD *)(v20 + 100);
        if ( v18 == v20 )
        {
          v39 = 1;
          if ( *(_DWORD *)(v20 + 128) )
          {
            if ( v19 != *(_WORD *)(v20 + 100) )
              *((_DWORD *)dword_563908 + 6438) = 100 * *(_DWORD *)((char *)dword_563908 + 58398);
          }
        }
        Dest[0] = 0;
        switch ( a3 )
        {
          case 0:
            v24 = *((_DWORD *)dword_563908 + 1504);
            v25 = sub_40105A(a4);
            v26 = v25;
            if ( v25 )
            {
              v27 = *((_DWORD *)dword_563908 + 1514);
              sub_4011D1(v18, v25, a10);
              v28 = (char *)dword_563908;
              if ( v18 == *((_DWORD *)dword_563908 + 6897) )
              {
                v29 = (char *)(v26 + 32);
                v30 = (char *)dword_563908 + 13620;
                do
                {
                  v31 = *v29;
                  *v30++ = *v29++;
                }
                while ( v31 );
                v28 = (char *)dword_563908;
              }
              if ( v26 == *((_DWORD *)v28 + 6897) )
              {
                v32 = (char *)(v18 + 32);
                v33 = v28 + 13684;
                do
                {
                  v34 = *v32;
                  *v33++ = *v32++;
                }
                while ( v34 );
                v28 = (char *)dword_563908;
                v39 = 1;
                if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 6897) + 128) )
                {
                  *((_DWORD *)dword_563908 + 6438) = 100 * *(_DWORD *)((char *)dword_563908 + 58398);
                  v28 = (char *)dword_563908;
                }
              }
              if ( *(_WORD *)(v26 + 100) == *(_WORD *)(*((_DWORD *)v28 + 6897) + 100) )
                v40 = 1;
              if ( a10 || a11 || a12 )
              {
                sprintf(Dest, "%s(%d) killed by %s (", v18 + 32, a9, v26 + 32);
                if ( a10 )
                  sprintf(&Dest[strlen(Dest)], "points=%d", a10);
                if ( a11 )
                  sprintf(&Dest[strlen(Dest)], " exp=%d", a11);
                if ( a12 )
                  sprintf(&Dest[strlen(Dest)], " cash=%d", a12);
                v35 = &v41;
                do
                  v36 = (v35++)[1];
                while ( v36 );
                *(_WORD *)v35 = 41;
              }
              else
              {
                sprintf(Dest, "%s(%d) killed by %s", v18 + 32, a9, v26 + 32);
              }
              v21 = v40;
            }
            break;
          case 1:
            v23 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * a4 + 4);
            if ( v23 )
              sprintf(Dest, "%s killed by automated %s", v18 + 32, *(_DWORD *)(v23 + 72) + 980);
            break;
          case 2:
            v22 = a4 <= 0 ? 0 : a4;
            if ( v22 > 15 )
              v22 = 15;
            sprintf(Dest, "%s killed by terrain (%s)", v18 + 32, (char *)dword_563908 + 480 * v22 + 59466);
            break;
          case 3:
            sprintf(Dest, "%s killed by flag proximity", v18 + 32);
            break;
          case 4:
            sprintf(Dest, "%s killed by bad prize pickup", v18 + 32);
            break;
          case 5:
            sprintf(Dest, "%s killed by an explosion", v18 + 32);
            break;
          default:
            break;
        }
        result = (_DWORD *)*((_DWORD *)dword_563918 + 2265);
        if ( result != (_DWORD *)3 && Dest[0] && (result != (_DWORD *)2 || v39) && (result != (_DWORD *)1 || v21) )
        {
          if ( v39 )
            v37 = 1;
          else
            v37 = v21 != 0 ? 4 : 0;
          v38 = *((_DWORD *)dword_563908 + 1510);
          result = (_DWORD *)sub_40245F(Dest, v37, 700, 1, v39);
        }
      }
    }
  }
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 4011D1: using guessed type _DWORD __stdcall sub_4011D1(_DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40245F: using guessed type _DWORD __stdcall sub_40245F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4722D0: using guessed type char Dest[256];

//----- (00472910) --------------------------------------------------------
int __thiscall sub_472910(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  _DWORD *v3; // ecx
  int v4; // esi
  int result; // eax

  v1 = this;
  v2 = (*(int (**)(void))(*this + 172))();
  v3 = Memory;
  v4 = v1[35];
  v3[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4);
  *(_DWORD *)(v3[1] + 4 * v4) = v2 ^ *v3;
  result = *(_DWORD *)(v3[1] + 4 * v4);
  v3[4] ^= result;
  return result;
}

//----- (00472960) --------------------------------------------------------
signed int __thiscall sub_472960(_DWORD *this, int *a2, int a3)
{
  _DWORD *v3; // esi
  int v5; // edx
  int v6; // ebp
  int v7; // edx
  int v8; // ecx
  int v9; // edx
  signed int v10; // edi
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // ecx
  int v15; // edx
  int v16; // ebp
  int v17; // ST2C_4
  int v18; // ST18_4
  int v19; // ecx
  int v20; // eax
  int v21; // ecx
  int v22; // eax
  _DWORD *v23; // ecx
  int v24; // [esp+14h] [ebp-2Ch]
  int v25; // [esp+18h] [ebp-28h]
  int v26; // [esp+1Ch] [ebp-24h]
  int v27; // [esp+20h] [ebp-20h]
  int v28; // [esp+24h] [ebp-1Ch]
  int v29; // [esp+28h] [ebp-18h]
  int v30; // [esp+2Ch] [ebp-14h]
  int v31; // [esp+30h] [ebp-10h]
  int v32; // [esp+3Ch] [ebp-4h]

  v3 = this;
  if ( this[16] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
    return 0;
  v5 = *this;
  this[78] = a3;
  v6 = (*(int (__thiscall **)(_DWORD *))(v5 + 228))(this);
  v27 = v6;
  if ( !v6 )
    return 0;
  sub_402513(*((_DWORD *)dword_563908 + 1503));
  v25 = (*(int (__thiscall **)(_DWORD *))(*v3 + 196))(v3);
  v7 = a2[1];
  v28 = *a2;
  v8 = a2[2];
  v29 = v7;
  v9 = a2[3];
  v30 = v8;
  v31 = v9;
  v10 = 0;
  do
  {
    sub_4B5860(*((_DWORD **)dword_563908 + 1508), v6, &a3, &v24, &v28, v25);
    v11 = a3;
    v12 = v24;
    if ( a3 || v24 )
    {
      v13 = v3[18];
      v14 = 10000 * a3;
      v15 = 10000 * v24;
      v3[43] = 10000 * v24;
      v3[42] = v14;
      v16 = *(signed __int16 *)(v13 + 1048);
      v17 = *(signed __int16 *)(v13 + 1046);
      v18 = v14 / 10000;
      v19 = *((_DWORD *)dword_563908 + 1503);
      v26 = 0;
      a2 = 0;
      if ( !sub_402360(v3, v18, v15 / 10000, &v26, &a2, v3 + 19, v17, v16) )
        break;
      v6 = v27;
      v28 -= 128;
      v30 += 128;
      v29 -= 128;
      v31 += 128;
    }
    ++v10;
  }
  while ( v10 < 30 );
  if ( !a3 && !v24 )
    return 0;
  v20 = sub_401D39(v11, v12);
  v21 = v3[35];
  v3[79] = v20;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v21)) > 0 )
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 361), 0, 0, 0, 0);
    if ( *((_DWORD *)dword_563908 + 479) )
    {
      a2 = (int *)operator new(0x44u);
      v32 = 0;
      if ( a2 )
        v22 = sub_4025CC(
                *((_DWORD *)dword_563908 + 479),
                v3[42],
                v3[43] + 10000,
                v3[44],
                0,
                0,
                0,
                0,
                *((_DWORD *)dword_563908 + 482),
                *((_DWORD *)dword_563908 + 482),
                3,
                0,
                0);
      else
        v22 = 0;
      v23 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
      v32 = -1;
      sub_4A7300(v23, v22);
    }
  }
  sub_4028D8(dword_563908);
  (*(void (__thiscall **)(_DWORD *, _DWORD, signed int))(*v3 + 120))(v3, 0, 1);
  return 1;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402360: using guessed type _DWORD __stdcall sub_402360(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402513: using guessed type int __thiscall sub_402513(_DWORD);
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4028D8: using guessed type int __thiscall sub_4028D8(_DWORD);

//----- (00472C80) --------------------------------------------------------
signed int __thiscall sub_472C80(_DWORD *this, int a2, int a3, void *a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int v8; // edx
  int v9; // ebp
  int v10; // eax
  signed int v11; // edi
  int v12; // ecx
  int v13; // edx
  int v14; // eax
  int v15; // ecx
  int v16; // edx
  int v17; // ebp
  int v18; // ST2C_4
  int v19; // ST18_4
  int v20; // ecx
  bool v21; // sf
  unsigned __int8 v22; // of
  int v23; // eax
  int v24; // ecx
  int v25; // edi
  int v26; // eax
  _DWORD *v27; // ecx
  int v28; // [esp+14h] [ebp-20h]
  int v29; // [esp+18h] [ebp-1Ch]
  int v30; // [esp+1Ch] [ebp-18h]
  int v31; // [esp+20h] [ebp-14h]
  int v32; // [esp+24h] [ebp-10h]
  int v33; // [esp+30h] [ebp-4h]

  v6 = this;
  if ( this[16] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
    return 0;
  v8 = *this;
  this[78] = a5;
  v9 = (*(int (__thiscall **)(_DWORD *))(v8 + 228))(this);
  v32 = v9;
  if ( !v9 )
    return 0;
  sub_402513(*((_DWORD *)dword_563908 + 1503));
  v10 = (*(int (__thiscall **)(_DWORD *))(*v6 + 196))(v6);
  v11 = (signed int)a4;
  v30 = v10;
  v29 = 0;
  do
  {
    a5 = a2;
    v28 = a3;
    sub_4B62B0(*((signed __int16 **)dword_563908 + 1508), v9, &a5, &v28, v11, a6, v30);
    v12 = a5;
    v13 = v28;
    if ( a5 || v28 )
    {
      v14 = v6[18];
      v15 = 10000 * a5;
      v16 = 10000 * v28;
      v6[43] = 10000 * v28;
      v6[42] = v15;
      v17 = *(signed __int16 *)(v14 + 1048);
      v18 = *(signed __int16 *)(v14 + 1046);
      v19 = v15 / 10000;
      v20 = *((_DWORD *)dword_563908 + 1503);
      v31 = 0;
      a4 = 0;
      if ( !sub_402360(v6, v19, v16 / 10000, &v31, &a4, v6 + 19, v18, v17) )
        break;
      v9 = v32;
      v11 += 64;
    }
    v22 = __OFSUB__(v29 + 1, 20);
    v21 = v29++ - 19 < 0;
  }
  while ( v21 ^ v22 );
  if ( !a5 && !v28 )
    return 0;
  v23 = sub_401D39(v12, v13);
  v24 = v6[35];
  v6[79] = v23;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v24)) > 0 )
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 361), 0, 0, 0, 0);
    if ( *((_DWORD *)dword_563908 + 479) )
    {
      v25 = *((_DWORD *)dword_563908 + 482);
      a4 = operator new(0x44u);
      v33 = 0;
      if ( a4 )
        v26 = sub_4025CC(*((_DWORD *)dword_563908 + 479), v6[42], v6[43] + 10000, v6[44], 0, 0, 0, 0, v25, v25, 3, 0, 0);
      else
        v26 = 0;
      v27 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
      v33 = -1;
      sub_4A7300(v27, v26);
    }
  }
  sub_4028D8(dword_563908);
  (*(void (__thiscall **)(_DWORD *, _DWORD, signed int))(*v6 + 120))(v6, 0, 1);
  return 1;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402360: using guessed type _DWORD __stdcall sub_402360(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402513: using guessed type int __thiscall sub_402513(_DWORD);
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4028D8: using guessed type int __thiscall sub_4028D8(_DWORD);

//----- (00472F90) --------------------------------------------------------
void __thiscall sub_472F90(_DWORD *this, void *Src, int a3)
{
  int v3; // eax

  if ( this[16] != -1 )
  {
    v3 = a3;
    this[93] = a3;
    if ( a3 > 0 )
    {
      if ( a3 > 16 )
        v3 = 16;
      memcpy(this + 85, Src, 2 * v3);
    }
  }
}

//----- (00472FE0) --------------------------------------------------------
BOOL __thiscall sub_472FE0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  unsigned int v3; // esi
  int v4; // esi
  BOOL result; // eax

  v1 = this;
  v2 = (*(int (**)(void))(*this + 108))();
  v3 = v1[16];
  result = 0;
  if ( (v3 & 0x80000000) == 0 )
  {
    if ( *((_BYTE *)dword_563908 + 480 * v2 + 59603) )
    {
      if ( v3 > 0x1387
        || (v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v3 + 12408)) == 0
        || *(_DWORD *)(v4 + 120) <= 0
        || *(_DWORD *)((char *)dword_563908 + 58350) )
      {
        result = 1;
      }
    }
  }
  return result;
}

//----- (00473050) --------------------------------------------------------
void __thiscall sub_473050(_DWORD *this, int a2, int a3, int a4, int a5, signed int a6, int a7, int a8)
{
  _DWORD *v8; // ebp
  bool v9; // zf
  bool v10; // sf
  int v11; // esi
  int v12; // ebx
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  _DWORD *v16; // esi
  int v17; // edi
  int v18; // eax
  signed int v19; // edi
  int v20; // esi
  int v21; // eax
  int v22; // edx
  int v23; // ecx
  int v24; // eax
  signed int v25; // esi
  int v26; // ecx
  int v27; // esi
  int v28; // edx
  int v29; // eax
  int v30; // ebx
  int v31; // ecx
  long double v32; // st7
  int v33; // edi
  int *v34; // ebx
  int v35; // ebp
  int v36; // esi
  int v37; // ecx
  int v38; // edi
  int v39; // edx
  unsigned int v40; // edx
  unsigned __int8 v41; // of
  __int16 v42; // dx
  int v43; // eax
  int v44; // [esp+1Ch] [ebp-Ch]
  int v45; // [esp+20h] [ebp-8h]
  _DWORD *v46; // [esp+24h] [ebp-4h]

  v8 = this;
  v9 = this[78] == 0;
  v10 = this[78] < 0;
  v46 = this;
  if ( !v10 && !v9 )
    return;
  if ( (*(int (**)(void))(*this + 144))() )
    return;
  v11 = a8;
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a8 + 4))(a8) != 6 )
    return;
  v9 = *(_WORD *)(v11 + 786) == 0;
  v12 = a7;
  v44 = -1;
  if ( !v9 && !a2 && a4 != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) )
  {
    v13 = *((_DWORD *)dword_563908 + 1504);
    v14 = sub_40105A(a3);
    if ( v14 )
    {
      v15 = sub_401D57(v14);
      v16 = (_DWORD *)v15;
      if ( v15 )
      {
        (*(void (__thiscall **)(int, int *, int *, int *))(*(_DWORD *)v15 + 84))(v15, &a4, &v44, &v45);
        v17 = a4 / 10000 - a5;
        v18 = sub_40232E(v44 / 10000 - a6);
        a7 = v17 * v17 + v18 * v18;
        v19 = (signed int)sqrt((double)a7);
        if ( v19 - (*(int (__thiscall **)(_DWORD *))(*v16 + 200))(v16) >= 0 )
          a7 = v19 - (*(int (__thiscall **)(_DWORD *))(*v16 + 200))(v16);
        else
          a7 = 0;
        v20 = v16[18];
        v21 = v45 / 10000;
        v22 = *(signed __int16 *)(v20 + 1046);
        v23 = 0;
        if ( v12 < v22 + v45 / 10000 || (v22 = *(signed __int16 *)(v20 + 1048), v12 > v22 + v21) )
          v23 = v12 - v22 - v21;
        a7 = a7 * a7 + v23 * v23;
        v44 = (signed int)sqrt((double)a7);
      }
    }
  }
  v24 = v8[43] / 10000 - a6;
  if ( dword_53A7C4 )
    v24 = 10 * v24 / 7;
  a5 = (v8[42] / 10000 - a5) * (v8[42] / 10000 - a5) + v24 * v24;
  v25 = (signed int)sqrt((double)a5);
  if ( v25 - (*(int (__thiscall **)(_DWORD *))(*v8 + 200))(v8) >= 0 )
    a5 = v25 - (*(int (__thiscall **)(_DWORD *))(*v8 + 200))(v8);
  else
    a5 = 0;
  v26 = v8[18];
  v27 = v8[44] / 10000;
  v28 = *(signed __int16 *)(v26 + 1046);
  v29 = 0;
  if ( v12 >= v28 + v27 )
  {
    v31 = *(signed __int16 *)(v26 + 1048);
    if ( v12 <= v31 + v27 )
      goto LABEL_26;
    v30 = v12 - v31;
  }
  else
  {
    v30 = v12 - v28;
  }
  v29 = v30 - v27;
LABEL_26:
  a5 = a5 * a5 + v29 * v29;
  v32 = sqrt((double)a5);
  v33 = a8;
  v9 = *(_BYTE *)(a8 + 608) == 0;
  a7 = (signed int)v32;
  if ( !v9 && *(signed __int16 *)(a8 + 822) >= (signed int)v32 )
    (*(void (__stdcall **)(_DWORD, int, int, int))(*(_DWORD *)dword_56391C + 76))(
      *(_DWORD *)(a8 + 128),
      v8[42] / 10000,
      v8[43] / 10000,
      v27);
  a6 = 2;
  while ( 1 )
  {
    a5 = 0;
    v34 = (int *)(v33 + 1328);
    do
    {
      v35 = *v34;
      if ( *v34 && v34[2] == a6 )
      {
        v36 = *((signed __int16 *)v34 - 2);
        v37 = 0;
        if ( v36 >= a7 )
        {
          if ( *((_WORD *)v34 - 2) )
            v37 = v34[1] + (v36 - a7) * (v35 - v34[1]) / v36;
          else
            v37 = *v34;
        }
        if ( v44 >= 0 && v36 >= v44 )
        {
          v38 = *(signed __int16 *)(a8 + 786);
          if ( v38 == -1 )
            v38 = *((signed __int16 *)v34 - 2);
          if ( v38 )
            v39 = v34[1] + (v38 - v44) * (v35 - v34[1]) / v38;
          else
            v39 = *v34;
          v40 = (signed int)((unsigned __int64)(1374389535i64 * *((_DWORD *)dword_563908 + 7709) * (v39 / -10)) >> 32) >> 5;
          v37 += v40 + (v40 >> 31);
        }
        if ( v37 > 0 )
          (*(void (__thiscall **)(_DWORD *, int, int, int, int, int))(*v46 + 152))(v46, a2, a3, v37, v34[2], a5);
      }
      v34 += 4;
      v41 = __OFSUB__(a5 + 1, 6);
      v10 = a5++ - 5 < 0;
    }
    while ( v10 ^ v41 );
    if ( --a6 < 0 )
      break;
    v33 = a8;
  }
  if ( *(_WORD *)(a8 + 762) > 0 )
  {
    v42 = *(_WORD *)(a8 + 822);
    if ( v42 > 0 )
    {
      v43 = *((_DWORD *)dword_563908 + 3098);
      if ( v43 <= *(signed __int16 *)(a8 + 762) - a7 * *(signed __int16 *)(a8 + 762) / v42 )
        v43 = *(signed __int16 *)(a8 + 762) - a7 * *(signed __int16 *)(a8 + 762) / v42;
      *((_DWORD *)dword_563908 + 3098) = v43;
    }
  }
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 40232E: using guessed type _DWORD __cdecl sub_40232E(_DWORD);
// 53A7C4: using guessed type int dword_53A7C4;
// 56391C: using guessed type int dword_56391C;

//----- (00473610) --------------------------------------------------------
int __thiscall sub_473610(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  char *v6; // ebx
  int v7; // edi
  _DWORD *v8; // ebp
  __int16 v9; // ax
  int v10; // eax
  int v11; // esi
  __int16 v12; // ax
  int v13; // eax
  int v14; // esi
  unsigned int v15; // edx
  int v16; // ebp
  int *v17; // edi
  int v18; // ecx
  int v19; // edx
  int v20; // ST2C_4
  int v21; // eax
  signed int v22; // eax
  _DWORD *v23; // edi
  int v24; // eax
  int v25; // esi
  int v26; // edx
  int v27; // ebx
  int v28; // eax
  _DWORD *v29; // esi
  _DWORD *v30; // ecx
  _DWORD *v31; // edi
  int v32; // ecx
  int v33; // eax
  int v34; // ecx
  int v35; // edi
  _DWORD *v36; // eax
  int result; // eax
  _DWORD *v38; // [esp+10h] [ebp-Ch]
  signed int v39; // [esp+14h] [ebp-8h]
  signed int v40; // [esp+28h] [ebp+Ch]

  v6 = (char *)dword_563908;
  v7 = 0;
  v8 = this;
  v38 = this;
  if ( *(_DWORD *)(*((_DWORD *)dword_563908 + 6897) + 120) && (v9 = *(_WORD *)(this[18] + 1454)) != 0 )
  {
    v10 = sub_4B2F30(*((int **)dword_563908 + 1511), v9);
    v11 = a6;
    v6 = (char *)dword_563908;
    if ( v10 )
      v7 = v10 + 4 * (3 * a6 + 273);
  }
  else
  {
    v11 = a6;
  }
  if ( v8[39] >= 0 )
  {
    if ( *((_DWORD *)v6 + 1501) )
    {
      v12 = *(_WORD *)(v8[18] + 1450);
      if ( v12 )
      {
        v13 = sub_4B2F30(*((int **)v6 + 1511), v12);
        v6 = (char *)dword_563908;
        if ( v13 )
          v7 = v13 + 4 * (3 * v11 + 273);
      }
    }
  }
  if ( !v7 )
    v7 = v8[18] + 4 * (3 * v11 + 273);
  v14 = (a4 - *(_DWORD *)v7 < 0 ? 0 : (unsigned int)(a4 - *(_DWORD *)v7)) * (1000 - *(signed __int16 *)(v7 + 8)) / 1000;
  v15 = (signed int)((unsigned __int64)(274877907i64
                                      * (a4 - *(_DWORD *)(v7 + 4) < 0 ? 0 : (unsigned int)(a4 - *(_DWORD *)(v7 + 4)))
                                      * *(signed __int16 *)(v7 + 10)) >> 32) >> 6;
  v16 = v15 + (v15 >> 31);
  if ( v14 > 0 )
  {
    if ( v38[14] == *(signed __int16 *)(*((_DWORD *)v6 + 6897) + 96) )
    {
      v17 = (int *)Memory;
      if ( !a5 )
      {
        if ( *(_DWORD *)(v6 + 57662) == 1 )
        {
          v18 = *((_DWORD *)Memory + 1);
          v19 = *(_DWORD *)Memory;
          if ( (*(_DWORD *)Memory ^ *(_DWORD *)(v18 + 4 * *((_DWORD *)v6 + 2677))) >= 0
            && *(_DWORD *)Memory != *(_DWORD *)(v18 + 4 * *((_DWORD *)v6 + 2677)) )
          {
            v20 = v19 ^ *(_DWORD *)(v18 + 4 * *((_DWORD *)v6 + 2677));
            v14 = (signed int)((double)(v20 - (v19 ^ *(_DWORD *)(v18 + 4 * *((_DWORD *)v6 + 2679))))
                             * (double)v14
                             / (double)v20);
          }
        }
        else if ( *(_DWORD *)(v6 + 57662) == 2
               && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)v6 + 2679))) >= 0
               && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)v6 + 2679)) )
        {
          v14 = 0;
        }
      }
      v14 = v14 * (1000 - (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)v6 + 76)))) / 1000;
      if ( v14 > 0 )
      {
        v21 = *((_DWORD *)v6 + 78);
        v39 = 0;
        if ( *(_WORD *)(v21 + 66) > 0 )
        {
          v40 = 68;
          do
          {
            v22 = abs(*(signed __int16 *)(v40 + v21));
            if ( v22 <= 5100 )
            {
              v23 = *(_DWORD **)(*((_DWORD *)v6 + 1507) + 4 * v22 + 8008);
              if ( v23 )
              {
                if ( v23[66] )
                {
                  v24 = (*(int (__thiscall **)(_DWORD *))(*v23 + 4))(v23);
                  v6 = (char *)dword_563908;
                  if ( v24 == 13 )
                  {
                    v25 = v14 - v23[2 * a6 + 92];
                    v14 = (v25 < 0 ? 0 : v25) * (1000 - SLOWORD(v23[2 * a6 + 91])) / 1000;
                  }
                }
              }
            }
            v21 = *((_DWORD *)v6 + 78);
            v40 += 4;
            ++v39;
          }
          while ( v39 < *(signed __int16 *)(v21 + 66) );
          v17 = (int *)Memory;
        }
      }
      if ( a5 == 2 )
      {
        sub_401992(-v14);
        goto LABEL_48;
      }
    }
    else
    {
      if ( a5 == 2 )
        goto LABEL_49;
      v17 = (int *)Memory;
    }
    if ( (*v17 ^ *(_DWORD *)(v17[1] + 4 * v38[35])) < 0 || *v17 == *(_DWORD *)(v17[1] + 4 * v38[35]) )
      goto LABEL_49;
    v26 = v38[35];
    v27 = *(_DWORD *)(v17[1] + 4 * v26);
    v28 = *v17;
    v17[4] ^= v27;
    *(_DWORD *)(v17[1] + 4 * v26) = ((v27 ^ v28) - v14) ^ *v17;
    v17[4] ^= *(_DWORD *)(v17[1] + 4 * v26);
    v29 = Memory;
    v30 = v38;
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v38[35])) >= 0
      && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v38[35]) )
    {
      goto LABEL_48;
    }
    if ( v38[14] < 5001 && !a2 )
    {
      v31 = dword_563908;
      if ( !*((_DWORD *)dword_563908 + 7742) && a3 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)
        || !*((_DWORD *)dword_563908 + 7743)
        && (v32 = *((_DWORD *)dword_563908 + 1504), (v33 = sub_40105A(a3)) != 0)
        && *(_WORD *)(v33 + 100) == *(_WORD *)(v31[6897] + 100) )
      {
        v34 = v38[35];
        v35 = v29[1];
        v36 = v29 + 4;
        *v36 ^= *(_DWORD *)(v29[1] + 4 * v34);
        *(_DWORD *)(v35 + 4 * v34) = *v29 ^ 1;
        *v36 ^= *(_DWORD *)(v29[1] + 4 * v34);
        goto LABEL_48;
      }
      v30 = v38;
    }
    (*(void (__stdcall **)(int, int))(*v30 + 236))(a2, a3);
LABEL_48:
    v6 = (char *)dword_563908;
  }
LABEL_49:
  result = *(signed __int16 *)(*((_DWORD *)v6 + 6897) + 96);
  if ( v38[14] != result && v16 > 0 )
    result = (*(int (__stdcall **)(int, int, int, int, int))(**(_DWORD **)(*((_DWORD *)v6 + 1503) + 4 * result + 4) + 152))(
               a2,
               a3,
               v16,
               a5,
               a6);
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);

//----- (00473B40) --------------------------------------------------------
int __thiscall sub_473B40(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int result; // eax
  _DWORD *v5; // eax
  int v6; // ecx
  int *v7; // edx
  int v8; // edx
  int v9; // ecx
  int v10; // eax
  int (__thiscall *v11)(_DWORD *, int, int); // edx

  v3 = this;
  result = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
  if ( this[16] == result || this[14] == result )
  {
    v5 = Memory;
    v6 = this[35];
    v7 = (int *)((char *)Memory + 4);
    v5[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v6);
    *(_DWORD *)(*v7 + 4 * v6) = *v5;
    v8 = *v7;
    v9 = *(_DWORD *)(v8 + 4 * v6);
    v5[4] ^= v9;
    v10 = sub_401D39(v9, v8);
    v11 = *(int (__thiscall **)(_DWORD *, int, int))(*v3 + 268);
    v3[41] = v10;
    result = v11(v3, a2, a3);
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (00473BD0) --------------------------------------------------------
int __thiscall sub_473BD0(_DWORD *this, int a2, signed int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // eax
  int v7; // ecx
  int result; // eax
  unsigned int v9; // edx
  int v10; // ecx
  int v11; // eax
  double v12; // st7
  int v13; // eax
  long double v14; // ST20_8
  long double v15; // st7
  long double v16; // st6
  long double v17; // st5
  double v18; // st4
  int v19; // ebx
  int v20; // eax
  int v21; // eax
  double v22; // st7
  __int16 v23; // ST14_2
  __int16 v24; // ax
  int v25; // edi
  int v26; // ecx
  int v27; // eax
  int (__thiscall *v28)(_DWORD *, char *); // edx
  int v29; // eax
  int v30; // ecx
  int v31; // [esp+Ch] [ebp-5Ch]
  int v32; // [esp+10h] [ebp-58h]
  int v33; // [esp+14h] [ebp-54h]
  double v34; // [esp+28h] [ebp-40h]
  signed int v35; // [esp+28h] [ebp-40h]
  double v36; // [esp+30h] [ebp-38h]
  double v37; // [esp+38h] [ebp-30h]
  double v38; // [esp+40h] [ebp-28h]
  char v39; // [esp+50h] [ebp-18h]
  __int16 v40; // [esp+51h] [ebp-17h]
  __int16 v41; // [esp+53h] [ebp-15h]
  __int16 v42; // [esp+55h] [ebp-13h]
  __int16 v43; // [esp+57h] [ebp-11h]
  __int16 v44; // [esp+59h] [ebp-Fh]
  __int16 v45; // [esp+5Bh] [ebp-Dh]
  __int16 v46; // [esp+5Dh] [ebp-Bh]
  __int16 v47; // [esp+5Fh] [ebp-9h]
  int v48; // [esp+61h] [ebp-7h]

  v5 = this;
  v6 = this[16];
  v7 = *((_DWORD *)dword_563908 + 1501);
  result = sub_401FE1(v6);
  v39 = result;
  if ( (result & 0x80u) == 0 )
  {
    if ( a2 == -1 )
      a2 = *(_DWORD *)((char *)dword_563908 + 58622);
    if ( !a3 )
      a3 = *(_DWORD *)((char *)dword_563908 + 58626);
    v31 = a4;
    v34 = (double)((v5[48] + 180000) % 240000) * 0.00002617993877916667;
    if ( a5 - a4 > 0 )
      v31 = a4 + rand() % (a5 - a4);
    v38 = ((double)v31 + (double)v31) * 3.1415926535 / 360.0;
    v37 = sin(v34);
    v36 = cos(v34);
    v35 = (signed int)(cos(v38) * (double)a3);
    v9 = (unsigned __int64)(1759218605i64 * (signed int)v5[42]) >> 32;
    v10 = v5[43];
    v11 = v5[18];
    v32 = ((signed int)v9 >> 12) + (v9 >> 31);
    v33 = v10 / 10000;
    if ( *(_WORD *)(v11 + 1028) )
    {
      v12 = (double)*(signed __int16 *)(v11 + 1028);
      v32 = (signed int)(v36 * v12) + v5[42] / 10000;
      v13 = (signed int)(v12 * v37);
      if ( dword_53A7C4 )
        v13 = 7 * v13 / 10;
      v33 = v13 + v10 / 10000;
    }
    if ( *(_DWORD *)((char *)dword_563908 + 58630) >= 0 )
    {
      v21 = *(_DWORD *)((char *)dword_563908 + 58630);
      v19 = v5[45] / 10 * v21 / 1000;
      v20 = v5[46] / 10 * v21 / 1000;
    }
    else
    {
      v14 = (double)((v5[48] + 180000) % 240000) * 0.00002617993877916667;
      v15 = cos(v14);
      v16 = sin(v14);
      v17 = (double)(v5[46] / 10) * v16 + (double)(v5[45] / 10) * v15;
      v18 = (double)-*(_DWORD *)((char *)dword_563908 + 58630);
      v19 = (signed int)(v15 * v17 * v18 / 1000.0);
      v20 = (signed int)(v16 * v17 * v18 / 1000.0);
    }
    v22 = (double)v35;
    v23 = v20;
    v24 = *((_WORD *)v5 + 32);
    v25 = v5[47] / 10 * *(_DWORD *)((char *)dword_563908 + 58634) / 1000;
    v47 = a2;
    v46 = v24;
    v43 = v32;
    v26 = v5[44];
    v44 = v33;
    v45 = *(_WORD *)(v5[18] + 1030) + v26 / 10000;
    v40 = v19 + (signed int)(v36 * v22);
    v41 = v23 + (signed int)(v22 * v37);
    v42 = v25 + (signed int)(sin(v38) * (double)(signed int)abs(a3));
    v27 = (*(int (**)(void))(*(_DWORD *)dword_56391C + 152))();
    v28 = *(int (__thiscall **)(_DWORD *, char *))(*v5 + 260);
    v48 = v27;
    v29 = v28(v5, &v39);
    *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 156) = -1;
    *((_DWORD *)dword_563908 + 6918) = 0;
    (*(void (__stdcall **)(char *, int))(*(_DWORD *)dword_56391C + 108))(&v39, v29);
    v30 = *((_DWORD *)dword_563908 + 1501);
    result = sub_40217B(v39, v5[16]);
  }
  return result;
}
// 401FE1: using guessed type _DWORD __stdcall sub_401FE1(_DWORD);
// 40217B: using guessed type _DWORD __stdcall sub_40217B(_DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;
// 56391C: using guessed type int dword_56391C;

//----- (004740B0) --------------------------------------------------------
int __thiscall sub_4740B0(_DWORD *this, int a2, signed int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // eax
  int v7; // ecx
  unsigned int v9; // edx
  int v10; // ecx
  int v11; // eax
  double v12; // st7
  int v13; // eax
  long double v14; // ST1C_8
  long double v15; // st7
  long double v16; // st6
  long double v17; // st5
  double v18; // st4
  int v19; // ebx
  int v20; // eax
  int v21; // edx
  int v22; // ST24_4
  unsigned int v23; // edx
  double v24; // st7
  signed int v25; // edx
  unsigned int v26; // edi
  int v27; // edi
  int v28; // ecx
  int v29; // eax
  int (__thiscall *v30)(_DWORD *, char *); // edx
  int v31; // [esp+Ch] [ebp-5Ch]
  int v32; // [esp+10h] [ebp-58h]
  int v33; // [esp+14h] [ebp-54h]
  int v34; // [esp+24h] [ebp-44h]
  double v35; // [esp+28h] [ebp-40h]
  signed int v36; // [esp+28h] [ebp-40h]
  double v37; // [esp+30h] [ebp-38h]
  double v38; // [esp+38h] [ebp-30h]
  double v39; // [esp+40h] [ebp-28h]
  char v40; // [esp+50h] [ebp-18h]
  __int16 v41; // [esp+51h] [ebp-17h]
  __int16 v42; // [esp+53h] [ebp-15h]
  __int16 v43; // [esp+55h] [ebp-13h]
  __int16 v44; // [esp+57h] [ebp-11h]
  __int16 v45; // [esp+59h] [ebp-Fh]
  __int16 v46; // [esp+5Bh] [ebp-Dh]
  __int16 v47; // [esp+5Dh] [ebp-Bh]
  __int16 v48; // [esp+5Fh] [ebp-9h]
  int v49; // [esp+61h] [ebp-7h]

  v5 = this;
  v6 = this[16];
  v7 = *((_DWORD *)dword_563908 + 1501);
  v40 = sub_401FE1(v6);
  if ( v40 < 0 )
    return 0;
  if ( a2 == -1 )
    a2 = *(_DWORD *)((char *)dword_563908 + 58622);
  if ( !a3 )
    a3 = *(_DWORD *)((char *)dword_563908 + 58626);
  v31 = a4;
  v35 = (double)((v5[48] + 180000) % 240000) * 0.00002617993877916667;
  if ( a5 - a4 > 0 )
    v31 = a4 + rand() % (a5 - a4);
  v39 = ((double)v31 + (double)v31) * 3.1415926535 / 360.0;
  v38 = sin(v35);
  v37 = cos(v35);
  v36 = (signed int)(cos(v39) * (double)a3);
  v9 = (unsigned __int64)(1759218605i64 * (signed int)v5[42]) >> 32;
  v10 = v5[43];
  v11 = v5[18];
  v32 = ((signed int)v9 >> 12) + (v9 >> 31);
  v33 = v10 / 10000;
  if ( *(_WORD *)(v11 + 1028) )
  {
    v12 = (double)*(signed __int16 *)(v11 + 1028);
    v32 = (signed int)(v37 * v12) + v5[42] / 10000;
    v13 = (signed int)(v12 * v38);
    if ( dword_53A7C4 )
      v13 = 7 * v13 / 10;
    v33 = v13 + v10 / 10000;
  }
  v34 = v5[47] / 10;
  if ( *(_DWORD *)((char *)dword_563908 + 58630) >= 0 )
  {
    v21 = *(_DWORD *)((char *)dword_563908 + 58630);
    v22 = v21;
    v23 = (signed int)((unsigned __int64)(274877907i64 * v5[45] / 10 * v21) >> 32) >> 6;
    v19 = v23 + (v23 >> 31);
    v20 = v5[46] / 10 * v22 / 1000;
  }
  else
  {
    v14 = (double)((v5[48] + 180000) % 240000) * 0.00002617993877916667;
    v15 = cos(v14);
    v16 = sin(v14);
    v17 = (double)(v5[46] / 10) * v16 + (double)(v5[45] / 10) * v15;
    v18 = (double)-*(_DWORD *)((char *)dword_563908 + 58630);
    v19 = (signed int)(v15 * v17 * v18 / 1000.0);
    v20 = (signed int)(v16 * v17 * v18 / 1000.0);
  }
  v24 = (double)v36;
  v25 = (signed int)((unsigned __int64)(274877907i64 * v34 * *(_DWORD *)((char *)dword_563908 + 58634)) >> 32) >> 6;
  v26 = (signed int)((unsigned __int64)(274877907i64 * v34 * *(_DWORD *)((char *)dword_563908 + 58634)) >> 32) >> 6;
  v48 = a2;
  v44 = v32;
  v27 = v25 + (v26 >> 31);
  LOWORD(v25) = *((_WORD *)v5 + 32);
  v45 = v33;
  v28 = v5[44];
  v47 = v25;
  v46 = *(_WORD *)(v5[18] + 1030) + v28 / 10000;
  v41 = v19 + (signed int)(v37 * v24);
  v42 = v20 + (signed int)(v24 * v38);
  v43 = v27 + (signed int)(sin(v39) * (double)(signed int)abs(a3));
  v29 = (*(int (**)(void))(*(_DWORD *)dword_56391C + 152))();
  v30 = *(int (__thiscall **)(_DWORD *, char *))(*v5 + 260);
  v49 = v29;
  return v30(v5, &v40);
}
// 401FE1: using guessed type _DWORD __stdcall sub_401FE1(_DWORD);
// 53A7C4: using guessed type int dword_53A7C4;
// 56391C: using guessed type int dword_56391C;

//----- (00474530) --------------------------------------------------------
signed int __stdcall sub_474530(int a1)
{
  int v1; // ecx
  int v2; // edx
  char *v3; // esi
  int v4; // edi
  int v5; // ebx
  int v6; // ebp
  int v7; // eax
  int v8; // ebx
  _DWORD *v9; // edi
  int v10; // ecx
  int v11; // eax
  int v12; // edx
  double v13; // st7
  int v14; // edx
  bool v15; // sf
  signed int v16; // eax
  unsigned int v17; // edx
  int v18; // ecx
  int v19; // edi
  int v20; // eax
  int v21; // eax
  _DWORD *v22; // edx
  int v23; // edi
  int v24; // eax
  int v25; // ecx
  int v26; // edx
  _DWORD *v27; // edx
  int v28; // eax
  unsigned __int8 v29; // of
  int v31; // [esp+10h] [ebp-44h]
  int v32; // [esp+14h] [ebp-40h]
  unsigned int v33; // [esp+18h] [ebp-3Ch]
  int v34; // [esp+1Ch] [ebp-38h]
  int v35; // [esp+20h] [ebp-34h]
  int v36; // [esp+24h] [ebp-30h]
  int v37; // [esp+28h] [ebp-2Ch]
  int v38; // [esp+2Ch] [ebp-28h]
  int v39; // [esp+30h] [ebp-24h]
  int v40; // [esp+34h] [ebp-20h]
  int v41; // [esp+38h] [ebp-1Ch]
  int v42; // [esp+3Ch] [ebp-18h]
  int v43; // [esp+40h] [ebp-14h]
  int v44; // [esp+44h] [ebp-10h]
  int v45; // [esp+48h] [ebp-Ch]
  int v46; // [esp+4Ch] [ebp-8h]

  v1 = a1;
  v2 = 10000 * *(signed __int16 *)(a1 + 7);
  v43 = 16843009;
  v44 = 16843009;
  v45 = 16843009;
  v46 = 16843009;
  v36 = 10000 * *(signed __int16 *)(a1 + 9);
  v3 = (char *)dword_563908;
  v4 = 10000 * *(signed __int16 *)(a1 + 11);
  v5 = 10 * *(signed __int16 *)(a1 + 1);
  v6 = 10 * *(signed __int16 *)(a1 + 3);
  v7 = 10 * *(signed __int16 *)(a1 + 5);
  v35 = a1;
  v38 = 1000000;
  v37 = v2;
  v31 = v4;
  v32 = v5;
  v33 = v6;
  v34 = v7;
  v40 = 0;
  while ( 1 )
  {
    v39 = -1;
    if ( !v5 && !v6 && !v34 && !v4 )
      goto LABEL_26;
    if ( *(_DWORD *)(v3 + 58638) )
    {
      sub_4B59C0(*((_DWORD **)v3 + 1508), &v42, &v41, v2, v36, v4, v4);
      v3 = (char *)dword_563908;
      v8 = v34 + 10 * *(_DWORD *)((char *)dword_563908 + 58638);
      v4 += v8;
      v34 += 10 * *(_DWORD *)((char *)dword_563908 + 58638);
      v31 = v4;
      if ( v4 >= v42 )
      {
        if ( v4 <= v41 )
          goto LABEL_21;
        v31 = 2 * v41 - v4;
      }
      else
      {
        if ( abs(v8) < 1000 )
        {
          v31 = v42;
          v34 = 0;
          v4 = v42;
          goto LABEL_21;
        }
        v31 = 2 * v42 - v4;
      }
      v9 = (_DWORD *)*((_DWORD *)dword_563908 + 1508);
      v10 = v37 / 160000;
      v11 = v36 / 160000;
      if ( v37 / 160000 < 0 || v11 < 0 || (v12 = v9[1], v10 >= v12) || v11 >= v9[2] )
        v39 = 0;
      else
        v39 = v9[(*(_BYTE *)(3 * (v10 + v11 * v12) + v9[1292]) & 0x7F) + 520];
      v32 = v32 * *(_DWORD *)((char *)dword_563908 + 58646) / 1000;
      v33 = (signed int)(v33 * *(_DWORD *)((char *)dword_563908 + 58646)) / 1000;
      v4 = v31;
      v34 = v8 * *(_DWORD *)((char *)dword_563908 + 58642) / -1000;
    }
LABEL_21:
    v13 = (double)v38;
    v32 = (signed int)((double)v32 * v13 / 1000000.0);
    v14 = *(signed __int16 *)(v35 + 15);
    v15 = v38 - v14 < 0;
    v38 -= v14;
    v33 = (signed int)(v13 * (double)(signed int)v33 / 1000000.0);
    if ( v15 )
      return 0;
    v16 = sub_4AB0E0(
            *((_DWORD **)v3 + 1508),
            v4 / 10000,
            v4 / 10000,
            &v37,
            &v36,
            &v32,
            (int *)&v33,
            (int)&v43,
            *(_DWORD *)(v3 + 58610));
    v3 = (char *)dword_563908;
    if ( v16 )
    {
      v5 = v32 * *(_DWORD *)((char *)dword_563908 + 58650) / 1000;
      v32 = v32 * *(_DWORD *)((char *)dword_563908 + 58650) / 1000;
      v17 = (signed int)((unsigned __int64)(274877907i64 * (signed int)(v33 * *(_DWORD *)((char *)dword_563908 + 58650))) >> 32) >> 6;
      v6 = v17 + (v17 >> 31);
      v33 = v17 + (v17 >> 31);
    }
    else
    {
      v5 = v32;
      v6 = v33;
    }
    v1 = v35;
LABEL_26:
    if ( *(_WORD *)(v1 + 13) != *(_WORD *)(*((_DWORD *)v3 + 6897) + 96) )
      goto LABEL_47;
    v18 = v37 / 160000;
    v19 = v36 / 160000;
    if ( *(_DWORD *)(v3 + 58558) && v31 / 10000 )
    {
      v20 = v39;
      goto LABEL_30;
    }
    v27 = (_DWORD *)*((_DWORD *)v3 + 1508);
    if ( v18 < 0 )
      break;
    if ( v19 < 0 )
      break;
    v28 = v27[1];
    if ( v18 >= v28 || v19 >= v27[2] )
      break;
    v20 = v27[(*(_BYTE *)(3 * (v18 + v19 * v28) + v27[1292]) & 0x7F) + 520];
LABEL_30:
    if ( v20 >= 0 )
      goto LABEL_31;
LABEL_46:
    v4 = v31;
    v1 = v35;
LABEL_47:
    v29 = __OFSUB__(v40 + 1, 3000);
    v15 = v40++ - 2999 < 0;
    if ( !(v15 ^ v29) )
      return 0;
    v2 = v37;
  }
  v20 = 0;
LABEL_31:
  v21 = *(_DWORD *)&v3[480 * v20 + 59638];
  if ( v21 != -2 && v21 != *(signed __int16 *)(*((_DWORD *)v3 + 6897) + 100) )
    goto LABEL_46;
  v22 = (_DWORD *)*((_DWORD *)v3 + 1508);
  v23 = *(signed __int16 *)(v35 + 9) / 16;
  v24 = *(signed __int16 *)(v35 + 7) / 16;
  if ( v24 < 0 || v23 < 0 || (v25 = v22[1], v24 >= v25) || v23 >= v22[2] )
    v26 = 0;
  else
    v26 = v22[(*(_BYTE *)(3 * (v24 + v23 * v25) + v22[1292]) & 0x7F) + 520];
  if ( *(_DWORD *)&v3[480 * v26 + 59642] <= 0 )
    goto LABEL_46;
  return 1;
}

//----- (00474AE0) --------------------------------------------------------
void *__thiscall sub_474AE0(_DWORD *this, int a2)
{
  void *result; // eax
  int v3; // eax

  result = dword_563908;
  if ( *((_DWORD *)dword_563908 + 1501) )
  {
    v3 = this[18];
    result = (void *)(*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*this + 248))(
                       *(signed __int16 *)(v3 + 2 * a2 + 1394),
                       *(signed __int16 *)(v3 + 2 * a2 + 1398),
                       *(signed __int16 *)(v3 + 2 * a2 + 1402),
                       *(signed __int16 *)(v3 + 2 * a2 + 1406));
  }
  return result;
}

//----- (00474B40) --------------------------------------------------------
int __cdecl sub_474B40(_BYTE *a1, unsigned __int16 *a2)
{
  unsigned __int16 *v2; // ebx
  _BYTE *v3; // edi
  signed int v4; // esi
  int v5; // eax
  __int16 v6; // dx
  __int16 v7; // ax
  __int16 v8; // dx
  unsigned __int16 v9; // dx
  int result; // eax
  int v11; // [esp+10h] [ebp-8h]
  signed int v12; // [esp+14h] [ebp-4h]

  v2 = a2;
  v3 = a1;
  v12 = 3;
  do
  {
    v4 = 0;
    do
    {
      BYTE2(v11) = (char)(v4 * v3[2]) / 15;
      BYTE1(v11) = (char)(v4 * v3[1]) / 15;
      LOBYTE(v11) = (char)(v4 * *v3) / 15;
      v5 = sub_401889(v11, *(_DWORD *)((char *)dword_563908 + 57718), 0, 0);
      v6 = BYTE1(v5) | (unsigned __int16)(32 * (BYTE2(v5) & 0xF8));
      v7 = (unsigned __int8)v5 >> 3;
      if ( dword_576828 == 2 )
        v8 = v6 & 0xFFF8;
      else
        v8 = 2 * (v6 & 0xFFFC);
      v9 = v7 | 4 * v8;
      result = v9;
      *v2 = v9;
      ++v4;
      ++v2;
    }
    while ( v4 < 16 );
    v3 += 4;
    --v12;
  }
  while ( v12 );
  return result;
}
// 401889: using guessed type _DWORD __cdecl sub_401889(_DWORD, _DWORD, _DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (00474CA0) --------------------------------------------------------
int __cdecl sub_474CA0(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (00474DE0) --------------------------------------------------------
signed int __thiscall sub_474DE0(_DWORD *this, int a2, int a3)
{
  int v3; // edi
  signed int v4; // ebp
  int v5; // esi
  bool v6; // zf
  bool v7; // sf
  _DWORD *v8; // ebx
  signed int result; // eax
  signed int v10; // [esp+10h] [ebp-18h]
  int v11; // [esp+14h] [ebp-14h]
  int v12; // [esp+18h] [ebp-10h]
  int v13; // [esp+1Ch] [ebp-Ch]
  _DWORD *v14; // [esp+20h] [ebp-8h]
  char v15; // [esp+24h] [ebp-4h]

  v3 = 0;
  v4 = -1;
  v5 = 0;
  v6 = this[30001] == 0;
  v7 = this[30001] < 0;
  v14 = this;
  v10 = -1;
  v11 = 0;
  if ( v7 || v6 )
    goto LABEL_18;
  v8 = this + 15001;
  do
  {
    if ( (*(int (**)(void))(*(_DWORD *)*v8 + 192))() == -1
      && (*(int (**)(void))(**(_DWORD **)(*v8 + 72) + 4))() != 4
      && sub_40237E(*v8)
      && (*(int (__stdcall **)(int, int))(*(_DWORD *)*v8 + 308))(a2, a3)
      && (v4 == -1 || *(_DWORD *)(*v8 + 64) == -1 || v10 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)) )
    {
      v4 = *(_DWORD *)(*v8 + 56);
      v10 = *(_DWORD *)(*v8 + 64);
      (*(void (__stdcall **)(int *, int *, char *))(*(_DWORD *)*v8 + 84))(&v12, &v13, &v15);
      v5 = v12 / 10000;
      v3 = v13 / 10000;
    }
    ++v8;
    ++v11;
  }
  while ( v11 < v14[30001] );
  if ( v4 == -1
    || !sub_4B5060(
          *((signed __int16 **)dword_563908 + 1508),
          *((_DWORD *)dword_563908 + 7738),
          *((_DWORD *)dword_563908 + 62),
          *((_DWORD *)dword_563908 + 63),
          v5,
          v3,
          0) )
  {
LABEL_18:
    result = -1;
  }
  else
  {
    result = v4;
  }
  return result;
}
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00474F90) --------------------------------------------------------
signed int __thiscall sub_474F90(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi
  int v5; // ebp
  int v6; // esi
  signed int v7; // eax
  int v8; // edx
  int v9; // eax
  int v10; // esi
  int v11; // esi
  int v12; // edi
  int v13; // ebx
  int v14; // eax
  signed int v15; // ecx
  signed int v16; // eax
  int v17; // eax
  _DWORD **v18; // esi
  signed int result; // eax
  signed int v20; // [esp+Ch] [ebp-2Ch]
  int v21; // [esp+10h] [ebp-28h]
  signed int v22; // [esp+14h] [ebp-24h]
  _DWORD *v23; // [esp+18h] [ebp-20h]
  int v24; // [esp+1Ch] [ebp-1Ch]
  int v25; // [esp+20h] [ebp-18h]
  int v26; // [esp+24h] [ebp-14h]
  int v27; // [esp+28h] [ebp-10h]
  int v28; // [esp+2Ch] [ebp-Ch]
  int v29; // [esp+30h] [ebp-8h]
  char v30; // [esp+34h] [ebp-4h]

  v4 = this;
  v23 = this;
  v21 = -1;
  v22 = 99999999;
  v26 = 0;
  v25 = 0;
  v24 = 0;
  if ( this[30001] <= 0 )
    goto LABEL_42;
  v5 = (int)(this + 15001);
  do
  {
    if ( (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)v5 + 72) + 4))() != 4 )
    {
      v6 = *(_DWORD *)v5;
      v7 = *(_DWORD *)(*(_DWORD *)v5 + 56);
      if ( (v7 >= 5001 || *(_DWORD *)(v6 + 64) == v7)
        && ((*(int (**)(void))(**(_DWORD **)(v6 + 72) + 4))() == 5
         || *(_DWORD *)(v6 + 64) == -1
         || v6 == *((_DWORD *)dword_563908 + 6898)
         || abs(sub_401D39(dword_563908, v8) - *(_DWORD *)(v6 + 332)) <= 300)
        && ((*(int (**)(void))(**(_DWORD **)v5 + 16))() == -1
         || (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)v5 + 72) + 4))() == 5)
        && (*(int (**)(void))(**(_DWORD **)v5 + 8))() > 0
        && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *(_DWORD *)(*(_DWORD *)v5 + 140))) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *(_DWORD *)(*(_DWORD *)v5 + 140)) )
      {
        v9 = (*(int (**)(void))(**(_DWORD **)v5 + 204))();
        if ( v9 == -1 || v9 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) )
        {
          v10 = (*(int (**)(void))(**(_DWORD **)v5 + 192))();
          if ( v10 == -1 )
            v10 = *(_DWORD *)(*(_DWORD *)v5 + 56);
          if ( v10 != *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 56)
            && v10 != (*(int (**)(void))(**((_DWORD **)dword_563908 + 6898) + 192))() )
          {
            (*(void (__stdcall **)(int *, int *, char *))(**(_DWORD **)v5 + 84))(&v27, &v28, &v30);
            v11 = v27 / 10000;
            v12 = v28 / 10000;
            v13 = v27 / 10000 - a2;
            v14 = sub_40232E(v28 / 10000 - a3);
            v29 = v14;
            v15 = abs(v14);
            v16 = abs(v13);
            if ( v16 <= v15 )
            {
              v20 = v15;
              v16 = v15;
            }
            else
            {
              v20 = v16;
            }
            if ( v16 < *((_DWORD *)dword_563908 + 7738) && v16 < v22 )
            {
              v17 = abs((unsigned __int8)sub_40277A(v29, v13) - a4);
              if ( v17 > 120 )
                v17 = 240 - v17;
              if ( v17 < 26 || v20 < 32 )
              {
                v21 = *(_DWORD *)(*(_DWORD *)v5 + 56);
                v22 = v20;
                v26 = v11;
                v25 = v12;
              }
            }
            v4 = v23;
          }
        }
      }
    }
    v5 += 4;
    ++v24;
  }
  while ( v24 < v4[30001] );
  if ( v21 == -1 )
    goto LABEL_42;
  v18 = (_DWORD **)v4[v21 + 1];
  if ( v18 && (*(int (**)(void))(*v18[18] + 4))() == 3 )
    v21 = ((int (__thiscall *)(_DWORD **))(*v18)[48])(v18);
  if ( v21 != -1
    && sub_4B5060(
         *((signed __int16 **)dword_563908 + 1508),
         *((_DWORD *)dword_563908 + 7738),
         *((_DWORD *)dword_563908 + 62),
         *((_DWORD *)dword_563908 + 63),
         v26,
         v25,
         0) )
  {
    result = v21;
  }
  else
  {
LABEL_42:
    result = -1;
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40232E: using guessed type _DWORD __cdecl sub_40232E(_DWORD);
// 40277A: using guessed type _DWORD __cdecl sub_40277A(_DWORD, _DWORD);

//----- (00475340) --------------------------------------------------------
signed int __thiscall sub_475340(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // edi
  signed int result; // eax
  signed int v6; // esi
  int v7; // ebp
  _DWORD *v8; // edi
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  _DWORD *v17; // [esp+8h] [ebp-4h]

  v4 = this;
  v17 = this;
  result = sub_4B5060(
             *((signed __int16 **)dword_563908 + 1508),
             *((_DWORD *)dword_563908 + 7738),
             *((_DWORD *)dword_563908 + 62),
             *((_DWORD *)dword_563908 + 63),
             a2,
             a3,
             0);
  if ( result )
  {
    v6 = 0;
    v7 = 0;
    if ( v4[30001] > 0 )
    {
      v8 = v4 + 15001;
      do
      {
        if ( (*(int (**)(void))(*(_DWORD *)*v8 + 192))() == -1
          && (*(int (**)(void))(**(_DWORD **)(*v8 + 72) + 4))() != 4
          && sub_40237E(*v8)
          && (*(int (__stdcall **)(int, int))(*(_DWORD *)*v8 + 308))(a2, a3) )
        {
          *(_DWORD *)(a4 + 4 * v6) = *(_DWORD *)(*v8 + 56);
          v9 = *(_DWORD *)(*v8 + 108);
          ++v6;
          if ( v9 )
            *(_DWORD *)(a4 + 4 * v6++) = v9;
          v10 = *(_DWORD *)(*v8 + 112);
          if ( v10 )
            *(_DWORD *)(a4 + 4 * v6++) = v10;
          v11 = *(_DWORD *)(*v8 + 116);
          if ( v11 )
            *(_DWORD *)(a4 + 4 * v6++) = v11;
          v12 = *(_DWORD *)(*v8 + 120);
          if ( v12 )
            *(_DWORD *)(a4 + 4 * v6++) = v12;
          v13 = *(_DWORD *)(*v8 + 124);
          if ( v13 )
            *(_DWORD *)(a4 + 4 * v6++) = v13;
          v14 = *(_DWORD *)(*v8 + 128);
          if ( v14 )
            *(_DWORD *)(a4 + 4 * v6++) = v14;
          v15 = *(_DWORD *)(*v8 + 132);
          if ( v15 )
            *(_DWORD *)(a4 + 4 * v6++) = v15;
          v16 = *(_DWORD *)(*v8 + 136);
          if ( v16 )
            *(_DWORD *)(a4 + 4 * v6++) = v16;
        }
        ++v7;
        ++v8;
      }
      while ( v7 < v17[30001] );
    }
    result = v6;
  }
  return result;
}
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);

//----- (00475500) --------------------------------------------------------
void *__thiscall sub_475500(_DWORD *this, int a2)
{
  void *result; // eax
  _DWORD *v3; // edi
  int (__thiscall ***v4)(_DWORD, signed int); // esi

  result = dword_563908;
  v3 = this;
  if ( *((_DWORD *)dword_563908 + 6898) && *(_DWORD *)(*((_DWORD *)dword_563908 + 6898) + 56) == a2 )
    *((_DWORD *)dword_563908 + 6898) = 0;
  v4 = (int (__thiscall ***)(_DWORD, signed int))this[a2 + 1];
  if ( v4 )
  {
    sub_401A41(this + 15001, this + 30001, this[a2 + 1]);
    result = (void *)(**v4)(v4, 1);
    v3[a2 + 1] = 0;
  }
  return result;
}
// 401A41: using guessed type _DWORD __cdecl sub_401A41(_DWORD, _DWORD, char);

//----- (00475580) --------------------------------------------------------
_DWORD *__fastcall sub_475580(_DWORD *a1, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edx
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // edx
  _DWORD *v10; // ecx
  int v11; // ebx
  __int16 v12; // ax
  int v13; // ecx
  int v14; // eax
  unsigned int v15; // edx
  int v16; // eax
  int v17; // eax
  signed int v19; // [esp+10h] [ebp+8h]

  v4 = a1;
  *a1 = &Vehicle::`vftable';
  a1[95] = sub_401D39(a1, a2);
  v4[14] = a3;
  v4[15] = 0;
  v4[17] = 0;
  v4[18] = a4;
  v4[16] = -1;
  v4[41] = 0;
  v4[80] = 0;
  v4[81] = 0;
  v4[82] = 0;
  v4[36] = 0x7FFF;
  v4[37] = 0x7FFF;
  v4[38] = 0;
  v4[83] = 0;
  v4[93] = 0;
  v4[94] = 0;
  if ( *(_WORD *)(a4 + 1022) == 1 || *((_DWORD *)dword_563908 + 2705) <= 0 )
    v6 = 0;
  else
    v6 = *(_DWORD *)((char *)dword_563908 + 57682);
  v4[84] = v6;
  v4[79] = sub_401D39(0x7FFF, v5);
  v4[40] = 0;
  memset(v4 + 1, 0, 0x34u);
  v4[27] = 0;
  v4[28] = 0;
  v4[29] = 0;
  v4[30] = 0;
  v4[31] = 0;
  v4[32] = 0;
  v4[33] = 0;
  v4[34] = 0;
  v4[77] = 0;
  v4[78] = 0;
  v7 = sub_4AA830((int *)Memory);
  v8 = v4[18];
  v4[35] = v7;
  v9 = 1000 * *(_DWORD *)(v8 + 1080);
  v10 = Memory;
  if ( v4[14] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
    v9 += *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 84));
  v19 = 1;
  if ( v9 >= 1 )
    v19 = v9;
  *((_DWORD *)Memory + 4) ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v7);
  *(_DWORD *)(v10[1] + 4 * v7) = v19 ^ *v10;
  v10[4] ^= *(_DWORD *)(v10[1] + 4 * v7);
  v4[42] = 0;
  v4[43] = 0;
  v4[44] = 0;
  v4[45] = 0;
  v4[46] = 0;
  v4[47] = 0;
  v4[48] = 0;
  v4[39] = -1;
  v4[51] = -1;
  v4[52] = 0;
  sub_401A73((char *)dword_563908 + 108210, v4 + 53);
  v11 = v4[18];
  v12 = *(_WORD *)(v11 + 1032);
  v13 = 1;
  if ( v12 >= 1 )
    v13 = v12;
  v4[19] = -v13;
  v4[21] = v13;
  if ( dword_53A7C4 )
    v14 = 7 * v13 / 10;
  else
    v14 = v13;
  v4[20] = -v14;
  if ( dword_53A7C4 )
  {
    v15 = (signed int)((unsigned __int64)(12025908433i64 * v13) >> 32) >> 2;
    v13 = v15 + (v15 >> 31);
  }
  v4[22] = v13;
  v4[23] = -8 - *(signed __int16 *)(v11 + 1032);
  v4[25] = *(signed __int16 *)(v11 + 1032) + 8;
  v16 = *(signed __int16 *)(v11 + 1032) + 8;
  if ( dword_53A7C4 )
    v16 = 7 * v16 / 10;
  v4[24] = -v16;
  v17 = *(signed __int16 *)(v11 + 1032) + 8;
  if ( dword_53A7C4 )
    v17 = 7 * v17 / 10;
  v4[26] = v17;
  return v4;
}
// 401A73: using guessed type _DWORD __cdecl sub_401A73(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 516554: using guessed type void *Vehicle::`vftable';
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00475900) --------------------------------------------------------
_DWORD *__thiscall sub_475900(void *Memory, char a2)
{
  _DWORD *v2; // esi
  int v3; // ecx

  v2 = Memory;
  *(_DWORD *)Memory = &Vehicle::`vftable';
  v3 = *((_DWORD *)dword_563908 + 1503);
  sub_4024FA(v2);
  *(_BYTE *)(*((_DWORD *)::Memory + 2) + v2[35]) = 0;
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4024FA: using guessed type _DWORD __stdcall sub_4024FA(_DWORD);
// 516554: using guessed type void *Vehicle::`vftable';

//----- (00475960) --------------------------------------------------------
int __thiscall sub_475960(int *this, int a2)
{
  int *v2; // esi
  unsigned int v3; // eax
  char *v4; // edi
  int v5; // eax
  int v6; // eax
  signed int v7; // ecx
  int v8; // eax
  int v9; // ecx
  unsigned __int8 *v10; // eax
  int v11; // ST10_4
  char *v12; // eax
  int v13; // ST10_4
  int result; // eax
  int *v15; // esi
  signed int v16; // edi
  int v17; // ecx

  v2 = this;
  if ( *(_DWORD *)((char *)dword_563908 + 57670) || (*(int (**)(void))(*(_DWORD *)this[18] + 4))() == 5 )
  {
    v6 = (*(int (__thiscall **)(int *))(*v2 + 204))(v2);
    v4 = (char *)dword_563908;
  }
  else
  {
    v3 = v2[16];
    if ( (v3 & 0x80000000) != 0 )
      goto LABEL_14;
    if ( v3 > 0x1387 )
      goto LABEL_14;
    v4 = (char *)dword_563908;
    v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v3 + 12408);
    if ( !v5 )
      goto LABEL_14;
    v6 = *(signed __int16 *)(v5 + 100);
  }
  if ( v6 < 0 )
  {
LABEL_14:
    v2[51] = -1;
    HIWORD(v13) = *((unsigned __int8 *)dword_563908 + 108222);
    LOBYTE(v13) = *((_BYTE *)dword_563908 + 108230);
    BYTE1(v13) = *((_BYTE *)dword_563908 + 108226);
    v2[52] = v13;
    v12 = (char *)dword_563908 + 108210;
    goto LABEL_15;
  }
  if ( v6 >= 50 )
  {
    v7 = *(_DWORD *)(v4 + 108206);
    if ( v7 < 1 )
      v7 = 1;
    v6 %= v7;
  }
  v8 = 618 * v6;
  v9 = *(_DWORD *)&v4[v8 + 77342];
  v10 = (unsigned __int8 *)&v4[v8 + 77306];
  v2[51] = v9;
  LOBYTE(v11) = v10[56];
  BYTE1(v11) = v10[54];
  HIWORD(v11) = v10[52];
  v2[52] = v11;
  v12 = (char *)(v10 + 602);
LABEL_15:
  result = sub_401A73(v12, v2 + 53);
  if ( !a2 )
  {
    v15 = v2 + 27;
    v16 = 8;
    do
    {
      result = *v15;
      if ( *v15 )
      {
        v17 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * result + 4);
        if ( v17 )
          result = (*(int (__stdcall **)(signed int))(*(_DWORD *)v17 + 4))(1);
      }
      ++v15;
      --v16;
    }
    while ( v16 );
  }
  return result;
}
// 401A73: using guessed type _DWORD __cdecl sub_401A73(_DWORD, _DWORD);

//----- (00475B30) --------------------------------------------------------
int *__thiscall sub_475B30(int **this, signed int a2, __int16 a3, int a4, int a5, int a6)
{
  int **v6; // ebx
  signed int v7; // ebp
  int *v8; // esi
  char *v9; // ecx
  int *v10; // edi
  int v11; // eax
  int v12; // edi
  int *v13; // eax
  int v14; // eax
  int v15; // eax
  _DWORD *v16; // eax
  int v17; // ecx
  _DWORD *v18; // eax
  int v20; // [esp+14h] [ebp-2Ch]
  int v21; // [esp+18h] [ebp-28h]
  int v22; // [esp+1Ch] [ebp-24h]
  int v23; // [esp+20h] [ebp-20h]
  int v24; // [esp+24h] [ebp-1Ch]
  int v25; // [esp+28h] [ebp-18h]
  int v26; // [esp+2Ch] [ebp-14h]
  void *v27; // [esp+30h] [ebp-10h]
  int v28; // [esp+3Ch] [ebp-4h]

  v6 = this;
  v7 = a2;
  v8 = 0;
  v20 = 0;
  if ( a2 < 5001 )
  {
    v9 = (char *)dword_563908;
    if ( *((_DWORD *)dword_563908 + 7713) )
    {
      sub_401136(a4);
      v9 = (char *)dword_563908;
    }
    v20 = *(_DWORD *)(v9 + 57666);
    if ( v20 )
    {
      v10 = v6[v7 + 1];
      if ( v10 )
      {
        v23 = (*(int (__thiscall **)(int *, int *, int *, int *))(*v10 + 84))(v10, &v26, &v25, &v24);
        (*(void (__thiscall **)(int *, int *, int *, signed int *))(*v10 + 92))(v10, &v22, &v21, &a2);
      }
      else
      {
        v20 = 0;
      }
    }
  }
  sub_401D3E(v7);
  v11 = sub_4B2F30(*v6, a3);
  v12 = v11;
  if ( v11 )
  {
    switch ( (*(int (__thiscall **)(int))(*(_DWORD *)v11 + 4))(v11) )
    {
      case 2:
        v27 = operator new(0x544u);
        v28 = 0;
        if ( !v27 )
          goto LABEL_18;
        v13 = (int *)sub_401A0A(v7, v12, a5);
        goto LABEL_19;
      case 3:
        v27 = operator new(0x1E4u);
        v28 = 1;
        if ( !v27 )
          goto LABEL_18;
        v13 = (int *)sub_402414(v7, v12, a5);
        goto LABEL_19;
      case 4:
        v27 = operator new(0x1A8u);
        v28 = 2;
        if ( !v27 )
          goto LABEL_18;
        v13 = (int *)sub_40248C(v7, v12, a5);
        goto LABEL_19;
      case 5:
        v27 = operator new(0x1B4u);
        v28 = 3;
        if ( v27 )
          v13 = (int *)sub_401AFF(v7, v12, a5);
        else
LABEL_18:
          v13 = 0;
LABEL_19:
        v8 = v13;
        v28 = -1;
        break;
      default:
        break;
    }
    v6[(_DWORD)v6[30001] + 15001] = v8;
    v6[30001] = (int *)((char *)v6[30001] + 1);
    v14 = a4;
    v6[v7 + 1] = v8;
    (*(void (__thiscall **)(int *, int))(*v8 + 24))(v8, v14);
  }
  if ( v7 < 5001 && (unsigned int)v7 <= 0x1387 )
  {
    v15 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v7 + 12408);
    if ( v15 )
      *(_WORD *)(v15 + 98) = a3;
  }
  if ( v8 && v20 )
    (*(void (__thiscall **)(int *, int, int, int, int, int, int, signed int))(*v8 + 96))(
      v8,
      v26,
      v25,
      v24,
      v23,
      v22,
      v21,
      a2);
  (*(void (__thiscall **)(int *))(*v8 + 12))(v8);
  v16 = dword_563908;
  if ( v8 == *((int **)dword_563908 + 6898) )
  {
    if ( v7 < 5001 && *(_DWORD *)((char *)dword_563908 + 57706) >= 0 )
    {
      v17 = *((_DWORD *)dword_563908 + 2679);
      v18 = Memory;
      v18[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v17);
      *(_DWORD *)(v18[1] + 4 * v17) = *v18;
      v18[4] ^= *(_DWORD *)(v18[1] + 4 * v17);
      sub_401992(1000 * *(_DWORD *)((char *)dword_563908 + 57706));
      v16 = dword_563908;
    }
    if ( v16[77] )
      (*(void (__thiscall **)(int *, _DWORD, signed int))(*v8 + 120))(v8, 0, 1);
  }
  return v8;
}
// 401136: using guessed type _DWORD __stdcall sub_401136(_DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);
// 401A0A: using guessed type _DWORD __stdcall sub_401A0A(_DWORD, _DWORD, _DWORD);
// 401AFF: using guessed type _DWORD __stdcall sub_401AFF(_DWORD, _DWORD, _DWORD);
// 401D3E: using guessed type _DWORD __stdcall sub_401D3E(_DWORD);
// 402414: using guessed type _DWORD __stdcall sub_402414(_DWORD, _DWORD, _DWORD);
// 40248C: using guessed type _DWORD __stdcall sub_40248C(_DWORD, _DWORD, _DWORD);

//----- (00475EF0) --------------------------------------------------------
int __thiscall sub_475EF0(_WORD *this, int a2)
{
  int v2; // eax

  v2 = a2;
  if ( !this[20 * a2 + 968] )
    v2 = 0;
  return (int)&this[20 * v2 + 950];
}

//----- (00475F40) --------------------------------------------------------
_DWORD *__thiscall sub_475F40(_DWORD *this, signed __int16 *a2, int a3)
{
  _DWORD *result; // eax
  int v4; // edx
  _DWORD *v5; // eax
  int v6; // ecx
  _DWORD *v7; // esi
  int v8; // edi
  int v9; // edx

  result = a2;
  this[42] = 10000 * a2[1];
  this[43] = 10000 * a2[2];
  this[44] = 10000 * a2[3];
  this[48] = 1000 * *((unsigned __int8 *)a2 + 8);
  if ( this[14] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v4 = *a2;
    v5 = Memory;
    v6 = this[35];
    v5[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v6);
    v7 = v5 + 1;
    v8 = 1000 * v4 ^ *v5;
    v9 = v5[1];
    result = v5 + 4;
    *(_DWORD *)(v9 + 4 * v6) = v8;
    *result ^= *(_DWORD *)(*v7 + 4 * v6);
  }
  return result;
}

//----- (00476000) --------------------------------------------------------
signed int __thiscall sub_476000(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int result; // eax
  int *v3; // ecx

  v1 = this;
  result = sub_401479();
  v3 = (int *)v1[107];
  if ( v3 )
    result = sub_4A6E90(v3, v1[42] / 10000, v1[43] / 10000, 0, 0, 0, 0, 0);
  return result;
}
// 401479: using guessed type int sub_401479(void);

//----- (00476070) --------------------------------------------------------
int __thiscall sub_476070(_DWORD *this)
{
  int result; // eax

  result = 0;
  this[131] = 0;
  this[129] = 0;
  this[130] = 0;
  this[132] = 0;
  return result;
}

//----- (004760A0) --------------------------------------------------------
void __thiscall sub_4760A0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // eax
  int v7; // edi
  int v8; // eax

  v4 = this;
  if ( a4 )
  {
    v5 = this[42] / 10000;
    if ( v5 + this[19] <= 16 * a2 + 16 && v5 + this[21] >= 16 * a2 )
    {
      v6 = this[43] / 10000;
      if ( v6 + this[20] <= 16 * a3 + 16 && v6 + this[22] >= 16 * a3 )
      {
        v7 = *this;
        v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*this + 196))(this, 0, 0);
        (*(void (__thiscall **)(_DWORD *, int, int, int))(v7 + 128))(v4, v4[42] / 10000, v4[43] / 10000, v8 + 32);
      }
    }
  }
}

//----- (004761B0) --------------------------------------------------------
void __thiscall sub_4761B0(_DWORD *this)
{
  int v1; // eax
  __int16 v2; // ax
  long double v3; // st7
  int v4; // eax
  double v5; // [esp+8h] [ebp-18h]
  double v6; // [esp+10h] [ebp-10h]
  double v7; // [esp+18h] [ebp-8h]

  v1 = this[18];
  this[336] = 0;
  v2 = *(_WORD *)(v1 + 1032);
  if ( v2 > 0 )
  {
    v7 = 3.0 / (double)v2;
    if ( v7 < 0.06346651825252525 )
      v7 = 0.06346651825252525;
    v6 = (double)(10000 * v2);
    v3 = 0.0;
    v5 = 0.0;
    do
    {
      this[2 * this[336] + 136] = (signed int)(sin(v3) * v6);
      v4 = (signed int)(cos(v5) * v6);
      if ( dword_53A7C4 )
        v4 = 7 * v4 / 10;
      v3 = v5 + v7;
      this[2 * this[336]++ + 137] = v4;
      v5 = v3;
    }
    while ( v3 < 6.283185307 );
  }
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (004762F0) --------------------------------------------------------
int __thiscall sub_4762F0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ebp
  _DWORD *v6; // edi
  unsigned int v7; // edx

  v4 = this;
  (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 0, 0);
  v5 = 0;
  if ( v4[336] > 0 )
  {
    v6 = v4 + 136;
    do
    {
      v7 = (unsigned __int64)(1759218605i64 * (v4[43] + v6[1])) >> 32;
      (*(void (__thiscall **)(int, int, unsigned int, _DWORD))(*(_DWORD *)a2 + 24))(
        a2,
        (v4[42] + *v6) / 10000 - a3,
        ((signed int)v7 >> 12) + (v7 >> 31) - a4,
        *((unsigned __int16 *)dword_563908 + 89));
      ++v5;
      v6 += 2;
    }
    while ( v5 < v4[336] );
  }
  return (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 96))(a2);
}

//----- (004763C0) --------------------------------------------------------
void __thiscall sub_4763C0(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // ecx
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx

  v1 = this;
  if ( this[16] >= 0 )
  {
    v2 = (_DWORD *)this[105];
    if ( v2 )
    {
      if ( (v1[129] || v1[131])
        && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])
        && *((_DWORD *)dword_563918 + 2273) )
      {
        if ( !sub_4A6390(v2, -1) )
          sub_4A7120((_DWORD *)v1[105], 0, 0, 1, 0);
      }
      else
      {
        sub_4A5FA0(v2, -1);
      }
    }
    v3 = (_DWORD *)v1[104];
    if ( v3 )
    {
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])) < 0
        || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])
        || !*((_DWORD *)dword_563918 + 2273) )
      {
        sub_4A5FA0(v3, -1);
      }
      else if ( !sub_4A6390(v3, -1) )
      {
        sub_4A7120((_DWORD *)v1[104], 0, 0, 1, 0);
      }
    }
    v4 = (_DWORD *)v1[106];
    if ( v4 )
    {
      if ( v1[130]
        && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])
        && *((_DWORD *)dword_563918 + 2272) )
      {
        if ( !sub_4A6390(v4, -1) )
          sub_4A7120((_DWORD *)v1[106], 0, 0, 1, 0);
      }
      else
      {
        sub_4A5FA0(v4, -1);
      }
    }
  }
}

//----- (00476530) --------------------------------------------------------
int __thiscall sub_476530(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // ecx
  int result; // eax
  _DWORD *v4; // ecx
  _DWORD *v5; // ecx

  v1 = this;
  v2 = (_DWORD *)this[105];
  if ( v2 )
    result = sub_4A5FA0(v2, -1);
  v4 = (_DWORD *)v1[104];
  if ( v4 )
    result = sub_4A5FA0(v4, -1);
  v5 = (_DWORD *)v1[106];
  if ( v5 )
    result = sub_4A5FA0(v5, -1);
  return result;
}

//----- (00476580) --------------------------------------------------------
void __thiscall sub_476580(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  int v6; // ebx
  int v7; // ebp
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  _DWORD *v11; // edi
  int v12; // ecx
  int v13; // ecx
  int v14; // eax
  int v15; // ecx
  int v16; // ecx
  int v17; // eax
  int v18; // edi
  int v19; // edx
  int v20; // ebp
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // edx
  int v26; // ecx
  int v27; // eax
  __int64 v28; // rax
  int v29; // ecx
  signed int v30; // eax
  unsigned int v31; // edx
  __int64 v32; // rax
  int v33; // ecx
  signed int v34; // eax
  int v35; // eax
  int v36; // ebp
  int v37; // ecx
  int v38; // edi
  int v39; // eax
  int v40; // ST24_4
  int v41; // ST20_4
  int v42; // eax
  int v43; // ecx
  int v44; // edx
  int v45; // edi
  signed int v46; // eax
  int v47; // [esp+4h] [ebp-20h]
  unsigned int v48; // [esp+4h] [ebp-20h]
  int v49; // [esp+8h] [ebp-1Ch]
  int v50; // [esp+Ch] [ebp-18h]
  int v51; // [esp+10h] [ebp-14h]
  int v52; // [esp+14h] [ebp-10h]
  int v53; // [esp+18h] [ebp-Ch]
  int v54; // [esp+18h] [ebp-Ch]
  int v55; // [esp+1Ch] [ebp-8h]
  int v56; // [esp+20h] [ebp-4h]

  v4 = this;
  if ( this[81] && sub_40237E(this) )
  {
    sub_40227F(a2, a3, a4);
    v5 = v4[42] / 10000 - a3;
    v6 = 0;
    v55 = v4[42] / 10000 - a3;
    if ( dword_53A7C4 )
    {
      v7 = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[44]) >> 32) >> 12)
         + *(signed __int16 *)(v4[18] + 1044);
      v8 = (signed int)(7 * (v7 + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[44]) >> 32) >> 31)))
         / 10;
      v49 = (signed int)(7 * (v7 + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[44]) >> 32) >> 31)))
          / 10;
    }
    else
    {
      v49 = 0;
      v8 = 0;
    }
    v9 = v4[43] / 10000 - a4 - v8;
    v52 = v4[43] / 10000 - a4 - v8;
    if ( v5 >= -100
      && v5 <= *((_DWORD *)dword_563908 + 3111) + 100
      && v9 >= -100
      && v9 <= *((_DWORD *)dword_563908 + 3112) + 100
      && (v4[84] <= 0 || !(*((_BYTE *)dword_563908 + 10820) & 8))
      && !(*(int (__thiscall **)(_DWORD *))(*v4 + 184))(v4) )
    {
      v10 = v4[16];
      v11 = dword_563908;
      v56 = 0;
      if ( v10 != -1 )
      {
        v12 = *((_DWORD *)dword_563908 + 1504);
        v56 = sub_40105A(v10);
      }
      v13 = v4[81];
      v14 = v13 / 200;
      v51 = v13 / 200;
      if ( v4[36] < 0x7FFF && v14 > 2 )
      {
        v51 = 2;
        v14 = 2;
      }
      v47 = dword_538754[v14];
      if ( v47 == 3 )
      {
        v15 = v11[1508];
        if ( HIBYTE(v11[120 * sub_40137F(v4[42] / 160000, v4[43] / 160000) + 14898]) || v4[44] )
          v47 = 9;
      }
      v48 = v47 | 0x80000100;
      if ( v4[14] == v11[2692] )
      {
        v48 |= 0x800u;
        (*(void (__thiscall **)(_DWORD *))(*v4 + 188))(v4);
      }
      v16 = 0;
      v53 = 0;
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35])) < 0
        || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35]) )
      {
        v17 = v4[96];
        v18 = v4[98];
        v19 = *(_DWORD *)(v17 + 1652);
        v20 = *(signed __int16 *)(v17 + 1656);
      }
      else if ( v4[16] == -1 )
      {
        v21 = v4[96];
        v18 = v4[99];
        v19 = *(_DWORD *)(v21 + 1592);
        v20 = *(signed __int16 *)(v21 + 1596);
      }
      else if ( v4[45] || v4[46] || (v18 = v4[102]) == 0 )
      {
        v23 = v4[96];
        v18 = v4[97];
        v19 = *(_DWORD *)(v23 + 1532);
        v20 = *(signed __int16 *)(v23 + 1536);
      }
      else
      {
        v22 = v4[96];
        v19 = *(_DWORD *)(v22 + 1832);
        v20 = *(signed __int16 *)(v22 + 1836);
      }
      v50 = v19;
      if ( v18 )
      {
        if ( !v20 )
          v20 = *(signed __int16 *)(v18 + 170);
        v24 = sub_401C80(v4[48], *(signed __int16 *)(v18 + 176));
        v26 = *(unsigned __int16 *)(v18 + 196);
        v54 = v24;
        switch ( v26 )
        {
          case 0:
          case 1:
            v6 = sub_401B59(v24, *((_DWORD *)dword_563908 + 2705), v20);
            break;
          case 2:
            v6 = ((signed int)((unsigned __int64)(274877907i64 * (signed int)v4[135]) >> 32) >> 6)
               + v24 * *(signed __int16 *)(v18 + 178)
               + ((unsigned int)((unsigned __int64)(274877907i64 * (signed int)v4[135]) >> 32) >> 31);
            break;
          case 3:
            v6 = *(signed __int16 *)(v18 + 178) / 2
               + v24 * *(signed __int16 *)(v18 + 178)
               - v4[134] * (*(signed __int16 *)(v18 + 178) / 2 + 1) / 1000;
            break;
          case 4:
            if ( v4[129] <= 0 )
            {
              v32 = sub_401D39(v26, v25) - v4[115];
              if ( (signed int)((HIDWORD(v32) ^ v32) - HIDWORD(v32)) >= 49 )
                v34 = 49;
              else
                v34 = abs(sub_401D39(v33, HIDWORD(v32)) - v4[115]);
              v6 = *(signed __int16 *)(v18 + 178)
                 - v34 * *(signed __int16 *)(v18 + 178) / 50
                 - 1
                 + v54 * *(signed __int16 *)(v18 + 178);
            }
            else
            {
              v28 = sub_401D39(v26, v25) - v4[116];
              if ( (signed int)((HIDWORD(v28) ^ v28) - HIDWORD(v28)) >= 49 )
                v30 = 49;
              else
                v30 = abs(sub_401D39(v29, HIDWORD(v28)) - v4[116]);
              v31 = (signed int)((unsigned __int64)(1374389535i64 * v30 * *(signed __int16 *)(v18 + 178)) >> 32) >> 4;
              v6 = v31 + (v31 >> 31) + v54 * *(signed __int16 *)(v18 + 178);
            }
            break;
          case 5:
            v27 = abs(sub_401D39(v26, v25) - v4[41]);
            if ( v27 >= v20 )
              v27 = v20 - 1;
            v6 = sub_401B59(v54, v27, v20);
            break;
          default:
            v6 = v24 * *(signed __int16 *)(v18 + 178);
            break;
        }
        v35 = sub_4015FF(v50, v4[52]);
        v36 = v55;
        sub_4A50B0(v18, v6, a2, v55, v52, v48, v35, v49, v4 + 53, 0);
        v53 = v18;
        v16 = v18;
      }
      else
      {
        v36 = v55;
      }
      if ( v4[16] != -1 )
      {
        v37 = v4[44];
        if ( v37 )
        {
          v38 = v4[103];
          if ( v38 )
          {
            v39 = v4[96];
            v40 = *(_DWORD *)(v39 + 1892);
            v41 = ((*(signed __int16 *)(v39 + 1888) | (*(signed __int16 *)(v39 + 1890) << 7)) << 16) | 0x103;
            v42 = sub_4025D1(
                    v38,
                    v4[48] / 1000,
                    *((_DWORD *)dword_563908 + 2705),
                    v37 / 10000,
                    *(signed __int16 *)(v4[96] + 1896));
            sub_4A50B0(v38, v42, a2, v36, v52 + v49, v41, v40, 1, 0, 0);
          }
        }
        if ( *((_DWORD *)dword_563918 + 2266) || v4[16] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
        {
          v43 = v4[100];
          if ( v43 )
          {
            v44 = v4[96];
            if ( *(_WORD *)(v44 + 2546) == 1 )
              sub_4A50B0(
                v43,
                v6,
                a2,
                v36,
                v52,
                dword_538754[v51] | ((*(signed __int16 *)(v44 + 1708) | (*(signed __int16 *)(v44 + 1710) << 7)) << 16) | 0x100,
                *(_DWORD *)(v44 + 1712),
                v49 + 1,
                0,
                0);
          }
        }
        sub_402216(a2, a3, a4);
        v16 = v53;
      }
      if ( v16 )
      {
        v45 = abs(*(signed __int16 *)(*(_DWORD *)(v16 + 360) + 6))
            + *(signed __int16 *)(*(_DWORD *)(v16 + 360) + 2)
            - *(signed __int16 *)(v16 + 174) / 2
            + 12;
        v46 = 0;
        if ( v56 )
          v46 = sub_49AD10(
                  *((_DWORD **)dword_563908 + *((_DWORD *)dword_563918 + 2341) + 1516),
                  (const char *)(v56 + 32));
        (*(void (__thiscall **)(_DWORD *, int, int, int, int))(*v4 + 48))(
          v4,
          a2,
          v36 - v46 / 2,
          v52 + v45,
          dword_538754[v51]);
      }
    }
  }
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401C80: using guessed type _DWORD __cdecl sub_401C80(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402216: using guessed type _DWORD __stdcall sub_402216(_DWORD, _DWORD, _DWORD);
// 40227F: using guessed type _DWORD __stdcall sub_40227F(_DWORD, _DWORD, _DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);
// 4025D1: using guessed type _DWORD __cdecl sub_4025D1(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00476E00) --------------------------------------------------------
int __thiscall sub_476E00(_DWORD *this)
{
  return this[96] + 2792;
}

//----- (00476E10) --------------------------------------------------------
int __thiscall sub_476E10(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  __int16 v3; // ax
  int v4; // ebp
  unsigned int v5; // edx
  int **v6; // ecx
  int v7; // edx
  int v8; // esi
  __int16 v9; // ax
  int v10; // esi
  int v11; // ecx
  int v12; // eax

  v2 = this;
  v3 = *(_WORD *)(this[96] + 1452);
  v4 = 0;
  if ( !v3 || (v5 = this[16], v5 > 0x1387) )
  {
LABEL_8:
    v6 = (int **)dword_563908;
    goto LABEL_9;
  }
  v6 = (int **)dword_563908;
  v7 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v5 + 12408);
  if ( v7 && *(_DWORD *)(v7 + 120) > 0 )
  {
    v8 = sub_4B2F30(*((int **)dword_563908 + 1511), v3);
    if ( v8 && (*(int (__thiscall **)(int))(*(_DWORD *)v8 + 4))(v8) == 2 )
      v4 = sub_401537(a2);
    goto LABEL_8;
  }
LABEL_9:
  if ( v2[39] >= 0 )
  {
    if ( v6[1501] )
    {
      v9 = *(_WORD *)(v2[96] + 1448);
      if ( v9 )
      {
        v10 = sub_4B2F30(v6[1511], v9);
        if ( v10 )
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)v10 + 4))(v10) == 2 )
            v4 = sub_401537(a2);
        }
      }
    }
  }
  if ( v4 )
    return v4;
  v11 = v2[96];
  v12 = a2;
  if ( !*(_WORD *)(v11 + 40 * a2 + 1936) )
    v12 = 0;
  return v11 + 40 * v12 + 1900;
}
// 401537: using guessed type _DWORD __stdcall sub_401537(_DWORD);

//----- (00476F50) --------------------------------------------------------
int __thiscall sub_476F50(_DWORD *this, int a2, int *a3, int *a4, int *a5, int *a6, signed int *a7, int *a8)
{
  _DWORD *v8; // edi
  int v9; // ecx
  int v10; // eax
  _DWORD *v11; // esi
  int v12; // edx
  int v13; // eax
  int v14; // edx
  int *v15; // esi
  double v16; // st7
  double v17; // st6
  long double v18; // st7
  double v19; // st6
  double v20; // st5
  _DWORD *v21; // ebx
  bool v22; // zf
  int v23; // ecx
  int v24; // ecx
  signed int *v25; // eax
  signed int v26; // eax
  int v27; // eax
  int v28; // edx
  int v29; // ecx
  int v30; // eax
  int v31; // ecx
  int v32; // eax
  int v33; // eax
  int result; // eax
  int *v35; // ebx
  int v36; // ecx
  int v37; // edx
  _DWORD *v38; // ebx
  int v39; // esi
  int v40; // ecx
  int v41; // ecx
  int v42; // eax
  long double v43; // st7
  long double v44; // st6
  double v45; // st5
  bool v46; // sf
  _DWORD *v47; // esi
  int v48; // ebx
  int v49; // ecx
  int v50; // ecx
  int v51; // eax
  long double v52; // st7
  long double v53; // st6
  double v54; // st5
  unsigned __int8 v55; // of
  unsigned int v56; // edx
  long double v57; // st7
  int v58; // edx
  int *v59; // ebx
  int v60; // edx
  int v61; // ecx
  int v62; // eax
  int v63; // ecx
  int v64; // eax
  int *v65; // ecx
  int v66; // ecx
  int *v67; // ecx
  int v68; // edx
  int v69; // ecx
  int v70; // ebx
  int v71; // eax
  int v72; // ebx
  int v73; // ecx
  unsigned int v74; // edx
  int v75; // ecx
  int v76; // ebx
  signed int *v77; // [esp+Ch] [ebp-6Ch]
  signed int v78; // [esp+Ch] [ebp-6Ch]
  int v79; // [esp+10h] [ebp-68h]
  signed int v80; // [esp+14h] [ebp-64h]
  signed int v81; // [esp+14h] [ebp-64h]
  int v82; // [esp+18h] [ebp-60h]
  int v83; // [esp+1Ch] [ebp-5Ch]
  int v84; // [esp+20h] [ebp-58h]
  int v85; // [esp+24h] [ebp-54h]
  int v86; // [esp+28h] [ebp-50h]
  int v87; // [esp+2Ch] [ebp-4Ch]
  int v88; // [esp+30h] [ebp-48h]
  int v89; // [esp+34h] [ebp-44h]
  unsigned int v90; // [esp+38h] [ebp-40h]
  int v91; // [esp+3Ch] [ebp-3Ch]
  long double v92; // [esp+40h] [ebp-38h]
  int v93; // [esp+4Ch] [ebp-2Ch]
  long double v94; // [esp+50h] [ebp-28h]
  int v95; // [esp+5Ch] [ebp-1Ch]
  long double v96; // [esp+60h] [ebp-18h]
  long double v97; // [esp+68h] [ebp-10h]
  int v98; // [esp+74h] [ebp-4h]

  v8 = this;
  v9 = *a4 / 160000;
  v10 = *a3 / 160000;
  v11 = (_DWORD *)*((_DWORD *)dword_563908 + 1508);
  if ( v10 < 0 || v9 < 0 || (v12 = v11[1], v10 >= v12) || v9 >= v11[2] )
    v13 = 0;
  else
    v13 = v11[(*(_BYTE *)(3 * (v10 + v9 * v12) + v11[1292]) & 0x7F) + 520];
  v77 = (signed int *)sub_402784(v13);
  v14 = (v8[48] + 180000) % 240000;
  v15 = a7;
  v86 = 800 * v77[4] / 255;
  v87 = v14;
  v97 = (double)v14 * 0.00002617993877916667;
  v16 = (double)*a7;
  v17 = (double)*a6;
  sub_4C444A((void *)0x3A980);
  v88 = 10000 - abs((signed int)(sin(v97 - v16) * (double)v86)) / 2 - v86;
  v98 = *(signed __int16 *)(v8[96] + 2544);
  v96 = cos(v97);
  v18 = sin(v97);
  v19 = (double)(480 * v8[131]);
  v87 = 480 * v8[129];
  v20 = (double)v87;
  v89 = (signed int)(v20 * v96) / 127 - (signed int)(v19 * v18) / 127;
  v21 = dword_563908;
  v22 = v8 == *((_DWORD **)dword_563908 + 6898);
  v90 = ((signed int)((signed int)(v96 * v19) + ((unsigned __int64)(-2130574327i64 * (signed int)(v96 * v19)) >> 32)) >> 6)
      + (signed int)(v18 * v20) / 127
      + ((unsigned int)((signed int)(v96 * v19) + ((unsigned __int64)(-2130574327i64 * (signed int)(v96 * v19)) >> 32)) >> 31);
  if ( v22 )
  {
    v23 = v77[7] * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 4) / 1000 + v77[7];
    if ( v8[132] && *v77 )
      v23 = *v77 * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 8) / 1000 + *v77;
    v24 = v23 * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 88))) / 10000
        + v23;
    v78 = v24;
  }
  else
  {
    v25 = v77;
    v78 = v77[7];
    if ( v8[132] )
    {
      v26 = *v25;
      if ( v26 )
        v78 = v26;
    }
    if ( v78 > v8[125] )
    {
      v24 = v78;
    }
    else
    {
      v78 = v8[125];
      v24 = v8[125];
    }
  }
  v27 = v8[18];
  v28 = v8[96];
  v82 = v24 * v24;
  v29 = *(signed __int16 *)(v27 + 1048);
  LODWORD(v97) = 10000 * *(signed __int16 *)(v27 + 1046);
  v30 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1514) + 26408);
  LODWORD(v96) = 10000 * v29;
  v31 = *(signed __int16 *)(v28 + 2576);
  v79 = *(signed __int16 *)(v28 + 2576);
  v91 = v30;
  if ( v30 || *((_DWORD *)dword_563908 + 35) )
  {
    if ( v31 )
    {
      v32 = (*(int (__thiscall **)(_DWORD *))(*v8 + 144))(v8);
      v21 = dword_563908;
      if ( v32 )
      {
        v79 = 0;
      }
      else if ( *((_DWORD *)dword_563908 + 35) > 0 )
      {
        v33 = (*(int (__thiscall **)(_DWORD *))(*v8 + 204))(v8);
        v21 = dword_563908;
        v95 = v33;
      }
    }
  }
  else
  {
    v79 = 0;
  }
  v86 = *(signed __int16 *)(v21[6897] + 96) != v8[16] ? 4 : 1;
  result = a2;
  if ( a2 > 0 )
  {
    v87 = a2;
    do
    {
      v35 = a6;
      v36 = v88;
      *a6 = v88 * *a6 / 10000;
      result = v90;
      v37 = v89;
      *v15 = v36 * *v15 / 10000;
      *v35 += v37;
      *v15 += result;
      if ( v79 )
      {
        if ( v91 > 0 )
        {
          v80 = 25384;
          v84 = v91;
          do
          {
            v38 = *(_DWORD **)(v80 + *((_DWORD *)dword_563908 + 1514));
            v39 = (*a3 - v38[6]) / 10000;
            v40 = (*a4 - v38[7]) / 10000;
            LODWORD(v94) = v40;
            v41 = v39 * v39 + v40 * v40;
            v93 = v39;
            LODWORD(v92) = v41;
            if ( v41 > 0 && v41 < v38[4] )
            {
              v42 = v38[3] / v41;
              v92 = (double)SLODWORD(v92);
              v78 += 4 * v78 * v42 / 10000;
              v82 = v78 * v78;
              v43 = sqrt(v92);
              v44 = v92;
              v45 = (double)SLODWORD(v94);
              *a6 -= (signed int)((double)v93 / v43 * (double)(signed int)v38[5] / v92);
              *a7 -= (signed int)(v45 / v43 * (double)(signed int)v38[5] / v44);
            }
            v80 += 4;
            --v84;
          }
          while ( v84 );
          v15 = a7;
          v35 = a6;
        }
        result = (int)dword_563908;
        v22 = *((_DWORD *)dword_563908 + 35) == 0;
        v46 = *((_DWORD *)dword_563908 + 35) < 0;
        v84 = 0;
        if ( !v46 && !v22 )
        {
          v81 = 12;
          do
          {
            v47 = *(_DWORD **)(v81 + result);
            if ( v47[4] != v95 )
            {
              v48 = (*a3 - v47[6]) / 10000;
              v49 = (*a4 - v47[7]) / 10000;
              LODWORD(v92) = v49;
              v50 = v48 * v48 + v49 * v49;
              v93 = v48;
              LODWORD(v94) = v50;
              if ( v50 > 0 && v50 < v47[9] )
              {
                v51 = v47[11] / v50;
                v94 = (double)SLODWORD(v94);
                v78 += 4 * v78 * v51 / 10000;
                v82 = v78 * v78;
                v52 = sqrt(v94);
                v53 = v94;
                v54 = (double)SLODWORD(v92);
                *a6 -= (signed int)((double)v93 / v52 * (double)(signed int)v47[10] / v94);
                *a7 -= (signed int)(v54 / v52 * (double)(signed int)v47[10] / v53);
              }
            }
            result = (int)dword_563908;
            v81 += 4;
            v55 = __OFSUB__(v84 + 1, *((_DWORD *)dword_563908 + 35));
            v46 = v84++ + 1 - *((_DWORD *)dword_563908 + 35) < 0;
          }
          while ( v46 ^ v55 );
          v15 = a7;
          v35 = a6;
        }
      }
      if ( v8[77] <= 0 )
      {
        v56 = (signed int)((unsigned __int64)(1717986919i64 * *v35) >> 32) >> 2;
        v84 = *v35;
        v93 = *v15;
        result = (v56 + (v56 >> 31)) * (v56 + (v56 >> 31)) + v93 / 10 * (v93 / 10);
        LODWORD(v94) = (v56 + (v56 >> 31)) * (v56 + (v56 >> 31)) + v93 / 10 * (v93 / 10);
        if ( result > v82 )
        {
          v92 = (double)v78;
          v57 = v92 / sqrt((double)SLODWORD(v94));
          LODWORD(v94) = abs((signed int)((double)v84 * v57));
          result = abs((signed int)(v57 * (double)v93));
          v58 = LODWORD(v94);
          if ( v84 < -LODWORD(v94) )
            *v35 = -LODWORD(v94);
          if ( *v35 > v58 )
            *v35 = v58;
          if ( *v15 < -result )
            *v15 = -result;
          if ( *v15 > result )
            *v15 = result;
        }
      }
      if ( !v8[118] )
      {
        v67 = a5;
        v59 = a5;
        goto LABEL_70;
      }
      v59 = a5;
      sub_4B66B0(
        *((_DWORD **)dword_563908 + 1508),
        (int)(v8 + 136),
        v8[336],
        v86,
        &v83,
        &v85,
        *a3,
        *a4,
        LODWORD(v97) + *a5,
        *a5 + LODWORD(v96));
      v60 = v83;
      if ( *a5 >= v83 )
      {
        v65 = a8;
      }
      else
      {
        v61 = v83 - *a5;
        *a5 = v83;
        v62 = *(unsigned __int16 *)(v8[18] + 1046);
        LODWORD(v94) = v61;
        v93 = v62;
        if ( (signed __int16)v62 <= 0 )
        {
          v65 = a8;
LABEL_62:
          if ( !*v65 )
            goto LABEL_64;
          goto LABEL_63;
        }
        v63 = SLODWORD(v94)
            / 10000
            * (*(signed __int16 *)(v8[96] + 2574)
             * (signed int)sqrt((double)*a6 * (double)*a6 + (double)*v15 * (double)*v15)
             / 1000);
        LODWORD(v94) = (signed __int16)v93;
        v64 = v63 / (signed __int16)v93;
        v65 = a8;
        v60 = v83;
        *a8 = v64;
      }
      if ( *a5 == v60 )
        goto LABEL_62;
LABEL_63:
      *v65 += v8[118];
      *a5 += *v65;
LABEL_64:
      if ( *a5 >= v60 )
      {
        v68 = -10000 * *(signed __int16 *)(v8[18] + 1048) + v85;
        result = *a5;
        v55 = __OFSUB__(*a5, v68);
        v22 = *a5 == v68;
        v46 = *a5 - v68 < 0;
        v85 += -10000 * *(signed __int16 *)(v8[18] + 1048);
        if ( !((unsigned __int8)(v46 ^ v55) | v22) )
        {
          *a5 = 2 * v68 - result;
          result = *v65 * *(signed __int16 *)(v8[96] + 2568) / -1000;
          *v65 = result;
        }
      }
      else
      {
        *a5 = 2 * v60 - *a5;
        v66 = *v65 * *(signed __int16 *)(v8[96] + 2568) / -1000;
        *a8 = v66;
        LODWORD(v94) = abs(v8[118]);
        result = abs(v66);
        if ( result < SLODWORD(v94) )
        {
          result = v83;
          v67 = a8;
          *a5 = v83;
LABEL_70:
          *v67 = 0;
          goto LABEL_71;
        }
      }
LABEL_71:
      if ( !*a6 && !*v15 )
        goto LABEL_77;
      v69 = *a3;
      v70 = *v59;
      v93 = *a4;
      v71 = v8[18];
      LODWORD(v94) = v69;
      v72 = v70 / 10000;
      if ( sub_4ABD20(
             *((_DWORD **)dword_563908 + 1508),
             (int)(v8 + 136),
             v8[336],
             v86,
             v72 + *(signed __int16 *)(v71 + 1046),
             v72 + *(signed __int16 *)(v71 + 1048),
             a3,
             a4,
             a6,
             v15,
             v8[96] + 2792,
             0) )
      {
        goto LABEL_76;
      }
      v73 = *((_DWORD *)dword_563908 + 1503);
      v74 = (signed int)((unsigned __int64)(1759218605i64 * *a3) >> 32) >> 12;
      result = sub_402360(
                 v8,
                 v74 + (v74 >> 31),
                 *a4 / 10000,
                 a6,
                 v15,
                 v8 + 19,
                 v72 + *(signed __int16 *)(v8[18] + 1046),
                 v72 + *(signed __int16 *)(v8[18] + 1048));
      if ( result )
      {
        v75 = v93;
        *a3 = LODWORD(v94);
        *a4 = v75;
LABEL_76:
        v76 = v98;
        *a6 = v98 * *a6 / 1000;
        result = 274877907 * v76 * *v15;
        *v15 = v76 * *v15 / 1000;
      }
LABEL_77:
      --v87;
    }
    while ( v87 );
  }
  return result;
}
// 402360: using guessed type _DWORD __stdcall sub_402360(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402784: using guessed type _DWORD __stdcall sub_402784(_DWORD);

//----- (00477B90) --------------------------------------------------------
int __fastcall sub_477B90(_DWORD *a1, int a2, int a3, signed int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  _DWORD *v6; // ebx
  int v7; // edi
  int v8; // ecx
  int v9; // ecx
  bool v10; // zf
  bool v11; // sf
  signed int v12; // ecx
  int v13; // ecx
  bool v14; // zf
  bool v15; // sf
  int result; // eax
  signed int v17; // eax
  int v18; // edi
  __int16 v19; // bx
  long double v20; // ST5C_8
  int v21; // edx
  int v22; // eax
  int v23; // edx
  int v24; // ecx
  int v25; // edi
  int v26; // ebx
  int v27; // ebp
  int v28; // edx
  int v29; // ecx
  int v30; // ebx
  int v31; // eax
  int v32; // ST30_4
  int v33; // ST24_4
  int v34; // ST20_4
  int v35; // ecx
  int v36; // ST1C_4
  int v37; // [esp+1Ah] [ebp-20h]
  __int16 v38; // [esp+26h] [ebp-14h]
  __int16 v39; // [esp+28h] [ebp-12h]
  __int16 v40; // [esp+2Ah] [ebp-10h]
  __int16 v41; // [esp+2Ch] [ebp-Eh]
  int v42; // [esp+2Eh] [ebp-Ch]
  int v43; // [esp+32h] [ebp-8h]
  char v44; // [esp+36h] [ebp-4h]

  v4 = a1;
  v5 = sub_401D39(a1, a2);
  v4[83] = v5;
  v6 = dword_563908;
  if ( *(_DWORD *)(v4[18] + 1188) )
    v37 = *(_DWORD *)((char *)dword_563908 + 57482);
  else
    v37 = *(_DWORD *)((char *)dword_563908 + 57478);
  v7 = v4[45];
  v8 = *(_DWORD *)((char *)dword_563908 + 57494);
  if ( abs(v4[45] - v4[109]) <= v8 && abs(v4[46] - v4[110]) <= v8 )
  {
    if ( abs(v4[47] - v4[111]) <= v8 && v4[112] == v4[48] && v4[94] == v4[93] )
    {
      v9 = 2 * v37;
      v37 *= 2;
      if ( !v7 && !v4[46] && !v4[47] )
        v37 = 2 * v9;
    }
    v6 = dword_563908;
  }
  if ( v6[2709] )
    v37 += *(_DWORD *)((char *)v6 + 57490) + 1;
  if ( abs(v7) > 10000 )
  {
    v10 = v7 == 0;
    v11 = v7 < 0;
    if ( v7 < 0 )
    {
      if ( v4[109] > 0 )
      {
LABEL_22:
        v12 = 1;
        goto LABEL_33;
      }
      v10 = v7 == 0;
      v11 = v7 < 0;
    }
    if ( !v11 && !v10 && v4[109] < 0 )
      goto LABEL_22;
  }
  v13 = v4[46];
  if ( abs(v4[46]) > 10000 )
  {
    v14 = v13 == 0;
    v15 = v13 < 0;
    if ( v13 < 0 )
    {
      if ( v4[110] > 0 )
      {
LABEL_29:
        v12 = 1;
        goto LABEL_33;
      }
      v14 = v13 == 0;
      v15 = v13 < 0;
    }
    if ( !v15 && !v14 && v4[110] < 0 )
      goto LABEL_29;
  }
  v12 = 1;
  if ( v4[129] == v4[113] && v4[131] == v4[114] )
    v12 = a4;
LABEL_33:
  result = abs(v5 - v4[108]);
  if ( result <= v37 )
  {
    if ( !a3 )
    {
      if ( !v12 )
        return result;
      goto LABEL_47;
    }
    goto LABEL_38;
  }
  if ( a3 )
  {
LABEL_38:
    v17 = abs(a3);
    if ( v17 <= 5100 )
      v18 = *(_DWORD *)(v6[1507] + 4 * v17 + 8008);
    else
      v18 = 0;
    if ( *(_DWORD *)(v18 + 428) )
      (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*v4 + 248))(
        v4,
        *(signed __int16 *)(v18 + 434),
        *(signed __int16 *)(v18 + 432),
        *(signed __int16 *)(v18 + 440),
        *(signed __int16 *)(v18 + 442));
    if ( *(_DWORD *)(v4[96] + 1928) > 0 )
    {
      v19 = *(_WORD *)(v18 + 416);
      if ( v19 )
      {
        v20 = (double)((v4[48] + 180000) % 240000) * 0.00002617993877916667;
        v4[45] += (signed int)(cos(v20) * (double)(-10 * v19));
        v4[46] += (signed int)(sin(v20) * (double)(-10 * *(signed __int16 *)(v18 + 416)));
      }
      v4[47] += 10 * *(signed __int16 *)(v18 + 418);
    }
  }
LABEL_47:
  v4[108] = v4[83];
  v4[94] = v4[93];
  v21 = v4[129];
  v22 = v4[131];
  v4[114] = v22;
  v44 = v22;
  v4[113] = v21;
  HIBYTE(v43) = v21;
  LOWORD(v42) = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[42]) >> 32) >> 12)
              + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[42]) >> 32) >> 31);
  v23 = v4[44];
  HIWORD(v42) = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[43]) >> 32) >> 12)
              + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[43]) >> 32) >> 31);
  v24 = v4[45];
  LOWORD(v43) = ((signed int)((unsigned __int64)(1759218605i64 * v23) >> 32) >> 12)
              + ((unsigned int)((unsigned __int64)(1759218605i64 * v23) >> 32) >> 31);
  v25 = v4[46];
  v4[109] = v24;
  v26 = v4[47];
  v27 = v4[48];
  v40 = ((signed int)((unsigned __int64)(1717986919i64 * v25) >> 32) >> 2)
      + ((unsigned int)((unsigned __int64)(1717986919i64 * v25) >> 32) >> 31);
  v39 = ((signed int)((unsigned __int64)(1717986919i64 * v24) >> 32) >> 2)
      + ((unsigned int)((unsigned __int64)(1717986919i64 * v24) >> 32) >> 31);
  BYTE2(v43) = (char)v27 / -24;
  v4[110] = v25;
  v4[111] = v26;
  v4[112] = v27;
  v41 = ((signed int)((unsigned __int64)(1717986919i64 * v26) >> 32) >> 2)
      + ((unsigned int)((unsigned __int64)(1717986919i64 * v26) >> 32) >> 31);
  v38 = (signed __int16)((*(_WORD *)Memory ^ *(_WORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35])) + 999) / 1000;
  result = (*(int (__stdcall **)(_DWORD, int, __int16 *, signed int, _DWORD *, _DWORD))(*(_DWORD *)dword_56391C + 24))(
             v4[14],
             a3,
             &v38,
             18,
             v4 + 85,
             v4[93]);
  v30 = result;
  if ( a3 )
  {
    v31 = sub_401D39(v29, v28);
    v32 = v4[16];
    v33 = BYTE2(v43);
    v34 = v41;
    v35 = v39;
    v36 = v40;
    v4[40] = v31;
    result = sub_402590(
               a3,
               0,
               (signed __int16)v42,
               SHIWORD(v42),
               (signed __int16)v43 + *(signed __int16 *)(v4[96] + 1030),
               *(signed __int16 *)(v4[96] + 1028),
               v35,
               v36,
               v34,
               v33,
               0,
               0,
               v32,
               -1,
               v30,
               0,
               0,
               0);
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00478160) --------------------------------------------------------
int __thiscall sub_478160(signed __int16 *this, signed int a2, int a3, int a4, int a5, int a6, int a7)
{
  signed __int16 *v7; // esi
  signed __int16 *v8; // edi
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // ecx
  int v12; // ecx
  int v13; // edx
  int v14; // ecx
  int v15; // edx
  signed int v16; // ebx
  int v17; // ebp
  int v18; // eax
  int v19; // ST38_4
  int v20; // ST30_4
  int v21; // eax
  int v22; // edx
  int v23; // eax
  int v24; // ecx
  int v25; // edx
  int v26; // eax
  int v27; // ecx
  _DWORD *v28; // eax
  int v29; // edx
  int v30; // ecx
  int v31; // edx
  int v32; // edx
  int v33; // ebp
  int v34; // edi
  int v35; // ebx
  int v36; // ecx
  int result; // eax
  int v38; // edx
  int v39; // [esp+14h] [ebp-18h]
  int v40; // [esp+18h] [ebp-14h]
  _DWORD *v41; // [esp+1Ch] [ebp-10h]
  int v42; // [esp+28h] [ebp-4h]

  v7 = this;
  v8 = (signed __int16 *)a5;
  (*(void (__thiscall **)(signed __int16 *, int, unsigned int))(*(_DWORD *)this + 240))(
    this,
    a5 + 18,
    (unsigned int)(a6 - 18) >> 1);
  if ( (abs(v7[244] - v8[4]) > 400 || abs(v7[245] - v8[5]) > 400)
    && abs(v8[4] - *((_DWORD *)dword_563908 + 62)) < 700
    && abs(v8[5] - *((_DWORD *)dword_563908 + 63)) < 700
    && *((_DWORD *)dword_563908 + 479) )
  {
    v9 = operator new(0x38u);
    v41 = v9;
    v42 = 0;
    if ( v9 )
      v10 = sub_4A7410(
              v9,
              *((_DWORD *)dword_563908 + 479),
              10000 * v8[4],
              10000 * (v8[5] + 1),
              0,
              0,
              0,
              *((_DWORD *)dword_563908 + 482),
              *((_DWORD *)dword_563908 + 482),
              3,
              0);
    else
      v10 = 0;
    v11 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
    v42 = -1;
    sub_4A7300(v11, (int)v10);
  }
  *((_DWORD *)v7 + 120) = *(_DWORD *)v8;
  v12 = *((_DWORD *)v8 + 1);
  *((_DWORD *)v7 + 121) = v12;
  v13 = *((_DWORD *)v8 + 2);
  *((_DWORD *)v7 + 122) = v13;
  *((_DWORD *)v7 + 123) = *((_DWORD *)v8 + 3);
  LOWORD(v12) = v8[8];
  v7[248] = v12;
  *((_DWORD *)v7 + 83) = sub_401D39(v12, v13);
  v14 = v8[2] * v8[2];
  v15 = v14 + v8[1] * v8[1];
  v41 = (_DWORD *)v15;
  v16 = a2;
  *((_DWORD *)v7 + 125) = (signed int)sqrt((double)v15);
  if ( a2 >= 0 && a2 <= 2000 )
  {
    if ( a2 <= 80 )
      goto LABEL_16;
    v16 = 80;
  }
  else
  {
    v16 = 30;
  }
  a2 = v16;
LABEL_16:
  v17 = a4;
  if ( a4 > 0 )
  {
    v18 = sub_401D39(v14, v15);
    v19 = a7;
    v20 = *((_DWORD *)v7 + 16);
    *((_DWORD *)v7 + 40) = v18;
    sub_402590(
      v17,
      v16,
      v8[4],
      v8[5],
      v8[6] + *(signed __int16 *)(*((_DWORD *)v7 + 96) + 1030),
      *(signed __int16 *)(*((_DWORD *)v7 + 96) + 1028),
      v8[1],
      v8[2],
      v8[3],
      *((unsigned __int8 *)v8 + 14),
      0,
      0,
      v20,
      -1,
      v19,
      0,
      0,
      0);
  }
  v21 = 10000 * v8[6];
  v22 = v8[5];
  a6 = 10000 * v8[4];
  a4 = v21;
  v23 = v8[1];
  a5 = 10000 * v22;
  v24 = 5 * v23;
  v25 = 5 * v8[2];
  v26 = v8[3];
  v40 = 2 * v24;
  v27 = 1000 * *v8;
  a7 = 10 * v26;
  v28 = Memory;
  v39 = 2 * v25;
  v29 = *((_DWORD *)v7 + 35);
  v28[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v29);
  v41 = v28;
  *(_DWORD *)(v28[1] + 4 * v29) = v27 ^ *v28;
  v28[4] ^= *(_DWORD *)(v28[1] + 4 * v29);
  *((_DWORD *)v7 + 48) = 1000 * *((unsigned __int8 *)v8 + 14);
  v30 = *((char *)v8 + 15);
  *((_DWORD *)v7 + 129) = v30;
  v31 = *((char *)v8 + 16);
  *((_DWORD *)v7 + 131) = v31;
  *((_DWORD *)v7 + 132) = 0;
  if ( v30 <= 0 )
    *((_DWORD *)v7 + 116) = sub_401D39(v30, v31);
  else
    *((_DWORD *)v7 + 115) = sub_401D39(v30, v31);
  sub_401505(a2, &a6, &a5, &a4, &v40, &v39, &a7);
  v32 = a7;
  v33 = v40;
  v34 = a5 - *((_DWORD *)v7 + 43);
  v35 = a4 - *((_DWORD *)v7 + 44);
  *((_DWORD *)v7 + 46) = v39;
  v36 = a6 - *((_DWORD *)v7 + 42);
  *((_DWORD *)v7 + 47) = v32;
  *((_DWORD *)v7 + 45) = v33;
  if ( abs(v36) > 640000 || abs(v34) > 640000 || abs(v35) > 640000 )
  {
    v38 = a5;
    result = a4;
    *((_DWORD *)v7 + 42) = a6;
    *((_DWORD *)v7 + 43) = v38;
    *((_DWORD *)v7 + 44) = result;
  }
  else
  {
    if ( v33 )
    {
      result = 1374389535 * v36;
      *((_DWORD *)v7 + 45) = v33 + v36 / 50;
    }
    else
    {
      result = a6;
      *((_DWORD *)v7 + 42) = a6;
    }
    if ( v39 )
    {
      result = v39 + v34 / 50;
      *((_DWORD *)v7 + 46) = result;
    }
    else
    {
      *((_DWORD *)v7 + 43) = a5;
    }
    if ( a7 )
    {
      result = a7 + v35 / 50;
      *((_DWORD *)v7 + 47) = result;
    }
    else
    {
      *((_DWORD *)v7 + 44) = a4;
    }
  }
  return result;
}
// 401505: using guessed type _DWORD __stdcall sub_401505(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004786F0) --------------------------------------------------------
void sub_4786F0()
{
  srand(0xCDBu);
}

//----- (00478700) --------------------------------------------------------
_DWORD *__thiscall sub_478700(_DWORD *this, int a2, int a3, signed __int16 *a4)
{
  _DWORD *v4; // esi
  int v5; // edx
  int v6; // eax
  int v7; // eax
  __int16 v8; // cx
  signed __int16 *v9; // eax
  signed __int16 *v10; // eax
  signed __int16 *v11; // eax
  signed __int16 *v12; // eax
  signed __int16 *v13; // eax
  signed __int16 *v14; // eax
  signed __int16 *v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax

  v4 = this;
  sub_4013C5(a2, a3);
  v4[96] = a3;
  *v4 = &off_51681C;
  if ( a4 )
  {
    sub_401A2D(a4, 10);
    sub_40136B(1000 * *a4);
  }
  else
  {
    sub_401AFA(v4);
  }
  v5 = v4[18];
  v4[117] = 0;
  v4[108] = 0;
  v4[109] = 0;
  v4[110] = 0;
  v4[111] = 0;
  v4[125] = 0;
  v4[113] = 0;
  v4[114] = 0;
  v4[115] = 0;
  v4[116] = 0;
  v4[126] = 0;
  v4[127] = 0;
  v4[128] = 0;
  v4[135] = 0;
  v6 = 10000 * (*(signed __int16 *)(v5 + 1048) + 255);
  if ( v6 >= 10000 * *(_DWORD *)((char *)dword_563908 + 57730) )
    v6 = 10000 * *(_DWORD *)((char *)dword_563908 + 57730);
  v4[119] = v6;
  v7 = v4[96];
  v8 = *(_WORD *)(v7 + 2566);
  if ( v8 == 1 )
    v4[118] = 10 * *(_DWORD *)((char *)dword_563908 + 57722);
  else
    v4[118] = 10 * v8;
  v4[133] = 0;
  v4[134] = 0;
  v9 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v7 + 1480), v7 + 1504);
  v4[97] = v9;
  if ( v9 )
    sub_4A4520(v9, *((_DWORD *)dword_563918 + 2213));
  v10 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1600), v4[96] + 1624);
  v4[98] = v10;
  if ( v10 )
    sub_4A4520(v10, *((_DWORD *)dword_563918 + 2213));
  v11 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1540), v4[96] + 1564);
  v4[99] = v11;
  if ( v11 )
    sub_4A4520(v11, *((_DWORD *)dword_563918 + 2213));
  v12 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1660), v4[96] + 1684);
  v4[100] = v12;
  if ( v12 && v12[97] == 1 )
    sub_4A4520(v12, *((_DWORD *)dword_563918 + 2213));
  v13 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1720), v4[96] + 1744);
  v4[101] = v13;
  if ( v13 && v13[97] == 1 )
    sub_4A4520(v13, *((_DWORD *)dword_563918 + 2213));
  v14 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1780), v4[96] + 1804);
  v4[102] = v14;
  if ( v14 && v14[97] == 1 )
    sub_4A4520(v14, *((_DWORD *)dword_563918 + 2213));
  v15 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1840), v4[96] + 1864);
  v4[103] = v15;
  if ( v15 && v15[97] == 1 )
    sub_4A4520(v15, *((_DWORD *)dword_563918 + 2213));
  if ( !v4[97] )
    v4[97] = v4[99];
  if ( !v4[99] )
    v4[99] = v4[97];
  if ( !v4[98] )
    v4[98] = v4[99];
  v4[104] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 2582),
              v4[96] + 2606,
              *(signed __int16 *)(v4[96] + 2630),
              0);
  v4[105] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 2634),
              v4[96] + 2658,
              *(signed __int16 *)(v4[96] + 2682),
              0);
  v4[106] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 2686),
              v4[96] + 2710,
              *(signed __int16 *)(v4[96] + 2734),
              0);
  v4[107] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 2738),
              v4[96] + 2762,
              *(signed __int16 *)(v4[96] + 2786),
              0);
  v4[131] = 0;
  v4[129] = 0;
  v4[130] = 0;
  v4[132] = 0;
  sub_401203(v4);
  v16 = v4[97];
  if ( !*(_WORD *)(v16 + 196) )
  {
    switch ( *(_WORD *)(v4[96] + 2546) )
    {
      case 1:
        *(_WORD *)(v16 + 196) = 4;
        break;
      case 4:
        *(_WORD *)(v16 + 196) = 3;
        break;
      case 5:
        *(_WORD *)(v16 + 196) = 2;
        break;
      default:
        *(_WORD *)(v16 + 196) = 1;
        break;
    }
  }
  v17 = v4[99];
  if ( !*(_WORD *)(v17 + 196) )
    *(_WORD *)(v17 + 196) = 1;
  v18 = v4[98];
  if ( !*(_WORD *)(v18 + 196) )
    *(_WORD *)(v18 + 196) = 5;
  v19 = v4[102];
  if ( v19 && !*(_WORD *)(v19 + 196) )
    *(_WORD *)(v19 + 196) = *(_WORD *)(v4[96] + 2546) != 5 ? 1 : 6;
  return v4;
}
// 401203: using guessed type int __thiscall sub_401203(_DWORD);
// 40136B: using guessed type _DWORD __stdcall sub_40136B(_DWORD);
// 4013C5: using guessed type _DWORD __stdcall sub_4013C5(_DWORD, _DWORD);
// 401A2D: using guessed type _DWORD __stdcall sub_401A2D(_DWORD, _DWORD);
// 401AFA: using guessed type int __thiscall sub_401AFA(_DWORD);
// 51681C: using guessed type int (__thiscall *off_51681C)(void *Memory, char);

//----- (00478D70) --------------------------------------------------------
void *__thiscall sub_478D70(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &off_51681C;
  sub_4027B1(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);
// 51681C: using guessed type int (__thiscall *off_51681C)(void *Memory, char);

//----- (00478DA0) --------------------------------------------------------
int __thiscall sub_478DA0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ecx
  int v6; // eax
  _DWORD *v7; // edi
  int v8; // edx
  int v9; // edi
  int result; // eax

  v4 = this;
  v5 = this[43] / 160000;
  v6 = v4[42] / 160000;
  v7 = (_DWORD *)*((_DWORD *)dword_563908 + 1508);
  if ( v6 < 0 || v5 < 0 || (v8 = v7[1], v6 >= v8) || v5 >= v7[2] )
    v9 = 0;
  else
    v9 = v7[(*(_BYTE *)(3 * (v6 + v5 * v8) + v7[1292]) & 0x7F) + 520];
  result = sub_402784(v9);
  if ( *(_DWORD *)(result + 20) )
  {
    result = a2;
    v4[45] += a2;
    v4[46] += a3;
    v4[47] += a4;
  }
  return result;
}
// 402784: using guessed type _DWORD __stdcall sub_402784(_DWORD);

//----- (00478E70) --------------------------------------------------------
int __thiscall sub_478E70(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  _DWORD *v6; // eax
  int v7; // ecx
  int v8; // ebp
  int v9; // edi
  _DWORD *v10; // ebx
  int v11; // ecx
  unsigned int v12; // edx
  int v13; // ebp
  int v14; // edi
  int v15; // ecx
  unsigned int v16; // edx
  unsigned int v17; // edx
  unsigned int v18; // edx
  signed int v19; // edx
  signed int v20; // ecx
  _DWORD *v21; // ebx
  _DWORD *v22; // edi
  int v23; // eax
  int v24; // ebp
  int v25; // ebp
  int v26; // ebx
  int v27; // ecx
  signed int v28; // edx
  int v29; // ebx
  void *v30; // ecx
  int v31; // edi
  _DWORD *v32; // ebp
  int v33; // ecx
  int v34; // edi
  int v35; // eax
  signed int v36; // eax
  int v37; // ecx
  int v38; // eax
  int v39; // eax
  _DWORD *v40; // edi
  double v41; // st7
  double v42; // st6
  void *v43; // ecx
  int v44; // eax
  int v45; // ecx
  signed int v46; // eax
  bool v47; // sf
  int v48; // edi
  signed int v49; // eax
  signed int v50; // edi
  signed int v51; // ebp
  int v52; // eax
  int v53; // ecx
  signed int v54; // eax
  bool v55; // sf
  int v56; // eax
  signed int v57; // eax
  int v58; // ecx
  int v59; // eax
  int v60; // eax
  int v61; // eax
  signed int v62; // eax
  int v63; // ecx
  int v64; // eax
  int v65; // eax
  int v66; // eax
  int v67; // edi
  int v68; // edx
  unsigned int v69; // edx
  int v70; // edi
  int v71; // [esp+18h] [ebp-14h]
  int v72; // [esp+18h] [ebp-14h]
  int v73; // [esp+1Ch] [ebp-10h]
  _DWORD *v74; // [esp+20h] [ebp-Ch]
  signed int v75; // [esp+20h] [ebp-Ch]
  int v76; // [esp+24h] [ebp-8h]

  result = (int)Memory;
  v2 = this;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) <= 0 )
    return result;
  v3 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
  if ( this[16] == v3 )
  {
    result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * v3 + 4) + 148))();
    if ( result )
      return result;
  }
  j_nullsub_18(v2);
  v4 = *((_DWORD *)dword_563908 + 1508);
  v5 = sub_40137F(v2[42] / 160000, v2[43] / 160000);
  v6 = (_DWORD *)sub_402784(v5);
  v7 = v6[2];
  v74 = v6;
  v71 = v7;
  if ( v7 == -1 )
  {
    v7 = v6[5];
    v71 = v6[5];
  }
  v8 = v6[1];
  v9 = v6[3];
  if ( v9 == -1 )
    v9 = v6[1];
  if ( !v8 )
    v8 = v6[5];
  if ( !v9 )
    v9 = v7;
  v10 = (_DWORD *)*((_DWORD *)dword_563908 + 78);
  v11 = v10[3];
  v73 = (v10[11] + v6[5]) * v11 / 1000 + v10[11] + v6[5];
  v72 = (*v10 + v71) * v11 / 1000 + *v10 + v71;
  v12 = (signed int)((unsigned __int64)(274877907i64 * v8 * v11) >> 32) >> 6;
  v13 = v12 + (v12 >> 31) + v8;
  v14 = v9 * v11 / 1000 + v9;
  if ( v2[14] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v15 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 87));
    v16 = (signed int)((unsigned __int64)(1759218605i64 * v73 * v15) >> 32) >> 12;
    v73 += v16 + (v16 >> 31);
    v17 = (signed int)((unsigned __int64)(1759218605i64 * v13 * v15) >> 32) >> 12;
    v13 += v17 + (v17 >> 31);
    v18 = (signed int)((unsigned __int64)(1759218605i64 * v14 * v15) >> 32) >> 12;
    v72 += v72 * v15 / 10000;
    v14 += v18 + (v18 >> 31);
  }
  v19 = v73;
  if ( v73 > 127 )
  {
    v19 = 127;
    v73 = 127;
  }
  if ( v13 > 127 )
    v13 = 127;
  v20 = v72;
  if ( v72 > 127 )
  {
    v20 = 127;
    v72 = 127;
  }
  if ( v14 > 127 )
    v14 = 127;
  v2[132] = 0;
  if ( *((_DWORD *)dword_56390C + 1540) || *((_DWORD *)dword_56390C + 1546) )
  {
    v2[129] = -v20;
  }
  else if ( *((_DWORD *)dword_56390C + 1539) || *((_DWORD *)dword_56390C + 1545) )
  {
    v2[129] = v19;
  }
  v21 = v6;
  if ( (v6[1] || *v6)
    && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 2679))) > 5000 )
  {
    if ( *((_DWORD *)dword_56390C + 1545) || sub_401929(7) )
    {
      v2[129] = v13;
    }
    else
    {
      if ( !*((_DWORD *)dword_56390C + 1546) )
        goto LABEL_37;
      v2[129] = -v14;
    }
    v2[132] = 1;
  }
LABEL_37:
  v22 = dword_563908;
  v23 = *((_DWORD *)dword_563908 + 78);
  v24 = v74[8] + *(_DWORD *)(v23 + 40);
  v25 = v24 * *(_DWORD *)(v23 + 12) / 1000 + v24;
  v75 = v25;
  if ( v2[14] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v25 += v25 * (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 87))) / 10000;
    v75 = v25;
  }
  if ( v25 > 127 )
  {
    v25 = 127;
    v75 = 127;
  }
  if ( *((_DWORD *)dword_56390C + 1543) )
  {
    v2[131] = -v25;
  }
  else
  {
    if ( !*((_DWORD *)dword_56390C + 1544) )
      goto LABEL_46;
    v2[131] = v25;
  }
  v22 = dword_563908;
LABEL_46:
  v26 = v21[6];
  v27 = v26 * *(_DWORD *)(v22[78] + 16);
  v28 = (signed int)((unsigned __int64)(274877907i64 * v27) >> 32) >> 6;
  v29 = v27 / 1000 + v26;
  if ( v22[6895] )
    v29 = *(_DWORD *)((char *)v22 + 59362);
  v30 = dword_563918;
  switch ( *((_DWORD *)dword_563918 + 2348) )
  {
    case 0:
      if ( *((_DWORD *)dword_56390C + 1537) )
      {
        v28 = -v29;
        v2[130] = -v29;
      }
      else if ( *((_DWORD *)dword_56390C + 1538) )
      {
        v2[130] = v29;
      }
      if ( *((_DWORD *)dword_563918 + 2252) > 0 )
      {
        if ( v2[130] )
        {
          if ( !v2[117] )
            v2[117] = sub_401D39(v30, v28);
          v31 = *((_DWORD *)dword_563918 + 2252);
          v32 = (char *)dword_563918 + 9008;
          v33 = v31 / 4 + abs(sub_401D39(v30, v28) - v2[117]);
          if ( v33 < 5 * v31 / 4 )
            v2[130] = v33 * v2[130] / (5 * *v32 / 4);
          goto LABEL_60;
        }
        v2[117] = 0;
      }
      goto LABEL_61;
    case 1:
    case 2:
      if ( !*((_DWORD *)dword_56390C + 2180) )
        goto LABEL_61;
      v48 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), 0) - 0x8000;
      v49 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), 1);
      v50 = abs(v48 / 10000);
      v51 = abs((v49 - 0x8000) / 10000);
      v76 = v49 - 0x8000;
      if ( !v50 && !v51 )
        goto LABEL_60;
      sub_4C444A((void *)(v49 - 0x8000));
      v52 = sub_4012C6((double)v76);
      v53 = v52 - v2[48];
      v54 = abs(v52 - v2[48]);
      if ( v54 < 1000 )
      {
        v2[130] = 0;
        goto LABEL_95;
      }
      v55 = v53 < 0;
      if ( v53 <= 0 )
        goto LABEL_91;
      if ( v53 < 120000 )
        goto LABEL_143;
      v55 = v53 < 0;
LABEL_91:
      if ( !v55 )
        goto LABEL_144;
      if ( v53 < -120000 )
LABEL_143:
        v2[130] = v29;
      else
LABEL_144:
        v2[130] = -v29;
LABEL_95:
      if ( v54 < 3000 )
        v2[130] /= 5;
      if ( v50 <= 1 && v51 <= 1 || v2[129] )
        goto LABEL_60;
      v25 = v75;
      if ( *((_DWORD *)dword_563918 + 2348) == 2 )
        v2[129] = v73;
LABEL_61:
      if ( *((_DWORD *)dword_56390C + 2180) )
      {
        v34 = 0x8000 - *((_DWORD *)dword_563918 + 2352);
        if ( 0x8000 - *((_DWORD *)dword_563918 + 2352) > 0 )
        {
          if ( !v2[129] )
          {
            v35 = *((_DWORD *)dword_563918 + 2349);
            if ( v35 > 0 )
            {
              v36 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), v35 - 1);
              v37 = v36 - 0x8000;
              v38 = abs(v36 - 0x8000) - *((_DWORD *)dword_563918 + 2352);
              if ( v38 > 0 )
              {
                if ( v37 <= 0 )
                  v39 = v73 * v38 / v34;
                else
                  v39 = -(v72 * v38 / v34);
                v2[129] = v39;
              }
            }
          }
          if ( !v2[130] )
          {
            v56 = *((_DWORD *)dword_563918 + 2350);
            if ( v56 > 0 )
            {
              v57 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), v56 - 1);
              v58 = v57 - 0x8000;
              v59 = abs(v57 - 0x8000) - *((_DWORD *)dword_563918 + 2352);
              if ( v59 > 0 )
              {
                v60 = v29 * v59 / v34;
                if ( v58 <= 0 )
                  v60 = -v60;
                v2[130] = v60;
              }
            }
          }
          if ( !v2[131] )
          {
            v61 = *((_DWORD *)dword_563918 + 2351);
            if ( v61 > 0 )
            {
              v62 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), v61 - 1);
              v63 = v62 - 0x8000;
              v64 = abs(v62 - 0x8000) - *((_DWORD *)dword_563918 + 2352);
              if ( v64 > 0 )
              {
                v65 = v25 * v64 / v34;
                if ( v63 <= 0 )
                  v65 = -v65;
                v2[131] = v65;
              }
            }
          }
        }
      }
      if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 80))) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 80)) )
      {
        v2[129] = 0;
        v2[131] = 0;
      }
      if ( v2[47] )
      {
        v66 = v2[96];
        if ( !*(_WORD *)(v66 + 2570) )
        {
          v2[129] = 0;
          v2[131] = 0;
        }
        if ( !*(_WORD *)(v66 + 2572) )
          v2[130] = 0;
      }
      v67 = *((_DWORD *)Memory + 1);
      v68 = *(_DWORD *)Memory ^ *(_DWORD *)(v67 + 4 * *((_DWORD *)dword_563908 + 82));
      if ( v68 >= 0 && *(_DWORD *)Memory != *(_DWORD *)(v67 + 4 * *((_DWORD *)dword_563908 + 82)) )
        v2[130] = 0;
      if ( v2[129] <= 0 )
        v2[116] = sub_401D39(0, v68);
      else
        v2[115] = sub_401D39(0, v68);
      if ( (*(int (**)(void))(*(_DWORD *)dword_56391C + 156))() )
      {
        if ( v2[129] )
          v2[129] = v2[129] * (1000 - (*(int (__thiscall **)(_DWORD *))(*v2 + 60))(v2)) / 1000;
        if ( v2[131] )
        {
          v69 = (signed int)((unsigned __int64)(274877907i64
                                              * v2[131]
                                              * (1000 - (*(int (__thiscall **)(_DWORD *))(*v2 + 60))(v2))) >> 32) >> 6;
          v2[131] = v69 + (v69 >> 31);
        }
      }
      result = v2[129];
      if ( result )
      {
        v70 = v2[131];
        if ( v70 )
        {
          v2[129] = 7 * result / 10;
          result = -858993455 * v70;
          v2[131] = 7 * v70 / 10;
        }
      }
      if ( v2[129] || v2[131] )
      {
        result = (int)dword_563908;
        if ( *((_DWORD *)dword_563908 + 6923) )
        {
          if ( *(_WORD *)(*((_DWORD *)dword_563908 + 6923) + 424) )
            *((_DWORD *)dword_563908 + 6923) = 0;
        }
      }
      return result;
    case 3:
      if ( sub_401929(5) )
        v2[129] = v73;
      if ( sub_401929(6) )
        v2[129] = -v72;
      v40 = dword_563908;
      v41 = (double)(signed int)sub_40232E(
                                  *((_DWORD *)dword_563908 + 61)
                                + *((_DWORD *)dword_563908 + 2689)
                                - *((_DWORD *)dword_563908 + 63));
      v42 = (double)(v40[60] + v40[2688] - v40[62]);
      sub_4C444A(v43);
      v44 = sub_4012C6(v41);
      v45 = v44 - v2[48];
      v46 = abs(v44 - v2[48]);
      if ( v46 < 1000 )
      {
        v2[130] = 0;
        goto LABEL_81;
      }
      v47 = v45 < 0;
      if ( v45 <= 0 )
        goto LABEL_77;
      if ( v45 < 120000 )
        goto LABEL_145;
      v47 = v45 < 0;
LABEL_77:
      if ( !v47 )
        goto LABEL_146;
      if ( v45 < -120000 )
LABEL_145:
        v2[130] = v29;
      else
LABEL_146:
        v2[130] = -v29;
LABEL_81:
      if ( v46 >= 3000 )
LABEL_60:
        v25 = v75;
      else
        v2[130] /= 5;
      goto LABEL_61;
    default:
      goto LABEL_61;
  }
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 401929: using guessed type _DWORD __stdcall sub_401929(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40232E: using guessed type _DWORD __cdecl sub_40232E(_DWORD);
// 4023D3: using guessed type int __thiscall j_nullsub_18(_DWORD);
// 402784: using guessed type _DWORD __stdcall sub_402784(_DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (00479B30) --------------------------------------------------------
int __thiscall sub_479B30(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax
  _DWORD *v4; // ebp
  signed int *v5; // ebx
  _WORD *v6; // ecx
  int v7; // ST54_4
  double v8; // ST78_8
  double v9; // ST70_8
  void *v10; // ecx
  long double v11; // st7
  int v12; // edi
  signed int v13; // ST5C_4
  double v14; // st7
  long double v15; // st7
  int v16; // ecx
  int v17; // eax
  unsigned int v18; // edx
  int v19; // edi
  long double v20; // st7
  int v21; // ecx
  int v22; // edx
  int v23; // eax
  int v24; // eax
  int v25; // ecx
  int v26; // ecx
  int v27; // ecx
  int v28; // eax
  long double v29; // st7
  long double v30; // st7
  void *v31; // ST70_4
  int v32; // eax
  int v33; // ecx
  int v34; // edi
  int v35; // ST2C_4
  int v36; // ST24_4
  int v37; // ST20_4
  int v38; // ST1C_4
  int v39; // ST0C_4
  int v40; // eax
  _WORD *v41; // ebx
  int v42; // ecx
  int v43; // ecx
  int v44; // eax
  unsigned int v45; // edx
  int v46; // ebp
  int v47; // edi
  int v48; // ebp
  int v49; // edi
  int v50; // ST60_4
  long double v51; // ST80_8
  long double v52; // ST78_8
  long double v53; // st7
  int v54; // edi
  int v55; // eax
  long double v56; // st7
  double v57; // st6
  double v58; // st5
  signed int v59; // eax
  double v60; // st5
  double v61; // st4
  int v62; // edi
  int v63; // eax
  int v64; // edi
  int v65; // ebp
  __int16 v66; // ax
  int v67; // ebx
  int v68; // ST2C_4
  int v69; // ST1C_4
  int v70; // ST0C_4
  int v71; // eax
  int v72; // eax
  _DWORD *v73; // ecx
  int v74; // ebx
  int v75; // ST2C_4
  int v76; // ST1C_4
  int v77; // ST0C_4
  int v78; // eax
  int v79; // eax
  _DWORD *v80; // ecx
  int v81; // ecx
  bool v82; // zf
  int v83; // edi
  int v84; // eax
  long double v85; // st7
  long double v86; // st7
  int v87; // edi
  int v88; // ebx
  __int16 v89; // ax
  int v90; // edi
  int v91; // ST2C_4
  int v92; // ST1C_4
  int v93; // ST0C_4
  int v94; // eax
  int v95; // eax
  int v96; // [esp+14h] [ebp-4Ch]
  int v97; // [esp+18h] [ebp-48h]
  signed int v98; // [esp+1Ch] [ebp-44h]
  signed int v99; // [esp+20h] [ebp-40h]
  int v100; // [esp+24h] [ebp-3Ch]
  int v101; // [esp+24h] [ebp-3Ch]
  int v102; // [esp+28h] [ebp-38h]
  signed int v103; // [esp+28h] [ebp-38h]
  signed int v104; // [esp+28h] [ebp-38h]
  int v105; // [esp+28h] [ebp-38h]
  signed int v106; // [esp+2Ch] [ebp-34h]
  signed int v107; // [esp+2Ch] [ebp-34h]
  signed int v108; // [esp+30h] [ebp-30h]
  int v109; // [esp+34h] [ebp-2Ch]
  int v110; // [esp+38h] [ebp-28h]
  int v111; // [esp+38h] [ebp-28h]
  signed int v112; // [esp+3Ch] [ebp-24h]
  double v113; // [esp+44h] [ebp-1Ch]
  double v114; // [esp+44h] [ebp-1Ch]
  double v115; // [esp+44h] [ebp-1Ch]
  double v116; // [esp+4Ch] [ebp-14h]
  int v117; // [esp+64h] [ebp+4h]

  v2 = this;
  sub_4018F2(a2);
  result = (int)Memory;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2[35])) >= 0
    && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2[35])
    && v2[16] != -1 )
  {
    result = sub_40237E(v2);
    if ( result )
    {
      if ( v2[14] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) && v2[132] )
        sub_401992(-(a2 * *(_DWORD *)(v2[96] + 2540)));
      v100 = v2[43];
      v4 = v2 + 42;
      v5 = v2 + 46;
      v2[48] = (a2 * v2[130] + v2[48] + 240000) % 240000;
      v102 = v2[42];
      sub_401505(a2, v2 + 42, v2 + 43, v2 + 44, v2 + 45, v2 + 46, v2 + 47);
      result = (*(int (__thiscall **)(_DWORD *))(*v2 + 184))(v2);
      if ( !result )
      {
        v6 = (_WORD *)v2[96];
        switch ( v6[1273] )
        {
          case 1:
            if ( v2[101] )
            {
              v28 = v2[16];
              if ( v28 != -1
                && v2[81] > 0
                && (*((_DWORD *)dword_563918 + 2266) || v28 == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)) )
              {
                v2[126] -= a2;
                if ( v2[126] <= 0 )
                {
                  if ( v2[129] || v2[131] )
                  {
                    v2[126] = (signed __int16)v6[1289];
                    v104 = -5000;
                  }
                  else
                  {
                    v2[126] = (signed __int16)v6[1290];
                    v104 = -2500;
                  }
                  v29 = sub_40240A(v2[48]);
                  v113 = cos(v29);
                  v30 = sin(v29);
                  v31 = operator new(0x44u);
                  v32 = 0;
                  if ( v31 )
                  {
                    v33 = v2[101];
                    v34 = v2[101];
                    v35 = *(_DWORD *)(v2[96] + 1772);
                    v36 = *(signed __int16 *)(v33 + 170);
                    v37 = *(signed __int16 *)(v33 + 170);
                    v38 = rand() % *(signed __int16 *)(v34 + 176);
                    v39 = v2[44] + 320000;
                    v40 = sub_401FD2((signed int)(v30 * 150000.0));
                    v32 = sub_4025CC(
                            v34,
                            *v4 - (signed int)(v113 * 150000.0),
                            v2[43] - v40,
                            v39,
                            (signed int)((double)v104 * v113),
                            (signed int)((double)v104 * v30),
                            -10000,
                            v38,
                            v37,
                            v36,
                            5,
                            v35,
                            0);
                  }
                  sub_4A7300(*((_DWORD **)dword_563908 + 351), v32);
                }
              }
            }
            break;
          case 4:
            v12 = v2[45];
            if ( !v12 && !*v5 )
              goto LABEL_111;
            v13 = *v5;
            v14 = (double)*v5;
            sub_4C444A(v6);
            v15 = sub_40240A(v2[48]) - v14;
            v16 = abs(v13);
            v17 = abs(v12);
            if ( v17 > v16 )
              v16 = v17;
            v18 = (signed int)((unsigned __int64)(274603029093i64 * (v16 / 10)) >> 32) >> 6;
            v19 = v18 + (v18 >> 31);
            if ( v19 >= 999 )
              v19 = 999;
            v20 = sin(v15) * 1000.0;
            v21 = -v19;
            v22 = -v19;
            if ( -v19 <= (signed int)v20 )
              v22 = (signed int)v20;
            if ( v19 >= v22 )
            {
              v19 = -v19;
              if ( v21 <= (signed int)v20 )
                v19 = (signed int)v20;
            }
            v2[133] = v19;
            v23 = *((_DWORD *)dword_563918 + 2328);
            if ( v23 == 2 || v23 == 1 && !v2[129] && !v2[131] )
LABEL_111:
              v2[133] = 0;
            v24 = v2[133];
            v25 = v2[134];
            if ( v24 >= v25 )
            {
              if ( v24 > v25 )
              {
                v27 = 25 * a2 + v25;
                v2[134] = v27;
                if ( v27 > v24 )
                  v2[134] = v24;
              }
            }
            else
            {
              v26 = v25 - 25 * a2;
              v2[134] = v26;
              if ( v26 < v24 )
                v2[134] = v24;
            }
            break;
          case 5:
            v7 = *v4 - v102;
            v8 = (double)(signed int)sub_40232E(v2[43] - v100);
            v103 = (signed int)sqrt(v8 * v8 + (double)v7 * (double)v7);
            v9 = sub_40240A(v2[48]);
            sub_4C444A(v10);
            v11 = cos(v9 - v8);
            if ( v11 >= 0.5 || v11 <= 0.0 )
            {
              if ( v11 > -0.5 && v11 < 0.0 )
                v11 = -0.5;
            }
            else
            {
              v11 = 0.5;
            }
            v2[135] = (v2[135]
                     + 100000 * *(signed __int16 *)(v2[97] + 178)
                     + (signed int)(v11 * (double)v103)
                     * (1000
                      * *(signed __int16 *)(v2[97] + 178)
                      / *(signed __int16 *)(v2[97] + 170))
                     / 10000)
                    % (1000 * *(signed __int16 *)(v2[97] + 178));
            break;
        }
        result = v2[16];
        if ( result != -1
          && v2[81] > 0
          && (*((_DWORD *)dword_563918 + 2266) || result == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96)) )
        {
          if ( v2[100] )
          {
            v41 = (_WORD *)v2[96];
            if ( v41[1273] != 1 )
            {
              result = a2;
              v2[126] -= a2;
              if ( v2[126] <= 0 )
              {
                if ( v2[129] || v2[131] || v2[47] )
                {
                  v43 = (signed __int16)v41[1289];
                  if ( v2[132] )
                    v2[126] = 2 * v43 / 3;
                  else
                    v2[126] = v43;
                  v42 = -10 * (signed __int16)v41[1277];
                }
                else
                {
                  v2[126] = (signed __int16)v41[1290];
                  v42 = -10 * (signed __int16)v41[1277] / 4;
                }
                v96 = v42;
                v97 = v42;
                if ( v41[1274] )
                {
                  v44 = v2[130];
                  if ( v44 >= 0 )
                  {
                    if ( v44 > 0 )
                    {
                      v97 = 10 * v42 / 8;
                      v45 = (signed int)((unsigned __int64)(13743895352i64 * v42) >> 32) >> 2;
                      v96 = v45 + (v45 >> 31);
                    }
                  }
                  else
                  {
                    v96 = 10 * v42 / 8;
                    v97 = 8 * v42 / 10;
                  }
                }
                result = v2[126];
                if ( result > 0 )
                {
                  if ( v2[130] )
                    v2[126] = result / 2;
                  v46 = (signed __int16)v41[1274];
                  v47 = v46;
                  v48 = -10000 * v46;
                  v49 = 10000 * v47;
                  v98 = v49;
                  v109 = 10000 * (signed __int16)v41[1275];
                  v101 = 10000 * (signed __int16)v41[1276];
                  v99 = v48;
                  v110 = 10000 * (signed __int16)v41[1275];
                  v105 = 10000 * (signed __int16)v41[1276];
                  if ( v41[1273] == 4 && v49 )
                  {
                    v50 = 45 * v2[134] / 1000 - 90;
                    v51 = ((double)v50 + (double)v50) * 3.1415926535 / 360.0;
                    v52 = cos(v51);
                    v53 = sin(v51);
                    v98 = (signed int)((double)-v49 * v53);
                    v99 = (signed int)(v53 * (double)-v48);
                    v101 += (signed int)((double)v49 * v52);
                    v105 += (signed int)(v52 * (double)v48);
                  }
                  v54 = *(signed __int16 *)(v2[97] + 176);
                  v55 = sub_401C80(v2[48], v54);
                  v56 = sub_40240A(240000 * v55 / v54);
                  v114 = cos(v56);
                  v116 = sin(v56);
                  v57 = (double)v109;
                  v58 = (double)v98;
                  v106 = (signed int)(-(v57 * v114) - v58 * v116);
                  v59 = (signed int)(v58 * v114 - v57 * v116);
                  v60 = (double)v110;
                  v61 = (double)v99;
                  v108 = v59;
                  v62 = v2[100];
                  v63 = sub_4014EC(v2[100], v41 + 830);
                  v64 = *(signed __int16 *)(v62 + 170);
                  v65 = v63;
                  v66 = v41[858];
                  if ( v66 )
                    v64 = v66;
                  if ( operator new(0x44u) )
                  {
                    v67 = v2[100];
                    v68 = *(_DWORD *)(v2[96] + 1712);
                    v69 = rand() % *(signed __int16 *)(v67 + 176);
                    v70 = v101 + v2[44];
                    v71 = sub_401FD2(v108);
                    v72 = sub_4025CC(
                            v67,
                            v106 + v2[42],
                            v2[43] + v71,
                            v70,
                            (signed int)(v114 * (double)v96),
                            (signed int)((double)v96 * v116),
                            0,
                            v69,
                            v64,
                            v64,
                            v65,
                            v68,
                            4 * v64 / 10);
                  }
                  else
                  {
                    v72 = 0;
                  }
                  if ( *(_DWORD *)((char *)dword_563908 + 32950) )
                    v73 = (_DWORD *)*((_DWORD *)dword_563908 + 350);
                  else
                    v73 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
                  result = sub_4A7300(v73, v72);
                  if ( *(_WORD *)(v2[96] + 2548) )
                  {
                    if ( operator new(0x44u) )
                    {
                      v74 = v2[100];
                      v75 = *(_DWORD *)(v2[96] + 1712);
                      v76 = rand() % *(signed __int16 *)(v74 + 176);
                      v77 = v105 + v2[44];
                      v78 = sub_401FD2((signed int)(v114 * v61 - v116 * v60));
                      v79 = sub_4025CC(
                              v74,
                              (signed int)(-(v60 * v114) - v61 * v116) + v2[42],
                              v2[43] + v78,
                              v77,
                              (signed int)(v114 * (double)v97),
                              (signed int)((double)v97 * v116),
                              0,
                              v76,
                              v64,
                              v64,
                              v65,
                              v75,
                              4 * v64 / 10);
                    }
                    else
                    {
                      v79 = 0;
                    }
                    if ( *(_DWORD *)((char *)dword_563908 + 32950) )
                      v80 = (_DWORD *)*((_DWORD *)dword_563908 + 350);
                    else
                      v80 = (_DWORD *)*((_DWORD *)dword_563908 + 351);
                    result = sub_4A7300(v80, v79);
                  }
                }
              }
            }
          }
          v81 = v2[101];
          if ( v81 )
          {
            result = v2[96];
            if ( *(_WORD *)(result + 2562) > 0 )
            {
              v2[127] -= a2;
              if ( v2[127] <= 0 )
              {
                v82 = v2[45] == 0;
                v2[127] = 10;
                v83 = *(signed __int16 *)(result + 2562);
                if ( v82 && !v2[46] )
                  v83 -= 2;
                result = sub_4014EC(v81, result + 1720);
                v111 = result;
                if ( v83 > 0 )
                {
                  v117 = v83;
                  do
                  {
                    v84 = rand();
                    v85 = sub_40240A(1000 * (v84 % 240));
                    v115 = cos(v85);
                    v86 = sin(v85);
                    v87 = v2[96];
                    v107 = (signed int)(v115 * (double)(10000 * *(signed __int16 *)(v87 + 2564)));
                    v112 = (signed int)(v86 * (double)(10000 * *(signed __int16 *)(v87 + 2564)));
                    v88 = *(signed __int16 *)(v2[101] + 170);
                    v89 = *(_WORD *)(v87 + 1776);
                    if ( v89 )
                      v88 = v89;
                    if ( operator new(0x44u) )
                    {
                      v90 = v2[101];
                      v91 = *(_DWORD *)(v2[96] + 1772);
                      v92 = rand() % *(signed __int16 *)(v90 + 176);
                      v93 = v2[44];
                      v94 = sub_401FD2(v112);
                      v95 = sub_4025CC(
                              v90,
                              v107 + v2[42],
                              v2[43] + v94,
                              v93,
                              (signed int)(v115 * 5000.0),
                              (signed int)(5000.0 * v86),
                              0,
                              v92,
                              v88,
                              v88,
                              v111,
                              v91,
                              0);
                    }
                    else
                    {
                      v95 = 0;
                    }
                    result = sub_4A7300(*((_DWORD **)dword_563908 + 350), v95);
                    --v117;
                  }
                  while ( v117 );
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 4014EC: using guessed type _DWORD __cdecl sub_4014EC(_DWORD, _DWORD);
// 401505: using guessed type _DWORD __stdcall sub_401505(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4018F2: using guessed type _DWORD __stdcall sub_4018F2(_DWORD);
// 401992: using guessed type _DWORD __stdcall sub_401992(_DWORD);
// 401C80: using guessed type _DWORD __cdecl sub_401C80(_DWORD, _DWORD);
// 401FD2: using guessed type _DWORD __cdecl sub_401FD2(_DWORD);
// 40232E: using guessed type _DWORD __cdecl sub_40232E(_DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);
// 40240A: using guessed type double __cdecl sub_40240A(_DWORD);
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047AB10) --------------------------------------------------------
int __thiscall sub_47AB10(_DWORD *this)
{
  int result; // eax

  result = *(_DWORD *)(this[18] + 1056);
  if ( result == -1 )
    result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 232))();
  return result;
}

//----- (0047AB50) --------------------------------------------------------
int __thiscall sub_47AB50(_DWORD *this, signed __int16 *a2, int a3)
{
  int v3; // edx
  _DWORD *v4; // eax
  int v5; // esi
  int result; // eax

  this[42] = 10000 * a2[2];
  this[43] = 10000 * a2[3];
  this[44] = 10000 * a2[4];
  this[113] = 1000 * *((char *)a2 + 10);
  this[48] = 1000 * *((unsigned __int8 *)a2 + 12);
  this[113] = 1000 * *((char *)a2 + 10);
  this[106] = *a2;
  this[107] = *((unsigned __int8 *)a2 + 11);
  if ( this[14] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v3 = a2[1];
    v4 = Memory;
    v5 = this[35];
    v4[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v5);
    *(_DWORD *)(v4[1] + 4 * v5) = 1000 * v3 ^ *v4;
    v4[4] ^= *(_DWORD *)(v4[1] + 4 * v5);
  }
  result = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4);
  *(_DWORD *)(result + 4 * this[107] + 108) = this[14];
  return result;
}

//----- (0047AC80) --------------------------------------------------------
int __thiscall sub_47AC80(_DWORD *this, int a2, int a3, int a4, int a5, _DWORD *a6, _DWORD *a7, _DWORD *a8)
{
  int v8; // edi
  long double v9; // ST14_8
  double v10; // ST0C_8
  long double v11; // st7
  int v12; // eax

  v8 = this[48] + this[109];
  if ( *(_WORD *)(this[96] + 1484) )
    v8 += a2;
  v9 = (double)((this[111] + a2 + 180000) % 240000) * 0.00002617993877916667;
  v10 = (double)(signed int)this[112];
  v11 = sin(v9) * v10;
  v12 = (signed int)v11;
  *a6 = a3 + (signed int)(cos(v9) * v10);
  if ( dword_53A7C4 )
    v12 = 7 * (signed int)v11 / 10;
  *a7 = a4 + v12;
  *a8 = a5 + 10000 * *(signed __int16 *)(this[96] + 1494);
  return v8 % 240000;
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0047ADC0) --------------------------------------------------------
int __thiscall sub_47ADC0(_DWORD *this, int a2)
{
  int result; // eax

  if ( a2 )
    result = sub_401983(1);
  else
    result = (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 4))(0);
  return result;
}
// 401983: using guessed type _DWORD __stdcall sub_401983(_DWORD);

//----- (0047AE10) --------------------------------------------------------
int __thiscall sub_47AE10(_DWORD *this)
{
  unsigned int v1; // edx
  int v2; // esi
  int result; // eax
  int v4; // edx

  v1 = this[16];
  if ( v1 == -1 )
  {
    v2 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4);
    if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 16))(*(_DWORD *)(*((_DWORD *)dword_563908 + 1503)
                                                                        + 4 * this[106]
                                                                        + 4)) == -1 )
      result = -1;
    else
      result = (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 204))(v2);
  }
  else
  {
    result = -1;
    if ( v1 <= 0x1387 )
    {
      v4 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v1 + 12408);
      if ( v4 )
        result = *(signed __int16 *)(v4 + 100);
    }
  }
  return result;
}

//----- (0047AE90) --------------------------------------------------------
int __thiscall sub_47AE90(_DWORD *this)
{
  int result; // eax

  LOWORD(result) = *(_WORD *)(this[18] + 1032);
  if ( (_WORD)result == -1 )
    result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 196))();
  else
    result = (signed __int16)result;
  return result;
}

//----- (0047AEE0) --------------------------------------------------------
int __thiscall sub_47AEE0(_DWORD *this)
{
  int result; // eax

  LOWORD(result) = *(_WORD *)(this[18] + 1034);
  if ( (_WORD)result == -1 )
    result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 200))();
  else
    result = (signed __int16)result;
  return result;
}

//----- (0047AF30) --------------------------------------------------------
int __thiscall sub_47AF30(_DWORD *this)
{
  int result; // eax

  result = 0;
  this[119] = 0;
  this[120] = 0;
  return result;
}

//----- (0047AF50) --------------------------------------------------------
int __thiscall sub_47AF50(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v6; // [esp+Ch] [ebp-Ch]
  int v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v4 = (*(int (__stdcall **)(int *, int *, int *))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4)
                                                 + 84))(
         &v8,
         &v7,
         &v6);
  return sub_40295F(v4, 10000 * (v8 / 10000), 10000 * (v7 / 10000), 10000 * (v6 / 10000), a2, a3, a4);
}
// 40295F: using guessed type _DWORD __stdcall sub_40295F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047B020) --------------------------------------------------------
int __thiscall sub_47B020(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v4; // ebx
  _DWORD *v5; // ebp
  _DWORD *v6; // edi
  int v7; // eax

  v4 = a3;
  v5 = a2;
  v6 = a4;
  v7 = (*(int (__stdcall **)(_DWORD *, _DWORD *, _DWORD *))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503)
                                                                        + 4 * this[106]
                                                                        + 4)
                                                          + 88))(
         a2,
         a3,
         a4);
  return sub_40295F(v7, *v5, *v4, *v6, &a2, &a3, &a4);
}
// 40295F: using guessed type _DWORD __stdcall sub_40295F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047B090) --------------------------------------------------------
int __thiscall sub_47B090(_DWORD *this)
{
  return (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 92))();
}

//----- (0047B0C0) --------------------------------------------------------
void __thiscall sub_47B0C0(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // ecx
  _DWORD *v3; // ecx

  v1 = this;
  if ( this[16] >= 0 )
  {
    (*(void (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 220))();
    v2 = (_DWORD *)v1[100];
    if ( v2 )
    {
      if ( v1[119]
        && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])
        && *((_DWORD *)dword_563918 + 2272) )
      {
        if ( !sub_4A6390(v2, -1) )
          sub_4A7120((_DWORD *)v1[100], 0, 0, 1, 0);
      }
      else
      {
        sub_4A5FA0(v2, -1);
      }
    }
    v3 = (_DWORD *)v1[101];
    if ( v3 )
    {
      if ( v1[120]
        && (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])) >= 0
        && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v1[35])
        && *((_DWORD *)dword_563918 + 2272) )
      {
        if ( !sub_4A6390(v3, -1) )
          sub_4A7120((_DWORD *)v1[101], 0, 0, 1, 0);
      }
      else
      {
        sub_4A5FA0(v3, -1);
      }
    }
  }
}

//----- (0047B1E0) --------------------------------------------------------
int __thiscall sub_47B1E0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx

  v1 = this;
  result = (*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4) + 224))();
  v3 = (_DWORD *)v1[100];
  if ( v3 )
    result = sub_4A5FA0(v3, -1);
  v4 = (_DWORD *)v1[101];
  if ( v4 )
    result = sub_4A5FA0(v4, -1);
  return result;
}

//----- (0047B240) --------------------------------------------------------
void *__thiscall sub_47B240(_DWORD *this)
{
  void *result; // eax
  _DWORD *v2; // esi
  int v3; // eax
  _DWORD *v4; // ebx
  int v5; // edi
  int v6; // ebp
  int v7; // edi
  unsigned int v8; // edx
  int v9; // ebp
  unsigned int v10; // edx
  int v11; // edi
  int v12; // eax
  __int64 v13; // rax
  void *v14; // ecx
  int v15; // ebx
  _DWORD *v16; // edi
  int v17; // ecx
  int v18; // ebx
  int v19; // ecx
  int v20; // ebx
  int v21; // eax
  signed int v22; // eax
  int v23; // ecx
  __int64 v24; // rax
  signed __int64 v25; // rt2
  double v26; // st7
  int v27; // ST18_4
  void *v28; // ecx
  int v29; // eax
  int v30; // ecx
  bool v31; // sf
  int v32; // ebx
  signed int v33; // eax
  signed int v34; // ecx
  int v35; // eax
  int v36; // ecx
  bool v37; // sf
  int v38; // ecx
  __int64 v39; // rax
  signed __int64 v40; // rt2
  void *v41; // ecx
  int v42; // edi
  _DWORD *v43; // ebx
  int v44; // ecx
  int v45; // [esp+18h] [ebp-8h]
  signed int v46; // [esp+18h] [ebp-8h]

  result = Memory;
  v2 = this;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) > 0 )
  {
    v3 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96);
    if ( this[16] != v3
      || (result = (void *)(*(int (**)(void))(**(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * v3 + 4) + 148))()) == 0 )
    {
      j_nullsub_18(v2);
      v4 = dword_563908;
      v5 = v2[96];
      v6 = *(_DWORD *)(v5 + 1504);
      v7 = *(_DWORD *)(v5 + 1508);
      v8 = (signed int)((unsigned __int64)(274877907i64 * v6 * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 16)) >> 32) >> 6;
      v9 = v8 + (v8 >> 31) + v6;
      v10 = (signed int)((unsigned __int64)(274877907i64 * v7 * *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 16)) >> 32) >> 6;
      v11 = v10 + (v10 >> 31) + v7;
      v45 = v11;
      if ( *((_DWORD *)dword_563908 + 6895) )
      {
        v12 = *(_DWORD *)((char *)dword_563908 + 59362);
        if ( v9 >= v12 )
          v9 = *(_DWORD *)((char *)dword_563908 + 59362);
        if ( v11 >= v12 )
        {
          v45 = *(_DWORD *)((char *)dword_563908 + 59362);
          v11 = *(_DWORD *)((char *)dword_563908 + 59362);
        }
      }
      HIDWORD(v13) = dword_563918;
      switch ( *((_DWORD *)dword_563918 + 2348) )
      {
        case 0:
          if ( *((_DWORD *)dword_56390C + 1537) )
          {
            v2[119] = -v9;
          }
          else if ( *((_DWORD *)dword_56390C + 1538) )
          {
            v2[119] = v11;
          }
          v14 = dword_563918;
          if ( *((_DWORD *)dword_563918 + 2252) > 0 )
          {
            if ( v2[119] )
            {
              if ( !v2[102] )
                v2[102] = sub_401D39(dword_563918, HIDWORD(v13));
              v15 = *((_DWORD *)dword_563918 + 2252);
              v16 = (char *)dword_563918 + 9008;
              v17 = v15 / 4 + abs(sub_401D39(v14, HIDWORD(v13)) - v2[102]);
              HIDWORD(v13) = (5 * v15 >> 31) & 3;
              if ( v17 < 5 * v15 / 4 )
              {
                v18 = v17 * v2[119];
                v19 = 5 * *v16 / 4;
                HIDWORD(v13) = v18 % v19;
                v2[119] = v18 / v19;
              }
              v11 = v45;
            }
            else
            {
              v2[102] = 0;
            }
          }
          goto LABEL_22;
        case 1:
        case 2:
          if ( !*((_DWORD *)dword_56390C + 2180) )
            goto LABEL_22;
          v32 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), 0) - 0x8000;
          v33 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), 1);
          v34 = sub_40232E(v33 - 0x8000);
          v46 = v34;
          if ( !abs(v32 / 10000) )
          {
            v13 = v34 / 10000;
            if ( !abs((_DWORD)v13) )
              goto LABEL_22;
          }
          sub_4C444A((void *)v34);
          v35 = sub_4012C6((double)v46);
          v36 = v35 - v2[48];
          v13 = v35 - v2[48];
          LODWORD(v13) = (HIDWORD(v13) ^ v13) - HIDWORD(v13);
          if ( (signed int)v13 < 1000 )
          {
            v2[119] = 0;
            goto LABEL_50;
          }
          v37 = v36 < 0;
          if ( v36 <= 0 )
            goto LABEL_46;
          if ( v36 < 120000 )
            goto LABEL_74;
          v37 = v36 < 0;
LABEL_46:
          if ( v37 && v36 < -120000 )
          {
LABEL_74:
            v2[119] = v11;
            goto LABEL_50;
          }
          HIDWORD(v13) = -v9;
          v2[119] = -v9;
          goto LABEL_50;
        case 3:
          v26 = (double)(signed int)sub_40232E(
                                      *((_DWORD *)dword_563908 + 61)
                                    + *((_DWORD *)dword_563908 + 2689)
                                    - *((_DWORD *)dword_563908 + 63));
          v27 = v4[60] + v4[2688] - v4[62];
          sub_4C444A(v28);
          v29 = sub_4012C6(v26);
          v30 = v29 - v2[48];
          v13 = v29 - v2[48];
          LODWORD(v13) = (HIDWORD(v13) ^ v13) - HIDWORD(v13);
          if ( (signed int)v13 < 1000 )
          {
            v2[119] = 0;
            goto LABEL_50;
          }
          v31 = v30 < 0;
          if ( v30 <= 0 )
            goto LABEL_34;
          if ( v30 < 120000 )
            goto LABEL_75;
          v31 = v30 < 0;
LABEL_34:
          if ( !v31 )
            goto LABEL_76;
          if ( v30 < -120000 )
LABEL_75:
            v2[119] = v11;
          else
LABEL_76:
            v2[119] = -v9;
LABEL_50:
          if ( (signed int)v13 < 3000 )
          {
            v38 = v2[119];
            HIDWORD(v13) = (signed int)((unsigned __int64)(1717986919i64 * v38) >> 32) >> 1;
            v2[119] = v38 / 5;
          }
LABEL_22:
          if ( *((_DWORD *)dword_56390C + 2180) )
          {
            v20 = 0x8000 - *((_DWORD *)dword_563918 + 2352);
            if ( 0x8000 - *((_DWORD *)dword_563918 + 2352) > 0 && !v2[119] )
            {
              v21 = *((_DWORD *)dword_563918 + 2350);
              if ( v21 > 0 )
              {
                v22 = sub_4B42D0(*((_DWORD **)dword_56390C + 2180), v21 - 1);
                v23 = v22 - 0x8000;
                HIDWORD(v13) = dword_563918;
                LODWORD(v13) = abs(v13 - 0x8000) - *((_DWORD *)dword_563918 + 2352);
                if ( (signed int)v13 > 0 )
                {
                  if ( v23 <= 0 )
                  {
                    v39 = v9 * (signed int)v13;
                    v40 = v39 % v20;
                    LODWORD(v39) = v39 / v20;
                    HIDWORD(v13) = v40;
                    LODWORD(v13) = -(signed int)v13;
                  }
                  else
                  {
                    v24 = v11 * (signed int)v13;
                    v25 = v24 % v20;
                    LODWORD(v13) = v24 / v20;
                    HIDWORD(v13) = v25;
                  }
                  v2[119] = v13;
                }
              }
            }
          }
          if ( *((_DWORD *)dword_56390C + 1540) || *((_DWORD *)dword_56390C + 1546) )
          {
            HIDWORD(v13) = v2[96];
            v2[120] = -*(signed __int16 *)(HIDWORD(v13) + 1502);
          }
          else if ( *((_DWORD *)dword_56390C + 1539) || *((_DWORD *)dword_56390C + 1545) )
          {
            v2[120] = *(signed __int16 *)(v2[96] + 1502);
          }
          v41 = dword_563918;
          if ( *((_DWORD *)dword_563918 + 2252) > 0 )
          {
            if ( v2[120] )
            {
              if ( !v2[103] )
                v2[103] = sub_401D39(dword_563918, HIDWORD(v13));
              v42 = *((_DWORD *)dword_563918 + 2252);
              v43 = (char *)dword_563918 + 9008;
              v44 = v42 / 4 + abs(sub_401D39(v41, HIDWORD(v13)) - v2[103]);
              if ( v44 < 5 * v42 / 4 )
                v2[120] = v44 * v2[120] / (5 * *v43 / 4);
            }
            else
            {
              v2[103] = 0;
            }
          }
          if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 82))) >= 0
            && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * *((_DWORD *)dword_563908 + 82)) )
          {
            v2[119] = 0;
          }
          result = dword_563908;
          if ( *((_DWORD *)dword_563908 + 6923) )
          {
            if ( *(_WORD *)(*((_DWORD *)dword_563908 + 6923) + 424) )
              *((_DWORD *)dword_563908 + 6923) = 0;
          }
          break;
        default:
          goto LABEL_22;
      }
    }
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40232E: using guessed type _DWORD __cdecl sub_40232E(_DWORD);
// 4023D3: using guessed type int __thiscall j_nullsub_18(_DWORD);

//----- (0047B910) --------------------------------------------------------
const char *__thiscall sub_47B910(_DWORD *this)
{
  _DWORD *v1; // esi
  const char *result; // eax
  _DWORD *v3; // edx
  _DWORD *v4; // ecx
  int v5; // eax
  int v6; // eax

  v1 = this;
  result = (const char *)sub_402419();
  if ( !result )
  {
    v3 = dword_563908;
    v4 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * v1[106] + 4);
    v5 = v1[96];
    if ( *(_WORD *)(v5 + 1480)
      && ((*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35])) < 0
       || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35])) )
    {
      return (const char *)sub_402617(0xB4u);
    }
    if ( *(_WORD *)(v5 + 1482) )
    {
      if ( (*(int (**)(void))(*v4 + 16))() < 0 )
        return "No Driver";
      v3 = dword_563908;
    }
    v6 = *(_DWORD *)(v1[18] + 1072);
    if ( v6 == -1 )
      v6 = *(_DWORD *)((char *)v3 + 57654);
    if ( v3[79] <= v6 )
      result = 0;
    else
      result = (const char *)sub_402617(0x3Du);
  }
  return result;
}
// 402419: using guessed type int sub_402419(void);

//----- (0047B9F0) --------------------------------------------------------
void *__thiscall sub_47B9F0(_DWORD *this, int a2)
{
  int v2; // ebx
  _DWORD *v3; // esi
  void *result; // eax
  int v5; // eax
  int v6; // edi
  int v7; // eax
  int v8; // eax
  signed int v9; // eax
  signed int v10; // ecx
  int v11; // eax
  int v12; // edx
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  int v16; // [esp+Ch] [ebp-8h]
  int v17; // [esp+10h] [ebp-4h]

  v2 = a2;
  v3 = this;
  sub_4018F2(a2);
  result = Memory;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3[35])) < 0
    || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v3[35])
    || v3[16] == -1 )
  {
    return result;
  }
  v5 = v3[119];
  v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1503) + 4 * v3[106] + 4);
  if ( v5 >= 0 )
  {
    if ( v5 <= 0 )
      goto LABEL_14;
    v3[48] += v2 * v5;
    v9 = v3[110];
    v10 = v3[48];
    if ( v9 < 240000 && v10 > v9 )
    {
      v3[48] = v9 - 1;
      goto LABEL_14;
    }
    v8 = v10 + 240000;
  }
  else
  {
    v3[48] += v2 * v5;
    v7 = v3[48];
    if ( v3[110] < 240000 && v7 < 0 )
    {
      v3[48] = 0;
      goto LABEL_14;
    }
    v8 = v7 + 240000;
  }
  v3[48] = v8 % 240000;
LABEL_14:
  v11 = v3[120];
  if ( v11 )
  {
    v12 = v3[96];
    v3[113] += v2 * v11;
    v13 = v3[113];
    v14 = 1000 * *(signed __int16 *)(v12 + 1498);
    if ( v13 < v14 || (v14 = 1000 * *(signed __int16 *)(v12 + 1500), v13 > v14) )
      v3[113] = v14;
  }
  v15 = (*(int (__thiscall **)(int, int *, int *, int *))(*(_DWORD *)v6 + 84))(v6, &v17, &v16, &a2);
  v3[108] = sub_40295F(
              v15,
              10000 * (v17 / 10000),
              10000 * (v16 / 10000),
              10000 * (a2 / 10000),
              v3 + 42,
              v3 + 43,
              v3 + 44);
  return (void *)(*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD *))(*(_DWORD *)v6 + 92))(
                   v6,
                   v3 + 45,
                   v3 + 46,
                   v3 + 47);
}
// 4018F2: using guessed type _DWORD __stdcall sub_4018F2(_DWORD);
// 40295F: using guessed type _DWORD __stdcall sub_40295F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047BC30) --------------------------------------------------------
int __fastcall sub_47BC30(_DWORD *a1, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  bool v8; // zf
  signed int v9; // edi
  int v10; // ecx
  __int64 v11; // rax
  int v12; // edx
  __int16 v13; // ax
  int v14; // edx
  __int16 v15; // ax
  int v16; // edx
  int v17; // ecx
  int v18; // ecx
  int v19; // edi
  int v20; // edx
  unsigned int v21; // edx
  void *v22; // ecx
  int v23; // edi
  __int64 v24; // rax
  int v25; // eax
  int v26; // ST30_4
  int v27; // ST28_4
  int v28; // ST24_4
  int v29; // ST20_4
  int v30; // ST1C_4
  int v31; // ST18_4
  __int16 v33; // [esp+28h] [ebp-14h]
  __int16 v34; // [esp+2Ah] [ebp-12h]
  __int16 v35; // [esp+2Ch] [ebp-10h]
  __int16 v36; // [esp+2Eh] [ebp-Eh]
  __int16 v37; // [esp+30h] [ebp-Ch]
  __int16 v38; // [esp+32h] [ebp-Ah]
  __int16 v39; // [esp+34h] [ebp-8h]
  char v40; // [esp+36h] [ebp-6h]
  char v41; // [esp+37h] [ebp-5h]
  unsigned __int8 v42; // [esp+38h] [ebp-4h]

  v4 = a1;
  v5 = sub_401D39(a1, a2);
  v7 = v4[105];
  v8 = v7 == v4[48];
  v4[83] = v5;
  v9 = *(_DWORD *)((char *)dword_563908 + 57478);
  if ( v8 )
  {
    v6 = v4[94];
    if ( v6 == v4[93] )
      v9 *= 3;
  }
  if ( *((_DWORD *)dword_563908 + 2709) )
    v9 += *(_DWORD *)((char *)dword_563908 + 57490) + 1;
  v11 = sub_401D39(v7, v6) - v4[104];
  LODWORD(v11) = (HIDWORD(v11) ^ v11) - HIDWORD(v11);
  if ( (signed int)v11 > v9 || a3 || a4 )
  {
    v4[104] = sub_401D39(v10, HIDWORD(v11));
    v36 = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[42]) >> 32) >> 12)
        + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[42]) >> 32) >> 31);
    v37 = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[43]) >> 32) >> 12)
        + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[43]) >> 32) >> 31);
    v12 = v4[45];
    v38 = ((signed int)((unsigned __int64)(1759218605i64 * (signed int)v4[44]) >> 32) >> 12)
        + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)v4[44]) >> 32) >> 31);
    v13 = ((signed int)((unsigned __int64)(1717986919i64 * v12) >> 32) >> 2)
        + ((unsigned int)((unsigned __int64)(1717986919i64 * v12) >> 32) >> 31);
    v14 = v4[46];
    v33 = v13;
    v15 = ((signed int)((unsigned __int64)(1717986919i64 * v14) >> 32) >> 2)
        + ((unsigned int)((unsigned __int64)(1717986919i64 * v14) >> 32) >> 31);
    v16 = v4[47];
    v34 = v15;
    v17 = v4[48];
    v35 = ((signed int)((unsigned __int64)(1717986919i64 * v16) >> 32) >> 2)
        + ((unsigned int)((unsigned __int64)(1717986919i64 * v16) >> 32) >> 31);
    v4[105] = v17;
    v41 = (char)v17 / -24;
    v18 = v4[108];
    v19 = v4[93];
    v40 = (char)v4[113] / -24;
    v20 = v4[35];
    v4[94] = v19;
    v42 = (char)v18 / -24;
    v21 = (signed int)((unsigned __int64)(274877907i64
                                        * ((*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v20)) + 999)) >> 32) >> 6;
    v39 = v21 + (v21 >> 31);
    LODWORD(v11) = (*(int (__stdcall **)(_DWORD, int, __int16 *, signed int, _DWORD *, int))(*(_DWORD *)dword_56391C + 24))(
                     v4[14],
                     a3,
                     &v33,
                     18,
                     v4 + 85,
                     v19);
    v23 = v11;
    if ( a3 )
    {
      v24 = a3;
      LODWORD(v24) = abs(a3);
      if ( (signed int)v24 <= 5100 )
      {
        v22 = dword_563908;
        HIDWORD(v24) = *((_DWORD *)dword_563908 + 1507);
        LODWORD(v24) = *(_DWORD *)(HIDWORD(v24) + 4 * v24 + 8008);
      }
      else
      {
        LODWORD(v24) = 0;
      }
      if ( *(_DWORD *)(v24 + 428) )
        (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*v4 + 248))(
          v4,
          *(signed __int16 *)(v24 + 434),
          *(signed __int16 *)(v24 + 432),
          *(signed __int16 *)(v24 + 440),
          *(signed __int16 *)(v24 + 442));
      v25 = sub_401D39(v22, HIDWORD(v24));
      v26 = v4[16];
      v27 = v40;
      v28 = v42;
      v29 = v35;
      v30 = v34;
      v31 = v33;
      v4[40] = v25;
      LODWORD(v11) = sub_402590(
                       a3,
                       0,
                       v36,
                       v37,
                       v38 + *(signed __int16 *)(v4[96] + 1030),
                       *(signed __int16 *)(v4[96] + 1028),
                       v31,
                       v30,
                       v29,
                       v28,
                       v27,
                       0,
                       v26,
                       -1,
                       v23,
                       0,
                       0,
                       0);
    }
  }
  return v11;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0047BFA0) --------------------------------------------------------
_DWORD *__thiscall sub_47BFA0(_DWORD *this, signed int a2, int a3, int a4, signed __int16 *a5, unsigned int a6, int a7)
{
  _DWORD *v7; // edi
  int v8; // ecx
  int v9; // edx
  signed int v10; // ebx
  int v11; // edx
  int v12; // ecx
  int v13; // eax
  int v14; // ST30_4
  _DWORD *v15; // eax
  int v16; // ecx
  int v17; // edi
  _DWORD *v18; // edx
  int v19; // esi
  int v20; // ecx
  _DWORD *result; // eax

  v7 = this;
  if ( a6 <= 0x12 )
    (*(void (__stdcall **)(_DWORD, _DWORD))(*this + 240))(0, 0);
  else
    (*(void (__stdcall **)(signed __int16 *, unsigned int))(*this + 240))(a5 + 9, (a6 - 18) >> 1);
  v7[114] = *(_DWORD *)a5;
  v8 = *((_DWORD *)a5 + 1);
  v7[115] = v8;
  v9 = *((_DWORD *)a5 + 2);
  v7[116] = v9;
  v7[117] = *((_DWORD *)a5 + 3);
  LOWORD(v8) = a5[8];
  *((_WORD *)v7 + 236) = v8;
  v10 = a2;
  v7[83] = sub_401D39(v8, v9);
  if ( a2 >= 0 && a2 <= 2000 )
  {
    if ( a2 > 80 )
      v10 = 80;
  }
  else
  {
    v10 = 30;
  }
  if ( a4 > 0 )
  {
    v13 = sub_401D39(v12, v11);
    v14 = v7[16];
    v7[40] = v13;
    sub_402590(
      a4,
      v10,
      a5[3],
      a5[4],
      a5[5] + *(signed __int16 *)(v7[96] + 1030),
      *(signed __int16 *)(v7[96] + 1028),
      *a5,
      a5[1],
      a5[2],
      *((unsigned __int8 *)a5 + 16),
      *((char *)a5 + 14),
      0,
      v14,
      -1,
      a7,
      0,
      0,
      0);
  }
  v7[48] = 1000 * *((unsigned __int8 *)a5 + 15);
  v7[113] = 1000 * *((char *)a5 + 14);
  v15 = Memory;
  v16 = 1000 * a5[6];
  v17 = v7[35];
  v15[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v17);
  v18 = v15 + 1;
  v19 = v16 ^ *v15;
  v20 = v15[1];
  result = v15 + 4;
  *(_DWORD *)(v20 + 4 * v17) = v19;
  *result ^= *(_DWORD *)(*v18 + 4 * v17);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047C190) --------------------------------------------------------
int __thiscall sub_47C190(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  _DWORD *v5; // edi
  int result; // eax
  int v7; // eax
  int v8; // edi
  int v9; // edi
  int v10; // ebx
  int v11; // ebp
  int v12; // ecx
  int v13; // eax
  int v14; // ebp
  _BYTE *v15; // ebx
  int v16; // ecx
  int v17; // ebp
  bool v18; // zf
  void (__thiscall *v19)(_DWORD *); // eax
  int v20; // ebx
  int v21; // edx
  int v22; // ebp
  int v23; // eax
  int v24; // edx
  int v25; // ecx
  int v26; // ebp
  int v27; // eax
  int v28; // ecx
  int v29; // eax
  signed int v30; // eax
  int v31; // eax
  int v32; // eax
  __int16 v33; // ST18_2
  int v34; // eax
  int v35; // [esp+Ch] [ebp-24h]
  int v36; // [esp+10h] [ebp-20h]
  int v37; // [esp+14h] [ebp-1Ch]
  int v38; // [esp+18h] [ebp-18h]
  int v39; // [esp+1Ch] [ebp-14h]
  int v40; // [esp+20h] [ebp-10h]
  int v41; // [esp+24h] [ebp-Ch]
  int v42; // [esp+28h] [ebp-8h]
  int v43; // [esp+2Ch] [ebp-4h]
  int v44; // [esp+38h] [ebp+8h]

  v4 = this;
  v5 = *(_DWORD **)(*((_DWORD *)dword_563908 + 1503) + 4 * this[106] + 4);
  result = sub_40237E(v5);
  if ( !result )
    return result;
  sub_40227F(a2, a3, a4);
  result = (*(int (__thiscall **)(_DWORD *))(*v5 + 8))(v5);
  v4[81] = result;
  v4[36] = v5[36];
  v4[37] = v5[37];
  if ( !result )
    return result;
  v7 = (*(int (__thiscall **)(_DWORD *, int *, int *, int *))(*v5 + 84))(v5, &v40, &v39, &v38);
  v8 = v39;
  v41 = sub_40295F(
          240000
        * (*((_DWORD *)dword_563918 + 2213)
         * ((v7 + 120000 / *((_DWORD *)dword_563918 + 2213)) % 240000)
         / 240000)
        / *((_DWORD *)dword_563918 + 2213),
          10000 * (v40 / 10000),
          10000 * (v39 / 10000),
          10000 * (v38 / 10000),
          &v36,
          &v37,
          &v35);
  v9 = *(signed __int16 *)(v4[96] + 1496) + (v8 - v37) / 10000;
  v10 = v36 / 10000 - a3;
  v43 = v36 / 10000 - a3;
  if ( dword_53A7C4 )
  {
    v11 = ((signed int)((unsigned __int64)(1759218605i64 * v35) >> 32) >> 12) + *(signed __int16 *)(v4[18] + 1044);
    result = (signed int)(7 * (v11 + ((unsigned int)((unsigned __int64)(1759218605i64 * v35) >> 32) >> 31))) / 10;
    v36 = (signed int)(7 * (v11 + ((unsigned int)((unsigned __int64)(1759218605i64 * v35) >> 32) >> 31))) / 10;
  }
  else
  {
    v36 = 0;
    result = 0;
  }
  v12 = v37 / 10000 - a4 - result;
  v42 = v37 / 10000 - a4 - result;
  if ( v10 < -100 )
    return result;
  result = (int)dword_563908;
  if ( v10 > *((_DWORD *)dword_563908 + 3111) + 100 )
    return result;
  if ( v12 < -100 )
    return result;
  result = *((_DWORD *)dword_563908 + 3112) + 100;
  if ( v12 > result )
    return result;
  result = (*(int (__thiscall **)(_DWORD *))(*v4 + 184))(v4);
  if ( result )
    return result;
  v13 = v4[81] / 200;
  if ( v4[36] < 0x7FFF && v13 > 2 )
    v13 = 2;
  v14 = dword_538798[v13];
  v15 = dword_563908;
  if ( v14 == 3 )
  {
    v16 = *((_DWORD *)dword_563908 + 1508);
    if ( v15[480 * sub_40137F(v4[42] / 160000, v4[43] / 160000) + 59595] )
    {
      v35 = 9;
      v14 = 9;
    }
  }
  v17 = v14 | 0x80000100;
  v18 = v4[14] == *((_DWORD *)v15 + 2692);
  v35 = v17;
  if ( v18 )
  {
    v19 = *(void (__thiscall **)(_DWORD *))(*v4 + 188);
    v35 = v17 | 0x800;
    v19(v4);
  }
  result = v4[96];
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35])) < 0
    || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35]) )
  {
    v20 = v4[98];
    v21 = *(_DWORD *)(result + 1684);
    v22 = *(signed __int16 *)(result + 1688);
  }
  else
  {
    if ( v4[16] != -1 )
    {
      v22 = *(signed __int16 *)(result + 1568);
      v20 = v4[97];
      v37 = *(_DWORD *)(result + 1564);
      result = sub_402216(a2, a3, a4);
      goto LABEL_25;
    }
    v20 = v4[99];
    v21 = *(_DWORD *)(result + 1624);
    v22 = *(signed __int16 *)(result + 1628);
  }
  v37 = v21;
LABEL_25:
  if ( v20 )
  {
    v23 = sub_401C80(v41, *(signed __int16 *)(v20 + 176));
    LOBYTE(v25) = *(_BYTE *)(v20 + 234);
    v44 = v23;
    if ( (_BYTE)v25 == 69 )
    {
      v26 = v23 * *(signed __int16 *)(v20 + 178);
      v27 = v4[96];
      v28 = *(signed __int16 *)(v27 + 1500) - *(signed __int16 *)(v27 + 1498);
      if ( v28 > 0 )
      {
        v29 = *(signed __int16 *)(v20 + 178) * (v4[113] / 1000 - *(signed __int16 *)(v27 + 1498)) / (v28 + 1);
        v30 = v29 < 0 ? 0 : v29;
        if ( *(signed __int16 *)(v20 + 178) - 1 < v30 )
          v30 = *(signed __int16 *)(v20 + 178) - 1;
        v26 += v30;
      }
    }
    else if ( (_BYTE)v25 == 70 )
    {
      if ( !v22 )
        v22 = *(signed __int16 *)(v20 + 170);
      v31 = sub_401D39(v25, v24) - v4[40];
      if ( v31 >= v22 || *(_WORD *)(v20 + 178) <= 1 )
        v26 = v44 * *(signed __int16 *)(v20 + 178);
      else
        v26 = (*(signed __int16 *)(v20 + 178) - 1) * (v31 % v22) / v22 + v44 * *(signed __int16 *)(v20 + 178) + 1;
    }
    else
    {
      v32 = sub_401D39(v25, v24);
      v26 = sub_401B59(v44, v32, v22);
    }
    v33 = v9 + v36;
    v34 = sub_4015FF(v37, v4[52]);
    result = sub_4A50B0(v20, v26, a2, v43, v42, v35, v34, v33, v4 + 53, 0);
  }
  return result;
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401C80: using guessed type _DWORD __cdecl sub_401C80(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402216: using guessed type _DWORD __stdcall sub_402216(_DWORD, _DWORD, _DWORD);
// 40227F: using guessed type _DWORD __stdcall sub_40227F(_DWORD, _DWORD, _DWORD);
// 40237E: using guessed type int __thiscall sub_40237E(_DWORD);
// 40295F: using guessed type _DWORD __stdcall sub_40295F(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0047C7B0) --------------------------------------------------------
_DWORD *__thiscall sub_47C7B0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  double v6; // st7
  signed __int16 *v7; // eax
  signed __int16 *v8; // eax
  signed __int16 *v9; // eax
  int v11; // [esp+28h] [ebp+8h]

  v4 = this;
  sub_4013C5(a2, a3);
  v4[96] = a3;
  *v4 = &DependentVehicle::`vftable';
  v4[113] = 1000 * *(signed __int16 *)(a3 + 1498);
  sub_40283D(a4, 14);
  sub_40136B(1000 * *(signed __int16 *)(a4 + 2));
  v5 = v4[96];
  v4[104] = 0;
  v4[109] = (240000 * *(signed __int16 *)(v5 + 1486) / 360 + 240000) % 240000;
  v4[110] = 240000 * *(signed __int16 *)(v5 + 1488) / 360;
  v4[108] = 0;
  v6 = (double)*(signed __int16 *)(v5 + 1492);
  v11 = *(signed __int16 *)(v5 + 1490);
  sub_4C444A((void *)*(signed __int16 *)(v5 + 1492));
  v4[111] = (24000000 - (signed int)((v6 + 1.57079632675) * -38197.18634314663)) % 240000;
  v4[112] = (signed int)(sqrt((double)(*(signed __int16 *)(v5 + 1492) * (signed int)*(signed __int16 *)(v5 + 1492)
                                     + *(signed __int16 *)(v5 + 1490) * (signed int)*(signed __int16 *)(v5 + 1490)))
                       * 10000.0);
  v7 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v5 + 1512), v5 + 1536);
  v4[97] = v7;
  if ( v7 )
    sub_4A4520(v7, *((_DWORD *)dword_563918 + 2213));
  v8 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1632), v4[96] + 1656);
  v4[98] = v8;
  if ( v8 )
    sub_4A4520(v8, *((_DWORD *)dword_563918 + 2213));
  v9 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 1572), v4[96] + 1596);
  v4[99] = v9;
  if ( v9 )
    sub_4A4520(v9, *((_DWORD *)dword_563918 + 2213));
  v4[100] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 1692),
              v4[96] + 1716,
              *(signed __int16 *)(v4[96] + 1740),
              0);
  v4[101] = sub_4B3700(
              *((_DWORD **)dword_563908 + 1515),
              (char *)(v4[96] + 1744),
              v4[96] + 1768,
              *(signed __int16 *)(v4[96] + 1792),
              0);
  v4[119] = 0;
  v4[120] = 0;
  return v4;
}
// 40136B: using guessed type _DWORD __stdcall sub_40136B(_DWORD);
// 4013C5: using guessed type _DWORD __stdcall sub_4013C5(_DWORD, _DWORD);
// 40283D: using guessed type _DWORD __stdcall sub_40283D(_DWORD, _DWORD);
// 516A14: using guessed type void *DependentVehicle::`vftable';

//----- (0047CB10) --------------------------------------------------------
void *__thiscall sub_47CB10(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &DependentVehicle::`vftable';
  sub_4027B1(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);
// 516A14: using guessed type void *DependentVehicle::`vftable';

//----- (0047CB60) --------------------------------------------------------
int __thiscall sub_47CB60(_DWORD *this, int a2, int a3)
{
  int result; // eax
  _DWORD *v4; // edi
  bool v5; // zf
  int v6; // eax
  void (__thiscall **v7)(int, signed int, _DWORD); // edx
  int (__thiscall ***v8)(_DWORD, signed int, _DWORD); // esi

  result = a2;
  v4 = this;
  v5 = a2 == this[99];
  this[97] = 0;
  if ( v5 )
  {
    this[100] = a3;
  }
  else
  {
    this[99] = a2;
    v6 = *((_DWORD *)dword_563908 + 1500);
    v7 = *(void (__thiscall ***)(int, signed int, _DWORD))(v6 + 8);
    v8 = (int (__thiscall ***)(_DWORD, signed int, _DWORD))(v6 + 8);
    *(_DWORD *)(v6 + 60) = 1;
    (*v7)(v6 + 8, 1, 0);
    result = (**v8)(v8, 2, 0);
    v4[100] = a3;
  }
  return result;
}

//----- (0047CBF0) --------------------------------------------------------
int __thiscall sub_47CBF0(_DWORD *this, signed __int16 *a2, int a3)
{
  int result; // eax

  this[42] = 10000 * *a2;
  result = 10000 * a2[1];
  this[43] = result;
  this[48] = 0;
  return result;
}

//----- (0047CC30) --------------------------------------------------------
int __thiscall sub_47CC30(_DWORD *this)
{
  int result; // eax
  unsigned int v2; // ecx
  int v3; // ecx

  result = *((_DWORD *)dword_563908 + 7726);
  if ( result == -1 )
    result = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
  v2 = this[99];
  if ( (v2 & 0x80000000) == 0 && v2 <= 0x1387 )
  {
    v3 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v2 + 12408);
    if ( v3 )
      result = *(signed __int16 *)(v3 + 100);
  }
  return result;
}

//----- (0047CC90) --------------------------------------------------------
signed int __thiscall sub_47CC90(_DWORD *this)
{
  unsigned int v1; // ecx
  signed int result; // eax
  int v3; // ecx

  v1 = this[16];
  result = -1;
  if ( v1 != -1 && v1 <= 0x1387 )
  {
    v3 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v1 + 12408);
    if ( v3 )
      result = *(signed __int16 *)(v3 + 100);
  }
  return result;
}

//----- (0047CCD0) --------------------------------------------------------
int sub_47CCD0()
{
  return 0;
}

//----- (0047CCE0) --------------------------------------------------------
int sub_47CCE0()
{
  return 0;
}

//----- (0047CCF0) --------------------------------------------------------
int __thiscall sub_47CCF0(_DWORD *this)
{
  int result; // eax

  result = 0;
  this[101] = 0;
  this[102] = 0;
  return result;
}

//----- (0047CD30) --------------------------------------------------------
SHORT __thiscall sub_47CD30(_DWORD *this)
{
  _DWORD *v1; // edi
  signed int v2; // esi
  SHORT result; // ax

  v1 = this;
  j_nullsub_18(this);
  v2 = 1;
  if ( GetAsyncKeyState(16) < 0 )
    v2 = 4;
  if ( GetAsyncKeyState(18) < 0 )
    v2 = 4;
  if ( GetAsyncKeyState(37) < 0 )
    v1[101] = -v2;
  if ( GetAsyncKeyState(39) < 0 )
    v1[101] = v2;
  if ( GetAsyncKeyState(38) < 0 )
    v1[102] = -v2;
  result = GetAsyncKeyState(40);
  if ( result < 0 )
    v1[102] = v2;
  return result;
}
// 4023D3: using guessed type int __thiscall j_nullsub_18(_DWORD);

//----- (0047CDD0) --------------------------------------------------------
int sub_47CDD0()
{
  return 0;
}

//----- (0047CDE0) --------------------------------------------------------
void __thiscall sub_47CDE0(_DWORD *this)
{
  _DWORD *v1; // edx
  int v2; // ecx
  int v3; // esi
  int v4; // ebp
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  int v8; // ecx
  int v9; // edi
  int v10; // edx
  _DWORD *v11; // [esp+Ch] [ebp-4h]

  v1 = this;
  v2 = *((_DWORD *)dword_563908 + 1504);
  v3 = *(_DWORD *)(v2 + 12404);
  v11 = v1;
  if ( v3 )
  {
    v4 = 0;
    v5 = 0;
    if ( v3 > 0 )
    {
      v6 = v1[99];
      v7 = v2 + 6404;
      while ( *(signed __int16 *)(*(_DWORD *)v7 + 96) != v6 )
      {
        ++v5;
        v7 += 4;
        if ( v5 >= v3 )
          goto LABEL_8;
      }
      v4 = v5 + 1;
    }
LABEL_8:
    v8 = 0;
    if ( v3 > 0 )
    {
      v9 = *((_DWORD *)dword_563908 + 1504);
      while ( 1 )
      {
        v10 = (v8 + v4) % *(_DWORD *)(v9 + 12404);
        if ( *(_DWORD *)(*(_DWORD *)(v9 + 4 * v10 + 6404) + 120) > 0 )
          break;
        if ( ++v8 >= v3 )
          goto LABEL_14;
      }
      (*(void (__stdcall **)(_DWORD, signed int))(*(_DWORD *)dword_56391C + 148))(
        *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v10 + 6404) + 96),
        -1);
    }
LABEL_14:
    v11[97] = 1;
  }
}
// 56391C: using guessed type int dword_56391C;

//----- (0047CEE0) --------------------------------------------------------
int __thiscall sub_47CEE0(_DWORD *this, int a2)
{
  int result; // eax
  _DWORD *v3; // esi
  int v4; // edi
  bool v5; // zf
  int v6; // ecx
  int v7; // ecx
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // ecx
  int v12; // edx
  int v13; // ecx
  int v14; // edx
  int v15; // ecx
  int v16; // eax
  int v17; // edx
  int v18; // edi
  int v19; // ecx
  int v20; // [esp+4h] [ebp-8h]
  int v21; // [esp+8h] [ebp-4h]

  result = (int)dword_563908;
  v3 = this;
  if ( this[16] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v4 = a2;
    sub_4018F2(a2);
    v5 = v3[101] == 0;
    v3[45] = 0;
    v3[46] = 0;
    v3[47] = 0;
    v3[44] = 0;
    v3[48] = -1;
    if ( !v5 || v3[102] )
    {
      sub_402063(-1, -1);
      v14 = v4 * v3[102];
      v3[42] += 40000 * v4 * v3[101];
      v3[43] += 40000 * v14;
      v15 = v3[42];
      v16 = 160000 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
      v17 = v3[43];
      v18 = v3[42];
      if ( v15 >= v16 )
        v18 = 160000 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 4);
      if ( v18 >= 0 )
      {
        if ( v15 < v16 )
          v16 = v3[42];
      }
      else
      {
        v16 = 0;
      }
      v3[42] = v16;
      result = 160000 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
      v19 = v17;
      if ( v17 >= result )
        v19 = 160000 * *(_DWORD *)(*((_DWORD *)dword_563908 + 1508) + 8);
      if ( v19 >= 0 )
      {
        if ( v17 < result )
          result = v17;
        v3[43] = result;
      }
      else
      {
        result = 0;
        v3[43] = 0;
      }
    }
    else
    {
      result = v3[99];
      if ( result < 0 )
      {
        result = v3[100];
        if ( result >= 0 )
        {
          if ( *((_DWORD *)dword_563908 + 1501) )
          {
            v11 = *((_DWORD *)dword_563908 + 1501);
            result = sub_4017AD(result, &a2, &v20, &v21);
            if ( result )
            {
              result = 10000 * a2;
              v12 = v21;
              v13 = 10000 * v20;
              v3[42] = 10000 * a2;
              v3[43] = v13;
              v3[48] = v12;
            }
          }
        }
      }
      else
      {
        if ( (unsigned int)result <= 0x1387 )
        {
          v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408);
          if ( v6 )
          {
            result = sub_401D57(v6);
            if ( result )
            {
              result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD *))(*(_DWORD *)result + 84))(
                         result,
                         v3 + 42,
                         v3 + 43,
                         v3 + 44);
              v3[48] = result;
            }
          }
        }
        if ( v3[97] )
        {
          v7 = *((_DWORD *)dword_563908 + 1504);
          v8 = sub_40105A(v3[99]);
          if ( !v8 || !*(_DWORD *)(v8 + 120) )
          {
            result = abs(sub_401D39(v10, v9) - v3[98]);
            if ( result <= 400 )
              return result;
            sub_4013A7(v3);
          }
          result = sub_401D39(v10, v9);
          v3[98] = result;
        }
      }
    }
  }
  return result;
}
// 40105A: using guessed type _DWORD __stdcall sub_40105A(_DWORD);
// 4013A7: using guessed type int __thiscall sub_4013A7(_DWORD);
// 4017AD: using guessed type _DWORD __stdcall sub_4017AD(_DWORD, _DWORD, _DWORD, _DWORD);
// 4018F2: using guessed type _DWORD __stdcall sub_4018F2(_DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);
// 402063: using guessed type _DWORD __stdcall sub_402063(_DWORD, _DWORD);

//----- (0047D1E0) --------------------------------------------------------
int __thiscall sub_47D1E0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  unsigned int v5; // eax
  int v6; // eax
  int v7; // eax

  v4 = this;
  v5 = this[99];
  if ( (v5 & 0x80000000) == 0 && v5 <= 0x1387 )
  {
    v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v5 + 12408);
    if ( v6 )
    {
      v7 = sub_401D57(v6);
      if ( v7 )
        v4[48] = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD *))(*(_DWORD *)v7 + 84))(
                   v7,
                   v4 + 42,
                   v4 + 43,
                   v4 + 44);
    }
  }
  return sub_401B77(a2, a3, a4);
}
// 401B77: using guessed type _DWORD __stdcall sub_401B77(_DWORD, _DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);

//----- (0047D280) --------------------------------------------------------
int __thiscall sub_47D280(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  unsigned int v5; // eax
  int v6; // eax
  int v7; // eax

  v4 = this;
  v5 = this[99];
  if ( (v5 & 0x80000000) == 0 && v5 <= 0x1387 )
  {
    v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * v5 + 12408);
    if ( v6 )
    {
      v7 = sub_401D57(v6);
      if ( v7 )
        v4[48] = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD *))(*(_DWORD *)v7 + 88))(
                   v7,
                   v4 + 42,
                   v4 + 43,
                   v4 + 44);
    }
  }
  return sub_401C99(a2, a3, a4);
}
// 401C99: using guessed type _DWORD __stdcall sub_401C99(_DWORD, _DWORD, _DWORD);
// 401D57: using guessed type int __thiscall sub_401D57(_DWORD);

//----- (0047D320) --------------------------------------------------------
signed int __thiscall sub_47D320(_DWORD *this)
{
  signed int result; // eax
  _DWORD *v2; // edi
  int v3; // ecx
  int v4; // edx
  _DWORD *v5; // ecx
  int v6; // ebx
  int v7; // esi
  unsigned int v8; // edx
  int v9; // edi
  __int64 v10; // rax
  signed __int64 v11; // rt2
  int v12; // edx
  int v13; // ecx

  result = (signed int)dword_563908;
  v2 = this;
  v3 = *((_DWORD *)dword_563908 + 6897);
  v4 = *(signed __int16 *)(v3 + 96);
  if ( v2[16] == v4 && (v2[99] >= 0 || v2[100] < 0) )
  {
    result = abs(sub_401D39(v3, v4) - v2[83]);
    if ( result <= 300 )
    {
      result = v2[16];
      if ( (unsigned int)result <= 0x1387 )
      {
        v5 = dword_563908;
        v6 = *(_DWORD *)(*((_DWORD *)dword_563908 + 1504) + 4 * result + 12408);
        if ( v6 )
        {
          v7 = v2[42] / 160000;
          v8 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v2[43]) >> 32) >> 16;
          v9 = v8 + (v8 >> 31);
          if ( v6 == *((_DWORD *)dword_563908 + 6897) )
          {
            v10 = sub_401D39(dword_563908, v8) / 20;
            v11 = v10 % 3;
            result = v10 / 3;
            if ( !(_DWORD)v11 )
              return result;
            v5 = dword_563908;
          }
          v12 = *((unsigned __int16 *)v5 + 83);
          v13 = v5[1505];
          result = sub_401A7D(v7, v9, 3, 3, v12, 1, 0);
        }
      }
    }
  }
  return result;
}
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (0047D460) --------------------------------------------------------
int __fastcall sub_47D460(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  int v6; // edx
  int v7; // ecx
  int v8; // ecx
  __int64 v9; // rax
  int v10; // eax
  int v11; // ecx
  int v12; // edi
  __int16 v14; // [esp+8h] [ebp-8h]
  __int16 v15; // [esp+Ah] [ebp-6h]
  __int16 v16; // [esp+Ch] [ebp-4h]

  v4 = a1;
  *(_DWORD *)(a1 + 332) = sub_401D39(a1, a2);
  v5 = 8 * *(_DWORD *)((char *)dword_563908 + 57478);
  v9 = sub_401D39(v7, v6) - *(_DWORD *)(v4 + 412);
  LODWORD(v9) = (HIDWORD(v9) ^ v9) - HIDWORD(v9);
  if ( (signed int)v9 > v5 || a4 )
  {
    v10 = sub_401D39(v8, HIDWORD(v9));
    v11 = *(_DWORD *)(v4 + 168);
    *(_DWORD *)(v4 + 412) = v10;
    v12 = *(_DWORD *)(v4 + 372);
    v14 = ((signed int)((unsigned __int64)(1759218605i64 * v11) >> 32) >> 12)
        + ((unsigned int)((unsigned __int64)(1759218605i64 * v11) >> 32) >> 31);
    LOWORD(v11) = *(_WORD *)(v4 + 396);
    v15 = (signed __int16)*(_DWORD *)(v4 + 172) / 10000;
    *(_DWORD *)(v4 + 376) = v12;
    v16 = v11;
    LODWORD(v9) = (*(int (__stdcall **)(_DWORD, _DWORD, __int16 *, signed int, int, int))(*(_DWORD *)dword_56391C + 24))(
                    *(_DWORD *)(v4 + 56),
                    0,
                    &v14,
                    6,
                    v4 + 340,
                    v12);
  }
  return v9;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 56391C: using guessed type int dword_56391C;

//----- (0047D5B0) --------------------------------------------------------
int sub_47D5B0()
{
  return 0;
}

//----- (0047D5C0) --------------------------------------------------------
int __thiscall sub_47D5C0(_DWORD *this)
{
  int result; // eax
  int v2; // edx
  int v3; // ecx
  int v4; // ecx
  int v5; // [esp+4h] [ebp-18h]
  int v6; // [esp+8h] [ebp-14h]
  int v7; // [esp+Ch] [ebp-10h]
  int v8; // [esp+10h] [ebp-Ch]
  int v9; // [esp+14h] [ebp-8h]
  int v10; // [esp+18h] [ebp-4h]

  result = *((_DWORD *)dword_563908 + 6897);
  if ( this[16] == *(signed __int16 *)(result + 96) )
  {
    v2 = this[42];
    v3 = this[43];
    v5 = v2 / 160000;
    v6 = v3 / 160000;
    v7 = 0;
    v8 = *(_DWORD *)((char *)dword_563908 + 57502);
    v9 = 240;
    v10 = 1;
    v4 = *((_DWORD *)dword_563908 + 1532);
    result = sub_4014C9(&v5);
  }
  return result;
}
// 4014C9: using guessed type _DWORD __stdcall sub_4014C9(_DWORD);

//----- (0047D6A0) --------------------------------------------------------
_DWORD *__thiscall sub_47D6A0(_DWORD *this, int a2, int a3, signed __int16 *a4)
{
  _DWORD *v4; // esi
  int v5; // edx

  v4 = this;
  sub_4013C5(a2, a3);
  v4[96] = a3;
  *v4 = &SpectatorVehicle::`vftable';
  v4[42] = 10000 * *a4;
  v5 = 10000 * a4[1];
  v4[48] = 0;
  v4[103] = 0;
  v4[98] = 0;
  v4[97] = 0;
  v4[101] = 0;
  v4[102] = 0;
  v4[43] = v5;
  v4[99] = -1;
  v4[100] = -1;
  return v4;
}
// 4013C5: using guessed type _DWORD __stdcall sub_4013C5(_DWORD, _DWORD);
// 516BB4: using guessed type void *SpectatorVehicle::`vftable';

//----- (0047D740) --------------------------------------------------------
void *__thiscall sub_47D740(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &SpectatorVehicle::`vftable';
  sub_4027B1(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);
// 516BB4: using guessed type void *SpectatorVehicle::`vftable';

//----- (0047D790) --------------------------------------------------------
signed int __thiscall sub_47D790(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  signed int result; // eax
  int v4; // edx
  int v5; // edi
  int v6; // ecx
  int v7; // eax
  int v8; // edx
  bool v9; // zf
  bool v10; // sf
  unsigned __int8 v11; // of
  __int64 v12; // rax
  int v13; // edx
  signed __int64 v14; // rt2

  v2 = this;
  sub_4018F2(a2);
  result = (signed int)Memory;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2[35])) >= 0
    && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v2[35]) )
  {
    v4 = (v2[100] - v2[48] + 240000) % 240000;
    v5 = v4;
    if ( v4 > 120000 )
      v5 = v4 - 240000;
    v6 = a2 * *(_DWORD *)(v2[96] + 1488);
    result = abs(v5);
    if ( v6 > result )
    {
      v2[48] = v2[100];
      return result;
    }
    v7 = v2[48];
    if ( v5 >= 0 )
    {
      v12 = v6 + v7;
      v14 = v12 % 240000;
      result = v12 / 240000;
      v13 = v14;
      v11 = __OFSUB__((_DWORD)v14, v2[101]);
      v10 = (signed int)v14 - v2[101] < 0;
      v2[48] = v14;
      if ( !(v10 ^ v11) )
        return result;
      result = v2[102];
      v11 = __OFSUB__(v13, result);
      v9 = v13 == result;
      v10 = v13 - result < 0;
    }
    else
    {
      v8 = (v7 - v6 + 2400000) % 240000;
      result = v2[101];
      v2[48] = v8;
      if ( v8 >= result )
        return result;
      v11 = __OFSUB__(v8, v2[102]);
      v9 = v8 == v2[102];
      v10 = v8 - v2[102] < 0;
    }
    if ( !((unsigned __int8)(v10 ^ v11) | v9) )
      v2[48] = result;
  }
  return result;
}
// 4018F2: using guessed type _DWORD __stdcall sub_4018F2(_DWORD);

//----- (0047D8A0) --------------------------------------------------------
int __thiscall sub_47D8A0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int result; // eax
  int v6; // ebx
  int v7; // ebp
  _BYTE *v8; // ebx
  int v9; // ecx
  int v10; // eax
  int v11; // edi
  int v12; // ecx
  unsigned int v13; // edi
  int v14; // edi
  int v15; // edx
  int v16; // ecx
  int v17; // ebp
  int v18; // eax
  int v19; // ebx
  int v20; // eax
  int v21; // edi
  int v22; // ST20_4
  int v23; // eax
  int v24; // eax
  int v25; // edi
  int v26; // edx
  int v27; // ecx
  int v28; // ebx
  int v29; // eax
  int v30; // ebp
  int v31; // eax
  int v32; // ST20_4
  int v33; // eax
  int v34; // edi
  int v35; // ebx
  int v36; // eax
  int v37; // edi
  int v38; // ebx
  signed int v39; // ecx
  int v40; // [esp+4h] [ebp-124h]
  int v41; // [esp+4h] [ebp-124h]
  int v42; // [esp+8h] [ebp-120h]
  int v43; // [esp+Ch] [ebp-11Ch]
  int v44; // [esp+10h] [ebp-118h]
  int v45; // [esp+14h] [ebp-114h]
  int v46; // [esp+14h] [ebp-114h]
  int v47; // [esp+1Ch] [ebp-10Ch]
  int v48; // [esp+20h] [ebp-108h]
  char Dest; // [esp+24h] [ebp-104h]

  v4 = this;
  result = this[81];
  v45 = this[81];
  if ( result )
  {
    v48 = this[42];
    v40 = this[43];
    v6 = v48 / 10000 - a3;
    v42 = v48 / 10000 - a3;
    if ( dword_53A7C4 )
    {
      v6 = v48 / 10000 - a3;
      result = (signed int)(7
                          * (((signed int)((unsigned __int64)(1759218605i64 * (signed int)this[44]) >> 32) >> 12)
                           + *(signed __int16 *)(this[18] + 1044)
                           + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)this[44]) >> 32) >> 31)))
             / 10;
      v43 = (signed int)(7
                       * (((signed int)((unsigned __int64)(1759218605i64 * (signed int)this[44]) >> 32) >> 12)
                        + *(signed __int16 *)(this[18] + 1044)
                        + ((unsigned int)((unsigned __int64)(1759218605i64 * (signed int)this[44]) >> 32) >> 31)))
          / 10;
    }
    else
    {
      LOWORD(v43) = 0;
      result = 0;
    }
    v7 = v40 / 10000 - a4 - result;
    v44 = v40 / 10000 - a4 - result;
    if ( v6 >= -100 )
    {
      v8 = dword_563908;
      result = *((_DWORD *)dword_563908 + 3111) + 100;
      if ( v42 <= result
        && v7 >= -100
        && v7 <= *((_DWORD *)dword_563908 + 3112) + 100
        && (this[84] <= 0 || !(*((_BYTE *)dword_563908 + 10820) & 8)) )
      {
        v9 = this[36];
        result = (v48 / 10000 - *((_DWORD *)dword_563908 + 62)) * (v48 / 10000 - *((_DWORD *)dword_563908 + 62))
               + (v40 / 10000 - *((_DWORD *)dword_563908 + 63)) * (v40 / 10000 - *((_DWORD *)dword_563908 + 63));
        if ( v9 <= *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 20) )
          v9 = *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 20);
        if ( v4[99] == *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100) || result < v9 * v9 )
        {
          v10 = v45 / 200;
          v47 = v45 / 200;
          if ( !v4[108] && v10 > 2 )
          {
            v47 = 2;
            v10 = 2;
          }
          v11 = dword_538800[v10];
          if ( v11 == 3 )
          {
            v12 = *((_DWORD *)dword_563908 + 1508);
            if ( v8[480 * sub_40137F(v48 / 160000, v40 / 160000) + 59595] )
              v11 = 9;
          }
          v13 = v11 | 0x80000100;
          v41 = v13;
          if ( v4[14] == *((_DWORD *)v8 + 2692) )
          {
            v41 = v13 | 0x800;
            (*(void (__thiscall **)(_DWORD *))(*v4 + 188))(v4);
          }
          v14 = v4[97];
          v46 = v4[98];
          if ( v14 )
          {
            v17 = sub_401C80(v4[48], *(signed __int16 *)(v14 + 176));
            v18 = v4[96];
            v19 = *(signed __int16 *)(v18 + 5008);
            if ( *(_BYTE *)(v14 + 234) == 70 )
            {
              if ( !*(_WORD *)(v18 + 5008) )
                v19 = *(signed __int16 *)(v14 + 170);
              v20 = sub_401D39(v16, v15) - v4[40];
              if ( v20 >= v19 || *(_WORD *)(v14 + 178) <= 1 )
                v21 = v17 * *(signed __int16 *)(v14 + 178);
              else
                v21 = (*(signed __int16 *)(v14 + 178) - 1) * (v20 % v19) / v19
                    + v17 * *(signed __int16 *)(v14 + 178)
                    + 1;
            }
            else
            {
              v22 = *(signed __int16 *)(v18 + 5008);
              v23 = sub_401D39(v16, v15);
              v21 = sub_401B59(v17, v23, v22);
            }
            v24 = sub_4015FF(*(_DWORD *)(v4[96] + 5004), v4[52]);
            sub_4A50B0(v4[97], v21, a2, v42, v44, v41, v24, v43, v4 + 53, 0);
            LOWORD(v7) = v44;
            v46 = v4[97];
          }
          v25 = v4[98];
          if ( v25 )
          {
            v28 = sub_401C80(v4[48], *(signed __int16 *)(v25 + 176));
            v29 = v4[96];
            v30 = *(signed __int16 *)(v29 + 5068);
            if ( *(_BYTE *)(v25 + 234) == 70 )
            {
              if ( !*(_WORD *)(v29 + 5068) )
                v30 = *(signed __int16 *)(v25 + 170);
              v31 = sub_401D39(v27, v26) - v4[40];
              if ( v31 >= v30 || *(_WORD *)(v25 + 178) <= 1 )
                v7 = v28 * *(signed __int16 *)(v25 + 178);
              else
                v7 = (*(signed __int16 *)(v25 + 178) - 1) * (v31 % v30) / v30 + v28 * *(signed __int16 *)(v25 + 178) + 1;
            }
            else
            {
              v32 = *(signed __int16 *)(v29 + 5068);
              v33 = sub_401D39(v27, v26);
              v7 = sub_401B59(v28, v33, v32);
            }
            v34 = v4[96];
            v35 = sub_40212B(*(signed __int16 *)(v34 + 1540));
            v36 = sub_4015FF(*(_DWORD *)(v34 + 5064), v4[52]);
            sub_4A50B0(v4[98], v7, a2, v42, v44 - v35, v41, v36, v35 + v43, v4 + 53, 0);
            LOWORD(v7) = v44;
          }
          result = sub_402216(a2, a3, a4);
          if ( v46 && *(_WORD *)(v4[18] + 1036) == 1 )
          {
            v37 = *(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v4[35]);
            v38 = abs(*(signed __int16 *)(*(_DWORD *)(v46 + 360) + 6)) / 2;
            sprintf(&Dest, "hp=%d", (v37 + 999) / 1000);
            v39 = 2;
            if ( v37 >= 1000 * *(signed __int16 *)(v4[96] + 1504) )
            {
              if ( v37 < 1000 * *(_DWORD *)(v4[18] + 1080) / 2 )
                v39 = 4;
            }
            else
            {
              v39 = 1;
            }
            result = sub_40145B(&Dest, v39, v42, v7 + v38, dword_538800[v47]);
          }
        }
      }
    }
  }
  return result;
}
// 40137F: using guessed type _DWORD __stdcall sub_40137F(_DWORD, _DWORD);
// 40145B: using guessed type _DWORD __stdcall sub_40145B(_DWORD, _DWORD, __int16, __int16, _DWORD);
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);
// 401C80: using guessed type _DWORD __cdecl sub_401C80(_DWORD, _DWORD);
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 40212B: using guessed type _DWORD __cdecl sub_40212B(_DWORD);
// 402216: using guessed type _DWORD __stdcall sub_402216(_DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0047DF40) --------------------------------------------------------
int __thiscall sub_47DF40(_DWORD *this)
{
  int result; // eax
  int v2; // ebx
  int v3; // ebp
  _DWORD *v4; // edi
  int v5; // edx
  int v6; // esi
  signed int v7; // ecx
  int v8; // ebx
  int v9; // ebp
  int v10; // edx
  _DWORD *v11; // esi
  int v12; // eax
  int v13; // eax
  int v14; // ecx
  _DWORD *v15; // [esp+4h] [ebp-8h]

  result = (int)Memory;
  if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) >= 0
    && *(_DWORD *)Memory != *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35]) )
  {
    result = this[18];
    v15 = (_DWORD *)this[18];
    if ( *(_DWORD *)(result + 1164) )
    {
      if ( this[81] )
      {
        v2 = this[42];
        v3 = this[43];
        v4 = dword_563908;
        result = (v2 / 10000 - *((_DWORD *)dword_563908 + 62)) * (v2 / 10000 - *((_DWORD *)dword_563908 + 62))
               + (v3 / 10000 - *((_DWORD *)dword_563908 + 63)) * (v3 / 10000 - *((_DWORD *)dword_563908 + 63));
        v5 = this[37];
        if ( v5 <= *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 24) )
          v5 = *(_DWORD *)(*((_DWORD *)dword_563908 + 78) + 24);
        v6 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
        v7 = this[99];
        if ( v7 != v6 )
        {
          if ( result >= v5 * v5 )
            return result;
          v6 = *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 100);
        }
        v8 = v2 / 160000;
        v9 = v3 / 160000;
        v10 = 0;
        if ( *((_DWORD *)dword_563908 + 6897) )
          v10 = v6;
        v11 = (char *)dword_563908 + 618 * v7 + 77920;
        result = (int)v15;
        if ( v7 == v10 )
        {
          if ( !v15[3] )
            return result;
          v12 = v15[5];
        }
        else
        {
          if ( !v15[4] )
            return result;
          v12 = v15[6];
        }
        if ( v12 == -1 )
        {
          if ( v7 < 50
            && (*((_BYTE *)dword_563908 + 618 * v7 + 77922)
             || *((_BYTE *)dword_563908 + 618 * v7 + 77921)
             || *(_BYTE *)v11) )
          {
            v13 = (unsigned __int16)sub_40223E(dword_576828, *v11);
          }
          else if ( v7 == v10 )
          {
            v13 = *((unsigned __int16 *)dword_563908 + 117);
          }
          else
          {
            v13 = *((unsigned __int16 *)dword_563908 + 118);
          }
        }
        else
        {
          v13 = (unsigned __int16)sub_40113B(dword_576828, (v12 >> 16) & 0xFF, BYTE1(v12), (unsigned __int8)v12);
        }
        v14 = v4[1505];
        result = sub_401A7D(v8, v9, 2, 2, v13, 1, 0);
      }
    }
  }
  return result;
}
// 40113B: using guessed type _DWORD __cdecl sub_40113B(_DWORD, _DWORD, _DWORD, _DWORD);
// 401A7D: using guessed type _DWORD __stdcall sub_401A7D(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (0047E170) --------------------------------------------------------
int __thiscall sub_47E170(_DWORD *this, signed __int16 *a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // eax
  _DWORD *v5; // eax
  int v6; // ecx
  int v7; // edx
  int result; // eax
  int v9; // [esp+8h] [ebp-4h]

  v3 = this;
  v4 = this[99];
  this[42] = 10000 * a2[2];
  this[43] = 10000 * a2[3];
  v9 = v4;
  this[44] = 10000 * a2[4];
  this[48] = 1000 * *((unsigned __int8 *)a2 + 16);
  this[100] = 1000 * *((unsigned __int8 *)a2 + 17);
  this[99] = a2[1];
  if ( this[14] != *(signed __int16 *)(*((_DWORD *)dword_563908 + 6897) + 96) )
  {
    v5 = Memory;
    v6 = 1000 * *a2;
    v7 = v3[35];
    v5[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v7);
    *(_DWORD *)(v5[1] + 4 * v7) = v6 ^ *v5;
    v5[4] ^= *(_DWORD *)(v5[1] + 4 * v7);
  }
  result = v9;
  if ( v9 != v3[99] )
    result = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v3 + 4))(v3, 0);
  v3[108] = *((_DWORD *)a2 + 3);
  return result;
}

//----- (0047E2B0) --------------------------------------------------------
int __thiscall sub_47E2B0(_DWORD *this, void *Src, int a3)
{
  int result; // eax

  result = a3;
  this[93] = a3;
  if ( a3 > 0 )
  {
    if ( a3 > 16 )
      result = 16;
    result = (int)memcpy(this + 85, Src, 2 * result);
  }
  return result;
}

//----- (0047E2F0) --------------------------------------------------------
int __thiscall sub_47E2F0(_DWORD *this, signed int a2, int a3, int a4, signed __int16 *a5, int a6, int a7)
{
  _DWORD *v7; // esi
  int v8; // edx
  int v9; // ecx
  signed int v10; // ebx
  int v11; // edx
  int v12; // ecx
  int v13; // eax
  int v14; // ST34_4
  int v15; // ST30_4
  _DWORD *v16; // eax
  int v17; // ecx
  int v18; // edx
  int result; // eax
  bool v20; // zf
  int v21; // [esp+10h] [ebp-4h]

  v7 = this;
  v21 = this[99];
  (*(void (__thiscall **)(_DWORD *, signed __int16 *, unsigned int))(*this + 240))(
    this,
    a5 + 10,
    (unsigned int)(a6 - 20) >> 1);
  v7[103] = *(_DWORD *)a5;
  v7[104] = *((_DWORD *)a5 + 1);
  v8 = *((_DWORD *)a5 + 2);
  v7[105] = v8;
  v7[106] = *((_DWORD *)a5 + 3);
  v9 = *((_DWORD *)a5 + 4);
  v7[107] = v9;
  v10 = a2;
  v7[83] = sub_401D39(v9, v8);
  if ( a2 >= 0 && a2 <= 2000 )
  {
    if ( a2 > 80 )
      v10 = 80;
  }
  else
  {
    v10 = 30;
  }
  if ( a4 > 0 )
  {
    v13 = sub_401D39(v12, v11);
    v14 = v7[99];
    v15 = v7[14];
    v7[40] = v13;
    sub_402590(
      a4,
      v10,
      a5[2],
      a5[3],
      a5[4] + *(signed __int16 *)(v7[96] + 1030),
      *(signed __int16 *)(v7[96] + 1028),
      0,
      0,
      0,
      *((unsigned __int8 *)a5 + 16),
      0,
      1,
      v15,
      v14,
      a7,
      0,
      0,
      0);
  }
  v16 = Memory;
  v17 = 1000 * *a5;
  v18 = v7[35];
  v16[4] ^= *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * v18);
  *(_DWORD *)(v16[1] + 4 * v18) = v17 ^ *v16;
  v16[4] ^= *(_DWORD *)(v16[1] + 4 * v18);
  v7[48] = 1000 * *((unsigned __int8 *)a5 + 16);
  v7[100] = 1000 * *((unsigned __int8 *)a5 + 17);
  result = 0;
  v7[45] = 0;
  v7[46] = 0;
  v7[47] = 0;
  v7[42] = 10000 * a5[2];
  v7[43] = 10000 * a5[3];
  v7[44] = 10000 * a5[4];
  v7[99] = a5[1];
  v20 = v21 == v7[99];
  v7[108] = *((_DWORD *)a5 + 3);
  if ( !v20 )
    result = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v7 + 4))(v7, 0);
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 402590: using guessed type _DWORD __stdcall sub_402590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047E550) --------------------------------------------------------
void *__thiscall sub_47E550(_DWORD *this)
{
  _DWORD *v1; // esi
  void *result; // eax
  int v3; // eax
  unsigned int v4; // edx
  char Dest; // [esp+4h] [ebp-104h]

  v1 = this;
  if ( this[108] )
    return (void *)sub_401B40();
  result = dword_563908;
  if ( !*((_BYTE *)dword_563908 + 2220) )
  {
    if ( (*(_DWORD *)Memory ^ *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35])) < 0
      || *(_DWORD *)Memory == *(_DWORD *)(*((_DWORD *)Memory + 1) + 4 * this[35]) )
    {
      v3 = sub_402617(0xBu);
      sprintf(&Dest, "%s (%s)", v1[18] + 980, v3);
    }
    else
    {
      sprintf(&Dest, "%s (DISABLED)", this[18] + 980);
    }
    v4 = (signed int)((unsigned __int64)(1759218605i64 * (signed int)v1[42]) >> 32) >> 12;
    result = (void *)sub_40243C(&Dest, v4 + (v4 >> 31), v1[43] / 10000);
  }
  return result;
}
// 401B40: using guessed type int sub_401B40(void);
// 40243C: using guessed type _DWORD __stdcall sub_40243C(_DWORD, _DWORD, _DWORD);

//----- (0047E6A0) --------------------------------------------------------
_DWORD *__thiscall sub_47E6A0(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  signed __int16 *v5; // eax
  signed __int16 *v6; // eax
  int v7; // edi
  int v8; // ebx
  _DWORD *result; // eax

  v4 = this;
  sub_4013C5(a2, a3);
  *v4 = &off_516D3C;
  v4[108] = 1;
  v4[96] = a3;
  if ( a4 )
    sub_4024F5(a4, 20);
  else
    sub_401AFA(v4);
  v5 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 4952), v4[96] + 4976);
  v4[97] = v5;
  if ( v5 && v5[97] == 1 )
    sub_4A4520(v5, *((_DWORD *)dword_563918 + 2213));
  v6 = (signed __int16 *)sub_4B3AF0(*((_DWORD **)dword_563908 + 1502), (char *)(v4[96] + 5012), v4[96] + 5036);
  v4[98] = v6;
  if ( v6 && v6[97] == 1 )
    sub_4A4520(v6, *((_DWORD *)dword_563918 + 2213));
  v7 = v4[96];
  v8 = (240000 * *(signed __int16 *)(v7 + 1492) / 360 + 240000) % 240000;
  v4[101] = v8;
  result = v4;
  v4[102] = (v8 + 240000 * *(signed __int16 *)(v7 + 1494) / 360) % 240000;
  return result;
}
// 4013C5: using guessed type _DWORD __stdcall sub_4013C5(_DWORD, _DWORD);
// 401AFA: using guessed type int __thiscall sub_401AFA(_DWORD);
// 4024F5: using guessed type _DWORD __stdcall sub_4024F5(_DWORD, _DWORD);
// 516D3C: using guessed type int (__thiscall *off_516D3C)(void *Memory, char);

//----- (0047E890) --------------------------------------------------------
void *__thiscall sub_47E890(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &off_516D3C;
  sub_4027B1(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);
// 516D3C: using guessed type int (__thiscall *off_516D3C)(void *Memory, char);

//----- (0047E8E0) --------------------------------------------------------
int __thiscall sub_47E8E0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  void (__stdcall ***v3)(signed int); // ecx
  int v4; // ebx
  int v5; // ebp
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // ST20_4
  int v9; // ST1C_4
  int v10; // eax
  int v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // ST20_4
  void (__stdcall *v15)(_DWORD *); // eax
  int v16; // ecx
  int v17; // edx
  int v18; // ebx
  int v19; // eax
  char *v20; // edi
  int v21; // ebp
  char v22; // bl
  int v23; // eax
  char v24; // cl
  bool v25; // zf
  signed int v26; // eax
  int v27; // ecx
  char v28; // bl
  int v29; // eax
  int v30; // eax
  void *v31; // edi
  int v32; // eax
  int (__thiscall **v33)(_DWORD *, _DWORD, _DWORD); // edx
  int (__thiscall *v34)(_DWORD *, _DWORD, _DWORD); // eax
  signed int v36; // [esp+14h] [ebp-3Ch]
  int v37; // [esp+18h] [ebp-38h]
  int v38; // [esp+1Ch] [ebp-34h]
  signed int v39; // [esp+20h] [ebp-30h]
  char *v40; // [esp+24h] [ebp-2Ch]
  int v41; // [esp+28h] [ebp-28h]
  int v42; // [esp+2Ch] [ebp-24h]
  int v43; // [esp+30h] [ebp-20h]
  int v44; // [esp+34h] [ebp-1Ch]
  int v45; // [esp+38h] [ebp-18h]
  int v46; // [esp+3Ch] [ebp-14h]
  int v47; // [esp+40h] [ebp-10h]
  int v48; // [esp+4Ch] [ebp-4h]
  char v49; // [esp+54h] [ebp+4h]
  void *v50; // [esp+54h] [ebp+4h]

  v2 = this;
  if ( a2 )
  {
    this[3] = *a2;
    this[4] = a2[1];
    this[5] = a2[2];
    this[6] = a2[3];
  }
  v3 = (void (__stdcall ***)(signed int))this[40012];
  if ( v3 )
  {
    (**v3)(1);
    v2[40012] = 0;
  }
  v4 = v2[5] - v2[3];
  v5 = v2[6] - v2[4];
  v2[40013] = 0;
  v6 = operator new(0x420u);
  v48 = 0;
  if ( v6 )
    v7 = sub_49A5F0(v6, 1, v2 + 3, 0);
  else
    v7 = 0;
  v2[40012] = v7;
  v8 = *((signed __int16 *)dword_563908 + 15401);
  v9 = *((signed __int16 *)dword_563908 + 15400);
  v48 = -1;
  v10 = sub_402617(0x23u);
  sub_401F32(&v41, &v44, v10, v9, v8);
  v11 = v2[5] - v41 - 28;
  v12 = operator new(0x18u);
  v48 = 1;
  if ( v12 )
    v13 = sub_49A490(v12, v11, 11, v41, v44, 1);
  else
    v13 = 0;
  v14 = v13;
  v15 = *(void (__stdcall **)(_DWORD *))(*(_DWORD *)v2[40012] + 16);
  v48 = -1;
  v15(v14);
  v16 = *((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  v17 = *(_DWORD *)(v16 + 2052);
  v43 = v4 - 40;
  v18 = *(signed __int16 *)(v17 + 174);
  v19 = (v5 - 55) / v18;
  v37 = v16;
  v47 = *(signed __int16 *)(v17 + 174);
  if ( v19 < 1 )
    v19 = 1;
  v20 = (char *)v2[8];
  v21 = 0;
  v2[40016] = v19;
  v2[40009] = 0;
  if ( v20 )
  {
    v2[9] = v20;
    v22 = 9;
    LOBYTE(v2[4 * v2[40009] + 11]) = 9;
    HIWORD(v2[4 * v2[40009] + 10]) = 0;
    v2[4 * (v2[40009] + 3)] = 0;
    v23 = *(_DWORD *)(v16 + 2060) + *(signed __int16 *)(*(_DWORD *)(v16 + 2052) + 168);
    v24 = *v20;
    v25 = *v20 == 0;
    v39 = 0;
    v36 = 0;
    v38 = 0;
    v40 = 0;
    v49 = 9;
    v42 = 0;
    v45 = v23;
    if ( !v25 )
    {
      while ( 1 )
      {
        v26 = v2[40009];
        if ( v26 >= 9999 )
          goto LABEL_57;
        if ( v24 != 126 )
          break;
        v24 = (v20++)[1];
        if ( v24 == 126 )
          break;
        if ( toupper(v24) == 66 )
        {
          if ( v22 < 7 )
            v22 += 7;
          else
            v22 -= 7;
          ++v20;
          goto LABEL_56;
        }
        if ( toupper(*v20) == 70 )
        {
          ++v20;
          v36 = 1;
        }
        else
        {
          if ( toupper(*v20) != 80 )
          {
            if ( isdigit(*v20) )
            {
              v27 = 7 * (v22 / 7);
              v28 = *v20 - 48;
              if ( v28 < 0 || v28 >= 7 )
                v28 = 9;
              v22 = v27 + v28;
            }
LABEL_32:
            ++v20;
            goto LABEL_56;
          }
          ++v20;
          v36 = 0;
        }
LABEL_56:
        v24 = *v20;
        if ( !*v20 )
          goto LABEL_57;
      }
      if ( v24 == 10 )
      {
        v38 = 0;
        LOWORD(v2[4 * v26 + 10]) = (_WORD)v20 - LOWORD(v2[4 * v26 + 9]);
        v2[4 * ++v2[40009] + 9] = v20;
        LOBYTE(v2[4 * v2[40009] + 11]) = v22;
        HIWORD(v2[4 * v2[40009] + 10]) = 0;
        v2[4 * (v2[40009] + 3)] = v36;
        v21 = 0;
        v39 = 0;
        v40 = 0;
LABEL_55:
        ++v20;
        goto LABEL_56;
      }
      if ( v24 == 9 )
      {
        if ( v36 )
        {
          if ( !v39 )
            v38 += *(_DWORD *)(v37 + 3096) + 4 * *(_DWORD *)(v37 + 3096);
          v21 += *(_DWORD *)(v37 + 3096) + 4 * *(_DWORD *)(v37 + 3096);
        }
        else
        {
          if ( !v39 )
          {
            v29 = *(signed __int16 *)(v37 + 2 * (1322 - *(_DWORD *)(v37 + 2060)));
            v38 += v29 + 4 * v29;
          }
          v30 = *(signed __int16 *)(v37 + 2 * (1322 - *(_DWORD *)(v37 + 2060)));
          v21 += v30 + 4 * v30;
        }
        goto LABEL_55;
      }
      if ( v24 < 32 )
        goto LABEL_55;
      v46 = v24;
      if ( v24 > v45 )
        goto LABEL_55;
      v39 = 1;
      if ( v24 == 32 )
      {
        v40 = v20;
        v49 = v22;
        v42 = v36;
      }
      if ( v36 )
        v21 += *(_DWORD *)(v37 + 3096);
      else
        v21 += *(signed __int16 *)(v37 + 2 * (v46 - *(_DWORD *)(v37 + 2060)) + 2580);
      if ( v21 > v43 )
      {
        if ( v40 )
        {
          v22 = v49;
          v20 = v40 + 1;
          v36 = v42;
        }
        else
        {
          --v20;
        }
        v21 = v38;
        v39 = 0;
        LOWORD(v2[4 * v26 + 10]) = (_WORD)v20 - LOWORD(v2[4 * v26 + 9]);
        v2[4 * ++v2[40009] + 9] = v20;
        LOBYTE(v2[4 * v2[40009] + 11]) = v22;
        HIWORD(v2[4 * v2[40009] + 10]) = v38;
        v40 = 0;
        v2[4 * (v2[40009] + 3)] = v36;
        goto LABEL_56;
      }
      goto LABEL_32;
    }
LABEL_57:
    v18 = v47;
    LOWORD(v2[4 * v2[40009] + 10]) = (_WORD)v20 - LOWORD(v2[4 * v2[40009] + 9]);
    ++v2[40009];
  }
  v31 = (void *)v2[40014];
  if ( v31 )
  {
    sub_402040(v2[40014]);
    j__free(v31);
    v2[40014] = 0;
  }
  v50 = operator new(0x7Cu);
  v48 = 2;
  if ( v50 )
    v32 = sub_401BAE(
            *((_DWORD *)dword_563908 + 503),
            0,
            v2 + 2,
            v2[7],
            0,
            v2[3] + v43 + 12,
            v2[4] + 43,
            v18 * v2[40016],
            1);
  else
    v32 = 0;
  v33 = (int (__thiscall **)(_DWORD *, _DWORD, _DWORD))v2[2];
  v2[40014] = v32;
  v34 = *v33;
  v48 = -1;
  return v34(v2 + 2, 0, 0);
}
// 401BAE: using guessed type _DWORD __stdcall sub_401BAE(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 402040: using guessed type int __thiscall sub_402040(_DWORD);

//----- (0047F010) --------------------------------------------------------
signed int sub_47F010()
{
  return 6;
}

//----- (0047F020) --------------------------------------------------------
int __thiscall sub_47F020(_DWORD *this, int a2, int a3)
{
  int v3; // edx
  int v4; // esi
  int v5; // edi
  int v6; // eax
  int v7; // ebx
  int v8; // edx
  int v9; // ecx

  this[40009] += a3;
  v3 = this[40009];
  v4 = this[40007];
  v5 = this[40014];
  v6 = this[40007] - v5;
  v7 = this[40009];
  if ( v3 >= v6 )
    v7 = this[40007] - v5;
  if ( v7 >= 0 )
  {
    if ( v3 < v6 )
      v6 = this[40009];
  }
  else
  {
    v6 = 0;
  }
  v8 = v5 + v6;
  this[40009] = v6;
  if ( v4 < v5 + v6 )
    v8 = v4;
  v9 = this[40012];
  return sub_401C67(0, v4, v6, v8, 0);
}
// 401C67: using guessed type _DWORD __stdcall sub_401C67(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047F0A0) --------------------------------------------------------
int __thiscall sub_47F0A0(_DWORD *this)
{
  _DWORD *v1; // ebx
  int *v2; // esi
  int v3; // eax
  int v4; // edx
  __int16 v5; // di
  __int16 v6; // dx
  int v7; // ST18_4
  int v8; // ST10_4
  int v9; // ST0C_4
  int v10; // eax
  int v11; // ecx
  int v12; // esi
  int v13; // eax
  int v14; // esi
  int v15; // ecx
  int v16; // eax
  int v17; // ecx
  int v18; // esi
  int v19; // eax
  signed __int16 *v20; // ecx
  char *v21; // ebp
  signed int v22; // edx
  int v23; // edi
  int v24; // esi
  char v25; // al
  int v26; // ecx
  int v27; // esi
  int v28; // eax
  bool v29; // zf
  int v31; // [esp-10h] [ebp-64h]
  _DWORD *v32; // [esp+14h] [ebp-40h]
  int v33; // [esp+18h] [ebp-3Ch]
  signed int v34; // [esp+1Ch] [ebp-38h]
  int v35; // [esp+20h] [ebp-34h]
  int v36; // [esp+24h] [ebp-30h]
  int v37; // [esp+28h] [ebp-2Ch]
  int v38; // [esp+2Ch] [ebp-28h]
  unsigned int v39; // [esp+30h] [ebp-24h]
  int v40; // [esp+34h] [ebp-20h]
  char v41; // [esp+38h] [ebp-1Ch]
  char v42; // [esp+3Ch] [ebp-18h]
  char v43; // [esp+40h] [ebp-14h]
  int v44; // [esp+44h] [ebp-10h]
  int v45; // [esp+48h] [ebp-Ch]
  int v46; // [esp+4Ch] [ebp-8h]
  int v47; // [esp+50h] [ebp-4h]

  v1 = this;
  v2 = this + 3;
  sub_401BE0(this[7], this + 3);
  (*(void (__stdcall **)(_DWORD *))(*(_DWORD *)v1[7] + 64))(v1 + 3);
  v3 = sub_402617(0x23u);
  sub_401F32(&v37, &v41, v3, 3, 3);
  v4 = v1[40013];
  if ( v4 == 1 )
    v5 = *((_WORD *)dword_563908 + 15404);
  else
    v5 = *((_WORD *)dword_563908 + 15402);
  if ( v4 == 1 )
    v6 = *((_WORD *)dword_563908 + 15403);
  else
    v6 = *((_WORD *)dword_563908 + 15401);
  v7 = v1[5] - v37 - 28;
  v8 = v6;
  v9 = *((signed __int16 *)dword_563908 + 15400);
  v10 = sub_402617(0x23u);
  sub_4011E0(v1[7], v10, v9, v8, v5, v7, 11);
  v11 = *v2;
  v12 = v1[5];
  v13 = v1[4] + 43;
  v44 = v11 + 12;
  v38 = v11 + 12;
  v14 = v12 - v11;
  v15 = v1[7];
  v33 = v13;
  v46 = v14 + v44 - 24;
  v45 = v13 - 3;
  v47 = v13 - 3 + 2;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v15 + 40))(*((unsigned __int16 *)dword_563908 + 76), &v44);
  v32 = (_DWORD *)*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516);
  v16 = v1[40011] + v1[40016];
  v17 = v1[40009];
  v40 = *(signed __int16 *)(*(_DWORD *)(*((_DWORD *)dword_563908 + *((_DWORD *)dword_563918 + 2342) + 1516) + 2052) + 174);
  v18 = v17;
  if ( v17 >= v16 )
    v18 = v16;
  (*(void (__stdcall **)(char *, char *))(*(_DWORD *)v1[7] + 92))(&v43, &v42);
  v19 = v1[40011];
  if ( v19 < v18 )
  {
    v20 = (signed __int16 *)&v1[4 * v19 + 10];
    v35 = (int)&v1[4 * v19 + 10];
    v36 = v18 - v19;
    do
    {
      v21 = (char *)*((_DWORD *)v20 - 1);
      v22 = *((_DWORD *)v20 + 2);
      v23 = v38 + v20[1];
      v24 = *((char *)v20 + 4);
      v39 = (unsigned int)&v21[*v20];
      v34 = v22;
      if ( (unsigned int)v21 < v39 )
      {
        while ( 1 )
        {
          v25 = *v21;
          if ( *v21 != 126 || (v25 = v21[1], ++v21, v25 == 126) )
          {
            if ( v25 < 32 || v25 >= 127 )
            {
              if ( v25 == 9 )
              {
                if ( v22 )
                  v28 = v32[774];
                else
                  v28 = *((signed __int16 *)v32 + 1322 - v32[515]);
                v23 += v28 + 4 * v28;
              }
            }
            else
            {
              v31 = v1[7];
              v23 += v22 ? sub_49B190(v32, v25, v24, v31, v23, v33, 3, 0) : sub_49B100(
                                                                              v32,
                                                                              v25,
                                                                              v24,
                                                                              v31,
                                                                              v23,
                                                                              v33,
                                                                              3,
                                                                              0);
            }
          }
          else if ( toupper(v25) == 66 )
          {
            if ( v24 < 7 )
              v24 += 7;
            else
              v24 -= 7;
          }
          else if ( toupper(*v21) == 70 )
          {
            v34 = 1;
          }
          else if ( toupper(*v21) == 80 )
          {
            v34 = 0;
          }
          else if ( isdigit(*v21) )
          {
            v26 = 7 * (v24 / 7);
            v27 = *v21 - 48;
            if ( v27 < 0 || v27 >= 7 )
              v27 = 9;
            v24 = v26 + v27;
          }
          if ( (unsigned int)++v21 >= v39 )
            break;
          v22 = v34;
        }
        v20 = (signed __int16 *)v35;
      }
      v33 += v40;
      v20 += 8;
      v29 = v36-- == 1;
      v35 = (int)v20;
    }
    while ( !v29 );
  }
  (*(void (**)(void))(*(_DWORD *)v1[7] + 96))();
  (*(void (**)(void))(*(_DWORD *)v1[40014] + 40))();
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int, signed int))(*(_DWORD *)v1[7] + 68))(
           v1[7],
           0,
           0,
           -1,
           -1);
}
// 4011E0: using guessed type _DWORD __stdcall sub_4011E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 401BE0: using guessed type _DWORD __stdcall sub_401BE0(_DWORD, _DWORD);
// 401F32: using guessed type _DWORD __stdcall sub_401F32(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (0047F4C0) --------------------------------------------------------
int __thiscall sub_47F4C0(char *this, int a2, int a3)
{
  char *v3; // esi
  int result; // eax
  int v5; // eax

  v3 = this;
  if ( GetKeyState(16) & 0x8000 )
  {
    if ( a2 == 38 )
    {
      result = (**((int (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, -5);
    }
    else
    {
      result = a2 - 40;
      if ( a2 == 40 )
        result = (**((int (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, 5);
    }
  }
  else if ( a2 == 27 )
  {
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
    if ( operator new(0x2Cu) )
      v5 = sub_401591(*((_DWORD *)dword_563908 + 89), v3 + 8);
    else
      v5 = 0;
    *((_DWORD *)dword_563908 + 1535) = v5;
    result = sub_401154(*((_DWORD *)v3 + 40009));
    if ( v3 != (char *)4 )
      result = (*(int (__stdcall **)(signed int))(*((_DWORD *)v3 - 1) + 4))(1);
  }
  else if ( a2 == 38 )
  {
    result = (**((int (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, -1);
  }
  else
  {
    result = a2 - 40;
    if ( a2 == 40 )
      result = (**((int (__thiscall ***)(int, _DWORD, signed int))v3 + 1))((int)(v3 + 4), 0, 1);
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (0047F6A0) --------------------------------------------------------
int __thiscall sub_47F6A0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int result; // eax
  bool v8; // zf

  v5 = this;
  (*(void (__thiscall **)(_DWORD *, int, int, int))(*this + 4))(this, a2, a3, a4);
  v6 = v5[40014] + a5;
  result = v6 / 120;
  v8 = v5[40012] == 0;
  v5[40014] = v6 % 120;
  if ( v8 )
    result = (*(int (__thiscall **)(_DWORD *, _DWORD, int))v5[1])(v5 + 1, 0, v6 / -120);
  return result;
}

//----- (0047F730) --------------------------------------------------------
int __thiscall sub_47F730(int this, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  int v6; // eax

  v4 = this;
  v5 = *(_DWORD *)(this + 160048);
  v6 = (*(int (__stdcall **)(int, int, _DWORD, _DWORD))(**(_DWORD **)(this + 160044) + 4))(a2, a3, 0, 0);
  *(_DWORD *)(v4 + 160048) = v6;
  if ( v5 != v6 && v6 == 1 )
    sub_4A7120(*((_DWORD **)dword_563908 + 362), 0, 0, 0, 0);
  return (*(int (__stdcall **)(int, int, int))(**(_DWORD **)(v4 + 160052) + 4))(a2, a3, a4);
}

//----- (0047F7C0) --------------------------------------------------------
int __thiscall sub_47F7C0(char *this, int a2, int a3, int a4, int a5)
{
  char *v5; // esi
  int result; // eax
  int v7; // eax

  v5 = this;
  (*(void (__stdcall **)(int, int, int))(*(_DWORD *)this + 4))(a2, a3, a4);
  (*(void (__stdcall **)(int, int, int, int))(**((_DWORD **)v5 + 40013) + 8))(a2, a3, a4, a5);
  if ( *((_DWORD *)v5 + 40012) == 1 )
    sub_4A7120(*((_DWORD **)dword_563908 + 360), 0, 0, 0, 0);
  result = *((_DWORD *)v5 + 40012) - 1;
  if ( *((_DWORD *)v5 + 40012) == 1 )
  {
    if ( operator new(0x2Cu) )
      v7 = sub_401591(*((_DWORD *)dword_563908 + 89), v5 + 8);
    else
      v7 = 0;
    *((_DWORD *)dword_563908 + 1535) = v7;
    result = sub_401154(*((_DWORD *)v5 + 40009));
    if ( v5 != (char *)4 )
      result = (*(int (__stdcall **)(signed int))(*((_DWORD *)v5 - 1) + 4))(1);
  }
  return result;
}
// 401154: using guessed type _DWORD __cdecl sub_401154(_DWORD);
// 401591: using guessed type _DWORD __stdcall sub_401591(_DWORD, _DWORD);

//----- (0047F900) --------------------------------------------------------
int __thiscall sub_47F900(void *this)
{
  return (*(int (**)(void))(*(_DWORD *)this + 8))();
}

//----- (0047F910) --------------------------------------------------------
int __thiscall sub_47F910(_DWORD **this, int a2, int a3, int a4, int a5)
{
  _DWORD **v5; // esi

  v5 = this;
  ((void (__stdcall *)(int, int, int))(*this)[1])(a2, a3, a4);
  return (*(int (__stdcall **)(int, int, int, int))(*v5[40013] + 16))(a2, a3, a4, a5);
}

//----- (0047F970) --------------------------------------------------------
int __thiscall sub_47F970(_DWORD **this)
{
  return (*(int (**)(void))(*this[40014] + 36))();
}

//----- (0047F980) --------------------------------------------------------
int __thiscall sub_47F980(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // edi
  void (__stdcall ***v3)(signed int); // ecx

  v1 = this;
  *this = &ViewFileScreen::`vftable';
  this[1] = &ViewFileScreen::`vftable';
  this[2] = &ViewFileScreen::`vftable';
  v2 = (void *)this[40014];
  if ( v2 )
  {
    sub_402040(v2);
    j__free(v2);
    v1[40014] = 0;
  }
  v3 = (void (__stdcall ***)(signed int))v1[40012];
  if ( v3 )
  {
    (**v3)(1);
    v1[40012] = 0;
  }
  if ( v1[8] )
  {
    free((void *)v1[8]);
    v1[8] = 0;
  }
  return sub_4027A2(v1);
}
// 402040: using guessed type int __thiscall sub_402040(_DWORD);
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);
// 516ED8: using guessed type void *ViewFileScreen::`vftable';
// 516EE4: using guessed type void *ViewFileScreen::`vftable';
// 516F14: using guessed type void *ViewFileScreen::`vftable';

//----- (0047FA60) --------------------------------------------------------
_DWORD *__thiscall sub_47FA60(_DWORD *this, char *Filename, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  FILE *v6; // eax
  FILE *v7; // edi
  int v8; // eax
  int v9; // ebx
  void *v10; // eax
  int v11; // edi
  int v12; // eax
  char *v13; // ebx
  bool v14; // sf
  unsigned __int8 v15; // of
  int v17; // [esp+14h] [ebp-28h]
  char Dest; // [esp+1Ch] [ebp-20h]
  int v19; // [esp+38h] [ebp-4h]

  v5 = this;
  this[1] = &InputTarget::`vftable';
  this[2] = &off_511698;
  v19 = 0;
  *this = &ViewFileScreen::`vftable';
  this[1] = &ViewFileScreen::`vftable';
  this[2] = &ViewFileScreen::`vftable';
  this[40010] = a5;
  this[8] = 0;
  v6 = fopen(Filename, "rb");
  v7 = v6;
  if ( v6 )
  {
    v8 = _fileno(v6);
    v9 = _filelength(v8);
    v10 = malloc(v9 + 0x2000);
    v5[8] = v10;
    memset(v10, 0, v9 + 0x2000);
    fread((void *)v5[8], 1u, v9, v7);
    fclose(v7);
  }
  if ( v5[8] )
  {
    v17 = 0;
    do
    {
      if ( !strstr((const char *)v5[8], "~~") )
        break;
      if ( *((_DWORD *)dword_563908 + 6897) )
      {
        sub_48D100((char *)v5[8], "~~name", (void *)(*((_DWORD *)dword_563908 + 6897) + 32));
        sub_48D100((char *)v5[8], "~~squad", (void *)(*((_DWORD *)dword_563908 + 6897) + 64));
        sub_48D100((char *)v5[8], "~~team", *((void **)dword_563908 + 6897));
      }
      v11 = 0;
      do
      {
        v12 = sub_4A9DE0(dword_56390C, v11);
        v13 = sub_4AA690(v12);
        if ( v13 )
        {
          sprintf(&Dest, "~~%dkey", v11);
          sub_48D100((char *)v5[8], &Dest, v13);
        }
        ++v11;
      }
      while ( v11 < 70 );
      v15 = __OFSUB__(v17 + 1, 10);
      v14 = v17++ - 9 < 0;
    }
    while ( v14 ^ v15 );
  }
  v5[40009] = 0;
  v5[7] = a3;
  v5[40015] = 0;
  v5[40012] = 0;
  v5[40014] = 0;
  sub_4022F2(a4);
  return v5;
}
// 4022F2: using guessed type _DWORD __stdcall sub_4022F2(_DWORD);
// 5111DC: using guessed type void *InputTarget::`vftable';
// 511698: using guessed type void (__noreturn *off_511698)();
// 516ED8: using guessed type void *ViewFileScreen::`vftable';
// 516EE4: using guessed type void *ViewFileScreen::`vftable';
// 516F14: using guessed type void *ViewFileScreen::`vftable';

//----- (0047FCE0) --------------------------------------------------------
void *__thiscall sub_47FCE0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_402923();
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 402923: using guessed type int sub_402923(void);

//----- (0047FD20) --------------------------------------------------------
void __cdecl sub_47FD20(int a1, int a2, int *a3, int a4, int a5, int a6, int a7)
{
  int v7; // ebp
  int v8; // esi
  __int16 v9; // ax
  int v10; // edi
  __int16 v11; // ax
  _DWORD *v12; // eax
  int v13; // eax
  long double v14; // ST4C_8
  signed int v15; // esi
  _DWORD *v16; // ebx
  int v17; // ST30_4
  int v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  int v21; // [esp+14h] [ebp-28h]
  double v22; // [esp+28h] [ebp-14h]
  int v23; // [esp+40h] [ebp+4h]
  signed int v24; // [esp+48h] [ebp+Ch]

  if ( a3 )
    sub_4A6E90(a3, a5 / 10000, a6 / 10000, 0, 0, 0, 0, 0);
  v7 = a1;
  if ( a1 )
  {
    v8 = a4;
    v9 = *(_WORD *)(a4 + 56);
    v10 = *(signed __int16 *)(a1 + 170);
    if ( v9 )
      v10 = v9;
    v11 = *(_WORD *)(a4 + 50);
    if ( v11 >= 0 )
    {
      if ( operator new(0x44u) )
      {
        v12 = (_DWORD *)sub_4025CC(a1, a5, a6, a7, 0, 0, 0, 0, v10, v10, a2, *(_DWORD *)(a4 + 52), 0);
LABEL_23:
        sub_4A7300(*((_DWORD **)dword_563908 + 351), (int)v12);
        return;
      }
      goto LABEL_22;
    }
    if ( -v11 == 1 )
    {
      v13 = rand() % 4 + 13;
      if ( v13 > 0 )
      {
        v24 = 0;
        v23 = v13;
        v22 = (double)v13;
        do
        {
          v14 = (double)(rand() % 1000) * (6.283185307 / v22) / 1000.0 + (double)v24 * 3.1415926535 / v22;
          v21 = (signed int)(sin(v14) * 12500.0);
          v15 = (signed int)(cos(v14) * 12500.0);
          if ( dword_53A7C4 )
            v15 = 7 * v15 / 10;
          v16 = operator new(0x38u);
          if ( v16 )
          {
            v17 = *(_DWORD *)(a4 + 52);
            v18 = rand();
            v19 = sub_4A7410(v16, v7, a5, a6, v21, v15, v18 % *(signed __int16 *)(v7 + 176), v10, v10, 5, v17);
          }
          else
          {
            v19 = 0;
          }
          sub_4A7300(*((_DWORD **)dword_563908 + 351), (int)v19);
          v24 += 2;
          --v23;
        }
        while ( v23 );
        v8 = a4;
      }
      if ( *(_WORD *)(v8 + 48) )
      {
        v20 = operator new(0x38u);
        if ( v20 )
        {
          v12 = sub_4A7410(v20, v7, a5, a6, 0, 0, 0, v10, v10, 3, *(_DWORD *)(v8 + 52));
          goto LABEL_23;
        }
LABEL_22:
        v12 = 0;
        goto LABEL_23;
      }
    }
  }
}
// 4025CC: using guessed type _DWORD __stdcall sub_4025CC(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (00480060) --------------------------------------------------------
void sub_480060()
{
  srand(0x8A4u);
}

//----- (00480310) --------------------------------------------------------
void __thiscall sub_480310(_DWORD *this)
{
  ++this[1];
}

//----- (00480320) --------------------------------------------------------
int __thiscall sub_480320(_DWORD *this)
{
  bool v1; // zf
  int result; // eax

  v1 = this[1]-- == 1;
  if ( v1 )
    result = (*(int (__stdcall **)(signed int))(*this + 16))(1);
  return result;
}

//----- (00480330) --------------------------------------------------------
void __thiscall sub_480330(_BYTE *this)
{
  this[8] = 1;
}

//----- (00480340) --------------------------------------------------------
int __thiscall sub_480340(_DWORD *this)
{
  return this[1];
}

//----- (00480360) --------------------------------------------------------
void *__thiscall sub_480360(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpDriver::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51826C: using guessed type void *UdpLibrary::UdpDriver::`vftable';

//----- (00480390) --------------------------------------------------------
char __thiscall sub_480390(SOCKET **this, u_short hostshort, int a3, int a4, char *cp)
{
  SOCKET **v5; // esi
  SOCKET *v6; // edx
  SOCKET *v7; // edx
  SOCKET *v8; // eax
  SOCKET *v9; // eax
  unsigned int v10; // eax
  char optval[4]; // [esp+8h] [ebp-20h]
  u_long argp; // [esp+Ch] [ebp-1Ch]
  int optlen; // [esp+10h] [ebp-18h]
  struct sockaddr name; // [esp+14h] [ebp-14h]

  v5 = this;
  *this[1] = socket(2, 2, 0);
  v6 = v5[1];
  if ( *v6 == -1 )
    return 0;
  argp = 1;
  ioctlsocket(*v6, -2147195266, &argp);
  v7 = v5[1];
  *(_DWORD *)optval = a4;
  setsockopt(*v7, 0xFFFF, 4097, optval, 4);
  v8 = v5[1];
  *(_DWORD *)optval = a3;
  setsockopt(*v8, 0xFFFF, 4098, optval, 4);
  v9 = v5[1];
  optlen = 4;
  getsockopt(*v9, 0, 4, (char *)v9 + 4, &optlen);
  name.sa_family = 2;
  *(_WORD *)name.sa_data = htons(hostshort);
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  if ( cp && *cp )
  {
    v10 = inet_addr(cp);
    if ( v10 != -1 )
      *(_DWORD *)&name.sa_data[2] = v10;
  }
  if ( bind(*v5[1], &name, 16) )
  {
    ((void (__thiscall *)(SOCKET **))(*v5)[2])(v5);
    return 0;
  }
  return 1;
}

//----- (004804E0) --------------------------------------------------------
int __thiscall sub_4804E0(SOCKET **this)
{
  SOCKET **v1; // esi
  int result; // eax

  v1 = this;
  result = *this[1];
  if ( result != -1 )
  {
    result = closesocket(*this[1]);
    *v1[1] = -1;
  }
  return result;
}

//----- (00480500) --------------------------------------------------------
int __thiscall sub_480500(_DWORD *this, char *buf, int len, int a4, int a5)
{
  SOCKET *v5; // eax
  int v6; // esi
  u_short v7; // ST14_2
  int v8; // ecx
  int result; // eax
  u_short v10; // ST14_2
  int fromlen; // [esp+Ch] [ebp-18h]
  struct sockaddr from; // [esp+10h] [ebp-14h]

  v5 = (SOCKET *)this[1];
  fromlen = 16;
  v6 = recvfrom(*v5, buf, len, 0, &from, &fromlen);
  if ( v6 == -1 )
  {
    if ( WSAGetLastError() == 10054 )
    {
      v10 = *(_WORD *)from.sa_data;
      *(_DWORD *)a4 = *(_DWORD *)&from.sa_data[2];
      *(_DWORD *)a5 = ntohs(v10);
      result = 0;
    }
    else
    {
      result = -1;
    }
  }
  else
  {
    v7 = *(_WORD *)from.sa_data;
    *(_DWORD *)a4 = *(_DWORD *)&from.sa_data[2];
    v8 = ntohs(v7);
    result = v6;
    *(_DWORD *)a5 = v8;
  }
  return result;
}

//----- (004805D0) --------------------------------------------------------
bool __thiscall sub_4805D0(void *this, char *buf, int len, int a4, u_short hostshort)
{
  int v5; // eax
  void *v6; // esi
  u_short v7; // ax
  SOCKET *v8; // ecx
  struct sockaddr to; // [esp+8h] [ebp-14h]

  v5 = *(_DWORD *)a4;
  v6 = this;
  to.sa_family = 2;
  *(_DWORD *)&to.sa_data[2] = v5;
  v7 = htons(hostshort);
  v8 = (SOCKET *)*((_DWORD *)v6 + 1);
  *(_WORD *)to.sa_data = v7;
  return sendto(*v8, buf, len, 0, &to, 16) != -1;
}

//----- (00480640) --------------------------------------------------------
int __thiscall sub_480640(SOCKET **this, int a2, int a3, int a4, int a5)
{
  SOCKET **v5; // esi
  SOCKET *v6; // ecx
  char optval[4]; // [esp+8h] [ebp-4h]

  v5 = this;
  v6 = this[1];
  *(_DWORD *)optval = 5;
  setsockopt(*v6, 0, 4, optval, 4);
  ((void (__thiscall *)(SOCKET **, int, int, int, int))(*v5)[4])(v5, a2, a3, a4, a5);
  return setsockopt(*v5[1], 0, 4, (const char *)v5[1] + 4, 4);
}

//----- (004806A0) --------------------------------------------------------
char __thiscall sub_4806A0(_DWORD *this, _DWORD *a2)
{
  SOCKET *v2; // eax
  int namelen; // [esp+4h] [ebp-18h]
  struct sockaddr name; // [esp+8h] [ebp-14h]

  *(_DWORD *)&name.sa_family = 0;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_DWORD *)&name.sa_data[6] = 0;
  *(_DWORD *)&name.sa_data[10] = 0;
  v2 = (SOCKET *)this[1];
  namelen = 16;
  getsockname(*v2, &name, &namelen);
  *a2 = *(_DWORD *)&name.sa_data[2];
  return 1;
}

//----- (00480700) --------------------------------------------------------
int __thiscall sub_480700(_DWORD *this)
{
  SOCKET *v1; // eax
  int namelen; // [esp+0h] [ebp-18h]
  struct sockaddr name; // [esp+4h] [ebp-14h]

  *(_DWORD *)&name.sa_family = 0;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_DWORD *)&name.sa_data[6] = 0;
  *(_DWORD *)&name.sa_data[10] = 0;
  v1 = (SOCKET *)this[1];
  namelen = 16;
  getsockname(*v1, &name, &namelen);
  return ntohs(*(u_short *)name.sa_data);
}

//----- (00480760) --------------------------------------------------------
bool __stdcall sub_480760(int a1, char *cp)
{
  unsigned int v2; // eax
  struct hostent *v3; // eax

  v2 = inet_addr(cp);
  if ( v2 == -1 )
  {
    v3 = gethostbyname(cp);
    if ( !v3 )
    {
      *(_DWORD *)a1 = 0;
      return 0;
    }
    v2 = **(_DWORD **)v3->h_addr_list;
  }
  *(_DWORD *)a1 = v2;
  return v2 != 0;
}

//----- (004807B0) --------------------------------------------------------
BOOL __stdcall sub_4807B0(_DWORD *a1, char a2)
{
  int v2; // esi
  struct hostent *v3; // eax
  char **v4; // ebp
  int v5; // edi
  char **v6; // eax
  char *v7; // eax
  char v8; // cl
  char v9; // dl
  char name; // [esp+8h] [ebp-404h]

  v2 = 0;
  if ( !gethostname(&name, 1024) )
  {
    v3 = gethostbyname(&name);
    if ( v3 )
    {
      v4 = v3->h_addr_list;
      v5 = 0;
      if ( *v4 )
      {
        v6 = v3->h_addr_list;
        while ( 1 )
        {
          v7 = *v6;
          if ( !v2 )
            break;
          v8 = *v7;
          if ( *v7 != 127 )
          {
            v9 = 1;
            if ( v8 == 10 || v8 == -84 && v7[1] == 16 || v8 == -64 && v7[1] == -88 )
              v9 = 0;
            if ( a2 )
            {
              if ( !v9 )
                break;
            }
            else if ( v9 )
            {
              break;
            }
          }
LABEL_18:
          v6 = &v4[++v5];
          if ( !v4[v5] )
            goto LABEL_19;
        }
        v2 = *(_DWORD *)v7;
        goto LABEL_18;
      }
    }
  }
LABEL_19:
  *a1 = v2;
  return v2 != 0;
}

//----- (004808A0) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION **__thiscall sub_4808A0(struct _RTL_CRITICAL_SECTION **this)
{
  struct _RTL_CRITICAL_SECTION **v1; // esi
  struct _RTL_CRITICAL_SECTION *v2; // eax

  v1 = this;
  v2 = (struct _RTL_CRITICAL_SECTION *)operator new(0x18u);
  *v1 = v2;
  InitializeCriticalSection(v2);
  return v1;
}

//----- (004808C0) --------------------------------------------------------
void __thiscall sub_4808C0(LPCRITICAL_SECTION *this)
{
  void **v1; // esi

  v1 = (void **)this;
  DeleteCriticalSection(*this);
  j__free(*v1);
}

//----- (004808E0) --------------------------------------------------------
void __thiscall sub_4808E0(LPCRITICAL_SECTION *this)
{
  EnterCriticalSection(*this);
}

//----- (004808F0) --------------------------------------------------------
void __thiscall sub_4808F0(LPCRITICAL_SECTION *this)
{
  LeaveCriticalSection(*this);
}

//----- (00480900) --------------------------------------------------------
int __stdcall sub_480900(_DWORD *a1)
{
  *(_BYTE *)(a1[4] + 4) = 1;
  (*(void (__thiscall **)(_DWORD *))(*a1 + 28))(a1);
  *(_BYTE *)(a1[4] + 4) = 0;
  (*(void (__thiscall **)(_DWORD *))(*a1 + 4))(a1);
  return 0;
}

//----- (00480930) --------------------------------------------------------
int __thiscall sub_480930(void (***this)(void))
{
  int v1; // esi
  int result; // eax
  DWORD ThreadId; // [esp+4h] [ebp-4h]

  v1 = (int)this;
  (**this)();
  result = _beginthreadex(0, 0, (int)sub_480900, v1, 0, &ThreadId);
  **(_DWORD **)(v1 + 16) = result;
  return result;
}

//----- (00480960) --------------------------------------------------------
char __thiscall sub_480960(_DWORD *this)
{
  return *(_BYTE *)(this[4] + 4);
}

//----- (00480980) --------------------------------------------------------
_DWORD *__thiscall sub_480980(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = this;
  *this = *a2;
  return result;
}

//----- (00480990) --------------------------------------------------------
_DWORD *__thiscall sub_480990(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = this;
  *this = *a2;
  return result;
}

//----- (004809A0) --------------------------------------------------------
char *__thiscall sub_4809A0(unsigned __int8 *this, char *Dest, int a3)
{
  char *result; // eax

  if ( a3 >= 16 )
  {
    sprintf(Dest, "%d.%d.%d.%d", *this, this[1], this[2], this[3]);
    result = Dest;
  }
  else
  {
    result = Dest;
    *Dest = 0;
  }
  return result;
}

//----- (00480A30) --------------------------------------------------------
bool __thiscall sub_480A30(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  unsigned int v3; // edx
  int v4; // esi
  int v5; // edx
  unsigned __int8 *v6; // eax
  unsigned __int8 *v7; // ecx
  int v8; // edx
  unsigned __int8 *v9; // eax
  unsigned __int8 *v10; // ecx
  unsigned __int8 *v11; // eax
  unsigned __int8 *v12; // ecx
  signed int v13; // eax

  v2 = a2;
  v3 = 4;
  do
  {
    if ( *this != *v2 )
      goto LABEL_5;
    v3 -= 4;
    ++v2;
    ++this;
  }
  while ( v3 >= 4 );
  if ( !v3 )
  {
LABEL_14:
    v13 = 0;
    return v13 == 0;
  }
LABEL_5:
  v4 = *(unsigned __int8 *)this - *(unsigned __int8 *)v2;
  if ( *(unsigned __int8 *)this == *(unsigned __int8 *)v2 )
  {
    v5 = v3 - 1;
    v6 = (unsigned __int8 *)v2 + 1;
    v7 = (unsigned __int8 *)this + 1;
    if ( !v5 )
      goto LABEL_14;
    v4 = *v7 - *v6;
    if ( *v7 == *v6 )
    {
      v8 = v5 - 1;
      v9 = v6 + 1;
      v10 = v7 + 1;
      if ( !v8 )
        goto LABEL_14;
      v4 = *v10 - *v9;
      if ( *v10 == *v9 )
      {
        v11 = v9 + 1;
        v12 = v10 + 1;
        if ( v8 == 1 )
          goto LABEL_14;
        v4 = *v12 - *v11;
        if ( *v12 == *v11 )
          goto LABEL_14;
      }
    }
  }
  v13 = 1;
  if ( v4 <= 0 )
    return 0;
  return v13 == 0;
}

//----- (00480AE0) --------------------------------------------------------
int __thiscall sub_480AE0(void *this)
{
  return *(_DWORD *)this;
}

//----- (00480AF0) --------------------------------------------------------
DWORD __thiscall sub_480AF0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ebx
  struct _RTL_CRITICAL_SECTION *v3; // eax
  LPCRITICAL_SECTION *v4; // ebx
  DWORD v5; // ecx
  int v6; // edi
  DWORD v7; // esi

  v1 = this;
  v2 = this[1];
  v3 = *(struct _RTL_CRITICAL_SECTION **)(v2 + 8);
  v4 = (LPCRITICAL_SECTION *)(v2 + 8);
  EnterCriticalSection(v3);
  v5 = GetTickCount();
  if ( v5 < *(_DWORD *)(v1[1] + 12) )
    ++*(_DWORD *)(v1[1] + 16);
  *(_DWORD *)(v1[1] + 12) = v5;
  v6 = *(_DWORD *)(v1[1] + 16);
  v7 = v5;
  LeaveCriticalSection(*v4);
  return v7;
}

//----- (00480B50) --------------------------------------------------------
void __thiscall sub_480B50(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  HANDLE *v2; // eax

  v1 = this;
  *this = (LPCRITICAL_SECTION)&UdpLibrary::UdpPlatformThreadObject::`vftable';
  v2 = (HANDLE *)this[4];
  if ( *v2 )
  {
    CloseHandle(*v2);
    v1[4]->DebugInfo = 0;
  }
  j__free(v1[4]);
  sub_480DB0(v1);
}
// 5182B8: using guessed type void *UdpLibrary::UdpPlatformThreadObject::`vftable';

//----- (00480BD0) --------------------------------------------------------
_DWORD *__thiscall sub_480BD0(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // eax

  v1 = this;
  sub_480E10(this);
  *v1 = &UdpLibrary::UdpPlatformThreadObject::`vftable';
  v2 = operator new(8u);
  v1[4] = v2;
  *v2 = 0;
  *(_BYTE *)(v1[4] + 4) = 0;
  return v1;
}
// 5182B8: using guessed type void *UdpLibrary::UdpPlatformThreadObject::`vftable';

//----- (00480C40) --------------------------------------------------------
_DWORD *__thiscall sub_480C40(_DWORD *this)
{
  _DWORD *v1; // esi
  _DWORD *v2; // edi
  struct _RTL_CRITICAL_SECTION *v3; // eax
  struct WSAData WSAData; // [esp+14h] [ebp-1A0h]
  int v6; // [esp+1B0h] [ebp-4h]

  v1 = this;
  v6 = 0;
  *this = &UdpLibrary::UdpPlatformDriver::`vftable';
  v2 = operator new(0x14u);
  LOBYTE(v6) = 1;
  if ( v2 )
  {
    v3 = (struct _RTL_CRITICAL_SECTION *)operator new(0x18u);
    v2[2] = v3;
    InitializeCriticalSection(v3);
  }
  else
  {
    v2 = 0;
  }
  v1[1] = v2;
  *v2 = -1;
  *(_DWORD *)(v1[1] + 4) = 32;
  *(_DWORD *)(v1[1] + 12) = 0;
  *(_DWORD *)(v1[1] + 16) = 0;
  WSAStartup(0x101u, &WSAData);
  return v1;
}
// 5182DC: using guessed type void *UdpLibrary::UdpPlatformDriver::`vftable';

//----- (00480D30) --------------------------------------------------------
void __thiscall sub_480D30(_DWORD *this)
{
  _DWORD *v1; // esi
  LPCRITICAL_SECTION *v2; // edi

  v1 = this;
  *this = &UdpLibrary::UdpPlatformDriver::`vftable';
  WSACleanup();
  v2 = (LPCRITICAL_SECTION *)v1[1];
  if ( v2 )
  {
    DeleteCriticalSection(v2[2]);
    j__free(v2[2]);
    j__free(v2);
  }
  *v1 = &UdpLibrary::UdpDriver::`vftable';
}
// 51826C: using guessed type void *UdpLibrary::UdpDriver::`vftable';
// 5182DC: using guessed type void *UdpLibrary::UdpPlatformDriver::`vftable';

//----- (00480DB0) --------------------------------------------------------
void __thiscall sub_480DB0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi

  v1 = this;
  DeleteCriticalSection(this[3]);
  j__free(v1[3]);
  *v1 = (LPCRITICAL_SECTION)&UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (00480E10) --------------------------------------------------------
_DWORD *__thiscall sub_480E10(_DWORD *this)
{
  _DWORD *v1; // esi
  struct _RTL_CRITICAL_SECTION *v2; // eax

  v1 = this;
  this[1] = 1;
  *((_BYTE *)this + 8) = 0;
  *this = &UdpLibrary::UdpGuardedRefCount::`vftable';
  v2 = (struct _RTL_CRITICAL_SECTION *)operator new(0x18u);
  v1[3] = v2;
  InitializeCriticalSection(v2);
  return v1;
}
// 5182A0: using guessed type void *UdpLibrary::UdpGuardedRefCount::`vftable';

//----- (00480E80) --------------------------------------------------------
void *__thiscall sub_480E80(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_480DB0((LPCRITICAL_SECTION *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (00480EA0) --------------------------------------------------------
void *__thiscall sub_480EA0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpRefCount::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (00480F00) --------------------------------------------------------
void *__thiscall sub_480F00(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_480B50((LPCRITICAL_SECTION *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (00480F50) --------------------------------------------------------
void *__thiscall sub_480F50(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_480D30(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (00480F70) --------------------------------------------------------
int __cdecl sub_480F70(__int16 a1, __int16 a2)
{
  int result; // eax

  LOWORD(result) = a1 - a2;
  if ( (unsigned __int16)(a1 - a2) <= 0x7FFFu )
    result = (unsigned __int16)result;
  else
    result = 0xFFFF - (unsigned __int16)result;
  return result;
}

//----- (00480F90) --------------------------------------------------------
int __cdecl sub_480F90(int a1, int a2)
{
  int result; // eax

  if ( (unsigned int)(a1 - a2) <= 0x7FFFFFFF )
    result = a1 - a2;
  else
    result = -1 - (a1 - a2);
  return result;
}

//----- (00480FB0) --------------------------------------------------------
int __cdecl sub_480FB0(int *a1)
{
  int result; // eax

  result = 16807 * (*a1 % 127773) - 2836 * (*a1 / 127773) + 123;
  if ( result <= 0 )
    result = 16807 * (*a1 % 127773) - 2836 * (*a1 / 127773) - 2147483526;
  *a1 = result;
  return result;
}

//----- (00480FE0) --------------------------------------------------------
int __cdecl sub_480FE0(_BYTE *a1, int a2, int a3)
{
  int v3; // eax
  _BYTE *i; // ecx

  v3 = dword_5389C8[(unsigned __int8)(LOBYTE(dword_5389C8[(unsigned __int8)(LOBYTE(dword_5389C8[(unsigned __int8)(~LOBYTE(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_5389C8[(unsigned __int8)(~LOBYTE(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_5389C8[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_5389C8[(unsigned __int8)(LOBYTE(dword_5389C8[(unsigned __int8)(~LOBYTE(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_5389C8[(unsigned __int8)(~LOBYTE(dword_5389C8[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_5389C8[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  for ( i = a1; i < &a1[a2]; ++i )
    v3 = dword_5389C8[(unsigned __int8)(v3 ^ *i)] ^ (v3 >> 8) & 0xFFFFFF;
  return ~v3;
}

//----- (00481090) --------------------------------------------------------
int __cdecl sub_481090(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // esi
  _DWORD *v5; // eax

  result = a1;
  v4 = a3 * ((a2 + a3 - 1) / a3);
  if ( !v4 )
  {
    if ( a1 )
      free((void *)(a1 - 4));
    return 0;
  }
  if ( a1 )
  {
    if ( v4 == *(_DWORD *)(a1 - 4) )
      return result;
    v5 = realloc((void *)(a1 - 4), v4 + 4);
  }
  else
  {
    v5 = malloc(v4 + 4);
  }
  if ( !v5 )
    return 0;
  *v5 = v4;
  return (int)(v5 + 1);
}

//----- (00481100) --------------------------------------------------------
signed int __cdecl sub_481100(_BYTE *a1, unsigned int a2)
{
  signed int result; // eax

  if ( a2 >= 0xFE )
  {
    if ( a2 >= 0xFFFF )
    {
      *a1 = -1;
      a1[1] = -1;
      a1[2] = -1;
      a1[3] = HIBYTE(a2);
      a1[4] = BYTE2(a2);
      a1[5] = BYTE1(a2);
      a1[6] = a2;
      result = 7;
    }
    else
    {
      *a1 = -1;
      a1[1] = BYTE1(a2);
      a1[2] = a2;
      result = 3;
    }
  }
  else
  {
    *a1 = a2;
    result = 1;
  }
  return result;
}

//----- (00481160) --------------------------------------------------------
signed int __cdecl sub_481160(unsigned __int8 *a1, int *a2)
{
  unsigned __int16 v2; // cx
  signed int result; // eax
  unsigned __int16 v4; // dx

  if ( *a1 == -1 )
  {
    if ( a1[1] != -1 || a1[2] != -1 )
    {
      HIBYTE(v4) = a1[1];
      LOBYTE(v4) = a1[2];
      *a2 = v4;
      result = 3;
    }
    else
    {
      HIBYTE(v2) = a1[3];
      LOBYTE(v2) = a1[4];
      result = 7;
      *a2 = a1[6] | ((a1[5] | (v2 << 8)) << 8);
    }
  }
  else
  {
    result = 1;
    *a2 = *a1;
  }
  return result;
}

//----- (004811C0) --------------------------------------------------------
_DWORD *__cdecl sub_4811C0(void *Src, size_t Size, void *a3, size_t a4)
{
  int v4; // esi
  _DWORD *v5; // eax
  _DWORD *v6; // edi
  _DWORD *v7; // esi
  _DWORD *v8; // eax
  _DWORD *v9; // edi
  _DWORD *v10; // eax
  _DWORD *v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // edi
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  char *v16; // edi

  v4 = Size + a4;
  switch ( (signed int)(Size + a4 - 1) / 128 )
  {
    case 0:
      v5 = operator new(0x98u);
      v6 = v5;
      if ( !v5 )
        goto LABEL_4;
      sub_48A750(v5);
      v6[37] = v4;
      *v6 = &UdpLibrary::FixedLogicalPacket<128>::`vftable';
      v7 = v6;
      break;
    case 1:
      v8 = operator new(0x118u);
      v9 = v8;
      if ( !v8 )
        goto LABEL_4;
      sub_48A750(v8);
      v9[69] = v4;
      *v9 = &UdpLibrary::FixedLogicalPacket<256>::`vftable';
      v7 = v9;
      break;
    case 2:
    case 3:
      v10 = operator new(0x218u);
      v11 = v10;
      if ( !v10 )
        goto LABEL_4;
      sub_48A750(v10);
      v11[133] = v4;
      *v11 = &UdpLibrary::FixedLogicalPacket<512>::`vftable';
      v7 = v11;
      break;
    case 4:
    case 5:
    case 6:
    case 7:
      v12 = operator new(0x418u);
      v13 = v12;
      if ( v12 )
      {
        sub_48A750(v12);
        v13[261] = v4;
        *v13 = &UdpLibrary::FixedLogicalPacket<1024>::`vftable';
        v7 = v13;
      }
      else
      {
LABEL_4:
        v7 = 0;
      }
      break;
    default:
      v14 = operator new(0x1Cu);
      if ( v14 )
        v15 = sub_48A780(v14, 0, v4);
      else
        v15 = 0;
      v7 = v15;
      break;
  }
  v16 = (char *)(*(int (__thiscall **)(_DWORD *))(*v7 + 24))(v7);
  if ( Src )
    memcpy(v16, Src, Size);
  if ( a3 )
    memcpy(&v16[Size], a3, a4);
  return v7;
}
// 518310: using guessed type void *UdpLibrary::FixedLogicalPacket<128>::`vftable';
// 51833C: using guessed type void *UdpLibrary::FixedLogicalPacket<256>::`vftable';
// 518368: using guessed type void *UdpLibrary::FixedLogicalPacket<512>::`vftable';
// 518394: using guessed type void *UdpLibrary::FixedLogicalPacket<1024>::`vftable';

//----- (00481570) --------------------------------------------------------
int __thiscall sub_481570(char *this)
{
  return (int)(this + 20);
}

//----- (00481580) --------------------------------------------------------
int __thiscall sub_481580(char *this)
{
  return (int)(this + 20);
}

//----- (00481590) --------------------------------------------------------
int __thiscall sub_481590(_DWORD *this)
{
  return this[37];
}

//----- (004815A0) --------------------------------------------------------
int __thiscall sub_4815A0(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[37] = a2;
  return result;
}

//----- (004815F0) --------------------------------------------------------
int __thiscall sub_4815F0(char *this)
{
  return (int)(this + 20);
}

//----- (00481600) --------------------------------------------------------
int __thiscall sub_481600(char *this)
{
  return (int)(this + 20);
}

//----- (00481610) --------------------------------------------------------
int __thiscall sub_481610(_DWORD *this)
{
  return this[69];
}

//----- (00481620) --------------------------------------------------------
int __thiscall sub_481620(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[69] = a2;
  return result;
}

//----- (00481670) --------------------------------------------------------
int __thiscall sub_481670(char *this)
{
  return (int)(this + 20);
}

//----- (00481680) --------------------------------------------------------
int __thiscall sub_481680(char *this)
{
  return (int)(this + 20);
}

//----- (00481690) --------------------------------------------------------
int __thiscall sub_481690(_DWORD *this)
{
  return this[133];
}

//----- (004816A0) --------------------------------------------------------
int __thiscall sub_4816A0(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[133] = a2;
  return result;
}

//----- (004816F0) --------------------------------------------------------
int __thiscall sub_4816F0(char *this)
{
  return (int)(this + 20);
}

//----- (00481700) --------------------------------------------------------
int __thiscall sub_481700(char *this)
{
  return (int)(this + 20);
}

//----- (00481710) --------------------------------------------------------
int __thiscall sub_481710(_DWORD *this)
{
  return this[261];
}

//----- (00481720) --------------------------------------------------------
int __thiscall sub_481720(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[261] = a2;
  return result;
}

//----- (00481770) --------------------------------------------------------
void *__thiscall sub_481770(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A770(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (00481790) --------------------------------------------------------
void *__thiscall sub_481790(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A770(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004817B0) --------------------------------------------------------
void *__thiscall sub_4817B0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A770(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004817D0) --------------------------------------------------------
void *__thiscall sub_4817D0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A770(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004817F0) --------------------------------------------------------
signed int __cdecl sub_4817F0(_BYTE *a1, __int64 a2)
{
  _BYTE *v2; // esi

  *a1 = HIBYTE(a2);
  a1[1] = BYTE6(a2);
  a1[2] = BYTE5(a2);
  a1[3] = BYTE4(a2);
  a1[4] = BYTE3(a2);
  a1[5] = BYTE2(a2);
  v2 = a1 + 6;
  *v2 = BYTE1(a2);
  v2[1] = a2;
  return 8;
}

//----- (00481880) --------------------------------------------------------
int __cdecl sub_481880(unsigned __int8 *a1)
{
  return a1[7] | ((a1[6] | ((a1[5] | ((a1[4] | ((a1[3] | ((a1[2] | ((a1[1] | (*a1 << 8)) << 8)) << 8)) << 8)) << 8)) << 8)) << 8);
}

//----- (00481910) --------------------------------------------------------
signed int __cdecl sub_481910(_BYTE *a1, int a2)
{
  _BYTE *v2; // eax

  *a1 = HIBYTE(a2);
  a1[1] = BYTE2(a2);
  v2 = a1 + 2;
  *v2 = BYTE1(a2);
  v2[1] = a2;
  return 4;
}

//----- (00481970) --------------------------------------------------------
int __cdecl sub_481970(_BYTE *a1)
{
  unsigned __int16 v1; // cx

  HIBYTE(v1) = *a1;
  LOBYTE(v1) = a1[1];
  return (((unsigned __int8)a1[2] | (v1 << 8)) << 8) | (unsigned __int8)a1[3];
}

//----- (00481A00) --------------------------------------------------------
_BYTE *__cdecl sub_481A00(_BYTE *a1, char *a2, int a3)
{
  _BYTE *result; // eax
  char *v4; // esi
  char v5; // cl
  _BYTE *i; // edx

  result = a1;
  if ( a3 > 0 )
  {
    v4 = a2;
    v5 = *a2;
    for ( i = a1; *v4; ++i )
    {
      if ( i >= &a1[a3 - 1] )
        break;
      ++v4;
      *i = v5;
      v5 = *v4;
    }
    *i = 0;
  }
  return result;
}

//----- (00481A90) --------------------------------------------------------
void __thiscall sub_481A90(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  unsigned __int8 v3; // cf

  v1 = this;
  v2 = this + 149;
  sub_4808E0(this + 149);
  v3 = __CFADD__(v1[166], 1);
  v1[166] = (LPCRITICAL_SECTION)((char *)v1[166] + 1);
  v1[167] = (LPCRITICAL_SECTION)((char *)v1[167] + v3);
  sub_4808F0(v2);
}

//----- (00481AC0) --------------------------------------------------------
void __thiscall sub_481AC0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  unsigned __int8 v3; // cf

  v1 = this;
  v2 = this + 149;
  sub_4808E0(this + 149);
  v3 = __CFADD__(v1[168], 1);
  v1[168] = (LPCRITICAL_SECTION)((char *)v1[168] + 1);
  v1[169] = (LPCRITICAL_SECTION)((char *)v1[169] + v3);
  sub_4808F0(v2);
}

//----- (00481B90) --------------------------------------------------------
int __thiscall sub_481B90(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5)
{
  LPCRITICAL_SECTION *v5; // esi
  LPCRITICAL_SECTION *v6; // edi
  int v7; // esi
  int result; // eax

  v5 = this;
  v6 = this + 154;
  sub_4808E0(this + 154);
  if ( v5[4] )
  {
    v7 = ((int (__stdcall *)(int, int, int, int))v5[4]->DebugInfo->CriticalSection)(a2, a3, a4, a5);
    sub_4808F0(v6);
    result = v7;
  }
  else
  {
    sub_4808F0(v6);
    result = 0;
  }
  return result;
}

//----- (00481C40) --------------------------------------------------------
int __thiscall sub_481C40(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5)
{
  LPCRITICAL_SECTION *v5; // esi
  LPCRITICAL_SECTION *v6; // edi
  int v7; // esi
  int result; // eax

  v5 = this;
  v6 = this + 154;
  sub_4808E0(this + 154);
  if ( v5[4] )
  {
    v7 = ((int (__stdcall *)(int, int, int, int))v5[4]->DebugInfo->ProcessLocksList.Blink)(a2, a3, a4, a5);
    sub_4808F0(v6);
    result = v7;
  }
  else
  {
    sub_4808F0(v6);
    result = 0;
  }
  return result;
}

//----- (00481CF0) --------------------------------------------------------
int __thiscall sub_481CF0(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5)
{
  LPCRITICAL_SECTION *v5; // esi
  LPCRITICAL_SECTION *v6; // edi
  int v7; // esi
  int result; // eax

  v5 = this;
  v6 = this + 154;
  sub_4808E0(this + 154);
  if ( v5[4] )
  {
    v7 = ((int (__stdcall *)(int, int, int, int))v5[4]->DebugInfo->ProcessLocksList.Flink)(a2, a3, a4, a5);
    sub_4808F0(v6);
    result = v7;
  }
  else
  {
    sub_4808F0(v6);
    result = 0;
  }
  return result;
}

//----- (00481DA0) --------------------------------------------------------
int __thiscall sub_481DA0(LPCRITICAL_SECTION *this, int a2, int a3, int a4, int a5)
{
  LPCRITICAL_SECTION *v5; // esi
  LPCRITICAL_SECTION *v6; // edi
  int v7; // esi
  int result; // eax

  v5 = this;
  v6 = this + 154;
  sub_4808E0(this + 154);
  if ( v5[4] )
  {
    v7 = ((int (__stdcall *)(int, int, int, int))v5[4]->DebugInfo->EntryCount)(a2, a3, a4, a5);
    sub_4808F0(v6);
    result = v7;
  }
  else
  {
    sub_4808F0(v6);
    result = 0;
  }
  return result;
}

//----- (00481E50) --------------------------------------------------------
bool __stdcall sub_481E50(_BYTE *a1)
{
  char v1; // al
  bool result; // al

  result = 0;
  if ( !*a1 )
  {
    v1 = a1[1];
    if ( v1 == 1 || v1 == 2 || v1 == 29 || v1 == 30 )
      result = 1;
  }
  return result;
}

//----- (00481E80) --------------------------------------------------------
int __thiscall sub_481E80(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  int result; // eax
  int v4; // esi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  if ( v1[35] )
  {
    v4 = sub_402220(*((_QWORD *)v1 + 41));
    sub_4808F0(v2);
    result = v4;
  }
  else
  {
    sub_4808F0(v2);
    result = 0;
  }
  return result;
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (00481F90) --------------------------------------------------------
_DWORD *__thiscall sub_481F90(LPCRITICAL_SECTION *this, _DWORD *a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi

  v2 = this;
  v3 = this + 137;
  sub_4808E0(this + 137);
  sub_480980(a2, v2 + 26);
  sub_4808F0(v3);
  return a2;
}

//----- (004820E0) --------------------------------------------------------
void __thiscall sub_4820E0(LPCRITICAL_SECTION *this, char a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi

  v2 = this;
  v3 = this + 137;
  sub_4808E0(this + 137);
  *((_BYTE *)v2 + 353) = a2;
  sub_4808F0(v3);
}

//----- (00482110) --------------------------------------------------------
void __thiscall sub_482110(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v1[100] = 0;
  v1[101] = 0;
  v1[124] = 0;
  v1[125] = 0;
  v1[123] = 0;
  v1[120] = 0;
  v1[121] = 0;
  v1[122] = 0;
  v1[118] = 0;
  v1[119] = 0;
  v1[66] = 0;
  v1[68] = 0;
  v1[67] = 0;
  v1[69] = 0;
  v1[65] = 0;
  sub_4808F0(v2);
}

//----- (00482190) --------------------------------------------------------
void __thiscall sub_482190(LPCRITICAL_SECTION *this, int a2)
{
  LPCRITICAL_SECTION *v2; // ebp
  int v3; // esi
  LPCRITICAL_SECTION *v4; // ecx
  signed int v5; // eax
  unsigned int v6; // ecx
  int v7; // eax
  LPCRITICAL_SECTION v8; // ebp
  int v9; // [esp+14h] [ebp-18h]

  v2 = this;
  v3 = (int)(this + 137);
  v9 = (int)(this + 137);
  sub_4808E0(this + 137);
  if ( v2[35] )
  {
    qmemcpy((void *)a2, v2 + 38, 0xB0u);
    if ( v2[35][3].SpinCount )
      *(_DWORD *)(a2 + 104) = sub_402220(*((_QWORD *)v2 + 62));
    else
      *(_DWORD *)(a2 + 104) = -1;
    v5 = *(_DWORD *)(a2 + 140);
    *(float *)(a2 + 168) = 1.0;
    v6 = *(_DWORD *)(a2 + 136);
    *(float *)(a2 + 172) = 1.0;
    if ( v5 >= 0 && (v5 > 0 || v6) )
      *(float *)(a2 + 168) = (double)*(signed __int64 *)(a2 + 160) / (double)__PAIR__(v5, v6);
    v7 = *(_DWORD *)(a2 + 156);
    if ( v7 >= 0 && (v7 > 0 || *(_DWORD *)(a2 + 152)) )
      *(float *)(a2 + 172) = (double)*(signed __int64 *)(a2 + 144) / (double)*(signed __int64 *)(a2 + 152);
    *(_DWORD *)(a2 + 128) = 0;
    v8 = v2[89];
    if ( v8 )
      *(_DWORD *)(a2 + 128) = v8[5].OwningThread;
    v4 = (LPCRITICAL_SECTION *)v9;
  }
  else
  {
    v4 = (LPCRITICAL_SECTION *)v3;
  }
  sub_4808F0(v4);
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (004822E0) --------------------------------------------------------
void __thiscall sub_4822E0(_DWORD *this, void *Src, size_t Size)
{
  _DWORD *v3; // esi
  int v4; // edi
  unsigned __int8 v5; // cf
  int v6; // ecx

  v3 = this;
  if ( this[33] == 1 )
  {
    v4 = this[35];
    sub_4808E0((LPCRITICAL_SECTION *)(v4 + 596));
    v5 = __CFADD__((*(_DWORD *)(v4 + 728))++, 1);
    *(_DWORD *)(v4 + 732) += v5;
    sub_4808F0((LPCRITICAL_SECTION *)(v4 + 596));
    v5 = __CFADD__(v3[58]++, 1);
    v6 = v3[35];
    v3[59] += v5;
    sub_488300(v6, (int)v3, Src, Size);
  }
}

//----- (00482350) --------------------------------------------------------
int __thiscall sub_482350(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebx
  LPCRITICAL_SECTION v3; // eax
  int v4; // edi
  LPCRITICAL_SECTION v5; // eax
  LPCRITICAL_SECTION v6; // eax
  LPCRITICAL_SECTION v7; // esi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v3 = v1[89];
  v4 = 0;
  if ( v3 )
    v4 = (int)v3[4].LockSemaphore + v3[4].SpinCount;
  v5 = v1[90];
  if ( v5 )
    v4 += (int)v5[4].LockSemaphore + v5[4].SpinCount;
  v6 = v1[91];
  if ( v6 )
    v4 += (int)v6[4].LockSemaphore + v6[4].SpinCount;
  v7 = v1[92];
  if ( v7 )
    v4 += (int)v7[4].LockSemaphore + v7[4].SpinCount;
  sub_4808F0(v2);
  return v4;
}

//----- (004823C0) --------------------------------------------------------
unsigned __int64 __thiscall sub_4823C0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  LPCRITICAL_SECTION *v3; // ebx
  unsigned int v4; // ebp
  unsigned int v5; // edi
  signed __int64 v6; // rax
  unsigned int v7; // eax
  signed int v8; // ebx
  unsigned __int8 v9; // of
  unsigned int v10; // ebp
  unsigned int v11; // edi
  signed __int64 v12; // rax
  unsigned __int64 result; // rax
  signed __int64 v14; // [esp+10h] [ebp-10h]
  unsigned int v15; // [esp+18h] [ebp-8h]

  v1 = this;
  v2 = this[35];
  v3 = (LPCRITICAL_SECTION *)(v2 + 576);
  sub_4808E0((LPCRITICAL_SECTION *)(v2 + 576));
  v4 = *(_DWORD *)(v2 + 568);
  v5 = *(_DWORD *)(v2 + 572);
  sub_4808F0(v3);
  v6 = (signed __int64)__PAIR__(v5, v4) / 25;
  v14 = v6;
  v9 = __OFSUB__(HIDWORD(v6), ((unsigned int)v6 < v1[140]) + v1[141]);
  v8 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25 - *((_QWORD *)v1 + 70)) >> 32;
  v7 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25) - v1[140];
  v15 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25) - v1[140];
  if ( v8 < 0 || (unsigned __int8)((v8 < 0) ^ v9) | (v8 == 0) && v7 <= 0x28 )
  {
    v10 = 0;
    v11 = 0;
    if ( v8 >= 0 && (v8 > 0 || v7) )
    {
      do
      {
        v12 = (signed __int64)(v14 + __PAIR__(v11, v10)) % 40;
        v1[144] -= v1[(_DWORD)v12 + 146];
        v11 = (__PAIR__(v11, v10++) + 1) >> 32;
        v1[(_DWORD)v12 + 146] = 0;
      }
      while ( (signed __int64)__PAIR__(v11, v10) < __PAIR__(v8, v15) );
    }
  }
  else
  {
    memset(v1 + 146, 0, 0xA0u);
    v1[144] = 0;
  }
  result = __PAIR__(v14, HIDWORD(v14));
  *((_QWORD *)v1 + 70) = v14;
  return result;
}

//----- (004824B0) --------------------------------------------------------
unsigned __int64 __thiscall sub_4824B0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  LPCRITICAL_SECTION *v3; // ebx
  unsigned int v4; // ebp
  unsigned int v5; // edi
  signed __int64 v6; // rax
  unsigned int v7; // eax
  signed int v8; // ebx
  unsigned __int8 v9; // of
  unsigned int v10; // ebp
  unsigned int v11; // edi
  signed __int64 v12; // rax
  unsigned __int64 result; // rax
  signed __int64 v14; // [esp+10h] [ebp-10h]
  unsigned int v15; // [esp+18h] [ebp-8h]

  v1 = this;
  v2 = this[35];
  v3 = (LPCRITICAL_SECTION *)(v2 + 576);
  sub_4808E0((LPCRITICAL_SECTION *)(v2 + 576));
  v4 = *(_DWORD *)(v2 + 568);
  v5 = *(_DWORD *)(v2 + 572);
  sub_4808F0(v3);
  v6 = (signed __int64)__PAIR__(v5, v4) / 25;
  v14 = v6;
  v9 = __OFSUB__(HIDWORD(v6), ((unsigned int)v6 < v1[142]) + v1[143]);
  v8 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25 - *((_QWORD *)v1 + 71)) >> 32;
  v7 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25) - v1[142];
  v15 = (unsigned __int64)((signed __int64)__PAIR__(v5, v4) / 25) - v1[142];
  if ( v8 < 0 || (unsigned __int8)((v8 < 0) ^ v9) | (v8 == 0) && v7 <= 0x28 )
  {
    v10 = 0;
    v11 = 0;
    if ( v8 >= 0 && (v8 > 0 || v7) )
    {
      do
      {
        v12 = (signed __int64)(v14 + __PAIR__(v11, v10)) % 40;
        v1[145] -= v1[(_DWORD)v12 + 186];
        v11 = (__PAIR__(v11, v10++) + 1) >> 32;
        v1[(_DWORD)v12 + 186] = 0;
      }
      while ( (signed __int64)__PAIR__(v11, v10) < __PAIR__(v8, v15) );
    }
  }
  else
  {
    memset(v1 + 186, 0, 0xA0u);
    v1[145] = 0;
  }
  result = __PAIR__(v14, HIDWORD(v14));
  *((_QWORD *)v1 + 71) = v14;
  return result;
}

//----- (004827C0) --------------------------------------------------------
int __thiscall sub_4827C0(_DWORD *this, int *a2, int *a3, int a4)
{
  int v4; // ecx
  int result; // eax
  int *v6; // ebp
  char v7; // bh^1
  int *v8; // esi
  unsigned int v9; // edi
  unsigned int v10; // ecx
  int v11; // ebx
  int *v12; // edx
  int v13; // edx
  int v14; // ebp
  int v15; // [esp+18h] [ebp+8h]

  v4 = this[93];
  result = a4;
  v6 = a3;
  LOWORD(v15) = v4;
  v7 = BYTE2(v4);
  v8 = a2;
  HIBYTE(v15) = HIBYTE(v4);
  v9 = (unsigned int)v6 + a4;
  v10 = (unsigned int)(v6 + 1);
  BYTE2(v15) = v7;
  v11 = v15;
  v12 = v6;
  if ( v6 + 1 <= (int *)((char *)v6 + a4) )
  {
    do
    {
      v13 = *v12;
      v14 = v11 ^ v13;
      v11 = v13;
      v12 = (int *)v10;
      *v8 = v14;
      v10 += 4;
      ++v8;
    }
    while ( v10 <= v9 );
  }
  for ( ; v12 != (int *)v9; v8 = (int *)((char *)v8 + 1) )
  {
    *(_BYTE *)v8 = v11 ^ *(_BYTE *)v12;
    v12 = (int *)((char *)v12 + 1);
  }
  return result;
}

//----- (00482840) --------------------------------------------------------
int __thiscall sub_482840(_DWORD *this)
{
  _DWORD *v1; // edi
  int *v2; // esi
  int result; // eax
  signed int v4; // ebx
  int v5; // ecx
  _BYTE *v6; // ebp
  int *v7; // [esp+10h] [ebp-Ch]
  signed int v8; // [esp+14h] [ebp-8h]
  int v9; // [esp+18h] [ebp-4h]

  v1 = this;
  this[116] = 0;
  v2 = this + 18;
  v7 = this + 95;
  v8 = 2;
  do
  {
    result = *v7;
    switch ( *v7 )
    {
      case 0:
        *(v2 - 8) = (int)sub_4825C0;
        result = (int)sub_4825A0;
        goto LABEL_11;
      case 1:
        *(v2 - 8) = (int)sub_482600;
        *(v2 - 7) = 0;
        *v2 = (int)sub_4825E0;
        v2[1] = 0;
        *(v2 - 6) = 0;
        v2[2] = 0;
        *(v2 - 5) = 0;
        v2[3] = 0;
        result = *(_DWORD *)(v1[35] + 352);
        v1[116] += result;
        break;
      case 2:
        *(v2 - 8) = (int)sub_482640;
        *(v2 - 7) = 0;
        result = (int)sub_482620;
        *v2 = (int)sub_482620;
        v2[1] = 0;
        *(v2 - 6) = 0;
        v2[2] = 0;
        *(v2 - 5) = 0;
        v2[3] = 0;
        v1[116] += *(_DWORD *)(v1[35] + 356);
        break;
      case 3:
        *(v2 - 8) = (int)sub_4826D0;
        result = (int)sub_482660;
        *v2 = (int)sub_482660;
        *(v2 - 7) = 0;
        v2[1] = 0;
        *(v2 - 6) = 0;
        v2[2] = 0;
        *(v2 - 5) = 0;
        v2[3] = 0;
        if ( !v1[115] )
        {
          v4 = 4 * ((*(_DWORD *)(v1[35] + 80) + 1) / 4);
          result = (int)operator new(v4);
          v5 = v1[93];
          v1[115] = result;
          v9 = v5;
          v6 = (_BYTE *)result;
          if ( v4 > 0 )
          {
            do
            {
              result = sub_480FB0(&v9);
              *v6++ = result;
              --v4;
            }
            while ( v4 );
          }
        }
        break;
      case 4:
        *(v2 - 8) = (int)sub_4827C0;
        result = (int)sub_482740;
LABEL_11:
        *v2 = result;
        *(v2 - 7) = 0;
        v2[1] = 0;
        *(v2 - 6) = 0;
        v2[2] = 0;
        *(v2 - 5) = 0;
        v2[3] = 0;
        break;
      default:
        break;
    }
    ++v7;
    v2 += 4;
    --v8;
  }
  while ( v8 );
  return result;
}
// 4825A0: using guessed type int __stdcall sub_4825A0(int, int, int);
// 4825C0: using guessed type int __stdcall sub_4825C0(int, int, int);
// 4825E0: using guessed type int __stdcall sub_4825E0(int, int, int);
// 482600: using guessed type int __stdcall sub_482600(int, int, int);
// 482620: using guessed type int __stdcall sub_482620(int, int, int);
// 482640: using guessed type int __stdcall sub_482640(int, int, int);
// 482660: using guessed type int __stdcall sub_482660(int, int, int);
// 4826D0: using guessed type int __stdcall sub_4826D0(int, int, int);
// 482740: using guessed type int __stdcall sub_482740(int, int, int);

//----- (004829F0) --------------------------------------------------------
void __thiscall sub_4829F0(LPCRITICAL_SECTION *this, int a2, void *Dst)
{
  LPCRITICAL_SECTION *v3; // esi
  LPCRITICAL_SECTION *v4; // edi
  _DWORD *v5; // ecx

  v3 = this;
  v4 = this + 137;
  sub_4808E0(this + 137);
  memset(Dst, 0, 0x30u);
  if ( a2 >= 4 && a2 <= 7 )
  {
    v5 = &v3[a2 + 85]->DebugInfo;
    if ( v5 )
      sub_48B080(v5, Dst);
  }
  sub_4808F0(v4);
}

//----- (00482A90) --------------------------------------------------------
int __cdecl sub_482A90(int a1)
{
  if ( !byte_56C710 )
  {
    byte_56C710 = 1;
    dword_56C6D0[0] = (int)"DisconnectReasonNone";
    dword_56C6D4 = (int)"DisconnectReasonIcmpError";
    dword_56C6D8 = (int)"DisconnectReasonTimeout";
    dword_56C6DC = (int)"DisconnectReasonOtherSideTerminated";
    dword_56C6E0 = (int)"DisconnectReasonManagerDeleted";
    dword_56C6E4 = (int)"DisconnectReasonConnectFail";
    dword_56C6E8 = (int)"DisconnectReasonApplication";
    dword_56C6EC = (int)"DisconnectReasonUnreachableConnection";
    dword_56C6F0 = (int)"DisconnectReasonUnacknowledgedTimeout";
    dword_56C6F4 = (int)"DisconnectReasonNewConnectionAttempt";
    dword_56C6F8 = (int)"DisconnectReasonConnectionRefused";
    dword_56C6FC = (int)"DisconnectReasonConnectError";
    dword_56C700 = (int)"DisconnectReasonConnectingToSelf";
    dword_56C704 = (int)"DisconnectReasonReliableOverflow";
    dword_56C708 = (int)"DisconnectReasonApplicationReleased";
    dword_56C70C = (int)"DisconnectReasonCorruptPacket";
  }
  return dword_56C6D0[a1];
}
// 56C6D0: using guessed type int dword_56C6D0[];
// 56C6D4: using guessed type int dword_56C6D4;
// 56C6D8: using guessed type int dword_56C6D8;
// 56C6DC: using guessed type int dword_56C6DC;
// 56C6E0: using guessed type int dword_56C6E0;
// 56C6E4: using guessed type int dword_56C6E4;
// 56C6E8: using guessed type int dword_56C6E8;
// 56C6EC: using guessed type int dword_56C6EC;
// 56C6F0: using guessed type int dword_56C6F0;
// 56C6F4: using guessed type int dword_56C6F4;
// 56C6F8: using guessed type int dword_56C6F8;
// 56C6FC: using guessed type int dword_56C6FC;
// 56C700: using guessed type int dword_56C700;
// 56C704: using guessed type int dword_56C704;
// 56C708: using guessed type int dword_56C708;
// 56C70C: using guessed type int dword_56C70C;
// 56C710: using guessed type char byte_56C710;

//----- (00482D50) --------------------------------------------------------
void __thiscall sub_482D50(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi

  v1 = this;
  v2 = this + 138;
  sub_4808E0(this + 138);
  if ( v1[127] )
    ((void (__stdcall *)(LPCRITICAL_SECTION *))v1[127]->DebugInfo->CriticalSection)(v1);
  sub_4808F0(v2);
}

//----- (00482DD0) --------------------------------------------------------
void __thiscall sub_482DD0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi

  v1 = this;
  v2 = this + 138;
  sub_4808E0(this + 138);
  if ( v1[127] )
    ((void (__stdcall *)(LPCRITICAL_SECTION *))v1[127]->DebugInfo->ProcessLocksList.Flink)(v1);
  sub_4808F0(v2);
}

//----- (00482E50) --------------------------------------------------------
void __thiscall sub_482E50(LPCRITICAL_SECTION *this, int a2, int a3)
{
  LPCRITICAL_SECTION *v3; // esi
  LPCRITICAL_SECTION *v4; // edi

  v3 = this;
  v4 = this + 138;
  sub_4808E0(this + 138);
  if ( v3[127] )
    ((void (__stdcall *)(LPCRITICAL_SECTION *, int, int))v3[127]->DebugInfo->ProcessLocksList.Blink)(v3, a2, a3);
  sub_4808F0(v4);
}

//----- (00482EE0) --------------------------------------------------------
void __thiscall sub_482EE0(LPCRITICAL_SECTION *this, int a2, int a3, int a4)
{
  LPCRITICAL_SECTION *v4; // esi
  LPCRITICAL_SECTION *v5; // edi

  v4 = this;
  v5 = this + 138;
  sub_4808E0(this + 138);
  if ( v4[127] )
    ((void (__stdcall *)(LPCRITICAL_SECTION *, int, int, int))v4[127]->DebugInfo->EntryCount)(v4, a2, a3, a4);
  sub_4808F0(v5);
}

//----- (00482F70) --------------------------------------------------------
void *__thiscall sub_482F70(_DWORD *this, int a2, char a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  LPCRITICAL_SECTION *v6; // ebp
  int v7; // eax
  int v8; // edi
  int v9; // ST28_4
  _DWORD *v10; // eax
  void *v11; // eax
  int v12; // edi
  LPCRITICAL_SECTION *v13; // ebp
  int v14; // eax
  int v15; // edi
  int v16; // ST28_4

  v4 = this;
  this[35] = a2;
  sub_480990(this + 26, &a3);
  v5 = v4[35];
  v6 = (LPCRITICAL_SECTION *)(v5 + 576);
  v4[27] = a4;
  *((_BYTE *)v4 + 352) = 0;
  v4[104] = 0;
  v4[105] = 0;
  v4[108] = 0;
  v4[109] = 0;
  sub_4808E0((LPCRITICAL_SECTION *)(v5 + 576));
  v7 = *(_DWORD *)(v5 + 568);
  v8 = *(_DWORD *)(v5 + 572);
  v9 = v7;
  sub_4808F0(v6);
  v10 = (_DWORD *)v4[35];
  v4[106] = v9;
  v4[107] = v8;
  v4[100] = 0;
  v4[101] = 0;
  v4[102] = 0;
  v4[103] = 0;
  *((_BYTE *)v4 + 504) = 0;
  v4[127] = 0;
  v4[98] = 0;
  v4[85] = v10[15];
  v4[128] = v10[11];
  v11 = operator new(v10[20]);
  v12 = v4[35];
  v13 = (LPCRITICAL_SECTION *)(v12 + 576);
  v4[110] = v11;
  v4[111] = v11;
  v4[130] = 0;
  v4[131] = 0;
  v4[132] = 0;
  v4[133] = 0;
  v4[115] = 0;
  v4[116] = 0;
  v4[112] = 0;
  v4[113] = 0;
  *((_WORD *)v4 + 228) = 0;
  *((_WORD *)v4 + 229) = 0;
  v4[86] = 0;
  v4[87] = 0;
  v4[84] = 0;
  sub_4808E0((LPCRITICAL_SECTION *)(v12 + 576));
  v14 = *(_DWORD *)(v12 + 568);
  v15 = *(_DWORD *)(v12 + 572);
  v16 = v14;
  sub_4808F0(v13);
  v4[82] = v16;
  v4[83] = v15;
  v4[28] = 0;
  v4[34] = 0;
  *((_BYTE *)v4 + 353) = 0;
  v4[140] = 0;
  v4[141] = 0;
  v4[142] = 0;
  v4[143] = 0;
  v4[144] = 0;
  v4[145] = 0;
  memset(v4 + 146, 0, 0xA0u);
  memset(v4 + 186, 0, 0xA0u);
  sub_482110((LPCRITICAL_SECTION *)v4);
  v4[117] = 0;
  v4[89] = 0;
  v4[90] = 0;
  v4[91] = 0;
  v4[92] = 0;
  return memset(v4 + 38, 0, 0xB0u);
}

//----- (00483180) --------------------------------------------------------
void __thiscall sub_483180(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebx
  _DWORD **v3; // edi
  _DWORD *v4; // ebp
  signed int v5; // [esp+14h] [ebp-18h]
  LPCRITICAL_SECTION *v6; // [esp+18h] [ebp-14h]

  v1 = this;
  *this = (LPCRITICAL_SECTION)&UdpLibrary::UdpConnection::`vftable';
  v2 = this + 137;
  v6 = this + 137;
  sub_4808E0(this + 137);
  v3 = (_DWORD **)(v1 + 89);
  v5 = 4;
  do
  {
    v4 = *v3;
    if ( *v3 )
    {
      sub_48B470(*v3);
      j__free(v4);
    }
    ++v3;
    --v5;
  }
  while ( v5 );
  j__free(v1[110]);
  j__free(v1[115]);
  sub_4808F0(v6);
  sub_4808C0(v1 + 138);
  sub_4808C0(v2);
  sub_4808C0(v1 + 3);
  *v1 = (LPCRITICAL_SECTION)&UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';
// 5185DC: using guessed type void *UdpLibrary::UdpConnection::`vftable';

//----- (00483270) --------------------------------------------------------
void __thiscall sub_483270(_DWORD *this, void *Src, signed int Size)
{
  int v3; // esi
  unsigned __int8 v4; // cf
  int v5; // ebx
  LPCRITICAL_SECTION *v6; // ebp
  int v7; // ecx
  int v8; // ebx
  int v9; // eax
  __int64 v10; // rax
  LPCRITICAL_SECTION *v11; // ecx
  _DWORD *v12; // [esp-8h] [ebp-20h]
  int v13; // [esp-4h] [ebp-1Ch]
  int v14; // [esp+10h] [ebp-8h]

  v3 = (int)this;
  v13 = this[27];
  v12 = this;
  sub_480980(&v12, this + 26);
  sub_487F10(*(LPCRITICAL_SECTION **)(v3 + 140), Src, Size, (char)v12, v13);
  v4 = __CFADD__((*(_DWORD *)(v3 + 168))++, 1);
  v5 = *(_DWORD *)(v3 + 140);
  *(_DWORD *)(v3 + 172) += v4;
  v4 = __CFADD__(Size, *(_DWORD *)(v3 + 152));
  *(_DWORD *)(v3 + 152) += Size;
  v6 = (LPCRITICAL_SECTION *)(v5 + 576);
  *(_DWORD *)(v3 + 156) += (Size >> 31) + v4;
  sub_4808E0((LPCRITICAL_SECTION *)(v5 + 576));
  v7 = *(_DWORD *)(v5 + 568);
  v8 = *(_DWORD *)(v5 + 572);
  v14 = v7;
  sub_4808F0(v6);
  v9 = v14;
  *(_DWORD *)(v3 + 416) = v14;
  *(_DWORD *)(v3 + 420) = v8;
  *(_DWORD *)(v3 + 432) = v9;
  *(_DWORD *)(v3 + 436) = v8;
  sub_4823C0((_DWORD *)v3);
  v10 = *(_QWORD *)(v3 + 560);
  *(_QWORD *)&v12 = 40i64;
  *(_DWORD *)(v3 + 4 * (unsigned __int64)(v10 % 40) + 584) += Size;
  *(_DWORD *)(v3 + 576) += Size;
  if ( !*(_BYTE *)(v3 + 504) )
  {
    v11 = *(LPCRITICAL_SECTION **)(v3 + 140);
    if ( v11 )
      sub_485C50(v11, v3, 0, 0);
  }
}

//----- (00483360) --------------------------------------------------------
void __thiscall sub_483360(_DWORD *this, void *Src, size_t Size, char a4)
{
  _DWORD *v4; // ebp
  char *v5; // esi
  int v6; // eax
  int v7; // ebx
  signed int v8; // ecx
  _DWORD *v9; // eax
  char v10; // dl
  int v11; // ecx
  char *v12; // edi
  _BYTE *v13; // edi
  int (__thiscall *v14)(char *, _BYTE *, char *, int); // edx
  int v15; // eax
  int v16; // edi
  int v17; // eax
  int v18; // eax
  char *v19; // edi
  _DWORD *v20; // [esp+Ch] [ebp-401Ch]
  int v21; // [esp+10h] [ebp-4018h]
  signed int v22; // [esp+14h] [ebp-4014h]
  char *v23; // [esp+18h] [ebp-4010h]
  char Dst[16392]; // [esp+1Ch] [ebp-400Ch]

  v4 = this;
  v5 = (char *)Src;
  if ( this[35] )
  {
    v6 = this[33];
    if ( v6 == 1 || v6 == 3 )
    {
      v7 = Size;
      v8 = 0;
      v9 = v4 + 19;
      v20 = v4 + 95;
      v10 = a4;
      v22 = 0;
      v21 = (int)(v4 + 19);
      do
      {
        if ( *v20 )
        {
          v11 = v8 % 2;
          v12 = &Dst[8196 * v11];
          *(_DWORD *)&v12[v4[116] + v7] = -825307442;
          *v12 = *v5;
          v23 = &Dst[8196 * v11];
          v13 = v12 + 1;
          if ( *v5 )
          {
            v15 = ((int (__thiscall *)(int, _BYTE *, char *, int))*(v9 - 1))((int)v4 + *v9, v13, v5 + 1, v7 - 1);
          }
          else
          {
            v14 = (int (__thiscall *)(char *, _BYTE *, char *, int))*(v9 - 1);
            *v13++ = v5[1];
            v15 = v14((char *)v4 + *v9, v13, v5 + 2, v7 - 2);
            if ( !v4[35] )
              return;
          }
          if ( v15 == -1 )
            return;
          v5 = v23;
          v8 = v22;
          v16 = (int)&v13[v15];
          v9 = (_DWORD *)v21;
          v7 = v16 - (_DWORD)v23;
          v10 = 1;
        }
        ++v20;
        ++v8;
        v9 += 4;
        v22 = v8;
        v21 = (int)v9;
      }
      while ( v8 < 2 );
      if ( v4[94] > 0 )
      {
        if ( !v10 )
        {
          memcpy(Dst, v5, v7);
          v5 = Dst;
        }
        v17 = sub_480FE0(v5, v7, v4[93]);
        switch ( v4[94] )
        {
          case 1:
            v5[v7] = v17;
            break;
          case 2:
            v5[v7] = BYTE1(v17);
            v5[v7 + 1] = v17;
            break;
          case 3:
            v18 = v17 & 0xFFFFFF;
            v5[v7] = BYTE2(v18);
            v5[v7 + 1] = BYTE1(v18);
            v5[v7 + 2] = v18;
            break;
          case 4:
            v5[v7] = HIBYTE(v17);
            v5[v7 + 1] = BYTE2(v17);
            v19 = &v5[v7 + 2];
            *v19 = BYTE1(v17);
            v19[1] = v17;
            break;
          default:
            break;
        }
        v7 += v4[94];
      }
      sub_483270(v4, v5, v7);
    }
  }
}
// 483360: using guessed type char Dst[16392];

//----- (00483560) --------------------------------------------------------
void __thiscall sub_483560(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebx
  unsigned __int8 *v3; // ecx
  signed int v4; // eax
  LPCRITICAL_SECTION v5; // eax
  LPCRITICAL_SECTION v6; // eax
  LPCRITICAL_SECTION v7; // eax
  LPCRITICAL_SECTION v8; // eax

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v3 = (unsigned __int8 *)v1[110];
  v4 = (char *)v1[111] - (char *)v3;
  if ( v4 > 2 )
  {
    if ( v3[2] + 3 == v4 )
    {
      v4 -= 3;
      v3 += 3;
    }
    sub_483360(v1, v3, v4, 1);
    v5 = v1[89];
    if ( v5 )
      v5[9].RecursionCount = 0;
    v6 = v1[90];
    if ( v6 )
      v6[9].RecursionCount = 0;
    v7 = v1[91];
    if ( v7 )
      v7[9].RecursionCount = 0;
    v8 = v1[92];
    if ( v8 )
      v8[9].RecursionCount = 0;
  }
  v1[111] = v1[110];
  sub_4808F0(v2);
}

//----- (00483640) --------------------------------------------------------
void __thiscall sub_483640(_DWORD *this, int a2, __int16 a3)
{
  char Src; // [esp+0h] [ebp-104h]
  char v4; // [esp+1h] [ebp-103h]
  char v5; // [esp+2h] [ebp-102h]
  char v6; // [esp+3h] [ebp-101h]
  char v7; // [esp+4h] [ebp-100h]
  char v8; // [esp+5h] [ebp-FFh]
  char v9; // [esp+6h] [ebp-FEh]
  char v10; // [esp+7h] [ebp-FDh]

  v5 = HIBYTE(a2);
  v6 = BYTE2(a2);
  v8 = a2;
  v9 = HIBYTE(a3);
  v10 = a3;
  Src = 0;
  v4 = 5;
  v7 = BYTE1(a2);
  sub_483360(this, &Src, 8u, 1);
}

//----- (004836C0) --------------------------------------------------------
int __thiscall sub_4836C0(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5, char a6)
{
  int v6; // esi
  int v7; // edx
  int v9; // eax
  _DWORD *v10; // ecx
  int *v11; // edx
  size_t v12; // ebx
  int v13; // ecx
  int v14; // edx
  int v15; // ebx
  int v16; // [esp+4h] [ebp-4h]

  v6 = (int)this;
  v7 = this[35];
  if ( !v7 )
    return 0;
  v9 = this[111] - this[110];
  v10 = this + 97;
  v11 = (int *)(v7 + 76);
  if ( *(_DWORD *)(v6 + 388) < *v11 )
    v11 = (int *)(v6 + 388);
  v16 = *v11;
  v12 = Size + a5;
  if ( (signed int)(Size + a5) <= 255 && (signed int)(v12 + 3) <= v16 )
  {
    if ( (signed int)(v12 + v9 + 1) <= *v10 - *(_DWORD *)(v6 + 464) - *(_DWORD *)(v6 + 376) )
    {
      if ( v9 )
      {
LABEL_11:
        *(_BYTE *)(*(_DWORD *)(v6 + 444))++ = v12;
        v15 = *(_DWORD *)(v6 + 444);
        memcpy(*(void **)(v6 + 444), Src, Size);
        *(_DWORD *)(v6 + 444) += Size;
        if ( a4 )
        {
          memcpy(*(void **)(v6 + 444), a4, a5);
          *(_DWORD *)(v6 + 444) += a5;
        }
        if ( *(_DWORD *)(v6 + 444) - *(_DWORD *)(v6 + 440) >= v16 )
        {
          sub_483560((LPCRITICAL_SECTION *)v6);
          v15 = 0;
        }
        return v15;
      }
    }
    else
    {
      sub_483560((LPCRITICAL_SECTION *)v6);
    }
    *(_BYTE *)(*(_DWORD *)(v6 + 444))++ = 0;
    **(_BYTE **)(v6 + 444) = 3;
    v13 = *(_DWORD *)(v6 + 140);
    ++*(_DWORD *)(v6 + 444);
    *(_DWORD *)(v6 + 408) = sub_401316(v13);
    *(_DWORD *)(v6 + 412) = v14;
    sub_485CB0(v6);
    goto LABEL_11;
  }
  if ( v9 > 2 )
    sub_483560((LPCRITICAL_SECTION *)v6);
  if ( a4 )
  {
    memcpy(*(void **)(v6 + 440), Src, Size);
    memcpy((void *)(Size + *(_DWORD *)(v6 + 440)), a4, a5);
    sub_483360((_DWORD *)v6, *(void **)(v6 + 440), v12, 1);
  }
  else
  {
    sub_483360((_DWORD *)v6, Src, Size, a6);
  }
  return 0;
}
// 401316: using guessed type int __thiscall sub_401316(_DWORD);

//----- (00483870) --------------------------------------------------------
void __thiscall sub_483870(LPCRITICAL_SECTION *this, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v5; // edi
  LPCRITICAL_SECTION *v6; // ebp
  int v7; // ebx
  int v8; // edi
  bool v9; // zf
  LPCRITICAL_SECTION *v10; // ecx
  LPCRITICAL_SECTION *v11; // ecx
  LPCRITICAL_SECTION *v12; // edi
  LPCRITICAL_SECTION *v13; // [esp+14h] [ebp-10h]

  v3 = (int)this;
  v13 = this + 137;
  sub_4808E0(this + 137);
  if ( !*(_DWORD *)(v3 + 344) )
    *(_DWORD *)(v3 + 344) = a3;
  v4 = *(_DWORD *)(v3 + 132);
  if ( !v4 )
    a2 = 0;
  if ( *(_DWORD *)(v3 + 140) )
  {
    if ( a2 <= 0 )
    {
      if ( !*(_BYTE *)(v3 + 353) && (v4 == 1 || v4 == 3) )
        sub_483640((_DWORD *)v3, *(_DWORD *)(v3 + 144), *(_DWORD *)(v3 + 344));
      v12 = *(LPCRITICAL_SECTION **)(v3 + 140);
      *(_DWORD *)(v3 + 140) = 0;
      *(_DWORD *)(v3 + 132) = 2;
      if ( a3 != 4 )
        ((void (__thiscall *)(LPCRITICAL_SECTION *))(*v12)->DebugInfo)(v12);
      sub_487A70(v12, v3);
      if ( a3 != 4 )
      {
        sub_4883D0((int)v12, (LPCRITICAL_SECTION *)v3);
        ((void (__thiscall *)(LPCRITICAL_SECTION *))(*v12)->LockCount)(v12);
      }
    }
    else
    {
      sub_483560((LPCRITICAL_SECTION *)v3);
      v5 = *(_DWORD *)(v3 + 140);
      v6 = (LPCRITICAL_SECTION *)(v5 + 576);
      sub_4808E0((LPCRITICAL_SECTION *)(v5 + 576));
      v7 = *(_DWORD *)(v5 + 568);
      v8 = *(_DWORD *)(v5 + 572);
      sub_4808F0(v6);
      v9 = *(_BYTE *)(v3 + 504) == 0;
      *(_DWORD *)(v3 + 536) = v7;
      *(_DWORD *)(v3 + 540) = v8;
      *(_DWORD *)(v3 + 544) = a2;
      if ( v9 )
      {
        v10 = *(LPCRITICAL_SECTION **)(v3 + 140);
        if ( v10 )
          sub_485C50(v10, v3, 0, 0);
      }
      if ( *(_DWORD *)(v3 + 132) != 3 )
      {
        v11 = *(LPCRITICAL_SECTION **)(v3 + 140);
        *(_DWORD *)(v3 + 132) = 3;
        sub_486B10(v11, (struct _RTL_CRITICAL_SECTION *)v3);
      }
    }
  }
  sub_4808F0(v13);
}

//----- (00483A00) --------------------------------------------------------
char __thiscall sub_483A00(_DWORD *this, int a2, int a3, size_t Size, void *a5, size_t a6)
{
  _DWORD *v6; // esi
  int v7; // edi
  unsigned __int8 v8; // cf
  int v9; // eax
  int v10; // ecx
  int v11; // eax
  signed int v12; // edx
  char result; // al
  __int16 v14; // ax
  __int16 v15; // ax
  int v16; // edi
  _DWORD *v17; // eax
  _DWORD *v18; // eax
  size_t v19; // [esp+14h] [ebp-2018h]
  char Dst; // [esp+1Ch] [ebp-2010h]
  char v21; // [esp+1Dh] [ebp-200Fh]
  char v22; // [esp+1Eh] [ebp-200Eh]
  char v23; // [esp+1Fh] [ebp-200Dh]
  char v24[8188]; // [esp+20h] [ebp-200Ch]
  int v25; // [esp+2028h] [ebp-4h]

  v6 = this;
  v7 = this[35];
  sub_4808E0((LPCRITICAL_SECTION *)(v7 + 596));
  v8 = __CFADD__((*(_DWORD *)(v7 + 720))++, 1);
  *(_DWORD *)(v7 + 724) += v8;
  sub_4808F0((LPCRITICAL_SECTION *)(v7 + 596));
  v8 = __CFADD__(v6[56]++, 1);
  v9 = v6[97];
  v6[57] += v8;
  v10 = a2;
  v11 = v9 - v6[116] - v6[94];
  v12 = a6 + Size;
  v19 = a6 + Size;
  if ( a2 && a2 != 1 || v12 <= v11 )
  {
    if ( (a2 == 2 || a2 == 3) && v12 > v11 - 4 )
      v10 = 4;
  }
  else
  {
    v10 = 4;
  }
  switch ( v10 )
  {
    case 0:
      sub_4836C0(v6, (void *)a3, Size, a5, a6, 0);
      result = 1;
      break;
    case 1:
      memcpy(&Dst, (const void *)a3, Size);
      if ( a5 )
        memcpy(&Dst + Size, a5, a6);
      sub_483360(v6, &Dst, v19, 1);
      result = 1;
      break;
    case 2:
      ++v6[112];
      v14 = *((_WORD *)v6 + 224);
      Dst = 0;
      v21 = 26;
      v22 = HIBYTE(v14);
      v23 = v14;
      memcpy(v24, (const void *)a3, Size);
      if ( a5 )
        memcpy(&v24[Size], a5, a6);
      sub_4836C0(v6, &Dst, v19 + 4, 0, 0, 1);
      result = 1;
      break;
    case 3:
      ++v6[113];
      v15 = *((_WORD *)v6 + 226);
      v22 = *((_WORD *)v6 + 226) >> 8;
      v23 = v15;
      Dst = 0;
      v21 = 27;
      memcpy(v24, (const void *)a3, Size);
      if ( a5 )
        memcpy(&v24[Size], a5, a6);
      sub_483360(v6, &Dst, v19 + 4, 1);
      result = 1;
      break;
    case 4:
    case 5:
    case 6:
    case 7:
      v16 = v10 - 4;
      if ( !v6[v10 + 85] )
      {
        v17 = operator new(0xF0u);
        v25 = 0;
        if ( v17 )
          v18 = sub_48AD40(v17, v16, (int)v6, 48 * v16 + v6[35] + 160);
        else
          v18 = 0;
        v25 = -1;
        v6[v16 + 89] = v18;
      }
      sub_48C4D0((_DWORD *)v6[v16 + 89], (void *)a3, Size, a5, a6);
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 483A00: using guessed type char var_200C[8188];

//----- (00483CF0) --------------------------------------------------------
void __thiscall sub_483CF0(_DWORD *this, void *Src, size_t Size, int a4)
{
  int v4; // esi
  unsigned __int8 v5; // cf
  int v6; // edi

  v4 = (int)this;
  if ( this[33] == 1 )
  {
    v5 = __CFADD__(this[62]++, 1);
    v6 = this[35];
    this[63] += v5;
    sub_4808E0((LPCRITICAL_SECTION *)(v6 + 596));
    v5 = __CFADD__((*(_DWORD *)(v6 + 744))++, 1);
    *(_DWORD *)(v6 + 748) += v5;
    sub_4808F0((LPCRITICAL_SECTION *)(v6 + 596));
    sub_4884A0(*(_DWORD *)(v4 + 140), v4, Src, Size, a4);
    sub_483870((LPCRITICAL_SECTION *)v4, 0, 15);
  }
}

//----- (00483D60) --------------------------------------------------------
void __thiscall sub_483D60(LPCRITICAL_SECTION *this, int a2, int a3)
{
  LPCRITICAL_SECTION *v3; // esi
  LPCRITICAL_SECTION *v4; // edi

  v3 = this;
  v4 = this + 138;
  sub_4808E0(this + 138);
  if ( v3[127] )
    (*(void (__stdcall **)(LPCRITICAL_SECTION *, int, int))v3[127]->DebugInfo)(v3, a2, a3);
  else
    sub_483870(v3, 0, 14);
  sub_4808F0(v4);
}

//----- (00483DF0) --------------------------------------------------------
void __thiscall sub_483DF0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  __int64 v3; // rax
  int v4; // edx

  v1 = this;
  v2 = this[35];
  if ( *(_BYTE *)(v2 + 116) && (*(_BYTE *)(v2 + 117) || v1[33]) )
  {
    if ( !*(_DWORD *)(v2 + 56) )
      goto LABEL_11;
    v3 = *((_QWORD *)v1 + 65);
    if ( !v3 )
    {
      v1[130] = sub_401316(v2);
      v1[131] = v4;
      return;
    }
    if ( sub_402220(v3) >= *(_DWORD *)(v1[35] + 56) )
LABEL_11:
      sub_483870((LPCRITICAL_SECTION *)v1, 0, 1);
  }
}
// 401316: using guessed type int __thiscall sub_401316(_DWORD);
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (00483E60) --------------------------------------------------------
char __thiscall sub_483E60(LPCRITICAL_SECTION *this, int a2, int a3, size_t Size)
{
  LPCRITICAL_SECTION *v4; // esi
  LPCRITICAL_SECTION *v5; // edi
  char result; // al
  size_t v7; // ST10_4
  char v8; // al
  char v9; // bl

  v4 = this;
  v5 = this + 137;
  sub_4808E0(this + 137);
  if ( v4[33] == (LPCRITICAL_SECTION)1 && Size )
  {
    if ( *(_BYTE *)a3 )
    {
      v8 = sub_483A00(v4, a2, a3, Size, 0, 0);
    }
    else
    {
      v7 = Size;
      LOBYTE(Size) = 0;
      v8 = sub_483A00(v4, a2, (int)&Size, 1u, (void *)a3, v7);
    }
    v9 = v8;
    sub_4808F0(v5);
    result = v9;
  }
  else
  {
    sub_4808F0(v5);
    result = 0;
  }
  return result;
}

//----- (00483F30) --------------------------------------------------------
char __thiscall sub_483F30(LPCRITICAL_SECTION *this, int a2, int a3)
{
  LPCRITICAL_SECTION *v3; // esi
  LPCRITICAL_SECTION *v4; // edi
  char result; // al
  int v6; // ebp
  size_t v7; // ebx
  _BYTE *v8; // ebp
  char v9; // al
  char v10; // bl

  v3 = this;
  v4 = this + 137;
  sub_4808E0(this + 137);
  if ( v3[33] == (LPCRITICAL_SECTION)1 && (v6 = a3, (v7 = (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 28))(a3)) != 0) )
  {
    v8 = (_BYTE *)(*(int (__thiscall **)(int))(*(_DWORD *)v6 + 20))(v6);
    if ( (*(unsigned __int8 (**)(void))(*(_DWORD *)a3 + 36))() || *v8 )
    {
      v9 = sub_483A00(v3, a2, (int)v8, v7, 0, 0);
    }
    else
    {
      LOBYTE(a3) = 0;
      v9 = sub_483A00(v3, a2, (int)&a3, 1u, v8, v7);
    }
    v10 = v9;
    sub_4808F0(v4);
    result = v10;
  }
  else
  {
    sub_4808F0(v4);
    result = 0;
  }
  return result;
}

//----- (00484010) --------------------------------------------------------
void __thiscall sub_484010(int this, __int64 a2)
{
  size_t v2; // ebp
  void *v3; // edi
  int v4; // esi
  int v5; // ebx
  int v6; // eax
  int v7; // ebx
  int v8; // eax
  int v9; // ebp
  int v10; // eax
  int *v11; // ebx
  bool v12; // sf
  unsigned __int8 v13; // of
  int *v14; // eax
  signed int v15; // eax
  char *v16; // edi
  signed int v17; // eax
  char *v18; // edi
  char *v19; // edi
  signed int v20; // eax
  int v21; // ebx
  int v22; // eax
  int v23; // ecx
  int v24; // edx
  int v25; // eax
  int v26; // ecx
  int v27; // edx
  int v28; // eax
  int v29; // ecx
  int v30; // ecx
  unsigned __int16 v31; // dx
  int v32; // eax
  unsigned __int8 v33; // cf
  unsigned __int16 v34; // ax
  unsigned __int16 v35; // cx
  int v36; // eax
  int v37; // eax
  unsigned __int16 v38; // cx
  int v39; // edx
  int v40; // ecx
  int v41; // ST34_4
  signed int v42; // eax
  char *v43; // edi
  signed int v44; // eax
  unsigned __int8 *v45; // eax
  int v46; // ecx
  int v47; // eax
  unsigned int v48; // ebx
  __int16 v49; // cx
  int v50; // ebp
  unsigned int v51; // edx
  int v52; // eax
  int v53; // ecx
  int v54; // edx
  unsigned int v55; // edx
  bool v56; // zf
  int v57; // eax
  signed int v58; // eax
  char *v59; // edi
  char *v60; // edi
  char *v61; // edi
  signed int v62; // eax
  __int16 v63; // ax
  int v64; // ebp
  int v65; // edx
  int v66; // edx
  unsigned int v67; // edx
  int v68; // eax
  int v69; // ecx
  unsigned int v70; // eax
  int v71; // edx
  int v72; // edx
  __int16 v73; // ax
  int v74; // eax
  int v75; // edi
  int v76; // eax
  int v77; // ecx
  __int64 v78; // ST30_8
  signed int v79; // eax
  int v80; // ecx
  int v81; // eax
  int v82; // ecx
  int v83; // edx
  int v84; // ecx
  int v85; // eax
  int v86; // edx
  int v87; // ecx
  int v88; // eax
  int v89; // ebx
  _DWORD *v90; // eax
  _DWORD *v91; // eax
  int v92; // esi
  int v93; // esi
  unsigned __int8 *v94; // ebx
  unsigned int v95; // ebp
  unsigned int v96; // ebx
  unsigned int v97; // [esp+14h] [ebp-140h]
  int v98; // [esp+18h] [ebp-13Ch]
  int v99; // [esp+1Ch] [ebp-138h]
  int v100; // [esp+20h] [ebp-134h]
  int v101; // [esp+24h] [ebp-130h]
  int v102; // [esp+28h] [ebp-12Ch]
  int v103; // [esp+2Ch] [ebp-128h]
  int v104; // [esp+30h] [ebp-124h]
  unsigned int v105; // [esp+34h] [ebp-120h]
  __int64 v106; // [esp+38h] [ebp-11Ch]
  size_t v107; // [esp+40h] [ebp-114h]
  char Src; // [esp+44h] [ebp-110h]
  char v109; // [esp+45h] [ebp-10Fh]
  char v110; // [esp+46h] [ebp-10Eh]
  char v111; // [esp+47h] [ebp-10Dh]
  char v112[252]; // [esp+48h] [ebp-10Ch]
  int v113; // [esp+150h] [ebp-4h]

  v2 = HIDWORD(a2);
  v3 = (void *)a2;
  v4 = this;
  v5 = *(_DWORD *)(this + 140);
  v107 = HIDWORD(a2);
  if ( v5 )
  {
    if ( *(_BYTE *)a2 || SHIDWORD(a2) <= 1 )
    {
LABEL_25:
      sub_4822E0((_DWORD *)this, v3, v2);
    }
    else
    {
      v6 = *(unsigned __int8 *)(a2 + 1);
      switch ( v6 )
      {
        case 0:
          sub_4822E0((_DWORD *)this, (void *)(a2 + 1), HIDWORD(a2) - 1);
          return;
        case 1:
          v7 = sub_481970((_BYTE *)(a2 + 2));
          v8 = sub_481970((_BYTE *)(a2 + 6));
          if ( *(_DWORD *)(v4 + 132) )
          {
            v9 = *(_DWORD *)(v4 + 144);
            if ( v8 == v9 )
            {
              *(_DWORD *)(v4 + 392) = v7;
              v10 = sub_481970((_BYTE *)(a2 + 10));
              v11 = (int *)(v4 + 388);
              v13 = __OFSUB__(*(_DWORD *)(v4 + 388), v10);
              v12 = *(_DWORD *)(v4 + 388) - v10 < 0;
              v97 = v10;
              v14 = (int *)(v4 + 388);
              if ( !(v12 ^ v13) )
                v14 = (int *)&v97;
              *v11 = *v14;
              Src = 0;
              v109 = 2;
              v15 = sub_481910(&v110, v9);
              v16 = &v110 + v15;
              v17 = sub_481910(&v110 + v15, *(_DWORD *)(v4 + 372));
              v16[v17] = *(_BYTE *)(v4 + 376);
              v18 = &v16[v17 + 1];
              *v18 = *(_BYTE *)(v4 + 380);
              v18[1] = *(_BYTE *)(v4 + 384);
              v19 = &v18[sub_481910(v18 + 2, *v11) + 2];
              v20 = sub_481910(v19, 2);
              sub_483270((_DWORD *)v4, &Src, &v19[v20] - &Src);
            }
            else
            {
              sub_483870((LPCRITICAL_SECTION *)v4, 0, 9);
            }
          }
          else if ( v8 == *(_DWORD *)(v4 + 144) )
          {
            sub_483640((_DWORD *)v4, v8, 12);
          }
          else
          {
            sub_483640((_DWORD *)v4, v8, 11);
          }
          return;
        case 2:
          v21 = 0;
          v97 = sub_481970((_BYTE *)(a2 + 2));
          v22 = sub_481970((_BYTE *)(a2 + 6));
          v23 = *(unsigned __int8 *)(a2 + 10);
          v24 = *(unsigned __int8 *)(a2 + 11);
          v98 = v22;
          v25 = *(unsigned __int8 *)(a2 + 12);
          v99 = v23;
          v100 = v24;
          v101 = v25;
          v102 = sub_481970((_BYTE *)(a2 + 13));
          if ( SHIDWORD(a2) > 17 )
            v21 = sub_481970((_BYTE *)(a2 + 17));
          if ( !*(_DWORD *)(v4 + 132) && *(_DWORD *)(v4 + 144) == v97 )
          {
            v26 = v99;
            v27 = v100;
            *(_DWORD *)(v4 + 372) = v98;
            v28 = v101;
            *(_DWORD *)(v4 + 376) = v26;
            v29 = v102;
            *(_DWORD *)(v4 + 380) = v27;
            *(_DWORD *)(v4 + 384) = v28;
            *(_DWORD *)(v4 + 388) = v29;
            *(_DWORD *)(v4 + 392) = v21;
            sub_482840((_DWORD *)v4);
            v30 = *(_DWORD *)(v4 + 140);
            *(_DWORD *)(v4 + 132) = 1;
            sub_488380(v30, (LPCRITICAL_SECTION *)v4);
          }
          return;
        case 3:
          v45 = (unsigned __int8 *)(a2 + 2);
          if ( (signed int)a2 + 2 >= (unsigned int)(a2 + HIDWORD(a2)) )
            return;
          do
          {
            v46 = *v45;
            v47 = (int)(v45 + 1);
            v48 = v46 + v47;
            if ( v46 + v47 <= (unsigned int)(a2 + HIDWORD(a2)) )
            {
              sub_484010(v47, v46);
            }
            else
            {
              sub_483CF0((_DWORD *)v4, (void *)a2, HIDWORD(a2), 1);
              if ( !*(_DWORD *)(v4 + 140) )
                return;
            }
            v45 = (unsigned __int8 *)v48;
          }
          while ( v48 < (signed int)a2 + HIDWORD(a2) );
          return;
        case 5:
          v37 = sub_481970((_BYTE *)(a2 + 2));
          if ( SHIDWORD(a2) >= 8 )
          {
            HIBYTE(v38) = *(_BYTE *)(a2 + 6);
            LOBYTE(v38) = *(_BYTE *)(a2 + 7);
            *(_DWORD *)(v4 + 348) = v38;
          }
          if ( *(_DWORD *)(v4 + 144) == v37 )
          {
            sub_4820E0((LPCRITICAL_SECTION *)v4, 1);
            sub_483870((LPCRITICAL_SECTION *)v4, 0, 3);
          }
          return;
        case 7:
          HIBYTE(v49) = *(_BYTE *)(a2 + 2);
          LOBYTE(v49) = *(_BYTE *)(a2 + 3);
          HIWORD(v98) = v49;
          v99 = sub_481970((_BYTE *)(a2 + 4));
          v100 = sub_481970((_BYTE *)(a2 + 8));
          v101 = sub_481970((_BYTE *)(a2 + 12));
          v102 = sub_481970((_BYTE *)(a2 + 16));
          v103 = sub_481970((_BYTE *)(a2 + 20));
          v50 = sub_481880((unsigned __int8 *)(a2 + 24));
          v105 = v51;
          v52 = sub_481880((unsigned __int8 *)(a2 + 32));
          *(_DWORD *)(v4 + 264) = v100;
          *(_DWORD *)(v4 + 272) = v102;
          *(_DWORD *)(v4 + 268) = v101;
          *(_DWORD *)(v4 + 276) = v103;
          *(_DWORD *)(v4 + 260) = v99;
          *(_DWORD *)(v4 + 296) = *(_DWORD *)(v4 + 176);
          *(_DWORD *)(v4 + 300) = *(_DWORD *)(v4 + 180);
          *(_DWORD *)(v4 + 288) = *(_DWORD *)(v4 + 168);
          v53 = *(_DWORD *)(v4 + 172);
          *(_DWORD *)(v4 + 316) = v54;
          HIDWORD(v106) = v54;
          v55 = v105;
          *(_DWORD *)(v4 + 292) = v53;
          *(_DWORD *)(v4 + 312) = v52;
          *(_DWORD *)(v4 + 304) = v50;
          *(_DWORD *)(v4 + 308) = v55;
          v13 = __OFSUB__(*(_DWORD *)(v5 + 560), 1000);
          v56 = *(_DWORD *)(v5 + 560) == 1000;
          v12 = *(_DWORD *)(v5 + 560) - 1000 < 0;
          LODWORD(v106) = v52;
          if ( (unsigned __int8)(v12 ^ v13) | v56 )
          {
            v111 = BYTE2(v98);
            Src = 0;
            v109 = 8;
            v110 = HIBYTE(v98);
            v57 = sub_40167C(v5, v55);
            v58 = sub_481910(v112, v57);
            v59 = &v112[v58 + sub_4817F0(&v112[v58], __PAIR__(v105, v50))];
            v60 = &v59[sub_4817F0(v59, v106)];
            v61 = &v60[sub_4817F0(v60, *(_QWORD *)(v4 + 168))];
            v62 = sub_4817F0(v61, *(_QWORD *)(v4 + 176));
            sub_483360((_DWORD *)v4, &Src, &v61[v62] - &Src, 1);
          }
          return;
        case 8:
          HIBYTE(v63) = *(_BYTE *)(a2 + 2);
          LOBYTE(v63) = *(_BYTE *)(a2 + 3);
          HIWORD(v98) = v63;
          v99 = sub_481970((_BYTE *)(a2 + 4));
          v64 = sub_481880((unsigned __int8 *)(a2 + 8));
          v101 = v65;
          v102 = sub_481880((unsigned __int8 *)(a2 + 16));
          v103 = v66;
          v104 = sub_481880((unsigned __int8 *)(a2 + 24));
          v105 = v67;
          v68 = sub_481880((unsigned __int8 *)(a2 + 32));
          *(_DWORD *)(v4 + 296) = v102;
          *(_DWORD *)(v4 + 300) = v103;
          v69 = v101;
          *(_DWORD *)(v4 + 312) = v68;
          v70 = v105;
          *(_DWORD *)(v4 + 316) = v71;
          v72 = v104;
          *(_DWORD *)(v4 + 288) = v64;
          *(_DWORD *)(v4 + 292) = v69;
          *(_DWORD *)(v4 + 304) = v72;
          *(_DWORD *)(v4 + 308) = v70;
          if ( *(_DWORD *)(v5 + 560) <= 1000 )
          {
            v73 = sub_40167C(v5, v72);
            v74 = sub_480F70(SHIWORD(v98), v73);
            ++*(_DWORD *)(v4 + 476);
            v75 = v74;
            v76 = *(_DWORD *)(v4 + 480);
            *(_DWORD *)(v4 + 472) += v75;
            if ( !v76 || v75 < v76 )
              *(_DWORD *)(v4 + 480) = v75;
            if ( v75 > *(_DWORD *)(v4 + 484) )
              *(_DWORD *)(v4 + 484) = v75;
            v77 = *(_DWORD *)(v4 + 140);
            v78 = *(_QWORD *)(v4 + 496);
            *(_DWORD *)(v4 + 488) = v75;
            v79 = sub_402220(v78);
            v80 = *(_DWORD *)(v4 + 492);
            if ( (v75 <= v80 + 20 || v79 > 120000) && (v75 < 2 * v80 || v79 > 240000) )
            {
              v81 = sub_40167C(*(_DWORD *)(v4 + 140), v80 + 20);
              v82 = *(_DWORD *)(v4 + 140);
              *(_DWORD *)(v4 + 468) = v99 + v75 / 2 - v81;
              *(_DWORD *)(v4 + 496) = sub_401316(v82);
              *(_DWORD *)(v4 + 500) = v83;
              *(_DWORD *)(v4 + 492) = v75;
            }
            v84 = *(_DWORD *)(v4 + 476);
            if ( v84 <= 0 )
              v85 = 0;
            else
              v85 = *(_DWORD *)(v4 + 472) / v84;
            v86 = *(_DWORD *)(v4 + 484);
            v87 = *(_DWORD *)(v4 + 492);
            *(_DWORD *)(v4 + 264) = v85;
            v88 = *(_DWORD *)(v4 + 480);
            *(_DWORD *)(v4 + 272) = v86;
            *(_DWORD *)(v4 + 268) = v88;
            *(_DWORD *)(v4 + 276) = v75;
            *(_DWORD *)(v4 + 260) = v87;
          }
          return;
        case 9:
        case 10:
        case 11:
        case 12:
        case 13:
        case 14:
        case 15:
        case 16:
          v89 = (v6 - 9) % 4;
          if ( !*(_DWORD *)(this + 4 * v89 + 356) )
          {
            v90 = operator new(0xF0u);
            v107 = (size_t)v90;
            v113 = 0;
            if ( v90 )
              v91 = sub_48AD40(v90, v89, v4, 48 * v89 + *(_DWORD *)(v4 + 140) + 160);
            else
              v91 = 0;
            v113 = -1;
            *(_DWORD *)(v4 + 4 * v89 + 356) = v91;
          }
          sub_48C060(*(_DWORD *)(v4 + 4 * v89 + 356), (unsigned __int8 *)a2, SHIDWORD(a2));
          return;
        case 17:
        case 18:
        case 19:
        case 20:
          v92 = *(_DWORD *)(this + 4 * v6 + 288);
          if ( v92 )
            sub_485CF0(v92, a2);
          return;
        case 21:
        case 22:
        case 23:
        case 24:
          v93 = *(_DWORD *)(this + 4 * v6 + 272);
          if ( v93 )
            sub_48C400(v93, (_BYTE *)a2, SHIDWORD(a2));
          return;
        case 25:
          v94 = (unsigned __int8 *)(a2 + 2);
          v95 = a2 + HIDWORD(a2);
          if ( (signed int)a2 + 2 >= (unsigned int)(a2 + HIDWORD(a2)) )
            return;
          break;
        case 26:
          LOBYTE(v31) = *(_BYTE *)(a2 + 3);
          HIBYTE(v31) = *(_BYTE *)(a2 + 2);
          v32 = v31 - *(unsigned __int16 *)(this + 456);
          if ( v32 <= 0 )
            v32 += 0x10000;
          if ( v32 >= 30000 )
            goto LABEL_27;
          *(_WORD *)(this + 456) = v31;
          goto LABEL_24;
        case 27:
          LOBYTE(v34) = *(_BYTE *)(a2 + 3);
          HIBYTE(v34) = *(_BYTE *)(a2 + 2);
          v35 = v34;
          v36 = v34 - *(unsigned __int16 *)(v4 + 458);
          if ( v36 <= 0 )
            v36 += 0x10000;
          if ( v36 >= 30000 )
          {
LABEL_27:
            v33 = __CFADD__((*(_DWORD *)(v4 + 192))++, 1);
            *(_DWORD *)(v4 + 196) += v33;
            sub_481AC0((LPCRITICAL_SECTION *)v5);
            return;
          }
          *(_WORD *)(v4 + 458) = v35;
LABEL_24:
          v2 = HIDWORD(a2) - 4;
          v3 = (void *)(a2 + 4);
          this = v4;
          goto LABEL_25;
        case 29:
          if ( !*(_BYTE *)(v5 + 53) )
            goto LABEL_84;
          if ( !*(_QWORD *)(this + 528) )
          {
            *(_DWORD *)(this + 528) = sub_401316(v5);
            *(_DWORD *)(v4 + 532) = v39;
          }
          v40 = *(_DWORD *)(v4 + 140);
          if ( sub_402220(*(_QWORD *)(v4 + 528)) < 5000 )
          {
            v41 = *(_DWORD *)(v4 + 144);
            Src = 0;
            v109 = 30;
            v42 = sub_481910(&v110, v41);
            v43 = &v110 + v42;
            v44 = sub_481910(&v110 + v42, *(_DWORD *)(v4 + 372));
            sub_483270((_DWORD *)v4, &Src, &v43[v44] - &Src);
          }
          else
          {
LABEL_84:
            sub_483870((LPCRITICAL_SECTION *)v4, 0, 7);
          }
          return;
        default:
          return;
      }
      while ( 1 )
      {
        v96 = (unsigned int)&v94[sub_481160(v94, (int *)&v97)];
        if ( v96 > v95 || v97 > v95 - v96 )
          break;
        sub_484010(v96, v97);
        v94 = (unsigned __int8 *)(v97 + v96);
        if ( (unsigned int)v94 >= v95 )
          return;
      }
      sub_483CF0((_DWORD *)v4, (void *)a2, v107, 7);
    }
  }
}
// 401316: using guessed type int __thiscall sub_401316(_DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);
// 484010: using guessed type char var_10C[252];

//----- (00484920) --------------------------------------------------------
void __thiscall sub_484920(int this)
{
  int v1; // esi
  unsigned __int8 v2; // cf
  int v3; // ebx
  bool v4; // zf
  int v5; // eax
  int v6; // eax
  int v7; // edx
  signed int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // edi
  __int16 v12; // ax
  int v13; // eax
  unsigned int v14; // eax
  unsigned int v15; // edx
  unsigned int v16; // eax
  unsigned int v17; // ecx
  unsigned int v18; // eax
  int v19; // edx
  unsigned int v20; // ecx
  unsigned int v21; // eax
  unsigned int v22; // ecx
  signed int v23; // eax
  char *v24; // edi
  signed int v25; // eax
  int v26; // edi
  LPCRITICAL_SECTION *v27; // ebx
  int v28; // ebp
  int v29; // edi
  int *v30; // eax
  int v31; // ebp
  signed int v32; // ebx
  _DWORD **v33; // edi
  signed int v34; // eax
  int *v35; // eax
  int v36; // ebx
  int v37; // eax
  int v38; // eax
  LPCRITICAL_SECTION *v39; // ebp
  unsigned int v40; // edi
  unsigned int v41; // ebx
  unsigned __int8 v42; // of
  int v43; // ebx
  signed int v44; // edi
  unsigned int v45; // kr08_4
  signed int v46; // eax
  int v47; // eax
  int *v48; // eax
  int v49; // edi
  int v50; // edx
  LPCRITICAL_SECTION *v51; // ebp
  unsigned int v52; // ebx
  unsigned int v53; // edi
  unsigned __int8 v54; // of
  signed __int64 v55; // kr10_8
  signed int v56; // ecx
  signed int v57; // eax
  int v58; // eax
  int *v59; // eax
  int v60; // edi
  int v61; // eax
  LPCRITICAL_SECTION *v62; // ebp
  unsigned int v63; // ebx
  unsigned int v64; // edi
  unsigned __int8 v65; // of
  signed __int64 v66; // kr18_8
  signed int v67; // ecx
  int v68; // edi
  LPCRITICAL_SECTION *v69; // ebx
  int v70; // ebp
  int v71; // edi
  int v72; // eax
  int *v73; // eax
  int v74; // edx
  LPCRITICAL_SECTION *v75; // ebp
  unsigned int v76; // ebx
  unsigned int v77; // edi
  unsigned __int8 v78; // of
  signed int v79; // ebx
  int v80; // edi
  unsigned int v81; // kr20_4
  int v82; // edi
  int *v83; // eax
  int v84; // eax
  int v85; // ecx
  int v86; // ecx
  bool v87; // sf
  unsigned __int8 v88; // of
  int v89; // ecx
  int v90; // ecx
  int v91; // eax
  int v92; // ecx
  int v93; // eax
  int v94; // eax
  int *v95; // eax
  int v96; // edi
  LPCRITICAL_SECTION *v97; // ebx
  unsigned int v98; // ebp
  unsigned int v99; // edi
  int v100; // [esp-8h] [ebp-128h]
  int v101; // [esp-4h] [ebp-124h]
  int v102; // [esp+10h] [ebp-110h]
  __int64 v103; // [esp+14h] [ebp-10Ch]
  char Src; // [esp+1Ch] [ebp-104h]
  char v105; // [esp+1Dh] [ebp-103h]
  char v106; // [esp+1Eh] [ebp-102h]
  char v107; // [esp+1Fh] [ebp-101h]
  char v108; // [esp+20h] [ebp-100h]
  char v109; // [esp+21h] [ebp-FFh]
  char v110; // [esp+22h] [ebp-FEh]
  char v111; // [esp+23h] [ebp-FDh]
  char v112; // [esp+24h] [ebp-FCh]
  char v113; // [esp+25h] [ebp-FBh]
  char v114; // [esp+26h] [ebp-FAh]
  char v115; // [esp+27h] [ebp-F9h]
  char v116; // [esp+28h] [ebp-F8h]
  char v117; // [esp+29h] [ebp-F7h]
  char v118; // [esp+2Ah] [ebp-F6h]
  char v119; // [esp+2Bh] [ebp-F5h]
  char v120; // [esp+2Ch] [ebp-F4h]
  char v121; // [esp+2Dh] [ebp-F3h]
  char v122; // [esp+2Eh] [ebp-F2h]
  char v123; // [esp+2Fh] [ebp-F1h]
  char v124; // [esp+30h] [ebp-F0h]
  char v125; // [esp+31h] [ebp-EFh]
  char v126; // [esp+32h] [ebp-EEh]
  char v127; // [esp+33h] [ebp-EDh]
  char v128[232]; // [esp+34h] [ebp-ECh]

  v1 = this;
  v2 = __CFADD__(*(_DWORD *)(this + 240), 1);
  ++*(_DWORD *)(v1 + 240);
  v3 = 0;
  *(_DWORD *)(v1 + 244) += v2;
  v4 = *(_BYTE *)(this + 352) == 0;
  v102 = 600000;
  if ( !v4 )
  {
    *(_BYTE *)(this + 352) = 0;
    sub_483DF0((_DWORD *)this);
  }
  v5 = *(_DWORD *)(v1 + 132);
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 && v6 != 2 )
      goto LABEL_86;
    if ( *(_DWORD *)(*(_DWORD *)(v1 + 140) + 92) > 0 )
    {
      v7 = *(_DWORD *)(v1 + 400);
      v101 = *(_DWORD *)(v1 + 404);
      v100 = v7;
      v8 = sub_402220(*(__int64 *)&v100);
      v10 = *(_DWORD *)(v1 + 140);
      if ( v8 > *(_DWORD *)(v10 + 92)
        || (v9 = *(_DWORD *)(v1 + 492), v9 > 3000) && v8 > 2000
        || v9 > 1000 && v8 > 5000
        || *(_DWORD *)(v1 + 476) < 2 && v8 > 10000 )
      {
        v11 = *(_DWORD *)(v1 + 476);
        if ( v11 > 0 )
        {
          v9 = *(_DWORD *)(v1 + 472) % v11;
          v3 = *(_DWORD *)(v1 + 472) / v11;
        }
        Src = 0;
        v105 = 7;
        v12 = sub_40167C(v10, v9);
        v106 = HIBYTE(v12);
        v107 = v12;
        v13 = *(_DWORD *)(v1 + 492);
        v108 = *(_DWORD *)(v1 + 492) >> 24;
        v109 = BYTE2(v13);
        v110 = BYTE1(v13);
        v111 = v13;
        v113 = BYTE2(v3);
        v14 = *(_DWORD *)(v1 + 480);
        v112 = HIBYTE(v3);
        v116 = HIBYTE(v14);
        v114 = BYTE1(v3);
        v117 = BYTE2(v14);
        v15 = v14 >> 8;
        v119 = v14;
        v16 = *(_DWORD *)(v1 + 484);
        v118 = v15;
        v120 = HIBYTE(v16);
        v121 = BYTE2(v16);
        v17 = v16 >> 8;
        v123 = v16;
        v18 = *(_DWORD *)(v1 + 488);
        v19 = *(_DWORD *)(v1 + 488) >> 24;
        v122 = v17;
        v124 = v19;
        v20 = v18 >> 16;
        BYTE1(v19) = BYTE1(v18);
        v127 = v18;
        v21 = *(_DWORD *)(v1 + 168);
        v125 = v20;
        v22 = (__PAIR__(*(_DWORD *)(v1 + 172), v21) + 1) >> 32;
        v126 = BYTE1(v19);
        v115 = v3;
        v23 = sub_4817F0(v128, __PAIR__(v22, v21 + 1));
        v24 = &v128[v23];
        v25 = sub_4817F0(&v128[v23], *(_QWORD *)(v1 + 176));
        sub_483360((_DWORD *)v1, &Src, &v24[v25] - &Src, 1);
        v26 = *(_DWORD *)(v1 + 140);
        v27 = (LPCRITICAL_SECTION *)(v26 + 576);
        sub_4808E0((LPCRITICAL_SECTION *)(v26 + 576));
        v28 = *(_DWORD *)(v26 + 568);
        v29 = *(_DWORD *)(v26 + 572);
        sub_4808F0(v27);
        *(_DWORD *)(v1 + 400) = v28;
        *(_DWORD *)(v1 + 404) = v29;
        v8 = 0;
      }
      LODWORD(v103) = *(_DWORD *)(*(_DWORD *)(v1 + 140) + 92) - v8;
      v30 = (int *)&v103;
      if ( (signed int)v103 >= 600000 )
        v30 = &v102;
      v102 = *v30;
    }
    v31 = 0;
    v32 = 0;
    v33 = (_DWORD **)(v1 + 356);
    do
    {
      if ( *v33 )
      {
        v31 += (*v33)[28] + (*v33)[29];
        v34 = sub_48B910(*v33);
        v4 = *(_DWORD *)(v1 + 140) == 0;
        LODWORD(v103) = v34;
        if ( v4 )
          return;
        v42 = __OFSUB__(v34, v102);
        v87 = v34 - v102 < 0;
        v35 = (int *)&v103;
        if ( !(v87 ^ v42) )
          v35 = &v102;
        v102 = *v35;
      }
      ++v32;
      ++v33;
    }
    while ( v32 < 4 );
    v36 = *(_DWORD *)(v1 + 140);
    v37 = *(_DWORD *)(v36 + 68);
    if ( v37 && v31 >= v37 )
    {
      sub_483870((LPCRITICAL_SECTION *)v1, 0, 13);
      return;
    }
    if ( *(_DWORD *)(v1 + 444) - *(_DWORD *)(v1 + 440) > 2 )
    {
      v38 = *(_DWORD *)(v1 + 408);
      HIDWORD(v103) = *(_DWORD *)(v1 + 412);
      v39 = (LPCRITICAL_SECTION *)(v36 + 576);
      LODWORD(v103) = v38;
      sub_4808E0((LPCRITICAL_SECTION *)(v36 + 576));
      v40 = *(_DWORD *)(v36 + 568);
      v41 = *(_DWORD *)(v36 + 572);
      sub_4808F0(v39);
      v42 = __OFSUB__(__PAIR__(v41, v40), v103);
      v45 = v40 - v103;
      v43 = (__PAIR__(v41, v40) - v103) >> 32;
      v44 = v40 - v103;
      HIDWORD(v103) = v43;
      if ( v43 >= 0 && (!((unsigned __int8)((v43 < 0) ^ v42) | (v43 == 0)) || v45 > 0x7FFFFFFF) )
        v44 = 0x7FFFFFFF;
      v46 = *(_DWORD *)(*(_DWORD *)(v1 + 140) + 72);
      if ( v44 < v46 )
      {
        v47 = v46 - v44;
        v42 = __OFSUB__(v47, v102);
        v87 = v47 - v102 < 0;
        LODWORD(v103) = v47;
        v48 = (int *)&v103;
        if ( !(v87 ^ v42) )
          v48 = &v102;
        v102 = *v48;
      }
      else
      {
        sub_483560((LPCRITICAL_SECTION *)v1);
      }
    }
    v49 = *(_DWORD *)(v1 + 140);
    v50 = *(_DWORD *)(v1 + 420);
    LODWORD(v103) = *(_DWORD *)(v1 + 416);
    v51 = (LPCRITICAL_SECTION *)(v49 + 576);
    HIDWORD(v103) = v50;
    sub_4808E0((LPCRITICAL_SECTION *)(v49 + 576));
    v52 = *(_DWORD *)(v49 + 568);
    v53 = *(_DWORD *)(v49 + 572);
    sub_4808F0(v51);
    v54 = __OFSUB__(__PAIR__(v53, v52), v103);
    v55 = __PAIR__(v53, v52) - v103;
    HIDWORD(v103) = HIDWORD(v55);
    if ( v55 < 0 || (unsigned __int8)((v55 < 0) ^ v54) | (HIDWORD(v55) == 0) && (unsigned int)v55 <= 0x7FFFFFFF )
      v56 = v55;
    else
      v56 = 0x7FFFFFFF;
    v57 = *(_DWORD *)(v1 + 512);
    if ( v57 > 0 )
    {
      if ( v56 >= v57 )
      {
        Src = 0;
        v105 = 6;
        sub_483360((_DWORD *)v1, &Src, 2u, 1);
        v56 = 0;
      }
      v58 = *(_DWORD *)(v1 + 512) - v56;
      v42 = __OFSUB__(v58, v102);
      v87 = v58 - v102 < 0;
      LODWORD(v103) = *(_DWORD *)(v1 + 512) - v56;
      v59 = (int *)&v103;
      if ( !(v87 ^ v42) )
        v59 = &v102;
      v102 = *v59;
    }
    v60 = *(_DWORD *)(v1 + 140);
    if ( *(_DWORD *)(v60 + 48) > 0 )
    {
      v61 = *(_DWORD *)(v1 + 436);
      v62 = (LPCRITICAL_SECTION *)(v60 + 576);
      LODWORD(v103) = *(_DWORD *)(v1 + 432);
      HIDWORD(v103) = v61;
      sub_4808E0((LPCRITICAL_SECTION *)(v60 + 576));
      v63 = *(_DWORD *)(v60 + 568);
      v64 = *(_DWORD *)(v60 + 572);
      sub_4808F0(v62);
      v65 = __OFSUB__(__PAIR__(v64, v63), v103);
      v66 = __PAIR__(v64, v63) - v103;
      HIDWORD(v103) = HIDWORD(v66);
      if ( v66 < 0 || (unsigned __int8)((v66 < 0) ^ v65) | (HIDWORD(v66) == 0) && (unsigned int)v66 <= 0x7FFFFFFF )
        v67 = v66;
      else
        v67 = 0x7FFFFFFF;
      v68 = *(_DWORD *)(v1 + 140);
      if ( v67 >= *(_DWORD *)(v68 + 48) )
      {
        v69 = (LPCRITICAL_SECTION *)(v68 + 576);
        sub_4808E0((LPCRITICAL_SECTION *)(v68 + 576));
        v70 = *(_DWORD *)(v68 + 568);
        v71 = *(_DWORD *)(v68 + 572);
        sub_4808F0(v69);
        v101 = *(_DWORD *)(v1 + 108);
        v100 = v101;
        *(_DWORD *)(v1 + 432) = v70;
        *(_DWORD *)(v1 + 436) = v71;
        sub_480980(&v100, (_DWORD *)(v1 + 104));
        sub_4864F0(*(_DWORD **)(v1 + 140), v100, v101);
        v67 = 0;
      }
      v60 = *(_DWORD *)(v1 + 140);
      v72 = *(_DWORD *)(v60 + 48) - v67;
      v42 = __OFSUB__(v72, v102);
      v87 = v72 - v102 < 0;
      LODWORD(v103) = *(_DWORD *)(v60 + 48) - v67;
      v73 = (int *)&v103;
      if ( !(v87 ^ v42) )
        v73 = &v102;
      v102 = *v73;
    }
    if ( *(_DWORD *)(v1 + 132) == 3 )
    {
      v74 = *(_DWORD *)(v1 + 540);
      LODWORD(v103) = *(_DWORD *)(v1 + 536);
      v75 = (LPCRITICAL_SECTION *)(v60 + 576);
      HIDWORD(v103) = v74;
      sub_4808E0((LPCRITICAL_SECTION *)(v60 + 576));
      v76 = *(_DWORD *)(v60 + 568);
      v77 = *(_DWORD *)(v60 + 572);
      sub_4808F0(v75);
      v78 = __OFSUB__(__PAIR__(v77, v76), v103);
      v81 = v76 - v103;
      v80 = (__PAIR__(v77, v76) - v103) >> 32;
      v79 = v76 - v103;
      HIDWORD(v103) = v80;
      if ( v80 >= 0 && (!((unsigned __int8)((v80 < 0) ^ v78) | (v80 == 0)) || v81 > 0x7FFFFFFF) )
        v79 = 0x7FFFFFFF;
      v82 = *(_DWORD *)(v1 + 544) - v79;
      LODWORD(v103) = v82;
      if ( v82 < 0 || !sub_482350((LPCRITICAL_SECTION *)v1) )
      {
        sub_483870((LPCRITICAL_SECTION *)v1, 0, *(_DWORD *)(v1 + 344));
        return;
      }
      v83 = (int *)&v103;
      if ( v82 >= v102 )
        v83 = &v102;
      v102 = *v83;
    }
    if ( *(_DWORD *)(v1 + 340) <= 0 )
      goto LABEL_86;
    v84 = sub_40137A(v1);
    v85 = *(_DWORD *)(v1 + 340);
    if ( v84 >= v85 )
    {
      sub_483870((LPCRITICAL_SECTION *)v1, 0, 2);
      return;
    }
    v86 = v85 - v84;
    v88 = __OFSUB__(v86, v102);
    v87 = v86 - v102 < 0;
  }
  else
  {
    if ( *(_DWORD *)(v1 + 336) > 0 && sub_481E80((LPCRITICAL_SECTION *)v1) > *(_DWORD *)(v1 + 336) )
    {
      sub_483870((LPCRITICAL_SECTION *)v1, 0, 5);
      return;
    }
    v89 = *(_DWORD *)(v1 + 416);
    v101 = *(_DWORD *)(v1 + 420);
    v100 = v89;
    v90 = *(_DWORD *)(v1 + 140);
    v91 = sub_402220(*(__int64 *)&v100);
    v92 = *(_DWORD *)(v1 + 140);
    if ( v91 >= *(_DWORD *)(v92 + 120) )
    {
      v93 = *(_DWORD *)(v1 + 144);
      v110 = *(_DWORD *)(v1 + 144) >> 24;
      v111 = BYTE2(v93);
      v112 = BYTE1(v93);
      Src = 0;
      v105 = 1;
      v106 = 0;
      v107 = 0;
      v108 = 0;
      v109 = 2;
      v113 = v93;
      v94 = *(_DWORD *)(v92 + 80);
      v114 = *(_DWORD *)(v92 + 80) >> 24;
      v115 = BYTE2(v94);
      v116 = BYTE1(v94);
      v117 = v94;
      sub_483270((_DWORD *)v1, &Src, 14);
      v91 = 0;
    }
    v86 = *(_DWORD *)(*(_DWORD *)(v1 + 140) + 120) - v91;
    v88 = __OFSUB__(v86, 600000);
    v87 = v86 - 600000 < 0;
  }
  v95 = (int *)&v103;
  LODWORD(v103) = v86;
  if ( !(v87 ^ v88) )
    v95 = &v102;
  v102 = *v95;
LABEL_86:
  v96 = *(_DWORD *)(v1 + 140);
  if ( v96 )
  {
    if ( v102 < 0 )
      v102 = 0;
    v97 = (LPCRITICAL_SECTION *)(v96 + 576);
    sub_4808E0((LPCRITICAL_SECTION *)(v96 + 576));
    v98 = *(_DWORD *)(v96 + 568);
    v99 = *(_DWORD *)(v96 + 572);
    sub_4808F0(v97);
    sub_485C50(*(LPCRITICAL_SECTION **)(v1 + 140), v1, v98 + v102 + 5, (__PAIR__(v99, v98) + v102 + 5) >> 32);
  }
}
// 40137A: using guessed type int __thiscall sub_40137A(_DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);
// 484920: using guessed type char var_EC[232];

//----- (00485030) --------------------------------------------------------
int __thiscall sub_485030(void (***this)(void), void **a2)
{
  int v2; // esi
  int v3; // ebp
  LPCRITICAL_SECTION *v4; // ecx
  int (__thiscall *v5)(int); // edx
  LPCRITICAL_SECTION *v7; // edi
  int v8; // eax
  int v9; // ebp
  int v10; // ST38_4
  unsigned __int8 v11; // cf
  __int64 v12; // rax
  LPCRITICAL_SECTION *v13; // ecx
  signed int v14; // edi
  char *v15; // ebp
  signed int v16; // ecx
  int v17; // eax
  char *v18; // edi
  int v19; // edx
  int v20; // eax
  int v21; // eax
  LPCRITICAL_SECTION *v22; // ecx
  signed int v23; // eax
  _DWORD *v24; // ebx
  int v25; // eax
  char *v26; // edi
  _BYTE *v27; // edi
  int (__thiscall *v28)(int, _BYTE *, char *, int); // edx
  int v29; // eax
  int v30; // edi
  int (*v31)(void); // eax
  __int64 v32; // [esp-8h] [ebp-404Ch]
  int v33; // [esp+18h] [ebp-402Ch]
  int v34; // [esp+1Ch] [ebp-4028h]
  signed int v35; // [esp+1Ch] [ebp-4028h]
  _DWORD *v36; // [esp+24h] [ebp-4020h]
  char *v37; // [esp+28h] [ebp-401Ch]
  char v38[16384]; // [esp+34h] [ebp-4010h]
  int v39; // [esp+4040h] [ebp-4h]

  v2 = (int)this;
  (**this)();
  v39 = 0;
  sub_4808E0((LPCRITICAL_SECTION *)(v2 + 548));
  v3 = *(_DWORD *)(v2 + 140);
  LOBYTE(v39) = 1;
  if ( !v3 )
  {
    LOBYTE(v39) = 0;
LABEL_3:
    v4 = (LPCRITICAL_SECTION *)(v2 + 548);
LABEL_4:
    sub_4808F0(v4);
    v5 = *(int (__thiscall **)(int))(*(_DWORD *)v2 + 4);
    v39 = -1;
    return v5(v2);
  }
  if ( !a2[3] )
  {
    sub_483DF0((_DWORD *)v2);
    LOBYTE(v39) = 0;
    goto LABEL_3;
  }
  if ( *(_BYTE *)*a2 || *((_BYTE *)*a2 + 1) != 29 )
  {
    *(_DWORD *)(v2 + 528) = 0;
    *(_DWORD *)(v2 + 532) = 0;
  }
  v7 = (LPCRITICAL_SECTION *)(v3 + 576);
  *(_DWORD *)(v2 + 520) = 0;
  *(_DWORD *)(v2 + 524) = 0;
  sub_4808E0((LPCRITICAL_SECTION *)(v3 + 576));
  v8 = *(_DWORD *)(v3 + 568);
  v9 = *(_DWORD *)(v3 + 572);
  v10 = v8;
  sub_4808F0(v7);
  v11 = __CFADD__((*(_DWORD *)(v2 + 176))++, 1);
  *(_DWORD *)(v2 + 424) = v10;
  *(_DWORD *)(v2 + 180) += v11;
  *(_DWORD *)(v2 + 428) = v9;
  v12 = (signed int)a2[3];
  v11 = __CFADD__((_DWORD)v12, *(_DWORD *)(v2 + 160));
  *(_DWORD *)(v2 + 160) += v12;
  *(_DWORD *)(v2 + 164) += HIDWORD(v12) + v11;
  sub_4824B0((_DWORD *)v2);
  *(_DWORD *)(v2 + 4 * (unsigned __int64)(*(_QWORD *)(v2 + 568) % 40i64) + 744) += a2[3];
  *(_DWORD *)(v2 + 580) += a2[3];
  if ( !*(_BYTE *)*a2 && *((_BYTE *)*a2 + 1) == 6 )
  {
LABEL_46:
    v4 = (LPCRITICAL_SECTION *)(v2 + 548);
    LOBYTE(v39) = 0;
    goto LABEL_4;
  }
  if ( !*(_BYTE *)(v2 + 504) )
  {
    v13 = *(LPCRITICAL_SECTION **)(v2 + 140);
    if ( v13 )
      sub_485C50(v13, v2, 0, 0);
  }
  v14 = (signed int)a2[3];
  if ( v14 >= 1 )
  {
    v15 = (char *)*a2;
    if ( sub_481E50(*a2) )
    {
      HIDWORD(v32) = v14;
LABEL_42:
      LODWORD(v32) = v15;
      sub_484010(v2, v32);
      goto LABEL_43;
    }
    if ( *(_DWORD *)(v2 + 132) )
    {
      v16 = *(_DWORD *)(v2 + 376);
      v33 = v14;
      if ( v16 > 0 )
      {
        if ( v14 < v16 )
        {
          sub_483CF0((_DWORD *)v2, v15, v14, 6);
          goto LABEL_43;
        }
        v17 = v14 - v16;
        v18 = &v15[v14 - v16];
        v19 = sub_480FE0(v15, v17, *(_DWORD *)(v2 + 372));
        v20 = 0;
        v34 = v19;
        switch ( *(_DWORD *)(v2 + 376) )
        {
          case 1:
            v20 = (unsigned __int8)*v18;
            v19 = (unsigned __int8)v19;
            break;
          case 2:
            HIWORD(v20) = 0;
            BYTE1(v20) = *v18;
            v19 = (unsigned __int16)v19;
            LOBYTE(v20) = v18[1];
            break;
          case 3:
            v21 = (unsigned __int8)v18[1];
            BYTE1(v21) = *v18;
            v20 = (unsigned __int8)v18[2] | (v21 << 8);
            v19 &= 0xFFFFFFu;
            break;
          case 4:
            v20 = sub_481970(v18);
            v19 = v34;
            break;
          default:
            break;
        }
        if ( v20 != v19 )
        {
          v11 = __CFADD__((*(_DWORD *)(v2 + 184))++, 1);
          v22 = *(LPCRITICAL_SECTION **)(v2 + 140);
          *(_DWORD *)(v2 + 188) += v11;
          sub_481A90(v22);
          sub_488420(*(_DWORD *)(v2 + 140), v2, *a2, (size_t)a2[3]);
          goto LABEL_43;
        }
        v33 -= *(_DWORD *)(v2 + 376);
      }
      v23 = 1;
      v35 = 1;
      v24 = (_DWORD *)(v2 + 60);
      v36 = (_DWORD *)(v2 + 384);
      while ( 1 )
      {
        if ( *v36 )
        {
          v25 = v23 % 2;
          v26 = &v38[0x2000 * v25];
          *v26 = *v15;
          v37 = &v38[0x2000 * v25];
          v27 = v26 + 1;
          if ( *v15 )
          {
            v29 = ((int (__thiscall *)(int, _BYTE *, char *, int))*(v24 - 1))(v2 + *v24, v27, v15 + 1, v33 - 1);
          }
          else
          {
            if ( v33 < 2 )
            {
              sub_483CF0((_DWORD *)v2, *a2, (size_t)a2[3], 3);
              goto LABEL_46;
            }
            v28 = (int (__thiscall *)(int, _BYTE *, char *, int))*(v24 - 1);
            *v27++ = v15[1];
            v29 = v28(v2 + *v24, v27, v15 + 2, v33 - 2);
            if ( !*(_DWORD *)(v2 + 140) )
              goto LABEL_46;
          }
          if ( v29 == -1 )
          {
            sub_483CF0((_DWORD *)v2, *a2, (size_t)a2[3], 4);
            goto LABEL_46;
          }
          v15 = v37;
          v30 = (int)&v27[v29];
          v23 = v35;
          v33 = v30 - (_DWORD)v37;
        }
        --v36;
        --v23;
        v24 -= 4;
        v35 = v23;
        if ( v23 < 0 )
        {
          HIDWORD(v32) = v33;
          goto LABEL_42;
        }
      }
    }
  }
  else
  {
    sub_483CF0((_DWORD *)v2, *a2, v14, 5);
  }
LABEL_43:
  LOBYTE(v39) = 0;
  sub_4808F0((LPCRITICAL_SECTION *)(v2 + 548));
  v31 = *(int (**)(void))(*(_DWORD *)v2 + 4);
  v39 = -1;
  return v31();
}
// 485030: using guessed type char var_4010[16384];

//----- (00485440) --------------------------------------------------------
void __thiscall sub_485440(LPCRITICAL_SECTION *this, char a2)
{
  int v2; // esi
  LPCRITICAL_SECTION *v3; // ebp
  int v4; // edi

  v2 = (int)this;
  v3 = this + 137;
  sub_4808E0(this + 137);
  if ( *(_DWORD *)(v2 + 140) )
  {
    if ( a2 && (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 12))(v2) == 2 )
    {
      sub_483870((LPCRITICAL_SECTION *)v2, 0, 14);
    }
    else
    {
      v4 = *(_DWORD *)(v2 + 140);
      (**(void (__thiscall ***)(_DWORD))v4)(*(_DWORD *)(v2 + 140));
      *(_BYTE *)(v2 + 504) = 1;
      sub_484920(v2);
      *(_BYTE *)(v2 + 504) = 0;
      (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
    }
  }
  sub_4808F0(v3);
}

//----- (00485510) --------------------------------------------------------
int *__thiscall sub_485510(int *this, int a2, char a3, int *a4, int a5)
{
  int *v5; // esi
  void (__thiscall *v6)(int *); // edx
  int v7; // ecx
  int v8; // eax
  LPCRITICAL_SECTION *v9; // ecx
  void (*v10)(void); // eax
  int v12; // [esp+8h] [ebp-30h]
  int *v13; // [esp+Ch] [ebp-2Ch]
  int *v14; // [esp+20h] [ebp-18h]
  int *v15; // [esp+24h] [ebp-14h]
  int *v16; // [esp+28h] [ebp-10h]
  int v17; // [esp+34h] [ebp-4h]

  v5 = this;
  v14 = this;
  sub_480E10(this);
  v5[4] = -1;
  v17 = 0;
  *v5 = (int)&UdpLibrary::UdpConnection::`vftable';
  unknown_libname_1(v5 + 26);
  v5[29] = 0;
  v5[30] = 0;
  v5[31] = 0;
  v5[32] = 0;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v5 + 137);
  LOBYTE(v17) = 1;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v5 + 138);
  v6 = *(void (__thiscall **)(int *))*v5;
  v15 = v5;
  v6(v5);
  v16 = v5 + 137;
  sub_4808E0((LPCRITICAL_SECTION *)v5 + 137);
  v13 = a4;
  v12 = v7;
  a4 = &v12;
  LOBYTE(v17) = 4;
  sub_480980(&v12, &a3);
  sub_482F70(v5, a2, v12, (int)v13);
  v13 = (int *)(v5[35] + 424);
  v5[84] = a5;
  v5[33] = 0;
  v8 = sub_480FB0(v13);
  v9 = (LPCRITICAL_SECTION *)v5[35];
  v13 = v5;
  v5[36] = v8;
  sub_486880(v9, (struct _RTL_CRITICAL_SECTION_DEBUG *)v13);
  sub_485440((LPCRITICAL_SECTION *)v5, 0);
  LOBYTE(v17) = 3;
  sub_4808F0((LPCRITICAL_SECTION *)v5 + 137);
  v10 = *(void (**)(void))(*v5 + 4);
  LOBYTE(v17) = 2;
  v10();
  return v5;
}
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);
// 5185DC: using guessed type void *UdpLibrary::UdpConnection::`vftable';

//----- (00485640) --------------------------------------------------------
int *__thiscall sub_485640(int *this, int a2, void **a3)
{
  int *v3; // esi
  void (__thiscall *v4)(int *); // edx
  int v5; // ecx
  signed int v6; // eax
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  int v9; // edx
  int v10; // edx
  unsigned __int16 v11; // cx
  int v12; // eax
  int v13; // edi
  void (__thiscall *v14)(int); // eax
  void (*v15)(void); // eax
  int v17; // [esp+8h] [ebp-34h]
  int *v18; // [esp+Ch] [ebp-30h]
  LPCRITICAL_SECTION *v19; // [esp+24h] [ebp-18h]
  int *v20; // [esp+28h] [ebp-14h]
  int *v21; // [esp+2Ch] [ebp-10h]
  int v22; // [esp+38h] [ebp-4h]

  v3 = this;
  v20 = this;
  sub_480E10(this);
  v3[4] = -1;
  v22 = 0;
  *v3 = (int)&UdpLibrary::UdpConnection::`vftable';
  unknown_libname_1(v3 + 26);
  v3[29] = 0;
  v3[30] = 0;
  v3[31] = 0;
  v3[32] = 0;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v3 + 137);
  LOBYTE(v22) = 1;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v3 + 138);
  v4 = *(void (__thiscall **)(int *))*v3;
  v21 = v3;
  v4(v3);
  LOBYTE(v22) = 3;
  v19 = (LPCRITICAL_SECTION *)(v3 + 137);
  sub_4808E0((LPCRITICAL_SECTION *)v3 + 137);
  v18 = (int *)a3[2];
  v17 = v5;
  LOBYTE(v22) = 4;
  sub_480980(&v17, a3 + 1);
  sub_482F70(v3, a2, v17, (int)v18);
  v3[33] = 1;
  v6 = 376;
  v7 = v3 + 95;
  do
  {
    *v7 = *(_DWORD *)(v6 + v3[35]);
    v6 += 4;
    ++v7;
  }
  while ( v6 < 384 );
  v8 = (_DWORD *)v3[35];
  v3[94] = v8[93];
  v9 = v8[20];
  v18 = v8 + 106;
  v3[97] = v9;
  v3[93] = sub_480FB0(v18);
  sub_482840(v3);
  v10 = *((unsigned __int8 *)*a3 + 8);
  HIBYTE(v11) = *((_BYTE *)*a3 + 6);
  v12 = (int)*a3 + 6;
  v18 = v3;
  LOBYTE(v11) = *(_BYTE *)(v12 + 1);
  v3[36] = *(unsigned __int8 *)(v12 + 3) | ((v10 | (v11 << 8)) << 8);
  sub_486880((LPCRITICAL_SECTION *)v3[35], (struct _RTL_CRITICAL_SECTION_DEBUG *)v18);
  sub_485030((void (***)(void))v3, a3);
  sub_4808E0((LPCRITICAL_SECTION *)v3 + 137);
  v13 = v3[35];
  LOBYTE(v22) = 5;
  if ( v13 )
  {
    (**(void (__thiscall ***)(int))v13)(v13);
    LOBYTE(v22) = 6;
    *((_BYTE *)v3 + 504) = 1;
    sub_484920((int)v3);
    *((_BYTE *)v3 + 504) = 0;
    v14 = *(void (__thiscall **)(int))(*(_DWORD *)v13 + 4);
    LOBYTE(v22) = 5;
    v14(v13);
  }
  LOBYTE(v22) = 4;
  sub_4808F0((LPCRITICAL_SECTION *)v3 + 137);
  LOBYTE(v22) = 3;
  sub_4808F0(v19);
  v15 = *(void (**)(void))(*v3 + 4);
  LOBYTE(v22) = 2;
  v15();
  return v3;
}
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);
// 5185DC: using guessed type void *UdpLibrary::UdpConnection::`vftable';

//----- (00485840) --------------------------------------------------------
int __thiscall sub_485840(void (***this)(void))
{
  LPCRITICAL_SECTION *v1; // esi

  v1 = (LPCRITICAL_SECTION *)this;
  (**this)();
  sub_4808E0(v1 + 137);
  sub_485440(v1, 0);
  sub_483560(v1);
  sub_4808F0(v1 + 137);
  return ((int (*)(void))(*v1)->LockCount)();
}

//----- (00485930) --------------------------------------------------------
int __thiscall sub_485930(int *this, int a2)
{
  int v2; // ebp
  int v3; // edx
  int result; // eax
  int v5; // esi
  int v6; // ST14_4
  int v7; // ST18_4
  int v8; // ST1C_4
  int v9; // ST20_4
  int v10; // edx
  _DWORD *v11; // edx
  int i; // edi
  int v13; // esi
  int v14; // esi
  int v15; // edx
  int v16; // edi
  int v17; // ST28_4
  int v18; // ST2C_4
  int v19; // ST30_4
  int v20; // eax
  _DWORD *v21; // eax
  int v22; // esi
  int v23; // edx
  int v24; // ST14_4
  int v25; // ST18_4
  int v26; // ST1C_4
  int v27; // ST20_4
  int v28; // eax
  _DWORD *v29; // eax
  int v30; // [esp+10h] [ebp-24h]
  char v31; // [esp+38h] [ebp+4h]

  v2 = *(_DWORD *)(a2 + 16);
  v31 = 1;
  if ( v2 <= 0 )
    goto LABEL_16;
  do
  {
    v3 = *this;
    result = (v2 - 1) / 2;
    v5 = 16 * v2;
    if ( *(_QWORD *)(16 * v2 + *this + 8) >= *(_QWORD *)(16 * result + *this + 8) )
      break;
    v6 = *(_DWORD *)(v5 + v3);
    v7 = *(_DWORD *)(v5 + v3 + 4);
    v8 = *(_DWORD *)(v5 + v3 + 8);
    v9 = *(_DWORD *)(v5 + v3 + 12);
    *(_DWORD *)(v5 + v3) = *(_DWORD *)(16 * result + v3);
    *(_DWORD *)(v5 + v3 + 4) = *(_DWORD *)(16 * result + v3 + 4);
    *(_DWORD *)(v5 + v3 + 8) = *(_DWORD *)(16 * result + v3 + 8);
    *(_DWORD *)(v5 + v3 + 12) = *(_DWORD *)(16 * result + v3 + 12);
    v10 = *this;
    *(_DWORD *)(v10 + 16 * result) = v6;
    v11 = (_DWORD *)(16 * result + v10);
    v11[1] = v7;
    v11[2] = v8;
    v11[3] = v9;
    *(_DWORD *)(*(_DWORD *)(v5 + *this) + 16) = v2;
    *(_DWORD *)(*(_DWORD *)(16 * result + *this) + 16) = result;
    v2 = (v2 - 1) / 2;
    v31 = 0;
  }
  while ( result > 0 );
  if ( v31 )
  {
LABEL_16:
    result = this[2];
    for ( i = 2 * v2 + 1; i < result; i = 2 * v2 + 1 )
    {
      v13 = 2 * v2 + 2;
      v30 = 2 * v2 + 2;
      if ( v13 >= result
        || (result = *this, v14 = 16 * v13, *(_QWORD *)(16 * i + *this + 8) < *(_QWORD *)(v14 + *this + 8)) )
      {
        result = *this;
        v22 = 16 * i;
        v23 = 16 * v2;
        if ( *(_QWORD *)(16 * i + *this + 8) >= *(_QWORD *)(16 * v2 + *this + 8) )
          return result;
        v24 = *(_DWORD *)(v23 + result);
        v25 = *(_DWORD *)(v23 + result + 4);
        v26 = *(_DWORD *)(v23 + result + 8);
        v27 = *(_DWORD *)(v23 + result + 12);
        *(_DWORD *)(v23 + result) = *(_DWORD *)(v22 + result);
        *(_DWORD *)(v23 + result + 4) = *(_DWORD *)(v22 + result + 4);
        *(_DWORD *)(v23 + result + 8) = *(_DWORD *)(v22 + result + 8);
        *(_DWORD *)(v23 + result + 12) = *(_DWORD *)(v22 + result + 12);
        v28 = *this;
        *(_DWORD *)(v28 + v22) = v24;
        v29 = (_DWORD *)(v22 + v28);
        v29[1] = v25;
        v29[2] = v26;
        v29[3] = v27;
        *(_DWORD *)(*(_DWORD *)(v23 + *this) + 16) = v2;
        *(_DWORD *)(*(_DWORD *)(v22 + *this) + 16) = i;
        v2 = i;
      }
      else
      {
        v15 = 16 * v2;
        if ( *(_QWORD *)(v14 + *this + 8) >= *(_QWORD *)(16 * v2 + *this + 8) )
          return result;
        v16 = *(_DWORD *)(v15 + result);
        v17 = *(_DWORD *)(v15 + result + 4);
        v18 = *(_DWORD *)(v15 + result + 8);
        v19 = *(_DWORD *)(v15 + result + 12);
        *(_DWORD *)(v15 + result) = *(_DWORD *)(v14 + result);
        *(_DWORD *)(v15 + result + 4) = *(_DWORD *)(v14 + result + 4);
        *(_DWORD *)(v15 + result + 8) = *(_DWORD *)(v14 + result + 8);
        *(_DWORD *)(v15 + result + 12) = *(_DWORD *)(v14 + result + 12);
        v20 = *this;
        *(_DWORD *)(v20 + v14) = v16;
        v21 = (_DWORD *)(v14 + v20);
        v21[1] = v17;
        v21[2] = v18;
        v21[3] = v19;
        *(_DWORD *)(*(_DWORD *)(v15 + *this) + 16) = v2;
        v2 = 2 * v2 + 2;
        *(_DWORD *)(*(_DWORD *)(v14 + *this) + 16) = v30;
      }
      result = this[2];
    }
  }
  return result;
}

//----- (00485BB0) --------------------------------------------------------
int __thiscall sub_485BB0(int *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // edx
  int v8; // eax
  int v9; // eax
  int v10; // edi
  _DWORD *v11; // eax

  v4 = *(_DWORD *)(a2 + 16);
  if ( v4 == -1 )
  {
    v5 = this[2];
    if ( v5 < this[1] )
    {
      *(_DWORD *)(16 * v5 + *this) = a2;
      v7 = *this;
      v8 = 16 * this[2];
      *(_DWORD *)(v8 + v7 + 8) = a3;
      *(_DWORD *)(v8 + v7 + 12) = a4;
      *(_DWORD *)(*(_DWORD *)(16 * this[2] + *this) + 16) = this[2];
      ++this[2];
      sub_485930(this, a2);
      result = a2;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    v9 = 16 * v4;
    v10 = *(_DWORD *)(v9 + *this + 8);
    v11 = (_DWORD *)(v9 + *this + 8);
    if ( v10 != a3 || v11[1] != a4 )
    {
      *v11 = a3;
      v11[1] = a4;
      sub_485930(this, a2);
    }
    result = a2;
  }
  return result;
}

//----- (00485C50) --------------------------------------------------------
void __thiscall sub_485C50(LPCRITICAL_SECTION *this, int a2, unsigned int a3, int a4)
{
  LPCRITICAL_SECTION *v4; // esi
  LPCRITICAL_SECTION *v5; // ebx
  LPCRITICAL_SECTION v6; // eax
  int v7; // edx
  int v8; // edi
  int *v9; // ecx

  v4 = this;
  v5 = this + 153;
  sub_4808E0(this + 153);
  v6 = v4[131];
  v7 = a4;
  if ( a4 > (signed int)v6 )
  {
    v8 = a3;
  }
  else if ( a4 < (signed int)v6 || (v8 = a3, a3 < (unsigned int)v4[130]) )
  {
    v8 = (int)v4[130];
    v7 = (int)v4[131];
  }
  v9 = (int *)v4[128];
  if ( v9 )
    sub_485BB0(v9, a2, v8, v7);
  sub_4808F0(v5);
}

//----- (00485CB0) --------------------------------------------------------
void __thiscall sub_485CB0(int this)
{
  int v1; // eax
  LPCRITICAL_SECTION *v2; // ecx

  v1 = this;
  if ( !*(_BYTE *)(this + 504) )
  {
    v2 = *(LPCRITICAL_SECTION **)(this + 140);
    if ( v2 )
      sub_485C50(v2, v1, 0, 0);
  }
}

//----- (00485CD0) --------------------------------------------------------
void *__thiscall sub_485CD0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_483180((LPCRITICAL_SECTION *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (00485CF0) --------------------------------------------------------
void __thiscall sub_485CF0(int this, __int64 a2)
{
  unsigned __int16 v2; // dx
  __int64 v3; // rdi
  __int64 v4; // rax
  __int64 v5; // rax

  if ( SHIDWORD(a2) >= 4 )
  {
    HIBYTE(v2) = *(_BYTE *)(a2 + 2);
    HIDWORD(v3) = *(_DWORD *)(this + 100);
    LOBYTE(v2) = *(_BYTE *)(a2 + 3);
    v4 = v2;
    HIDWORD(v5) = HIDWORD(v3) | HIDWORD(v4);
    LODWORD(v5) = *(_DWORD *)(this + 96) & 0xFFFF0000 | v5;
    LODWORD(v3) = *(_DWORD *)(this + 96);
    if ( v5 > v3 )
      v5 -= 0x10000i64;
    sub_48B2F0(this, v5);
  }
  else
  {
    sub_483CF0(*(_DWORD **)(this + 48), (void *)a2, HIDWORD(a2), 11);
  }
}

//----- (00485DA0) --------------------------------------------------------
int __cdecl sub_485DA0(int a1)
{
  int v1; // edi
  unsigned int v2; // esi
  int v3; // ecx
  int result; // eax

  v1 = a1;
  if ( !(a1 % 2) )
    v1 = a1 + 1;
LABEL_3:
  v2 = 0;
  while ( 1 )
  {
    v3 = dword_539000[v2];
    result = v1;
    if ( v3 * v3 >= v1 )
      return result;
    if ( !(v1 % v3) )
    {
      v1 += 2;
      goto LABEL_3;
    }
    ++v2;
    if ( v2 >= 1000 )
      return v1;
  }
}
// 539000: using guessed type int dword_539000[];

//----- (00485E20) --------------------------------------------------------
int __stdcall sub_485E20(char a1, int a2)
{
  int v2; // eax

  v2 = sub_480AE0(&a1);
  return (a2 ^ v2) & 0x7FFFFFFF;
}

//----- (00485E90) --------------------------------------------------------
size_t __stdcall sub_485E90(int a1, void *Dst, void *Src, size_t Size)
{
  memcpy(Dst, Src, Size);
  return Size;
}

//----- (00485EB0) --------------------------------------------------------
size_t __stdcall sub_485EB0(int a1, void *Dst, void *Src, size_t Size)
{
  memcpy(Dst, Src, Size);
  return Size;
}

//----- (00485ED0) --------------------------------------------------------
size_t __stdcall sub_485ED0(int a1, void *Dst, void *Src, size_t Size)
{
  memcpy(Dst, Src, Size);
  return Size;
}

//----- (00485EF0) --------------------------------------------------------
size_t __stdcall sub_485EF0(int a1, void *Dst, void *Src, size_t Size)
{
  memcpy(Dst, Src, Size);
  return Size;
}

//----- (00486010) --------------------------------------------------------
void __thiscall sub_486010(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  struct _RTL_CRITICAL_SECTION *v3; // ebp
  struct _RTL_CRITICAL_SECTION *v4; // ST28_4

  v1 = this;
  v2 = this + 149;
  sub_4808E0(this + 149);
  sub_4808E0(v1 + 144);
  v3 = v1[142];
  v4 = v1[143];
  sub_4808F0(v1 + 144);
  v1[202] = v3;
  v1[203] = v4;
  memset(v1 + 156, 0, 0xB8u);
  sub_4808F0(v2);
}

//----- (00486280) --------------------------------------------------------
int __thiscall sub_486280(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  LPCRITICAL_SECTION v3; // ebp
  unsigned int v4; // ebx
  LPCRITICAL_SECTION v6; // edi
  int v7; // ebx
  LPCRITICAL_SECTION v8; // ecx
  int v9; // edx
  unsigned __int8 v10; // cf
  char v11; // [esp+10h] [ebp-14h]
  int v12; // [esp+14h] [ebp-10h]
  int v13; // [esp+18h] [ebp-Ch]
  LPCRITICAL_SECTION v14; // [esp+1Ch] [ebp-8h]
  unsigned int v15; // [esp+20h] [ebp-4h]

  v1 = this;
  v2 = this + 144;
  sub_4808E0(this + 144);
  v3 = v1[142];
  v4 = (unsigned int)v1[143];
  v14 = v1[142];
  v15 = v4;
  sub_4808F0(v2);
  if ( (signed int)v1[98] <= 0 || (signed __int64)__PAIR__(v4, (unsigned int)v3) >= *((_QWORD *)v1 + 103) )
  {
    unknown_libname_1(&v11);
    v12 = 0;
    while ( 1 )
    {
      v6 = v1[105];
      v7 = ((int (__stdcall *)(_DWORD, LPCRITICAL_SECTION, char *, int *))v1[132]->DebugInfo->ProcessLocksList.Blink)(
             **((_DWORD **)&v1[104]->DebugInfo + (_DWORD)v6),
             v1[20],
             &v11,
             &v12);
      if ( v7 < 0 )
        break;
      if ( *((float *)v1 + 97) > 0.0 )
      {
        v13 = sub_480FB0((int *)v1 + 106) % 10000;
        if ( *((float *)v1 + 97) * 100.0 > (double)v13 )
          continue;
      }
      v8 = v1[98];
      if ( (signed int)v8 > 0 )
        *((_QWORD *)v1 + 103) = __PAIR__(v15, (unsigned int)v3) + 1000 * v7 / (signed int)v8;
      *(_DWORD *)(*((_DWORD *)&v1[104]->DebugInfo + (_DWORD)v6) + 12) = v7;
      sub_480990((_DWORD *)(*((_DWORD *)&v1[104]->DebugInfo + (_DWORD)v6) + 4), &v11);
      *(_DWORD *)(*((_DWORD *)&v1[104]->DebugInfo + (_DWORD)v6) + 8) = v12;
      v1[105] = (LPCRITICAL_SECTION)(((signed int)&v1[105]->DebugInfo + 1) % (signed int)v1[10]);
      sub_4808E0(v1 + 149);
      v9 = (int)v14;
      v1[135] = (LPCRITICAL_SECTION)v15;
      v1[134] = (LPCRITICAL_SECTION)v9;
      v10 = __CFADD__(v7, v1[160]);
      v1[160] = (LPCRITICAL_SECTION)((char *)v1[160] + v7);
      v1[161] = (LPCRITICAL_SECTION)((char *)v1[161] + (v7 >> 31) + v10);
      ++*((_QWORD *)v1 + 81);
      sub_4808F0(v1 + 149);
      return *((_DWORD *)&v1[104]->DebugInfo + (_DWORD)v6);
    }
  }
  return 0;
}
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (00486440) --------------------------------------------------------
void __thiscall sub_486440(int this, int a2, int a3, char a4, int a5)
{
  int v5; // esi
  unsigned __int8 v6; // cf

  v5 = this;
  if ( (*(float *)(this + 384) <= 0.0
     || *(float *)(this + 384) * 100.0 <= (double)(sub_480FB0((int *)(this + 424)) % 10000))
    && !(*(unsigned __int8 (__stdcall **)(int, int, char *, int))(**(_DWORD **)(v5 + 528) + 16))(a2, a3, &a4, a5) )
  {
    sub_4808E0((LPCRITICAL_SECTION *)(v5 + 596));
    v6 = __CFADD__((*(_DWORD *)(v5 + 752))++, 1);
    *(_DWORD *)(v5 + 756) += v6;
    sub_4808F0((LPCRITICAL_SECTION *)(v5 + 596));
  }
}

//----- (004864F0) --------------------------------------------------------
int __thiscall sub_4864F0(_DWORD *this, char a2, int a3)
{
  int v3; // ecx
  _DWORD *v5; // [esp+0h] [ebp-4h]

  v5 = this;
  v3 = this[132];
  LOWORD(v5) = 7168;
  return (*(int (__stdcall **)(_DWORD **, signed int, char *, int))(*(_DWORD *)v3 + 20))(&v5, 2, &a2, a3);
}

//----- (00486660) --------------------------------------------------------
_DWORD *__thiscall sub_486660(_DWORD *this, void (***a2)(void), int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  sub_480BD0(this);
  *v3 = off_518620;
  v3[5] = a2;
  (**a2)();
  v3[7] = a3;
  *((_BYTE *)v3 + 24) = 0;
  return v3;
}
// 518620: using guessed type int (*off_518620[4])();

//----- (00486770) --------------------------------------------------------
void __thiscall sub_486770(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // edi
  LPCRITICAL_SECTION *v2; // ebx
  LPCRITICAL_SECTION v3; // esi
  HANDLE v4; // ebp
  LPCRITICAL_SECTION v5; // eax
  int v6; // ecx
  struct _RTL_CRITICAL_SECTION *v7; // edx
  int v8; // ecx
  struct _RTL_CRITICAL_SECTION *v9; // [esp+14h] [ebp-14h]
  int v10; // [esp+18h] [ebp-10h]

  v1 = this;
  v2 = this + 150;
  v10 = (int)(this + 150);
  sub_4808E0(this + 150);
  v3 = v1[120];
  if ( v3 )
  {
    do
    {
      v9 = *(struct _RTL_CRITICAL_SECTION **)((char *)&v3->LockCount + (_DWORD)v1[122]);
      sub_4808E0((LPCRITICAL_SECTION *)&v3[22].SpinCount);
      v4 = v3[5].OwningThread;
      sub_4808F0((LPCRITICAL_SECTION *)&v3[22].SpinCount);
      if ( v4 == HANDLE_FLAG_PROTECT_FROM_CLOSE )
      {
        v5 = v1[122];
        v6 = *(int *)((char *)&v3->DebugInfo + (_DWORD)v5);
        v7 = *(struct _RTL_CRITICAL_SECTION **)((char *)&v3->LockCount + (_DWORD)v5);
        if ( v6 )
          *(LONG *)((char *)&v5->LockCount + v6) = (LONG)v7;
        else
          v1[120] = v7;
        v8 = *(LONG *)((char *)&v3->LockCount + (_DWORD)v5);
        if ( v8 )
          *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v1[122]->DebugInfo + v8) = *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v3->DebugInfo + (_DWORD)v5);
        else
          v1[121] = *(LPCRITICAL_SECTION *)((char *)&v3->DebugInfo + (_DWORD)v5);
        *(LONG *)((char *)&v3->LockCount + (_DWORD)v5) = 0;
        *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v3->DebugInfo + (_DWORD)v5) = 0;
        v1[125] = (LPCRITICAL_SECTION)((char *)v1[125] - 1);
        ((void (__thiscall *)(LPCRITICAL_SECTION))v3->DebugInfo->CriticalSection)(v3);
      }
      v3 = v9;
    }
    while ( v9 );
    v2 = (LPCRITICAL_SECTION *)v10;
  }
  sub_4808F0(v2);
}

//----- (00486880) --------------------------------------------------------
void __thiscall sub_486880(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // ebx
  struct _RTL_CRITICAL_SECTION_DEBUG *v4; // edi
  LPCRITICAL_SECTION v5; // eax
  struct _LIST_ENTRY *v6; // ebp
  int v7; // eax

  v2 = this;
  v3 = this + 153;
  sub_4808E0(this + 153);
  v4 = a2;
  (**(void (__thiscall ***)(struct _RTL_CRITICAL_SECTION_DEBUG *))&a2->Type)(a2);
  *(struct _RTL_CRITICAL_SECTION **)((char *)&v4->CriticalSection + (_DWORD)v2[114]) = v2[112];
  v5 = v2[112];
  if ( v5 )
    *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v2[114]->DebugInfo + (_DWORD)v5) = v4;
  else
    v2[113] = (LPCRITICAL_SECTION)v4;
  v2[117] = (LPCRITICAL_SECTION)((char *)v2[117] + 1);
  v2[112] = (LPCRITICAL_SECTION)v4;
  sub_480980(&a2, &v4[3].ProcessLocksList.Flink);
  v6 = v4[3].ProcessLocksList.Blink;
  v7 = sub_480AE0(&a2);
  sub_489A00((signed int *)v2[126], (int)v4, ((unsigned int)v6 ^ v7) & 0x7FFFFFFF);
  sub_489BA0((signed int *)v2[127], (int)v4, v4[4].EntryCount);
  sub_4808F0(v3);
}

//----- (00486B10) --------------------------------------------------------
void __thiscall sub_486B10(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION *a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // ebx
  LPCRITICAL_SECTION v4; // eax

  v2 = this;
  v3 = this + 150;
  sub_4808E0(this + 150);
  (*(void (__thiscall **)(struct _RTL_CRITICAL_SECTION *))a2->DebugInfo)(a2);
  *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v2[122]->DebugInfo + (_DWORD)a2) = (PRTL_CRITICAL_SECTION_DEBUG)v2[121];
  v4 = v2[121];
  if ( v4 )
    *(LONG *)((char *)&v4->LockCount + (_DWORD)v2[122]) = (LONG)a2;
  else
    v2[120] = a2;
  v2[125] = (LPCRITICAL_SECTION)((char *)v2[125] + 1);
  v2[121] = a2;
  sub_4808F0(v3);
}

//----- (00486CF0) --------------------------------------------------------
int __thiscall sub_486CF0(LPCRITICAL_SECTION *this, char a2, int a3)
{
  LPCRITICAL_SECTION *v3; // esi
  LPCRITICAL_SECTION *v4; // edi
  int v5; // eax
  int v6; // ebx
  int v7; // esi
  int *v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // eax
  int result; // eax
  char v13; // [esp+10h] [ebp-14h]
  LPCRITICAL_SECTION *v14; // [esp+14h] [ebp-10h]
  int v15; // [esp+20h] [ebp-4h]

  v3 = this;
  v4 = this + 153;
  v14 = this + 153;
  sub_4808E0(this + 153);
  v15 = 0;
  sub_480980(&v13, &a2);
  v5 = sub_480AE0(&v13);
  v6 = a3;
  v7 = sub_489B00(v3[126], (a3 ^ v5) & 0x7FFFFFFF);
  if ( v7 )
  {
    while ( !sub_480A30((_DWORD *)(v7 + 104), &a2) || *(_DWORD *)(v7 + 108) != v6 )
    {
      if ( v7 )
        v8 = (int *)(v7 + 20);
      else
        v8 = 0;
      v9 = *v8;
      if ( v7 )
        v10 = v7 + 20;
      else
        v10 = 0;
      v11 = *(_DWORD *)(v10 + 4);
      if ( v11 )
      {
        while ( *(_DWORD *)(v11 + 20) != v9 )
        {
          v11 = *(_DWORD *)(v11 + 24);
          if ( !v11 )
            goto LABEL_13;
        }
        v7 = v11;
        if ( v11 )
          continue;
      }
      goto LABEL_13;
    }
    (**(void (__thiscall ***)(int))v7)(v7);
    v15 = -1;
    sub_4808F0(v4);
    result = v7;
  }
  else
  {
LABEL_13:
    v15 = -1;
    sub_4808F0(v4);
    result = 0;
  }
  return result;
}

//----- (00486E10) --------------------------------------------------------
int __thiscall sub_486E10(LPCRITICAL_SECTION *this, unsigned int a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi
  int v4; // esi
  int v5; // eax
  int result; // eax

  v2 = this;
  v3 = this + 153;
  sub_4808E0(this + 153);
  v4 = sub_489CA0(v2[127], a2);
  if ( v4 )
  {
    while ( *(_DWORD *)(v4 + 144) != a2 )
    {
      v5 = *(_DWORD *)(v4 + 32);
      if ( v5 )
      {
        while ( *(_DWORD *)(v5 + 28) != *(_DWORD *)(v4 + 28) )
        {
          v5 = *(_DWORD *)(v5 + 32);
          if ( !v5 )
            goto LABEL_6;
        }
        v4 = v5;
        if ( v5 )
          continue;
      }
      goto LABEL_6;
    }
    (**(void (__thiscall ***)(int))v4)(v4);
    sub_4808F0(v3);
    result = v4;
  }
  else
  {
LABEL_6:
    sub_4808F0(v3);
    result = 0;
  }
  return result;
}

//----- (00486EE0) --------------------------------------------------------
_DWORD *__thiscall sub_486EE0(int this, void *Src, size_t Size, void *a4, size_t a5)
{
  int v5; // esi
  int v6; // eax
  int v7; // edi
  struct _RTL_CRITICAL_SECTION_DEBUG *v8; // eax
  struct _RTL_CRITICAL_SECTION_DEBUG *v9; // eax

  v5 = this;
  if ( *(_DWORD *)(this + 100) <= 0 || (signed int)(a5 + Size) > *(_DWORD *)(this + 108) )
    return sub_4811C0(Src, Size, a4, a5);
  sub_4808E0((LPCRITICAL_SECTION *)(this + 584));
  v6 = *(_DWORD *)(v5 + 904);
  if ( !v6 || (v7 = sub_489800((_DWORD *)(v5 + 900), v6)) == 0 )
  {
    v8 = (struct _RTL_CRITICAL_SECTION_DEBUG *)operator new(0x34u);
    if ( v8 )
      v9 = sub_48A960(v8, (LPCRITICAL_SECTION *)v5, *(_DWORD *)(v5 + 108));
    else
      v9 = 0;
    v7 = (int)v9;
  }
  sub_48A700(v7, Src, Size, a4, a5);
  sub_4808F0((LPCRITICAL_SECTION *)(v5 + 584));
  return (_DWORD *)v7;
}

//----- (00486FE0) --------------------------------------------------------
void __thiscall sub_486FE0(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi
  LPCRITICAL_SECTION v4; // ecx

  v2 = this;
  v3 = this + 146;
  sub_4808E0(this + 146);
  *(struct _RTL_CRITICAL_SECTION **)((char *)&a2->CriticalSection + (_DWORD)v2[223]) = v2[221];
  v4 = v2[221];
  if ( v4 )
    *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v2[223]->DebugInfo + (_DWORD)v4) = a2;
  else
    v2[222] = (LPCRITICAL_SECTION)a2;
  v2[224] = (LPCRITICAL_SECTION)((char *)v2[224] + 1);
  v2[221] = (LPCRITICAL_SECTION)a2;
  sub_4808F0(v3);
}

//----- (00487040) --------------------------------------------------------
void __thiscall sub_487040(LPCRITICAL_SECTION *this, int a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi

  v2 = this;
  v3 = this + 146;
  sub_4808E0(this + 146);
  sub_489800(v2 + 220, a2);
  sub_4808F0(v3);
}

//----- (00487070) --------------------------------------------------------
void __thiscall sub_487070(LPCRITICAL_SECTION *this, LONG a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi
  LPCRITICAL_SECTION v4; // ecx

  v2 = this;
  v3 = this + 147;
  sub_4808E0(this + 147);
  *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v2[238]->DebugInfo + a2) = (PRTL_CRITICAL_SECTION_DEBUG)v2[237];
  v4 = v2[237];
  if ( v4 )
    *(LONG *)((char *)&v4->LockCount + (_DWORD)v2[238]) = a2;
  else
    v2[236] = (LPCRITICAL_SECTION)a2;
  v2[239] = (LPCRITICAL_SECTION)((char *)v2[239] + 1);
  v2[237] = (LPCRITICAL_SECTION)a2;
  if ( *(_DWORD *)(a2 + 8) )
    v2[107] = (LPCRITICAL_SECTION)((char *)v2[107]
                                 + (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(a2 + 8) + 28))(*(_DWORD *)(a2 + 8)));
  sub_4808F0(v3);
}

//----- (004872F0) --------------------------------------------------------
_DWORD *__thiscall sub_4872F0(_DWORD *this, void *Src, size_t Size, char a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  _DWORD *v8; // edi
  void *v9; // eax
  int v10; // ecx
  int v11; // edx

  v7 = this;
  v8 = this + 4;
  *this = 0;
  this[1] = 0;
  unknown_libname_1(this + 4);
  v9 = operator new(Size);
  v7[2] = v9;
  v7[3] = Size;
  memcpy(v9, Src, Size);
  sub_480990(v8, &a4);
  v10 = a6;
  v11 = a7;
  v7[5] = a5;
  v7[6] = v10;
  v7[7] = v11;
  return v7;
}
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (00487370) --------------------------------------------------------
void __thiscall sub_487370(int this)
{
  LPCRITICAL_SECTION *v1; // esi

  v1 = (LPCRITICAL_SECTION *)this;
  *(_DWORD *)this = off_518620;
  *(_BYTE *)(this + 24) = 1;
  if ( sub_480960((_DWORD *)this) )
  {
    do
      (*(void (__stdcall **)(signed int))(*(_DWORD *)v1[5][22].DebugInfo + 40))(10);
    while ( ((unsigned __int8 (__thiscall *)(LPCRITICAL_SECTION *))(*v1)[1].DebugInfo)(v1) );
  }
  ((void (*)(void))v1[5]->DebugInfo->CriticalSection)();
  sub_480B50(v1);
}
// 518620: using guessed type int (*off_518620[4])();

//----- (00487400) --------------------------------------------------------
_DWORD *__thiscall sub_487400(_DWORD *this, int a2)
{
  _DWORD *v2; // ebp
  bool v3; // zf
  bool v4; // sf
  unsigned __int8 v5; // of
  size_t *v6; // edi
  int *v7; // eax
  int v8; // ecx
  int *v9; // eax
  int *v10; // ecx
  int *v11; // esi
  int *v12; // eax
  int v13; // edx
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  void *v16; // eax
  int v17; // edx
  _DWORD *v18; // esi
  int v19; // eax
  int v20; // edi
  int v21; // esi
  struct _RTL_CRITICAL_SECTION_DEBUG *v22; // eax
  struct _RTL_CRITICAL_SECTION_DEBUG *v23; // eax
  _DWORD *v24; // esi
  int v25; // edi
  int v26; // eax
  int v27; // ecx
  _DWORD *v28; // eax
  _DWORD *v29; // esi
  int v30; // ST0C_4
  _DWORD *v31; // esi
  int *v32; // eax
  int v33; // ST0C_4
  int v34; // esi
  int v35; // ecx
  int v36; // ST08_4
  int v37; // edx
  _DWORD *result; // eax
  int v39; // eax
  int v40; // ecx
  int v41; // edi
  int v42; // esi
  int v43; // ecx
  int v44; // ST08_4
  int v45; // eax
  size_t Size; // [esp+14h] [ebp-1Ch]
  _DWORD *v47; // [esp+18h] [ebp-18h]
  _DWORD *v48; // [esp+1Ch] [ebp-14h]
  int v49; // [esp+20h] [ebp-10h]
  int v50; // [esp+2Ch] [ebp-4h]

  v2 = this;
  v47 = this;
  sub_480E10(this);
  v50 = 0;
  *v2 = &UdpLibrary::UdpManager::`vftable';
  sub_40118B(0);
  *((float *)v2 + 97) = 0.0;
  v2[98] = 0;
  *((float *)v2 + 96) = 0.0;
  v2[99] = 0;
  v2[101] = 0;
  v2[100] = 0;
  v2[102] = 0;
  v2[103] = 0;
  v2[114] = 116;
  v2[115] = 0;
  v2[110] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
  v2[112] = 0;
  v2[113] = 0;
  v2[116] = 0;
  v2[117] = 0;
  v2[122] = 124;
  v2[123] = 0;
  v2[118] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
  v2[120] = 0;
  v2[121] = 0;
  v2[124] = 0;
  v2[125] = 0;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 144);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 145);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 146);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 147);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 148);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 149);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 150);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 151);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 152);
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 153);
  LOBYTE(v50) = 12;
  sub_4808A0((struct _RTL_CRITICAL_SECTION **)v2 + 154);
  v2[210] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
  v2[211] = 0;
  v2[212] = 0;
  v2[213] = 0;
  v2[214] = 0;
  v2[215] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
  v2[216] = 0;
  v2[217] = 0;
  v2[218] = 0;
  v2[219] = 0;
  v2[220] = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
  v2[221] = 0;
  v2[222] = 0;
  v2[223] = 44;
  v2[224] = 0;
  v2[225] = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
  v2[226] = 0;
  v2[227] = 0;
  v2[228] = 36;
  v2[229] = 0;
  v2[230] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
  v2[231] = 0;
  v2[232] = 0;
  v2[233] = 16;
  v2[234] = 0;
  v2[235] = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
  v2[236] = 0;
  v2[237] = 0;
  v2[238] = 16;
  v2[239] = 0;
  qmemcpy(v2 + 4, (const void *)a2, 0x170u);
  v5 = __OFSUB__(v2[20], 0x2000);
  v3 = v2[20] == 0x2000;
  v4 = v2[20] - 0x2000 < 0;
  v6 = v2 + 20;
  LOBYTE(v50) = 19;
  a2 = 0x2000;
  v7 = &a2;
  if ( (unsigned __int8)(v4 ^ v5) | v3 )
    v7 = v2 + 20;
  v3 = v2[19] == -1;
  v8 = *v7;
  v9 = v2 + 19;
  *v6 = v8;
  if ( v3 )
    *v9 = v8;
  if ( v2[27] == -1 )
    v2[27] = v8;
  v10 = v2 + 20;
  if ( (signed int)*v6 >= *v9 )
    v10 = v2 + 19;
  v11 = v2 + 10;
  *v9 = *v10;
  v5 = __OFSUB__(v2[10], 1);
  v3 = v2[10] == 1;
  v4 = v2[10] - 1 < 0;
  a2 = 1;
  v12 = v2 + 10;
  if ( (unsigned __int8)(v4 ^ v5) | v3 )
    v12 = &a2;
  v13 = *v12;
  v14 = (_DWORD *)v2[90];
  *v11 = v13;
  v2[105] = 0;
  v2[109] = 0;
  v2[108] = 0;
  if ( !v14 )
  {
    v15 = operator new(8u);
    a2 = (int)v15;
    LOBYTE(v50) = 20;
    if ( v15 )
      v14 = sub_480C40(v15);
    else
      v14 = 0;
    LOBYTE(v50) = 19;
  }
  v2[132] = v14;
  v16 = operator new(4 * *v11);
  v3 = *v11 == 0;
  v4 = *v11 < 0;
  v2[104] = v16;
  a2 = 0;
  if ( !v4 && !v3 )
  {
    do
    {
      v18 = operator new(0x10u);
      v48 = v18;
      LOBYTE(v50) = 21;
      if ( v18 )
      {
        Size = *v6;
        unknown_libname_1(v18 + 1);
        *v18 = operator new(Size);
        v18[2] = 0;
        v18[3] = 0;
      }
      else
      {
        v18 = 0;
      }
      v19 = a2;
      v17 = v2[104];
      *(_DWORD *)(v17 + 4 * a2) = v18;
      v5 = __OFSUB__(++v19, v2[10]);
      v4 = v19 - v2[10] < 0;
      LOBYTE(v50) = 19;
      a2 = v19;
    }
    while ( v4 ^ v5 );
  }
  sub_40167C(v2, v17);
  sub_486010((LPCRITICAL_SECTION *)v2);
  sub_4808E0((LPCRITICAL_SECTION *)v2 + 144);
  v20 = v2[142];
  v49 = v2[143];
  sub_4808F0((LPCRITICAL_SECTION *)v2 + 144);
  v21 = 0;
  v3 = v2[26] == 0;
  v4 = v2[26] < 0;
  v2[106] = v20;
  v2[134] = 0;
  v2[135] = 0;
  v2[136] = 0;
  v2[137] = 0;
  v2[138] = 0;
  v2[139] = 0;
  v2[140] = 0;
  v2[130] = 0;
  v2[131] = 0;
  *((_BYTE *)v2 + 532) = 0;
  v2[107] = 0;
  if ( !v4 && !v3 )
  {
    do
    {
      if ( v21 >= v2[25] )
        break;
      v22 = (struct _RTL_CRITICAL_SECTION_DEBUG *)operator new(0x34u);
      a2 = (int)v22;
      LOBYTE(v50) = 22;
      v23 = v22 ? sub_48A960(v22, (LPCRITICAL_SECTION *)v2, v2[27]) : 0;
      LOBYTE(v50) = 19;
      sub_48A0A0((LPCRITICAL_SECTION *)v2, v23);
      ++v21;
    }
    while ( v21 < v2[26] );
  }
  v3 = *((_BYTE *)v2 + 88) == 0;
  v2[208] = 0;
  v2[209] = 0;
  v2[206] = 0;
  v2[207] = 0;
  v2[204] = 0;
  if ( v3 )
  {
    v24 = operator new(0xCu);
    a2 = (int)v24;
    LOBYTE(v50) = 23;
    if ( v24 )
    {
      v25 = v2[5];
      v26 = 16 * v2[5];
      v27 = (unsigned __int64)(unsigned int)v2[5] >> 28 != 0;
      v24[2] = 0;
      v24[1] = v25;
      v28 = operator new(v26 | -v27);
      *v24 = v28;
      *v28 = 0;
    }
    else
    {
      v24 = 0;
    }
    LOBYTE(v50) = 19;
    v2[128] = v24;
  }
  else
  {
    v2[128] = 0;
  }
  v29 = operator new(0x10u);
  a2 = (int)v29;
  LOBYTE(v50) = 24;
  if ( v29 )
  {
    v30 = v2[21];
    *v29 = 0;
    v29[1] = 0;
    v29[2] = 0;
    v29[3] = 0;
    sub_489E80(v29, v30);
  }
  else
  {
    v29 = 0;
  }
  v2[126] = v29;
  v31 = operator new(0x10u);
  v48 = v31;
  LOBYTE(v50) = 25;
  if ( v31 )
  {
    Size = v2[21] / 5;
    a2 = 10;
    v32 = &a2;
    if ( (signed int)Size >= 10 )
      v32 = (int *)&Size;
    v33 = *v32;
    *v31 = 0;
    v31[1] = 0;
    v31[2] = 0;
    v31[3] = 0;
    sub_489F90(v31, v33);
  }
  else
  {
    v31 = 0;
  }
  v3 = v2[7] == 0;
  LOBYTE(v50) = 19;
  v2[127] = v31;
  if ( v3 )
  {
    v34 = v2[6];
    (*(void (**)(void))(*(_DWORD *)v2[132] + 8))();
    v35 = v2[132];
    v36 = v2[8];
    v37 = v2[9];
    v2[141] = 0;
    v3 = (*(unsigned __int8 (__stdcall **)(int, int, int, _DWORD *))(*(_DWORD *)v35 + 4))(v34, v37, v36, v2 + 32) == 0;
    result = v2;
    if ( v3 )
      v2[141] = 2;
  }
  else
  {
    v39 = sub_480FB0(v2 + 106);
    v40 = v2[7];
    v41 = 0;
    a2 = v39 % v40;
    if ( v40 > 0 )
    {
      do
      {
        v42 = v2[6] + (v41 + a2) % v2[7];
        (*(void (**)(void))(*(_DWORD *)v2[132] + 8))();
        v43 = v2[132];
        v44 = v2[8];
        v45 = v2[9];
        v2[141] = 0;
        if ( (*(unsigned __int8 (__stdcall **)(int, int, int, _DWORD *))(*(_DWORD *)v43 + 4))(v42, v45, v44, v2 + 32) )
        {
          if ( v2[141] != 2 )
            break;
        }
        else
        {
          v2[141] = 2;
        }
        ++v41;
      }
      while ( v41 < v2[7] );
    }
    result = v2;
  }
  return result;
}
// 40118B: using guessed type _DWORD __stdcall sub_40118B(_DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
// 518664: using guessed type void *UdpLibrary::UdpManager::`vftable';

//----- (00487A70) --------------------------------------------------------
void __thiscall sub_487A70(LPCRITICAL_SECTION *this, int a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // ebx
  int *v4; // ecx

  v2 = this;
  v3 = this + 153;
  sub_4808E0(this + 153);
  v4 = (int *)v2[128];
  if ( v4 )
    sub_48A2A0(v4, a2);
  sub_489580(v2 + 110, a2);
  sub_489A70((int *)v2[126], a2);
  sub_489C10((int *)v2[127], a2);
  (*(void (__thiscall **)(int))(*(_DWORD *)a2 + 4))(a2);
  sub_4808F0(v3);
}

//----- (00487B20) --------------------------------------------------------
int *__thiscall sub_487B20(LPCRITICAL_SECTION *this, char *Source, int a3, int a4)
{
  int v4; // esi
  LPCRITICAL_SECTION *v5; // ebx
  char *v6; // eax
  int v7; // ebp
  int *v8; // ecx
  int v9; // eax
  int *v11; // edi
  int *v12; // esi
  int v13; // [esp-Ch] [ebp-240h]
  int *v14; // [esp-8h] [ebp-23Ch]
  int v15; // [esp-4h] [ebp-238h]
  char v16; // [esp+14h] [ebp-220h]
  int **v17; // [esp+18h] [ebp-21Ch]
  int *v18; // [esp+1Ch] [ebp-218h]
  LPCRITICAL_SECTION *v19; // [esp+20h] [ebp-214h]
  char Str; // [esp+24h] [ebp-210h]
  int v21; // [esp+230h] [ebp-4h]

  v4 = (int)this;
  v5 = this + 152;
  v19 = this + 152;
  sub_4808E0(this + 152);
  v21 = 0;
  strncpy(&Str, Source, 0x200u);
  v6 = strchr(&Str, 58);
  if ( v6 )
  {
    *v6 = 0;
    v7 = j__atol(v6 + 1);
  }
  else
  {
    v7 = a3;
  }
  if ( *(_DWORD *)(v4 + 468) >= *(_DWORD *)(v4 + 20) )
    goto LABEL_8;
  unknown_libname_1(&v16);
  if ( !(*(unsigned __int8 (__stdcall **)(char *, char *))(**(_DWORD **)(v4 + 528) + 32))(&v16, &Str) )
    goto LABEL_8;
  v15 = v7;
  v14 = v8;
  v17 = &v14;
  sub_480980(&v14, &v16);
  v9 = sub_486CF0((LPCRITICAL_SECTION *)v4, (char)v14, v15);
  if ( v9 )
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v9 + 4))(v9);
LABEL_8:
    v21 = -1;
    sub_4808F0(v5);
    return 0;
  }
  v11 = (int *)operator new(0x388u);
  v17 = (int **)v11;
  LOBYTE(v21) = 1;
  if ( v11 )
  {
    v15 = a4;
    v14 = (int *)v7;
    v13 = a4;
    v18 = &v13;
    sub_480980(&v13, &v16);
    v12 = sub_485510(v11, v4, v13, v14, v15);
  }
  else
  {
    v12 = 0;
  }
  v21 = -1;
  sub_4808F0(v5);
  return v12;
}
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (00487CB0) --------------------------------------------------------
int __thiscall sub_487CB0(int this)
{
  int v1; // edi
  int v3; // eax
  int i; // ebx
  _DWORD *v5; // esi
  size_t v6; // ebp
  void *Src; // ST24_4
  void *v8; // eax
  int v9; // edx
  int v10; // eax
  int v11; // eax
  int v12; // esi
  int v13; // ebx
  char v14; // [esp+18h] [ebp-20h]
  int v15; // [esp+1Ch] [ebp-1Ch]
  _DWORD *v16; // [esp+20h] [ebp-18h]
  int v17; // [esp+24h] [ebp-14h]
  int v18; // [esp+28h] [ebp-10h]
  int v19; // [esp+34h] [ebp-4h]

  v1 = this;
  if ( !*(_DWORD *)(this + 856) && !*(_DWORD *)(this + 412) )
    return sub_486280((LPCRITICAL_SECTION *)this);
  sub_4808E0((LPCRITICAL_SECTION *)(this + 576));
  v3 = *(_DWORD *)(v1 + 568);
  v18 = *(_DWORD *)(v1 + 572);
  v17 = v3;
  sub_4808F0((LPCRITICAL_SECTION *)(v1 + 576));
  for ( i = sub_486280((LPCRITICAL_SECTION *)v1); i; i = sub_486280((LPCRITICAL_SECTION *)v1) )
  {
    v5 = operator new(0x20u);
    v16 = v5;
    v19 = 0;
    if ( v5 )
    {
      sub_480980(&v14, (_DWORD *)(i + 4));
      v6 = *(_DWORD *)(i + 12);
      Src = *(void **)i;
      v15 = *(_DWORD *)(i + 8);
      *v5 = 0;
      v5[1] = 0;
      unknown_libname_1(v5 + 4);
      v8 = operator new(v6);
      v5[2] = v8;
      v5[3] = v6;
      memcpy(v8, Src, v6);
      sub_480990(v5 + 4, &v14);
      v9 = v17;
      v10 = v18;
      v5[5] = v15;
      v5[6] = v9;
      v5[7] = v10;
    }
    else
    {
      v5 = 0;
    }
    *(_DWORD *)((char *)v5 + *(_DWORD *)(v1 + 852)) = *(_DWORD *)(v1 + 848);
    v11 = *(_DWORD *)(v1 + 848);
    v19 = -1;
    if ( v11 )
      *(_DWORD *)(*(_DWORD *)(v1 + 852) + v11 + 4) = v5;
    else
      *(_DWORD *)(v1 + 844) = v5;
    ++*(_DWORD *)(v1 + 856);
    *(_DWORD *)(v1 + 848) = v5;
  }
  v12 = *(_DWORD *)(v1 + 844);
  if ( !v12 || sub_402220(*(_QWORD *)(v12 + 24)) < *(_DWORD *)(v1 + 412) )
    return 0;
  sub_489720((_DWORD *)(v1 + 840), v12);
  v13 = *(_DWORD *)(v1 + 420);
  memcpy(**(void ***)(*(_DWORD *)(v1 + 416) + 4 * v13), *(const void **)(v12 + 8), *(_DWORD *)(v12 + 12));
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v1 + 416) + 4 * v13) + 12) = *(_DWORD *)(v12 + 12);
  sub_480990((_DWORD *)(*(_DWORD *)(*(_DWORD *)(v1 + 416) + 4 * v13) + 4), (_DWORD *)(v12 + 16));
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v1 + 416) + 4 * v13) + 8) = *(_DWORD *)(v12 + 20);
  *(_DWORD *)(v1 + 420) = (*(_DWORD *)(v1 + 420) + 1) % *(_DWORD *)(v1 + 40);
  j__free(*(void **)(v12 + 8));
  j__free((void *)v12);
  return *(_DWORD *)(*(_DWORD *)(v1 + 416) + 4 * v13);
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);
// 480970: using guessed type int __thiscall unknown_libname_1(_DWORD);

//----- (00487F10) --------------------------------------------------------
void __thiscall sub_487F10(LPCRITICAL_SECTION *this, void *Src, size_t Size, char a4, int a5)
{
  int v5; // esi
  LPCRITICAL_SECTION *v6; // edi
  int v7; // ebp
  int v8; // ecx
  unsigned __int8 v9; // cf
  int v10; // ecx
  LPCRITICAL_SECTION *v11; // ebx
  int v12; // ecx
  signed int v13; // eax
  _DWORD *v14; // eax
  signed int v15; // ecx
  int v16; // edx
  int v17; // ebx
  int v18; // ecx
  _DWORD *v19; // eax
  int v20; // ecx
  unsigned int v21; // ebp
  unsigned int v22; // ebx
  unsigned __int64 v23; // rax
  bool v24; // zf
  bool v25; // sf
  unsigned __int8 v26; // of
  _DWORD *v27; // ecx
  unsigned __int64 *v28; // eax
  int v29; // [esp-10h] [ebp-40h]
  int v30; // [esp-Ch] [ebp-3Ch]
  int v31; // [esp-8h] [ebp-38h]
  int v32; // [esp-4h] [ebp-34h]
  unsigned __int64 v33; // [esp+14h] [ebp-1Ch]
  int v34; // [esp+20h] [ebp-10h]
  int v35; // [esp+2Ch] [ebp-4h]

  v5 = (int)this;
  v6 = this + 149;
  LODWORD(v33) = this + 149;
  sub_4808E0(this + 149);
  v35 = 0;
  sub_4808E0((LPCRITICAL_SECTION *)(v5 + 576));
  v7 = *(_DWORD *)(v5 + 568);
  v34 = *(_DWORD *)(v5 + 572);
  sub_4808F0((LPCRITICAL_SECTION *)(v5 + 576));
  v8 = v34;
  *(_DWORD *)(v5 + 544) = v7;
  v9 = __CFADD__(Size, *(_DWORD *)(v5 + 624));
  *(_DWORD *)(v5 + 624) += Size;
  *(_DWORD *)(v5 + 548) = v8;
  *(_DWORD *)(v5 + 628) += ((signed int)Size >> 31) + v9;
  v9 = __CFADD__((*(_DWORD *)(v5 + 632))++, 1);
  v35 = -1;
  *(_DWORD *)(v5 + 636) += v9;
  sub_4808F0(v6);
  if ( !*(_DWORD *)(v5 + 396) && !*(_DWORD *)(v5 + 408) )
  {
    v32 = a5;
    v31 = v10;
    a5 = (int)&v31;
    sub_480980(&v31, &a4);
    sub_486440(v5, (int)Src, Size, v31, v32);
    return;
  }
  v11 = (LPCRITICAL_SECTION *)(v5 + 604);
  sub_4808E0((LPCRITICAL_SECTION *)(v5 + 604));
  v13 = *(_DWORD *)(v5 + 400);
  v35 = 1;
  if ( v13 <= 0 || (signed int)(Size + *(_DWORD *)(v5 + 816)) <= v13 )
  {
    v32 = a5;
    v31 = v12;
    LODWORD(v33) = &v31;
    sub_480980(&v31, &a4);
    v14 = (_DWORD *)sub_486CF0((LPCRITICAL_SECTION *)v5, v31, v32);
    if ( v14 )
    {
      v15 = *(_DWORD *)(v5 + 404);
      if ( v15 > 0 && (signed int)(Size + v14[28]) > v15 )
      {
        (*(void (__thiscall **)(_DWORD *))(*v14 + 4))(v14);
        goto LABEL_24;
      }
      v16 = *v14;
      v14[28] += Size;
      (*(void (__thiscall **)(_DWORD *))(v16 + 4))(v14);
    }
    *(_DWORD *)(v5 + 816) += Size;
    LODWORD(v33) = operator new(0x20u);
    LOBYTE(v35) = 2;
    if ( (_DWORD)v33 )
    {
      sub_4808E0(v6);
      v17 = *(_DWORD *)(v5 + 544);
      v34 = *(_DWORD *)(v5 + 548);
      sub_4808F0(v6);
      v32 = v34;
      v31 = v17;
      v30 = a5;
      v29 = v18;
      a5 = (int)&v29;
      sub_480980(&v29, &a4);
      v19 = sub_4872F0((_DWORD *)v33, Src, Size, v29, v30, v31, v32);
      v11 = (LPCRITICAL_SECTION *)(v5 + 604);
    }
    else
    {
      v19 = 0;
    }
    *(_DWORD *)((char *)v19 + *(_DWORD *)(v5 + 872)) = *(_DWORD *)(v5 + 868);
    v20 = *(_DWORD *)(v5 + 868);
    LOBYTE(v35) = 1;
    if ( v20 )
      *(_DWORD *)(v20 + *(_DWORD *)(v5 + 872) + 4) = v19;
    else
      *(_DWORD *)(v5 + 864) = v19;
    *(_DWORD *)(v5 + 868) = v19;
    if ( ++*(_DWORD *)(v5 + 876) == 1 )
    {
      sub_4808E0(v6);
      v21 = *(_DWORD *)(v5 + 544);
      v22 = *(_DWORD *)(v5 + 548);
      sub_4808F0(v6);
      v23 = __PAIR__(v22, v21) + *(signed int *)(v5 + 408);
      v26 = __OFSUB__(HIDWORD(v23), *(_DWORD *)(v5 + 836));
      v24 = HIDWORD(v23) == *(_DWORD *)(v5 + 836);
      v25 = HIDWORD(v23) - *(_DWORD *)(v5 + 836) < 0;
      v27 = (_DWORD *)(v5 + 832);
      v33 = __PAIR__(v22, v21) + *(signed int *)(v5 + 408);
      if ( (unsigned __int8)(v25 ^ v26) | v24 && (v25 ^ v26 || (unsigned int)v23 < *v27) )
        v28 = (unsigned __int64 *)(v5 + 832);
      else
        v28 = &v33;
      v11 = (LPCRITICAL_SECTION *)(v5 + 604);
      *v27 = *(_DWORD *)v28;
      *(_DWORD *)(v5 + 836) = *((_DWORD *)v28 + 1);
    }
  }
LABEL_24:
  v35 = -1;
  sub_4808F0(v11);
}

//----- (004881B0) --------------------------------------------------------
int __thiscall sub_4881B0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebx
  int v3; // eax
  int v4; // esi
  _DWORD *v5; // eax

  v1 = this;
  v2 = this + 148;
  sub_4808E0(this + 148);
  v3 = (int)v1[231];
  if ( !v3 || (v4 = sub_489E20(v1 + 230, v3)) == 0 )
  {
    v5 = operator new(0x18u);
    if ( v5 )
    {
      v5[4] = 0;
      v5[5] = 0;
      *v5 = 0;
      v5[1] = 0;
      v5[2] = 0;
      v5[3] = 0;
    }
    else
    {
      v5 = 0;
    }
    v4 = (int)v5;
  }
  sub_4808F0(v2);
  return v4;
}

//----- (00488260) --------------------------------------------------------
int __thiscall sub_488260(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebx
  int v3; // eax
  int v4; // edi
  int v5; // eax

  v1 = this;
  v2 = this + 147;
  sub_4808E0(this + 147);
  v3 = (int)v1[236];
  if ( v3 )
  {
    v5 = sub_489E20(v1 + 235, v3);
    v4 = v5;
    if ( v5 && *(_DWORD *)(v5 + 8) )
      v1[107] = (LPCRITICAL_SECTION)((char *)v1[107] - (*(int (**)(void))(**(_DWORD **)(v5 + 8) + 28))());
  }
  else
  {
    v4 = 0;
  }
  sub_4808F0(v2);
  return v4;
}

//----- (00488300) --------------------------------------------------------
void __thiscall sub_488300(int this, int a2, void *Src, size_t Size)
{
  LPCRITICAL_SECTION *v4; // ebx
  _DWORD *v5; // edi
  _DWORD *v6; // eax
  _DWORD *v7; // esi

  v4 = (LPCRITICAL_SECTION *)this;
  if ( *(_BYTE *)(this + 364) )
  {
    v5 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    v6 = sub_486EE0((int)v4, Src, Size, 0, 0);
    *v5 = 1;
    v5[1] = a2;
    v7 = v6;
    (**(void (***)(void))a2)();
    if ( v7 )
    {
      v5[2] = v7;
      (*(void (__thiscall **)(_DWORD *))*v7)(v7);
    }
    (*(void (__thiscall **)(_DWORD *))(*v7 + 4))(v7);
    sub_487070(v4, (LONG)v5);
  }
  else
  {
    sub_483D60((LPCRITICAL_SECTION *)a2, (int)Src, Size);
  }
}

//----- (00488380) --------------------------------------------------------
void __thiscall sub_488380(int this, LPCRITICAL_SECTION *a2)
{
  LPCRITICAL_SECTION *v2; // edi
  _DWORD *v3; // esi

  v2 = (LPCRITICAL_SECTION *)this;
  if ( *(_BYTE *)(this + 364) )
  {
    v3 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    *v3 = 2;
    v3[1] = a2;
    ((void (*)(void))(*a2)->DebugInfo)();
    sub_487070(v2, (LONG)v3);
  }
  else
  {
    sub_482D50(a2);
  }
}

//----- (004883D0) --------------------------------------------------------
void __thiscall sub_4883D0(int this, LPCRITICAL_SECTION *a2)
{
  LPCRITICAL_SECTION *v2; // edi
  _DWORD *v3; // esi

  v2 = (LPCRITICAL_SECTION *)this;
  if ( *(_BYTE *)(this + 364) )
  {
    v3 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    *v3 = 3;
    v3[1] = a2;
    ((void (*)(void))(*a2)->DebugInfo)();
    sub_487070(v2, (LONG)v3);
  }
  else
  {
    sub_482DD0(a2);
  }
}

//----- (00488420) --------------------------------------------------------
void __thiscall sub_488420(int this, int a2, void *Src, size_t Size)
{
  LPCRITICAL_SECTION *v4; // ebx
  _DWORD *v5; // edi
  _DWORD *v6; // eax
  _DWORD *v7; // esi

  v4 = (LPCRITICAL_SECTION *)this;
  if ( *(_BYTE *)(this + 364) )
  {
    v5 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    v6 = sub_486EE0((int)v4, Src, Size, 0, 0);
    *v5 = 4;
    v5[1] = a2;
    v7 = v6;
    (**(void (***)(void))a2)();
    if ( v7 )
    {
      v5[2] = v7;
      (*(void (__thiscall **)(_DWORD *))*v7)(v7);
    }
    (*(void (__thiscall **)(_DWORD *))(*v7 + 4))(v7);
    sub_487070(v4, (LONG)v5);
  }
  else
  {
    sub_482E50((LPCRITICAL_SECTION *)a2, (int)Src, Size);
  }
}

//----- (004884A0) --------------------------------------------------------
void __thiscall sub_4884A0(int this, int a2, void *Src, size_t Size, int a5)
{
  LPCRITICAL_SECTION *v5; // ebx
  _DWORD *v6; // esi
  _DWORD *v7; // eax
  _DWORD *v8; // edi

  v5 = (LPCRITICAL_SECTION *)this;
  if ( *(_BYTE *)(this + 364) )
  {
    v6 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    v7 = sub_486EE0((int)v5, Src, Size, 0, 0);
    *v6 = 5;
    v6[1] = a2;
    v8 = v7;
    (**(void (***)(void))a2)();
    if ( v8 )
    {
      v6[2] = v8;
      (*(void (__thiscall **)(_DWORD *))*v8)(v8);
    }
    v6[3] = a5;
    (*(void (__thiscall **)(_DWORD *))(*v8 + 4))(v8);
    sub_487070(v5, (LONG)v6);
  }
  else
  {
    sub_482EE0((LPCRITICAL_SECTION *)a2, (int)Src, Size, a5);
  }
}

//----- (00488530) --------------------------------------------------------
void __thiscall sub_488530(int this, int a2)
{
  int v2; // esi
  _DWORD *v3; // edi
  LPCRITICAL_SECTION *v4; // ebx
  int v5; // ebx

  v2 = this;
  if ( *(_BYTE *)(this + 364) )
  {
    v3 = (_DWORD *)sub_4881B0((LPCRITICAL_SECTION *)this);
    *v3 = 6;
    v3[1] = a2;
    (**(void (***)(void))a2)();
    sub_487070((LPCRITICAL_SECTION *)v2, (LONG)v3);
  }
  else
  {
    v4 = (LPCRITICAL_SECTION *)(this + 616);
    sub_4808E0((LPCRITICAL_SECTION *)(this + 616));
    if ( *(_DWORD *)(v2 + 16) )
      (***(void (__thiscall ****)(_DWORD, int))(v2 + 16))(*(_DWORD *)(v2 + 16), a2);
    sub_4808F0(v4);
    sub_4808E0((LPCRITICAL_SECTION *)(a2 + 552));
    v5 = *(_DWORD *)(a2 + 508);
    sub_4808F0((LPCRITICAL_SECTION *)(a2 + 552));
    if ( !v5 )
      sub_483870((LPCRITICAL_SECTION *)a2, 0, 10);
  }
}

//----- (00488620) --------------------------------------------------------
void __thiscall sub_488620(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // ebp
  LPCRITICAL_SECTION *i; // edi
  int v4; // eax
  int j; // eax
  LPCRITICAL_SECTION v6; // ecx
  int v7; // edx
  int v8; // edx
  void (__stdcall ***v9)(signed int); // ecx
  void **v10; // ebp
  void **v11; // ebp
  void **v12; // ebp
  signed int k; // ebp
  void **v14; // ebx

  v1 = this;
  *this = (LPCRITICAL_SECTION)&UdpLibrary::UdpManager::`vftable';
  v2 = this + 153;
  sub_4808E0(this + 153);
  for ( i = (LPCRITICAL_SECTION *)v1[112]; i; i = (LPCRITICAL_SECTION *)v1[112] )
  {
    ((void (__thiscall *)(LPCRITICAL_SECTION *))(*i)->DebugInfo)(i);
    sub_483870(i, 0, 4);
    ((void (__thiscall *)(LPCRITICAL_SECTION *))(*i)->LockCount)(i);
  }
  sub_4808F0(v2);
  sub_4808E0(v1 + 150);
  sub_489670(v1 + 118);
  sub_4808F0(v1 + 150);
  sub_4808E0(v1 + 146);
  v4 = (int)v1[221];
  if ( v4 )
  {
    for ( j = sub_489800(v1 + 220, v4); j; v1[224] = (LPCRITICAL_SECTION)((char *)v1[224] - 1) )
    {
      *(_DWORD *)(j + 32) = 0;
      j = (int)v1[221];
      if ( !j )
        break;
      v6 = v1[223];
      v7 = *(int *)((char *)&v6->DebugInfo + j);
      if ( v7 )
        *(LONG *)((char *)&v6->LockCount + v7) = *(LONG *)((char *)&v6->LockCount + j);
      else
        v1[221] = *(LPCRITICAL_SECTION *)((char *)&v6->LockCount + j);
      v8 = *(LONG *)((char *)&v6->LockCount + j);
      if ( v8 )
        *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v1[223]->DebugInfo + v8) = *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v6->DebugInfo + j);
      else
        v1[222] = *(LPCRITICAL_SECTION *)((char *)&v6->DebugInfo + j);
      *(LONG *)((char *)&v6->LockCount + j) = 0;
      *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v6->DebugInfo + j) = 0;
    }
  }
  sub_48A220(v1 + 225);
  sub_4808F0(v1 + 146);
  if ( v1[24] )
    ((void (__stdcall *)(LPCRITICAL_SECTION))v1[132]->DebugInfo[1].ProcessLocksList.Flink)(v1[24]);
  ((void (*)(void))v1[132]->DebugInfo->ProcessLocksList.Flink)();
  if ( !v1[90] )
  {
    v9 = (void (__stdcall ***)(signed int))v1[132];
    if ( v9 )
      (**v9)(1);
  }
  v10 = (void **)v1[126];
  v1[132] = 0;
  if ( v10 )
  {
    j__free(*v10);
    j__free(v10);
  }
  v11 = (void **)v1[127];
  if ( v11 )
  {
    j__free(*v11);
    j__free(v11);
  }
  v12 = (void **)v1[128];
  if ( v12 )
  {
    j__free(*v12);
    j__free(v12);
  }
  for ( k = 0; k < (signed int)v1[10]; ++k )
  {
    v14 = (void **)*((_DWORD *)&v1[104]->DebugInfo + k);
    if ( v14 )
    {
      j__free(*v14);
      j__free(v14);
    }
  }
  j__free(v1[104]);
  sub_48A3F0(v1 + 215);
  sub_48A3F0(v1 + 210);
  sub_48A470(v1 + 230);
  sub_48A470(v1 + 235);
  v1[235] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
  v1[230] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
  v1[225] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
  v1[220] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
  v1[215] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
  v1[210] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
  sub_4808C0(v1 + 154);
  sub_4808C0(v1 + 153);
  sub_4808C0(v1 + 152);
  sub_4808C0(v1 + 151);
  sub_4808C0(v1 + 150);
  sub_4808C0(v1 + 149);
  sub_4808C0(v1 + 148);
  sub_4808C0(v1 + 147);
  sub_4808C0(v1 + 146);
  sub_4808C0(v1 + 145);
  sub_4808C0(v1 + 144);
  v1[118] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
  v1[110] = (LPCRITICAL_SECTION)&UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
  sub_4808C0(v1 + 3);
  *v1 = (LPCRITICAL_SECTION)&UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
// 518664: using guessed type void *UdpLibrary::UdpManager::`vftable';

//----- (004889A0) --------------------------------------------------------
void __thiscall sub_4889A0(void *this, char **a2)
{
  int v2; // edi
  void (***v3)(void); // eax
  int v4; // ecx
  int *v5; // esi
  char *v6; // esi
  char v7; // al
  int *v8; // eax
  _BYTE *v9; // esi
  int v10; // ebx
  int v11; // eax
  _DWORD *v12; // esi
  int *v13; // ecx
  int v14; // ecx
  int v15; // eax
  char v16; // al
  int v17; // [esp-8h] [ebp-3Ch]
  int v18; // [esp-4h] [ebp-38h]
  int *v19; // [esp+14h] [ebp-20h]
  int *v20; // [esp+18h] [ebp-1Ch]
  char Src; // [esp+1Ch] [ebp-18h]
  char v22; // [esp+1Dh] [ebp-17h]
  int v23; // [esp+30h] [ebp-4h]

  v2 = (int)this;
  if ( a2[3] != (char *)2 || **a2 || (*a2)[1] != 28 )
  {
    v18 = (int)a2[2];
    v17 = v18;
    v19 = &v17;
    v20 = (int *)(a2 + 1);
    sub_480980(&v17, a2 + 1);
    v3 = (void (***)(void))sub_486CF0((LPCRITICAL_SECTION *)v2, v17, v18);
    v5 = (int *)v3;
    if ( v3 )
    {
      sub_485030(v3, (void **)a2);
LABEL_29:
      (*(void (**)(void))(*v5 + 4))();
      return;
    }
    if ( !a2[3] )
      return;
    v6 = *a2;
    v7 = **a2;
    if ( v7 || v6[1] != 1 )
    {
      if ( *(_BYTE *)(v2 + 53) )
      {
        if ( !v7 && v6[1] == 30 )
        {
          v9 = v6 + 2;
          v10 = sub_481970(v9);
          v19 = (int *)sub_481970(v9 + 4);
          v11 = sub_486E10((LPCRITICAL_SECTION *)v2, v10);
          v12 = (_DWORD *)v11;
          if ( v11 )
          {
            if ( (*(_BYTE *)(v2 + 54) || sub_480A30((_DWORD *)(v11 + 104), v20)) && (int *)v12[93] == v19 )
            {
              v19 = (int *)(v2 + 612);
              sub_4808E0((LPCRITICAL_SECTION *)(v2 + 612));
              v13 = *(int **)(v2 + 504);
              v23 = 1;
              sub_489A70(v13, (int)v12);
              sub_480990(v12 + 26, a2 + 1);
              v18 = (int)a2[2];
              v17 = v14;
              v20 = &v17;
              v12[27] = v18;
              sub_480980(&v17, v12 + 26);
              v15 = sub_485E20(v17, v18);
              sub_489A00(*(signed int **)(v2 + 504), (int)v12, v15);
              (*(void (__thiscall **)(_DWORD *))(*v12 + 4))(v12);
              v23 = -1;
              sub_4808F0((LPCRITICAL_SECTION *)(v2 + 612));
              return;
            }
            (*(void (__thiscall **)(_DWORD *))(*v12 + 4))(v12);
          }
        }
      }
      if ( *(_BYTE *)(v2 + 52) )
      {
        if ( **a2 || (v16 = (*a2)[1], v16 != 29) && v16 != 5 )
        {
          v18 = (int)a2[2];
          v17 = v4;
          v19 = &v17;
          Src = 0;
          v22 = 29;
          sub_480980(&v17, v20);
          sub_487F10((LPCRITICAL_SECTION *)v2, &Src, 2u, v17, v18);
        }
      }
    }
    else if ( *(_DWORD *)(v2 + 468) < *(_DWORD *)(v2 + 20) && *(_DWORD *)(v2 + 16) )
    {
      v8 = (int *)operator new(0x388u);
      v19 = v8;
      v23 = 0;
      if ( v8 )
        v5 = sub_485640(v8, v2, (void **)a2);
      else
        v5 = 0;
      v23 = -1;
      sub_488530(v2, (int)v5);
      goto LABEL_29;
    }
  }
}

//----- (00488C00) --------------------------------------------------------
void __thiscall sub_488C00(int this, void *Memory)
{
  int v2; // esi
  int v3; // ecx
  int v4; // ecx
  int v5; // ecx

  v2 = this;
  if ( *(_DWORD *)(this + 936) >= *(_DWORD *)(this + 112) )
  {
    if ( Memory )
    {
      v4 = *((_DWORD *)Memory + 1);
      if ( v4 )
      {
        (*(void (**)(void))(*(_DWORD *)v4 + 4))();
        *((_DWORD *)Memory + 1) = 0;
      }
      v5 = *((_DWORD *)Memory + 2);
      if ( v5 )
      {
        (*(void (**)(void))(*(_DWORD *)v5 + 4))();
        *((_DWORD *)Memory + 2) = 0;
      }
      j__free(Memory);
    }
  }
  else
  {
    sub_4808E0((LPCRITICAL_SECTION *)(this + 592));
    *(_DWORD *)((char *)Memory + *(_DWORD *)(v2 + 932) + 4) = *(_DWORD *)(v2 + 924);
    v3 = *(_DWORD *)(v2 + 924);
    if ( v3 )
      *(_DWORD *)(v3 + *(_DWORD *)(v2 + 932)) = Memory;
    else
      *(_DWORD *)(v2 + 928) = Memory;
    ++*(_DWORD *)(v2 + 936);
    *(_DWORD *)(v2 + 924) = Memory;
    sub_4808F0((LPCRITICAL_SECTION *)(v2 + 592));
  }
}

//----- (00488CA0) --------------------------------------------------------
int __thiscall sub_488CA0(void (***this)(void), signed int a2)
{
  int v2; // edi
  int v3; // edx
  int v4; // edx
  int v5; // esi
  int v6; // ebx
  int v7; // ST08_4
  int v8; // eax
  int v9; // ebx
  int v10; // ST08_4
  int v11; // eax
  int v12; // ebx
  int v13; // ST08_4
  int v14; // ST04_4
  int v15; // eax
  void (__stdcall ***v16)(_DWORD); // ecx
  int v17; // ebp
  LPCRITICAL_SECTION *v18; // ebx
  int v19; // ebp
  int v20; // ecx
  int v21; // ecx
  int v22; // edx
  __int64 v23; // rax
  unsigned __int8 v24; // of
  __int64 v25; // rax
  unsigned __int8 v26; // cf
  __int64 v28; // [esp+20h] [ebp-14h]

  v2 = (int)this;
  (**this)();
  LODWORD(v28) = sub_40167C(v2, v3);
  HIDWORD(v28) = v4;
  v5 = sub_488260((LPCRITICAL_SECTION *)v2);
  if ( v5 )
  {
    while ( 1 )
    {
      switch ( *(_DWORD *)v5 )
      {
        case 1:
          v6 = *(_DWORD *)(v5 + 8);
          v7 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 28))(*(_DWORD *)(v5 + 8));
          v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 20))(v6);
          sub_483D60(*(LPCRITICAL_SECTION **)(v5 + 4), v8, v7);
          break;
        case 2:
          sub_482D50(*(LPCRITICAL_SECTION **)(v5 + 4));
          break;
        case 3:
          sub_482DD0(*(LPCRITICAL_SECTION **)(v5 + 4));
          break;
        case 4:
          v9 = *(_DWORD *)(v5 + 8);
          v10 = (*(int (**)(void))(*(_DWORD *)v9 + 28))();
          v11 = (*(int (__thiscall **)(int))(*(_DWORD *)v9 + 20))(v9);
          sub_482E50(*(LPCRITICAL_SECTION **)(v5 + 4), v11, v10);
          break;
        case 5:
          v12 = *(_DWORD *)(v5 + 8);
          v13 = *(_DWORD *)(v5 + 12);
          v14 = (*(int (**)(void))(*(_DWORD *)v12 + 28))();
          v15 = (*(int (__thiscall **)(int))(*(_DWORD *)v12 + 20))(v12);
          sub_482EE0(*(LPCRITICAL_SECTION **)(v5 + 4), v15, v14, v13);
          break;
        case 6:
          sub_4808E0((LPCRITICAL_SECTION *)(v2 + 616));
          v16 = *(void (__stdcall ****)(_DWORD))(v2 + 16);
          if ( v16 )
            (**v16)(*(_DWORD *)(v5 + 4));
          sub_4808F0((LPCRITICAL_SECTION *)(v2 + 616));
          v17 = *(_DWORD *)(v5 + 4);
          v18 = (LPCRITICAL_SECTION *)(v17 + 552);
          sub_4808E0((LPCRITICAL_SECTION *)(v17 + 552));
          v19 = *(_DWORD *)(v17 + 508);
          sub_4808F0(v18);
          if ( !v19 )
            sub_483870(*(LPCRITICAL_SECTION **)(v5 + 4), 0, 10);
          break;
        default:
          break;
      }
      v20 = *(_DWORD *)(v5 + 4);
      if ( v20 )
      {
        (*(void (**)(void))(*(_DWORD *)v20 + 4))();
        *(_DWORD *)(v5 + 4) = 0;
      }
      v21 = *(_DWORD *)(v5 + 8);
      if ( v21 )
      {
        (*(void (**)(void))(*(_DWORD *)v21 + 4))();
        *(_DWORD *)(v5 + 8) = 0;
      }
      sub_488C00(v2, (void *)v5);
      LODWORD(v23) = sub_40167C(v2, v22);
      v24 = __OFSUB__(v23, v28);
      v25 = v23 - v28;
      if ( v25 >= 0 && (!((unsigned __int8)((v25 < 0) ^ v24) | (HIDWORD(v25) == 0)) || (unsigned int)v25 > 0x7FFFFFFF) )
        LODWORD(v25) = 0x7FFFFFFF;
      if ( (signed int)v25 >= a2 )
        break;
      v5 = sub_488260((LPCRITICAL_SECTION *)v2);
      if ( !v5 )
        return (*(int (**)(void))(*(_DWORD *)v2 + 4))();
    }
    sub_4808E0((LPCRITICAL_SECTION *)(v2 + 596));
    v26 = __CFADD__((*(_DWORD *)(v2 + 768))++, 1);
    *(_DWORD *)(v2 + 772) += v26;
    sub_4808F0((LPCRITICAL_SECTION *)(v2 + 596));
  }
  return (*(int (**)(void))(*(_DWORD *)v2 + 4))();
}
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);

//----- (00488ED0) --------------------------------------------------------
char __thiscall sub_488ED0(void (***this)(void), signed int a2, char a3)
{
  int v3; // esi
  void (*v4)(void); // edx
  int v5; // edx
  void (__thiscall *v6)(int); // eax
  char result; // al
  void (__thiscall *v8)(int); // eax
  unsigned __int8 v9; // cf
  int v10; // edx
  unsigned int v11; // ebp
  unsigned int v12; // edi
  unsigned int v13; // ebx
  unsigned __int64 v14; // kr00_8
  signed int v15; // eax
  int v16; // edx
  __int64 v17; // rax
  unsigned __int8 v18; // of
  __int64 v19; // rax
  int v20; // edx
  int v21; // edi
  unsigned int v22; // edx
  unsigned int v23; // ebp
  int *v24; // ecx
  LPCRITICAL_SECTION *v25; // eax
  LPCRITICAL_SECTION *v26; // edi
  int v27; // eax
  LPCRITICAL_SECTION *v28; // edi
  int v29; // ecx
  LPCRITICAL_SECTION *v30; // ebx
  int v31; // edx
  int *v32; // edi
  int v33; // eax
  int v34; // ecx
  int v35; // edx
  int v36; // ecx
  int v37; // ebx
  unsigned int v38; // ebp
  unsigned int v39; // ebx
  unsigned __int8 v40; // of
  int v41; // ebx
  signed int v42; // ebp
  unsigned int v43; // kr10_4
  int v44; // ecx
  unsigned int v45; // ebp
  __int64 *v46; // eax
  _DWORD *v47; // eax
  LPCRITICAL_SECTION *v48; // ecx
  void (*v49)(void); // eax
  char **v50; // [esp-8h] [ebp-54h]
  char **v51; // [esp-4h] [ebp-50h]
  char v52; // [esp+17h] [ebp-35h]
  __int64 v53; // [esp+18h] [ebp-34h]
  LPCRITICAL_SECTION *v54; // [esp+20h] [ebp-2Ch]
  void (***v55)(void); // [esp+24h] [ebp-28h]
  __int64 v56; // [esp+28h] [ebp-24h]
  __int64 v57; // [esp+30h] [ebp-1Ch]
  int v58; // [esp+3Ch] [ebp-10h]
  int v59; // [esp+48h] [ebp-4h]
  int v60; // [esp+54h] [ebp+8h]
  int v61; // [esp+54h] [ebp+8h]

  v3 = (int)this;
  v4 = **this;
  v55 = this;
  v4();
  v59 = 0;
  v54 = (LPCRITICAL_SECTION *)(v3 + 608);
  sub_4808E0((LPCRITICAL_SECTION *)(v3 + 608));
  LOBYTE(v59) = 1;
  sub_40167C(v3, v5);
  if ( *(_BYTE *)(v3 + 364) || *(_DWORD *)(v3 + 956) <= 0 )
  {
    if ( *(_BYTE *)(v3 + 532) )
    {
      LOBYTE(v59) = 0;
      sub_4808F0((LPCRITICAL_SECTION *)(v3 + 608));
      v8 = *(void (__thiscall **)(int))(*(_DWORD *)v3 + 4);
      v59 = -1;
      v8(v3);
      result = 0;
    }
    else
    {
      *(_BYTE *)(v3 + 532) = 1;
      sub_4808E0((LPCRITICAL_SECTION *)(v3 + 596));
      v9 = __CFADD__((*(_DWORD *)(v3 + 736))++, 1);
      *(_DWORD *)(v3 + 740) += v9;
      sub_4808F0((LPCRITICAL_SECTION *)(v3 + 596));
      v52 = 0;
      if ( a2 )
      {
        sub_4808E0((LPCRITICAL_SECTION *)(v3 + 576));
        v10 = *(_DWORD *)(v3 + 572);
        LODWORD(v56) = *(_DWORD *)(v3 + 568);
        HIDWORD(v56) = v10;
        sub_4808F0((LPCRITICAL_SECTION *)(v3 + 576));
        LODWORD(v53) = sub_487CB0(v3);
        if ( (_DWORD)v53 )
        {
          v52 = 1;
          while ( 1 )
          {
            v11 = *(_DWORD *)(v3 + 552);
            HIDWORD(v57) = *(_DWORD *)(v3 + 556);
            sub_4808E0((LPCRITICAL_SECTION *)(v3 + 576));
            v12 = *(_DWORD *)(v3 + 568);
            v13 = *(_DWORD *)(v3 + 572);
            sub_4808F0((LPCRITICAL_SECTION *)(v3 + 576));
            v14 = __PAIR__(v13, v12) - __PAIR__(HIDWORD(v57), v11);
            v58 = (__PAIR__(v13, v12) - __PAIR__(HIDWORD(v57), v11)) >> 32;
            if ( v58 < 0
              || ((signed __int64)__PAIR__(v13, v12) < (signed __int64)__PAIR__(HIDWORD(v57), v11) || HIDWORD(v14) == 0)
              && (unsigned int)v14 <= 0x7FFFFFFF )
            {
              v15 = v14;
            }
            else
            {
              v15 = 0x7FFFFFFF;
            }
            v51 = (char **)v53;
            *(_DWORD *)(v3 + 560) = v15;
            sub_4889A0((void *)v3, v51);
            LODWORD(v17) = sub_40167C(v3, v16);
            v18 = __OFSUB__(v17, v56);
            v19 = v17 - v56;
            v58 = HIDWORD(v19);
            if ( v19 >= 0
              && (!((unsigned __int8)((v19 < 0) ^ v18) | (HIDWORD(v19) == 0)) || (unsigned int)v19 > 0x7FFFFFFF) )
            {
              LODWORD(v19) = 0x7FFFFFFF;
            }
            if ( (signed int)v19 >= a2 )
              break;
            LODWORD(v53) = sub_487CB0(v3);
            if ( !(_DWORD)v53 )
              goto LABEL_20;
          }
          sub_4808E0((LPCRITICAL_SECTION *)(v3 + 596));
          v9 = __CFADD__((*(_DWORD *)(v3 + 760))++, 1);
          *(_DWORD *)(v3 + 764) += v9;
          sub_4808F0((LPCRITICAL_SECTION *)(v3 + 596));
        }
        else
        {
LABEL_20:
          *(_DWORD *)(v3 + 552) = sub_401316(v3);
          *(_DWORD *)(v3 + 556) = v20;
        }
      }
      if ( a3 )
      {
        if ( *(_DWORD *)(v3 + 512) )
        {
          v21 = sub_401316(v3);
          LODWORD(v57) = v21;
          v23 = v22;
          sub_4808E0((LPCRITICAL_SECTION *)(v3 + 612));
          *(_DWORD *)(v3 + 520) = v21 + 1;
          *(_DWORD *)(v3 + 524) = __CFADD__(v21, 1) + v23;
          sub_4808F0((LPCRITICAL_SECTION *)(v3 + 612));
          v60 = 0;
          while ( 1 )
          {
            sub_4808E0((LPCRITICAL_SECTION *)(v3 + 612));
            v24 = *(int **)(v3 + 512);
            if ( v24[2] <= 0 || *(_QWORD *)(*v24 + 8) > (signed __int64)__PAIR__(v23, v21) )
            {
              v26 = 0;
            }
            else
            {
              v25 = (LPCRITICAL_SECTION *)sub_48A2A0(v24, *(_DWORD *)*v24);
              v26 = v25;
              if ( v25 )
                ((void (__thiscall *)(LPCRITICAL_SECTION *))(*v25)->DebugInfo)(v25);
            }
            sub_4808F0((LPCRITICAL_SECTION *)(v3 + 612));
            if ( !v26 )
              break;
            sub_485440(v26, 1);
            ((void (__thiscall *)(LPCRITICAL_SECTION *))(*v26)->LockCount)(v26);
            ++v60;
            v21 = v57;
          }
          sub_4808E0((LPCRITICAL_SECTION *)(v3 + 596));
          v9 = __CFADD__(v60, *(_DWORD *)(v3 + 704));
          *(_DWORD *)(v3 + 704) += v60;
          v27 = *(_DWORD *)(v3 + 468);
          *(_DWORD *)(v3 + 708) += (v60 >> 31) + v9;
          *(_QWORD *)(v3 + 712) += v27;
          sub_4808F0((LPCRITICAL_SECTION *)(v3 + 596));
        }
        else
        {
          sub_4808E0((LPCRITICAL_SECTION *)(v3 + 612));
          v28 = *(LPCRITICAL_SECTION **)(v3 + 448);
          if ( v28 )
            ((void (__thiscall *)(_DWORD))(*v28)->DebugInfo)(*(_DWORD *)(v3 + 448));
          sub_4808F0((LPCRITICAL_SECTION *)(v3 + 612));
          if ( v28 )
          {
            do
            {
              sub_485440(v28, 1);
              sub_4808E0((LPCRITICAL_SECTION *)(v3 + 612));
              v29 = *(_DWORD *)(v3 + 456);
              v30 = *(LPCRITICAL_SECTION **)((char *)v28 + v29 + 4);
              if ( v30 )
                ((void (__thiscall *)(_DWORD))(*v30)->DebugInfo)(*(LPCRITICAL_SECTION *)((char *)v28 + v29 + 4));
              sub_4808F0((LPCRITICAL_SECTION *)(v3 + 612));
              ((void (__thiscall *)(LPCRITICAL_SECTION *))(*v28)->LockCount)(v28);
              v28 = v30;
            }
            while ( v30 );
          }
        }
        sub_486770((LPCRITICAL_SECTION *)v3);
      }
      sub_4808E0((LPCRITICAL_SECTION *)(v3 + 604));
      LOBYTE(v59) = 2;
      sub_4808E0((LPCRITICAL_SECTION *)(v3 + 576));
      v31 = *(_DWORD *)(v3 + 572);
      LODWORD(v53) = *(_DWORD *)(v3 + 568);
      HIDWORD(v53) = v31;
      sub_4808F0((LPCRITICAL_SECTION *)(v3 + 576));
      v32 = *(int **)(v3 + 864);
      if ( v32 )
      {
        do
        {
          if ( v53 < *(_QWORD *)(v3 + 832) )
            break;
          v33 = *(_DWORD *)(v3 + 872);
          v34 = *(int *)((char *)v32 + v33);
          v35 = *(int *)((char *)v32 + v33 + 4);
          if ( v34 )
            *(_DWORD *)(v34 + v33 + 4) = v35;
          else
            *(_DWORD *)(v3 + 864) = v35;
          v36 = *(int *)((char *)v32 + v33 + 4);
          if ( v36 )
            *(_DWORD *)(v36 + *(_DWORD *)(v3 + 872)) = *(int *)((char *)v32 + v33);
          else
            *(_DWORD *)(v3 + 868) = *(int *)((char *)v32 + v33);
          *(int *)((char *)v32 + v33 + 4) = 0;
          *(int *)((char *)v32 + v33) = 0;
          --*(_DWORD *)(v3 + 876);
          v37 = *(_DWORD *)(v3 + 864);
          v61 = *(_DWORD *)(v3 + 864);
          if ( v37 )
          {
            v56 = *(_QWORD *)(v37 + 24);
            sub_4808E0((LPCRITICAL_SECTION *)(v3 + 576));
            v38 = *(_DWORD *)(v3 + 568);
            v39 = *(_DWORD *)(v3 + 572);
            sub_4808F0((LPCRITICAL_SECTION *)(v3 + 576));
            v40 = __OFSUB__(__PAIR__(v39, v38), v56);
            v43 = v38 - v56;
            v41 = (__PAIR__(v39, v38) - v56) >> 32;
            v42 = v38 - v56;
            v58 = v41;
            if ( v41 >= 0 && (!((unsigned __int8)((v41 < 0) ^ v40) | (v41 == 0)) || v43 > 0x7FFFFFFF) )
              v42 = 0x7FFFFFFF;
            v37 = v61;
            *(_QWORD *)(v3 + 832) = v53 + *(_DWORD *)(v3 + 408) - v42;
          }
          v44 = *(_DWORD *)(v3 + 396);
          if ( v44 > 0 )
          {
            v45 = *(_DWORD *)(v3 + 836);
            v57 = v53 + 1000 * v32[3] / v44;
            if ( (signed __int64)__PAIR__(v45, *(_DWORD *)(v3 + 832)) >= v57 )
              v46 = (__int64 *)(v3 + 832);
            else
              v46 = &v57;
            *(_DWORD *)(v3 + 832) = *(_DWORD *)v46;
            *(_DWORD *)(v3 + 836) = *((_DWORD *)v46 + 1);
          }
          v51 = (char **)v32[5];
          v50 = v51;
          sub_480980(&v50, v32 + 4);
          sub_486440(v3, v32[2], v32[3], (char)v50, (int)v51);
          v51 = (char **)v32[5];
          v50 = v51;
          sub_480980(&v50, v32 + 4);
          v47 = (_DWORD *)sub_486CF0((LPCRITICAL_SECTION *)v3, (char)v50, (int)v51);
          if ( v47 )
          {
            v47[28] -= v32[3];
            (*(void (__thiscall **)(_DWORD *))(*v47 + 4))(v47);
          }
          *(_DWORD *)(v3 + 816) -= v32[3];
          j__free((void *)v32[2]);
          j__free(v32);
          v32 = (int *)v37;
        }
        while ( v37 );
      }
      LOBYTE(v59) = 1;
      sub_4808F0((LPCRITICAL_SECTION *)(v3 + 604));
      v48 = v54;
      *(_BYTE *)(v3 + 532) = 0;
      LOBYTE(v59) = 0;
      sub_4808F0(v48);
      v49 = *(void (**)(void))(*(_DWORD *)v3 + 4);
      v59 = -1;
      v49();
      result = v52;
    }
  }
  else
  {
    sub_488CA0((void (***)(void))v3, a2);
    LOBYTE(v59) = 0;
    sub_4808F0((LPCRITICAL_SECTION *)(v3 + 608));
    v6 = *(void (__thiscall **)(int))(*(_DWORD *)v3 + 4);
    v59 = -1;
    v6(v3);
    result = 1;
  }
  return result;
}
// 401316: using guessed type int __thiscall sub_401316(_DWORD);
// 40167C: using guessed type int __fastcall sub_40167C(_DWORD, _DWORD);

//----- (004894A0) --------------------------------------------------------
int __thiscall sub_4894A0(void *this)
{
  void *i; // esi
  int result; // eax

  for ( i = this;
        !*((_BYTE *)i + 24);
        result = (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(*((_DWORD *)i + 5) + 528) + 40))(*((_DWORD *)i + 7)) )
  {
    sub_488ED0(*((void (****)(void))i + 5), 500, 1);
  }
  return result;
}

//----- (00489580) --------------------------------------------------------
int __thiscall sub_489580(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int v5; // esi

  v2 = this[4];
  result = a2;
  v4 = *(_DWORD *)(v2 + a2);
  if ( v4 )
    *(_DWORD *)(v4 + v2 + 4) = *(_DWORD *)(v2 + a2 + 4);
  else
    this[2] = *(_DWORD *)(v2 + a2 + 4);
  v5 = *(_DWORD *)(v2 + a2 + 4);
  if ( v5 )
    *(_DWORD *)(v5 + this[4]) = *(_DWORD *)(v2 + a2);
  else
    this[3] = *(_DWORD *)(v2 + a2);
  *(_DWORD *)(v2 + a2 + 4) = 0;
  *(_DWORD *)(v2 + a2) = 0;
  --this[7];
  return result;
}

//----- (00489670) --------------------------------------------------------
void __thiscall sub_489670(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int v3; // eax
  int v4; // edx
  int v5; // edi
  int v6; // edx

  v1 = this;
  v2 = this[2];
  if ( v2 )
  {
    do
    {
      v3 = v1[4];
      v4 = *(_DWORD *)(v3 + v2);
      v5 = *(_DWORD *)(v3 + v2 + 4);
      if ( v4 )
        *(_DWORD *)(v4 + v3 + 4) = v5;
      else
        v1[2] = v5;
      v6 = *(_DWORD *)(v3 + v2 + 4);
      if ( v6 )
        *(_DWORD *)(v6 + v1[4]) = *(_DWORD *)(v3 + v2);
      else
        v1[3] = *(_DWORD *)(v3 + v2);
      *(_DWORD *)(v3 + v2 + 4) = 0;
      *(_DWORD *)(v3 + v2) = 0;
      --v1[7];
      (*(void (**)(void))(*(_DWORD *)v2 + 4))();
      v2 = v5;
    }
    while ( v5 );
  }
}

//----- (00489720) --------------------------------------------------------
int __thiscall sub_489720(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int v5; // esi

  v2 = this[3];
  result = a2;
  v4 = *(_DWORD *)(v2 + a2);
  if ( v4 )
    *(_DWORD *)(v4 + v2 + 4) = *(_DWORD *)(v2 + a2 + 4);
  else
    this[1] = *(_DWORD *)(v2 + a2 + 4);
  v5 = *(_DWORD *)(v2 + a2 + 4);
  if ( v5 )
    *(_DWORD *)(v5 + this[3]) = *(_DWORD *)(v2 + a2);
  else
    this[2] = *(_DWORD *)(v2 + a2);
  *(_DWORD *)(v2 + a2 + 4) = 0;
  *(_DWORD *)(v2 + a2) = 0;
  --this[4];
  return result;
}

//----- (00489800) --------------------------------------------------------
int __thiscall sub_489800(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int v5; // esi

  v2 = this[3];
  result = a2;
  v4 = *(_DWORD *)(v2 + a2);
  if ( v4 )
    *(_DWORD *)(v4 + v2 + 4) = *(_DWORD *)(v2 + a2 + 4);
  else
    this[1] = *(_DWORD *)(v2 + a2 + 4);
  v5 = *(_DWORD *)(v2 + a2 + 4);
  if ( v5 )
    *(_DWORD *)(v5 + this[3]) = *(_DWORD *)(v2 + a2);
  else
    this[2] = *(_DWORD *)(v2 + a2);
  *(_DWORD *)(v2 + a2 + 4) = 0;
  *(_DWORD *)(v2 + a2) = 0;
  --this[4];
  return result;
}

//----- (00489A00) --------------------------------------------------------
signed int __thiscall sub_489A00(signed int *this, int a2, unsigned int a3)
{
  int v3; // edi
  _DWORD *v4; // edx
  int v5; // edx
  int v6; // eax
  signed int result; // eax

  v3 = 0;
  if ( a2 )
    v4 = (_DWORD *)(a2 + 20);
  else
    v4 = 0;
  *v4 = a3;
  v5 = a3 % this[1];
  if ( *(_DWORD *)(*this + 4 * v5) )
  {
    if ( a2 )
      v3 = a2 + 20;
    *(_DWORD *)(v3 + 4) = *(_DWORD *)(*this + 4 * v5);
    result = *this;
    *(_DWORD *)(*this + 4 * v5) = a2;
    ++this[2];
  }
  else
  {
    if ( a2 )
      v6 = a2 + 20;
    else
      v6 = 0;
    *(_DWORD *)(v6 + 4) = 0;
    *(_DWORD *)(*this + 4 * v5) = a2;
    result = 1;
    ++this[3];
    ++this[2];
  }
  return result;
}

//----- (00489A70) --------------------------------------------------------
char __thiscall sub_489A70(int *this, int a2)
{
  _DWORD *v2; // eax
  int v3; // edx
  int *v4; // esi
  int v5; // eax
  int v6; // esi
  int v7; // eax
  int v9; // edi
  int v10; // eax
  int v11; // esi

  if ( a2 )
    v2 = (_DWORD *)(a2 + 20);
  else
    v2 = 0;
  v3 = *v2 % (unsigned int)this[1];
  v4 = (int *)(*this + 4 * v3);
  v5 = *v4;
  if ( !*v4 )
    return 0;
  while ( v5 != a2 )
  {
    if ( v5 )
      v6 = v5 + 20;
    else
      v6 = 0;
    v4 = (int *)(v6 + 4);
    if ( v5 )
      v7 = v5 + 20;
    else
      v7 = 0;
    v5 = *(_DWORD *)(v7 + 4);
    if ( !v5 )
      return 0;
  }
  if ( v5 )
    v9 = v5 + 20;
  else
    v9 = 0;
  *v4 = *(_DWORD *)(v9 + 4);
  if ( v5 )
    v10 = v5 + 20;
  else
    v10 = 0;
  *(_DWORD *)(v10 + 4) = 0;
  v11 = *this;
  --this[2];
  if ( !*(_DWORD *)(v11 + 4 * v3) )
    --this[3];
  return 1;
}

//----- (00489B00) --------------------------------------------------------
int __thiscall sub_489B00(_DWORD *this, unsigned int a2)
{
  int result; // eax
  int v3; // eax

  result = *(_DWORD *)(*this + 4 * (a2 % this[1]));
  if ( !result )
    return 0;
  while ( *(_DWORD *)(result + 20) != a2 )
  {
    if ( result )
      v3 = result + 20;
    else
      v3 = 0;
    result = *(_DWORD *)(v3 + 4);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (00489BA0) --------------------------------------------------------
signed int __thiscall sub_489BA0(signed int *this, int a2, unsigned int a3)
{
  int v3; // edi
  _DWORD *v4; // edx
  int v5; // edx
  int v6; // eax
  signed int result; // eax

  v3 = 0;
  if ( a2 )
    v4 = (_DWORD *)(a2 + 28);
  else
    v4 = 0;
  *v4 = a3;
  v5 = a3 % this[1];
  if ( *(_DWORD *)(*this + 4 * v5) )
  {
    if ( a2 )
      v3 = a2 + 28;
    *(_DWORD *)(v3 + 4) = *(_DWORD *)(*this + 4 * v5);
    result = *this;
    *(_DWORD *)(*this + 4 * v5) = a2;
    ++this[2];
  }
  else
  {
    if ( a2 )
      v6 = a2 + 28;
    else
      v6 = 0;
    *(_DWORD *)(v6 + 4) = 0;
    *(_DWORD *)(*this + 4 * v5) = a2;
    result = 1;
    ++this[3];
    ++this[2];
  }
  return result;
}

//----- (00489C10) --------------------------------------------------------
char __thiscall sub_489C10(int *this, int a2)
{
  _DWORD *v2; // eax
  int v3; // edx
  int *v4; // esi
  int v5; // eax
  int v6; // esi
  int v7; // eax
  int v9; // edi
  int v10; // eax
  int v11; // esi

  if ( a2 )
    v2 = (_DWORD *)(a2 + 28);
  else
    v2 = 0;
  v3 = *v2 % (unsigned int)this[1];
  v4 = (int *)(*this + 4 * v3);
  v5 = *v4;
  if ( !*v4 )
    return 0;
  while ( v5 != a2 )
  {
    if ( v5 )
      v6 = v5 + 28;
    else
      v6 = 0;
    v4 = (int *)(v6 + 4);
    if ( v5 )
      v7 = v5 + 28;
    else
      v7 = 0;
    v5 = *(_DWORD *)(v7 + 4);
    if ( !v5 )
      return 0;
  }
  if ( v5 )
    v9 = v5 + 28;
  else
    v9 = 0;
  *v4 = *(_DWORD *)(v9 + 4);
  if ( v5 )
    v10 = v5 + 28;
  else
    v10 = 0;
  *(_DWORD *)(v10 + 4) = 0;
  v11 = *this;
  --this[2];
  if ( !*(_DWORD *)(v11 + 4 * v3) )
    --this[3];
  return 1;
}

//----- (00489CA0) --------------------------------------------------------
int __thiscall sub_489CA0(_DWORD *this, unsigned int a2)
{
  int result; // eax
  int v3; // eax

  result = *(_DWORD *)(*this + 4 * (a2 % this[1]));
  if ( !result )
    return 0;
  while ( *(_DWORD *)(result + 28) != a2 )
  {
    if ( result )
      v3 = result + 28;
    else
      v3 = 0;
    result = *(_DWORD *)(v3 + 4);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (00489D50) --------------------------------------------------------
void *__thiscall sub_489D50(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';

//----- (00489D70) --------------------------------------------------------
void *__thiscall sub_489D70(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';

//----- (00489D90) --------------------------------------------------------
void *__thiscall sub_489D90(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';

//----- (00489DB0) --------------------------------------------------------
void *__thiscall sub_489DB0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';

//----- (00489E20) --------------------------------------------------------
int __thiscall sub_489E20(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int v5; // esi

  v2 = this[3];
  result = a2;
  v4 = *(_DWORD *)(v2 + a2);
  if ( v4 )
    *(_DWORD *)(v4 + v2 + 4) = *(_DWORD *)(v2 + a2 + 4);
  else
    this[1] = *(_DWORD *)(v2 + a2 + 4);
  v5 = *(_DWORD *)(v2 + a2 + 4);
  if ( v5 )
    *(_DWORD *)(v5 + this[3]) = *(_DWORD *)(v2 + a2);
  else
    this[2] = *(_DWORD *)(v2 + a2);
  *(_DWORD *)(v2 + a2 + 4) = 0;
  *(_DWORD *)(v2 + a2) = 0;
  --this[4];
  return result;
}

//----- (00489E80) --------------------------------------------------------
void __thiscall sub_489E80(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ebx
  _DWORD *v4; // edi
  int v5; // eax
  void *v6; // eax
  size_t v7; // ST08_4
  bool v8; // zf
  bool v9; // sf
  int v10; // eax
  int v11; // ebx
  int v12; // ecx
  int v13; // eax
  _DWORD *v14; // eax
  int v15; // edx
  int v16; // edi
  _DWORD *v17; // [esp+10h] [ebp-8h]
  int v18; // [esp+14h] [ebp-4h]
  int v19; // [esp+1Ch] [ebp+4h]

  v2 = this;
  v3 = this[1];
  v4 = (_DWORD *)*this;
  v17 = (_DWORD *)*this;
  v18 = this[1];
  v5 = sub_485DA0(a2);
  v2[1] = v5;
  v6 = operator new(4 * v5);
  v7 = 4 * v2[1];
  *v2 = v6;
  memset(v6, 0, v7);
  v8 = v2[2] == 0;
  v9 = v2[2] < 0;
  v2[3] = 0;
  if ( !v9 && !v8 )
  {
    v10 = 0;
    v19 = 0;
    if ( v3 > 0 )
    {
      do
      {
        v11 = v4[v10];
        if ( v11 )
        {
          do
          {
            v12 = v11;
            if ( v11 )
              v13 = v11 + 20;
            else
              v13 = 0;
            v11 = *(_DWORD *)(v13 + 4);
            if ( v12 )
              v14 = (_DWORD *)(v12 + 20);
            else
              v14 = 0;
            v15 = *v14 % v2[1];
            if ( *(_DWORD *)(*v2 + 4 * v15) )
            {
              if ( v12 )
                v16 = v12 + 20;
              else
                v16 = 0;
              *(_DWORD *)(v16 + 4) = *(_DWORD *)(*v2 + 4 * v15);
              *(_DWORD *)(*v2 + 4 * v15) = v12;
            }
            else
            {
              if ( v12 )
                *(_DWORD *)(v12 + 24) = 0;
              else
                MEMORY[4] = 0;
              *(_DWORD *)(*v2 + 4 * v15) = v12;
              ++v2[3];
            }
          }
          while ( v11 );
          v4 = v17;
          v10 = v19;
        }
        v19 = ++v10;
      }
      while ( v10 < v18 );
    }
  }
  j__free(v4);
}

//----- (00489F90) --------------------------------------------------------
void __thiscall sub_489F90(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ebx
  _DWORD *v4; // edi
  int v5; // eax
  void *v6; // eax
  size_t v7; // ST08_4
  bool v8; // zf
  bool v9; // sf
  int v10; // eax
  int v11; // ebx
  int v12; // ecx
  int v13; // eax
  _DWORD *v14; // eax
  int v15; // edx
  int v16; // edi
  _DWORD *v17; // [esp+10h] [ebp-8h]
  int v18; // [esp+14h] [ebp-4h]
  int v19; // [esp+1Ch] [ebp+4h]

  v2 = this;
  v3 = this[1];
  v4 = (_DWORD *)*this;
  v17 = (_DWORD *)*this;
  v18 = this[1];
  v5 = sub_485DA0(a2);
  v2[1] = v5;
  v6 = operator new(4 * v5);
  v7 = 4 * v2[1];
  *v2 = v6;
  memset(v6, 0, v7);
  v8 = v2[2] == 0;
  v9 = v2[2] < 0;
  v2[3] = 0;
  if ( !v9 && !v8 )
  {
    v10 = 0;
    v19 = 0;
    if ( v3 > 0 )
    {
      do
      {
        v11 = v4[v10];
        if ( v11 )
        {
          do
          {
            v12 = v11;
            if ( v11 )
              v13 = v11 + 28;
            else
              v13 = 0;
            v11 = *(_DWORD *)(v13 + 4);
            if ( v12 )
              v14 = (_DWORD *)(v12 + 28);
            else
              v14 = 0;
            v15 = *v14 % v2[1];
            if ( *(_DWORD *)(*v2 + 4 * v15) )
            {
              if ( v12 )
                v16 = v12 + 28;
              else
                v16 = 0;
              *(_DWORD *)(v16 + 4) = *(_DWORD *)(*v2 + 4 * v15);
              *(_DWORD *)(*v2 + 4 * v15) = v12;
            }
            else
            {
              if ( v12 )
                *(_DWORD *)(v12 + 32) = 0;
              else
                MEMORY[4] = 0;
              *(_DWORD *)(*v2 + 4 * v15) = v12;
              ++v2[3];
            }
          }
          while ( v11 );
          v4 = v17;
          v10 = v19;
        }
        v19 = ++v10;
      }
      while ( v10 < v18 );
    }
  }
  j__free(v4);
}

//----- (0048A0A0) --------------------------------------------------------
void __thiscall sub_48A0A0(LPCRITICAL_SECTION *this, struct _RTL_CRITICAL_SECTION_DEBUG *a2)
{
  LPCRITICAL_SECTION *v2; // esi
  LPCRITICAL_SECTION *v3; // edi
  LPCRITICAL_SECTION v4; // ecx

  v2 = this;
  v3 = this + 146;
  sub_4808E0(this + 146);
  if ( (signed int)v2[229] >= (signed int)v2[25] )
  {
    sub_48A6B0(a2);
  }
  else
  {
    *(struct _RTL_CRITICAL_SECTION **)((char *)&a2->CriticalSection + (_DWORD)v2[228]) = v2[226];
    v4 = v2[226];
    if ( v4 )
    {
      *(PRTL_CRITICAL_SECTION_DEBUG *)((char *)&v2[228]->DebugInfo + (_DWORD)v4) = a2;
      v2[229] = (LPCRITICAL_SECTION)((char *)v2[229] + 1);
    }
    else
    {
      v2[229] = (LPCRITICAL_SECTION)((char *)v2[229] + 1);
      v2[227] = (LPCRITICAL_SECTION)a2;
    }
    v2[226] = (LPCRITICAL_SECTION)a2;
  }
  sub_4808F0(v3);
}

//----- (0048A220) --------------------------------------------------------
void __thiscall sub_48A220(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int v3; // eax
  int v4; // edx
  int v5; // edi
  int v6; // edx

  v1 = this;
  v2 = this[1];
  if ( v2 )
  {
    do
    {
      v3 = v1[3];
      v4 = *(_DWORD *)(v3 + v2);
      v5 = *(_DWORD *)(v3 + v2 + 4);
      if ( v4 )
        *(_DWORD *)(v4 + v3 + 4) = v5;
      else
        v1[1] = v5;
      v6 = *(_DWORD *)(v3 + v2 + 4);
      if ( v6 )
        *(_DWORD *)(v6 + v1[3]) = *(_DWORD *)(v3 + v2);
      else
        v1[2] = *(_DWORD *)(v3 + v2);
      *(_DWORD *)(v3 + v2 + 4) = 0;
      *(_DWORD *)(v3 + v2) = 0;
      --v1[4];
      (*(void (**)(void))(*(_DWORD *)v2 + 4))();
      v2 = v5;
    }
    while ( v5 );
  }
}

//----- (0048A2A0) --------------------------------------------------------
int __thiscall sub_48A2A0(int *this, int a2)
{
  int v2; // edx
  int v3; // edi
  int v4; // edx
  int v5; // esi
  int v6; // ebp
  _DWORD *v7; // edx
  _DWORD *v8; // esi

  if ( *(_DWORD *)(a2 + 16) != -1 )
  {
    v2 = --this[2];
    v3 = *(_DWORD *)(a2 + 16);
    if ( v3 != v2 )
    {
      v4 = 16 * v2;
      v5 = *this;
      v6 = *(_DWORD *)(v4 + *this);
      v7 = (_DWORD *)(*this + v4);
      *(_DWORD *)(v5 + 16 * v3) = v6;
      v8 = (_DWORD *)(16 * v3 + v5);
      v8[1] = v7[1];
      v8[2] = v7[2];
      v8[3] = v7[3];
      *(_DWORD *)(*(_DWORD *)(16 * v3 + *this) + 16) = v3;
      sub_485930(this, *(_DWORD *)(16 * v3 + *this));
    }
    *(_DWORD *)(a2 + 16) = -1;
  }
  return a2;
}

//----- (0048A3D0) --------------------------------------------------------
void *__thiscall sub_48A3D0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_487370((int)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0048A3F0) --------------------------------------------------------
void __thiscall sub_48A3F0(_DWORD *this)
{
  _DWORD *v1; // edi
  void **v2; // esi
  int v3; // eax
  int v4; // ecx
  void **v5; // ebx
  int v6; // ecx

  v1 = this;
  v2 = (void **)this[1];
  if ( v2 )
  {
    do
    {
      v3 = v1[3];
      v4 = *(int *)((char *)v2 + v3);
      v5 = *(void ***)((char *)v2 + v3 + 4);
      if ( v4 )
        *(_DWORD *)(v4 + v3 + 4) = v5;
      else
        v1[1] = v5;
      v6 = *(int *)((char *)v2 + v3 + 4);
      if ( v6 )
        *(_DWORD *)(v6 + v1[3]) = *(void **)((char *)v2 + v3);
      else
        v1[2] = *(void **)((char *)v2 + v3);
      *(void **)((char *)v2 + v3 + 4) = 0;
      *(void **)((char *)v2 + v3) = 0;
      --v1[4];
      if ( v2 )
      {
        j__free(v2[2]);
        j__free(v2);
      }
      v2 = v5;
    }
    while ( v5 );
  }
}

//----- (0048A470) --------------------------------------------------------
void __thiscall sub_48A470(_DWORD *this)
{
  _DWORD *v1; // edi
  _DWORD *v2; // esi
  int v3; // eax
  int v4; // ecx
  _DWORD *v5; // ebp
  int v6; // ecx
  int v7; // ecx
  int v8; // ecx
  _DWORD *v9; // [esp+Ch] [ebp-4h]

  v1 = this;
  v2 = (_DWORD *)this[1];
  if ( v2 )
  {
    do
    {
      v3 = v1[3];
      v4 = *(_DWORD *)((char *)v2 + v3);
      v5 = *(_DWORD **)((char *)v2 + v3 + 4);
      v9 = *(_DWORD **)((char *)v2 + v3 + 4);
      if ( v4 )
        *(_DWORD *)(v4 + v3 + 4) = v5;
      else
        v1[1] = v5;
      v6 = *(_DWORD *)((char *)v2 + v3 + 4);
      if ( v6 )
      {
        *(_DWORD *)(v6 + v1[3]) = *(_DWORD *)((char *)v2 + v3);
        v5 = v9;
      }
      else
      {
        v1[2] = *(_DWORD *)((char *)v2 + v3);
      }
      *(_DWORD *)((char *)v2 + v3 + 4) = 0;
      *(_DWORD *)((char *)v2 + v3) = 0;
      --v1[4];
      if ( v2 )
      {
        v7 = v2[1];
        if ( v7 )
        {
          (*(void (**)(void))(*(_DWORD *)v7 + 4))();
          v2[1] = 0;
        }
        v8 = v2[2];
        if ( v8 )
        {
          (*(void (**)(void))(*(_DWORD *)v8 + 4))();
          v2[2] = 0;
        }
        j__free(v2);
      }
      v2 = v5;
    }
    while ( v5 );
  }
}

//----- (0048A540) --------------------------------------------------------
void *__thiscall sub_48A540(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_488620((LPCRITICAL_SECTION *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0048A560) --------------------------------------------------------
char sub_48A560()
{
  return 0;
}

//----- (0048A570) --------------------------------------------------------
int __thiscall sub_48A570(_DWORD *this)
{
  return this[5];
}

//----- (0048A580) --------------------------------------------------------
int __thiscall sub_48A580(_DWORD *this)
{
  return this[5];
}

//----- (0048A590) --------------------------------------------------------
int __thiscall sub_48A590(_DWORD *this)
{
  return this[6];
}

//----- (0048A5A0) --------------------------------------------------------
int __thiscall sub_48A5A0(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[6] = a2;
  return result;
}

//----- (0048A5B0) --------------------------------------------------------
void __thiscall sub_48A5B0(int *this, void *Src, size_t Size, char a4)
{
  int *v4; // edi
  _BYTE *v5; // eax
  bool v6; // zf
  _BYTE *v7; // esi
  _BYTE *v8; // esi
  char *v9; // esi

  v4 = this;
  if ( Size )
  {
    v5 = (_BYTE *)sub_481090(this[5], this[6] + Size + 10, 512);
    v6 = v4[6] == 0;
    v4[5] = (int)v5;
    if ( v6 )
    {
      *v5 = 0;
      *(_BYTE *)(v4[5] + 1) = 25;
      v4[6] = 2;
    }
    v7 = (_BYTE *)(v4[6] + v4[5]);
    if ( a4 || *(_BYTE *)Src )
    {
      v9 = &v7[sub_481100(v7, Size)];
    }
    else
    {
      v8 = &v7[sub_481100(v7, Size + 1)];
      *v8 = 0;
      v9 = v8 + 1;
    }
    memcpy(v9, Src, Size);
    v4[6] = (int)&v9[Size - v4[5]];
  }
}

//----- (0048A650) --------------------------------------------------------
int __thiscall sub_48A650(_DWORD *this)
{
  return this[5];
}

//----- (0048A660) --------------------------------------------------------
int __thiscall sub_48A660(_DWORD *this)
{
  return this[5];
}

//----- (0048A670) --------------------------------------------------------
int __thiscall sub_48A670(_DWORD *this)
{
  return this[6];
}

//----- (0048A690) --------------------------------------------------------
char sub_48A690()
{
  return 1;
}

//----- (0048A6A0) --------------------------------------------------------
void __thiscall sub_48A6A0(_DWORD *this)
{
  ++this[1];
}

//----- (0048A6B0) --------------------------------------------------------
int __thiscall sub_48A6B0(_DWORD *this)
{
  bool v1; // zf
  int result; // eax

  v1 = this[1]-- == 1;
  if ( v1 )
    result = (*(int (__stdcall **)(signed int))(*this + 16))(1);
  return result;
}

//----- (0048A6C0) --------------------------------------------------------
int __thiscall sub_48A6C0(_DWORD *this)
{
  return this[5];
}

//----- (0048A6D0) --------------------------------------------------------
int __thiscall sub_48A6D0(_DWORD *this)
{
  return this[5];
}

//----- (0048A6E0) --------------------------------------------------------
int __thiscall sub_48A6E0(_DWORD *this)
{
  return this[6];
}

//----- (0048A6F0) --------------------------------------------------------
int __thiscall sub_48A6F0(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[6] = a2;
  return result;
}

//----- (0048A700) --------------------------------------------------------
void *__thiscall sub_48A700(int this, void *Src, size_t Size, void *a4, size_t a5)
{
  int v5; // esi
  void *result; // eax

  v5 = this;
  *(_DWORD *)(this + 24) = Size + a5;
  if ( Src )
    memcpy(*(void **)(this + 20), Src, Size);
  result = a4;
  if ( a4 )
    result = memcpy((void *)(Size + *(_DWORD *)(v5 + 20)), a4, a5);
  return result;
}

//----- (0048A750) --------------------------------------------------------
_DWORD *__thiscall sub_48A750(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[1] = 1;
  *((_BYTE *)this + 8) = 0;
  *this = &UdpLibrary::LogicalPacket::`vftable';
  this[3] = 0;
  this[4] = 0;
  return result;
}
// 51867C: using guessed type void *UdpLibrary::LogicalPacket::`vftable';

//----- (0048A770) --------------------------------------------------------
void __thiscall sub_48A770(_DWORD *this)
{
  *this = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0048A780) --------------------------------------------------------
_DWORD *__thiscall sub_48A780(_DWORD *this, void *Src, int Size)
{
  _DWORD *v3; // esi
  void *v4; // eax

  v3 = this;
  this[1] = 1;
  *((_BYTE *)this + 8) = 0;
  this[3] = 0;
  this[4] = 0;
  *this = &UdpLibrary::SimpleLogicalPacket::`vftable';
  this[6] = Size;
  v4 = operator new(Size);
  v3[5] = v4;
  if ( Src )
    memcpy(v4, Src, v3[6]);
  return v3;
}
// 5186A8: using guessed type void *UdpLibrary::SimpleLogicalPacket::`vftable';

//----- (0048A810) --------------------------------------------------------
void __thiscall sub_48A810(void *this)
{
  _DWORD *v1; // esi

  v1 = this;
  *(_DWORD *)this = &UdpLibrary::SimpleLogicalPacket::`vftable';
  j__free(*((void **)this + 5));
  *v1 = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';
// 5186A8: using guessed type void *UdpLibrary::SimpleLogicalPacket::`vftable';

//----- (0048A8A0) --------------------------------------------------------
int __thiscall sub_48A8A0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax

  v1 = this;
  *this = &UdpLibrary::GroupLogicalPacket::`vftable';
  result = sub_481090(this[5], 0, 1);
  *v1 = &UdpLibrary::UdpRefCount::`vftable';
  return result;
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';
// 5186D4: using guessed type void *UdpLibrary::GroupLogicalPacket::`vftable';

//----- (0048A960) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION_DEBUG *__thiscall sub_48A960(struct _RTL_CRITICAL_SECTION_DEBUG *this, LPCRITICAL_SECTION *a2, size_t Size)
{
  struct _RTL_CRITICAL_SECTION_DEBUG *v3; // esi

  v3 = this;
  this->CriticalSection = (struct _RTL_CRITICAL_SECTION *)1;
  LOBYTE(this->ProcessLocksList.Flink) = 0;
  this->ProcessLocksList.Blink = 0;
  this->EntryCount = 0;
  *(_DWORD *)&this->Type = &UdpLibrary::PooledLogicalPacket::`vftable';
  this[1].CriticalSection = 0;
  this[1].ProcessLocksList.Flink = 0;
  this[1].ProcessLocksList.Blink = 0;
  this[1].EntryCount = 0;
  *(_DWORD *)&this->CreatorBackTraceIndexHigh = Size;
  this->ContentionCount = (DWORD)operator new(Size);
  v3->Flags = 0;
  *(_DWORD *)&v3[1].Type = a2;
  sub_486FE0(a2, v3);
  return v3;
}
// 518700: using guessed type void *UdpLibrary::PooledLogicalPacket::`vftable';

//----- (0048A9F0) --------------------------------------------------------
void __thiscall sub_48A9F0(_DWORD *this)
{
  int v1; // esi
  LPCRITICAL_SECTION *v2; // ecx

  v1 = (int)this;
  *this = &UdpLibrary::PooledLogicalPacket::`vftable';
  v2 = (LPCRITICAL_SECTION *)this[8];
  if ( v2 )
  {
    sub_487040(v2, v1);
    *(_DWORD *)(v1 + 32) = 0;
  }
  j__free(*(void **)(v1 + 20));
  *(_DWORD *)v1 = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';
// 518700: using guessed type void *UdpLibrary::PooledLogicalPacket::`vftable';

//----- (0048AA60) --------------------------------------------------------
void __thiscall sub_48AA60(void *this)
{
  void *v1; // esi
  LPCRITICAL_SECTION *v2; // ecx
  bool v3; // zf

  v1 = this;
  if ( (*(int (**)(void))(*(_DWORD *)this + 12))() == 1 && (v2 = (LPCRITICAL_SECTION *)*((_DWORD *)v1 + 8)) != 0 )
  {
    sub_48A0A0(v2, (struct _RTL_CRITICAL_SECTION_DEBUG *)v1);
  }
  else
  {
    v3 = (*((_DWORD *)v1 + 1))-- == 1;
    if ( v3 )
      (*(void (__thiscall **)(void *, signed int))(*(_DWORD *)v1 + 16))(v1, 1);
  }
}

//----- (0048AAE0) --------------------------------------------------------
void *__thiscall sub_48AAE0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpRefCount::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0048AB00) --------------------------------------------------------
void *__thiscall sub_48AB00(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A810(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0048AB20) --------------------------------------------------------
void *__thiscall sub_48AB20(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A8A0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0048AB40) --------------------------------------------------------
void *__thiscall sub_48AB40(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_48A9F0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0048AB60) --------------------------------------------------------
void __thiscall sub_48AB60(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi

  v1 = this;
  v2 = this + 3;
  sub_4808E0(this + 3);
  v1[1] = (LPCRITICAL_SECTION)((char *)v1[1] + 1);
  sub_4808F0(v2);
}

//----- (0048AB80) --------------------------------------------------------
void __thiscall sub_48AB80(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  bool v3; // zf
  bool v4; // bl

  v1 = this;
  v2 = this + 3;
  sub_4808E0(this + 3);
  v3 = v1[1] == (LPCRITICAL_SECTION)1;
  v1[1] = (LPCRITICAL_SECTION)((char *)v1[1] - 1);
  v4 = v3;
  sub_4808F0(v2);
  if ( v4 )
    ((void (__thiscall *)(LPCRITICAL_SECTION *, signed int))(*v1)->LockSemaphore)(v1, 1);
}

//----- (0048ABB0) --------------------------------------------------------
void __thiscall sub_48ABB0(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  unsigned __int8 v3; // cf

  v1 = this;
  v2 = this + 149;
  sub_4808E0(this + 149);
  v3 = __CFADD__(v1[170], 1);
  v1[170] = (LPCRITICAL_SECTION)((char *)v1[170] + 1);
  v1[171] = (LPCRITICAL_SECTION)((char *)v1[171] + v3);
  sub_4808F0(v2);
}

//----- (0048AC40) --------------------------------------------------------
LPCRITICAL_SECTION __thiscall sub_48AC40(LPCRITICAL_SECTION *this)
{
  LPCRITICAL_SECTION *v1; // esi
  LPCRITICAL_SECTION *v2; // edi
  LPCRITICAL_SECTION v3; // esi

  v1 = this;
  v2 = this + 137;
  sub_4808E0(this + 137);
  v3 = v1[35];
  sub_4808F0(v2);
  return v3;
}

//----- (0048AC70) --------------------------------------------------------
signed __int64 __thiscall sub_48AC70(_DWORD *this, int a2)
{
  unsigned __int64 v2; // rdi
  signed __int64 v3; // rdi

  LODWORD(v2) = this[48] & 0xFFFF0000;
  HIDWORD(v2) = this[49];
  v3 = a2 | v2;
  if ( v3 < *((_QWORD *)this + 24) - 30000i64 )
    v3 += 0x10000i64;
  if ( v3 > *((_QWORD *)this + 24) + 30000i64 )
    v3 -= 0x10000i64;
  return v3;
}

//----- (0048AD00) --------------------------------------------------------
void __thiscall sub_48AD00(void *this)
{
  int v1; // ecx

  v1 = *(_DWORD *)this;
  if ( v1 )
    (*(void (**)(void))(*(_DWORD *)v1 + 4))();
}

//----- (0048AD10) --------------------------------------------------------
void __thiscall sub_48AD10(void *this)
{
  *((_DWORD *)this + 4) = 0;
}

//----- (0048AD20) --------------------------------------------------------
void __thiscall sub_48AD20(void *this)
{
  if ( *((_DWORD *)this + 4) )
    (*(void (**)(void))(**((_DWORD **)this + 4) + 4))();
}

//----- (0048AD40) --------------------------------------------------------
_DWORD *__thiscall sub_48AD40(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // ebp
  _DWORD *v5; // edx
  const void *v6; // esi
  bool v7; // zf
  bool v8; // sf
  unsigned __int8 v9; // of
  int *v10; // edi
  int *v11; // eax
  int v12; // ecx
  int v13; // eax
  int *v14; // ecx
  int *v15; // eax
  _DWORD *v16; // edx
  int v17; // ecx
  int *v18; // eax
  int v19; // esi
  int *v20; // edx
  int *v21; // esi
  int v22; // esi
  int *v23; // edx
  int v24; // esi
  int *v25; // eax
  int v26; // edx
  int v27; // ecx
  int *v28; // eax
  int v29; // edi
  int v30; // esi
  int v31; // eax
  int v32; // ecx
  int *v33; // eax
  int v34; // edi

  v4 = this;
  this[37] = &UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';
  this[38] = 0;
  this[39] = 0;
  this[40] = 12;
  this[41] = 0;
  v5 = (_DWORD *)a3;
  v6 = (const void *)a4;
  this[22] = a2;
  this[12] = v5;
  qmemcpy(this, v6, 0x30u);
  v9 = __OFSUB__(this[1], 30000);
  v7 = this[1] == 30000;
  v8 = this[1] - 30000 < 0;
  v10 = this + 1;
  a3 = 30000;
  v11 = &a3;
  if ( (unsigned __int8)(v8 ^ v9) | v7 )
    v11 = this + 1;
  v12 = *v11;
  v13 = v4[3];
  *v10 = v12;
  v4[33] = 800;
  v4[16] = 0;
  v4[17] = 0;
  if ( !v13 || v13 > v5[97] )
    v13 = v5[97];
  v14 = v4 + 34;
  v7 = v4[4] == 0;
  v4[34] = v13 - v5[116] - v5[94] - 4;
  v15 = v4 + 4;
  if ( !v7 )
  {
    if ( *v15 >= *v14 )
      v15 = v4 + 34;
    *v14 = *v15;
  }
  v7 = *((_BYTE *)v4 + 45) == 0;
  v4[55] = -1;
  if ( !v7 )
    v4[55] = *v14 - 5;
  v4[48] = 0;
  v4[49] = 0;
  v4[24] = 0;
  v4[25] = 0;
  v4[26] = 0;
  v4[27] = 0;
  v4[28] = 0;
  v4[29] = 0;
  v4[51] = 0;
  v4[52] = 0;
  v4[53] = 0;
  v4[54] = 0;
  v4[56] = 0;
  v4[57] = 0;
  v4[58] = 0;
  v4[59] = 0;
  v4[20] = 0;
  v4[21] = 0;
  v16 = v4 + 9;
  if ( *v14 >= v4[9] )
    v16 = v4 + 34;
  v17 = *v14;
  v18 = v4 + 45;
  v4[45] = *v16;
  v19 = 4 * v17;
  a2 = 2 * v17;
  a3 = 4380;
  a4 = 4 * v17;
  v20 = &a3;
  if ( 2 * v17 >= 4380 )
    v20 = &a2;
  v9 = __OFSUB__(*v20, v19);
  v8 = *v20 - v19 < 0;
  v21 = v20;
  if ( !(v8 ^ v9) )
    v21 = &a4;
  v22 = *v21;
  v23 = v4 + 42;
  v4[42] = v22;
  if ( v22 >= *v18 )
    v18 = v4 + 42;
  v24 = *v10;
  *v23 = *v18;
  v9 = __OFSUB__(*v4, v17 * v24);
  v8 = *v4 - v17 * v24 < 0;
  a3 = v17 * v24;
  v25 = v4;
  if ( !(v8 ^ v9) )
    v25 = &a3;
  v26 = *v23;
  v4[44] = *v25;
  v4[43] = v26;
  v4[31] = 0;
  v4[32] = 0;
  v4[30] = 0;
  v4[35] = 0;
  v4[14] = 0;
  v4[15] = 0;
  v27 = 32 * v24 | -((unsigned __int64)(unsigned int)v24 >> 27 != 0);
  *((_BYTE *)v4 + 184) = 0;
  v4[18] = 0;
  v4[19] = 0;
  v28 = (int *)operator new((v27 + 4) | -__CFADD__(v27, 4));
  a3 = (int)v28;
  if ( v28 )
  {
    v29 = (int)(v28 + 1);
    *v28 = v24;
    `eh vector constructor iterator'(v28 + 1, 0x20u, v24, sub_48AD10, sub_48AD20);
  }
  else
  {
    v29 = 0;
  }
  v30 = v4[2];
  v31 = 8 * v4[2];
  v32 = (unsigned __int64)(unsigned int)v4[2] >> 29 != 0;
  v4[36] = v29;
  v33 = (int *)operator new(((v31 | -v32) + 4) | -__CFADD__(v31 | -v32, 4));
  a3 = (int)v33;
  if ( v33 )
  {
    v34 = (int)(v33 + 1);
    *v33 = v30;
    `eh vector constructor iterator'(
      v33 + 1,
      8u,
      v30,
      (void (__thiscall *)(void *))Concurrency::details::_ReaderWriterLock::_ReaderWriterLock,
      sub_48AD00);
    v4[50] = v34;
  }
  else
  {
    v4[50] = 0;
  }
  return v4;
}
// 51872C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';

//----- (0048B010) --------------------------------------------------------
int __thiscall sub_48B010(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  (**(void (__thiscall ***)(int))a2)(a2);
  v2[29] += (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 28))(a2);
  *(_DWORD *)(a2 + v2[40]) = v2[39];
  result = v2[39];
  if ( result )
  {
    *(_DWORD *)(v2[40] + result + 4) = a2;
    ++v2[41];
  }
  else
  {
    ++v2[41];
    v2[38] = a2;
  }
  v2[39] = a2;
  return result;
}

//----- (0048B080) --------------------------------------------------------
void __thiscall sub_48B080(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  _DWORD *v4; // edi
  unsigned int v5; // ecx
  unsigned int v6; // ebx
  __int64 *v7; // ebx
  int v8; // ebp
  int v9; // ebp
  int v10; // esi
  LPCRITICAL_SECTION *v11; // ebp
  int v12; // esi
  LPCRITICAL_SECTION *v13; // [esp+10h] [ebp+4h]

  v2 = this;
  v3 = 0;
  if ( this[51] )
    v3 = this[53] - this[52];
  v4 = a2;
  *a2 = v3 + this[29] + this[28];
  a2[1] = this[41];
  a2[2] = this[29];
  a2[3] = this[32];
  a2[4] = this[31];
  a2[6] = this[57];
  a2[7] = this[58];
  a2[8] = this[59];
  a2[9] = this[44];
  a2[10] = this[43];
  a2[11] = this[33];
  a2[5] = 0;
  v5 = this[27];
  v6 = v2[26];
  if ( (signed __int64)__PAIR__(v5, v6) < *((_QWORD *)v2 + 12) )
  {
    v7 = (__int64 *)(v2[36] + 32 * (unsigned __int64)((signed __int64)__PAIR__(v5, v6) % (signed int)v2[1]));
    if ( *v7 )
    {
      v8 = v2[12];
      v13 = (LPCRITICAL_SECTION *)(v8 + 548);
      sub_4808E0((LPCRITICAL_SECTION *)(v8 + 548));
      v9 = *(_DWORD *)(v8 + 140);
      sub_4808F0(v13);
      if ( v9 )
      {
        v10 = v2[12];
        v11 = (LPCRITICAL_SECTION *)(v10 + 548);
        sub_4808E0((LPCRITICAL_SECTION *)(v10 + 548));
        v12 = *(_DWORD *)(v10 + 140);
        sub_4808F0(v11);
        v4[5] = sub_402220(*v7);
      }
    }
  }
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (0048B190) --------------------------------------------------------
void __thiscall sub_48B190(int this, int a2, _BYTE *a3, signed int a4)
{
  int v4; // esi
  signed int v5; // ebx
  _BYTE *v6; // edi
  unsigned __int16 v7; // ax
  int v8; // eax
  _DWORD *v9; // ecx
  _BYTE *v10; // edi
  _BYTE *v11; // eax
  bool v12; // sf
  unsigned __int8 v13; // of
  size_t *v14; // eax
  size_t v15; // ebx

  v4 = this;
  if ( a2 )
  {
    if ( a2 != 1 )
      return;
    v5 = a4;
    if ( *(_DWORD *)(this + 120) )
    {
      v10 = a3;
    }
    else
    {
      if ( a4 < 4 )
      {
        sub_483CF0(*(_DWORD **)(this + 48), a3, a4, 9);
        return;
      }
      v6 = a3;
      HIBYTE(v7) = *a3;
      LOBYTE(v7) = a3[1];
      v8 = (unsigned __int8)a3[3] | (((unsigned __int8)a3[2] | (v7 << 8)) << 8);
      v9 = *(_DWORD **)(this + 48);
      *(_DWORD *)(v4 + 128) = v8;
      if ( v8 <= 0 )
      {
        sub_483CF0(v9, v6, v5, 9);
        return;
      }
      if ( v8 > *(_DWORD *)(v9[35] + 368) )
      {
        sub_483CF0(v9, v6, v5, 8);
        return;
      }
      v10 = v6 + 4;
      v5 -= 4;
      *(_DWORD *)(v4 + 120) = operator new(v8);
      *(_DWORD *)(v4 + 124) = 0;
      a4 = v5;
    }
    v11 = (_BYTE *)(*(_DWORD *)(v4 + 128) - *(_DWORD *)(v4 + 124));
    a3 = v11;
    v13 = __OFSUB__(v5, v11);
    v12 = v5 - (signed int)v11 < 0;
    v14 = (size_t *)&a4;
    if ( !(v12 ^ v13) )
      v14 = (size_t *)&a3;
    v15 = *v14;
    memcpy((void *)(*(_DWORD *)(v4 + 120) + *(_DWORD *)(v4 + 124)), v10, *v14);
    *(_DWORD *)(v4 + 124) += v15;
    if ( *(_DWORD *)(v4 + 128) == *(_DWORD *)(v4 + 124) )
    {
      sub_484010(*(_DWORD *)(v4 + 48), *(_QWORD *)(v4 + 120));
      j__free(*(void **)(v4 + 120));
      *(_DWORD *)(v4 + 124) = 0;
      *(_DWORD *)(v4 + 128) = 0;
      *(_DWORD *)(v4 + 120) = 0;
    }
  }
  else if ( *(_DWORD *)(this + 120) )
  {
    sub_483CF0(*(_DWORD **)(this + 48), a3, a4, 10);
  }
  else
  {
    sub_484010(*(_DWORD *)(this + 48), __PAIR__(a4, (unsigned int)a3));
  }
}

//----- (0048B2F0) --------------------------------------------------------
void __thiscall sub_48B2F0(int this, __int64 a2)
{
  int v2; // esi
  int v3; // edi
  bool v4; // zf
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  bool v8; // sf
  unsigned __int8 v9; // of
  int *v10; // eax
  __int64 v11; // ST0C_8
  int v12; // ecx
  unsigned int v13; // kr00_4
  unsigned int v14; // ebp
  unsigned int v15; // edi
  int v16; // [esp+8h] [ebp-4h]

  v2 = this;
  if ( a2 >= *(_QWORD *)(this + 104) && a2 < *(_QWORD *)(this + 96) )
  {
    v3 = *(_DWORD *)(this + 144) + 32 * (unsigned __int64)(a2 % *(signed int *)(this + 4));
    if ( *(_DWORD *)(v3 + 20) )
    {
      v4 = *(_BYTE *)(this + 184) == 0;
      *(_DWORD *)(this + 72) = 0;
      *(_DWORD *)(this + 76) = 0;
      if ( !v4 )
      {
        v5 = *(_DWORD *)(this + 172);
        v6 = *(_DWORD *)(v2 + 136);
        if ( v5 >= *(_DWORD *)(v2 + 176) )
        {
          v7 = v6 * v6 / v5;
          v16 = 1;
          LODWORD(a2) = v7;
          v9 = __OFSUB__(v7, 1);
          v4 = v7 == 1;
          v8 = v7 - 1 < 0;
          v10 = (int *)&a2;
          if ( (unsigned __int8)(v8 ^ v9) | v4 )
            v10 = &v16;
          *(_DWORD *)(v2 + 172) = v5 + *v10;
        }
        else
        {
          *(_DWORD *)(v2 + 172) = v5 + v6;
        }
      }
      if ( *(_DWORD *)(v3 + 8) == *(_DWORD *)v3 && *(_DWORD *)(v3 + 12) == *(_DWORD *)(v3 + 4) )
      {
        v11 = *(_QWORD *)v3;
        sub_48AC40(*(LPCRITICAL_SECTION **)(v2 + 48));
        *(_DWORD *)(v2 + 132) = (*(_DWORD *)(v2 + 132) + sub_402220(v11) + 2 * *(_DWORD *)(v2 + 132)) / 4;
      }
      *(_DWORD *)(v2 + 56) = *(_DWORD *)v3;
      *(_DWORD *)(v2 + 60) = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v2 + 112) -= *(_DWORD *)(v3 + 24);
      v12 = *(_DWORD *)(v3 + 16);
      *(_DWORD *)(v3 + 24) = 0;
      *(_DWORD *)(v3 + 20) = 0;
      (*(void (**)(void))(*(_DWORD *)v12 + 4))();
      *(_DWORD *)(v3 + 16) = 0;
      if ( *(_QWORD *)(v2 + 104) < *(_QWORD *)(v2 + 96) )
      {
        v13 = *(_DWORD *)(v2 + 4);
        HIDWORD(a2) = *(_DWORD *)(v2 + 4) >> 31;
        do
        {
          v14 = *(_DWORD *)(v2 + 108);
          v15 = *(_DWORD *)(v2 + 104);
          if ( *(_DWORD *)(32
                         * (unsigned __int64)((signed __int64)__PAIR__(v14, v15)
                                            % (signed __int64)__PAIR__(HIDWORD(a2), v13))
                         + *(_DWORD *)(v2 + 144)
                         + 20) )
            break;
          *(_QWORD *)(v2 + 104) = __PAIR__(v14, v15) + 1;
        }
        while ( (signed __int64)(__PAIR__(v14, v15) + 1) < *(_QWORD *)(v2 + 96) );
      }
    }
  }
}
// 402220: using guessed type _DWORD __stdcall sub_402220(__int64);

//----- (0048B470) --------------------------------------------------------
void __thiscall sub_48B470(_DWORD *this)
{
  _DWORD *v1; // ebp
  int v2; // ecx
  _DWORD *v3; // esi
  int i; // eax
  int v5; // ecx
  int v6; // edx
  int v7; // edx
  char *v8; // eax
  char *v9; // edi
  char *v10; // eax
  char *v11; // edi
  _DWORD *v12; // [esp+14h] [ebp-10h]

  v1 = this;
  v12 = this;
  v2 = this[51];
  if ( v2 )
  {
    (*(void (**)(void))(*(_DWORD *)v2 + 4))();
    v1[51] = 0;
  }
  v3 = v1 + 37;
  if ( v1[38] )
  {
    for ( i = sub_48C620(v1 + 37, v1[38]); i; --v3[4] )
    {
      (*(void (__thiscall **)(int))(*(_DWORD *)i + 4))(i);
      i = v3[1];
      if ( !i )
        break;
      v5 = v3[3];
      v6 = *(_DWORD *)(v5 + i);
      if ( v6 )
        *(_DWORD *)(v6 + v5 + 4) = *(_DWORD *)(v5 + i + 4);
      else
        v3[1] = *(_DWORD *)(v5 + i + 4);
      v7 = *(_DWORD *)(v5 + i + 4);
      if ( v7 )
      {
        *(_DWORD *)(v7 + v3[3]) = *(_DWORD *)(v5 + i);
        v1 = v12;
      }
      else
      {
        v3[2] = *(_DWORD *)(v5 + i);
      }
      *(_DWORD *)(v5 + i + 4) = 0;
      *(_DWORD *)(v5 + i) = 0;
    }
  }
  v8 = (char *)v1[36];
  if ( v8 )
  {
    v9 = v8 - 4;
    `eh vector destructor iterator'(v8, 0x20u, *((_DWORD *)v8 - 1), sub_48AD20);
    j__free(v9);
  }
  v10 = (char *)v1[50];
  if ( v10 )
  {
    v11 = v10 - 4;
    `eh vector destructor iterator'(v10, 8u, *((_DWORD *)v10 - 1), sub_48AD00);
    j__free(v11);
  }
  j__free((void *)v1[30]);
  *v3 = &UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';
}
// 51872C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';

//----- (0048B5A0) --------------------------------------------------------
void __thiscall sub_48B5A0(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int v2; // eax
  size_t Size; // [esp+4h] [ebp-4h]

  v1 = this;
  if ( this[51] )
  {
    if ( this[54] == 1 )
    {
      v2 = sub_481160((unsigned __int8 *)(this[52] + 2), (int *)&Size);
      memcpy_0((void *)v1[52], (const void *)(v1[52] + v2 + 2), Size);
      v1[53] = Size + v1[52];
    }
    (*(void (__stdcall **)(int))(*(_DWORD *)v1[51] + 32))(v1[53] - v1[52]);
    sub_48B010(v1, v1[51]);
    (*(void (**)(void))(*(_DWORD *)v1[51] + 4))();
    v1[51] = 0;
  }
}

//----- (0048B640) --------------------------------------------------------
void *__thiscall sub_48B640(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5)
{
  _DWORD *v5; // esi
  unsigned int v6; // edi
  _DWORD *v7; // eax
  _BYTE *v8; // eax
  _BYTE *v9; // ecx
  void *result; // eax

  v5 = this;
  v6 = Size + a5;
  if ( this[51] )
  {
    while ( (signed int)(v6 + 3) > v5[34] + v5[52] - v5[53] )
    {
      sub_48B5A0(v5);
      if ( !v5[51] )
        goto LABEL_4;
    }
  }
  else
  {
LABEL_4:
    v7 = sub_486EE0(*(_DWORD *)(v5[12] + 140), 0, v5[34], 0, 0);
    v5[51] = v7;
    v8 = (_BYTE *)(*(int (__thiscall **)(_DWORD *))(*v7 + 24))(v7);
    v5[53] = v8;
    v5[52] = v8;
    *v8 = 0;
    *(_BYTE *)++v5[53] = 25;
    ++v5[53];
    v5[54] = 0;
  }
  v9 = (_BYTE *)v5[53];
  ++v5[54];
  v5[53] += sub_481100(v9, v6);
  if ( Src )
    memcpy((void *)v5[53], Src, Size);
  v5[53] += Size;
  result = (void *)v5[53];
  if ( a4 )
    result = memcpy(result, a4, a5);
  v5[53] += a5;
  return result;
}

//----- (0048B760) --------------------------------------------------------
char __thiscall sub_48B760(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  char v4; // bl
  void (***v5)(void); // ecx
  _DWORD *v6; // edi
  int v7; // ecx
  int v8; // ebp
  int v9; // eax
  int v10; // edx
  bool v11; // sf
  unsigned __int8 v12; // of
  int *v13; // eax
  int v14; // ebx
  int v15; // eax
  int v16; // ecx
  int v17; // edx
  int v18; // edx
  bool v19; // zf
  int v21; // [esp+Ch] [ebp-Ch]
  int v22; // [esp+10h] [ebp-8h]
  int v23; // [esp+14h] [ebp-4h]

  v2 = this;
  v3 = this[24] - this[26];
  v4 = 0;
  v21 = this[24] - this[26];
  if ( a2 > 0 )
  {
    while ( v3 < v2[1] )
    {
      if ( !v2[41] )
      {
        sub_48B5A0(v2);
        if ( !v2[41] )
          break;
      }
      v5 = (void (***)(void))v2[38];
      v6 = (_DWORD *)(v2[36] + 32 * (unsigned __int64)(*((_QWORD *)v2 + 12) % (signed __int64)(signed int)v2[1]));
      v6[4] = v5;
      (**v5)();
      v7 = v6[4];
      *v6 = 0;
      v6[1] = 0;
      v6[2] = 0;
      v6[3] = 0;
      v8 = (*(int (**)(void))(*(_DWORD *)v7 + 28))();
      v9 = (*(int (**)(void))(*(_DWORD *)v6[4] + 20))();
      v10 = v2[35];
      v23 = v9;
      v12 = __OFSUB__(v2[34], v8 - v10);
      v11 = v2[34] - (v8 - v10) < 0;
      v13 = v2 + 34;
      v22 = v8 - v10;
      if ( !(v11 ^ v12) )
        v13 = &v22;
      v14 = *v13;
      v6[5] = v23 + v10;
      if ( v14 != v8 && !v2[35] )
        v14 -= 4;
      v6[6] = v14;
      v2[28] += v14;
      if ( v14 == v8 - v10 )
      {
        v2[35] = 0;
        v15 = v2[38];
        if ( v15 )
        {
          v16 = v2[40];
          v17 = *(_DWORD *)(v16 + v15);
          if ( v17 )
            *(_DWORD *)(v17 + v16 + 4) = *(_DWORD *)(v16 + v15 + 4);
          else
            v2[38] = *(_DWORD *)(v16 + v15 + 4);
          v18 = *(_DWORD *)(v16 + v15 + 4);
          if ( v18 )
            *(_DWORD *)(v18 + v2[40]) = *(_DWORD *)(v16 + v15);
          else
            v2[39] = *(_DWORD *)(v16 + v15);
          *(_DWORD *)(v16 + v15 + 4) = 0;
          *(_DWORD *)(v16 + v15) = 0;
          --v2[41];
          (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 4))(v15);
        }
        else
        {
          (*(void (__thiscall **)(_DWORD))(MEMORY[0] + 4))(0);
        }
      }
      else
      {
        v2[35] += v14;
      }
      v2[29] -= v14;
      ++*((_QWORD *)v2 + 12);
      ++v21;
      v19 = a2 == v14;
      v11 = a2 - v14 < 0;
      a2 -= v14;
      v4 = 1;
      if ( v11 || v19 )
        break;
      v3 = v21;
    }
  }
  return v4;
}

//----- (0048B910) --------------------------------------------------------
signed int __thiscall sub_48B910(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  LPCRITICAL_SECTION *v3; // ebx
  int v4; // edi
  LPCRITICAL_SECTION *v5; // ebx
  unsigned int v6; // ebp
  signed int v7; // edi
  signed int v8; // eax
  unsigned int v9; // ecx
  unsigned __int8 v10; // of
  int v11; // eax
  int v12; // ecx
  unsigned int v13; // kr08_4
  int v15; // ecx
  signed __int64 v16; // rax
  unsigned __int8 v17; // of
  int v18; // eax
  int *v19; // ecx
  int v20; // eax
  int v21; // ecx
  bool v22; // zf
  bool v23; // sf
  unsigned __int8 v24; // of
  unsigned int v25; // eax
  bool v26; // zf
  bool v27; // sf
  unsigned __int8 v28; // of
  signed int v29; // ecx
  unsigned __int64 v30; // kr10_8
  bool v31; // sf
  unsigned __int8 v32; // of
  __int64 *v33; // edx
  int *v34; // eax
  unsigned int v35; // ebx
  bool v36; // sf
  unsigned __int8 v37; // of
  unsigned int v38; // edi
  int v39; // ebp
  bool v40; // zf
  int v41; // eax
  int v42; // ecx
  unsigned int v43; // edx
  unsigned int v44; // edi
  int v45; // ecx
  signed int v46; // ecx
  int v47; // edi
  unsigned int v48; // kr18_4
  unsigned __int8 v49; // of
  int *v50; // ecx
  unsigned int v51; // kr20_4
  bool v52; // zf
  bool v53; // sf
  unsigned __int8 v54; // of
  unsigned int v55; // eax
  unsigned __int8 v56; // of
  int v57; // ecx
  int v58; // eax
  int v59; // ecx
  __int64 v60; // ST04_8
  unsigned int v61; // edi
  int v62; // edx
  int v63; // ebp
  char v64; // bl
  unsigned __int64 v65; // kr28_8
  int v66; // ecx
  int v67; // ebp
  int v68; // eax
  signed __int64 v69; // kr30_8
  char *v70; // eax
  int v71; // eax
  unsigned int v72; // ecx
  unsigned int v73; // edx
  int v74; // edx
  int v75; // ebp
  signed int v76; // ebx
  signed int v77; // eax
  int v78; // ecx
  unsigned int v79; // kr38_4
  unsigned __int8 v80; // of
  int v81; // edx
  int *v82; // ecx
  int v83; // eax
  int *v84; // eax
  int v85; // eax
  int v86; // ebp
  LPCRITICAL_SECTION *v87; // ebx
  int v88; // ecx
  int *v89; // ebx
  int v90; // eax
  int v91; // ecx
  int *v92; // eax
  int v93; // ecx
  int v94; // edx
  _DWORD *v95; // ecx
  int v96; // ebp
  unsigned __int64 v97; // kr40_8
  int *v98; // eax
  int v99; // eax
  int v100; // ecx
  int v101; // ecx
  int v102; // eax
  int *v103; // eax
  bool v104; // [esp+12h] [ebp-10F2h]
  char v105; // [esp+13h] [ebp-10F1h]
  int v106; // [esp+14h] [ebp-10F0h]
  unsigned __int64 v107; // [esp+18h] [ebp-10ECh]
  int v108; // [esp+20h] [ebp-10E4h]
  char *v109; // [esp+24h] [ebp-10E0h]
  int v110; // [esp+28h] [ebp-10DCh]
  char *v111; // [esp+2Ch] [ebp-10D8h]
  int v112; // [esp+30h] [ebp-10D4h]
  __int64 v113; // [esp+34h] [ebp-10D0h]
  int v114; // [esp+3Ch] [ebp-10C8h]
  int v115; // [esp+40h] [ebp-10C4h]
  int v116; // [esp+44h] [ebp-10C0h]
  int v117; // [esp+48h] [ebp-10BCh]
  unsigned int v118; // [esp+4Ch] [ebp-10B8h]
  int v119; // [esp+50h] [ebp-10B4h]
  int v120; // [esp+54h] [ebp-10B0h]
  __int64 v121; // [esp+58h] [ebp-10ACh]
  char v122; // [esp+60h] [ebp-10A4h]
  char Src; // [esp+1000h] [ebp-104h]
  char v124; // [esp+1001h] [ebp-103h]
  char v125; // [esp+1002h] [ebp-102h]
  char v126; // [esp+1003h] [ebp-101h]
  char v127; // [esp+1004h] [ebp-100h]
  char v128; // [esp+1005h] [ebp-FFh]
  char v129; // [esp+1006h] [ebp-FEh]
  char v130; // [esp+1007h] [ebp-FDh]
  char v131; // [esp+1008h] [ebp-FCh]

  v1 = this;
  v2 = this[12];
  v3 = (LPCRITICAL_SECTION *)(v2 + 548);
  sub_4808E0((LPCRITICAL_SECTION *)(v2 + 548));
  v4 = *(_DWORD *)(v2 + 140);
  sub_4808F0(v3);
  v5 = (LPCRITICAL_SECTION *)(v4 + 576);
  sub_4808E0((LPCRITICAL_SECTION *)(v4 + 576));
  v6 = *(_DWORD *)(v4 + 568);
  v7 = *(_DWORD *)(v4 + 572);
  v107 = __PAIR__(v7, v6);
  sub_4808F0(v5);
  v8 = v1[19];
  v9 = v1[18];
  if ( v7 > v8 || v7 >= v8 && v6 >= v9 )
  {
    v15 = v1[5];
    if ( v15 > 0 )
    {
      v16 = __PAIR__(v7, v6) - *((_QWORD *)v1 + 8);
      v17 = __OFSUB__(v7, (v6 < v1[16]) + v1[17]);
      HIDWORD(v113) = (__PAIR__((unsigned int)v7, v6) - *((_QWORD *)v1 + 8)) >> 32;
      if ( v113 >= 0 && (!((unsigned __int8)((v16 < 0) ^ v17) | (HIDWORD(v16) == 0)) || (unsigned int)v16 > 0x7FFFFFFF) )
        LODWORD(v16) = 0x7FFFFFFF;
      v12 = v15 - v16;
      if ( v12 > 0 )
        return v12;
    }
    v18 = v1[6] + v1[33] * v1[7] / 100;
    v19 = v1 + 8;
    v10 = __OFSUB__(v18, v1[8]);
    v23 = v18 - v1[8] < 0;
    v110 = v1[6] + v1[33] * v1[7] / 100;
    if ( v23 ^ v10 )
      v19 = &v110;
    v20 = *v19;
    v21 = v1[27];
    v24 = __OFSUB__(v21, v1[25]);
    v22 = v21 == v1[25];
    v23 = v21 - v1[25] < 0;
    v110 = v20;
    *((_BYTE *)v1 + 184) = 0;
    v106 = 600000;
    if ( !(v23 ^ v24) && (!((unsigned __int8)(v23 ^ v24) | v22) || v1[26] >= v1[24]) && !v1[41] && !v1[51] )
    {
      v1[43] = v1[42];
LABEL_22:
      v25 = v107 - v1[16];
      v28 = __OFSUB__(HIDWORD(v107), ((unsigned int)v107 < v1[16]) + v1[17]);
      v26 = (v107 - *((_QWORD *)v1 + 8)) >> 32 == 0;
      v27 = (((v107 - *((_QWORD *)v1 + 8)) >> 32) & 0x80000000) != 0i64;
      HIDWORD(v113) = (v107 - *((_QWORD *)v1 + 8)) >> 32;
      if ( v113 < 0 || (unsigned __int8)(v27 ^ v28) | v26 && v25 <= 0x7FFFFFFF )
        v29 = v25;
      else
        v29 = 0x7FFFFFFF;
      v102 = v1[5] - v29;
      v10 = __OFSUB__(v102, v106);
      v23 = v102 - v106 < 0;
      v115 = v1[5] - v29;
      v119 = 0;
      v103 = &v106;
      if ( !(v23 ^ v10) )
        v103 = &v115;
      if ( *v103 <= 0 )
        v103 = &v119;
      v12 = *v103;
      *((_QWORD *)v1 + 9) = v107 + *v103;
      return v12;
    }
    v30 = __PAIR__(v7, v6) - v20;
    v32 = __OFSUB__(HIDWORD(v30), v1[15]);
    v22 = HIDWORD(v30) == v1[15];
    v31 = HIDWORD(v30) - v1[15] < 0;
    v33 = (__int64 *)(v1 + 14);
    v113 = __PAIR__(v7, v6) - v20;
    if ( !((unsigned __int8)(v31 ^ v32) | v22) || !(v31 ^ v32) && (unsigned int)v30 >= *(_DWORD *)v33 )
      v33 = &v113;
    v121 = *v33;
    while ( 1 )
    {
      v34 = v1 + 43;
      v105 = 0;
      if ( v1[43] >= *v1 )
        v34 = v1;
      v35 = v1[27];
      v37 = __OFSUB__(v35, v1[25]);
      v22 = v35 == v1[25];
      v36 = (signed int)(v35 - v1[25]) < 0;
      v38 = v1[26];
      v114 = *v34;
      v108 = 0;
      v111 = &v122;
      v39 = v114;
      LODWORD(v113) = v38;
      if ( (unsigned __int8)(v36 ^ v37) | v22 && (v36 ^ v37 || v38 <= v1[24]) )
      {
LABEL_36:
        v40 = v38 == v1[24];
        do
        {
          if ( v40 && v35 == v1[25] && !sub_48B760(v1, v39) )
            break;
          v41 = v1[36] + 32 * (unsigned __int64)((signed __int64)__PAIR__(v35, v38) % (signed int)v1[1]);
          if ( *(_DWORD *)(v41 + 20) )
          {
            v42 = *(_DWORD *)(v41 + 24);
            v43 = *(_DWORD *)(v41 + 12);
            v44 = *(_DWORD *)(v41 + 8);
            v109 = (char *)(v39 - v42);
            if ( (signed __int64)__PAIR__(v43, v44) >= v121 )
            {
              v108 += v42;
              v49 = __OFSUB__(HIDWORD(v107), ((unsigned int)v107 < v44) + v43);
              v48 = v107 - v44;
              v47 = (v107 - __PAIR__(v43, v44)) >> 32;
              v46 = v48;
              v116 = v47;
              if ( v47 >= 0 && (!((unsigned __int8)((v47 < 0) ^ v49) | (v47 == 0)) || v48 > 0x7FFFFFFF) )
                v46 = 0x7FFFFFFF;
              v10 = __OFSUB__(v110 - v46, v106);
              v23 = v110 - v46 - v106 < 0;
              v112 = v110 - v46;
              v50 = &v112;
              if ( !(v23 ^ v10) )
                v50 = &v106;
              v106 = *v50;
            }
            else
            {
              v45 = (int)v111;
              if ( v111 >= &Src )
              {
                v105 = 1;
              }
              else
              {
                *(_DWORD *)v111 = v41;
                v111 = (char *)(v45 + 4);
              }
            }
            v39 = (int)v109;
            if ( !*(_QWORD *)v41 && (signed int)v109 <= 0 )
              break;
            v38 = v113;
          }
          v51 = v38 + 1;
          v35 = (__PAIR__(v35, v38) + 1) >> 32;
          v38 = v51;
          v54 = __OFSUB__(v35, v1[25]);
          v52 = v35 == v1[25];
          v53 = (signed int)(v35 - v1[25]) < 0;
          LODWORD(v113) = v51;
          if ( v53 ^ v54 )
            goto LABEL_36;
          if ( !((unsigned __int8)(v53 ^ v54) | v52) )
            break;
          v40 = v51 == v1[24];
        }
        while ( v51 <= v1[24] );
      }
      v55 = v107 - v1[20];
      v56 = __OFSUB__(HIDWORD(v107), ((unsigned int)v107 < v1[20]) + v1[21]);
      v57 = (v107 - *((_QWORD *)v1 + 10)) >> 32;
      v117 = 0;
      v116 = v57;
      if ( v57 >= 0 && (!((unsigned __int8)((v57 < 0) ^ v56) | (v57 == 0)) || v55 > 0x7FFFFFFF) )
        v55 = 0x7FFFFFFF;
      v10 = __OFSUB__(v55, v1[33]);
      v22 = v55 == v1[33];
      v23 = (signed int)(v55 - v1[33]) < 0;
      v58 = v1[1];
      v59 = v1[26];
      v109 = &v122;
      HIDWORD(v60) = v1[27];
      LODWORD(v60) = v59;
      v104 = !((unsigned __int8)(v23 ^ v10) | v22);
      v112 = 0;
      v118 = v1[36] + 32 * (unsigned __int64)(v60 % v58);
      if ( &v122 >= v111 )
      {
LABEL_105:
        if ( v108 < v114 )
          goto LABEL_107;
      }
      else
      {
        while ( v108 < v114 )
        {
          v61 = *(_DWORD *)v109;
          v62 = **(_DWORD **)(*(_DWORD *)v109 + 16);
          v109 += 4;
          v63 = (*(int (**)(void))(v62 + 20))();
          v64 = 0;
          v22 = *(_DWORD *)(v61 + 20) == v63;
          v115 = v63;
          if ( !v22 || *(_DWORD *)(v61 + 24) != (*(int (**)(void))(**(_DWORD **)(v61 + 16) + 28))() )
            v64 = 1;
          if ( v61 < v118 )
          {
            v67 = v1[36];
            v66 = (signed int)(v67 + 32 * v1[1] - v118) >> 5;
            v119 = v66 >> 31;
            v68 = v61 - v67;
            v63 = v115;
            v69 = *((_QWORD *)v1 + 13) + (v68 >> 5) + (signed __int64)v66;
            LOWORD(v66) = v69;
            v120 = HIDWORD(v69);
          }
          else
          {
            v65 = *((_QWORD *)v1 + 13) + ((signed int)(v61 - v118) >> 5);
            v120 = v65 >> 32;
            v66 = v65;
          }
          Src = 0;
          v125 = BYTE1(v66);
          v126 = v66;
          v70 = &v127;
          v124 = *((_BYTE *)v1 + 88) + 4 * (v64 != 0) + 9;
          if ( v64 && *(_DWORD *)(v61 + 20) == v63 )
          {
            v71 = (*(int (**)(void))(**(_DWORD **)(v61 + 16) + 28))();
            v127 = HIBYTE(v71);
            v130 = v71;
            v128 = BYTE2(v71);
            v129 = BYTE1(v71);
            v70 = &v131;
          }
          sub_4836C0((_DWORD *)v1[12], &Src, v70 - &Src, *(void **)(v61 + 20), *(_DWORD *)(v61 + 24), 0);
          v72 = *(_DWORD *)v61;
          v73 = *(_DWORD *)(v61 + 4);
          if ( *(_QWORD *)v61 )
          {
            v75 = v1[12];
            v76 = *(_DWORD *)(*(_DWORD *)(v75 + 140) + 64);
            if ( v76 > 0 )
            {
              v80 = __OFSUB__(HIDWORD(v107), ((unsigned int)v107 < v72) + v73);
              v79 = v107 - v72;
              v78 = (v107 - __PAIR__(v73, v72)) >> 32;
              v77 = v79;
              v116 = v78;
              if ( v78 >= 0 && (!((unsigned __int8)((v78 < 0) ^ v80) | (v78 == 0)) || v79 > 0x7FFFFFFF) )
                v77 = 0x7FFFFFFF;
              if ( v77 > v76 )
              {
                sub_483870((LPCRITICAL_SECTION *)v1[12], 0, 8);
                return 0;
              }
            }
            if ( *(_QWORD *)(v61 + 8) >= *((_QWORD *)v1 + 7) )
            {
              if ( v104 )
              {
                v88 = HIDWORD(v107);
                v1[20] = v107;
                v89 = v1 + 43;
                v90 = v1[43];
                v1[21] = v88;
                v90 /= 2;
                v91 = 2 * v1[34];
                v115 = v90;
                v10 = __OFSUB__(v91, v90);
                v23 = v91 - v90 < 0;
                v104 = 0;
                v119 = v91;
                v92 = &v115;
                if ( !(v23 ^ v10) )
                  v92 = &v119;
                v93 = v1[42];
                v10 = __OFSUB__(v93, *v1);
                v23 = v93 - *v1 < 0;
                v1[44] = *v92;
                *v89 = v93;
                if ( !(v23 ^ v10) )
                  v89 = v1;
                v94 = *v89;
                v1[33] += 100;
                v114 = v94;
                v95 = v1 + 8;
                if ( v1[33] < v1[8] )
                  v95 = v1 + 33;
                v1[33] = *v95;
              }
              ++v1[59];
              ++*(_QWORD *)(v75 + 216);
              v96 = *(_DWORD *)(v1[12] + 140);
              v87 = (LPCRITICAL_SECTION *)(v96 + 596);
              sub_4808E0((LPCRITICAL_SECTION *)(v96 + 596));
              ++*(_QWORD *)(v96 + 696);
            }
            else
            {
              if ( v104 && v117 > v1[10] )
              {
                v81 = v107;
                v1[21] = HIDWORD(v107);
                v82 = v1 + 43;
                v83 = 3 * v1[43];
                v1[20] = v81;
                v1[43] = v83 / 4;
                v84 = v1 + 45;
                v104 = 0;
                if ( v1[45] < v1[43] )
                  v84 = v1 + 43;
                v85 = *v84;
                v10 = __OFSUB__(v85, *v1);
                v23 = v85 - *v1 < 0;
                *v82 = v85;
                v1[44] = v85;
                if ( !(v23 ^ v10) )
                  v82 = v1;
                v114 = *v82;
              }
              ++v1[58];
              ++v117;
              ++*(_QWORD *)(v75 + 208);
              v86 = *(_DWORD *)(v1[12] + 140);
              v87 = (LPCRITICAL_SECTION *)(v86 + 596);
              sub_4808E0((LPCRITICAL_SECTION *)(v86 + 596));
              ++*(_QWORD *)(v86 + 688);
            }
            sub_4808F0(v87);
          }
          else
          {
            v74 = HIDWORD(v107);
            *(_DWORD *)v61 = v107;
            *(_DWORD *)(v61 + 4) = v74;
          }
          v97 = v107;
          v10 = __OFSUB__(v110, v106);
          v23 = v110 - v106 < 0;
          *(_QWORD *)(v61 + 8) = v107;
          v98 = &v110;
          if ( !(v23 ^ v10) )
            v98 = &v106;
          v106 = *v98;
          v108 += *(_DWORD *)(v61 + 24);
          v99 = v1[4];
          v1[16] = v97;
          v100 = v112;
          v1[17] = HIDWORD(v97);
          v101 = *(_DWORD *)(v61 + 24) + v100;
          v112 = v101;
          if ( v99 && v101 >= v99 || v109 >= v111 )
            goto LABEL_105;
        }
      }
      *((_BYTE *)v1 + 184) = 1;
LABEL_107:
      if ( !v105 || *((_BYTE *)v1 + 184) )
        goto LABEL_22;
    }
  }
  v10 = __OFSUB__(__PAIR__(v8, v9), __PAIR__(v7, v6));
  v13 = v9 - v6;
  v11 = (__PAIR__(v8, v9) - __PAIR__((unsigned int)v7, v6)) >> 32;
  v12 = v9 - v6;
  HIDWORD(v113) = v11;
  if ( v11 >= 0 && (!((unsigned __int8)((v11 < 0) ^ v10) | (v11 == 0)) || v13 > 0x7FFFFFFF) )
    return 0x7FFFFFFF;
  return v12;
}

//----- (0048C060) --------------------------------------------------------
void __thiscall sub_48C060(int this, unsigned __int8 *a2, signed int a3)
{
  int v3; // esi
  unsigned __int16 v4; // ax
  signed __int64 v5; // rax
  unsigned int v6; // ebp
  unsigned int v7; // ebx
  int v8; // ebx
  int v9; // eax
  unsigned __int8 v10; // cf
  __int64 v11; // ST0C_8
  __int64 v12; // rax
  int v13; // ecx
  int v14; // edi
  int v15; // ebp
  signed int v16; // ST10_4
  _BYTE *v17; // eax
  int v18; // ebp
  int v19; // eax
  bool v20; // zf
  int v21; // eax
  size_t v22; // edi
  void *v23; // eax
  _DWORD *v24; // ecx
  int v25; // eax
  LPCRITICAL_SECTION *v26; // ecx
  int v27; // eax
  int v28; // edx
  char v29; // cl
  __int16 v30; // ax
  __int16 v31; // cx
  _DWORD *v32; // eax
  int v33; // eax
  signed __int64 v34; // [esp+8h] [ebp-114h]
  __int64 v35; // [esp+10h] [ebp-10Ch]
  int Src; // [esp+18h] [ebp-104h]

  v3 = this;
  if ( a3 <= 4 )
  {
    sub_483CF0(*(_DWORD **)(this + 48), a2, a3, 2);
    return;
  }
  HIBYTE(v4) = a2[2];
  LOBYTE(v4) = a2[3];
  v5 = sub_48AC70((_DWORD *)this, v4);
  v6 = *(_DWORD *)(v3 + 192);
  v7 = *(_DWORD *)(v3 + 196);
  v34 = v5;
  v35 = *(signed int *)(v3 + 8);
  if ( v5 < (signed __int64)(v35 + __PAIR__(v7, v6)) )
  {
    if ( v5 < (signed __int64)__PAIR__(v7, v6) )
    {
      v27 = *(_DWORD *)(v3 + 48);
      ++*(_DWORD *)(v3 + 228);
      ++*(_QWORD *)(v27 + 200);
      v26 = *(LPCRITICAL_SECTION **)(*(_DWORD *)(v3 + 48) + 140);
    }
    else
    {
      v8 = (a2[1] - 9) / 4;
      if ( *(_QWORD *)(v3 + 192) == v5 )
      {
        sub_48B190(v3, v8, a2 + 4, a3 - 4);
        v9 = *(_DWORD *)(v3 + 8);
        v10 = __CFADD__((*(_DWORD *)(v3 + 192))++, 1);
        *(_DWORD *)(v3 + 196) += v10;
        HIDWORD(v11) = v9 >> 31;
        HIDWORD(v12) = *(_DWORD *)(v3 + 196);
        LODWORD(v11) = v9;
        LODWORD(v12) = *(_DWORD *)(v3 + 192);
        if ( *(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * (unsigned __int64)(v12 % v11)) )
        {
          do
          {
            v13 = *(_DWORD *)(v3 + 200);
            v14 = *(_QWORD *)(v3 + 192) % (signed __int64)*(signed int *)(v3 + 8);
            if ( *(_DWORD *)(v13 + 8 * v14 + 4) != 2 )
            {
              v15 = v13 + 8 * v14;
              v16 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v13 + 8 * v14) + 28))(*(_DWORD *)(v13 + 8 * v14));
              v17 = (_BYTE *)(*(int (**)(void))(**(_DWORD **)v15 + 24))();
              sub_48B190(v3, *(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * v14 + 4), v17, v16);
            }
            (*(void (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 200) + 8 * v14) + 4))();
            *(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * v14) = 0;
            ++*(_QWORD *)(v3 + 192);
          }
          while ( *(_DWORD *)(*(_DWORD *)(v3 + 200)
                            + 8 * (unsigned __int64)(*(_QWORD *)(v3 + 192) % (signed __int64)*(signed int *)(v3 + 8))) );
        }
        goto LABEL_21;
      }
      v18 = v5 % v35;
      v19 = *(_DWORD *)(v3 + 200);
      v20 = *(_DWORD *)(v19 + 8 * v18) == 0;
      v21 = v19 + 8 * v18;
      if ( v20 )
      {
        *(_DWORD *)(v21 + 4) = v8;
        *(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * v18) = sub_486EE0(
                                                         *(_DWORD *)(*(_DWORD *)(v3 + 48) + 140),
                                                         a2 + 4,
                                                         a3 - 4,
                                                         0,
                                                         0);
        if ( !v8 && *(_BYTE *)(v3 + 44) )
        {
          v22 = (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 200) + 8 * v18) + 28))();
          v23 = (void *)(*(int (__thiscall **)(_DWORD))(**(_DWORD **)(*(_DWORD *)(v3 + 200) + 8 * v18) + 24))(*(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * v18));
          v24 = *(_DWORD **)(v3 + 48);
          if ( *(_DWORD *)(v3 + 120) )
            sub_483CF0(v24, v23, v22, 10);
          else
            sub_484010((int)v24, __PAIR__(v22, (unsigned int)v23));
          *(_DWORD *)(*(_DWORD *)(v3 + 200) + 8 * v18 + 4) = 2;
        }
LABEL_21:
        v28 = *(_DWORD *)(v3 + 196);
        v29 = 0;
        LOBYTE(Src) = 0;
        if ( v28 < SHIDWORD(v34) )
        {
          v30 = v34;
        }
        else if ( v28 > SHIDWORD(v34) || (v30 = v34, *(_DWORD *)(v3 + 192) > (unsigned int)v34) )
        {
          v31 = *(_WORD *)(v3 + 192) - 1;
          BYTE1(Src) = *(_BYTE *)(v3 + 88) + 21;
          v30 = v31;
          v29 = 1;
LABEL_27:
          BYTE2(Src) = HIBYTE(v30);
          HIBYTE(Src) = v30;
          v32 = *(_DWORD **)(v3 + 224);
          if ( v32 && *(_BYTE *)(v3 + 46) && v29 )
          {
            *v32 = Src;
          }
          else
          {
            v33 = sub_4836C0(*(_DWORD **)(v3 + 48), &Src, 4u, 0, 0, 1);
            if ( !*(_DWORD *)(v3 + 224) )
              *(_DWORD *)(v3 + 224) = v33;
          }
          return;
        }
        BYTE1(Src) = *(_BYTE *)(v3 + 88) + 17;
        goto LABEL_27;
      }
      v25 = *(_DWORD *)(v3 + 48);
      ++*(_DWORD *)(v3 + 228);
      ++*(_QWORD *)(v25 + 200);
      v26 = *(LPCRITICAL_SECTION **)(*(_DWORD *)(v3 + 48) + 140);
    }
    sub_48ABB0(v26);
    goto LABEL_21;
  }
}

//----- (0048C400) --------------------------------------------------------
void __thiscall sub_48C400(int this, _BYTE *a2, signed int a3)
{
  int v3; // ebp
  int v4; // ecx
  unsigned __int16 v5; // dx
  unsigned int v6; // esi
  __int64 v7; // rax
  int v8; // edi
  unsigned __int8 v9; // cf
  int v10; // esi
  _DWORD *v11; // edx
  unsigned int v12; // ebx
  unsigned int v13; // [esp+4h] [ebp-8h]

  v3 = this;
  if ( a3 >= 4 )
  {
    v4 = *(_DWORD *)(this + 100);
    HIBYTE(v5) = a2[2];
    v6 = *(_DWORD *)(v3 + 96);
    LOBYTE(v5) = a2[3];
    v7 = v6 & 0xFFFF0000 | v5;
    v8 = v4 | HIDWORD(v7);
    v13 = v7;
    if ( (v4 | HIDWORD(v7)) >= v4 && (v8 > v4 || (unsigned int)v7 > v6) )
    {
      v9 = __CFADD__((_DWORD)v7, -65536);
      LODWORD(v7) = v7 - 0x10000;
      v13 = v7;
      v8 = v9 + v8 - 1;
    }
    v10 = *(_DWORD *)(v3 + 108);
    if ( *(_QWORD *)(v3 + 104) > __PAIR__(v8, (unsigned int)v7) )
    {
      *(_DWORD *)(v3 + 132) += 400;
      v11 = (_DWORD *)(v3 + 32);
      if ( *(_DWORD *)(v3 + 132) < *(_DWORD *)(v3 + 32) )
        v11 = (_DWORD *)(v3 + 132);
      *(_DWORD *)(v3 + 132) = *v11;
    }
    v12 = *(_DWORD *)(v3 + 104);
    if ( v10 <= v8 && (v10 < v8 || v12 <= (unsigned int)v7) )
    {
      do
      {
        sub_48B2F0(v3, __PAIR__(v10, v12));
        v10 = (__PAIR__((unsigned int)v10, v12++) + 1) >> 32;
      }
      while ( __PAIR__(v10, v12) <= __PAIR__(v8, v13) );
    }
  }
  else
  {
    sub_483CF0(*(_DWORD **)(this + 48), a2, a3, 11);
  }
}

//----- (0048C4D0) --------------------------------------------------------
void *__thiscall sub_48C4D0(_DWORD *this, void *Src, size_t Size, void *a4, size_t a5)
{
  _DWORD *v5; // esi
  int v6; // eax
  LPCRITICAL_SECTION *v7; // ecx
  _DWORD *v9; // edi

  v5 = this;
  if ( !this[41] && !this[51] )
  {
    v6 = this[12];
    this[18] = 0;
    this[19] = 0;
    if ( !*(_BYTE *)(v6 + 504) )
    {
      v7 = *(LPCRITICAL_SECTION **)(v6 + 140);
      if ( v7 )
        sub_485C50(v7, v6, 0, 0);
    }
  }
  if ( (signed int)(Size + a5) <= v5[55] )
    return sub_48B640(v5, Src, Size, a4, a5);
  sub_48B5A0(v5);
  v9 = sub_486EE0(*(_DWORD *)(v5[12] + 140), Src, Size, a4, a5);
  sub_48B010(v5, (int)v9);
  return (void *)(*(int (__thiscall **)(_DWORD *))(*v9 + 4))(v9);
}

//----- (0048C600) --------------------------------------------------------
void *__thiscall sub_48C600(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51872C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';

//----- (0048C620) --------------------------------------------------------
int __thiscall sub_48C620(_DWORD *this, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int v5; // esi

  v2 = this[3];
  result = a2;
  v4 = *(_DWORD *)(v2 + a2);
  if ( v4 )
    *(_DWORD *)(v4 + v2 + 4) = *(_DWORD *)(v2 + a2 + 4);
  else
    this[1] = *(_DWORD *)(v2 + a2 + 4);
  v5 = *(_DWORD *)(v2 + a2 + 4);
  if ( v5 )
    *(_DWORD *)(v5 + this[3]) = *(_DWORD *)(v2 + a2);
  else
    this[2] = *(_DWORD *)(v2 + a2);
  *(_DWORD *)(v2 + a2 + 4) = 0;
  *(_DWORD *)(v2 + a2) = 0;
  --this[4];
  return result;
}

//----- (0048C760) --------------------------------------------------------
void sub_48C760()
{
  srand(0xA8CFu);
}

//----- (0048C770) --------------------------------------------------------
BOOL __cdecl sub_48C770(int a1)
{
  BOOL result; // eax

  result = 0;
  if ( a1 )
    return QueryPerformanceFrequency(&Frequency);
  Frequency.QuadPart = 0i64;
  return result;
}

//----- (0048C8B0) --------------------------------------------------------
void *__cdecl sub_48C8B0(char *a1)
{
  char *v1; // edx
  char v2; // al
  _BYTE *i; // ecx
  void *result; // eax

  v1 = a1;
  v2 = *a1;
  for ( i = &unk_56C738; *v1; ++i )
  {
    ++v1;
    *i = v2 - 1;
    v2 = *v1;
  }
  result = &unk_56C738;
  *i = 0;
  return result;
}

//----- (0048C8E0) --------------------------------------------------------
_BYTE *__cdecl sub_48C8E0(_BYTE *a1, char *a2, int a3)
{
  char *v3; // edi
  char v4; // dl
  _BYTE *v5; // esi
  int v6; // ebx
  char v7; // cl

  v3 = a2;
  v4 = *a2;
  v5 = a1;
  if ( *a2 )
  {
    v6 = a3;
    do
    {
      v7 = v3[1];
      if ( !v7 )
        break;
      v3 += 2;
      *v5 = v6 ^ (16 * v4 - 1) ^ ~(v7 - 2) & 0xF;
      v4 = *v3;
      ++v5;
      ++v6;
    }
    while ( *v3 );
  }
  *v5 = 0;
  return a1;
}

//----- (0048C930) --------------------------------------------------------
_BYTE *__cdecl sub_48C930(_BYTE *a1, char *a2, int a3)
{
  char *v3; // esi
  char v4; // al
  _BYTE *v5; // ecx
  int v6; // edx
  char v7; // al
  _BYTE *v8; // ecx
  _BYTE *result; // eax

  v3 = a2;
  v4 = *a2;
  v5 = a1;
  if ( *a2 )
  {
    v6 = a3;
    do
    {
      *v5 = (((v4 >> 4) ^ (v6 >> 4)) & 0xF) + 65;
      v7 = *v3;
      v8 = v5 + 1;
      ++v3;
      *v8 = ((a3 ^ v7) & 0xF) + 66;
      v4 = *v3;
      v6 = a3 + 1;
      v5 = v8 + 1;
      ++a3;
    }
    while ( *v3 );
  }
  result = a1;
  *v5 = 0;
  return result;
}

//----- (0048C990) --------------------------------------------------------
int __cdecl sub_48C990(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // esi
  _DWORD *v5; // eax

  result = a1;
  v4 = a3 * ((a2 + a3 - 1) / a3);
  if ( v4 )
  {
    if ( a1 )
    {
      if ( v4 == *(_DWORD *)(a1 - 4) )
        return result;
      v5 = realloc((void *)(a1 - 4), v4 + 4);
      if ( !v5 )
      {
        MessageBoxA(0, "Out of memory (Resize)", "Error", 0x30u);
        exit(1);
      }
    }
    else
    {
      v5 = malloc(v4 + 4);
    }
    *v5 = v4;
    return (int)(v5 + 1);
  }
  if ( a1 )
    free((void *)(a1 - 4));
  return 0;
}

//----- (0048CA10) --------------------------------------------------------
int __cdecl sub_48CA10(int a1, void *Dst)
{
  char *v2; // esi
  int v3; // ecx
  char v4; // al
  _BYTE *v5; // edi
  char v6; // al
  char i; // al

  *(_BYTE *)a1 = 0;
  v2 = (char *)Dst;
  if ( isspace(*(char *)Dst) )
  {
    do
      v3 = (v2++)[1];
    while ( isspace(v3) );
  }
  v4 = *v2;
  v5 = (_BYTE *)a1;
  if ( *v2 == 34 )
  {
    v6 = (v2++)[1];
    if ( v6 )
    {
      while ( v6 != 34 )
      {
        ++v2;
        *v5 = v6;
        v6 = *v2;
        ++v5;
        if ( !*v2 )
          goto LABEL_15;
      }
      for ( i = *v2; i; i = (v2++)[1] )
      {
        if ( i == 44 )
          break;
      }
    }
  }
  else if ( v4 )
  {
    do
    {
      if ( v4 == 44 )
        break;
      ++v2;
      *v5 = v4;
      v4 = *v2;
      ++v5;
    }
    while ( *v2 );
  }
LABEL_15:
  *v5 = 0;
  if ( *v2 == 44 )
    ++v2;
  memcpy_0(Dst, v2, strlen(v2) + 1);
  for ( ; (unsigned int)v5 > a1; *--v5 = 0 )
  {
    if ( !isspace((char)*(v5 - 1)) )
      break;
  }
  return a1;
}

//----- (0048CBB0) --------------------------------------------------------
int __cdecl sub_48CBB0(void *a1)
{
  int result; // eax
  char v2; // cl
  char *i; // edx
  char Str; // [esp+4h] [ebp-104h]
  char v5; // [esp+5h] [ebp-103h]
  char v6; // [esp+6h] [ebp-102h]

  if ( dword_53A608 )
  {
    dword_53A608 = 0;
    dword_56C9F8 = 0;
    dword_56C9FC = 1;
    dword_56CA00 = 2;
    dword_56CA04 = 3;
    dword_56CA08 = 4;
    dword_56CA0C = 5;
    dword_56CA10 = 6;
    dword_56CA14 = 7;
    dword_56CA18 = 8;
    dword_56CA1C = 9;
    dword_56CA3C = 10;
    dword_56CA40 = 11;
    dword_56CA44 = 12;
    dword_56CA48 = 13;
    dword_56CA4C = 14;
    dword_56CA50 = 15;
    dword_56CABC = 10;
    dword_56CAC0 = 11;
    dword_56CAC4 = 12;
    dword_56CAC8 = 13;
    dword_56CACC = 14;
    dword_56CAD0 = 15;
  }
  sub_48CA10((int)&Str, a1);
  if ( v5 != 120 && v5 != 88 )
    return j__atol(&Str);
  v2 = v6;
  result = 0;
  for ( i = &v6; v2; ++i )
  {
    result = dword_56C938[v2] + 16 * result;
    v2 = i[1];
  }
  return result;
}
// 53A608: using guessed type int dword_53A608;
// 56C9F8: using guessed type int dword_56C9F8;
// 56C9FC: using guessed type int dword_56C9FC;
// 56CA00: using guessed type int dword_56CA00;
// 56CA04: using guessed type int dword_56CA04;
// 56CA08: using guessed type int dword_56CA08;
// 56CA0C: using guessed type int dword_56CA0C;
// 56CA10: using guessed type int dword_56CA10;
// 56CA14: using guessed type int dword_56CA14;
// 56CA18: using guessed type int dword_56CA18;
// 56CA1C: using guessed type int dword_56CA1C;
// 56CA3C: using guessed type int dword_56CA3C;
// 56CA40: using guessed type int dword_56CA40;
// 56CA44: using guessed type int dword_56CA44;
// 56CA48: using guessed type int dword_56CA48;
// 56CA4C: using guessed type int dword_56CA4C;
// 56CA50: using guessed type int dword_56CA50;
// 56CABC: using guessed type int dword_56CABC;
// 56CAC0: using guessed type int dword_56CAC0;
// 56CAC4: using guessed type int dword_56CAC4;
// 56CAC8: using guessed type int dword_56CAC8;
// 56CACC: using guessed type int dword_56CACC;
// 56CAD0: using guessed type int dword_56CAD0;

//----- (0048CD30) --------------------------------------------------------
int __cdecl sub_48CD30(LPCSTR lpFileName, int a2)
{
  HANDLE v2; // eax
  void *v3; // esi
  struct _FILETIME LastWriteTime; // [esp+8h] [ebp-18h]
  struct _FILETIME LastAccessTime; // [esp+10h] [ebp-10h]
  struct _FILETIME CreationTime; // [esp+18h] [ebp-8h]

  v2 = CreateFileA(lpFileName, 0x80000000, 0, 0, 3u, 0x80u, 0);
  v3 = v2;
  if ( v2 != (HANDLE)-1 )
  {
    GetFileTime(v2, &CreationTime, &LastAccessTime, &LastWriteTime);
    CloseHandle(v3);
    v2 = (HANDLE)LastWriteTime.dwLowDateTime;
  }
  if ( *(HANDLE *)a2 == v2 )
    return 0;
  *(_DWORD *)a2 = v2;
  return 1;
}

//----- (0048CDA0) --------------------------------------------------------
int __cdecl sub_48CDA0(int a1, unsigned int a2, int a3, int a4, int (__cdecl *a5)(int, unsigned int), _DWORD *a6)
{
  int v6; // esi
  int result; // eax
  unsigned int v8; // ebp
  unsigned int v9; // edi
  int v10; // eax

  v6 = 0;
  *a6 = 0;
  if ( !a3 )
    return a2;
  v8 = a2;
  v9 = a2 + a4 * (a3 - 1);
  if ( a2 > v9 )
    return v6;
  while ( 1 )
  {
    v6 = v8 + a4 * ((signed int)(v9 - v8) / a4 / 2);
    v10 = a5(a1, v8 + a4 * ((signed int)(v9 - v8) / a4 / 2));
    if ( v10 >= 0 )
      break;
    if ( v6 == a2 )
      goto LABEL_10;
    v9 = v6 - a4;
LABEL_9:
    if ( v8 > v9 )
    {
LABEL_10:
      if ( v10 > 0 )
        v6 += a4;
      return v6;
    }
  }
  if ( v10 > 0 )
  {
    v8 = v6 + a4;
    goto LABEL_9;
  }
  *a6 = 1;
  while ( 1 )
  {
    result = a2;
    if ( v6 == a2 )
      break;
    v6 -= a4;
    if ( a5(a1, v6) )
      return v6 + a4;
  }
  return result;
}

//----- (0048CEB0) --------------------------------------------------------
BOOL __cdecl sub_48CEB0(char **a1, char *a2)
{
  char *v2; // ecx
  char v3; // dl
  char *v4; // esi
  char v5; // dl

  v2 = a2;
  *a2 = 0;
  v3 = **a1;
  if ( v3 == 34 )
  {
    v4 = *a1 + 1;
    for ( *a1 = v4; **a1 != 34; ++v2 )
    {
      if ( !*v4 )
        break;
      *v2 = *v4;
      v4 = ++*a1;
    }
    *v2 = 0;
    if ( **a1 == 34 )
      ++*a1;
  }
  else
  {
    if ( v3 != 44 )
    {
      do
      {
        v5 = **a1;
        if ( !v5 )
          break;
        *v2 = v5;
        ++*a1;
        ++v2;
      }
      while ( **a1 != 44 );
    }
    *v2 = 0;
  }
  if ( **a1 == 44 )
    ++*a1;
  return **a1 != 0;
}

//----- (0048D0B0) --------------------------------------------------------
_BYTE *__cdecl sub_48D0B0(_BYTE *a1)
{
  _BYTE *result; // eax
  char *v2; // ecx
  _BYTE *i; // esi
  char j; // dl
  char v5; // bl

  result = a1;
  v2 = a1;
  for ( i = a1; *v2 == 32; ++v2 )
    ;
  for ( j = *v2; j; ++v2 )
  {
    if ( j != 32 || (v5 = v2[1], v5 != 32) && v5 )
      *i++ = j;
    j = v2[1];
  }
  *i = 0;
  return result;
}

//----- (0048D100) --------------------------------------------------------
char *__cdecl sub_48D100(char *Str, char *SubStr, void *Src)
{
  char *result; // eax
  void *v4; // edi

  result = strstr(Str, SubStr);
  v4 = result;
  if ( result )
  {
    memcpy_0(&result[strlen((const char *)Src)], &result[strlen(SubStr)], strlen(&result[strlen(SubStr)]) + 1);
    result = (char *)memcpy(v4, Src, strlen((const char *)Src));
  }
  return result;
}

//----- (0048D1A0) --------------------------------------------------------
char *__cdecl sub_48D1A0(char *a1, char *a2)
{
  char *v2; // edi
  char *v4; // ebx
  char *v5; // esi
  int v6; // ebp
  char v7; // al
  int v8; // ebp

  v2 = a2;
  if ( !*a2 )
    return a1;
  v4 = a1;
  if ( !*a1 )
    return 0;
  while ( 1 )
  {
    v5 = v4;
    v6 = toupper(*v4);
    if ( toupper(*v2) == v6 )
      break;
LABEL_10:
    if ( !*++v4 )
      return 0;
    v2 = a2;
  }
  while ( 1 )
  {
    v7 = (v2++)[1];
    if ( !v7 )
      return v4;
    if ( !*++v5 )
      return 0;
    v8 = toupper(v7);
    if ( v8 != toupper(*v5) )
      goto LABEL_10;
  }
}

//----- (0048D270) --------------------------------------------------------
int __cdecl sub_48D270(char *Filename)
{
  int v1; // ebx
  FILE *v2; // eax
  FILE *v3; // ebp
  int v4; // eax
  int v5; // eax
  size_t v6; // edi
  char *v7; // esi
  unsigned int v8; // edi
  int v9; // eax
  _BYTE *i; // ecx

  v1 = 0;
  v2 = fopen(Filename, "rb");
  v3 = v2;
  if ( v2 )
  {
    v4 = _fileno(v2);
    v5 = _filelength(v4);
    v6 = v5;
    if ( v5 > 0 )
    {
      v7 = (char *)malloc(v5);
      fread(v7, 1u, v6, v3);
      v8 = (unsigned int)&v7[v6];
      v9 = -1;
      for ( i = v7; (unsigned int)i < v8; ++i )
        v9 = dword_53A208[(unsigned __int8)(v9 ^ *i)] ^ (v9 >> 8) & 0xFFFFFF;
      v1 = ~v9;
      free(v7);
    }
    fclose(v3);
  }
  return v1;
}

//----- (0048D310) --------------------------------------------------------
BOOL sub_48D310()
{
  HANDLE v0; // eax
  BOOL result; // eax
  char v2[6]; // [esp+0h] [ebp-A0h]
  struct _OSVERSIONINFOA VersionInformation; // [esp+8h] [ebp-98h]

  VersionInformation.dwOSVersionInfoSize = 148;
  GetVersionExA(&VersionInformation);
  if ( VersionInformation.dwPlatformId == 2 )
  {
    v0 = CreateFileA("\\\\.\\NTICE", 0xC0000000, 3u, 0, 3u, 0x80u, 0);
    if ( v0 != (HANDLE)-1 )
    {
LABEL_3:
      CloseHandle(v0);
      return 1;
    }
    result = 0;
  }
  else
  {
    v0 = CreateFileA("\\\\.\\SICE", 0xC0000000, 3u, 0, 3u, 0x80u, 0);
    if ( v0 != (HANDLE)-1 )
      goto LABEL_3;
    __sidt(v2);
    result = *(_DWORD *)((*(unsigned __int16 *)(*(_DWORD *)&v2[2] + 8) | (*(unsigned __int16 *)(*(_DWORD *)&v2[2] + 14) << 16))
                       - 16) == 825241942;
  }
  return result;
}

//----- (0048D3E0) --------------------------------------------------------
FILE *__cdecl sub_48D3E0(char *a1, char *Filename)
{
  FILE *result; // eax
  FILE *v3; // esi
  FILE *v4; // edi
  signed int v5; // eax
  char DstBuf; // [esp+8h] [ebp-804h]

  result = fopen(Filename, "rb");
  v3 = result;
  if ( result )
  {
    v4 = fopen(a1, "wb");
    if ( v4 )
    {
      while ( !feof(v3) )
      {
        v5 = fread(&DstBuf, 1u, 0x800u, v3);
        if ( v5 > 0 )
          fwrite(&DstBuf, 1u, v5, v4);
      }
      fclose(v4);
    }
    result = (FILE *)fclose(v3);
  }
  return result;
}

//----- (0048D4A0) --------------------------------------------------------
int (__cdecl *sub_48D4A0(char *Format, ...))(_DWORD)
{
  int (__cdecl *result)(_DWORD); // eax
  char DstBuf; // [esp+0h] [ebp-204h]
  va_list va; // [esp+20Ch] [ebp+8h]

  va_start(va, Format);
  sub_4C60E2(&DstBuf, Format, va);
  result = dword_56C730;
  if ( dword_56C730 )
    result = (int (__cdecl *)(_DWORD))dword_56C730(&DstBuf);
  return result;
}
// 56C730: invalid function type has been ignored
// 56C730: using guessed type int (__cdecl *dword_56C730)(_DWORD);

//----- (0048D500) --------------------------------------------------------
int __cdecl sub_48D500(int a1)
{
  int result; // eax

  result = a1;
  dword_56C730 = (int (__cdecl *)(_DWORD))a1;
  return result;
}
// 56C730: using guessed type int (__cdecl *dword_56C730)(_DWORD);

//----- (0048D510) --------------------------------------------------------
char *__cdecl sub_48D510(void *Src, void *Dst)
{
  size_t v2; // ebx
  char *i; // ebp
  char *v4; // edi
  char *result; // eax
  int v6; // eax
  bool v7; // sf
  char *v8; // esi
  bool v9; // zf
  char *v10; // edi
  char *v11; // esi

  v2 = Size;
  for ( i = (char *)Src; ; i = v10 )
  {
    v4 = (char *)Dst;
    result = i;
    dword_56CB3C = (int)Dst;
    dword_56CB38 = (int)i;
    if ( i < Dst )
    {
      do
      {
        v6 = dword_56C718(result, &result[v2]);
        v2 = Size;
        v4 = (char *)dword_56CB3C;
        v9 = v6 == 0;
        v7 = v6 < 0;
        result = (char *)dword_56CB38;
        if ( !v7 && !v9 )
          break;
        result = (char *)(Size + dword_56CB38);
        dword_56CB38 = (int)result;
      }
      while ( (unsigned int)result < dword_56CB3C );
    }
    if ( result == v4 )
      break;
    v8 = i;
    dword_56CB38 = (int)i;
    result = (char *)memcpy(::Dst, &i[v2 * ((v4 - i) / (signed int)(2 * v2))], v2);
    if ( i >= v4 )
      goto LABEL_20;
    v9 = i == v4;
    if ( i < v4 )
    {
LABEL_8:
      while ( 1 )
      {
        result = (char *)dword_56C718(v8, ::Dst);
        v8 = (char *)dword_56CB38;
        v4 = (char *)dword_56CB3C;
        if ( (signed int)result >= 0 )
          break;
        v2 = Size;
        v8 = (char *)(Size + dword_56CB38);
        dword_56CB38 = (int)v8;
        if ( (unsigned int)v8 >= dword_56CB3C )
          goto LABEL_16;
      }
      if ( dword_56CB3C <= (unsigned int)dword_56CB38 )
      {
        v2 = Size;
      }
      else
      {
        do
        {
          result = (char *)dword_56C718(v4, ::Dst);
          v4 = (char *)dword_56CB3C;
          v2 = Size;
          v8 = (char *)dword_56CB38;
          if ( (signed int)result <= 0 )
            break;
          v4 = (char *)(dword_56CB3C - Size);
          dword_56CB3C = (int)v4;
        }
        while ( (unsigned int)v4 > dword_56CB38 );
      }
LABEL_16:
      v9 = v8 == v4;
    }
    if ( !v9 )
    {
      memcpy(::Src, v8, v2);
      memcpy(v8, v4, v2);
      result = (char *)memcpy(v4, ::Src, v2);
      v8 += v2;
      v4 -= v2;
      dword_56CB38 = (int)v8;
      dword_56CB3C = (int)v4;
    }
    if ( v8 < v4 )
      goto LABEL_8;
LABEL_20:
    if ( v8 == v4 )
    {
      result = (char *)dword_56C718(v8, ::Dst);
      v8 = (char *)dword_56CB38;
      v2 = Size;
      if ( (signed int)result <= 0 )
      {
        v8 = (char *)(Size + dword_56CB38);
        dword_56CB38 += Size;
      }
    }
    v10 = v8;
    v11 = &v8[-v2];
    if ( i != v11 )
    {
      result = (char *)sub_48D510(i, v11);
      v2 = Size;
    }
    if ( v10 == Dst )
      return result;
  }
  return result;
}
// 56C718: using guessed type int (__cdecl *dword_56C718)(_DWORD, _DWORD);
// 56CB38: using guessed type int dword_56CB38;
// 56CB3C: using guessed type int dword_56CB3C;

//----- (0048D6B0) --------------------------------------------------------
_DWORD *__cdecl sub_48D6B0(unsigned int a1, int a2)
{
  unsigned int i; // edi
  _DWORD *v3; // ecx
  _DWORD *result; // eax
  int v5; // eax
  bool v6; // sf
  _DWORD *v7; // esi
  bool v8; // zf

  for ( i = a1; ; i = (unsigned int)v7 )
  {
    v3 = (_DWORD *)a2;
    result = (_DWORD *)i;
    dword_56CB44 = a2;
    dword_56CB40 = i;
    if ( i < a2 )
    {
      do
      {
        v5 = dword_56C718(*result, result[1]);
        v3 = (_DWORD *)dword_56CB44;
        v8 = v5 == 0;
        v6 = v5 < 0;
        result = (_DWORD *)dword_56CB40;
        if ( !v6 && !v8 )
          break;
        result = (_DWORD *)(dword_56CB40 + 4);
        dword_56CB40 = (int)result;
      }
      while ( (unsigned int)result < dword_56CB44 );
    }
    if ( result == v3 )
      break;
    result = *(_DWORD **)(i + 4 * (((signed int)((signed int)v3 - i) >> 2) / 2));
    v7 = (_DWORD *)i;
    dword_56CB40 = i;
    Dst = result;
    if ( i >= (unsigned int)v3 )
      goto LABEL_18;
    v8 = i == (_DWORD)v3;
    if ( i < (unsigned int)v3 )
    {
LABEL_8:
      while ( 1 )
      {
        result = (_DWORD *)dword_56C718(*v7, Dst);
        v7 = (_DWORD *)dword_56CB40;
        v3 = (_DWORD *)dword_56CB44;
        if ( (signed int)result >= 0 )
          break;
        v7 = (_DWORD *)(dword_56CB40 + 4);
        dword_56CB40 = (int)v7;
        if ( (unsigned int)v7 >= dword_56CB44 )
          goto LABEL_14;
      }
      v8 = dword_56CB40 == dword_56CB44;
      if ( dword_56CB40 >= (unsigned int)dword_56CB44 )
        goto LABEL_15;
      do
      {
        result = (_DWORD *)dword_56C718(*v3, Dst);
        v3 = (_DWORD *)dword_56CB44;
        v7 = (_DWORD *)dword_56CB40;
        if ( (signed int)result <= 0 )
          break;
        v3 = (_DWORD *)(dword_56CB44 - 4);
        dword_56CB44 = (int)v3;
      }
      while ( (unsigned int)v3 > dword_56CB40 );
LABEL_14:
      v8 = v7 == v3;
    }
LABEL_15:
    if ( !v8 )
    {
      result = (_DWORD *)*v7;
      *v7 = *v3;
      ++v7;
      *v3 = result;
      --v3;
      Src = result;
      dword_56CB40 = (int)v7;
      dword_56CB44 = (int)v3;
    }
    if ( v7 < v3 )
      goto LABEL_8;
LABEL_18:
    if ( v7 == v3 )
    {
      result = (_DWORD *)dword_56C718(*v7, Dst);
      v7 = (_DWORD *)dword_56CB40;
      if ( (signed int)result <= 0 )
      {
        v7 = (_DWORD *)(dword_56CB40 + 4);
        dword_56CB40 += 4;
      }
    }
    if ( (_DWORD *)i != v7 - 1 )
      result = (_DWORD *)sub_48D6B0(i, v7 - 1);
    if ( v7 == (_DWORD *)a2 )
      return result;
  }
  return result;
}
// 56C718: using guessed type int (__cdecl *dword_56C718)(_DWORD, _DWORD);
// 56CB40: using guessed type int dword_56CB40;
// 56CB44: using guessed type int dword_56CB44;

//----- (0048D810) --------------------------------------------------------
void __cdecl sub_48D810(int a1, int a2, size_t Size, int a4)
{
  int v4; // ebp
  char *v5; // ebx
  signed int v6; // eax
  char *v7; // edi
  int v8; // ebp
  bool v9; // zf
  void *Dst; // [esp+8h] [ebp-Ch]
  signed int v11; // [esp+Ch] [ebp-8h]
  int v12; // [esp+10h] [ebp-4h]

  v4 = a2;
  Dst = malloc(Size);
  if ( a2 > 0 )
  {
    v5 = (char *)a1;
    v6 = 1;
    v11 = 1;
    v12 = a2;
    do
    {
      if ( v6 < v4 )
      {
        v7 = &v5[Size];
        v8 = v4 - v6;
        do
        {
          if ( ((int (__cdecl *)(char *, char *))a4)(v5, v7) > 0 )
          {
            memcpy(Dst, v5, Size);
            memcpy(v5, v7, Size);
            memcpy(v7, Dst, Size);
          }
          v7 += Size;
          --v8;
        }
        while ( v8 );
        v4 = a2;
        v6 = v11;
      }
      ++v6;
      v5 += Size;
      v9 = v12-- == 1;
      v11 = v6;
    }
    while ( !v9 );
  }
  free(Dst);
}

//----- (0048DA00) --------------------------------------------------------
void __cdecl sub_48DA00(int a1, double *a2, double *a3, double *a4)
{
  double v4; // st7
  double v5; // st5
  double v6; // st6
  double v7; // st4
  double v8; // rt0
  double v9; // st4
  double v10; // st7
  double v11; // st3
  double v12; // st7
  double v13; // st6
  double v14; // st7
  double v15; // st6
  double v16; // st6
  double v17; // st6

  v4 = (double)BYTE2(a1) / 255.0;
  v5 = (double)BYTE1(a1) / 255.0;
  v6 = (double)(unsigned __int8)a1 / 255.0;
  if ( v5 <= v4 )
    v7 = v5;
  else
    v7 = v4;
  if ( v7 > v6 )
    v7 = v6;
  v8 = v7;
  v9 = v4;
  v10 = v8;
  if ( v9 <= v5 )
    v11 = v5;
  else
    v11 = v9;
  if ( v11 < v6 )
    v11 = v6;
  *a4 = v11;
  v12 = v11 - v10;
  if ( 0.0 == v12 )
  {
    *a3 = 0.0;
    *a2 = -1.0;
  }
  else
  {
    *a3 = v12 / v11;
    if ( v11 == v9 )
    {
      v13 = (v5 - v6) / v12;
      v14 = 0.0;
    }
    else if ( v11 == v5 )
    {
      v15 = (v6 - v9) / v12;
      v14 = 0.0;
      v13 = v15 + 2.0;
    }
    else
    {
      v16 = (v9 - v5) / v12;
      v14 = 0.0;
      v13 = v16 + 4.0;
    }
    *a2 = v13;
    v17 = *a2 * 60.0;
    *a2 = v17;
    if ( v17 < v14 )
      *a2 = v17 + 360.0;
  }
}

//----- (0048DB20) --------------------------------------------------------
int __cdecl sub_48DB20(double a1, double a2, double a3)
{
  double v3; // st7
  double v4; // st6
  double v5; // st5
  double v6; // st7
  double v7; // st4
  double v8; // st3
  int v9; // ST08_4
  double v11; // st5
  double v12; // rt2
  double v13; // [esp+14h] [ebp+4h]

  if ( 0.0 == a2 )
  {
    v3 = a3;
    v4 = a3;
    v5 = a3;
  }
  else
  {
    v13 = a1 / 60.0;
    v6 = floor(v13);
    v7 = (1.0 - a2) * a3;
    v4 = (1.0 - (v13 - v6) * a2) * a3;
    v5 = a3;
    v8 = v6;
    v3 = (1.0 - a2 * (1.0 - (v13 - v6))) * a3;
    switch ( (signed int)v8 )
    {
      case 0:
        v4 = v7;
        goto LABEL_5;
      case 1:
        v3 = v4;
        v4 = v7;
        break;
      case 2:
        v11 = v3;
        v3 = v7;
        v12 = v11;
        v5 = a3;
        v4 = v12;
        break;
      case 3:
        v3 = v7;
        v5 = v4;
        v4 = a3;
        break;
      case 4:
        v5 = v7;
        v4 = a3;
        break;
      default:
        v3 = v7;
LABEL_5:
        v5 = v3;
        v3 = a3;
        break;
    }
  }
  HIWORD(v9) = (unsigned __int8)(signed int)(v3 * 255.0);
  BYTE1(v9) = (signed int)(v5 * 255.0);
  LOBYTE(v9) = (signed int)(255.0 * v4);
  return v9;
}

//----- (0048DC70) --------------------------------------------------------
char *__cdecl sub_48DC70(char *Dest, char *Source, size_t Count)
{
  char *v3; // esi
  char *v4; // edi
  unsigned int v5; // eax
  char v6; // cl
  char *v7; // edi
  signed int v8; // eax
  bool v9; // zf
  char *result; // eax
  char *Desta; // [esp+Ch] [ebp+4h]

  v3 = Source;
  v4 = Dest;
  *Dest = 0;
  Desta = 0;
  if ( !*Source )
    return (char *)1;
  do
  {
    for ( ; *v3 == 32; ++v3 )
      ;
    strncpy(v4, v3, Count);
    v4[Count - 1] = 0;
    v5 = strlen(v4);
    v6 = v3[v5];
    v3 += v5;
    v7 = &v4[v5];
    if ( v6 )
    {
      v8 = 0;
      if ( v6 != 32 )
      {
        while ( 1 )
        {
          v9 = v8 == 10;
          if ( v8 >= 10 )
            break;
          --v3;
          ++v8;
          if ( *v3 == 32 )
          {
            v9 = v8 == 10;
            break;
          }
        }
        if ( v9 )
        {
          v3 += 10;
          v8 = 0;
        }
      }
      v7 -= v8;
    }
    ++Desta;
    *v7 = 0;
    v4 = v7 + 1;
  }
  while ( *v3 );
  result = Desta;
  if ( (signed int)Desta <= 1 )
    return (char *)1;
  return result;
}

//----- (0048DD20) --------------------------------------------------------
void __cdecl sub_48DD20(void *Src, int a2, size_t Size, int a4)
{
  if ( a2 >= 2 )
  {
    dword_56C718 = (int (__cdecl *)(_DWORD, _DWORD))a4;
    ::Size = Size;
    ::Src = malloc(Size);
    Dst = malloc(Size);
    sub_48D510(Src, (char *)Src + Size * (a2 - 1));
    free(Dst);
    free(::Src);
  }
}
// 56C718: using guessed type int (__cdecl *dword_56C718)(_DWORD, _DWORD);

//----- (0048DD90) --------------------------------------------------------
_DWORD *__cdecl sub_48DD90(unsigned int a1, signed int a2, int (__cdecl *a3)(_DWORD, _DWORD))
{
  _DWORD *result; // eax

  if ( a2 >= 2 )
  {
    dword_56C718 = a3;
    result = sub_48D6B0(a1, a1 + 4 * a2 - 4);
  }
  return result;
}
// 56C718: using guessed type int (__cdecl *dword_56C718)(_DWORD, _DWORD);

//----- (0048DDC0) --------------------------------------------------------
void __cdecl sub_48DDC0(int *a1, int a2, signed int a3, signed int a4, signed int a5)
{
  int v5; // edi
  int *v6; // esi
  double v7; // st7
  double v8; // st6
  double v9; // st5
  double v10; // st6
  double v11; // rtt
  double v12; // st6
  double v13; // st5
  double v14; // st4
  double v15; // st6
  double v16; // st4
  double v17; // rtt
  double v18; // st3
  double v19; // st6
  double v20; // rt2
  double v21; // st4
  double v22; // st5
  double v23; // rtt
  double v24; // rt0
  double v25; // [esp+38h] [ebp-20h]
  double v26; // [esp+40h] [ebp-18h]
  double v27; // [esp+48h] [ebp-10h]
  double v28; // [esp+50h] [ebp-8h]

  v5 = a2;
  if ( a2 > 0 )
  {
    v6 = a1;
    v28 = (double)a5 / 100.0;
    while ( 1 )
    {
      sub_48DA00(*v6, &v27, &v25, &v26);
      v7 = v27;
      if ( v27 == -1.0 )
        break;
      v8 = 100.0;
      v9 = v27 + (double)a3 * 360.0 / 100.0;
      v27 = v9;
      if ( v9 < 360.0 )
      {
        v7 = v9;
      }
      else
      {
        v10 = v9 - 360.0;
        v27 = v10;
        v11 = v10;
        v8 = 100.0;
        v7 = v11;
      }
      v12 = (double)a4 / v8 + v25;
      v25 = v12;
      v13 = 1.0;
      if ( v12 > 1.0 )
      {
        v25 = 1.0;
        v15 = 0.0;
        v14 = 1.0;
      }
      else
      {
        v14 = 0.0;
        if ( v12 >= 0.0 )
        {
          v14 = 1.0;
          if ( v12 <= 1.0 )
          {
            v16 = 0.0;
            v13 = 1.0;
            goto LABEL_14;
          }
          v25 = 1.0;
          v15 = 0.0;
          v13 = 1.0;
        }
        else
        {
          v15 = 0.0;
          v25 = 0.0;
        }
      }
LABEL_15:
      v18 = v28 + v26;
      v26 = v18;
      if ( v18 > v13 )
      {
        v19 = v14;
        v26 = v13;
      }
      else if ( v18 >= v15 )
      {
        v20 = v14;
        v21 = v13;
        v22 = v20;
        if ( v21 >= v18 )
        {
          v24 = v22;
          v13 = v18;
          v19 = v24;
        }
        else
        {
          v23 = v22;
          v13 = v21;
          v19 = v23;
          v26 = v21;
        }
      }
      else
      {
        v13 = v15;
        v19 = v14;
        v26 = v13;
      }
      *v6 = sub_48DB20(v7, v19, v13);
      ++v6;
      if ( !--v5 )
        return;
    }
    v12 = v25;
    v13 = 1.0;
    v16 = 0.0;
LABEL_14:
    v17 = v16;
    v14 = v12;
    v15 = v17;
    goto LABEL_15;
  }
}

//----- (0048DF30) --------------------------------------------------------
char *__cdecl sub_48DF30(int a1)
{
  int v1; // eax
  int v2; // edx
  char *v3; // esi

  v1 = 10 * ((dword_56DBE8++ + 1) / 40);
  v2 = *(_DWORD *)(a1 + 52);
  v3 = (char *)&unk_56CC48 + 100 * (dword_56DBE8 - 4 * v1);
  sprintf(
    v3,
    "%s,%s,%d,%d,%d,%d,%d,%d",
    a1,
    a1 + 24,
    *(signed __int16 *)(a1 + 48),
    *(signed __int16 *)(a1 + 50),
    (char)(*(_DWORD *)(a1 + 52) >> 16),
    SBYTE1(v2),
    (char)*(_DWORD *)(a1 + 52),
    *(signed __int16 *)(a1 + 56));
  return v3;
}
// 56DBE8: using guessed type int dword_56DBE8;

//----- (0048DFB0) --------------------------------------------------------
_DWORD *__thiscall sub_48DFB0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  _BYTE *v3; // eax
  int v4; // eax
  bool v5; // sf
  unsigned __int8 v6; // of
  _WORD *v7; // ebx
  signed int v8; // ebp
  _BYTE *v9; // eax
  int *v10; // ecx
  _BYTE *v11; // edx
  char v12; // al
  char v14[8192]; // [esp+Ch] [ebp-2004h]

  v2 = this;
  *this = &Skill::`vftable';
  this[86] = 0;
  memset(this + 2, 0, 0x148u);
  *((_WORD *)v2 + 100) = -1;
  if ( Dst )
  {
    if ( *(_BYTE *)Dst == 118 )
    {
      sub_48CA10((int)v14, Dst);
      v2[86] = j__atol(&v14[1]);
    }
    v2[48] = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v2[86], 2);
    v5 = v2[86] - 2 < 0;
    v2[49] = v4;
    if ( v5 ^ v6 )
      *((_WORD *)v2 + 100) = -1;
    else
      *((_WORD *)v2 + 100) = sub_48CBB0(Dst);
    if ( v2[86] >= 3 )
      v2[68] = sub_48CBB0(Dst);
    if ( v2[86] >= 5 )
      *((_WORD *)v2 + 101) = sub_48CBB0(Dst);
    if ( v2[86] >= 4 )
    {
      v7 = v2 + 59;
      v8 = 16;
      do
      {
        *(v7 - 16) = sub_48CBB0(Dst);
        *v7 = sub_48CBB0(Dst);
        ++v7;
        --v8;
      }
      while ( v8 );
      v2[67] = sub_48CBB0(Dst);
    }
    sub_48CA10((int)(v2 + 2), Dst);
    sub_48CA10((int)(v2 + 10), Dst);
    sub_48CA10((int)(v2 + 16), Dst);
    sub_48CA10((int)v14, Dst);
    v9 = malloc(strlen(v14) + 1);
    v2[1] = v9;
    v10 = (int *)v14;
    v11 = v9;
    do
    {
      v12 = *(_BYTE *)v10;
      *v11 = *(_BYTE *)v10;
      v10 = (int *)((char *)v10 + 1);
      ++v11;
    }
    while ( v12 );
    if ( v2[86] >= 6 )
      sub_401A78((int)(v2 + 69), Dst);
  }
  else
  {
    v3 = malloc(1u);
    v2[1] = v3;
    *v3 = 0;
  }
  return v2;
}
// 518820: using guessed type void *Skill::`vftable';

//----- (0048E1B0) --------------------------------------------------------
int __thiscall sub_48E1B0(char *this, int a2)
{
  char *v2; // esi
  int v3; // ebx
  int v4; // eax
  int result; // eax

  v2 = this;
  v3 = (int)(this + 276);
  v4 = (**(int (__thiscall ***)(int, int, int))a2)(a2, (int)(this + 276), (int)(this + 300));
  *((_DWORD *)v2 + 84) = v4;
  result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, v4, v3);
  *((_DWORD *)v2 + 85) = result;
  return result;
}

//----- (0048E1F0) --------------------------------------------------------
int __fastcall sub_48E1F0(int a1, int a2, int a3)
{
  _BYTE *v3; // ecx
  int v4; // eax
  unsigned int v5; // esi

  v3 = (_BYTE *)(a1 + 8);
  v4 = -1;
  if ( a3 )
    v4 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v5 = (unsigned int)(v3 + 328);
  if ( v3 < v3 + 328 )
  {
    do
      v4 = dword_53A208[(unsigned __int8)(v4 ^ *v3++)] ^ (v4 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v3 < v5 );
  }
  return ~v4;
}

//----- (0048E2A0) --------------------------------------------------------
int __thiscall sub_48E2A0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // ebp
  signed int v3; // ebx
  signed __int16 *v4; // esi
  _WORD *v5; // edi
  char v6; // al
  char *v7; // eax
  char *v9; // [esp+10h] [ebp-808h]
  char Dest[2048]; // [esp+14h] [ebp-804h]

  v2 = this;
  v9 = a2;
  Dest[0] = 0;
  v3 = 0;
  v4 = this + 102;
  do
  {
    if ( v3 )
    {
      v5 = (_WORD *)((char *)&v9 + 3);
      do
      {
        v6 = *((_BYTE *)v5 + 1);
        v5 = (_WORD *)((char *)v5 + 1);
      }
      while ( v6 );
      *v5 = 44;
    }
    sprintf(&Dest[strlen(Dest)], "%d,%d", *v4, v4[16]);
    ++v3;
    ++v4;
  }
  while ( v3 < 16 );
  v7 = sub_48DF30((int)(v2 + 138));
  return sprintf(
           v9,
           "v%d,%d,%d,%d,%d,  %d,%s,%d,  \"%s\",\"%s\",\"%s\",\"%s\",  %s",
           6,
           *((_DWORD *)v2 + 48),
           *((_DWORD *)v2 + 49),
           v2[100],
           *((_DWORD *)v2 + 68),
           v2[101],
           Dest,
           *((_DWORD *)v2 + 67),
           v2 + 4,
           v2 + 20,
           v2 + 32,
           *((_DWORD *)v2 + 1),
           v7);
}
// 48E2A0: using guessed type char Dest[2048];

//----- (0048E3B0) --------------------------------------------------------
signed int __stdcall sub_48E3B0(int a1)
{
  return 1;
}

//----- (0048E3C0) --------------------------------------------------------
int __thiscall sub_48E3C0(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 276);
}

//----- (0048E3E0) --------------------------------------------------------
int __thiscall sub_48E3E0(_DWORD *this)
{
  _DWORD *v1; // edi
  int i; // esi
  int (__stdcall ***v3)(signed int); // ecx
  int result; // eax

  v1 = this;
  for ( i = 0; i < v1[2000]; ++i )
  {
    v3 = (int (__stdcall ***)(signed int))v1[i];
    if ( v3 )
      result = (**v3)(1);
  }
  return result;
}

//----- (0048E510) --------------------------------------------------------
int __thiscall sub_48E510(_DWORD *this, int a2)
{
  int v2; // edx
  int v3; // eax

  v2 = this[2000];
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  while ( *(_DWORD *)(this[v3] + 192) != a2 )
  {
    if ( ++v3 >= v2 )
      return 0;
  }
  return this[v3];
}

//----- (0048E6A0) --------------------------------------------------------
int __thiscall sub_48E6A0(_DWORD **this, int a2)
{
  _DWORD **v2; // edi
  int v3; // ebx
  signed int i; // esi
  int v5; // eax

  v2 = this;
  v3 = 0;
  for ( i = 0; i < (signed int)v2[2000]; v3 += v5 )
    v5 = (*(int (__stdcall **)(int))(*v2[i++] + 4))(a2);
  return v3;
}

//----- (0048E6E0) --------------------------------------------------------
signed int __thiscall sub_48E6E0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx
  int v6; // eax
  _DWORD *v7; // ebp
  int v9; // edi
  int v10; // ecx
  signed int v11; // esi
  int v12; // ecx
  int v13; // ecx
  __int16 v14; // ax
  int v16; // ecx
  __int16 v17; // ax
  int v18; // ebx
  const char *v19; // esi
  int v20; // edi
  char *v21; // eax
  int v22; // esi
  int v23; // edi
  _WORD *v24; // ebp
  int v25; // eax
  int v26; // eax
  int v27; // esi
  int v28; // eax
  int v29; // ecx
  signed int v30; // edx
  int v31; // eax
  signed int v32; // [esp+Ch] [ebp-FBCh]
  _DWORD *v33; // [esp+10h] [ebp-FB8h]
  int v34; // [esp+10h] [ebp-FB8h]
  signed int v35; // [esp+14h] [ebp-FB4h]
  int v36; // [esp+14h] [ebp-FB4h]
  int v37; // [esp+18h] [ebp-FB0h]
  signed int v38; // [esp+18h] [ebp-FB0h]
  int v39; // [esp+20h] [ebp-FA8h]
  __int16 v40[2000]; // [esp+24h] [ebp-FA4h]

  v5 = a2;
  v6 = *(_DWORD *)(a3 + 196);
  v7 = this;
  v33 = this;
  v32 = 9999999;
  v35 = *(_DWORD *)(a3 + 196);
  if ( v6 == -2 )
    return -1;
  v9 = *(_DWORD *)(a3 + 192);
  if ( v9 >= 0 )
  {
    if ( v6 == -1 )
    {
      v18 = 0;
      v19 = (const char *)(a3 + 64);
      v32 = 0;
      if ( a3 != -64 )
      {
        while ( *v19 )
        {
          v20 = j__atol(v19);
          v21 = strchr(v19, 38);
          v36 = (int)v21;
          if ( v21 )
            v36 = (int)(v21 + 1);
          if ( v20 >= 0 )
          {
            v27 = sub_48E510(v7, v20);
            if ( v27 )
            {
              if ( sub_48E6E0(a2, v27, v40, v18) >= 0 )
                v28 = sub_48E6E0(a2, v27, v40, v18);
              else
                v28 = 0;
              v32 += v28;
              v40[v18++] = v20;
            }
          }
          else
          {
            v22 = v20 / 1000;
            v37 = -v20 % 1000;
            v23 = sub_48E510(v7, v20 / 1000);
            if ( v23 )
            {
              v39 = 0;
              if ( v37 > 0 )
              {
                v24 = (_WORD *)((char *)&v39 + 2 * v18 + 2);
                do
                {
                  if ( sub_48E6E0(a2, v23, v40, v18) >= 0 )
                    v25 = sub_48E6E0(a2, v23, v40, v18);
                  else
                    v25 = 0;
                  v32 += v25;
                  v26 = v39;
                  if ( v39 )
                  {
                    --*v24;
                  }
                  else
                  {
                    v24[1] = 1000 * v22 - 1;
                    ++v18;
                    ++v24;
                  }
                  v39 = v26 + 1;
                }
                while ( v26 + 1 < v37 );
                v7 = v33;
              }
            }
          }
          if ( !v36 )
            break;
          v19 = (const char *)v36;
        }
      }
      return v32;
    }
    v29 = *(_DWORD *)(a2 + 25926);
    if ( !v29 )
      return v6;
    if ( v29 == 1 )
    {
      v30 = 1;
      v31 = 0;
      v38 = 1;
      if ( a5 > 0 )
      {
        do
        {
          if ( *(_WORD *)(a4 + 2 * v31) >= 0 )
            ++v30;
          ++v31;
        }
        while ( v31 < a5 );
        v38 = v30;
      }
      return (signed int)(pow((double)v38, *(double *)(a2 + 25910)) * (double)v35 + (double)*(signed int *)(a2 + 25934));
    }
  }
  else
  {
    v10 = *(_DWORD *)(a2 + 25930);
    if ( !v10 )
      return v6;
    v11 = 1;
    v12 = v10 - 1;
    if ( !v12 )
    {
      v16 = 0;
      v34 = 1;
      if ( a5 > 0 )
      {
        while ( 1 )
        {
          v17 = *(_WORD *)(a4 + 2 * v16);
          if ( v17 < 0 && v17 / 1000 == v9 )
            break;
          if ( ++v16 >= a5 )
            return (signed int)(pow((double)v34, *(double *)(v5 + 25918)) * (double)v35
                              + (double)*(signed int *)(v5 + 25938));
        }
        v34 = -*(signed __int16 *)(a4 + 2 * v16) % 1000 + 1;
      }
      return (signed int)(pow((double)v34, *(double *)(v5 + 25918)) * (double)v35 + (double)*(signed int *)(v5 + 25938));
    }
    v13 = v12 - 1;
    if ( !v13 )
    {
      v34 = 1;
      if ( a5 > 0 )
      {
        do
        {
          v14 = *(_WORD *)(a4 + 2 * v13);
          if ( v14 < 0 )
          {
            v5 = a2;
            v11 += -v14 % 1000;
          }
          ++v13;
        }
        while ( v13 < a5 );
        v34 = v11;
      }
      return (signed int)(pow((double)v34, *(double *)(v5 + 25918)) * (double)v35 + (double)*(signed int *)(v5 + 25938));
    }
  }
  return v32;
}
// 48E6E0: using guessed type __int16 var_FA4[2000];

//----- (0048EA00) --------------------------------------------------------
FILE *__thiscall sub_48EA00(_DWORD *this, char *Filename)
{
  _DWORD *v2; // edi
  FILE *result; // eax
  FILE *v4; // ebp
  char *v5; // eax
  _BYTE *v6; // esi
  _DWORD *v7; // eax
  _DWORD *v8; // esi
  int v9; // eax
  int v10; // [esp+18h] [ebp-2010h]
  int v11; // [esp+2024h] [ebp-4h]

  v2 = this;
  result = fopen(Filename, "rt");
  v4 = result;
  if ( result )
  {
    if ( !feof(result) )
    {
      do
      {
        LOBYTE(v10) = 0;
        v5 = (char *)sub_4C352E((int)&v10, 0x2000, v4);
        v6 = v5;
        if ( v5 && (isdigit(*v5) || *v6 == 45 || *v6 == 118) )
        {
          v7 = operator new(0x15Cu);
          v11 = 0;
          if ( v7 )
            v8 = sub_48DFB0(v7, v6);
          else
            v8 = 0;
          v9 = v2[2001];
          v11 = -1;
          if ( v9 )
            (*(void (__thiscall **)(_DWORD *, int))(*v8 + 20))(v8, v9);
          v2[v2[2000]++] = v8;
        }
      }
      while ( !feof(v4) );
    }
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (0048EBC0) --------------------------------------------------------
_DWORD *__thiscall sub_48EBC0(_DWORD *this, char *Filename, int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  this[2001] = a3;
  this[2000] = 0;
  if ( Filename )
    sub_48EA00(this, Filename);
  return v3;
}

//----- (0048EC20) --------------------------------------------------------
void *__thiscall sub_48EC20(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Skill::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518820: using guessed type void *Skill::`vftable';

//----- (0048EC80) --------------------------------------------------------
int __cdecl sub_48EC80(int a1, void *Dst)
{
  int result; // eax

  sub_48CA10(a1, Dst);
  sub_48CA10(a1 + 24, Dst);
  *(_WORD *)(a1 + 48) = sub_48CBB0(Dst);
  *(_WORD *)(a1 + 50) = sub_48CBB0(Dst);
  result = 0;
  *(_DWORD *)(a1 + 52) = 0;
  *(_WORD *)(a1 + 56) = 0;
  return result;
}

//----- (0048ECE0) --------------------------------------------------------
int __cdecl sub_48ECE0(int a1, void *Dst)
{
  int v2; // edi
  char v3; // bl
  char v4; // ST30_1
  int result; // eax
  int v6; // [esp+14h] [ebp+4h]

  v2 = a1;
  sub_48CA10(a1, Dst);
  sub_48CA10(a1 + 24, Dst);
  *(_WORD *)(a1 + 48) = sub_48CBB0(Dst);
  *(_WORD *)(a1 + 50) = sub_48CBB0(Dst);
  v3 = sub_48CBB0(Dst);
  v4 = sub_48CBB0(Dst);
  v6 = 0;
  result = sub_48CBB0(Dst);
  BYTE2(v6) = v3;
  LOBYTE(v6) = result;
  BYTE1(v6) = v4;
  *(_DWORD *)(v2 + 52) = v6;
  return result;
}

//----- (0048EDE0) --------------------------------------------------------
_DWORD *__thiscall sub_48EDE0(_DWORD *this)
{
  _DWORD *v1; // esi
  int *v2; // edi
  int v3; // ST34_4
  int v4; // ST24_4
  int v5; // ST14_4
  int v6; // ST04_4
  int v7; // ST34_4

  v1 = this;
  v2 = this + 3;
  this[3] = 0;
  nullsub_1(this + 3);
  v3 = *v2;
  *v2 = 305419896;
  nullsub_3(v2, v3, 305419896);
  v1[4] = 0;
  nullsub_1(v1 + 4);
  v4 = v1[4];
  v1[4] = 305419896;
  nullsub_3(v1 + 4, v4, 305419896);
  v1[7] = 0;
  nullsub_1(v1 + 7);
  v5 = v1[7];
  v1[7] = 305419896;
  nullsub_3(v1 + 7, v5, 305419896);
  v1[8] = 0;
  nullsub_1(v1 + 8);
  v6 = v1[8];
  v1[8] = 305419896;
  nullsub_3(v1 + 8, v6, 305419896);
  v1[9] = 0;
  nullsub_1(v1 + 9);
  v7 = v1[9];
  v1[9] = 305419896;
  nullsub_3(v1 + 9, v7, 305419896);
  return v1;
}
// 4AA790: using guessed type int __cdecl nullsub_1(_DWORD);
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (0048EEF0) --------------------------------------------------------
int __thiscall sub_48EEF0(char *this)
{
  char *v1; // esi

  v1 = this;
  nullsub_2(this + 36);
  nullsub_2(v1 + 32);
  nullsub_2(v1 + 28);
  nullsub_2(v1 + 16);
  return nullsub_2(v1 + 12);
}
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);

//----- (0048EFB0) --------------------------------------------------------
int __thiscall sub_48EFB0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // ebx
  int v4; // eax
  int v5; // ST28_4
  int v6; // ST1C_4
  int v7; // ST10_4
  int v8; // ST04_4

  v2 = this;
  this[63] = 0;
  v3 = (int)(this + 45);
  v4 = (**(int (__thiscall ***)(int, int, int))a2)(a2, (int)(this + 45), (int)(this + 51));
  v2[61] = v4;
  v2[62] = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, v4, v3);
  v5 = v2[64];
  v2[64] = 305419896;
  nullsub_3(v2 + 64, v5, 305419896);
  v6 = v2[65];
  v2[65] = 305419896;
  nullsub_3(v2 + 65, v6, 305419896);
  v2[66] = 0;
  v7 = v2[70];
  v2[70] = 305419896;
  nullsub_3(v2 + 70, v7, 305419896);
  *((_WORD *)v2 + 134) = *((_WORD *)v2 + 80);
  v8 = v2[68];
  v2[68] = 305419896;
  return nullsub_3(v2 + 68, v8, 305419896);
}
// 4AA7B0: using guessed type int __cdecl nullsub_3(_DWORD, _DWORD, _DWORD);

//----- (0048F090) --------------------------------------------------------
int __fastcall sub_48F090(int a1, int a2, int a3)
{
  char v3; // bl
  _BYTE *v4; // esi
  int v5; // eax
  int v6; // esi
  int v7; // eax
  int *v8; // ecx
  int v10; // [esp+8h] [ebp-4h]
  void *retaddr; // [esp+Ch] [ebp+0h]

  v3 = BYTE2(a3);
  v4 = (_BYTE *)(a1 + 8);
  v10 = a1 ^ *(_DWORD *)(a1 + 240);
  v5 = -1;
  if ( a3 )
  {
    v5 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
    v3 = BYTE2(a3);
  }
  if ( a1 + 8 < (unsigned int)(a1 + 240) )
  {
    do
      v5 = dword_53A208[(unsigned __int8)(v5 ^ *v4++)] ^ (v5 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 240 );
    v3 = BYTE2(a3);
  }
  v6 = ~v5;
  v7 = -1;
  if ( a3 )
    v7 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ v3)]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ v3)] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v8 = &v10;
  do
  {
    v7 = dword_53A208[(unsigned __int8)(v7 ^ *(_BYTE *)v8)] ^ (v7 >> 8) & 0xFFFFFF;
    v8 = (int *)((char *)v8 + 1);
  }
  while ( v8 < (int *)&retaddr );
  return v6 + ~v7;
}

//----- (0048F200) --------------------------------------------------------
int __thiscall sub_48F200(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char *v3; // eax
  int v4; // eax

  v2 = this;
  v3 = sub_48DF30((int)(this + 90));
  v4 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, signed __int16 *, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, char *))(*(_DWORD *)v2 + 4))(
         v2,
         57,
         *((_DWORD *)v2 + 32),
         v2 + 36,
         v2 + 52,
         v2 + 4,
         *((_DWORD *)v2 + 1),
         *((_DWORD *)v2 + 33),
         *((_DWORD *)v2 + 36),
         *((_DWORD *)v2 + 34),
         v2[82],
         v2[80],
         v2[81],
         v2[83],
         v2[84],
         *((_DWORD *)v2 + 35),
         *((_DWORD *)v2 + 37),
         *((_DWORD *)v2 + 38),
         *((_DWORD *)v2 + 39),
         v2[85],
         v2[86],
         v2[88],
         v2[87],
         v3);
  return sprintf(
           Dest,
           "%d,v%d,%d,  \"%s\",\"%s\",\"%s\",\"%s\",  %d,%d,%d,%d,%d,  %d,%d,%d,%d,%d,%d,%d,  %d,%d,%d,%d,%s",
           v4);
}

//----- (0048F2D0) --------------------------------------------------------
int __thiscall sub_48F2D0(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 180);
}

//----- (0048F2F0) --------------------------------------------------------
signed int __stdcall sub_48F2F0(int a1, int a2)
{
  return 1;
}

//----- (0048F300) --------------------------------------------------------
int sub_48F300()
{
  return 0;
}

//----- (0048F310) --------------------------------------------------------
int sub_48F310()
{
  return 0;
}

//----- (0048F350) --------------------------------------------------------
int __fastcall sub_48F350(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 320;
  v5 = (_BYTE *)(a1 + 288);
  if ( a1 + 288 < (unsigned int)(a1 + 320) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_48F090(a1, v4, a3);
}

//----- (0048F420) --------------------------------------------------------
signed int sub_48F420()
{
  return 18;
}

//----- (0048F430) --------------------------------------------------------
int __thiscall sub_48F430(_DWORD *this, char *Dest)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(signed int, _DWORD, _DWORD *, _DWORD *))(*this + 4))(57, this[32], this + 18, this + 72);
  return sprintf(Dest, "%d,v%d,%d,\"%s\",\"%s\"", v2);
}

//----- (0048F470) --------------------------------------------------------
int __thiscall sub_48F470(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 288);
}

//----- (0048F4C0) --------------------------------------------------------
signed int sub_48F4C0()
{
  return 1;
}

//----- (0048F4D0) --------------------------------------------------------
int __thiscall sub_48F4D0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // ebp
  signed int v3; // esi
  signed __int16 *v4; // ebx
  _WORD *v5; // edi
  char v6; // al
  char *v8; // [esp+10h] [ebp-2108h]
  char Dest[256]; // [esp+14h] [ebp-2104h]
  char v10; // [esp+114h] [ebp-2004h]

  v2 = this;
  v8 = a2;
  sub_48F200(this, &v10);
  Dest[0] = 0;
  v3 = 0;
  v4 = v2 + 150;
  do
  {
    if ( v3 )
    {
      v5 = (_WORD *)((char *)&v8 + 3);
      do
      {
        v6 = *((_BYTE *)v5 + 1);
        v5 = (_WORD *)((char *)v5 + 1);
      }
      while ( v6 );
      *v5 = 44;
    }
    sprintf(&Dest[strlen(Dest)], "%d", *v4);
    ++v3;
    ++v4;
  }
  while ( v3 < 16 );
  return sprintf(
           v8,
           "%s,    %d,%d,%d,%d,%d,  %s,%d",
           &v10,
           *((_DWORD *)v2 + 73),
           v2[148],
           v2[166],
           v2[149],
           *((_DWORD *)v2 + 72),
           Dest,
           v2[167]);
}
// 48F4D0: using guessed type char Dest[256];

//----- (0048F610) --------------------------------------------------------
signed int __thiscall sub_48F610(_DWORD *this, int a2)
{
  int v2; // edi
  _DWORD *v3; // esi
  int v4; // eax
  signed int result; // eax
  _DWORD *v6; // ecx

  v2 = a2;
  v3 = this;
  sub_48EFB0(this, a2);
  v3[141] = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, _DWORD))(*(_DWORD *)v2 + 8))(
              v2,
              v3 + 128,
              v3 + 134,
              *((signed __int16 *)v3 + 280),
              0);
  v4 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 113), (int)(v3 + 119));
  v3[142] = v4;
  v3[143] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v4, v3 + 113);
  result = 0;
  v6 = v3 + 85;
  do
  {
    *((_BYTE *)v3 + result++ + 592) = *v6 != -1;
    ++v6;
  }
  while ( result < 16 );
  return result;
}

//----- (0048F6A0) --------------------------------------------------------
int __thiscall sub_48F6A0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  signed int v3; // ebx
  _DWORD *v4; // ebp
  _WORD *v5; // edi
  char v6; // al
  char *v7; // edi
  int v8; // ST9C_4
  int v9; // ST98_4
  int v10; // ST94_4
  int v11; // ST90_4
  int v12; // ST8C_4
  int v13; // ST88_4
  int v14; // ST84_4
  int v15; // ST80_4
  int v16; // ST7C_4
  int v17; // ST78_4
  char *v18; // eax
  char *v20; // [esp+10h] [ebp-2108h]
  char Dest[256]; // [esp+14h] [ebp-2104h]
  char v22; // [esp+114h] [ebp-2004h]

  v2 = this;
  v20 = a2;
  sub_48F200(this, &v22);
  Dest[0] = 0;
  v3 = 0;
  v4 = v2 + 170;
  do
  {
    if ( v3 )
    {
      v5 = (_WORD *)((char *)&v20 + 3);
      do
      {
        v6 = *((_BYTE *)v5 + 1);
        v5 = (_WORD *)((char *)v5 + 1);
      }
      while ( v6 );
      *v5 = 44;
    }
    sprintf(&Dest[strlen(Dest)], "%d", *v4);
    ++v3;
    ++v4;
  }
  while ( v3 < 16 );
  v7 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v7, "%s,%s,%d,%d", v2 + 256, v2 + 268, v2[280], 0);
  v8 = v2[221];
  v9 = v2[220];
  v10 = v2[216];
  v11 = v2[217];
  v12 = *((_DWORD *)v2 + 107);
  v13 = v2[219];
  v14 = v2[218];
  v15 = *((_DWORD *)v2 + 76);
  v16 = v2[213];
  v17 = v2[212];
  v18 = sub_48DF30((int)(v2 + 226));
  return sprintf(
           v20,
           "%s,    %d,%d,%d,%d,%d, %s,%d,%d,  %d,%d,%d,%d, %d,%d,%d,%d, %d,%d,%d,%d,  %d,%d,%d,%d,%d, %s,%s,%d,%d, %d,%d,"
           "%d, %d,%d,%d,%d,%d",
           &v22,
           v2[206],
           v2[202],
           v2[203],
           v2[204],
           v2[205],
           Dest,
           *((_DWORD *)v2 + 83),
           *((_DWORD *)v2 + 84),
           *((_DWORD *)v2 + 72),
           *((_DWORD *)v2 + 73),
           *((_DWORD *)v2 + 74),
           *((_DWORD *)v2 + 75),
           *((_DWORD *)v2 + 80),
           *((_DWORD *)v2 + 77),
           *((_DWORD *)v2 + 78),
           *((_DWORD *)v2 + 79),
           *((_DWORD *)v2 + 81),
           *((_DWORD *)v2 + 82),
           *((_DWORD *)v2 + 112),
           *((_DWORD *)v2 + 111),
           v2[208],
           v2[209],
           v2[207],
           v2[210],
           v2[211],
           v18,
           v7,
           v17,
           v16,
           v15,
           v14,
           v13,
           v12,
           v11,
           v10,
           v9,
           v8);
}
// 56E3F0: using guessed type int dword_56E3F0;
// 48F6A0: using guessed type char Dest[256];

//----- (0048F8E0) --------------------------------------------------------
int __thiscall sub_48F8E0(char *this, char *a2)
{
  char *v2; // esi
  char Dest; // [esp+8h] [ebp-1004h]

  v2 = this;
  sprintf(&Dest, "%s", this + 180);
  return sprintf(a2, "%s,%s,%s", &Dest, v2 + 452, v2 + 512);
}

//----- (0048F960) --------------------------------------------------------
int __thiscall sub_48F960(int this, int a2)
{
  int v2; // esi
  char *v3; // eax
  char v5; // [esp+10h] [ebp-120h]
  char v6; // [esp+124h] [ebp-Ch]

  qmemcpy(&v5, (const void *)(this + 288), 0x114u);
  v2 = -1;
  if ( a2 )
    v2 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a2]) >> 8) ^ BYTE2(a2))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a2] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a2))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a2]) >> 8) ^ BYTE2(a2))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a2] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v3 = &v5;
  do
    v2 = dword_53A208[(unsigned __int8)(v2 ^ *v3++)] ^ (v2 >> 8) & 0xFFFFFF;
  while ( v3 < &v6 );
  return ~v2 + sub_48F090(this, this, a2);
}

//----- (0048FA60) --------------------------------------------------------
signed int __thiscall sub_48FA60(int this, int a2, int a3)
{
  __int16 v3; // ax
  signed int v4; // eax

  v3 = *(_WORD *)(this + 412);
  if ( v3 <= 0 )
    return 1;
  v4 = abs(v3);
  if ( v4 <= 5100 && *(_DWORD *)(a3 + 4 * v4 + 8008) )
    return 1;
  sub_4C657A((int)"ITM ERROR(%d): Unknown AmmoId(%d)\n", *(_DWORD *)(this + 128));
  return 0;
}

//----- (0048FAC0) --------------------------------------------------------
signed int sub_48FAC0()
{
  return 1;
}

//----- (0048FB00) --------------------------------------------------------
int __thiscall sub_48FB00(_DWORD *this, int a2)
{
  int v2; // edi
  _DWORD *v3; // esi
  int v4; // eax
  int result; // eax

  v2 = a2;
  v3 = this;
  sub_48F610(this, a2);
  v4 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 158), (int)(v3 + 164));
  v3[186] = v4;
  v3[187] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v4, v3 + 158);
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, signed int))(*(_DWORD *)v2 + 8))(
             v2,
             v3 + 173,
             v3 + 179,
             *((signed __int16 *)v3 + 370),
             1);
  v3[188] = result;
  return result;
}

//----- (0048FB70) --------------------------------------------------------
signed int sub_48FB70()
{
  return 11;
}

//----- (0048FB80) --------------------------------------------------------
int __fastcall sub_48FB80(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 608);
  if ( a1 + 608 < (unsigned int)(a1 + 744) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 744 );
  }
  return ~v3 + sub_48F960(a1, a3);
}

//----- (0048FC50) --------------------------------------------------------
int __thiscall sub_48FC50(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char *v3; // edi
  char *v4; // eax
  char v6; // [esp+Ch] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v6);
  v3 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v3, "%s,%s,%d,%d", v2 + 346, v2 + 358, v2[370], 0);
  v4 = sub_48DF30((int)(v2 + 316));
  return sprintf(
           Dest,
           "%s,    %d,%d,%d,%d,%d,%d,%d,  %s,%s",
           &v6,
           v2[314],
           *((_DWORD *)v2 + 154),
           *((_DWORD *)v2 + 155),
           v2[312],
           *((_DWORD *)v2 + 152),
           *((_DWORD *)v2 + 153),
           v2[313],
           v4,
           v3);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (0048FD40) --------------------------------------------------------
int __thiscall sub_48FD40(char *this, char *Dest)
{
  char *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F8E0(this, &v4);
  return sprintf(Dest, "%s,%s,%s", &v4, v2 + 632, v2 + 692);
}

//----- (0048FDE0) --------------------------------------------------------
int __thiscall sub_48FDE0(_DWORD *this, int a2)
{
  int v2; // edi
  _DWORD *v3; // esi
  int v4; // eax
  int result; // eax

  v2 = a2;
  v3 = this;
  sub_48F610(this, a2);
  v4 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 152), (int)(v3 + 158));
  v3[182] = v4;
  v3[183] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v4, v3 + 152);
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, signed int))(*(_DWORD *)v2 + 8))(
             v2,
             v3 + 167,
             v3 + 173,
             *((signed __int16 *)v3 + 358),
             1);
  v3[184] = result;
  return result;
}

//----- (0048FE50) --------------------------------------------------------
int __fastcall sub_48FE50(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 608);
  if ( a1 + 608 < (unsigned int)(a1 + 728) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 728 );
  }
  return ~v3 + sub_48F960(a1, a3);
}

//----- (0048FF20) --------------------------------------------------------
signed int sub_48FF20()
{
  return 12;
}

//----- (0048FF30) --------------------------------------------------------
int __thiscall sub_48FF30(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char *v3; // edi
  char *v4; // eax
  char v6; // [esp+Ch] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v6);
  v3 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v3, "%s,%s,%d,%d", v2 + 334, v2 + 346, v2[358], 0);
  v4 = sub_48DF30((int)(v2 + 304));
  return sprintf(Dest, "%s,    %d,%d,  %s,%s", &v6, *((_DWORD *)v2 + 181), *((_DWORD *)v2 + 180), v4, v3);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (0048FFF0) --------------------------------------------------------
int __thiscall sub_48FFF0(char *this, char *Dest)
{
  char *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F8E0(this, &v4);
  return sprintf(Dest, "%s,%s,%s", &v4, v2 + 608, v2 + 668);
}

//----- (00490090) --------------------------------------------------------
int __thiscall sub_490090(_DWORD *this, int a2)
{
  int v2; // edi
  _DWORD *v3; // esi
  int v4; // eax
  int result; // eax

  v2 = a2;
  v3 = this;
  sub_48F610(this, a2);
  v4 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 158), (int)(v3 + 164));
  v3[186] = v4;
  v3[187] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v4, v3 + 158);
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, _DWORD))(*(_DWORD *)v2 + 8))(
             v2,
             v3 + 173,
             v3 + 179,
             *((signed __int16 *)v3 + 370),
             0);
  v3[188] = result;
  return result;
}

//----- (00490100) --------------------------------------------------------
int __fastcall sub_490100(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 608);
  if ( a1 + 608 < (unsigned int)(a1 + 744) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 744 );
  }
  return ~v3 + sub_48F960(a1, a3);
}

//----- (004901D0) --------------------------------------------------------
signed int sub_4901D0()
{
  return 17;
}

//----- (004901E0) --------------------------------------------------------
int __thiscall sub_4901E0(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char *v3; // edi
  char *v4; // eax
  char v6; // [esp+Ch] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v6);
  v3 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v3, "%s,%s,%d,%d", v2 + 346, v2 + 358, v2[370], 0);
  v4 = sub_48DF30((int)(v2 + 316));
  return sprintf(
           Dest,
           "%s,   %d,%d,%d,%d,%d,%d, %d,%d, %s,%s",
           &v6,
           v2[310],
           v2[311],
           v2[312],
           v2[313],
           v2[314],
           *((_DWORD *)v2 + 152),
           *((_DWORD *)v2 + 154),
           *((_DWORD *)v2 + 153),
           v4,
           v3);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004902D0) --------------------------------------------------------
int __thiscall sub_4902D0(char *this, char *Dest)
{
  char *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F8E0(this, &v4);
  return sprintf(Dest, "%s,%s,%s", &v4, v2 + 632, v2 + 692);
}

//----- (00490370) --------------------------------------------------------
int __thiscall sub_490370(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  sub_48F610(this, a2);
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, signed int))(*(_DWORD *)a2 + 8))(
             a2,
             v2 + 152,
             v2 + 158,
             *((signed __int16 *)v2 + 328),
             1);
  v2[298] = result;
  return result;
}

//----- (004903B0) --------------------------------------------------------
signed int sub_4903B0()
{
  return 8;
}

//----- (004903C0) --------------------------------------------------------
signed __int16 *__thiscall sub_4903C0(signed __int16 *this, char *Dest)
{
  char *v2; // edi
  signed __int16 *v3; // ebx
  char *v4; // esi
  signed __int16 *result; // eax
  int v6; // ebp
  signed __int16 *v7; // ecx
  unsigned int v8; // eax
  char *v9; // edi
  char *v10; // edi
  char *v11; // esi
  int v12; // ecx
  _DWORD *v13; // [esp+10h] [ebp-208Ch]
  char v14[128]; // [esp+18h] [ebp-2084h]
  char v15; // [esp+98h] [ebp-2004h]

  v2 = Dest;
  v3 = this;
  sub_48F6A0(this, &v15);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v3 + 304, v3 + 316, v3[328], 0);
  result = (signed __int16 *)sprintf(Dest, "%s,    %s", &v15, v4);
  v6 = 0;
  v7 = v3 + 334;
  if ( v3[334] > 0 )
  {
    result = v3;
    v13 = v3 + 336;
    while ( 1 )
    {
      sprintf(v14, ",  %d,%d,%d,%d,%d,%d", *v7, result[331], result[332], result[333], result[330], *v13);
      v8 = strlen(v14) + 1;
      v9 = &v2[strlen(v2)];
      v13 += 4;
      qmemcpy(v9, v14, 4 * (v8 >> 2));
      v11 = &v14[4 * (v8 >> 2)];
      v10 = &v9[4 * (v8 >> 2)];
      ++v6;
      v12 = v8 & 3;
      result = &v3[8 * v6];
      qmemcpy(v10, v11, v12);
      v7 = result + 334;
      if ( result[334] <= 0 )
        break;
      v2 = Dest;
    }
  }
  return result;
}
// 56E3F0: using guessed type int dword_56E3F0;
// 4903C0: using guessed type char var_2084[128];

//----- (00490520) --------------------------------------------------------
signed int __thiscall sub_490520(char *this, int a2, int a3)
{
  char *v3; // esi
  signed int v4; // ebx
  int v5; // edi
  char *i; // eax
  signed int v7; // eax

  v3 = this;
  v4 = sub_48FA60((int)this, a2, a3);
  v5 = 0;
  for ( i = v3 + 668; *(_WORD *)i > 0; i = &v3[16 * v5 + 668] )
  {
    v7 = abs(*(signed __int16 *)i);
    if ( v7 > 5100 || !*(_DWORD *)(a3 + 4 * v7 + 8008) )
    {
      sub_4C657A((int)"ITM ERROR(%d): Missing Child Weapon(%d)\n", *((_DWORD *)v3 + 32));
      v4 = 0;
    }
    ++v5;
  }
  return v4;
}

//----- (004905A0) --------------------------------------------------------
int __fastcall sub_4905A0(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 608);
  if ( a1 + 608 < (unsigned int)(a1 + 1188) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 1188 );
  }
  return ~v3 + sub_48F960(a1, a3);
}

//----- (00490670) --------------------------------------------------------
int __thiscall sub_490670(char *this, char *Dest)
{
  char *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F8E0(this, &v4);
  return sprintf(Dest, "%s,%s", &v4, v2 + 608);
}

//----- (00490700) --------------------------------------------------------
int __thiscall sub_490700(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v4);
  return sprintf(Dest, "%s,    %d", &v4, *((_DWORD *)v2 + 152));
}

//----- (00490770) --------------------------------------------------------
signed int __thiscall sub_490770(_DWORD *this, int *a2, int a3)
{
  _DWORD *v3; // esi
  signed int v4; // ebx
  int v5; // ST08_4

  v3 = this;
  v4 = sub_48FA60((int)this, (int)a2, a3);
  if ( sub_4B2F30(a2, v3[152]) )
    return v4;
  v5 = v3[152];
  sub_4C657A((int)"ITM ERROR(%d): No such vehicle(%d)\n", v3[32]);
  return 0;
}

//----- (004907D0) --------------------------------------------------------
signed int sub_4907D0()
{
  return 7;
}

//----- (00490810) --------------------------------------------------------
signed int sub_490810()
{
  return 14;
}

//----- (00490820) --------------------------------------------------------
int __thiscall sub_490820(signed __int16 *this, char *Dest)
{
  signed __int16 *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v4);
  return sprintf(Dest, "%s,    %d,%d", &v4, *((_DWORD *)v2 + 152), *((_DWORD *)v2 + 153));
}

//----- (004908A0) --------------------------------------------------------
signed int __thiscall sub_4908A0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  signed int v4; // ebx
  signed int v5; // eax

  v3 = this;
  v4 = sub_48FA60((int)this, a2, a3);
  v5 = abs(v3[152]);
  if ( v5 <= 5100 && *(_DWORD *)(a3 + 4 * v5 + 8008) )
    return v4;
  sub_4C657A((int)"ITM ERROR(%d): No such item(%d)\n", v3[32]);
  return 0;
}

//----- (00490930) --------------------------------------------------------
signed int sub_490930()
{
  return 15;
}

//----- (00490940) --------------------------------------------------------
int __thiscall sub_490940(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  signed int v3; // ebx
  signed __int16 *v4; // esi
  char *v5; // edi
  char v6; // al
  char v8; // [esp+Fh] [ebp-2205h]
  char Dest[512]; // [esp+10h] [ebp-2204h]
  char v10; // [esp+210h] [ebp-2004h]

  v2 = this;
  sub_48F200(this, &v10);
  v3 = 0;
  Dest[0] = 0;
  v4 = v2 + 144;
  do
  {
    if ( v3 )
    {
      v5 = &v8;
      do
        v6 = (v5++)[1];
      while ( v6 );
      *(_WORD *)v5 = 44;
    }
    sprintf(&Dest[strlen(Dest)], "%d,%d", *v4, v4[1]);
    ++v3;
    v4 += 2;
  }
  while ( v3 < 16 );
  return sprintf(a2, "%s,  %s", &v10, Dest);
}
// 490940: using guessed type char Dest[512];

//----- (00490A20) --------------------------------------------------------
int __thiscall sub_490A20(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 180);
}

//----- (00490A40) --------------------------------------------------------
signed int __thiscall sub_490A40(_WORD *this, int a2, int a3)
{
  _WORD *v3; // esi
  signed int v4; // edi
  _WORD *v5; // ebx
  __int16 v6; // ax
  signed int v7; // eax
  signed int v8; // eax
  signed int v10; // [esp+10h] [ebp-4h]

  v3 = this;
  v4 = 1;
  v5 = this + 145;
  v10 = 16;
  do
  {
    v6 = *(v5 - 1);
    if ( v6 )
    {
      v7 = abs(v6);
      if ( v7 > 5100 || !*(_DWORD *)(a3 + 4 * v7 + 8008) )
      {
        sub_4C657A((int)"ITM ERROR(%d): No such input item(%d)\n", *((_DWORD *)v3 + 32));
        v4 = 0;
      }
    }
    if ( *v5 )
    {
      v8 = abs((signed __int16)*v5);
      if ( v8 > 5100 || !*(_DWORD *)(a3 + 4 * v8 + 8008) )
      {
        sub_4C657A((int)"ITM ERROR(%d): No such output item(%d)\n", *((_DWORD *)v3 + 32));
        v4 = 0;
      }
    }
    v5 += 2;
    --v10;
  }
  while ( v10 );
  return v4;
}

//----- (00490B20) --------------------------------------------------------
signed int sub_490B20()
{
  return 16;
}

//----- (00490B30) --------------------------------------------------------
int __thiscall sub_490B30(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // ebx
  signed int v3; // esi
  int v4; // ebp
  _DWORD *v5; // ebx
  _WORD *v6; // edi
  char v7; // al
  char *v9; // [esp+10h] [ebp-2808h]
  char Dest[2048]; // [esp+14h] [ebp-2804h]
  char v11; // [esp+814h] [ebp-2004h]

  v2 = this;
  v9 = a2;
  sub_48F200(this, &v11);
  v3 = 0;
  v4 = (int)(v2 + 144);
  Dest[0] = 0;
  v5 = v2 + 656;
  do
  {
    if ( v3 )
    {
      v6 = (_WORD *)((char *)&v9 + 3);
      do
      {
        v7 = *((_BYTE *)v6 + 1);
        v6 = (_WORD *)((char *)v6 + 1);
      }
      while ( v7 );
      *v6 = 44;
    }
    sprintf(&Dest[strlen(Dest)], "\"%s\",%d", v4, *v5);
    ++v3;
    ++v5;
    v4 += 64;
  }
  while ( v3 < 16 );
  return sprintf(v9, "%s,  %s", &v11, Dest);
}
// 490B30: using guessed type char Dest[2048];

//----- (00490C20) --------------------------------------------------------
int __thiscall sub_490C20(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 180);
}

//----- (00490C40) --------------------------------------------------------
signed int __stdcall sub_490C40(int a1, int a2)
{
  return 1;
}

//----- (00490CC0) --------------------------------------------------------
int __thiscall sub_490CC0(_DWORD *this, int a2)
{
  int v2; // edi
  _DWORD *v3; // esi
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // ST08_4
  int v11; // eax
  int v12; // ST08_4
  int result; // eax

  v2 = a2;
  v3 = this;
  sub_48F610(this, a2);
  v4 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 217), (int)(v3 + 223));
  v3[355] = v4;
  v3[356] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v4, v3 + 217);
  v5 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 232), (int)(v3 + 238));
  v3[357] = v5;
  v3[358] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v5, v3 + 232);
  v6 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 247), (int)(v3 + 253));
  v3[359] = v6;
  v3[360] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v6, v3 + 247);
  v7 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 262), (int)(v3 + 268));
  v3[361] = v7;
  v3[362] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v7, v3 + 262);
  v8 = (**(int (__thiscall ***)(int, int, int))v2)(v2, (int)(v3 + 277), (int)(v3 + 283));
  v3[363] = v8;
  v3[364] = (*(int (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v2 + 4))(v2, v8, v3 + 277);
  v9 = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, signed int))(*(_DWORD *)v2 + 8))(
         v2,
         v3 + 292,
         v3 + 298,
         *((signed __int16 *)v3 + 608),
         1);
  v10 = *((signed __int16 *)v3 + 634);
  v3[365] = v9;
  v11 = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, int, signed int))(*(_DWORD *)v2 + 8))(
          v2,
          v3 + 305,
          v3 + 311,
          v10,
          1);
  v12 = *((signed __int16 *)v3 + 660);
  v3[366] = v11;
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, int, signed int))(*(_DWORD *)v2 + 8))(
             v2,
             v3 + 318,
             v3 + 324,
             v12,
             1);
  v3[367] = result;
  return result;
}

//----- (00490E30) --------------------------------------------------------
int __thiscall sub_490E30(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // ebx
  _DWORD *v3; // ebp
  char *v4; // edi
  char v5; // al
  unsigned int v6; // eax
  char *v7; // edi
  char v8; // cl
  bool v9; // sf
  unsigned __int8 v10; // of
  char *v11; // eax
  int v12; // STF0_4
  int v13; // STEC_4
  int v14; // STE8_4
  int v15; // STE0_4
  int v16; // STDC_4
  int v17; // STD8_4
  int v18; // STD4_4
  int v19; // STD0_4
  int v20; // STCC_4
  int v21; // STC8_4
  int v22; // STC4_4
  int v23; // STC0_4
  int v24; // STBC_4
  int v26; // [esp+10h] [ebp-248Ch]
  char Dest; // [esp+18h] [ebp-2484h]
  char v28; // [esp+97h] [ebp-2405h]
  char v29; // [esp+98h] [ebp-2404h]
  char v30; // [esp+498h] [ebp-2004h]

  v2 = this;
  sub_48F6A0(this, &v30);
  v29 = 0;
  v26 = 0;
  v3 = v2 + 666;
  do
  {
    if ( v26 )
    {
      v4 = &v28;
      do
        v5 = (v4++)[1];
      while ( v5 );
      *(_WORD *)v4 = 44;
    }
    sprintf(&Dest, "%d,%d,%d,%d", *((signed __int16 *)v3 - 4), *(v3 - 1), *v3, v3[1]);
    v6 = strlen(&Dest) + 1;
    v7 = &v28;
    do
      v8 = (v7++)[1];
    while ( v8 );
    qmemcpy(v7, &Dest, v6);
    v3 += 4;
    v10 = __OFSUB__(v26 + 1, 6);
    v9 = v26++ - 5 < 0;
  }
  while ( v9 ^ v10 );
  sprintf(&byte_56DBF0[32 * (++dword_56E3F0 % 64)], "%s,%s,%d,%d", v2 + 636, v2 + 648, v2[660], 0);
  sprintf(&byte_56DBF0[32 * (++dword_56E3F0 % 64)], "%s,%s,%d,%d", v2 + 610, v2 + 622, v2[634], 0);
  sprintf(&byte_56DBF0[32 * (++dword_56E3F0 % 64)], "%s,%s,%d,%d", v2 + 584, v2 + 596, v2[608], 0);
  sub_48DF30((int)(v2 + 554));
  sub_48DF30((int)(v2 + 524));
  sub_48DF30((int)(v2 + 494));
  sub_48DF30((int)(v2 + 464));
  v11 = sub_48DF30((int)(v2 + 434));
  v12 = *((_DWORD *)v2 + 212);
  v13 = v2[412];
  v14 = v2[410];
  v15 = v2[411];
  v16 = v2[409];
  v17 = *((_DWORD *)v2 + 211);
  v18 = v2[395];
  v19 = v2[394];
  v20 = v2[393];
  v21 = v2[392];
  v22 = v2[391];
  v23 = v2[390];
  v24 = v2[389];
  return sprintf(
           a2,
           "%s,    %d,%d,%d,%d,%d,%d, %d,%d,%d,%d,%d, %d,%d,%d,%d,%d,    %d,%d,%d,%d,%d, %d,%d,%d,%d,%d,%d,%d, %d,%d,%d, "
           "%d,%d,%d,%d,%d,%d,    %d,%d,%d,%d, %d,%d,%d,%d,%d,%d,%d, %d,%d,%d, %d,%d,%d,\"%s\",%d, %d,%d,   %s,  %s,%s,%s"
           ",%s,%s,  %s,%s,%s",
           &v30,
           v2[396],
           v2[397],
           v2[398],
           v2[399],
           v2[400],
           v2[401],
           v2[405],
           v2[406],
           v2[402],
           v2[403],
           v2[404],
           v2[407],
           v2[413],
           v2[414],
           v2[415],
           v2[408],
           *((_DWORD *)v2 + 208),
           *((_DWORD *)v2 + 209),
           *((_DWORD *)v2 + 213),
           *((_DWORD *)v2 + 214),
           *((_DWORD *)v2 + 215),
           *((_DWORD *)v2 + 216),
           *((_DWORD *)v2 + 210),
           v2[368],
           v2[370],
           v2[369],
           v2[371],
           v2[372],
           v2[373],
           v2[374],
           v2[375],
           v2[378],
           v2[379],
           v2[377],
           v2[380],
           v2[376],
           v2[381],
           v2[382],
           v2[383],
           v2[384],
           v2[385],
           v2[386],
           v2[387],
           v2[388],
           v24,
           v23,
           v22,
           v21,
           v20,
           v19,
           v18,
           v17,
           v16,
           v15,
           v2 + 304,
           v14,
           v13,
           v12,
           &v29,
           v11);
}
// 49120A: too many varargs, some ignored
// 56E3F0: using guessed type int dword_56E3F0;

//----- (00491230) --------------------------------------------------------
int __thiscall sub_491230(char *this, char *Dest)
{
  char *v2; // esi
  char v4; // [esp+8h] [ebp-2004h]

  v2 = this;
  sub_48F8E0(this, &v4);
  return sprintf(
           Dest,
           "%s,%s,%s,%s,%s,%s,%s,%s,%s",
           &v4,
           v2 + 868,
           v2 + 928,
           v2 + 988,
           v2 + 1048,
           v2 + 1108,
           v2 + 1168,
           v2 + 1220,
           v2 + 1272);
}

//----- (004912E0) --------------------------------------------------------
signed int sub_4912E0()
{
  return 6;
}

//----- (004912F0) --------------------------------------------------------
int __fastcall sub_4912F0(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 608);
  if ( a1 + 608 < (unsigned int)(a1 + 1420) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 1420 );
  }
  return ~v3 + sub_48F960(a1, a3);
}

//----- (004913F0) --------------------------------------------------------
int __thiscall sub_4913F0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  sub_48EFB0(this, a2);
  result = (*(int (__thiscall **)(int, _DWORD *, _DWORD *, _DWORD, _DWORD))(*(_DWORD *)a2 + 8))(
             a2,
             v2 + 133,
             v2 + 139,
             *((signed __int16 *)v2 + 290),
             0);
  v2[146] = result;
  return result;
}

//----- (00491430) --------------------------------------------------------
int __thiscall sub_491430(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // ebp
  _DWORD *v3; // ecx
  int v4; // ebx
  char *v5; // edi
  char v6; // al
  unsigned int v7; // eax
  char *v8; // edi
  char v9; // cl
  signed __int16 *v10; // ecx
  int v11; // ebx
  char *v12; // edi
  char v13; // al
  unsigned int v14; // eax
  char *v15; // edi
  char v16; // cl
  char *v17; // esi
  int i; // [esp+10h] [ebp-288Ch]
  int j; // [esp+10h] [ebp-288Ch]
  char Dest; // [esp+18h] [ebp-2884h]
  char v22; // [esp+97h] [ebp-2805h]
  char v23; // [esp+98h] [ebp-2804h]
  char v24; // [esp+497h] [ebp-2405h]
  char v25; // [esp+498h] [ebp-2404h]
  char v26; // [esp+898h] [ebp-2004h]

  v2 = this;
  sub_48F200(this, &v26);
  v3 = v2 + 184;
  v23 = 0;
  v4 = 0;
  for ( i = (int)(v2 + 184); ; v3 = (_DWORD *)i )
  {
    if ( v4 )
    {
      v5 = &v22;
      do
        v6 = (v5++)[1];
      while ( v6 );
      *(_WORD *)v5 = 44;
    }
    sprintf(&Dest, "%d,%d", *v3, *((signed __int16 *)v3 - 2));
    v7 = strlen(&Dest) + 1;
    v8 = &v22;
    do
      v9 = (v8++)[1];
    while ( v9 );
    i += 8;
    qmemcpy(v8, &Dest, v7);
    if ( ++v4 >= 6 )
      break;
  }
  v10 = v2 + 207;
  v25 = 0;
  v11 = 0;
  for ( j = (int)(v2 + 207); ; v10 = (signed __int16 *)j )
  {
    if ( v11 )
    {
      v12 = &v24;
      do
        v13 = (v12++)[1];
      while ( v13 );
      *(_WORD *)v12 = 44;
    }
    sprintf(&Dest, "%d,%d", *v10, *(v10 - 1));
    v14 = strlen(&Dest) + 1;
    v15 = &v24;
    do
      v16 = (v15++)[1];
    while ( v16 );
    j += 4;
    qmemcpy(v15, &Dest, v14);
    if ( ++v11 >= 30 )
      break;
  }
  v17 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v17, "%s,%s,%d,%d", v2 + 266, v2 + 278, v2[290], 0);
  return sprintf(
           a2,
           "%s,    %d,%d,%d,%d,  %d,%d,%d,%d,  %d,%d,%d,  %d,%d,%d,%d,%d,%d,  %s,  %s,%s,  %d,%d,%d,%d,%d,  %d,%d,%d,%d,%d,  %d,%d,%d",
           &v26,
           v2[177],
           v2[176],
           *((_DWORD *)v2 + 77),
           *((_DWORD *)v2 + 78),
           v2[158],
           v2[159],
           v2[160],
           v2[161],
           v2[162],
           v2[163],
           v2[164],
           v2[169],
           v2[170],
           v2[167],
           v2[168],
           v2[165],
           *((_DWORD *)v2 + 90),
           v17,
           &v23,
           &v25,
           v2[171],
           v2[173],
           v2[172],
           v2[174],
           v2[175],
           v2[178],
           v2[179],
           *((_DWORD *)v2 + 75),
           *((_DWORD *)v2 + 76),
           *((_DWORD *)v2 + 72),
           *((_DWORD *)v2 + 73),
           *((_DWORD *)v2 + 74),
           v2[166]);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (00491720) --------------------------------------------------------
int __thiscall sub_491720(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 180);
}

//----- (00491740) --------------------------------------------------------
signed int sub_491740()
{
  return 1;
}

//----- (00491750) --------------------------------------------------------
signed int sub_491750()
{
  return 13;
}

//----- (00491760) --------------------------------------------------------
int __fastcall sub_491760(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 584;
  v5 = (_BYTE *)(a1 + 288);
  if ( a1 + 288 < (unsigned int)(a1 + 584) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_48F090(a1, v4, a3);
}

//----- (00491830) --------------------------------------------------------
int __thiscall sub_491830(_DWORD *this)
{
  _DWORD *v1; // edi
  int i; // esi
  int (__stdcall ***v3)(signed int); // ecx
  int result; // eax

  v1 = this;
  for ( i = 0; i < v1[2000]; ++i )
  {
    v3 = (int (__stdcall ***)(signed int))v1[i];
    if ( v3 )
      result = (**v3)(1);
  }
  return result;
}

//----- (00491990) --------------------------------------------------------
int __thiscall sub_491990(char *this, int a2)
{
  char *v2; // edi
  int v3; // ebx
  int i; // esi
  int v5; // eax
  int v6; // esi
  signed int v7; // edi

  v2 = this;
  v3 = 0;
  for ( i = 0; i < *((_DWORD *)v2 + 2000); v3 += v5 )
    v5 = (*(int (__stdcall **)(int))(**(_DWORD **)&v2[4 * i++] + 16))(a2);
  v6 = (int)(v2 + 8008);
  v7 = 5101;
  do
  {
    if ( *(_DWORD *)v6 )
      v3 += (*(int (__stdcall **)(int))(**(_DWORD **)v6 + 16))(a2);
    v6 += 4;
    --v7;
  }
  while ( v7 );
  return v3;
}

//----- (00491A00) --------------------------------------------------------
int __thiscall sub_491A00(_DWORD *this, const char *a2)
{
  _DWORD *v2; // esi
  char *v3; // ebx
  int v4; // edi
  char Str; // [esp+Ch] [ebp-104h]

  v2 = this;
  strcpy(&Str, a2);
  v3 = strchr(&Str, 58);
  v4 = 0;
  if ( v3 )
  {
    if ( v2[2000] > 0 )
    {
      while ( _stricmp((const char *)(v2[v4] + 72), v3) || _stricmp((const char *)(v2[v4] + 104), &Str) )
      {
        if ( ++v4 >= v2[2000] )
          return 0;
      }
      return v2[v4];
    }
  }
  else if ( v2[2000] > 0 )
  {
    while ( _stricmp((const char *)(v2[v4] + 72), &Str) )
    {
      if ( ++v4 >= v2[2000] )
        return 0;
    }
    return v2[v4];
  }
  return 0;
}

//----- (00491AE0) --------------------------------------------------------
int __thiscall sub_491AE0(_DWORD *this, int a2)
{
  int result; // eax

  if ( this[2000] <= 0 )
    result = 0;
  else
    result = (*(int (__stdcall **)(int))(*(_DWORD *)this[a2 % this[2000]] + 16))(a2);
  return result;
}

//----- (00491B60) --------------------------------------------------------
unsigned int __fastcall sub_491B60(_DWORD *a1, int a2, void *Dst)
{
  unsigned int v3; // esi
  _BYTE *v4; // eax
  _BYTE *v5; // eax
  int *v6; // ecx
  _BYTE *v7; // edx
  char v8; // al
  __int16 v9; // ax
  bool v10; // sf
  unsigned __int8 v11; // of
  __int16 v12; // ax
  signed int v13; // eax
  __int16 v14; // ax
  signed int v15; // eax
  signed int v16; // eax
  int v17; // eax
  int v19; // [esp+14h] [ebp-204Ch]
  char v20[8192]; // [esp+50h] [ebp-2010h]
  int v21; // [esp+205Ch] [ebp-4h]

  v3 = (unsigned int)a1;
  *a1 = &Item::`vftable';
  sub_48EDE0(a1 + 61);
  v21 = 0;
  memset((void *)(v3 + 8), 0, 0xE8u);
  *(_DWORD *)(v3 + 152) = 44800;
  *(_DWORD *)(v3 + 284) = 0;
  *(_DWORD *)(v3 + 156) = 1;
  if ( Dst )
  {
    if ( *(_BYTE *)Dst == 118 )
    {
      sub_48CA10((int)v20, Dst);
      *(_DWORD *)(v3 + 284) = j__atol(&v20[1]);
    }
    *(_DWORD *)(v3 + 128) = sub_48CBB0(Dst);
    sub_48CA10(v3 + 72, Dst);
    sub_48CA10(v3 + 104, Dst);
    sub_48CA10(v3 + 8, Dst);
    sub_48CA10((int)v20, Dst);
    v5 = malloc(strlen(v20) + 1);
    *(_DWORD *)(v3 + 4) = v5;
    v6 = (int *)v20;
    v7 = v5;
    do
    {
      v8 = *(_BYTE *)v6;
      *v7 = *(_BYTE *)v6;
      v6 = (int *)((char *)v6 + 1);
      ++v7;
    }
    while ( v8 );
    *(_DWORD *)(v3 + 132) = sub_48CBB0(Dst);
    *(_DWORD *)(v3 + 144) = sub_48CBB0(Dst);
    *(_DWORD *)(v3 + 136) = sub_48CBB0(Dst);
    v9 = sub_48CBB0(Dst);
    v11 = __OFSUB__(*(_DWORD *)(v3 + 284), 8);
    v10 = *(_DWORD *)(v3 + 284) - 8 < 0;
    *(_WORD *)(v3 + 164) = v9;
    if ( v10 ^ v11 )
      sub_48CBB0(Dst);
    else
      *(_WORD *)(v3 + 160) = sub_48CBB0(Dst);
    v12 = sub_48CBB0(Dst);
    v11 = __OFSUB__(*(_DWORD *)(v3 + 284), 1);
    v10 = *(_DWORD *)(v3 + 284) - 1 < 0;
    *(_WORD *)(v3 + 162) = v12;
    if ( !(v10 ^ v11) )
      *(_WORD *)(v3 + 166) = sub_48CBB0(Dst);
    v13 = *(_DWORD *)(v3 + 284);
    if ( v13 >= 5 && v13 < 34 )
      sub_48CBB0(Dst);
    v14 = sub_48CBB0(Dst);
    v11 = __OFSUB__(*(_DWORD *)(v3 + 284), 12);
    v10 = *(_DWORD *)(v3 + 284) - 12 < 0;
    *(_WORD *)(v3 + 168) = v14;
    if ( v10 ^ v11 )
      *(_WORD *)(v3 + 168) = 0;
    *(_DWORD *)(v3 + 140) = sub_48CBB0(Dst);
    v15 = *(_DWORD *)(v3 + 284);
    if ( v15 < 13 )
      *(_DWORD *)(v3 + 140) = -1;
    if ( v15 >= 29 )
      *(_DWORD *)(v3 + 148) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 35 )
      *(_DWORD *)(v3 + 152) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 47 )
      *(_DWORD *)(v3 + 156) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 51 )
      *(_WORD *)(v3 + 170) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 52 )
      *(_WORD *)(v3 + 172) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 55 )
      *(_WORD *)(v3 + 176) = sub_48CBB0(Dst);
    if ( *(_DWORD *)(v3 + 284) >= 56 )
      *(_WORD *)(v3 + 174) = sub_48CBB0(Dst);
    v16 = *(_DWORD *)(v3 + 284);
    if ( v16 < 33 )
    {
      if ( v16 < 17 )
        sub_48EC80(v3 + 180, Dst);
      else
        sub_48ECE0(v3 + 180, Dst);
    }
    else
    {
      sub_401A78(v3 + 180, Dst);
    }
    if ( *(_DWORD *)(v3 + 284) < 15 )
      sub_48EC80((int)&v19, Dst);
    if ( *(_DWORD *)(v3 + 284) < 3 )
    {
      v17 = j__atol((const char *)(v3 + 204));
      sprintf((char *)(v3 + 204), "gfx%05d", v17);
    }
  }
  else
  {
    v4 = malloc(1u);
    *(_DWORD *)(v3 + 4) = v4;
    *v4 = 0;
  }
  *(_DWORD *)(v3 + 240) = v3 ^ *(_DWORD *)(v3 + 128);
  return v3;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00491EE0) --------------------------------------------------------
_DWORD *__fastcall sub_491EE0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  char v6[256]; // [esp+14h] [ebp-110h]
  int v7; // [esp+120h] [ebp-4h]

  v3 = a1;
  sub_491B60(a1, a2, 0);
  v4 = v3 + 72;
  *v3 = &NestedItem::`vftable';
  *v4 = 0;
  v4[1] = 0;
  v4[2] = 0;
  v4[3] = 0;
  v4[4] = 0;
  v4[5] = 0;
  v4[6] = 0;
  v7 = 0;
  v4[7] = 0;
  if ( Dst )
  {
    sub_48CA10((int)v6, Dst);
    v3[71] = j__atol(&v6[1]);
    v3[32] = sub_48CBB0(Dst);
    sub_48CA10((int)(v3 + 18), Dst);
    sub_48CA10((int)(v3 + 72), Dst);
  }
  return v3;
}
// 518DB8: using guessed type void *NestedItem::`vftable';

//----- (00491FD0) --------------------------------------------------------
_DWORD *__fastcall sub_491FD0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  _WORD *v4; // ebx
  signed int v5; // ebp

  v3 = a1;
  sub_491B60(a1, a2, Dst);
  *v3 = &CashItem::`vftable';
  memset(v3 + 72, 0, 0x30u);
  if ( Dst )
  {
    if ( v3[71] < 18 )
    {
      v3[73] = 1;
    }
    else
    {
      v3[73] = sub_48CBB0(Dst);
      *((_WORD *)v3 + 148) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 166) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 149) = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 31 )
      v3[72] = sub_48CBB0(Dst);
    if ( v3[71] >= 32 )
    {
      v4 = v3 + 75;
      v5 = 16;
      do
      {
        *v4 = sub_48CBB0(Dst);
        ++v4;
        --v5;
      }
      while ( v5 );
    }
    if ( v3[71] >= 54 )
      *((_WORD *)v3 + 167) = sub_48CBB0(Dst);
  }
  return v3;
}
// 518DE0: using guessed type void *CashItem::`vftable';

//----- (004920F0) --------------------------------------------------------
_DWORD *__fastcall sub_4920F0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  __int16 v4; // ax
  signed int v5; // ebp
  bool v6; // sf
  unsigned __int8 v7; // of
  int *v8; // ebx
  int v9; // eax
  int v10; // eax
  int v11; // eax
  __int16 v12; // ax
  __int16 v13; // ax
  signed int v14; // eax
  __int16 v15; // ax
  signed int v16; // ebx
  int v17; // eax
  int v18; // eax
  int v20; // [esp+18h] [ebp-4Ch]
  int v21; // [esp+30h] [ebp-34h]
  __int16 v22; // [esp+48h] [ebp-1Ch]
  int v23; // [esp+60h] [ebp-4h]

  v3 = a1;
  sub_491B60(a1, a2, Dst);
  v23 = 0;
  *v3 = &UseItem::`vftable';
  memset(v3 + 72, 0, 0x114u);
  v3[72] = 50;
  v3[73] = 30;
  v3[74] = -1;
  *((_WORD *)v3 + 218) = 1;
  *((_WORD *)v3 + 219) = 1;
  if ( Dst )
  {
    if ( v3[71] < 8 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    *((_WORD *)v3 + 206) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 202) = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v5 = 16;
    v7 = __OFSUB__(v3[71], 16);
    v6 = v3[71] - 16 < 0;
    *((_WORD *)v3 + 203) = v4;
    if ( !(v6 ^ v7) )
    {
      *((_WORD *)v3 + 204) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 205) = sub_48CBB0(Dst);
    }
    v8 = v3 + 85;
    do
    {
      *v8 = sub_48CBB0(Dst);
      ++v8;
      --v5;
    }
    while ( v5 );
    if ( v3[71] >= 53 )
    {
      v3[83] = sub_48CBB0(Dst);
      v3[84] = sub_48CBB0(Dst);
    }
    v3[72] = sub_48CBB0(Dst);
    v9 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 43);
    v6 = v3[71] - 43 < 0;
    v3[73] = v9;
    if ( !(v6 ^ v7) )
      v3[74] = sub_48CBB0(Dst);
    if ( v3[71] >= 45 )
      v3[75] = sub_48CBB0(Dst);
    v10 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 40);
    v6 = v3[71] - 40 < 0;
    v3[80] = v10;
    if ( v6 ^ v7 )
    {
      v3[77] = v10;
    }
    else
    {
      v3[77] = sub_48CBB0(Dst);
      v3[78] = sub_48CBB0(Dst);
      v3[79] = sub_48CBB0(Dst);
    }
    v3[81] = sub_48CBB0(Dst);
    v3[82] = sub_48CBB0(Dst);
    v11 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 38);
    v6 = v3[71] - 38 < 0;
    v3[112] = v11;
    if ( !(v6 ^ v7) )
      v3[111] = sub_48CBB0(Dst);
    v12 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 25);
    v6 = v3[71] - 25 < 0;
    *((_WORD *)v3 + 208) = v12;
    if ( !(v6 ^ v7) )
      *((_WORD *)v3 + 209) = sub_48CBB0(Dst);
    v13 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 36);
    v6 = v3[71] - 36 < 0;
    *((_WORD *)v3 + 207) = v13;
    if ( !(v6 ^ v7) )
    {
      *((_WORD *)v3 + 210) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 211) = sub_48CBB0(Dst);
    }
    v14 = v3[71];
    if ( v14 < 33 )
    {
      if ( v14 < 17 )
        sub_48EC80((int)(v3 + 113), Dst);
      else
        sub_48ECE0((int)(v3 + 113), Dst);
    }
    else
    {
      sub_401A78((int)(v3 + 113), Dst);
    }
    sub_48CA10((int)(v3 + 128), Dst);
    sub_48CA10((int)(v3 + 134), Dst);
    *((_WORD *)v3 + 280) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 281) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 212) = sub_48CBB0(Dst);
    v15 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v3[71], 7);
    v6 = v3[71] - 7 < 0;
    *((_WORD *)v3 + 213) = v15;
    if ( !(v6 ^ v7) )
      v3[76] = sub_48CBB0(Dst);
    if ( v3[71] >= 19 )
    {
      *((_WORD *)v3 + 218) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 219) = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 27 )
    {
      v3[107] = sub_48CBB0(Dst);
      *((_WORD *)v3 + 217) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 216) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 220) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 221) = sub_48CBB0(Dst);
    }
    if ( v3[71] < 4 )
    {
      v16 = 2;
      do
      {
        sub_48CBB0(Dst);
        sub_48CBB0(Dst);
        sub_48CBB0(Dst);
        sub_48CBB0(Dst);
        sub_48CA10((int)&v20, Dst);
        sub_48CA10((int)&v21, Dst);
        v22 = sub_48CBB0(Dst);
        sub_48CBB0(Dst);
        --v16;
      }
      while ( v16 );
    }
    if ( v3[71] < 3 )
    {
      v17 = j__atol((const char *)v3 + 476);
      sprintf((char *)v3 + 476, "gfx%05d", v17);
      v18 = j__atol((const char *)v3 + 536);
      sprintf((char *)v3 + 536, "wav%05d", v18);
    }
  }
  return v3;
}
// 518E08: using guessed type void *UseItem::`vftable';

//----- (00492530) --------------------------------------------------------
_DWORD *__fastcall sub_492530(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  __int16 v4; // ax
  bool v5; // sf
  unsigned __int8 v6; // of
  int v7; // eax
  int v8; // eax
  signed int v9; // eax
  int v10; // eax
  int v11; // eax

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &RepairItem::`vftable';
  memset(v3 + 152, 0, 0x88u);
  if ( Dst )
  {
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v3[71], 36);
    v5 = v3[71] - 36 < 0;
    *((_WORD *)v3 + 314) = v4;
    if ( v5 ^ v6 )
    {
      v7 = sub_48CBB0(Dst);
      if ( v7 < 0 )
      {
        v3[154] = -v7;
        v3[155] = 0;
      }
      else
      {
        v3[154] = 0;
        v3[155] = v7;
      }
    }
    else
    {
      v3[154] = sub_48CBB0(Dst);
      v3[155] = sub_48CBB0(Dst);
      *((_WORD *)v3 + 312) = sub_48CBB0(Dst);
    }
    v3[152] = sub_48CBB0(Dst);
    v8 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v3[71], 30);
    v5 = v3[71] - 30 < 0;
    v3[153] = v8;
    if ( !(v5 ^ v6) )
      *((_WORD *)v3 + 313) = sub_48CBB0(Dst);
    v9 = v3[71];
    if ( v9 < 33 )
    {
      if ( v9 < 17 )
        sub_48EC80((int)(v3 + 158), Dst);
      else
        sub_48ECE0((int)(v3 + 158), Dst);
    }
    else
    {
      sub_401A78((int)(v3 + 158), Dst);
    }
    sub_48CA10((int)(v3 + 173), Dst);
    sub_48CA10((int)(v3 + 179), Dst);
    *((_WORD *)v3 + 370) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 371) = sub_48CBB0(Dst);
    if ( v3[71] < 3 )
    {
      v10 = j__atol((const char *)v3 + 656);
      sprintf((char *)v3 + 656, "gfx%05d", v10);
      v11 = j__atol((const char *)v3 + 716);
      sprintf((char *)v3 + 716, "wav%05d", v11);
    }
  }
  return v3;
}
// 518E30: using guessed type void *RepairItem::`vftable';

//----- (004926F0) --------------------------------------------------------
_DWORD *__fastcall sub_4926F0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  signed int v4; // eax
  int v5; // eax
  int v6; // eax
  int v8; // [esp-8h] [ebp-28h]

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &ControlItem::`vftable';
  memset(v3 + 152, 0, 0x78u);
  if ( Dst )
  {
    v3[181] = sub_48CBB0(Dst);
    v3[180] = sub_48CBB0(Dst);
    v4 = v3[71];
    v8 = (int)(v3 + 152);
    if ( v4 < 33 )
    {
      if ( v4 < 17 )
        sub_48EC80(v8, Dst);
      else
        sub_48ECE0(v8, Dst);
    }
    else
    {
      sub_401A78(v8, Dst);
    }
    sub_48CA10((int)(v3 + 167), Dst);
    sub_48CA10((int)(v3 + 173), Dst);
    *((_WORD *)v3 + 358) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 359) = sub_48CBB0(Dst);
    if ( v3[71] < 3 )
    {
      v5 = j__atol((const char *)v3 + 632);
      sprintf((char *)v3 + 632, "gfx%05d", v5);
      v6 = j__atol((const char *)v3 + 692);
      sprintf((char *)v3 + 692, "wav%05d", v6);
    }
  }
  return v3;
}
// 518E58: using guessed type void *ControlItem::`vftable';

//----- (00492820) --------------------------------------------------------
_DWORD *__fastcall sub_492820(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  __int16 v4; // ax
  signed int v5; // ecx
  int v6; // eax
  bool v7; // sf
  unsigned __int8 v8; // of
  signed int v9; // eax

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &WarpItem::`vftable';
  memset(v3 + 152, 0, 0x88u);
  *((_WORD *)v3 + 312) = 1;
  v3[154] = 0;
  v3[153] = 1;
  if ( Dst )
  {
    v4 = sub_48CBB0(Dst);
    v5 = v3[71];
    *((_WORD *)v3 + 310) = v4;
    if ( v5 >= 22 )
      goto LABEL_20;
    if ( v4 > 6 )
      *((_WORD *)v3 + 310) = 6;
    if ( v5 >= 22 )
LABEL_20:
      *((_WORD *)v3 + 311) = sub_48CBB0(Dst);
    if ( v3[71] >= 46 )
      *((_WORD *)v3 + 312) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 313) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 314) = sub_48CBB0(Dst);
    v6 = sub_48CBB0(Dst);
    v8 = __OFSUB__(v3[71], 57);
    v7 = v3[71] - 57 < 0;
    v3[152] = v6;
    if ( !(v7 ^ v8) )
    {
      v3[154] = sub_48CBB0(Dst);
      v3[153] = sub_48CBB0(Dst);
    }
    v9 = v3[71];
    if ( v9 < 33 )
    {
      if ( v9 < 17 )
        sub_48EC80((int)(v3 + 158), Dst);
      else
        sub_48ECE0((int)(v3 + 158), Dst);
    }
    else
    {
      sub_401A78((int)(v3 + 158), Dst);
    }
    sub_48CA10((int)(v3 + 173), Dst);
    sub_48CA10((int)(v3 + 179), Dst);
    *((_WORD *)v3 + 370) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 371) = sub_48CBB0(Dst);
  }
  return v3;
}
// 518E80: using guessed type void *WarpItem::`vftable';

//----- (004929C0) --------------------------------------------------------
_DWORD *__fastcall sub_4929C0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // ebx
  int v4; // esi
  int v5; // ebx
  signed int v6; // ST28_4
  _DWORD *v8; // [esp+14h] [ebp-18h]

  v3 = a1;
  v8 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &MultiUseItem::`vftable';
  memset(v3 + 152, 0, 0x244u);
  if ( !Dst )
    return v3;
  sub_48CA10((int)(v3 + 152), Dst);
  sub_48CA10((int)(v3 + 158), Dst);
  *((_WORD *)v3 + 328) = sub_48CBB0(Dst);
  *((_WORD *)v3 + 329) = sub_48CBB0(Dst);
  if ( !*(_BYTE *)Dst )
    return v3;
  v4 = (int)v3 + 666;
  while ( 1 )
  {
    *(_WORD *)(v4 + 2) = sub_48CBB0(Dst);
    *(_WORD *)(v4 - 4) = sub_48CBB0(Dst);
    *(_WORD *)(v4 - 2) = sub_48CBB0(Dst);
    *(_WORD *)v4 = sub_48CBB0(Dst);
    *(_WORD *)(v4 - 6) = sub_48CBB0(Dst);
    if ( v3[71] >= 24 )
      *(_DWORD *)(v4 + 6) = sub_48CBB0(Dst);
    v5 = *(signed __int16 *)(v4 - 2);
    v6 = *(signed __int16 *)(v4 - 4);
    sub_4C444A((void *)v6);
    *(double *)(v4 + 534) = (double)v6;
    *(long double *)(v4 + 542) = sqrt((double)(v6 * v6 + v5 * v5));
    v4 += 16;
    if ( !*(_BYTE *)Dst )
      break;
    v3 = v8;
  }
  return v8;
}
// 518EA8: using guessed type void *MultiUseItem::`vftable';

//----- (00492B40) --------------------------------------------------------
_DWORD *__fastcall sub_492B40(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &VehicleMakerItem::`vftable';
  v3[152] = 0;
  if ( Dst )
    v3[152] = sub_48CBB0(Dst);
  return v3;
}
// 518ED0: using guessed type void *VehicleMakerItem::`vftable';

//----- (00492BB0) --------------------------------------------------------
_DWORD *__fastcall sub_492BB0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &ItemMakerItem::`vftable';
  v3[152] = 0;
  v3[153] = 0;
  if ( Dst )
  {
    v3[152] = sub_48CBB0(Dst);
    v3[153] = sub_48CBB0(Dst);
  }
  return v3;
}
// 518EF8: using guessed type void *ItemMakerItem::`vftable';

//----- (00492C30) --------------------------------------------------------
_DWORD *__fastcall sub_492C30(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // ebp
  _WORD *v4; // esi
  signed int v5; // ebx

  v3 = a1;
  sub_491B60(a1, a2, Dst);
  *v3 = &UpgradeItem::`vftable';
  memset(v3 + 72, 0, 0x40u);
  if ( Dst )
  {
    v4 = (_WORD *)((char *)v3 + 290);
    v5 = 16;
    do
    {
      *(v4 - 1) = sub_48CBB0(Dst);
      *v4 = sub_48CBB0(Dst);
      v4 += 2;
      --v5;
    }
    while ( v5 );
  }
  return v3;
}
// 518F20: using guessed type void *UpgradeItem::`vftable';

//----- (00492CD0) --------------------------------------------------------
_DWORD *__fastcall sub_492CD0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // ebp
  void *v4; // esi
  int v5; // ebx
  int *v6; // edi
  char *Dsta; // [esp+28h] [ebp+4h]

  v3 = a1;
  v4 = Dst;
  sub_491B60(a1, a2, Dst);
  v5 = (int)(v3 + 72);
  *v3 = &SkillItem::`vftable';
  memset(v3 + 72, 0, 0x440u);
  if ( Dst )
  {
    if ( v3[71] >= 21 )
    {
      v6 = v3 + 328;
      Dsta = (char *)16;
      do
      {
        sub_48CA10(v5, v4);
        *v6 = sub_48CBB0(v4);
        ++v6;
        v5 += 64;
        --Dsta;
      }
      while ( Dsta );
    }
    else
    {
      v3[328] = sub_48CBB0(Dst);
    }
  }
  return v3;
}
// 518F48: using guessed type void *SkillItem::`vftable';

//----- (00492D90) --------------------------------------------------------
_DWORD *__fastcall sub_492D90(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi

  v3 = a1;
  sub_491B60(a1, a2, Dst);
  *v3 = &AmmoItem::`vftable';
  return v3;
}
// 518F70: using guessed type void *AmmoItem::`vftable';

//----- (00492DB0) --------------------------------------------------------
_DWORD *__fastcall sub_492DB0(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // esi
  __int16 v4; // ax
  bool v5; // sf
  unsigned __int8 v6; // of
  int v7; // eax
  __int16 v8; // ax
  __int16 v9; // ax
  __int16 v10; // ax
  __int16 v11; // ax
  signed int v12; // ecx
  __int16 v13; // ax
  int *v14; // ebx
  signed int v15; // ebp
  signed int v16; // ebx
  int v17; // ebp
  signed int v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // eax

  v3 = a1;
  sub_4920F0(a1, a2, Dst);
  *v3 = &ProjectileItem::`vftable';
  memset(v3 + 152, 0, 0x32Cu);
  *((_WORD *)v3 + 381) = 0;
  *((_WORD *)v3 + 396) = 10000;
  *((_WORD *)v3 + 404) = 1000;
  *((_WORD *)v3 + 379) = 50;
  v3[354] = 2;
  if ( Dst )
  {
    *((_WORD *)v3 + 396) = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v3[71], 25);
    v5 = v3[71] - 25 < 0;
    *((_WORD *)v3 + 397) = v4;
    if ( v5 ^ v6 )
    {
      sub_48CBB0(Dst);
    }
    else
    {
      *((_WORD *)v3 + 398) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 399) = sub_48CBB0(Dst);
    }
    *((_WORD *)v3 + 400) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 401) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 405) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 406) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 402) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 403) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 404) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 407) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 413) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 414) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 415) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 408) = sub_48CBB0(Dst);
    v3[208] = sub_48CBB0(Dst);
    v3[209] = sub_48CBB0(Dst);
    v3[213] = sub_48CBB0(Dst);
    v3[214] = sub_48CBB0(Dst);
    v3[215] = sub_48CBB0(Dst);
    v3[216] = sub_48CBB0(Dst);
    v7 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v3[71], 1);
    v5 = v3[71] - 1 < 0;
    v3[210] = v7;
    if ( v5 ^ v6 )
    {
      *((_WORD *)v3 + 368) = 0;
      *((_WORD *)v3 + 371) = 10;
      *((_WORD *)v3 + 372) = 0;
      *((_WORD *)v3 + 373) = 2000;
      *((_WORD *)v3 + 375) = 30;
      *((_WORD *)v3 + 378) = 0;
    }
    else
    {
      v8 = sub_48CBB0(Dst);
      v6 = __OFSUB__(v3[71], 48);
      v5 = v3[71] - 48 < 0;
      *((_WORD *)v3 + 368) = v8;
      if ( !(v5 ^ v6) )
        *((_WORD *)v3 + 370) = sub_48CBB0(Dst);
      if ( v3[71] >= 37 )
        *((_WORD *)v3 + 369) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 371) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 372) = sub_48CBB0(Dst);
      v9 = sub_48CBB0(Dst);
      v6 = __OFSUB__(v3[71], 26);
      v5 = v3[71] - 26 < 0;
      *((_WORD *)v3 + 373) = v9;
      if ( !(v5 ^ v6) )
        *((_WORD *)v3 + 374) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 375) = sub_48CBB0(Dst);
      v10 = sub_48CBB0(Dst);
      v6 = __OFSUB__(v3[71], 42);
      v5 = v3[71] - 42 < 0;
      *((_WORD *)v3 + 378) = v10;
      if ( !(v5 ^ v6) )
        *((_WORD *)v3 + 379) = sub_48CBB0(Dst);
      if ( v3[71] >= 43 )
      {
        *((_WORD *)v3 + 377) = sub_48CBB0(Dst);
        *((_WORD *)v3 + 380) = sub_48CBB0(Dst);
      }
    }
    if ( v3[71] < 2 )
      *((_WORD *)v3 + 376) = 0;
    else
      *((_WORD *)v3 + 376) = sub_48CBB0(Dst);
    if ( v3[71] < 40
      || (v11 = sub_48CBB0(Dst), v6 = __OFSUB__(v3[71], 40), v5 = v3[71] - 40 < 0, *((_WORD *)v3 + 381) = v11, v5 ^ v6) )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    if ( v3[71] >= 14 )
    {
      *((_WORD *)v3 + 382) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 383) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 384) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 385) = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 16 )
    {
      *((_WORD *)v3 + 386) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 387) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 388) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 389) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 390) = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 27 )
    {
      *((_WORD *)v3 + 391) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 392) = sub_48CBB0(Dst);
    }
    v12 = v3[71];
    if ( v12 >= 20 )
    {
      v13 = sub_48CBB0(Dst);
      v12 = v3[71];
      *((_WORD *)v3 + 393) = v13;
      if ( v12 < 53 )
      {
        if ( v13 )
          *((_WORD *)v3 + 393) = -1;
      }
    }
    if ( v12 >= 23 )
      *((_WORD *)v3 + 394) = sub_48CBB0(Dst);
    if ( v3[71] >= 36 )
      *((_WORD *)v3 + 395) = sub_48CBB0(Dst);
    if ( v3[71] >= 38 )
    {
      v3[211] = sub_48CBB0(Dst);
      *((_WORD *)v3 + 409) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 411) = sub_48CBB0(Dst);
      sub_48CA10((int)(v3 + 152), Dst);
    }
    if ( v3[71] >= 39 )
      *((_WORD *)v3 + 410) = sub_48CBB0(Dst);
    if ( v3[71] >= 41 )
      *((_WORD *)v3 + 412) = sub_48CBB0(Dst);
    if ( v3[71] >= 44 )
      v3[212] = sub_48CBB0(Dst);
    if ( v3[71] < 50 )
    {
      v16 = 0;
      do
      {
        v17 = (int)&v3[4 * v16];
        *(_WORD *)(v17 + 1324) = sub_48CBB0(Dst);
        v3[4 * (v16 + 83)] = sub_48CBB0(Dst);
        *(_DWORD *)(v17 + 1332) = sub_48CBB0(Dst);
        if ( v16 == 5 )
          v3[354] = 2;
        else
          *(_DWORD *)(v17 + 1336) = 0;
        ++v16;
      }
      while ( v16 < 6 );
    }
    else
    {
      v14 = v3 + 332;
      v15 = 6;
      do
      {
        *((_WORD *)v14 - 2) = sub_48CBB0(Dst);
        *v14 = sub_48CBB0(Dst);
        v14[1] = sub_48CBB0(Dst);
        v14[2] = sub_48CBB0(Dst);
        v14 += 4;
        --v15;
      }
      while ( v15 );
    }
    v18 = v3[71];
    if ( v18 < 33 )
    {
      if ( v18 < 17 )
      {
        sub_48EC80((int)(v3 + 217), Dst);
        sub_48EC80((int)(v3 + 232), Dst);
        sub_48EC80((int)(v3 + 247), Dst);
        sub_48EC80((int)(v3 + 262), Dst);
        sub_48EC80((int)(v3 + 277), Dst);
      }
      else
      {
        sub_48ECE0((int)(v3 + 217), Dst);
        sub_48ECE0((int)(v3 + 232), Dst);
        sub_48ECE0((int)(v3 + 247), Dst);
        sub_48ECE0((int)(v3 + 262), Dst);
        sub_48ECE0((int)(v3 + 277), Dst);
      }
    }
    else
    {
      sub_401A78((int)(v3 + 217), Dst);
      sub_401A78((int)(v3 + 232), Dst);
      sub_401A78((int)(v3 + 247), Dst);
      sub_401A78((int)(v3 + 262), Dst);
      sub_401A78((int)(v3 + 277), Dst);
    }
    sub_48CA10((int)(v3 + 292), Dst);
    sub_48CA10((int)(v3 + 298), Dst);
    *((_WORD *)v3 + 608) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 609) = sub_48CBB0(Dst);
    sub_48CA10((int)(v3 + 305), Dst);
    sub_48CA10((int)(v3 + 311), Dst);
    *((_WORD *)v3 + 634) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 635) = sub_48CBB0(Dst);
    sub_48CA10((int)(v3 + 318), Dst);
    sub_48CA10((int)(v3 + 324), Dst);
    *((_WORD *)v3 + 660) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 661) = sub_48CBB0(Dst);
    if ( v3[71] < 3 )
    {
      v19 = j__atol((const char *)v3 + 892);
      sprintf((char *)v3 + 892, "gfx%05d", v19);
      v20 = j__atol((const char *)v3 + 952);
      sprintf((char *)v3 + 952, "gfx%05d", v20);
      v21 = j__atol((const char *)v3 + 1012);
      sprintf((char *)v3 + 1012, "gfx%05d", v21);
      v22 = j__atol((const char *)v3 + 1072);
      sprintf((char *)v3 + 1072, "gfx%05d", v22);
      v23 = j__atol((const char *)v3 + 1132);
      sprintf((char *)v3 + 1132, "gfx%05d", v23);
      v24 = j__atol((const char *)v3 + 1192);
      sprintf((char *)v3 + 1192, "wav%05d", v24);
      v25 = j__atol((const char *)v3 + 1244);
      sprintf((char *)v3 + 1244, "wav%05d", v25);
      v26 = j__atol((const char *)v3 + 1296);
      sprintf((char *)v3 + 1296, "wav%05d", v26);
    }
  }
  return v3;
}
// 518F98: using guessed type void *ProjectileItem::`vftable';

//----- (00493580) --------------------------------------------------------
_DWORD *__fastcall sub_493580(_DWORD *a1, int a2, void *Dst)
{
  _DWORD *v3; // edi
  __int16 v4; // ax
  bool v5; // sf
  unsigned __int8 v6; // of
  int v7; // ebx
  signed int v8; // ebp
  _WORD *v9; // ebx
  signed int v10; // ebp

  v3 = a1;
  sub_491B60(a1, a2, Dst);
  *v3 = &UtilityItem::`vftable';
  memset(v3 + 72, 0, 0x128u);
  *((_WORD *)v3 + 158) = -1;
  *((_WORD *)v3 + 159) = -1;
  *((_WORD *)v3 + 171) = -1;
  *((_WORD *)v3 + 173) = -1;
  *((_WORD *)v3 + 172) = -1;
  if ( Dst )
  {
    *((_WORD *)v3 + 177) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 176) = sub_48CBB0(Dst);
    v3[77] = sub_48CBB0(Dst);
    v3[78] = sub_48CBB0(Dst);
    *((_WORD *)v3 + 158) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 159) = sub_48CBB0(Dst);
    *((_WORD *)v3 + 160) = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v3[71], 9);
    v5 = v3[71] - 9 < 0;
    *((_WORD *)v3 + 161) = v4;
    if ( !(v5 ^ v6) )
      *((_WORD *)v3 + 162) = sub_48CBB0(Dst);
    if ( v3[71] >= 10 )
    {
      *((_WORD *)v3 + 163) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 164) = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 28 )
    {
      *((_WORD *)v3 + 169) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 170) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 167) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 168) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 165) = sub_48CBB0(Dst);
      v3[90] = sub_48CBB0(Dst);
    }
    if ( v3[71] >= 11 )
    {
      sub_48CA10((int)(v3 + 133), Dst);
      sub_48CA10((int)(v3 + 139), Dst);
      *((_WORD *)v3 + 290) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 291) = sub_48CBB0(Dst);
    }
    v7 = (int)(v3 + 91);
    v8 = 6;
    do
    {
      *(_DWORD *)(v7 + 4) = sub_48CBB0(Dst);
      *(_WORD *)v7 = sub_48CBB0(Dst);
      v7 += 8;
      --v8;
    }
    while ( v8 );
    if ( v3[71] >= 56 )
    {
      v9 = v3 + 103;
      v10 = 30;
      do
      {
        v9[1] = sub_48CBB0(Dst);
        *v9 = sub_48CBB0(Dst);
        v9 += 2;
        --v10;
      }
      while ( v10 );
      *((_WORD *)v3 + 171) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 173) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 172) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 174) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 175) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 178) = sub_48CBB0(Dst);
      *((_WORD *)v3 + 179) = sub_48CBB0(Dst);
      v3[75] = sub_48CBB0(Dst);
      v3[76] = sub_48CBB0(Dst);
      v3[72] = sub_48CBB0(Dst);
      v3[73] = sub_48CBB0(Dst);
      v3[74] = sub_48CBB0(Dst);
      *((_WORD *)v3 + 166) = sub_48CBB0(Dst);
    }
  }
  return v3;
}
// 518FC0: using guessed type void *UtilityItem::`vftable';

//----- (00493870) --------------------------------------------------------
_DWORD *__thiscall sub_493870(_DWORD *this, void *Dst)
{
  _DWORD *v2; // ebx
  _DWORD *v3; // esi
  _DWORD *v4; // eax
  int v5; // edx
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // edx
  _DWORD *v9; // eax
  int v10; // edx
  _DWORD *v11; // eax
  int v12; // edx
  _DWORD *v13; // eax
  int v14; // edx
  _DWORD *v15; // eax
  int v16; // edx
  _DWORD *v17; // eax
  int v18; // edx
  _DWORD *v19; // eax
  int v20; // edx
  _DWORD *v21; // eax
  int v22; // edx
  _DWORD *v23; // eax
  int v24; // edx
  _DWORD *v25; // eax
  int v26; // edx
  _DWORD *v27; // eax
  int v28; // edx
  _DWORD *v29; // eax
  int v30; // edx

  v2 = this;
  v3 = 0;
  switch ( sub_48CBB0(Dst) )
  {
    case 1:
      v7 = operator new(0x150u);
      if ( !v7 )
        goto LABEL_28;
      v6 = sub_491FD0(v7, v8, Dst);
      goto LABEL_29;
    case 4:
      v9 = operator new(0x120u);
      if ( !v9 )
        goto LABEL_28;
      v6 = sub_492D90(v9, v10, Dst);
      goto LABEL_29;
    case 6:
      v11 = operator new(0x5C0u);
      if ( !v11 )
        goto LABEL_28;
      v6 = sub_492DB0(v11, v12, Dst);
      goto LABEL_29;
    case 7:
      v13 = operator new(0x264u);
      if ( !v13 )
        goto LABEL_28;
      v6 = sub_492B40(v13, v14, Dst);
      goto LABEL_29;
    case 8:
      v21 = operator new(0x6C0u);
      if ( !v21 )
        goto LABEL_28;
      v6 = sub_4929C0(v21, v22, Dst);
      goto LABEL_29;
    case 11:
      v25 = operator new(0x2F4u);
      if ( !v25 )
        goto LABEL_28;
      v6 = sub_492530(v25, v26, Dst);
      goto LABEL_29;
    case 12:
      v27 = operator new(0x2E4u);
      if ( !v27 )
        goto LABEL_28;
      v6 = sub_4926F0(v27, v28, Dst);
      goto LABEL_29;
    case 13:
      v23 = operator new(0x24Cu);
      if ( !v23 )
        goto LABEL_28;
      v6 = sub_493580(v23, v24, Dst);
      goto LABEL_29;
    case 14:
      v15 = operator new(0x268u);
      if ( !v15 )
        goto LABEL_28;
      v6 = sub_492BB0(v15, v16, Dst);
      goto LABEL_29;
    case 15:
      v17 = operator new(0x160u);
      if ( !v17 )
        goto LABEL_28;
      v6 = sub_492C30(v17, v18, Dst);
      goto LABEL_29;
    case 16:
      v19 = operator new(0x560u);
      if ( !v19 )
        goto LABEL_28;
      v6 = sub_492CD0(v19, v20, Dst);
      goto LABEL_29;
    case 17:
      v29 = operator new(0x2F4u);
      if ( !v29 )
        goto LABEL_28;
      v6 = sub_492820(v29, v30, Dst);
      goto LABEL_29;
    case 18:
      v4 = operator new(0x140u);
      if ( v4 )
        v6 = sub_491EE0(v4, v5, Dst);
      else
LABEL_28:
        v6 = 0;
LABEL_29:
      v3 = v6;
      break;
    default:
      break;
  }
  if ( v2[2001] )
    (*(void (__thiscall **)(_DWORD *, _DWORD))(*v3 + 32))(v3, v2[2001]);
  return v3;
}

//----- (00493BB0) --------------------------------------------------------
FILE *__thiscall sub_493BB0(_DWORD *this, char *Filename)
{
  _DWORD *v2; // esi
  FILE *result; // eax
  FILE *v4; // ebp
  char *v5; // eax
  void *v6; // edi
  _DWORD *v7; // eax
  int v8; // [esp+8h] [ebp-2004h]

  v2 = this;
  result = fopen(Filename, "rt");
  v4 = result;
  if ( result )
  {
    if ( !feof(result) )
    {
      do
      {
        LOBYTE(v8) = 0;
        v5 = (char *)sub_4C352E((int)&v8, 0x2000, v4);
        v6 = v5;
        if ( v5 )
        {
          if ( isdigit(*v5) )
          {
            v7 = sub_493870(v2, v6);
            if ( v7 )
            {
              if ( v2[v7[32] + 2002] )
              {
                (*(void (__thiscall **)(_DWORD *, signed int))*v7)(v7, 1);
              }
              else
              {
                v2[v2[2000]++] = v7;
                v2[v7[32] + 2002] = v7;
              }
            }
          }
        }
      }
      while ( !feof(v4) );
    }
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (00493CB0) --------------------------------------------------------
_DWORD *__thiscall sub_493CB0(_DWORD *this, char *Filename, int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  this[2001] = a3;
  this[2000] = 0;
  memset(this + 2002, 0, 0x4FB4u);
  if ( Filename )
    sub_493BB0(v3, Filename);
  return v3;
}

//----- (00493D00) --------------------------------------------------------
void __thiscall sub_493D00(_DWORD *this)
{
  _DWORD *v1; // esi
  int i; // edi

  v1 = this;
  for ( i = 0; i < v1[2000]; ++i )
  {
    if ( (*(int (**)(void))(*(_DWORD *)v1[i] + 4))() == 18 )
      sub_493BB0(v1, (char *)(v1[i] + 288));
  }
}

//----- (00493D40) --------------------------------------------------------
int __cdecl sub_493D40(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (00493E40) --------------------------------------------------------
char *__thiscall sub_493E40(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493E80) --------------------------------------------------------
char *__thiscall sub_493E80(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493EC0) --------------------------------------------------------
char *__thiscall sub_493EC0(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493F00) --------------------------------------------------------
char *__thiscall sub_493F00(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493F40) --------------------------------------------------------
char *__thiscall sub_493F40(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493F80) --------------------------------------------------------
char *__thiscall sub_493F80(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00493FC0) --------------------------------------------------------
char *__thiscall sub_493FC0(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494000) --------------------------------------------------------
char *__thiscall sub_494000(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494040) --------------------------------------------------------
char *__thiscall sub_494040(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494080) --------------------------------------------------------
char *__thiscall sub_494080(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (004940C0) --------------------------------------------------------
char *__thiscall sub_4940C0(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494100) --------------------------------------------------------
char *__thiscall sub_494100(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494140) --------------------------------------------------------
char *__thiscall sub_494140(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494180) --------------------------------------------------------
char *__thiscall sub_494180(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (004941C0) --------------------------------------------------------
char *__thiscall sub_4941C0(void *Memory, char a2)
{
  char *v2; // esi
  void *v3; // ST00_4

  v2 = (char *)Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &Item::`vftable';
  free(v3);
  sub_48EEF0(v2 + 244);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 518D90: using guessed type void *Item::`vftable';

//----- (00494200) --------------------------------------------------------
PHKEY __thiscall sub_494200(PHKEY phkResult, LPCSTR lpSubKey)
{
  const CHAR *v2; // edi
  PHKEY v3; // esi

  v2 = lpSubKey;
  v3 = phkResult;
  RegCreateKeyExA(HKEY_LOCAL_MACHINE, lpSubKey, 0, 0, 0, 0xF003Fu, 0, phkResult, (LPDWORD)&lpSubKey);
  RegCreateKeyExA(HKEY_CURRENT_USER, v2, 0, 0, 0, 0xF003Fu, 0, v3 + 1, (LPDWORD)&lpSubKey);
  v3[2] = 0;
  return v3;
}

//----- (00494260) --------------------------------------------------------
LONG __thiscall sub_494260(HKEY *this)
{
  HKEY *v1; // esi
  LONG result; // eax
  HKEY v3; // esi

  v1 = this;
  RegCloseKey(this[1]);
  result = RegCloseKey(*v1);
  v3 = v1[2];
  if ( v3 )
    result = RegCloseKey(v3);
  return result;
}

//----- (004942C0) --------------------------------------------------------
LONG __thiscall sub_4942C0(HKEY *this, LPCSTR lpSubKey, char a3)
{
  HKEY *v3; // edi
  HKEY *v4; // esi
  HKEY v5; // edi
  DWORD dwDisposition; // [esp+8h] [ebp-4h]

  v3 = this;
  v4 = this + 2;
  if ( this[2] )
  {
    RegCloseKey(this[2]);
    *v4 = 0;
  }
  if ( a3 )
    v5 = v3[1];
  else
    v5 = *v3;
  return RegCreateKeyExA(v5, lpSubKey, 0, 0, 0, 0xF003Fu, 0, v4, &dwDisposition);
}

//----- (00494310) --------------------------------------------------------
LONG __thiscall sub_494310(HKEY *this, LPCSTR lpValueName, BYTE Data)
{
  return RegSetValueExA(this[2], lpValueName, 0, 4u, &Data, 4u);
}

//----- (00494330) --------------------------------------------------------
LPCSTR __thiscall sub_494330(_DWORD *this, LPCSTR lpValueName, BYTE Data)
{
  const CHAR *v3; // edi
  _DWORD *v4; // esi
  HKEY v5; // ST00_4
  HKEY v6; // ecx
  DWORD cbData; // [esp+8h] [ebp-4h]

  v3 = lpValueName;
  v4 = this;
  v5 = (HKEY)this[2];
  cbData = 4;
  if ( RegQueryValueExA(v5, lpValueName, 0, 0, (LPBYTE)&lpValueName, &cbData) )
  {
    v6 = (HKEY)v4[2];
    lpValueName = (LPCSTR)Data;
    RegSetValueExA(v6, v3, 0, 4u, &Data, 4u);
  }
  return lpValueName;
}

//----- (00494390) --------------------------------------------------------
LONG __thiscall sub_494390(HKEY *this, LPCSTR lpValueName, BYTE *lpData)
{
  return RegSetValueExA(this[2], lpValueName, 0, 1u, lpData, strlen((const char *)lpData) + 1);
}

//----- (004943D0) --------------------------------------------------------
LPBYTE __thiscall sub_4943D0(HKEY *this, LPCSTR lpValueName, BYTE *a3, LPBYTE lpData, DWORD cbData)
{
  HKEY *v5; // ebx

  v5 = this;
  if ( RegQueryValueExA(this[2], lpValueName, 0, 0, lpData, &cbData) )
  {
    strncpy((char *)lpData, (const char *)a3, cbData);
    RegSetValueExA(v5[2], lpValueName, 0, 1u, a3, strlen((const char *)a3) + 1);
  }
  return lpData;
}

//----- (00494440) --------------------------------------------------------
LPBYTE __thiscall sub_494440(HKEY *this, LPCSTR lpValueName, LPBYTE lpData, DWORD cbData)
{
  HKEY *v4; // edi

  v4 = this;
  memset(lpData, 0, cbData);
  RegQueryValueExA(v4[2], lpValueName, 0, 0, lpData, &cbData);
  return lpData;
}

//----- (00494480) --------------------------------------------------------
LONG __thiscall sub_494480(HKEY *this, LPCSTR lpValueName, BYTE *lpData, DWORD cbData)
{
  return RegSetValueExA(this[2], lpValueName, 0, 3u, lpData, cbData);
}

//----- (004944A0) --------------------------------------------------------
int __cdecl sub_4944A0(void *Buf1, LPBYTE lpData, DWORD cbData)
{
  const char *v3; // esi
  HKEY v4; // edi
  char *v5; // eax
  const CHAR *v6; // esi
  int result; // eax
  HKEY phkResult; // [esp+Ch] [ebp-410h]
  DWORD Type; // [esp+10h] [ebp-40Ch]
  DWORD dwDisposition; // [esp+14h] [ebp-408h]
  CHAR SubKey; // [esp+18h] [ebp-404h]

  v3 = (const char *)Buf1;
  v4 = HKEY_LOCAL_MACHINE;
  if ( _memicmp(Buf1, &unk_518FE4, 3u) )
  {
    if ( _memicmp(Buf1, &unk_518FE8, 3u) )
    {
      if ( _memicmp(Buf1, &unk_518FEC, 3u) )
      {
        if ( !_memicmp(Buf1, &unk_518FF0, 2u) )
        {
          v4 = HKEY_USERS;
          v3 = (char *)Buf1 + 3;
        }
      }
      else
      {
        v4 = HKEY_CURRENT_CONFIG;
        v3 = (char *)Buf1 + 4;
      }
    }
    else
    {
      v4 = HKEY_CURRENT_USER;
      v3 = (char *)Buf1 + 4;
    }
  }
  else
  {
    v3 = (char *)Buf1 + 4;
  }
  strcpy(&SubKey, v3);
  v5 = strrchr(&SubKey, 92);
  v6 = v5;
  if ( v5 )
  {
    *v5 = 0;
    v6 = v5 + 1;
  }
  RegCreateKeyExA(v4, &SubKey, 0, 0, 0, 0xF003Fu, 0, &phkResult, &dwDisposition);
  if ( RegQueryValueExA(phkResult, v6, 0, &Type, lpData, &cbData) )
  {
    RegCloseKey(phkResult);
    *lpData = 0;
    result = 0;
  }
  else
  {
    RegCloseKey(phkResult);
    if ( Type != 1 )
      sprintf((char *)lpData, "%d", *(_DWORD *)lpData);
    result = 1;
  }
  return result;
}

//----- (00494760) --------------------------------------------------------
LONG sub_494760(void *Buf1, ...)
{
  const char *v1; // esi
  HKEY v2; // edi
  char *v3; // eax
  const CHAR *v4; // esi
  HKEY phkResult; // [esp+8h] [ebp-40Ch]
  DWORD dwDisposition; // [esp+Ch] [ebp-408h]
  CHAR SubKey; // [esp+10h] [ebp-404h]
  va_list va; // [esp+41Ch] [ebp+8h]

  va_start(va, Buf1);
  v1 = (const char *)Buf1;
  v2 = HKEY_LOCAL_MACHINE;
  if ( _memicmp(Buf1, "hlm", 3u) )
  {
    if ( _memicmp(Buf1, "hcu", 3u) )
    {
      if ( _memicmp(Buf1, "hcc", 3u) )
      {
        if ( !_memicmp(Buf1, "hu", 2u) )
        {
          v2 = HKEY_USERS;
          v1 = (char *)Buf1 + 3;
        }
      }
      else
      {
        v2 = HKEY_CURRENT_CONFIG;
        v1 = (char *)Buf1 + 4;
      }
    }
    else
    {
      v2 = HKEY_CURRENT_USER;
      v1 = (char *)Buf1 + 4;
    }
  }
  else
  {
    v1 = (char *)Buf1 + 4;
  }
  strcpy(&SubKey, v1);
  v3 = strrchr(&SubKey, 92);
  v4 = v3;
  if ( v3 )
  {
    *v3 = 0;
    v4 = v3 + 1;
  }
  RegCreateKeyExA(v2, &SubKey, 0, 0, 0, 0xF003Fu, 0, &phkResult, &dwDisposition);
  RegSetValueExA(phkResult, v4, 0, 4u, (const BYTE *)va, 4u);
  return RegCloseKey(phkResult);
}

//----- (00494930) --------------------------------------------------------
void sub_494930()
{
  srand(0xD03u);
}

//----- (004949C0) --------------------------------------------------------
int __cdecl sub_4949C0(int a1, _BYTE *a2, char *a3, _DWORD **a4, _DWORD **a5, _DWORD **a6)
{
  int v6; // esi
  int v7; // edx
  _BYTE *i; // eax
  int v9; // esi
  int v10; // esi
  int v11; // esi

  v6 = -1;
  if ( a1 )
  {
    v7 = (unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a1]) >> 8) ^ BYTE2(a1));
    v6 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[v7]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a1] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a1))] ^ ((dword_53A208[v7] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a1]) ^ BYTE1(a1))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a1] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  }
  for ( i = a2; i < a2 + 90182; ++i )
    v6 = dword_53A208[(unsigned __int8)(v6 ^ *i)] ^ (v6 >> 8) & 0xFFFFFF;
  v9 = a1 + sub_491990(a3, a1) + ~v6;
  v10 = sub_4B2C80(a4, a1) + v9;
  v11 = sub_4AFA40(a5, a1) + v10;
  return v11 + sub_48E6A0(a6, a1);
}

//----- (00494AA0) --------------------------------------------------------
int __cdecl sub_494AA0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  return a12 * *(_DWORD *)(a1 + 30814)
       + a11 * *(_DWORD *)(a1 + 30810)
       + a9 * *(_DWORD *)(a1 + 30794)
       + a8 * *(_DWORD *)(a1 + 30802)
       + a7 * *(_DWORD *)(a1 + 30790)
       + a6 * *(_DWORD *)(a1 + 30806)
       + a5 * *(_DWORD *)(a1 + 30798)
       + a4 * *(_DWORD *)(a1 + 30786)
       + a3 * *(_DWORD *)(a1 + 30782)
       + a2 * *(_DWORD *)(a1 + 30778)
       + a10 * *(_DWORD *)(a1 + 30818) / 1000;
}

//----- (00494B50) --------------------------------------------------------
unsigned int __cdecl sub_494B50(int a1, int a2)
{
  return *(_DWORD *)(a2 + 2) * *(_DWORD *)(a1 + 31530)
       + *(_DWORD *)(a2 + 6) * *(_DWORD *)(a1 + 31534)
       + *(_DWORD *)(a2 + 26) * *(_DWORD *)(a1 + 31522)
       + *(_DWORD *)(a2 + 30) * *(_DWORD *)(a1 + 31526)
       + *(_DWORD *)(a2 + 62) * *(_DWORD *)(a1 + 31514)
       + *(_DWORD *)(a2 + 58) * *(_DWORD *)(a1 + 31538)
       + *(_DWORD *)(a2 + 74) * *(_DWORD *)(a1 + 31518)
       + *(_DWORD *)(a2 + 78) * *(_DWORD *)(a1 + 31542)
       + ((signed int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 50) * *(_DWORD *)(a1 + 31506)) >> 32) >> 6)
       + ((signed int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 54) * *(_DWORD *)(a1 + 31510)) >> 32) >> 6)
       + ((signed int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 66) * *(_DWORD *)(a1 + 31546)) >> 32) >> 6)
       + *(_DWORD *)(a2 + 70) * *(_DWORD *)(a1 + 31550) / 1000
       + ((unsigned int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 66) * *(_DWORD *)(a1 + 31546)) >> 32) >> 31)
       + ((unsigned int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 54) * *(_DWORD *)(a1 + 31510)) >> 32) >> 31)
       + ((unsigned int)((unsigned __int64)(274877907i64 * *(_DWORD *)(a2 + 50) * *(_DWORD *)(a1 + 31506)) >> 32) >> 31);
}

//----- (00494C40) --------------------------------------------------------
BOOL __cdecl sub_494C40(void *Src, int a2, int a3)
{
  const char *v3; // ebp
  bool v4; // zf
  char *v6; // edi
  int v7; // esi
  char v8; // bl
  char *v9; // eax
  char v10; // cl
  char v11; // al
  unsigned int v12; // kr00_4
  int v13; // eax
  int v14; // ebp
  int v15; // edx
  int v16; // eax
  signed __int16 *v17; // ecx
  int v18; // ebx
  int v19; // esi
  _WORD *v20; // edi
  int v21; // ecx
  int v22; // edx
  signed int v23; // [esp+4h] [ebp-218h]
  int v24; // [esp+Ch] [ebp-210h]
  size_t Size; // [esp+10h] [ebp-20Ch]
  int v26; // [esp+14h] [ebp-208h]
  char v27[256]; // [esp+18h] [ebp-204h]
  char Dst[256]; // [esp+118h] [ebp-104h]

  v3 = (const char *)Src;
  v4 = *(_BYTE *)Src == 0;
  v23 = 0;
  v26 = 0;
  if ( v4 )
    return 1;
  v24 = 0;
  v6 = (char *)Src;
  Size = 0;
  v7 = v27 - (_BYTE *)Src - 1;
  while ( 1 )
  {
    if ( v24 || (v8 = *v6, *v6 != 38) && v8 != 124 )
    {
      if ( *v6 == 40 )
      {
        ++v24;
      }
      else if ( *v6 == 41 )
      {
        --v24;
      }
      goto LABEL_16;
    }
    memcpy(Dst, Src, Size);
    Dst[Size] = 0;
    v9 = v6 + 1;
    do
    {
      v10 = *v9;
      v9[v7] = *v9;
      ++v9;
    }
    while ( v10 );
    if ( v8 == 38 )
    {
      if ( !sub_494C40(Dst, a2, a3) || !sub_494C40(v27, a2, a3) )
      {
        v23 = 0;
        goto LABEL_24;
      }
      goto LABEL_23;
    }
    if ( v8 == 124 )
      break;
LABEL_16:
    ++Size;
    ++v6;
    --v7;
    if ( !*v6 )
      goto LABEL_25;
  }
  if ( sub_494C40(Dst, a2, a3) || (v23 = 0, sub_494C40(v27, a2, a3)) )
LABEL_23:
    v23 = 1;
LABEL_24:
  if ( *v6 )
    return v23;
LABEL_25:
  if ( *(_BYTE *)Src == 33 )
  {
    v3 = (char *)Src + 1;
    v26 = 1;
  }
  v11 = *v3;
  if ( *v3 == 40 )
  {
    v12 = strlen(v3);
    memcpy(v27, v3 + 1, v12 - 2);
    v27[v12 - 2] = 0;
    v13 = sub_494C40(v27, a2, a3);
    goto LABEL_52;
  }
  if ( v11 )
  {
    switch ( v11 )
    {
      case 35:
        if ( *(_DWORD *)(a2 + 418) + *(_DWORD *)(a2 + 426) + *(_DWORD *)(a2 + 430) >= j__atol(v3 + 1) )
          v23 = 1;
        goto LABEL_53;
      case 64:
        if ( *(_DWORD *)(a2 + 502) >= j__atol(v3 + 1) )
          v23 = 1;
        goto LABEL_53;
      case 37:
        if ( a3 != j__atol(v3 + 1) )
          goto LABEL_53;
        goto LABEL_38;
    }
    v14 = j__atol(v3);
    if ( v14 >= 0 )
    {
      v15 = *(signed __int16 *)(a2 + 508);
      v16 = 0;
      if ( v15 <= 0 )
        goto LABEL_53;
      v17 = (signed __int16 *)(a2 + 510);
      while ( *v17 != v14 )
      {
        ++v16;
        ++v17;
        if ( v16 >= v15 )
          goto LABEL_53;
      }
LABEL_38:
      v23 = 1;
      goto LABEL_53;
    }
    v18 = *(signed __int16 *)(a2 + 508);
    v19 = 0;
    if ( v18 > 0 )
    {
      v20 = (_WORD *)(a2 + 510);
      while ( *v20 >= 0 || (signed __int16)*v20 / 1000 != v14 / 1000 )
      {
        ++v19;
        ++v20;
        if ( v19 >= v18 )
          goto LABEL_53;
      }
      v21 = -*(signed __int16 *)(a2 + 2 * v19 + 510) % 1000;
      v22 = -v14 % 1000;
      v13 = v21 < v22;
      LOBYTE(v13) = v21 >= v22;
LABEL_52:
      v23 = v13;
    }
  }
LABEL_53:
  if ( v26 )
    return v23 == 0;
  return v23;
}
// 494C40: using guessed type char var_204[256];
// 494C40: using guessed type char Dst[256];

//----- (00494FB0) --------------------------------------------------------
int __cdecl sub_494FB0(int a1, int a2)
{
  int v2; // ebx
  int v3; // esi
  signed __int16 *v4; // ecx
  unsigned int v5; // edx

  v2 = *(signed __int16 *)(a2 + 508);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v4 = (signed __int16 *)(a2 + 510);
  while ( a1 < 0 )
  {
    v5 = (signed int)((unsigned __int64)(274877907i64 * *v4) >> 32) >> 6;
    if ( v5 + (v5 >> 31) == a1 )
      return -*(signed __int16 *)(a2 + 2 * v3 + 510) % 1000;
LABEL_7:
    ++v3;
    ++v4;
    if ( v3 >= v2 )
      return 0;
  }
  if ( a1 != *v4 )
    goto LABEL_7;
  return 1;
}

//----- (00495030) --------------------------------------------------------
char *__cdecl sub_495030(char *a1, int a2, int a3)
{
  signed int v3; // esi
  _DWORD *v4; // eax
  int v5; // ecx
  int v6; // ecx
  char *v7; // eax
  int v8; // edx
  char v9; // cl

  *a1 = 0;
  if ( !*(_DWORD *)(a2 + 25942) )
    return a1;
  v3 = 1;
  v4 = (_DWORD *)(a2 + 29190);
  do
  {
    v5 = *(v4 - 1);
    if ( !v5 || v5 > a3 )
      break;
    if ( !*v4 || *v4 > a3 )
    {
      ++v3;
      break;
    }
    v6 = v4[1];
    if ( !v6 || v6 > a3 )
    {
      v3 += 2;
      break;
    }
    v3 += 3;
    v4 += 3;
  }
  while ( v3 < 100 );
  v7 = (char *)(32 * v3 + a2 + 25950);
  v8 = a1 - v7;
  do
  {
    v9 = *v7;
    v7[v8] = *v7;
    ++v7;
  }
  while ( v9 );
  if ( !*a1 )
    sprintf(a1, "%d", v3 - 1);
  return a1;
}

//----- (004950E0) --------------------------------------------------------
BOOL __cdecl sub_4950E0(void *Src, int a2, int a3)
{
  const char *v3; // ebp
  bool v4; // zf
  char *v6; // edi
  int v7; // esi
  char v8; // bl
  char *v9; // eax
  char v10; // cl
  int v11; // ebx
  unsigned int v12; // kr00_4
  int v13; // eax
  int v14; // ecx
  int v15; // [esp+4h] [ebp-218h]
  int v16; // [esp+8h] [ebp-214h]
  size_t Size; // [esp+10h] [ebp-20Ch]
  int v18; // [esp+14h] [ebp-208h]
  char v19[256]; // [esp+18h] [ebp-204h]
  char Dst[256]; // [esp+118h] [ebp-104h]

  v3 = (const char *)Src;
  v4 = *(_BYTE *)Src == 0;
  v15 = 0;
  v18 = 0;
  if ( v4 )
    return 1;
  v16 = 0;
  v6 = (char *)Src;
  Size = 0;
  v7 = v19 - (_BYTE *)Src - 1;
  while ( 1 )
  {
    if ( v16 || (v8 = *v6, *v6 != 38) && v8 != 124 )
    {
      if ( *v6 == 40 )
      {
        ++v16;
      }
      else if ( *v6 == 41 )
      {
        --v16;
      }
      goto LABEL_16;
    }
    memcpy(Dst, Src, Size);
    Dst[Size] = 0;
    v9 = v6 + 1;
    do
    {
      v10 = *v9;
      v9[v7] = *v9;
      ++v9;
    }
    while ( v10 );
    if ( v8 == 38 )
    {
      v11 = a3;
      if ( !sub_4950E0(Dst, a2, a3) || !sub_4950E0(v19, a2, a3) )
      {
        v15 = 0;
        goto LABEL_26;
      }
      goto LABEL_25;
    }
    if ( v8 == 124 )
      break;
LABEL_16:
    ++Size;
    ++v6;
    --v7;
    if ( !*v6 )
    {
      v11 = a3;
      goto LABEL_27;
    }
  }
  if ( !sub_4950E0(Dst, a2, a3) && !sub_4950E0(v19, a2, a3) )
  {
    v15 = 0;
    v11 = a3;
    goto LABEL_26;
  }
  v11 = a3;
LABEL_25:
  v15 = 1;
LABEL_26:
  if ( *v6 )
    return v15;
LABEL_27:
  if ( *(_BYTE *)Src == 33 )
  {
    v3 = (char *)Src + 1;
    v18 = 1;
  }
  if ( *v3 == 40 )
  {
    v12 = strlen(v3);
    memcpy(v19, v3 + 1, v12 - 2);
    v19[v12 - 2] = 0;
    v15 = sub_4950E0(v19, a2, v11);
  }
  else if ( *v3 )
  {
    v13 = j__atol(v3);
    if ( v13 > 0 )
    {
      v14 = 0;
      if ( v11 > 0 )
      {
        while ( *(_DWORD *)(a2 + 4 * v14) != v13 )
        {
          if ( ++v14 >= v11 )
            goto LABEL_38;
        }
        v15 = 1;
      }
    }
  }
LABEL_38:
  if ( v18 )
    return v15 == 0;
  return v15;
}
// 4950E0: using guessed type char var_204[256];
// 4950E0: using guessed type char Dst[256];

//----- (00495320) --------------------------------------------------------
BOOL __cdecl sub_495320(int a1, int a2, int a3, int a4)
{
  signed int v4; // ebx
  _WORD *v5; // edi
  __int16 v6; // ax
  signed int v7; // eax
  int v8; // eax
  int v9; // edx
  int v10; // eax
  _WORD *v11; // ecx

  v4 = 0;
  v5 = (_WORD *)(a2 + 288);
  while ( 1 )
  {
    v6 = v5[1];
    if ( v6 )
    {
      v7 = abs(v6);
      if ( v7 <= 5100 )
      {
        v8 = *(_DWORD *)(a1 + 4 * v7 + 8008);
        if ( v8 )
        {
          if ( !sub_494C40((void *)(v8 + 8), a3, a4) )
            goto LABEL_11;
        }
      }
    }
    if ( !*v5 )
      break;
    v9 = *(signed __int16 *)(a3 + 6);
    v10 = 0;
    if ( v9 > 0 )
    {
      v11 = (_WORD *)(a3 + 8);
      while ( *v11 != *v5 )
      {
        ++v10;
        v11 += 2;
        if ( v10 >= v9 )
          goto LABEL_11;
      }
      return *(_WORD *)(a2 + 4 * v4 + 288) != *(_WORD *)(a2 + 4 * v4 + 290);
    }
LABEL_11:
    ++v4;
    v5 += 2;
    if ( v4 >= 16 )
      return 0;
  }
  if ( !*(_WORD *)(a2 + 4 * v4 + 290) )
    return 0;
  return 1;
}

//----- (004953E0) --------------------------------------------------------
int __cdecl sub_4953E0(int a1, int a2, int a3, signed __int16 *a4, int a5)
{
  signed int v5; // eax
  int v6; // ecx
  __int16 v7; // ax
  __int16 v8; // ax
  int v9; // edi
  signed int v10; // eax
  int v11; // edi
  __int16 v12; // ax
  __int16 v13; // ax
  signed __int16 *v14; // ebp
  signed int v15; // eax
  _DWORD *v16; // esi
  signed int v17; // ebp
  int v18; // edi
  int v19; // esi
  signed __int16 *v20; // ecx
  signed int v21; // eax
  int v22; // eax
  int v24; // esi
  signed int v25; // [esp+Ch] [ebp-14h]
  signed int v26; // [esp+10h] [ebp-10h]
  int v27; // [esp+14h] [ebp-Ch]
  signed int v28; // [esp+18h] [ebp-8h]
  int v29; // [esp+18h] [ebp-8h]
  int v30; // [esp+1Ch] [ebp-4h]

  v5 = abs(a3);
  v27 = 0;
  if ( v5 <= 5100 )
  {
    v6 = *(_DWORD *)(a2 + 4 * v5 + 8008);
    v30 = *(_DWORD *)(a2 + 4 * v5 + 8008);
    if ( v6 )
    {
      v7 = *(_WORD *)(v6 + 166);
      v27 = v7 < 0 ? abs(v7) : 32000;
      v8 = *(_WORD *)(v6 + 172);
      if ( v8 )
      {
        v9 = v8;
        v10 = *(_DWORD *)(a1 + 4 * v8 + 4770);
        v11 = v9 - 1;
        v25 = 32000;
        if ( v10 != -1 )
          v25 = v10;
        v26 = 32000;
        if ( *(_DWORD *)(a1 + 4 * v11 + 4894) != -1 )
          v26 = *(_DWORD *)(a1 + 4 * v11 + 4894);
        if ( a5 )
        {
          v12 = *(_WORD *)(a5 + 2 * v11 + 28);
          if ( v12 != -1 )
            v25 = v12;
          v13 = *(_WORD *)(a5 + 2 * v11 + 88);
          if ( v13 != -1 )
            v26 = v13;
        }
        v28 = 0;
        if ( a4[3] > 0 )
        {
          v14 = a4 + 4;
          do
          {
            v15 = abs(*v14);
            if ( v15 <= 5100 )
            {
              v16 = *(_DWORD **)(a2 + 4 * v15 + 8008);
              if ( v16 )
              {
                if ( (*(int (__thiscall **)(_DWORD *))(*v16 + 12))(v16) && v16[66] )
                {
                  v25 += SHIWORD(v16[v11 + 103]);
                  v26 += SLOWORD(v16[v11 + 103]);
                }
              }
            }
            v14 += 2;
            ++v28;
          }
          while ( v28 < a4[3] );
        }
        v17 = 0;
        v18 = 0;
        v19 = 0;
        if ( a4[3] > 0 )
        {
          v20 = a4 + 5;
          v29 = a4[3];
          do
          {
            v21 = abs(*(v20 - 1));
            if ( v21 <= 5100 )
            {
              v22 = *(_DWORD *)(a2 + 4 * v21 + 8008);
              if ( v22 )
              {
                if ( *(_WORD *)(v22 + 172) == *(_WORD *)(v30 + 172) )
                {
                  if ( *(_DWORD *)(v22 + 128) == *(_DWORD *)(v30 + 128) )
                    v19 = *v20;
                  ++v17;
                  v18 += *v20;
                }
              }
            }
            v20 += 2;
            --v29;
          }
          while ( v29 );
        }
        if ( v17 >= v25 && !v19 )
          return 0;
        v24 = v26 + v19 - v18;
        if ( v24 < v27 )
          v27 = v24;
      }
    }
  }
  return v27;
}

//----- (004955D0) --------------------------------------------------------
int __cdecl sub_4955D0(void *Dst, LPCSTR lpFileName, int a3, int a4)
{
  const char *v4; // eax
  int *v5; // esi
  signed int v6; // ebx
  char *v7; // ebp
  signed int v8; // ebx
  int *v9; // ebp
  signed int v10; // ebx
  _WORD *v11; // ebp
  int v12; // eax
  char *v13; // ecx
  signed int v14; // ebx
  char *v15; // ebp
  signed int v16; // ebx
  int *v17; // ebp
  _WORD *v18; // ebp
  signed int v19; // ebx
  char *v20; // ebx
  int v21; // eax
  int v22; // eax
  bool v23; // sf
  unsigned __int8 v24; // of
  signed int v25; // ebx
  int *v26; // ebp
  int v27; // eax
  signed int v28; // ebx
  char *v29; // ebp
  int v30; // eax
  char *v31; // ecx
  signed int v32; // ebp
  char *v33; // ebx
  signed int v34; // ebp
  int v35; // eax
  int v36; // eax
  int v37; // eax
  char *v38; // ebx
  char *v39; // ebx
  int v40; // ebp
  int v41; // eax
  int v42; // ecx
  int v43; // eax
  int v44; // eax
  int v45; // eax
  signed int v46; // ebx
  char *v47; // ebp
  signed int v48; // ebx
  char *v49; // ebp
  signed int v50; // ebx
  char *v51; // ebp
  int v52; // eax
  char *v53; // edi
  int v54; // ebx
  int v56; // [esp+20h] [ebp-1B0h]
  int v57; // [esp+24h] [ebp-1ACh]
  char *v58; // [esp+28h] [ebp-1A8h]
  int v59; // [esp+2Ch] [ebp-1A4h]
  char Dest; // [esp+30h] [ebp-1A0h]
  char Str2; // [esp+40h] [ebp-190h]
  char Source; // [esp+60h] [ebp-170h]
  char v63; // [esp+70h] [ebp-160h]
  char v64; // [esp+80h] [ebp-150h]
  char v65; // [esp+C0h] [ebp-110h]
  char v66; // [esp+140h] [ebp-90h]
  int v67; // [esp+1CCh] [ebp-4h]

  if ( sub_48CD30(lpFileName, (int)&a3) )
  {
    memset(Dst, 0, 0x16046u);
    v4 = (const char *)operator new(0x214u);
    v59 = (int)v4;
    v67 = 0;
    if ( v4 )
      v5 = (int *)sub_4B7620(v4, (char *)lpFileName);
    else
      v5 = 0;
    v67 = -1;
    *((_DWORD *)Dst + 139) = sub_4B80F0(v5, "Message", "Reliable", 0, 1);
    sub_4B7F30(v5, "UiartFont", "Font0", "uiart,font1", (char *)Dst + 680, 0x30u, 1);
    sub_4B7F30(v5, "UiartFont", "Font1", "uiart,font2", (char *)Dst + 728, 0x30u, 1);
    sub_4B7F30(v5, "UiartFont", "Font2", "uiart,font3", (char *)Dst + 776, 0x30u, 1);
    sub_4B7F30(v5, "UiartFont", "Font3", "uiart,font4", (char *)Dst + 824, 0x30u, 1);
    sub_4B7F30(v5, "UiartFont", "Font4", "uiart,font5", (char *)Dst + 872, 0x30u, 1);
    v6 = 5;
    v7 = (char *)Dst + 920;
    do
    {
      sprintf(&Dest, "Font%d", v6);
      sub_4B7F30(v5, "UiartFont", &Dest, &byte_519021, v7, 0x30u, 1);
      ++v6;
      v7 += 48;
    }
    while ( v6 < 15 );
    sub_4B7F30(v5, "Uiart", "Button1", "uiart,button1", (char *)Dst + 1400, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Button2", "uiart,button2", (char *)Dst + 1448, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Button3", "uiart,button3", (char *)Dst + 1496, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Button4", "uiart,button4", (char *)Dst + 1544, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Button5", "uiart,button5", (char *)Dst + 1592, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "MenuTitle", "uiart,mtitle", (char *)Dst + 1640, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "CashBack", "uiart,cashback", (char *)Dst + 1688, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Header1", "uiart,header1", (char *)Dst + 1736, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Header2", "uiart,header2", (char *)Dst + 1784, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Physics", "uiart,physics", (char *)Dst + 1832, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Vision", "uiart,vision", (char *)Dst + 1880, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Cursors", "uiart,cursors", (char *)Dst + 1928, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Warp", "uiart,warp", (char *)Dst + 1976, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "WarFog", "uiart,warfog", (char *)Dst + 2024, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "MainBorder", "uiart,mainb", (char *)Dst + 2072, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Scroll1", "uiart,scrollb1", (char *)Dst + 2120, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Scroll2", "uiart,scrollb2", (char *)Dst + 2168, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Portal", "uiart,portal", (char *)Dst + 2216, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Guage", "uiart,gguage", (char *)Dst + 2264, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "GuageBack", "uiart,gback", (char *)Dst + 2312, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "MessageBorder", "uiart,messageb", (char *)Dst + 2360, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "TinyNumbers", "uiart,tinynum", (char *)Dst + 2408, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "NotepadBorder", "uiart,notepadb", (char *)Dst + 2456, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "NotepadInteriorPlayer", "uiart,notepadi", (char *)Dst + 2504, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "NotepadInteriorInventory", "uiart,notepadi", (char *)Dst + 2552, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "RadarBorder", "uiart,newradar", (char *)Dst + 2600, 0x30u, 1);
    sub_4B7F30(v5, "Uiart", "Logo", "uiart,logo", (char *)Dst + 2648, 0x30u, 1);
    *((_DWORD *)Dst + 674) = sub_4B80F0(v5, "UiartMetrics", "MessageBorderFirst", 1, 1);
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "MessageFill", "0x202020", 1);
    *((_DWORD *)Dst + 675) = v56;
    *((_DWORD *)Dst + 676) = sub_4B80F0(v5, "UiartMetrics", "MessageBorderLeft", 10, 1);
    *((_DWORD *)Dst + 677) = sub_4B80F0(v5, "UiartMetrics", "MessageBorderRight", 10, 1);
    *((_DWORD *)Dst + 678) = sub_4B80F0(v5, "UiartMetrics", "MessageBorderTop", 16, 1);
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "MainFill", "0x202020", 1);
    *((_DWORD *)Dst + 691) = v56;
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "GapFill", "0x7f7f7f", 1);
    *((_DWORD *)Dst + 690) = v56;
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "NotepadFill", "0xffffff", 1);
    *((_DWORD *)Dst + 679) = v56;
    *((_DWORD *)Dst + 682) = sub_4B80F0(v5, "UiartMetrics", "NotepadListBoxLeft", 16, 1);
    *((_DWORD *)Dst + 683) = sub_4B80F0(v5, "UiartMetrics", "NotepadListBoxTop", 20, 1);
    *((_DWORD *)Dst + 684) = sub_4B80F0(v5, "UiartMetrics", "NotepadListBoxBottom", 16, 1);
    *((_DWORD *)Dst + 681) = sub_4B80F0(v5, "UiartMetrics", "NotepadListTextLeft", 16, 1);
    *((_DWORD *)Dst + 680) = sub_4B80F0(v5, "UiartMetrics", "NotepadListTextWidth", 140, 1);
    *((_DWORD *)Dst + 685) = sub_4B80F0(v5, "UiartMetrics", "PlayerListBoxTopHeight", 8, 1);
    *((_DWORD *)Dst + 686) = sub_4B80F0(v5, "UiartMetrics", "PlayerListBoxBottomHeight", 8, 1);
    *((_DWORD *)Dst + 687) = sub_4B80F0(v5, "UiartMetrics", "InventoryListBoxTopHeight", 8, 1);
    *((_DWORD *)Dst + 688) = sub_4B80F0(v5, "UiartMetrics", "InventoryListBoxBottomHeight", 8, 1);
    *((_DWORD *)Dst + 689) = sub_4B80F0(v5, "UiartMetrics", "DisplayEncumbrance", 1, 1);
    *((_DWORD *)Dst + 708) = sub_4B80F0(v5, "UiartMetrics", "MenuBounce", 1, 1);
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "MenuBorderColor", "0x743a99", 1);
    *((_DWORD *)Dst + 692) = v56;
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "MenuFillColor", "0x200020", 1);
    *((_DWORD *)Dst + 693) = v56;
    sub_4B8360(v5, (int)&v56, "UiartMetrics", "ScoreBorderColor", "0x743a99", 1);
    *((_DWORD *)Dst + 694) = v56;
    *((_DWORD *)Dst + 695) = sub_4B80F0(v5, "UiartMetrics", "GuageEnergyX", 21, 1);
    *((_DWORD *)Dst + 696) = sub_4B80F0(v5, "UiartMetrics", "GuageEnergyY", 0, 1);
    *((_DWORD *)Dst + 697) = sub_4B80F0(v5, "UiartMetrics", "GuageEnergyTX", 48, 1);
    *((_DWORD *)Dst + 698) = sub_4B80F0(v5, "UiartMetrics", "GuageEnergyTY", 33, 1);
    *((_DWORD *)Dst + 699) = sub_4B80F0(v5, "UiartMetrics", "GuageHealthX", 73, 1);
    *((_DWORD *)Dst + 700) = sub_4B80F0(v5, "UiartMetrics", "GuageHealthY", 0, 1);
    *((_DWORD *)Dst + 701) = sub_4B80F0(v5, "UiartMetrics", "GuageHealthTX", 100, 1);
    *((_DWORD *)Dst + 702) = sub_4B80F0(v5, "UiartMetrics", "GuageHealthTY", 33, 1);
    *((_DWORD *)Dst + 703) = sub_4B80F0(v5, "UiartMetrics", "GuageUnitX", 125, 1);
    *((_DWORD *)Dst + 704) = sub_4B80F0(v5, "UiartMetrics", "GuageUnitY", 0, 1);
    *((_DWORD *)Dst + 705) = sub_4B80F0(v5, "UiartMetrics", "GuageUnitTX", 152, 1);
    *((_DWORD *)Dst + 706) = sub_4B80F0(v5, "UiartMetrics", "GuageUnitTY", 33, 1);
    *((_WORD *)Dst + 1414) = sub_4B80F0(v5, "UiartMetrics", "GuageFont", 1, 1);
    *((_WORD *)Dst + 1415) = sub_4B80F0(v5, "UiartMetrics", "GuageFontColor", 0, 1);
    *((_WORD *)Dst + 1418) = sub_4B80F0(v5, "UiartMetrics", "MenuFont", 3, 1);
    *((_WORD *)Dst + 1419) = sub_4B80F0(v5, "UiartMetrics", "MenuFontColor", 0, 1);
    *((_WORD *)Dst + 1420) = sub_4B80F0(v5, "UiartMetrics", "MenuSelectFont", 3, 1);
    *((_WORD *)Dst + 1421) = sub_4B80F0(v5, "UiartMetrics", "MenuSelectFontColor", 4, 1);
    *((_WORD *)Dst + 1422) = sub_4B80F0(v5, "UiartMetrics", "MenuTitleFont", 4, 1);
    *((_WORD *)Dst + 1423) = sub_4B80F0(v5, "UiartMetrics", "MenuTitleFontColor", 4, 1);
    *((_WORD *)Dst + 1424) = sub_4B80F0(v5, "UiartMetrics", "MenuDisabledFont", 3, 1);
    *((_WORD *)Dst + 1425) = sub_4B80F0(v5, "UiartMetrics", "MenuDisabledFontColor", 8, 1);
    *((_WORD *)Dst + 1426) = sub_4B80F0(v5, "UiartMetrics", "MenuButtonSize", 3, 1);
    *((_WORD *)Dst + 1427) = sub_4B80F0(v5, "UiartMetrics", "KeystrokeBubbleButtonSize", 2, 1);
    *((_WORD *)Dst + 1428) = sub_4B80F0(v5, "UiartMetrics", "KeystrokeBubbleFont", 2, 1);
    *((_WORD *)Dst + 1429) = sub_4B80F0(v5, "UiartMetrics", "KeystrokeBubbleFontColor", 6, 1);
    *((_WORD *)Dst + 1459) = sub_4B80F0(v5, "UiartMetrics", "FlagStatusBubbleButtonSize", 2, 1);
    *((_WORD *)Dst + 1460) = sub_4B80F0(v5, "UiartMetrics", "FlagStatusBubbleFont", 2, 1);
    *((_WORD *)Dst + 1461) = sub_4B80F0(v5, "UiartMetrics", "FlagStatusBubbleFontColor", 6, 1);
    *((_DWORD *)Dst + 715) = sub_4B80F0(v5, "UiartMetrics", "PlayerListCountFont", 1, 1);
    *((_DWORD *)Dst + 716) = sub_4B80F0(v5, "UiartMetrics", "PlayerListCountFontColor", 2, 1);
    *((_DWORD *)Dst + 717) = sub_4B80F0(v5, "UiartMetrics", "PlayerListCountLocationX", -1, 1);
    *((_DWORD *)Dst + 718) = sub_4B80F0(v5, "UiartMetrics", "PlayerListCountLocationY", 10, 1);
    sub_4B7F30(v5, "UiartMetrics", "PlayerListCountString", "Players: %d", (char *)Dst + 2876, 0x20u, 1);
    *((_WORD *)Dst + 1454) = sub_4B80F0(v5, "UiartMetrics", "ButtonSize", 3, 1);
    *((_WORD *)Dst + 1455) = sub_4B80F0(v5, "UiartMetrics", "ButtonFont", 3, 1);
    *((_WORD *)Dst + 1456) = sub_4B80F0(v5, "UiartMetrics", "ButtonFontColor", 7, 1);
    *((_WORD *)Dst + 1457) = sub_4B80F0(v5, "UiartMetrics", "ButtonHighlightFont", 3, 1);
    *((_WORD *)Dst + 1458) = sub_4B80F0(v5, "UiartMetrics", "ButtonHighlightFontColor", 4, 1);
    sub_4B7F30(v5, "Uiwav", "Melt", "uiwav,melt", (char *)Dst, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "ChangeIn", "uiwav,changein", (char *)Dst + 48, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "RClick", "uiwav,rclick", (char *)Dst + 96, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "CantFire", "uiwav,cantfire", (char *)Dst + 144, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "PickMenu", "uiwav,pickmenu", (char *)Dst + 192, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "WarpIn", "uiwav,warpin", (char *)Dst + 240, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "NoAmmo", "uiwav,noammo", (char *)Dst + 288, 0x30u, 1);
    sub_4B7F30(v5, "Uiwav", "Pickup", "uiwav,pickup", (char *)Dst + 336, 0x30u, 1);
    sub_4B7F30(v5, "Event", "Hold1", &byte_519022, (char *)Dst + 9162, 0x400u, 1);
    sub_4B7F30(v5, "Event", "Hold2", &byte_519023, (char *)Dst + 10186, 0x400u, 1);
    sub_4B7F30(v5, "Event", "Hold3", &byte_51903E, (char *)Dst + 11210, 0x400u, 1);
    sub_4B7F30(v5, "Event", "Hold4", &byte_51903F, (char *)Dst + 12234, 0x400u, 1);
    sub_4B7F30(v5, "Event", "StartGame", "warp,reset", (char *)Dst + 5066, 0x400u, 1);
    sub_4B7F30(v5, "Event", "EndGame", &byte_51904A, (char *)Dst + 6090, 0x400u, 1);
    sub_4B7F30(v5, "Event", "SoonGame", &byte_51904B, (char *)Dst + 7114, 0x400u, 1);
    sub_4B7F30(v5, "Event", "SysopWipe", "EventSelfWipe", (char *)Dst + 8138, 0x400u, 1);
    sub_4B7F30(v5, "Event", "SelfWipe", "wipescore,wipeskill,wipeinv,reset,teamEvent", (char *)Dst + 13258, 0x400u, 1);
    sub_4B7F30(v5, "Event", "FirstTimeInvSetup", "setcash=0,wipeinv", (char *)Dst + 15306, 0x400u, 1);
    sub_4B7F30(v5, "Event", "FirstTimeSkillSetup", "setexp=0,wipeskill", (char *)Dst + 14282, 0x400u, 1);
    sub_4B7F30(v5, "Event", "KilledTeam", &byte_51905E, (char *)Dst + 16330, 0x400u, 1);
    sub_4B7F30(v5, "Event", "KilledEnemy", &byte_51905F, (char *)Dst + 17354, 0x400u, 1);
    sub_4B7F30(v5, "Event", "KilledByTeam", "warp=0,reset", (char *)Dst + 18378, 0x400u, 1);
    sub_4B7F30(v5, "Event", "KilledByEnemy", "warp=0,reset", (char *)Dst + 19402, 0x400u, 1);
    sub_4B7F30(v5, "Event", "EnterSpawnNoScore", &byte_51906A, (char *)Dst + 20426, 0x400u, 1);
    sub_4B7F30(v5, "Event", "ChangeDefaultVehicle", "vehicleEvent", (char *)Dst + 21450, 0x400u, 1);
    sub_4B7F30(v5, "Event", "JoinTeam", "teamevent", (char *)Dst + 22474, 0x400u, 1);
    sub_4B7F30(v5, "Event", "ManualJoinTeam", "EventJoinTeam", (char *)Dst + 23498, 0x400u, 1);
    sub_4B7F30(v5, "Event", "ExitSpectatorMode", "warp,reset", (char *)Dst + 24522, 0x400u, 1);
    *(_DWORD *)((char *)Dst + 49398) = sub_4B80F0(v5, "WarpGroup", "InitialEntry", 0, 1);
    *(_DWORD *)((char *)Dst + 49402) = sub_4B80F0(v5, "WarpGroup", "LostVehicle", 0, 1);
    *(_DWORD *)((char *)Dst + 49406) = sub_4B80F0(v5, "WarpGroup", "BallEntry", -1, 1);
    *(_DWORD *)((char *)Dst + 49410) = sub_4B80F0(v5, "WarpGroup", "BallEntryRadius", 0, 1);
    *((_DWORD *)Dst + 100) = sub_4B80F0(v5, "Rts", "Game", 0, 1);
    *((_DWORD *)Dst + 101) = sub_4B80F0(v5, "Rts", "StartDelay", 120, 1);
    *((_DWORD *)Dst + 102) = sub_4B80F0(v5, "Rts", "MinimumPlayers", 10, 1);
    *((_DWORD *)Dst + 103) = sub_4B80F0(v5, "Rts", "StartBubble", 0, 1);
    *((_DWORD *)Dst + 96) = sub_4B80F0(v5, "Rts", "VictoryPointReward", 1000, 1);
    *((_DWORD *)Dst + 97) = sub_4B80F0(v5, "Rts", "VictoryExperienceReward", 0, 1);
    *((_DWORD *)Dst + 98) = sub_4B80F0(v5, "Rts", "VictoryCashReward", 0, 1);
    *((_DWORD *)Dst + 99) = sub_4B80F0(v5, "Rts", "VictoryBong", 0, 1);
    *((_DWORD *)Dst + 104) = sub_4B80F0(v5, "Rts", "LossPointReward", 0, 1);
    *((_DWORD *)Dst + 105) = sub_4B80F0(v5, "Rts", "LossExperienceReward", 0, 1);
    *((_DWORD *)Dst + 106) = sub_4B80F0(v5, "Rts", "LossCashReward", 0, 1);
    v8 = 0;
    v9 = (int *)((char *)Dst + 428);
    do
    {
      sprintf(&Dest, "InitialState%d", v8);
      *v9 = sub_4B80F0(v5, "RtsStateDefault", &Dest, 0, 1);
      ++v8;
      ++v9;
    }
    while ( v8 < 8 );
    v10 = 0;
    v58 = (char *)Dst + 460;
    v11 = (char *)Dst + 524;
    do
    {
      sprintf(&Dest, "Inventory%d", v10);
      *v11 = sub_4B80F0(v5, "TeamDefault", &Dest, 0, 1);
      sprintf(&Dest, "Quantity%d", v10);
      v12 = sub_4B80F0(v5, "TeamDefault", &Dest, 0, 1);
      v13 = v58;
      *(_DWORD *)v58 = v12;
      ++v10;
      ++v11;
      v58 = v13 + 4;
    }
    while ( v10 < 16 );
    v14 = 0;
    v15 = (char *)Dst + 30102;
    do
    {
      sprintf(&Dest, "Name%d", v14);
      sub_4B7F30(v5, "DamageType", &Dest, (&off_53A7C8)[v14++], v15, 0x20u, 1);
      v15 += 32;
    }
    while ( v14 < 6 );
    v16 = 1;
    v17 = (int *)((char *)Dst + 4894);
    v58 = (char *)30;
    do
    {
      sprintf(&Str2, "Limit%d", v16);
      *(v17 - 30) = sub_4B80F0(v5, "HeldCategory", &Str2, -1, 1);
      sprintf(&Str2, "ExtendedLimit%d", v16);
      *v17 = sub_4B80F0(v5, "HeldCategory", &Str2, -1, 1);
      ++v16;
      ++v17;
      --v58;
    }
    while ( v58 );
    *((_DWORD *)Dst + 160) = sub_4B80F0(v5, "Owner", "Enable", 1, 1);
    *((_DWORD *)Dst + 161) = sub_4B80F0(v5, "Owner", "GetBall", 0, 1);
    *((_DWORD *)Dst + 162) = sub_4B80F0(v5, "Owner", "AddBall", 0, 1);
    *((_DWORD *)Dst + 163) = sub_4B80F0(v5, "Owner", "Kill", 0, 1);
    *((_DWORD *)Dst + 164) = sub_4B80F0(v5, "Owner", "Lock", 0, 1);
    *((_DWORD *)Dst + 165) = sub_4B80F0(v5, "Owner", "Spec", 0, 1);
    *((_DWORD *)Dst + 166) = sub_4B80F0(v5, "Owner", "Info", 0, 1);
    *((_DWORD *)Dst + 167) = sub_4B80F0(v5, "Owner", "Arena", 0, 1);
    *((_DWORD *)Dst + 168) = sub_4B80F0(v5, "Owner", "Warp", 0, 1);
    *((_DWORD *)Dst + 169) = sub_4B80F0(v5, "Owner", "Summon", 0, 1);
    *((_DWORD *)Dst + 146) = sub_4B80F0(v5, "Owner", "Prize", 0, 1);
    *((_DWORD *)Dst + 147) = sub_4B80F0(v5, "Owner", "Cash", 0, 1);
    *((_DWORD *)Dst + 148) = sub_4B80F0(v5, "Owner", "Points", 0, 1);
    *((_DWORD *)Dst + 149) = sub_4B80F0(v5, "Owner", "Experience", 0, 1);
    *((_DWORD *)Dst + 150) = sub_4B80F0(v5, "Owner", "Grant", 0, 1);
    *((_DWORD *)Dst + 151) = sub_4B80F0(v5, "Owner", "Shutup", 0, 1);
    *((_DWORD *)Dst + 152) = sub_4B80F0(v5, "Owner", "Timer", 0, 1);
    *((_DWORD *)Dst + 153) = sub_4B80F0(v5, "Owner", "Team", 0, 1);
    *((_DWORD *)Dst + 155) = sub_4B80F0(v5, "Owner", "Restart", 0, 1);
    *((_DWORD *)Dst + 154) = sub_4B80F0(v5, "Owner", "Scramble", 0, 1);
    *((_DWORD *)Dst + 156) = sub_4B80F0(v5, "Owner", "Wipe", 0, 1);
    *((_DWORD *)Dst + 157) = sub_4B80F0(v5, "Owner", "Profile", 0, 1);
    *((_DWORD *)Dst + 158) = sub_4B80F0(v5, "Owner", "Energy", 0, 1);
    *((_DWORD *)Dst + 159) = sub_4B80F0(v5, "Owner", "Flags", 0, 1);
    *((_DWORD *)Dst + 140) = sub_4B80F0(v5, "Jackpot", "Start", 0, 1);
    *((_DWORD *)Dst + 141) = sub_4B80F0(v5, "Jackpot", "TrickleGrow", 0, 1);
    *((_DWORD *)Dst + 142) = sub_4B80F0(v5, "Jackpot", "Bubble", -1, 1);
    *((_DWORD *)Dst + 143) = sub_4B80F0(v5, "Jackpot", "BubbleDelay", 30, 1);
    *((_DWORD *)Dst + 144) = sub_4B80F0(v5, "Jackpot", "KillRewardPercentage", 0, 1);
    *((_DWORD *)Dst + 145) = sub_4B80F0(v5, "Jackpot", "KillFixed", 0, 1);
    *((_DWORD *)Dst + 741) = sub_4B80F0(v5, "Arena", "MaxFrameStall", 100, 1);
    *((_DWORD *)Dst + 754) = sub_4B80F0(v5, "Arena", "QueueEntryRequests", 0, 1);
    *((_DWORD *)Dst + 758) = sub_4B80F0(v5, "Arena", "QueueEntryBubble", -1, 1);
    *((_DWORD *)Dst + 759) = sub_4B80F0(v5, "Arena", "QueueEntryDeathCount", 0, 1);
    *((_DWORD *)Dst + 761) = sub_4B80F0(v5, "Arena", "PruneDropRadius", 128, 1);
    *((_DWORD *)Dst + 760) = sub_4B80F0(v5, "Arena", "DoubleKillDelay", 0, 1);
    *((_DWORD *)Dst + 755) = sub_4B80F0(v5, "Arena", "AllowSkillPurchaseInVehicle", 0, 1);
    *((_WORD *)Dst + 1471) = sub_4B80F0(v5, "Arena", "DeathForceUtilityOff", 1, 1);
    *((_DWORD *)Dst + 756) = sub_4B80F0(v5, "Arena", "SkillScreenEnergyNeeded", 0, 1);
    *((_DWORD *)Dst + 757) = sub_4B80F0(v5, "Arena", "SkillScreenExists", 1, 1);
    *((_DWORD *)Dst + 762) = sub_4B80F0(v5, "Arena", "StoreScreenExists", 1, 1);
    *((_DWORD *)Dst + 763) = sub_4B80F0(v5, "Arena", "BannerRequestTime", 300, 1);
    *((_DWORD *)Dst + 766) = sub_4B80F0(v5, "Arena", "AllowInfo", 1, 1);
    *((_DWORD *)Dst + 767) = sub_4B80F0(v5, "Arena", "ShowBounty", 1, 1);
    *((_DWORD *)Dst + 743) = sub_4B80F0(v5, "Arena", "AllowManualTeamSwitch", 1, 1);
    *(_DWORD *)((char *)Dst + 3838) = sub_4B80F0(v5, "Arena", "PrizeKill", 0, 1);
    *((_DWORD *)Dst + 744) = sub_4B80F0(v5, "Arena", "FrequencyMax", 9999, 1);
    *((_DWORD *)Dst + 745) = sub_4B80F0(v5, "Arena", "ForceEvenTeams", 0, 1);
    *((_DWORD *)Dst + 746) = sub_4B80F0(v5, "Arena", "ForceSwitchEvenTeams", 0, 1);
    *((_DWORD *)Dst + 747) = sub_4B80F0(v5, "Arena", "MaxPerFrequency", 6, 1);
    *((_DWORD *)Dst + 748) = sub_4B80F0(v5, "Arena", "DesiredFrequencies", 2, 1);
    *((_DWORD *)Dst + 768) = sub_4B80F0(v5, "Arena", "AllowPrivateFrequencies", 1, 1);
    *((_DWORD *)Dst + 749) = sub_4B80F0(v5, "Arena", "TeamVisionDistance", 1200, 1);
    *((_DWORD *)Dst + 750) = sub_4B80F0(v5, "Arena", "SpectatorVehicleId", 1, 1);
    *((_DWORD *)Dst + 751) = sub_4B80F0(v5, "Arena", "SpectatorStore", 1, 1);
    *((_DWORD *)Dst + 752) = sub_4B80F0(v5, "Arena", "SpectatorSkills", 1, 1);
    *((_DWORD *)Dst + 753) = sub_4B80F0(v5, "Arena", "SpectatorVisualFrequency", -1, 1);
    *((_DWORD *)Dst + 769) = sub_4B80F0(v5, "Arena", "SuicidesAllowed", 0, 1);
    *((_DWORD *)Dst + 770) = sub_4B80F0(v5, "Arena", "TeamKillsAllowed", 1, 1);
    *((_DWORD *)Dst + 764) = sub_4B80F0(v5, "Arena", "ItemPickupDistance", 192, 1);
    *((_DWORD *)Dst + 765) = sub_4B80F0(v5, "Arena", "VehicleGetInDistance", 192, 1);
    *((_DWORD *)Dst + 771) = sub_4B80F0(v5, "Arena", "StartInSpectator", 0, 1);
    *(_DWORD *)((char *)Dst + 3842) = sub_4B80F0(v5, "Arena", "TurretCashSharePercent", 0, 1);
    *(_DWORD *)((char *)Dst + 3846) = sub_4B80F0(v5, "Arena", "TurretExperienceSharePercent", 0, 1);
    *(_DWORD *)((char *)Dst + 3850) = sub_4B80F0(v5, "Arena", "TurretPointsSharePercent", 0, 1);
    *(_DWORD *)((char *)Dst + 3854) = sub_4B80F0(v5, "Arena", "InactivityTimeout", 180, 1);
    *(_DWORD *)((char *)Dst + 3858) = sub_4B80F0(v5, "Arena", "PrivateSpawnsKeepScore", 0, 1);
    *(_DWORD *)((char *)Dst + 3862) = sub_4B80F0(v5, "Arena", "MinimumKeepScorePublic", 0, 1);
    *(_DWORD *)((char *)Dst + 3866) = sub_4B80F0(v5, "Arena", "MinimumKeepScorePrivate", 0, 1);
    *(_DWORD *)((char *)Dst + 3870) = sub_4B80F0(v5, "Arena", "MaxPlayers", 200, 1);
    *(_DWORD *)((char *)Dst + 3874) = sub_4B80F0(v5, "Arena", "PlayingMax", 60, 1);
    *(_DWORD *)((char *)Dst + 3878) = sub_4B80F0(v5, "Arena", "PlayingDesired", 50, 1);
    *((_DWORD *)Dst + 731) = sub_4B80F0(v5, "Arena", "ScrambleTeams", 0, 1);
    *((_DWORD *)Dst + 732) = sub_4B80F0(v5, "Arena", "SpecsSeeEnergy", 0, 1);
    *((_DWORD *)Dst + 733) = sub_4B80F0(v5, "Arena", "FriendlySeeEnergy", 0, 1);
    *((_DWORD *)Dst + 734) = sub_4B80F0(v5, "Arena", "EnemySeeEnergy", 0, 1);
    *((_DWORD *)Dst + 736) = sub_4B80F0(v5, "Arena", "PointBlankDamageMultiplier", 1000, 1);
    *((_DWORD *)Dst + 737) = sub_4B80F0(v5, "Arena", "SpectatorEnergyAmount", 250000, 1);
    *((_DWORD *)Dst + 738) = sub_4B80F0(v5, "Arena", "DoubleWarpDelay", 100, 1);
    *((_DWORD *)Dst + 739) = sub_4B80F0(v5, "Arena", "StartingSoonTime", 20, 1);
    *((_DWORD *)Dst + 740) = sub_4B80F0(v5, "Arena", "DeleteWeaponsOnClassChange", 0, 1);
    sub_4B7F30(v5, "Arena", "ExitSpectatorLogic", &byte_51906B, (char *)Dst + 3088, 0xFAu, 1);
    sub_4B7F30(v5, "Arena", "BannerLogic", &byte_51907E, (char *)Dst + 3338, 0xFAu, 1);
    sub_4B7F30(
      v5,
      "Arena",
      "ExitSpectatorMessage",
      "You must pick a skill before you are allowed to join the game. Press F11 to pick a skill.",
      (char *)Dst + 3588,
      0xFAu,
      1);
    *((_WORD *)Dst + 1470) = sub_4B80F0(v5, "Arena", "ExitSpectatorToggleSkills", 0, 1);
    *((_DWORD *)Dst + 742) = sub_4B80F0(v5, "Arena", "TeamSwitchMinEnergy", -1, 1);
    *(_DWORD *)((char *)Dst + 3934) = sub_4B80F0(v5, "Stat", "DisplayTeamBreakdown", 0, 1);
    *(_DWORD *)((char *)Dst + 3938) = sub_4B80F0(v5, "Stat", "DisplayIndividualBreakdown", 0, 1);
    *(_DWORD *)((char *)Dst + 3942) = sub_4B80F0(v5, "Stat", "DisplayGameTimeAtEnd", 1, 1);
    *(_DWORD *)((char *)Dst + 3946) = sub_4B80F0(v5, "Stat", "DisplayTeamBubble", -1, 1);
    *(_DWORD *)((char *)Dst + 3950) = sub_4B80F0(v5, "Stat", "DisplayIndividualBubble", -1, 1);
    *(_DWORD *)((char *)Dst + 3954) = sub_4B80F0(v5, "Stat", "BubbleUpdateDelay", 30, 1);
    *(_DWORD *)((char *)Dst + 3958) = sub_4B80F0(v5, "Stat", "TrackDaily", 1, 1);
    *(_DWORD *)((char *)Dst + 3962) = sub_4B80F0(v5, "Stat", "TrackWeekly", 1, 1);
    *(_DWORD *)((char *)Dst + 3966) = sub_4B80F0(v5, "Stat", "TrackMonthly", 1, 1);
    *(_DWORD *)((char *)Dst + 3970) = sub_4B80F0(v5, "Stat", "TrackYearly", 1, 1);
    *(_DWORD *)((char *)Dst + 5014) = sub_4B80F0(v5, "StartGame", "PrizeReset", 0, 1);
    *(_DWORD *)((char *)Dst + 5018) = sub_4B80F0(v5, "StartGame", "VehicleReset", 0, 1);
    *(_DWORD *)((char *)Dst + 5022) = sub_4B80F0(v5, "StartGame", "InitialHides", 0, 1);
    *(_DWORD *)((char *)Dst + 5030) = sub_4B80F0(v5, "StartGame", "ResetInventory", 0, 1);
    *(_DWORD *)((char *)Dst + 5034) = sub_4B80F0(v5, "StartGame", "ResetCharacter", 0, 1);
    *(_DWORD *)((char *)Dst + 5026) = sub_4B80F0(v5, "StartGame", "ClearProjectiles", 0, 1);
    *(_DWORD *)((char *)Dst + 25926) = sub_4B80F0(v5, "Rpg", "SkillCostMethod", 0, 1);
    *(_DWORD *)((char *)Dst + 25930) = sub_4B80F0(v5, "Rpg", "AttributeCostMethod", 0, 1);
    *(_DWORD *)((char *)Dst + 25934) = sub_4B80F0(v5, "Rpg", "SkillBaseCost", 0, 1);
    sub_4B8220((int)"Rpg", (int)"SkillCountPower", 1.0, 1);
    *(double *)((char *)Dst + 25910) = 1.0;
    *(_DWORD *)((char *)Dst + 25938) = sub_4B80F0(v5, "Rpg", "AttributeBaseCost", 0, 1);
    sub_4B8220((int)"Rpg", (int)"AttributeCountPower", 1.0, 1);
    *(double *)((char *)Dst + 25918) = 1.0;
    *(_DWORD *)((char *)Dst + 29582) = sub_4B80F0(v5, "PublicProfile", "DefaultVItemId", 0, 1);
    *(_DWORD *)((char *)Dst + 29610) = sub_4B80F0(v5, (char *)&off_51ADD8, "DefaultDistance", 32, 1);
    *(_DWORD *)((char *)Dst + 29614) = sub_4B80F0(v5, (char *)&off_51ADEC, "DefaultAngle", 120, 1);
    *((_WORD *)Dst + 14809) = sub_4B80F0(v5, (char *)&off_51ADFC, "DefaultXray", 0, 1);
    *((_WORD *)Dst + 14810) = sub_4B80F0(v5, (char *)&off_51AE0C, "TeamSharing", 1, 1);
    v58 = 0;
    v57 = -12;
    v18 = (char *)Dst + 29630;
    do
    {
      sprintf(&v65, "LosType%d", v58);
      v19 = 0;
      do
      {
        sprintf(&v66, "SeeType%d", v19);
        *((_BYTE *)v18 + v19++ - 8) = sub_4B80F0(v5, &v65, &v66, 1, 1);
      }
      while ( v19 < 8 );
      v20 = v58;
      if ( (signed int)v58 >= 3 )
        v21 = v57;
      else
        v21 = -1;
      *v18 = sub_4B80F0(v5, &v65, "VisibleDistance", v21, 1);
      v22 = v20 == (char *)1 || v20 == (char *)2;
      v18[1] = sub_4B80F0(v5, &v65, "Solid", v22, 1);
      v18 += 6;
      v24 = __OFSUB__(v57 + 4, 20);
      v23 = v57 - 16 < 0;
      v58 = v20 + 1;
      v57 += 4;
    }
    while ( v23 ^ v24 );
    *(_DWORD *)((char *)Dst + 29730) = sub_4B80F0(v5, "Soul", "UtilitySlots", 3, 1);
    *(_DWORD *)((char *)Dst + 29734) = sub_4B80F0(v5, "Soul", "UtilitySlots1-99", 10, 1);
    *(_DWORD *)((char *)Dst + 29738) = sub_4B80F0(v5, "Soul", "UtilitySlots100-199", 10, 1);
    *(_DWORD *)((char *)Dst + 29742) = sub_4B80F0(v5, "Soul", "UtilitySlots200-299", 10, 1);
    *(_DWORD *)((char *)Dst + 29746) = sub_4B80F0(v5, "Soul", "UtilitySlots300-399", 10, 1);
    *(_DWORD *)((char *)Dst + 29750) = sub_4B80F0(v5, "Soul", "UtilitySlots400-499", 10, 1);
    *(_DWORD *)((char *)Dst + 29754) = sub_4B80F0(v5, "Soul", "CombatAwarenessTime", 400, 1);
    *(_DWORD *)((char *)Dst + 29718) = sub_4B80F0(v5, "Soul", "EnergyDefaultMax", 500000, 1);
    *(_DWORD *)((char *)Dst + 29722) = sub_4B80F0(v5, "Soul", "EnergyDefaultRate", 100, 1);
    *(_DWORD *)((char *)Dst + 29726) = sub_4B80F0(v5, "Soul", "EnergyDefaultStart", -1, 1);
    *(_DWORD *)((char *)Dst + 29770) = sub_4B80F0(v5, "Soul", "EnergyShieldMode", 1, 1);
    *(_DWORD *)((char *)Dst + 29758) = sub_4B80F0(v5, "Soul", "WeightNormalMax", 25000, 1);
    *(_DWORD *)((char *)Dst + 29762) = sub_4B80F0(v5, "Soul", "WeightStopMax", 60000, 1);
    *(_DWORD *)((char *)Dst + 29766) = sub_4B80F0(v5, "Soul", "WeightPrunePercentage", -1, 1);
    *(_DWORD *)((char *)Dst + 29786) = sub_4B80F0(v5, "Vehicle", "ExplodeItemDistance", 1500, 1);
    *(_DWORD *)((char *)Dst + 29790) = sub_4B80F0(v5, "Vehicle", "PhysicsDelay", 400, 1);
    *(_DWORD *)((char *)Dst + 29794) = sub_4B80F0(v5, "Vehicle", "WarpDamageIgnoreTime", 100, 1);
    *(_DWORD *)((char *)Dst + 29798) = sub_4B80F0(v5, "Vehicle", "HitTriggerDelay", 200, 1);
    *(_DWORD *)((char *)Dst + 29802) = sub_4B80F0(v5, "Vehicle", "WarpGetInDelay", 200, 1);
    *(_DWORD *)((char *)Dst + 29806) = sub_4B80F0(v5, "Vehicle", "ComputerProduceInParallel", 0, 1);
    *(_DWORD *)((char *)Dst + 29810) = sub_4B80F0(v5, "Vehicle", "ComputerExplosionDamageComputer", 0, 1);
    *(_DWORD *)((char *)Dst + 29774) = sub_4B80F0(v5, "Vehicle", "InheritSpeedOnDefaultChange", 0, 1);
    *(_DWORD *)((char *)Dst + 29814) = sub_4B80F0(v5, "Vehicle", "EnergyOnDefaultChange", -1, 1);
    *(_DWORD *)((char *)Dst + 29778) = sub_4B80F0(v5, "Vehicle", "UnownedPositionUseTeamColor", 0, 1);
    *(_DWORD *)((char *)Dst + 29818) = sub_4B80F0(v5, "Vehicle", "ComputerProduceLocation", 0, 1);
    *(_DWORD *)((char *)Dst + 29822) = sub_4B80F0(v5, "Vehicle", "ComputerProduceRadius", 250, 1);
    *(_DWORD *)((char *)Dst + 29782) = sub_4B80F0(v5, "Vehicle", "ComputerProduceForceDriver", 1, 1);
    *(_DWORD *)((char *)Dst + 29606) = sub_4B80F0(v5, "Sound", "AttemptTime", 50, 1);
    *(_DWORD *)((char *)Dst + 31554) = sub_4B80F0(v5, "Door", "AttemptTime", 500, 1);
    *(_DWORD *)((char *)Dst + 31558) = sub_4B80F0(v5, "Door", "RandomControlDelay", 1000, 1);
    *(_DWORD *)((char *)Dst + 29586) = sub_4B80F0(v5, "Timing", "SendPositionDelay", 12, 1);
    *(_DWORD *)((char *)Dst + 29590) = sub_4B80F0(v5, "Timing", "ParentSendPositionDelay", 8, 1);
    *(_DWORD *)((char *)Dst + 29594) = sub_4B80F0(v5, "Timing", "EnterDelay", 500, 1);
    *(_DWORD *)((char *)Dst + 29598) = sub_4B80F0(v5, "Timing", "SoonToFireTickTolerance", 5, 1);
    *(_DWORD *)((char *)Dst + 29602) = sub_4B80F0(v5, "Timing", "VectorTolerance", 150, 1);
    sub_4B7F30(v5, "QuickSkill", "BackGraphic", &byte_51907F, (char *)Dst + 25610, 0x54u, 1);
    sub_4B7F30(v5, "QuickSkill", "SelectGraphic", &byte_51908A, (char *)Dst + 25694, 0x54u, 1);
    sub_4B7F30(v5, "QuickSkill", "CancelGraphic", &byte_51908B, (char *)Dst + 25778, 0x54u, 1);
    *(_DWORD *)((char *)Dst + 25546) = sub_4B80F0(v5, "QuickSkill", "ListRectLeft", 0, 1);
    *(_DWORD *)((char *)Dst + 25550) = sub_4B80F0(v5, "QuickSkill", "ListRectTop", 0, 1);
    *(_DWORD *)((char *)Dst + 25554) = sub_4B80F0(v5, "QuickSkill", "ListRectRight", 0, 1);
    *(_DWORD *)((char *)Dst + 25558) = sub_4B80F0(v5, "QuickSkill", "ListRectBottom", 0, 1);
    *(_DWORD *)((char *)Dst + 25578) = sub_4B80F0(v5, "QuickSkill", "SelectRectLeft", 0, 1);
    *(_DWORD *)((char *)Dst + 25582) = sub_4B80F0(v5, "QuickSkill", "SelectRectTop", 0, 1);
    *(_DWORD *)((char *)Dst + 25586) = sub_4B80F0(v5, "QuickSkill", "SelectRectRight", 0, 1);
    *(_DWORD *)((char *)Dst + 25590) = sub_4B80F0(v5, "QuickSkill", "SelectRectBottom", 0, 1);
    *(_DWORD *)((char *)Dst + 25594) = sub_4B80F0(v5, "QuickSkill", "CancelRectLeft", 0, 1);
    *(_DWORD *)((char *)Dst + 25598) = sub_4B80F0(v5, "QuickSkill", "CancelRectTop", 0, 1);
    *(_DWORD *)((char *)Dst + 25602) = sub_4B80F0(v5, "QuickSkill", "CancelRectRight", 0, 1);
    *(_DWORD *)((char *)Dst + 25606) = sub_4B80F0(v5, "QuickSkill", "CancelRectBottom", 0, 1);
    *(_DWORD *)((char *)Dst + 25562) = sub_4B80F0(v5, "QuickSkill", "TextRectLeft", 0, 1);
    *(_DWORD *)((char *)Dst + 25566) = sub_4B80F0(v5, "QuickSkill", "TextRectTop", 0, 1);
    *(_DWORD *)((char *)Dst + 25570) = sub_4B80F0(v5, "QuickSkill", "TextRectRight", 0, 1);
    *(_DWORD *)((char *)Dst + 25574) = sub_4B80F0(v5, "QuickSkill", "TextRectBottom", 0, 1);
    *(_DWORD *)((char *)Dst + 25862) = sub_4B80F0(v5, "QuickSkill", "SelectX", 0, 1);
    *(_DWORD *)((char *)Dst + 25866) = sub_4B80F0(v5, "QuickSkill", "SelectY", 0, 1);
    *(_DWORD *)((char *)Dst + 25870) = sub_4B80F0(v5, "QuickSkill", "CancelX", 0, 1);
    *(_DWORD *)((char *)Dst + 25874) = sub_4B80F0(v5, "QuickSkill", "CancelY", 0, 1);
    *(_DWORD *)((char *)Dst + 25878) = sub_4B80F0(v5, "QuickSkill", "ThumbX", 0, 1);
    *(_DWORD *)((char *)Dst + 25882) = sub_4B80F0(v5, "QuickSkill", "ThumbY", 0, 1);
    sub_4B8360(v5, (int)&v56, "QuickSkill", "SelectColor", "0x00ff00", 1);
    *(_DWORD *)((char *)Dst + 25886) = v56;
    *(_DWORD *)((char *)Dst + 25890) = sub_4B80F0(v5, "QuickSkill", "ListCenter", 0, 1);
    *(_DWORD *)((char *)Dst + 25894) = sub_4B80F0(v5, "QuickSkill", "AutoEnterGame", 1, 1);
    *((_WORD *)Dst + 12949) = sub_4B80F0(v5, "QuickSkill", "ListFont", 2, 1);
    *((_WORD *)Dst + 12950) = sub_4B80F0(v5, "QuickSkill", "ListFontColor", 0, 1);
    *((_WORD *)Dst + 12951) = sub_4B80F0(v5, "QuickSkill", "ListSelectFont", 2, 1);
    *((_WORD *)Dst + 12952) = sub_4B80F0(v5, "QuickSkill", "ListSelectFontColor", 1, 1);
    *((_WORD *)Dst + 12953) = sub_4B80F0(v5, "QuickSkill", "TextFont", 2, 1);
    *((_WORD *)Dst + 12954) = sub_4B80F0(v5, "QuickSkill", "TextFontColor", 0, 1);
    sub_4B8360(v5, (int)&v56, "Radar", "ColorSoccerBall", "0xffffff", 1);
    *(_DWORD *)((char *)Dst + 31474) = v56;
    sub_4B8360(v5, (int)&v56, "Radar", "ColorSelf", "0x00ff00", 1);
    *(_DWORD *)((char *)Dst + 31478) = v56;
    sub_4B8360(v5, (int)&v56, "Radar", "ColorFriendly", "0xffff00", 1);
    *(_DWORD *)((char *)Dst + 31482) = v56;
    sub_4B8360(v5, (int)&v56, "Radar", "ColorEnemy", "0xff4040", 1);
    *(_DWORD *)((char *)Dst + 31486) = v56;
    sub_4B8360(v5, (int)&v56, "Radar", "ColorFlag", "0xffffff", 1);
    *(_DWORD *)((char *)Dst + 31490) = v56;
    *(_DWORD *)((char *)Dst + 31494) = sub_4B80F0(v5, "Radar", "FontColorSelf", 2, 1);
    *(_DWORD *)((char *)Dst + 31498) = sub_4B80F0(v5, "Radar", "FontColorFriendly", 4, 1);
    *(_DWORD *)((char *)Dst + 31502) = sub_4B80F0(v5, "Radar", "FontColorEnemy", 1, 1);
    *(_DWORD *)((char *)Dst + 47638) = sub_4B80F0(v5, "Attribute", "Health", 0, 1);
    *(_DWORD *)((char *)Dst + 47642) = sub_4B80F0(v5, "Attribute", "HealthRatio", 1000, 1);
    *(_DWORD *)((char *)Dst + 47646) = sub_4B80F0(v5, "Attribute", "Energy", 0, 1);
    *(_DWORD *)((char *)Dst + 47650) = sub_4B80F0(v5, "Attribute", "EnergyRatio", 50, 1);
    *(_DWORD *)((char *)Dst + 47654) = sub_4B80F0(v5, "Attribute", "Weight", 0, 1);
    *(_DWORD *)((char *)Dst + 47658) = sub_4B80F0(v5, "Attribute", "WeightRatio", 2000, 1);
    *(_DWORD *)((char *)Dst + 47662) = sub_4B80F0(v5, "Attribute", "Thrust", 0, 1);
    *(_DWORD *)((char *)Dst + 47666) = sub_4B80F0(v5, "Attribute", "ThrustRatio", 100, 1);
    *(_DWORD *)((char *)Dst + 47670) = sub_4B80F0(v5, "Attribute", "TopSpeed", 0, 1);
    *(_DWORD *)((char *)Dst + 47674) = sub_4B80F0(v5, "Attribute", "TopSpeedRatio", 100, 1);
    *(_DWORD *)((char *)Dst + 47562) = sub_4B80F0(v5, "Bounty", "Start", 10, 1);
    *(_DWORD *)((char *)Dst + 47570) = sub_4B80F0(v5, "Bounty", "PercentToKillerBounty", 50, 1);
    *(_DWORD *)((char *)Dst + 47566) = sub_4B80F0(v5, "Bounty", "PercentToAssistBounty", 50, 1);
    *(_DWORD *)((char *)Dst + 47574) = sub_4B80F0(v5, "Bounty", "FixedToKillerBounty", 0, 1);
    *(_DWORD *)((char *)Dst + 47578) = sub_4B80F0(v5, "Point", "ShareRadius", 500, 1);
    *(_DWORD *)((char *)Dst + 47582) = sub_4B80F0(v5, "Point", "SharePercent", 100, 1);
    *(_DWORD *)((char *)Dst + 47586) = sub_4B80F0(v5, "Point", "PercentOfKiller", 0, 1);
    *(_DWORD *)((char *)Dst + 47590) = sub_4B80F0(v5, "Point", "PercentOfTarget", 1000, 1);
    *(_DWORD *)((char *)Dst + 47594) = sub_4B80F0(v5, "Point", "KillReward", 0, 1);
    *(_DWORD *)((char *)Dst + 47598) = sub_4B80F0(v5, "Cash", "ShareRadius", 500, 1);
    *(_DWORD *)((char *)Dst + 47602) = sub_4B80F0(v5, "Cash", "SharePercent", 100, 1);
    *(_DWORD *)((char *)Dst + 47606) = sub_4B80F0(v5, "Cash", "PercentOfKiller", 0, 1);
    *(_DWORD *)((char *)Dst + 47610) = sub_4B80F0(v5, "Cash", "PercentOfTarget", 1000, 1);
    *(_DWORD *)((char *)Dst + 47614) = sub_4B80F0(v5, "Cash", "KillReward", 0, 1);
    *(_DWORD *)((char *)Dst + 47618) = sub_4B80F0(v5, "Experience", "ShareRadius", 500, 1);
    *(_DWORD *)((char *)Dst + 47622) = sub_4B80F0(v5, "Experience", "SharePercent", 100, 1);
    *(_DWORD *)((char *)Dst + 47626) = sub_4B80F0(v5, "Experience", "PercentOfKiller", 0, 1);
    *(_DWORD *)((char *)Dst + 47630) = sub_4B80F0(v5, "Experience", "PercentOfTarget", 1000, 1);
    *(_DWORD *)((char *)Dst + 47634) = sub_4B80F0(v5, "Experience", "KillReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30330) = sub_4B80F0(v5, "Flag", "RestoreUnownedDroppedFlags", 1, 1);
    *(_DWORD *)((char *)Dst + 30334) = sub_4B80F0(v5, "Flag", "AllowJoiningWinningTeam", 0, 1);
    *(_DWORD *)((char *)Dst + 30366) = sub_4B80F0(v5, "Flag", "AnnounceTransfers", 0, 1);
    *(_DWORD *)((char *)Dst + 30462) = sub_4B80F0(v5, "Flag", "WarpPickupDelay", 200, 1);
    *(_DWORD *)((char *)Dst + 30458) = sub_4B80F0(v5, "Flag", "AllowSafety", 0, 1);
    *(_DWORD *)((char *)Dst + 30398) = sub_4B80F0(v5, "Flag", "TrickleKill", 0, 1);
    *(_DWORD *)((char *)Dst + 30450) = sub_4B80F0(v5, "Flag", "StartDelay", 120, 1);
    *(_DWORD *)((char *)Dst + 30402) = sub_4B80F0(v5, "Flag", "PointMultiplier", 1000, 1);
    *(_DWORD *)((char *)Dst + 30406) = sub_4B80F0(v5, "Flag", "ExperienceMultiplier", 1000, 1);
    *(_DWORD *)((char *)Dst + 30410) = sub_4B80F0(v5, "Flag", "CashMultiplier", 1000, 1);
    *(_DWORD *)((char *)Dst + 30414) = sub_4B80F0(v5, "Flag", "CarryCount", 100, 1);
    *(_DWORD *)((char *)Dst + 30418) = sub_4B80F0(v5, "Flag", "EnterGameDelay", 3000, 1);
    *(_DWORD *)((char *)Dst + 30422) = sub_4B80F0(v5, "Flag", "ResetDelay", 3600, 1);
    *(_DWORD *)((char *)Dst + 30426) = sub_4B80F0(v5, "Flag", "PeriodicRewardDelay", 0, 1);
    *(_DWORD *)((char *)Dst + 30370) = sub_4B80F0(v5, "Flag", "PointReward", 4000, 1);
    *(_DWORD *)((char *)Dst + 30374) = sub_4B80F0(v5, "Flag", "ExperienceReward", 4000, 1);
    *(_DWORD *)((char *)Dst + 30378) = sub_4B80F0(v5, "Flag", "CashReward", 4000, 1);
    *(_DWORD *)((char *)Dst + 30382) = sub_4B80F0(v5, "Flag", "VictoryBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30386) = sub_4B80F0(v5, "Flag", "VictoryWarningBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30390) = sub_4B80F0(v5, "Flag", "VictoryAbortedBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30394) = sub_4B80F0(v5, "Flag", "VictoryHoldTime", 0, 1);
    *(_DWORD *)((char *)Dst + 30430) = sub_4B80F0(v5, "Flag", "ResetBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30434) = sub_4B80F0(v5, "Flag", "PeriodicBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30438) = sub_4B80F0(v5, "Flag", "CarrierOnRadar", 1, 1);
    *(_DWORD *)((char *)Dst + 30442) = sub_4B80F0(v5, "Flag", "CarrierLineOfSight", 0, 1);
    *(_DWORD *)((char *)Dst + 30446) = sub_4B80F0(v5, "Flag", "DropPointRadius", 0, 1);
    *(_DWORD *)((char *)Dst + 30454) = sub_4B80F0(v5, "Flag", "PrizeDistance", 48, 1);
    *(_DWORD *)((char *)Dst + 30338) = sub_4B80F0(v5, "Flag", "ShowTimer", 1, 1);
    *(_DWORD *)((char *)Dst + 30342) = sub_4B80F0(v5, "Flag", "VictoryWhenOneTeam", 0, 1);
    *(_DWORD *)((char *)Dst + 30466) = sub_4B80F0(v5, "Flag", "StartBubble", 0, 1);
    *(_DWORD *)((char *)Dst + 30470) = sub_4B80F0(v5, "Flag", "MvpBubble", 1, 1);
    *(_DWORD *)((char *)Dst + 30346) = sub_4B80F0(v5, "Flag", "AutoPickup", 0, 1);
    *(_DWORD *)((char *)Dst + 30350) = sub_4B80F0(v5, "Flag", "AccessibleFlagToDropPoint", 1, 1);
    *(_DWORD *)((char *)Dst + 30354) = sub_4B80F0(v5, "Flag", "AccessibleDropPoint", 0, 1);
    *(_DWORD *)((char *)Dst + 30358) = sub_4B80F0(v5, "Flag", "DisplayStatus", 0, 1);
    *(_DWORD *)((char *)Dst + 30362) = sub_4B80F0(v5, "Flag", "UseJackpot", 0, 1);
    *(_DWORD *)((char *)Dst + 30474) = sub_4B80F0(v5, "Flag", "DropPointRadiusTimeTolerance", 300, 1);
    *(_DWORD *)((char *)Dst + 30478) = sub_4B80F0(v5, "Flag", "DefaultWinFrequency", -1, 1);
    *(_DWORD *)((char *)Dst + 30490) = sub_4B80F0(v5, "Flag", "WinnerJackpotFixedPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30494) = sub_4B80F0(v5, "Flag", "WinnerJackpotMvpPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30482) = sub_4B80F0(v5, "Flag", "LoserJackpotFixedPercent", 0, 1);
    *(_DWORD *)((char *)Dst + 30486) = sub_4B80F0(v5, "Flag", "LoserJackpotMvpPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30294) = sub_4B80F0(v5, "DeathMatch", "StartDelay", 90, 1);
    *(_DWORD *)((char *)Dst + 30298) = sub_4B80F0(v5, "DeathMatch", "Timer", 0, 1);
    *(_DWORD *)((char *)Dst + 30302) = sub_4B80F0(v5, "DeathMatch", "TeamKills", 0, 1);
    *(_DWORD *)((char *)Dst + 30306) = sub_4B80F0(v5, "DeathMatch", "PersonalKills", 0, 1);
    *(_DWORD *)((char *)Dst + 30310) = sub_4B80F0(v5, "DeathMatch", "MinimumPlayers", 1, 1);
    *(_DWORD *)((char *)Dst + 30314) = sub_4B80F0(v5, "DeathMatch", "TeamVictory", 1, 1);
    *(_DWORD *)((char *)Dst + 30318) = sub_4B80F0(v5, "DeathMatch", "PersonalVictory", 1, 1);
    *(_DWORD *)((char *)Dst + 30322) = sub_4B80F0(v5, "DeathMatch", "VictoryBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30326) = sub_4B80F0(v5, "DeathMatch", "TimerBubble", 0, 1);
    *(_DWORD *)((char *)Dst + 30498) = sub_4B80F0(v5, "King", "DeathCount", 0, 1);
    *(_DWORD *)((char *)Dst + 30502) = sub_4B80F0(v5, "King", "CrownRecoverKills", 2, 1);
    *(_DWORD *)((char *)Dst + 30506) = sub_4B80F0(v5, "King", "ExpireTime", 240, 1);
    *(_DWORD *)((char *)Dst + 30510) = sub_4B80F0(v5, "King", "MinimumPlayers", 10, 1);
    *(_DWORD *)((char *)Dst + 30514) = sub_4B80F0(v5, "King", "PointReward", 1000, 1);
    *(_DWORD *)((char *)Dst + 30518) = sub_4B80F0(v5, "King", "ExperienceReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30522) = sub_4B80F0(v5, "King", "CashReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30526) = sub_4B80F0(v5, "King", "VictoryBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30530) = sub_4B80F0(v5, "King", "StartDelay", 20, 1);
    sub_4B7F30(v5, "King", "CrownGraphic", "King,Crown", (char *)Dst + 30534, 0x54u, 1);
    *(_DWORD *)((char *)Dst + 30618) = sub_4B80F0(v5, "King", "GiveSpecsCrowns", 1, 1);
    *(_DWORD *)((char *)Dst + 30622) = sub_4B80F0(v5, "King", "TeamRewards", 0, 1);
    *(_DWORD *)((char *)Dst + 30626) = sub_4B80F0(v5, "King", "LoseCrownExpire", 0, 1);
    *(_DWORD *)((char *)Dst + 30630) = sub_4B80F0(v5, "King", "ShowTimer", 1, 1);
    *(_DWORD *)((char *)Dst + 30634) = sub_4B80F0(v5, "King", "StartBubble", 0, 1);
    *(_DWORD *)((char *)Dst + 30638) = sub_4B80F0(v5, "Expire", "DeathCount", 0, 1);
    *(_DWORD *)((char *)Dst + 30642) = sub_4B80F0(v5, "Expire", "AllowLateJoins", 1, 1);
    *(_DWORD *)((char *)Dst + 30646) = sub_4B80F0(v5, "Soccer", "CountMultiPointGoals", 0, 1);
    *(_DWORD *)((char *)Dst + 30650) = sub_4B80F0(v5, "Soccer", "RelativeId", 0, 1);
    *(_DWORD *)((char *)Dst + 30870) = sub_4B80F0(v5, "Soccer", "DropBallOnVehicleChange", 1, 1);
    *(_DWORD *)((char *)Dst + 30854) = sub_4B80F0(v5, "Soccer", "Timer", 0, 1);
    *(_DWORD *)((char *)Dst + 30858) = sub_4B80F0(v5, "Soccer", "TimerOvertime", 0, 1);
    *(_DWORD *)((char *)Dst + 30654) = sub_4B80F0(v5, "Soccer", "ZProximityAdjust", 1000, 1);
    *(_DWORD *)((char *)Dst + 30658) = sub_4B80F0(v5, "Soccer", "BallWarpGroup", 500, 1);
    *(_DWORD *)((char *)Dst + 30662) = sub_4B80F0(v5, "Soccer", "BallCount", 0, 1);
    *(_DWORD *)((char *)Dst + 30666) = sub_4B80F0(v5, "Soccer", "BounceForGoal", 0, 1);
    *(_DWORD *)((char *)Dst + 30674) = sub_4B80F0(v5, "Soccer", "PlayersPerBall", 0, 1);
    *(_DWORD *)((char *)Dst + 30678) = sub_4B80F0(v5, "Soccer", "MinimumPlayers", 4, 1);
    *(_DWORD *)((char *)Dst + 30682) = sub_4B80F0(v5, "Soccer", "SendTime", 100, 1);
    *(_DWORD *)((char *)Dst + 30686) = sub_4B80F0(v5, "Soccer", "VictoryPointReward", 2000, 1);
    *(_DWORD *)((char *)Dst + 30690) = sub_4B80F0(v5, "Soccer", "VictoryExperienceReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30694) = sub_4B80F0(v5, "Soccer", "VictoryCashReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30698) = sub_4B80F0(v5, "Soccer", "LoserPointReward", 1000, 1);
    *(_DWORD *)((char *)Dst + 30702) = sub_4B80F0(v5, "Soccer", "LoserExperienceReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30706) = sub_4B80F0(v5, "Soccer", "LoserCashReward", 0, 1);
    *(_DWORD *)((char *)Dst + 30670) = sub_4B80F0(v5, "Soccer", "VictoryGoals", -3, 1);
    *(_DWORD *)((char *)Dst + 30710) = sub_4B80F0(v5, "Soccer", "PassDelay", 20, 1);
    *(_DWORD *)((char *)Dst + 30714) = sub_4B80F0(v5, "Soccer", "ShowRadar", 1, 1);
    *(_DWORD *)((char *)Dst + 30718) = sub_4B80F0(v5, "Soccer", "IgnoreWalls", 0, 1);
    *(_DWORD *)((char *)Dst + 30722) = sub_4B80F0(v5, "Soccer", "DefaultThrowTime", 1200, 1);
    *(_DWORD *)((char *)Dst + 30726) = sub_4B80F0(v5, "Soccer", "DefaultProximity", 48, 1);
    *(_DWORD *)((char *)Dst + 30730) = sub_4B80F0(v5, "Soccer", "DefaultFriction", 12, 1);
    *(_DWORD *)((char *)Dst + 30734) = sub_4B80F0(v5, "Soccer", "DefaultBallSpeed", 2500, 1);
    *(_DWORD *)((char *)Dst + 30738) = sub_4B80F0(v5, "Soccer", "DefaultInheritSpeedPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30742) = sub_4B80F0(v5, "Soccer", "DefaultInheritZSpeedPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30846) = sub_4B80F0(v5, "Soccer", "WarpCatchDelay", 200, 1);
    *(_DWORD *)((char *)Dst + 30746) = sub_4B80F0(v5, "Soccer", "GravityAcceleration", 0, 1);
    *(_DWORD *)((char *)Dst + 30750) = sub_4B80F0(v5, "Soccer", "FloorBounceVertSpeedPercent", 750, 1);
    *(_DWORD *)((char *)Dst + 30754) = sub_4B80F0(v5, "Soccer", "FloorBounceHorzSpeedPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30758) = sub_4B80F0(v5, "Soccer", "BounceHorzSpeedPercent", 1000, 1);
    *(_DWORD *)((char *)Dst + 30762) = sub_4B80F0(v5, "Soccer", "StartDelay", 120, 1);
    sub_4B7F30(v5, "Soccer", "BallGraphic", "Soccer,Ball", (char *)Dst + 30874, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "TrailGraphic", "Soccer,Trail", (char *)Dst + 30958, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "ShadowGraphic", "Soccer,Shadow", (char *)Dst + 31042, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "CatchSound", "Soccer,Catch", (char *)Dst + 31126, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "RequestSound", "Soccer,Request", (char *)Dst + 31210, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "ThrowSound", "Soccer,Throw", (char *)Dst + 31294, 0x54u, 1);
    sub_4B7F30(v5, "Soccer", "BounceSound", "Soccer,Bounce", (char *)Dst + 31378, 0x54u, 1);
    *(_DWORD *)((char *)Dst + 30766) = sub_4B80F0(v5, "Soccer", "GoalBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30770) = sub_4B80F0(v5, "Soccer", "BallAddedBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30774) = sub_4B80F0(v5, "Soccer", "VictoryBong", 0, 1);
    *(_DWORD *)((char *)Dst + 30822) = sub_4B80F0(v5, "Soccer", "KillerCatchBall", 0, 1);
    *(_DWORD *)((char *)Dst + 30826) = sub_4B80F0(v5, "Soccer", "DeadBallTimer", 0, 1);
    *(_DWORD *)((char *)Dst + 30830) = sub_4B80F0(v5, "Soccer", "InvisibleTime", 80, 1);
    *(_DWORD *)((char *)Dst + 30834) = sub_4B80F0(v5, "Soccer", "InvisibleFulfillTime", 40, 1);
    *(_DWORD *)((char *)Dst + 30838) = sub_4B80F0(v5, "Soccer", "PickupTime", -1, 1);
    *(_DWORD *)((char *)Dst + 30842) = sub_4B80F0(v5, "Soccer", "ShowTimer", 1, 1);
    *(_DWORD *)((char *)Dst + 30850) = sub_4B80F0(v5, "Soccer", "CatchCountDelay", 700, 1);
    *(_DWORD *)((char *)Dst + 30862) = sub_4B80F0(v5, "Soccer", "ScoreBubble", 0, 1);
    *(_DWORD *)((char *)Dst + 30866) = sub_4B80F0(v5, "Soccer", "MvpBubble", 1, 1);
    *(_DWORD *)((char *)Dst + 30778) = sub_4B80F0(v5, "SoccerMvp", "Goals", 80, 1);
    *(_DWORD *)((char *)Dst + 30782) = sub_4B80F0(v5, "SoccerMvp", "Assists", 62, 1);
    *(_DWORD *)((char *)Dst + 30786) = sub_4B80F0(v5, "SoccerMvp", "Kills", 21, 1);
    *(_DWORD *)((char *)Dst + 30790) = sub_4B80F0(v5, "SoccerMvp", "Steals", 47, 1);
    *(_DWORD *)((char *)Dst + 30794) = sub_4B80F0(v5, "SoccerMvp", "Passes", 20, 1);
    *(_DWORD *)((char *)Dst + 30798) = sub_4B80F0(v5, "SoccerMvp", "Deaths", -5, 1);
    *(_DWORD *)((char *)Dst + 30802) = sub_4B80F0(v5, "SoccerMvp", "Fumbles", -8, 1);
    *(_DWORD *)((char *)Dst + 30806) = sub_4B80F0(v5, "SoccerMvp", "Catches", 0, 1);
    *(_DWORD *)((char *)Dst + 30810) = sub_4B80F0(v5, "SoccerMvp", "Saves", 60, 1);
    *(_DWORD *)((char *)Dst + 30814) = sub_4B80F0(v5, "SoccerMvp", "Pinches", -150, 1);
    *(_DWORD *)((char *)Dst + 30818) = sub_4B80F0(v5, "SoccerMvp", "CarryTimeFactor", 1000, 1);
    *(_DWORD *)((char *)Dst + 31522) = sub_4B80F0(v5, "FlagMvp", "Kills", 21, 1);
    *(_DWORD *)((char *)Dst + 31526) = sub_4B80F0(v5, "FlagMvp", "Deaths", -7, 1);
    *(_DWORD *)((char *)Dst + 31530) = sub_4B80F0(v5, "FlagMvp", "VehicleKills", 31, 1);
    *(_DWORD *)((char *)Dst + 31534) = sub_4B80F0(v5, "FlagMvp", "VehicleDeaths", -20, 1);
    *(_DWORD *)((char *)Dst + 31538) = sub_4B80F0(v5, "FlagMvp", "Captures", 80, 1);
    *(_DWORD *)((char *)Dst + 31506) = sub_4B80F0(v5, "FlagMvp", "CarryTimeFactor", 100, 1);
    *(_DWORD *)((char *)Dst + 31510) = sub_4B80F0(v5, "FlagMvp", "CarryTimeCombinedFactor", 20, 1);
    *(_DWORD *)((char *)Dst + 31514) = sub_4B80F0(v5, "FlagMvp", "CarryingKills", 50, 1);
    *(_DWORD *)((char *)Dst + 31518) = sub_4B80F0(v5, "FlagMvp", "CarrierKills", 100, 1);
    *(_DWORD *)((char *)Dst + 31542) = sub_4B80F0(v5, "FlagMvp", "KilledWhileCarrying", -25, 1);
    *(_DWORD *)((char *)Dst + 31546) = sub_4B80F0(v5, "FlagMvp", "TeamOwnageFactor", 20, 1);
    *(_DWORD *)((char *)Dst + 31550) = sub_4B80F0(v5, "FlagMvp", "TeamOwnageCombinedFactor", 5, 1);
    *(_DWORD *)((char *)Dst + 3882) = sub_4B80F0(v5, "Bubble", "SysopTimer", 3, 1);
    v25 = 0;
    v26 = (int *)((char *)Dst + 3902);
    do
    {
      sprintf(&Dest, "Size%d", v25);
      *(v26 - 4) = sub_4B80F0(v5, "Bubble", &Dest, 2, 1);
      sprintf(&Dest, "Font%d", v25);
      *v26 = sub_4B80F0(v5, "Bubble", &Dest, 2, 1);
      sprintf(&Dest, "FontColor%d", v25);
      v26[4] = sub_4B80F0(v5, "Bubble", &Dest, 0, 1);
      ++v25;
      ++v26;
    }
    while ( v25 < 4 );
    sub_4B7F30(v5, "Level", "TipFile", "standard.tip", (char *)Dst + 29878, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "NwsFile", "local.nws", (char *)Dst + 29906, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "LvlFile", "local.lvl", (char *)Dst + 29934, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "VehFile", "local.veh", (char *)Dst + 29962, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "ItmFile", "local.itm", (char *)Dst + 29990, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "RpgFile", "local.rpg", (char *)Dst + 30018, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "LioFile", "local.lio", (char *)Dst + 30046, 0x1Cu, 1);
    sub_4B7F30(v5, "Level", "BriefingFile", "briefing.wav", (char *)Dst + 30074, 0x1Cu, 1);
    v27 = sub_4B80F0(v5, "Level", "Isometric", 1, 1);
    *(_DWORD *)((char *)Dst + 29846) = v27;
    dword_53A7C4 = v27;
    *(_DWORD *)((char *)Dst + 29870) = sub_4B80F0(v5, "Level", "RadarPrizeDistance", 0, 1);
    *(_DWORD *)((char *)Dst + 29826) = sub_4B80F0(v5, "Level", "AmbientPercent", 700, 1);
    *(_DWORD *)((char *)Dst + 29830) = sub_4B80F0(v5, "Level", "Gravity", -25, 1);
    *(_DWORD *)((char *)Dst + 29834) = sub_4B80F0(v5, "Level", "ForceViewNews", 1, 1);
    *(_DWORD *)((char *)Dst + 29838) = sub_4B80F0(v5, "Level", "CeilingHeight", 2048, 1);
    *(_DWORD *)((char *)Dst + 29842) = sub_4B80F0(v5, "Level", "SmartDistance", 200, 1);
    sub_4B8360(v5, (int)&v56, "Level", "LightColorWhite", "0xffffff", 1);
    *(_DWORD *)((char *)Dst + 29854) = v56;
    sub_4B8360(v5, (int)&v56, "Level", "LightColorRed", "0xff0000", 1);
    *(_DWORD *)((char *)Dst + 29858) = v56;
    sub_4B8360(v5, (int)&v56, "Level", "LightColorGreen", "0x00ff00", 1);
    *(_DWORD *)((char *)Dst + 29862) = v56;
    sub_4B8360(v5, (int)&v56, "Level", "LightColorBlue", "0x0000ff", 1);
    *(_DWORD *)((char *)Dst + 29866) = v56;
    *(_DWORD *)((char *)Dst + 29850) = sub_4B80F0(v5, "Level", "AllowUnqualifiedPickup", 0, 1);
    *(_DWORD *)((char *)Dst + 29874) = sub_4B80F0(v5, "Level", "AutoPrizePickupDelay", 300, 1);
    *(_DWORD *)((char *)Dst + 5042) = sub_4B80F0(v5, "Render", "Static", 1, 1);
    *(_DWORD *)((char *)Dst + 5046) = sub_4B80F0(v5, "Render", "FlattenLights", 0, 1);
    sub_4B8360(v5, (int)&v56, "Render", "BackgroundColor", "0x000000", 1);
    *(_DWORD *)((char *)Dst + 5050) = v56;
    *(_DWORD *)((char *)Dst + 5054) = sub_4B80F0(v5, "Render", "TrailsFirst", 0, 1);
    *(_DWORD *)((char *)Dst + 5058) = sub_4B80F0(v5, "Render", "VehTrailsFirst", 0, 1);
    *((_WORD *)Dst + 2531) = sub_4B80F0(v5, "Render", "StarfieldGapNear", 250, 1);
    *((_WORD *)Dst + 2532) = sub_4B80F0(v5, "Render", "StarfieldGapFar", 350, 1);
    *(_DWORD *)((char *)Dst + 31462) = sub_4B80F0(v5, "View", "AdjustDistance", 1000, 1);
    *(_DWORD *)((char *)Dst + 31466) = sub_4B80F0(v5, "View", "AdjustSpeed", 6000, 1);
    *(_DWORD *)((char *)Dst + 31470) = sub_4B80F0(v5, "View", "AdjustRotateSpeed", 50, 1);
    *(_DWORD *)((char *)Dst + 25942) = sub_4B80F0(v5, "Rank", "Enabled", 0, 1);
    *(_DWORD *)((char *)Dst + 25946) = sub_4B80F0(v5, "Rank", "Bong", 0, 1);
    sub_4B7F30(v5, "Rank", "Label", "Level", (char *)Dst + 25950, 0x20u, 1);
    v28 = 0;
    v58 = (char *)Dst + 29182;
    v29 = (char *)Dst + 25982;
    do
    {
      sprintf(&Dest, "Name%d", v28);
      sub_4B7F30(v5, "Rank", &Dest, &byte_51909E, v29, 0x20u, 1);
      sprintf(&Dest, "Points%d", v28);
      v30 = sub_4B80F0(v5, "Rank", &Dest, 0, 1);
      v31 = v58;
      *(_DWORD *)v58 = v30;
      ++v28;
      v29 += 32;
      v58 = v31 + 4;
    }
    while ( v28 < 100 );
    v32 = 0;
    v33 = (char *)Dst + 31754;
    do
    {
      sprintf(&Str2, "Terrain%d", v32);
      sub_4B7F30(v5, &Str2, "Message", &byte_51909F, v33 - 180, 0x80u, 1);
      sub_4B7F30(v5, &Str2, "EventString", &byte_5190AA, v33, 0x100u, 1);
      *(v33 - 52) = sub_4B80F0(v5, &Str2, "FontColor", 4, 1);
      *(v33 - 51) = sub_4B80F0(v5, &Str2, "StripShadows", 0, 1);
      *(v33 - 43) = sub_4B80F0(v5, &Str2, "Safety", 0, 1);
      *(v33 - 42) = sub_4B80F0(v5, &Str2, "StoreEnabled", 1, 1);
      *(v33 - 41) = sub_4B80F0(v5, &Str2, "SkillEnabled", 1, 1);
      *(v33 - 50) = sub_4B80F0(v5, &Str2, "SoccerEnabled", 1, 1);
      *(v33 - 48) = sub_4B80F0(v5, &Str2, "TrickleKill", 0, 1);
      *((_DWORD *)v33 + 71) = sub_4B80F0(v5, &Str2, "PrizeEnableMode", 3, 1);
      *((_DWORD *)v33 - 9) = sub_4B80F0(v5, &Str2, "PrizeExpire", 0, 1);
      *(v33 - 49) = sub_4B80F0(v5, &Str2, "TeamChangeEnabled", 1, 1);
      *((_DWORD *)v33 + 66) = sub_4B80F0(v5, &Str2, "EnergyRate", 0, 1);
      *((_DWORD *)v33 - 10) = sub_4B80F0(v5, &Str2, "HealthRate", 0, 1);
      *((_DWORD *)v33 + 67) = sub_4B80F0(v5, &Str2, "RepairRate", 0, 1);
      *(v33 - 47) = sub_4B80F0(v5, &Str2, "RepelVehicle", 1, 1);
      *(v33 - 46) = sub_4B80F0(v5, &Str2, "RepelWeapons", 1, 1);
      *(v33 - 45) = sub_4B80F0(v5, &Str2, "Starfield", 0, 1);
      *(v33 - 44) = sub_4B80F0(v5, &Str2, "DeleteLiveWeapons", 0, 1);
      *((_DWORD *)v33 - 8) = sub_4B80F0(v5, &Str2, "PercentOfCashReward", 1000, 1);
      *((_DWORD *)v33 - 7) = sub_4B80F0(v5, &Str2, "PercentOfExperienceReward", 1000, 1);
      *((_DWORD *)v33 - 6) = sub_4B80F0(v5, &Str2, "PercentOfPointsReward", 1000, 1);
      *((_DWORD *)v33 - 5) = sub_4B80F0(v5, &Str2, "MaxTimeAllowed", 0, 1);
      *((_DWORD *)v33 - 4) = sub_4B80F0(v5, &Str2, "BountyAutoMax", 100, 1);
      *((_DWORD *)v33 - 3) = sub_4B80F0(v5, &Str2, "BountyAutoRate", 33, 1);
      *((_DWORD *)v33 - 2) = sub_4B80F0(v5, &Str2, "GoalFrequency", -1, 1);
      *((_DWORD *)v33 - 1) = sub_4B80F0(v5, &Str2, "GoalPoints", 1, 1);
      *((_DWORD *)v33 + 64) = sub_4B80F0(v5, &Str2, "PrizeBountyMultiplier", 0, 1);
      *((_DWORD *)v33 + 65) = sub_4B80F0(v5, &Str2, "FlagTimerSpeed", 1, 1);
      *((_DWORD *)v33 - 46) = sub_4B80F0(v5, &Str2, "AllowQuitting", 1, 1);
      *((_DWORD *)v33 - 48) = sub_4B80F0(v5, &Str2, "AllowChangeArena", 1, 1);
      *((_DWORD *)v33 - 47) = sub_4B80F0(v5, &Str2, "AllowGoToSpec", 1, 1);
      *((_DWORD *)v33 + 68) = sub_4B80F0(v5, &Str2, "QuitDelaySecs", 0, 1);
      *((_DWORD *)v33 + 69) = sub_4B80F0(v5, &Str2, "GoToSpecDelaySecs", 0, 1);
      *((_DWORD *)v33 + 70) = sub_4B80F0(v5, &Str2, "ChangeArenaDelaySecs", 0, 1);
      ++v32;
      v33 += 480;
    }
    while ( v32 < 16 );
    v34 = 0;
    *(_DWORD *)((char *)Dst + 80314) = sub_4B80F0(v5, "PublicColors", "Count", 1, 1);
    v57 = 0;
    sub_4B7F30(v5, "PublicColors", "UnownedUniform", "0xffffff,0xedeae0,0xf1ddc4", &v64, 0x40u, 1);
    v35 = sub_48CBB0(&v64);
    BYTE2(v57) = BYTE2(v35);
    LOWORD(v57) = v35;
    *(_DWORD *)((char *)Dst + 80318) = v57;
    v36 = sub_48CBB0(&v64);
    LOWORD(v57) = v36;
    BYTE2(v57) = BYTE2(v36);
    *(_DWORD *)((char *)Dst + 80322) = v57;
    v37 = sub_48CBB0(&v64);
    BYTE2(v57) = BYTE2(v37);
    LOWORD(v57) = v37;
    *(_DWORD *)((char *)Dst + 80326) = v57;
    *(_DWORD *)((char *)Dst + 80330) = sub_4B80F0(v5, "PublicColors", "UnownedHAdjust", 0, 1);
    *(_DWORD *)((char *)Dst + 80334) = sub_4B80F0(v5, "PublicColors", "UnownedSAdjust", 0, 1);
    *(_DWORD *)((char *)Dst + 80338) = sub_4B80F0(v5, "PublicColors", "UnownedVAdjust", 0, 1);
    v38 = (char *)Dst + 39402;
    do
    {
      sprintf(&Dest, "NamedArena%d", v34);
      sub_4B7F30(v5, &Dest, "Name", &byte_5190AB, v38 - 160, 0x20u, 1);
      sub_4B7F30(v5, &Dest, "DisplayLogic", &byte_5190BE, v38 - 128, 0x80u, 1);
      sub_4B7F30(v5, &Dest, "PlayLogic", &byte_5190BF, v38, 0x80u, 1);
      sub_4B7F30(v5, &Dest, "StartLogic", &byte_5190CA, v38 + 128, 0x80u, 1);
      ++v34;
      v38 += 416;
    }
    while ( v34 < 20 );
    v58 = 0;
    v39 = (char *)Dst + 49760;
    do
    {
      v40 = (int)(v39 - 346);
      sprintf(&Dest, "TeamInfo%d", v58);
      sprintf(&Source, "Public%d", v58);
      sub_4B7F30(v5, &Dest, "Name", &Source, v39 - 346, 0x20u, 1);
      sub_4B7F30(v5, &Dest, "EventString", &byte_5190CB, v39 - 288, 0x100u, 1);
      sub_4B7F30(v5, &Dest, "TeamEventStartGame", &byte_5190D3, v39, 0x100u, 1);
      sub_4B8360(v5, (int)&v59, &Dest, "RadarColor", "0x000000", 1);
      *((_DWORD *)v39 + 67) = v59;
      *(_DWORD *)(v39 - 310) = sub_4B80F0(v5, &Dest, "NameFontColor", -1, 1);
      *(_DWORD *)(v39 - 306) = sub_4B80F0(v5, &Dest, "MaxPlayers", 0, 1);
      *(_DWORD *)(v39 - 302) = sub_4B80F0(v5, &Dest, "DefaultVehicle", -1, 1);
      *(_DWORD *)(v39 - 298) = sub_4B80F0(v5, &Dest, "RelativeVehicle", 0, 1);
      *((_WORD *)v39 - 147) = sub_4B80F0(v5, &Dest, "hAdjust", 0, 1);
      *((_WORD *)v39 - 146) = sub_4B80F0(v5, &Dest, "sAdjust", 0, 1);
      *((_WORD *)v39 - 145) = sub_4B80F0(v5, &Dest, "vAdjust", 0, 1);
      *(_DWORD *)(v39 - 314) = sub_4B80F0(v5, &Dest, "DisallowWinFlagGame", 0, 1);
      v57 = 0;
      v56 = (int)(v39 - 32);
      do
      {
        sprintf(&Str2, "RtsState%d", v57);
        v41 = sub_4B80F0(v5, &Dest, &Str2, -1, 1);
        v42 = v56;
        *(_DWORD *)v56 = v41;
        v24 = __OFSUB__(v57 + 1, 8);
        v23 = v57++ - 7 < 0;
        v56 = v42 + 4;
      }
      while ( v23 ^ v24 );
      v57 = 0;
      sub_4B7F30(v5, &Dest, "Colors", "0xffffff,0xedeae0,0xf1ddc4", &v65, 0x40u, 1);
      v43 = sub_48CBB0(&v65);
      BYTE2(v57) = BYTE2(v43);
      LOWORD(v57) = v43;
      *(_DWORD *)(v40 + 602) = v57;
      v44 = sub_48CBB0(&v65);
      LOWORD(v57) = v44;
      BYTE2(v57) = BYTE2(v44);
      *(_DWORD *)(v40 + 606) = v57;
      v45 = sub_48CBB0(&v65);
      LOWORD(v57) = v45;
      BYTE2(v57) = BYTE2(v45);
      *(_DWORD *)(v40 + 610) = v57;
      v39 += 618;
      v24 = __OFSUB__(v58 + 1, 50);
      v23 = (signed int)(v58++ - 49) < 0;
    }
    while ( v23 ^ v24 );
    v46 = 0;
    v47 = (char *)Dst + 80342;
    do
    {
      sprintf(&Str2, "Link%d", v46);
      sub_4B7F30(v5, "WebMenu", &Str2, &byte_5190DE, v47, 0xC8u, 1);
      ++v46;
      v47 += 200;
    }
    while ( v46 < 30 );
    v48 = 0;
    v49 = (char *)Dst + 86342;
    do
    {
      sprintf(&Str2, "Link%d", v48);
      sub_4B7F30(v5, "HelpMenu", &Str2, &byte_5190DF, v49, 0x80u, 1);
      ++v48;
      v49 += 128;
    }
    while ( v48 < 30 );
    v50 = 0;
    v51 = (char *)Dst + 3974;
    do
    {
      sprintf(&Str2, "Name%d", v50);
      sub_4B7F30(v5, "ZoneStat", &Str2, &byte_5190EE, v51, 0x20u, 1);
      ++v50;
      v51 += 32;
    }
    while ( v50 < 12 );
    sub_4B7F30(v5, "FixedStat", "Name", "Name", (char *)Dst + 4358, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "Squad", "Squad", (char *)Dst + 4390, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "Points", "Points", (char *)Dst + 4422, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "Kills", "Kills", (char *)Dst + 4454, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "Deaths", "Deaths", (char *)Dst + 4486, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "KillPoints", "Kill Points", (char *)Dst + 4518, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "DeathPoints", "Death Points", (char *)Dst + 4550, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "VehKills", "Veh. Kills", (char *)Dst + 4582, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "VehDeaths", "Veh. Deaths", (char *)Dst + 4614, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "AssistPoints", "Assist Points", (char *)Dst + 4646, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "BonusPoints", "Bonus Points", (char *)Dst + 4678, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "MvpScore", "MVP Score", (char *)Dst + 4710, 0x20u, 1);
    sub_4B7F30(v5, "FixedStat", "PlaySeconds", "Play Seconds", (char *)Dst + 4742, 0x20u, 1);
    *(_DWORD *)((char *)Dst + 47678) = sub_4B80F0(v5, "Bong", "PublicLow", 0, 1);
    *(_DWORD *)((char *)Dst + 47682) = sub_4B80F0(v5, "Bong", "PublicHigh", 0, 1);
    *(_DWORD *)((char *)Dst + 47686) = sub_4B80F0(v5, "Bong", "PrivateLow", 0, 1);
    *(_DWORD *)((char *)Dst + 47690) = sub_4B80F0(v5, "Bong", "PrivateHigh", 0, 1);
    *(_DWORD *)((char *)Dst + 47694) = sub_4B80F0(v5, "Bong", "TeamLow", 0, 1);
    *(_DWORD *)((char *)Dst + 47698) = sub_4B80F0(v5, "Bong", "TeamHigh", 0, 1);
    *(_DWORD *)((char *)Dst + 47702) = sub_4B80F0(v5, "Bong", "ChatLow", 0, 1);
    *(_DWORD *)((char *)Dst + 47706) = sub_4B80F0(v5, "Bong", "ChatHigh", 0, 1);
    *(_DWORD *)((char *)Dst + 47710) = sub_4B80F0(v5, "Bong", "SquadLow", 0, 1);
    *(_DWORD *)((char *)Dst + 47714) = sub_4B80F0(v5, "Bong", "SquadHigh", 0, 1);
    v52 = 0;
    v53 = (char *)Dst + 47718;
    do
    {
      v54 = v52 + 1;
      sprintf(&v63, "Bong%d", v52 + 1);
      sub_4B7F30(v5, "Bong", &v63, &byte_5190EF, v53, 0x38u, 1);
      v52 = v54;
      v53 += 56;
    }
    while ( v54 < 30 );
    if ( a4 )
      sub_4B7DD0(v5);
    sub_4B78C0(v5, 0);
    if ( v5 )
    {
      sub_4B7860(v5);
      j__free(v5);
    }
  }
  return a3;
}
// 51ADD8: using guessed type void *off_51ADD8;
// 51ADEC: using guessed type void *off_51ADEC;
// 51ADFC: using guessed type void *off_51ADFC;
// 51AE0C: using guessed type void *off_51AE0C;
// 53A7C4: using guessed type int dword_53A7C4;

//----- (0049A3A0) --------------------------------------------------------
signed int __thiscall sub_49A3A0(void *this, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  signed int result; // eax

  v5 = (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)this + 8))(a2, a3, a4, a5);
  if ( v5 )
    result = *(_DWORD *)(v5 + 4);
  else
    result = -1;
  return result;
}

//----- (0049A3D0) --------------------------------------------------------
int __stdcall sub_49A3D0(int a1, int a2)
{
  return 0;
}

//----- (0049A3E0) --------------------------------------------------------
int __thiscall sub_49A3E0(_DWORD *this, int a2)
{
  int result; // eax

  result = this[263];
  this[result + 7] = a2;
  ++this[263];
  return result;
}

//----- (0049A440) --------------------------------------------------------
_DWORD *__thiscall sub_49A440(_DWORD *this, int a2, int a3, int *a4, int *a5)
{
  _DWORD *result; // eax
  int v6; // edx
  int v7; // esi

  result = this;
  v6 = a2 - this[2];
  v7 = a3 - this[3];
  if ( v6 * v6 + v7 * v7 >= this[4] )
    return 0;
  if ( a4 )
    *a4 = v6;
  if ( a5 )
    *a5 = v7;
  return result;
}

//----- (0049A490) --------------------------------------------------------
_DWORD *__thiscall sub_49A490(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *result; // eax

  result = this;
  this[1] = a6;
  this[2] = a2;
  this[4] = a4 + a2;
  this[3] = a3;
  *this = &RectHitTester::`vftable';
  this[5] = a5 + a3;
  return result;
}
// 51D2AC: using guessed type void *RectHitTester::`vftable';

//----- (0049A4D0) --------------------------------------------------------
_DWORD *__thiscall sub_49A4D0(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *result; // eax

  result = this;
  this[1] = a3;
  *this = &RectHitTester::`vftable';
  this[2] = *a2;
  this[3] = a2[1];
  this[4] = a2[2];
  this[5] = a2[3];
  return result;
}
// 51D2AC: using guessed type void *RectHitTester::`vftable';

//----- (0049A510) --------------------------------------------------------
_DWORD *__thiscall sub_49A510(_DWORD *this, int a2, int a3, _DWORD *a4, _DWORD *a5)
{
  _DWORD *result; // eax
  int v6; // edi

  result = this;
  v6 = this[2];
  if ( a2 < v6 || a2 >= this[4] || a3 <= this[3] || a3 >= this[5] )
    return 0;
  if ( a4 )
    *a4 = a2 - v6;
  if ( a5 )
    *a5 = a3 - this[3];
  return result;
}

//----- (0049A560) --------------------------------------------------------
signed int __thiscall sub_49A560(_DWORD *this, int a2, _DWORD *a3)
{
  if ( a2 != this[1] )
    return 0;
  *a3 = this[2];
  a3[1] = this[3];
  a3[2] = this[4];
  a3[3] = this[5];
  return 1;
}

//----- (0049A5F0) --------------------------------------------------------
_DWORD *__thiscall sub_49A5F0(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  _DWORD *result; // eax

  result = this;
  this[1] = a4;
  *this = &RectHitTester::`vftable';
  this[2] = *a3;
  this[3] = a3[1];
  this[4] = a3[2];
  this[5] = a3[3];
  *this = &ParentRectHitTester::`vftable';
  this[6] = a2;
  this[263] = 0;
  return result;
}
// 51D2AC: using guessed type void *RectHitTester::`vftable';
// 51D2C0: using guessed type void *ParentRectHitTester::`vftable';

//----- (0049A640) --------------------------------------------------------
int __thiscall sub_49A640(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  int (__stdcall ****v3)(signed int); // ebx
  int result; // eax

  v1 = this;
  *this = &ParentRectHitTester::`vftable';
  v2 = 0;
  if ( this[263] > 0 )
  {
    v3 = (int (__stdcall ****)(signed int))(this + 7);
    do
    {
      if ( *v3 )
        result = (***v3)(1);
      ++v2;
      ++v3;
    }
    while ( v2 < v1[263] );
  }
  *v1 = &HitTester::`vftable';
  return result;
}
// 51D284: using guessed type void *HitTester::`vftable';
// 51D2C0: using guessed type void *ParentRectHitTester::`vftable';

//----- (0049A6C0) --------------------------------------------------------
int __thiscall sub_49A6C0(_DWORD *this, int a2, int a3, _DWORD *a4, _DWORD *a5)
{
  int v5; // ebp
  _DWORD *v6; // edi
  int v7; // ecx
  int v8; // ebx
  _DWORD *v9; // eax
  int v10; // esi
  int result; // eax
  int v12; // [esp+10h] [ebp+4h]

  v5 = a2;
  v6 = this;
  v7 = this[2];
  if ( a2 < v7 )
    return 0;
  if ( a2 >= v6[4] )
    return 0;
  v8 = a3;
  if ( a3 <= v6[3] || a3 >= v6[5] )
    return 0;
  if ( a4 )
    *a4 = a2 - v7;
  v9 = a5;
  if ( a5 )
    *a5 = a3 - v6[3];
  if ( v6[6] )
  {
    v5 = a2 - v6[2];
    v8 = a3 - v6[3];
  }
  v12 = 0;
  if ( v6[263] <= 0 )
    return (int)v6;
  v10 = (int)(v6 + 7);
  while ( 1 )
  {
    result = (*(int (__stdcall **)(int, int, _DWORD *, _DWORD *))(**(_DWORD **)v10 + 8))(v5, v8, a4, v9);
    if ( result )
      break;
    v10 += 4;
    if ( ++v12 >= v6[263] )
      return (int)v6;
    v9 = a5;
  }
  return result;
}

//----- (0049A770) --------------------------------------------------------
signed int __thiscall sub_49A770(_DWORD *this, int a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  signed int result; // eax
  int v5; // ebp
  int v6; // ebx

  v3 = this;
  if ( this[1] == a2 )
  {
    *a3 = this[2];
    a3[1] = this[3];
    a3[2] = this[4];
    a3[3] = this[5];
    result = 1;
  }
  else
  {
    v5 = 0;
    if ( this[263] <= 0 )
    {
LABEL_7:
      result = 0;
    }
    else
    {
      v6 = (int)(this + 7);
      while ( !(*(int (__stdcall **)(int, _DWORD *))(**(_DWORD **)v6 + 12))(a2, a3) )
      {
        ++v5;
        v6 += 4;
        if ( v5 >= v3[263] )
          goto LABEL_7;
      }
      *a3 += v3[2];
      a3[2] += v3[2];
      a3[1] += v3[3];
      a3[3] += v3[5];
      result = 1;
    }
  }
  return result;
}

//----- (0049A810) --------------------------------------------------------
void *__thiscall sub_49A810(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &HitTester::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D284: using guessed type void *HitTester::`vftable';

//----- (0049A830) --------------------------------------------------------
void *__thiscall sub_49A830(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &HitTester::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D284: using guessed type void *HitTester::`vftable';

//----- (0049A850) --------------------------------------------------------
void *__thiscall sub_49A850(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &HitTester::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D284: using guessed type void *HitTester::`vftable';

//----- (0049A870) --------------------------------------------------------
void *__thiscall sub_49A870(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_49A640(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (0049A890) --------------------------------------------------------
void __thiscall sub_49A890(_DWORD *this, _DWORD *a2)
{
  int v2; // edi
  int v3; // edx
  _DWORD *v4; // esi
  _DWORD *v5; // edx

  v2 = this[38];
  if ( v2 )
  {
    v3 = this[39];
    if ( v3 < this[40] )
    {
      if ( v3 <= 0 || (v4 = (_DWORD *)(16 * v3 + v2 - 16), *a2 < *v4) || a2[2] > v4[2] || a2[1] < v4[1] || a2[3] > v4[3] )
      {
        v5 = (_DWORD *)(v2 + 16 * v3);
        *v5 = *a2;
        v5[1] = a2[1];
        v5[2] = a2[2];
        v5[3] = a2[3];
        ++this[39];
      }
    }
  }
}

//----- (0049A970) --------------------------------------------------------
_DWORD *__thiscall sub_49A970(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ebx
  int v6; // ecx
  signed int v7; // ebp
  signed __int16 *v8; // edi
  bool v9; // zf
  bool v10; // sf
  unsigned __int8 v11; // of
  int v12; // eax
  int v13; // eax
  signed int v14; // eax
  _DWORD *v15; // ecx

  v4 = this;
  this[514] = a4;
  v5 = 0;
  *this = &FontManager::`vftable';
  this[513] = a3;
  if ( a3 )
  {
    this[516] = 15;
    if ( isdigit(*(char *)(a3 + 234)) )
      v4[516] = j__atol((const char *)(v4[513] + 234));
    v6 = v4[513];
    v4[515] = a2;
    v4[773] = 0;
    v4[774] = 0;
    v7 = 0;
    if ( *(_WORD *)(v6 + 168) > 0 )
    {
      v8 = (signed __int16 *)(v4 + 645);
      do
      {
        *v8 = abs(*(signed __int16 *)(*(_DWORD *)(v4[513] + 360) + v5 + 4)) + 1;
        v11 = __OFSUB__(*v8, 1);
        v9 = *v8 == 1;
        v10 = (signed __int16)(*v8 - 1) < 0;
        *(v8 - 256) = *(_WORD *)(v5 + *(_DWORD *)(v4[513] + 360));
        if ( (unsigned __int8)(v10 ^ v11) | v9 )
        {
          *v8 = *(_WORD *)(v4[513] + 172) / 2;
          *(v8 - 256) = 0;
        }
        if ( isdigit(v7 + v4[515]) )
        {
          v12 = *v8;
          if ( v12 > v4[773] )
            v4[773] = v12;
        }
        v13 = *v8;
        if ( v13 > v4[774] )
          v4[774] = v13;
        ++v7;
        ++v8;
        v5 += 12;
      }
      while ( v7 < *(signed __int16 *)(v4[513] + 168) );
    }
    v14 = 0;
    v15 = v4 + 1;
    do
    {
      v15[256] = 0;
      *v15 = v14++ * v4[516];
      ++v15;
    }
    while ( v14 < 256 );
  }
  return v4;
}
// 51D2D8: using guessed type void *FontManager::`vftable';

//----- (0049AB20) --------------------------------------------------------
int __thiscall sub_49AB20(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax

  if ( a3 < 0 )
  {
    result = a4;
  }
  else
  {
    result = a2;
    this[a2 + 1] = a3;
  }
  this[a2 + 257] = a4;
  return result;
}

//----- (0049AB50) --------------------------------------------------------
unsigned int __thiscall sub_49AB50(_DWORD *this, const char *a2)
{
  unsigned int result; // eax

  if ( this[513] )
    result = strlen(a2) * this[773];
  else
    result = 0;
  return result;
}

//----- (0049AB80) --------------------------------------------------------
int __thiscall sub_49AB80(int *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8)
{
  int *v8; // esi
  int v9; // edx
  _DWORD *v11; // ebx
  unsigned int v12; // ebp
  int v13; // eax
  char v14; // al
  __int16 v15; // cx
  int v16; // edi
  __int16 v17; // kr00_2
  int v18; // ecx
  const char *v19; // eax
  unsigned int v20; // [esp+10h] [ebp-1Ch]
  char v21; // [esp+14h] [ebp-18h]
  char v22; // [esp+18h] [ebp-14h]
  unsigned int v23; // [esp+1Ch] [ebp-10h]
  int v24; // [esp+20h] [ebp-Ch]
  int v25; // [esp+24h] [ebp-8h]
  int v26; // [esp+28h] [ebp-4h]
  int v27; // [esp+3Ch] [ebp+10h]

  v8 = this;
  v9 = this[513];
  if ( !v9 )
    return 0;
  v11 = a4;
  v12 = a5 - strlen(a2) * this[773];
  v25 = a5;
  v13 = a6 + *(signed __int16 *)(v9 + 174);
  v24 = a6;
  v23 = v12;
  v26 = v13;
  sub_49A890(a4, &v23);
  (*(void (__thiscall **)(_DWORD *, char *, char *))(*v11 + 92))(v11, &v22, &v21);
  v14 = *a2;
  v20 = v12;
  if ( *a2 )
  {
    v15 = a8;
    do
    {
      v16 = v14 - v8[515];
      if ( v16 >= 0 && v16 < *(signed __int16 *)(v8[513] + 168) )
      {
        v17 = v15;
        v18 = v8[a3 + 257];
        v27 = 0;
        BYTE1(v27) = BYTE1(v18) + HIBYTE(v17);
        LOBYTE(v27) = v18 + v17;
        BYTE2(v27) = ((unsigned int)v8[a3 + 257] >> 16) + BYTE2(a8);
        v11 = a4;
        sub_4A50B0(
          v8[513],
          v16,
          (int)a4,
          v12 + (v8[773] - *((signed __int16 *)v8 + v16 + 1290)) / 2 - *((signed __int16 *)v8 + v16 + 1034),
          a6,
          a7 | (v8[a3 + 1] << 23),
          v27,
          0,
          0,
          0);
        v15 = a8;
      }
      v12 += v8[773];
      v19 = a2 + 1;
      a2 = v19;
      v14 = *v19;
    }
    while ( v14 );
  }
  (*(void (__thiscall **)(_DWORD *))(*v11 + 96))(v11);
  return v12 - v20;
}

//----- (0049AD10) --------------------------------------------------------
unsigned int __thiscall sub_49AD10(_DWORD *this, const char *a2)
{
  return strlen(a2) * this[774];
}

//----- (0049AD40) --------------------------------------------------------
int __thiscall sub_49AD40(_DWORD *this, char *a2)
{
  int v2; // ebx
  int result; // eax
  char *v4; // esi
  char v5; // dl
  int v6; // edi
  int v7; // edx
  int v8; // edx

  v2 = this[513];
  result = 0;
  if ( v2 )
  {
    v4 = a2;
    v5 = *a2;
    if ( *a2 )
    {
      v6 = this[515];
      do
      {
        v7 = v5 - v6;
        if ( v7 < 0 || v7 >= *(signed __int16 *)(v2 + 168) )
          v8 = *((signed __int16 *)this + 1322 - v6);
        else
          v8 = *((signed __int16 *)this + v7 + 1290);
        ++v4;
        result += v8;
        v5 = *v4;
      }
      while ( *v4 );
    }
  }
  return result;
}

//----- (0049ADA0) --------------------------------------------------------
int __thiscall sub_49ADA0(_DWORD *this, char *a2, int a3)
{
  int result; // eax
  char *v4; // edi
  char v5; // dl
  int v6; // esi
  int v7; // ebx
  int v8; // edx
  int v9; // edx

  result = this[513];
  if ( result )
  {
    v4 = a2;
    v5 = *a2;
    result = 0;
    v6 = 0;
    if ( *a2 )
    {
      v7 = this[515];
      do
      {
        v8 = v5 - v7;
        if ( v8 < 0 || v8 >= *(signed __int16 *)(this[513] + 168) )
          v9 = *((signed __int16 *)this + 1322 - v7);
        else
          v9 = *((signed __int16 *)this + v8 + 1290);
        v6 += v9;
        ++v4;
        if ( v6 > a3 )
          break;
        v5 = *v4;
        ++result;
      }
      while ( *v4 );
    }
  }
  return result;
}

//----- (0049AE10) --------------------------------------------------------
__int16 __thiscall sub_49AE10(_DWORD *this, int a2)
{
  _DWORD *v2; // eax
  int v3; // ecx
  int v5; // esi

  v2 = this;
  v3 = this[513];
  if ( !v3 )
    return 0;
  v5 = v2[a2 + 1] + 1;
  return *((_WORD *)sub_4A4B90(v3, a2, v2[a2 + 257]) + v5);
}

//----- (0049AE50) --------------------------------------------------------
int __thiscall sub_49AE50(_DWORD *this, void *Dst, void *Src, int a4)
{
  int result; // eax
  char *v5; // ebx
  char *v6; // esi
  signed int v7; // ebp
  int v8; // edi
  char v9; // cl
  char *v10; // ebx
  signed int v11; // eax
  bool v12; // zf
  _DWORD *v13; // [esp+0h] [ebp-4h]

  v13 = this;
  if ( !this[513] )
    return 0;
  v5 = (char *)Dst;
  v6 = (char *)Src;
  *(_BYTE *)Dst = 0;
  v7 = 0;
  if ( !*(_BYTE *)Src )
    return 1;
  while ( 1 )
  {
    for ( ; *v6 == 32; ++v6 )
      ;
    v8 = sub_49ADA0(this, v6, a4);
    memcpy(v5, v6, v8);
    v9 = v6[v8];
    v6 += v8;
    v10 = &v5[v8];
    if ( v9 )
    {
      v11 = 0;
      if ( v9 != 32 )
      {
        while ( 1 )
        {
          v12 = v11 == 10;
          if ( v11 >= 10 )
            break;
          --v6;
          ++v11;
          if ( *v6 == 32 )
          {
            v12 = v11 == 10;
            break;
          }
        }
        if ( v12 )
        {
          v6 += 10;
          v11 = 0;
        }
      }
      v10 -= v11;
    }
    *v10 = 0;
    v5 = v10 + 1;
    ++v7;
    if ( !*v6 )
      break;
    this = v13;
  }
  result = v7;
  if ( v7 <= 1 )
    return 1;
  return result;
}

//----- (0049AF00) --------------------------------------------------------
int __thiscall sub_49AF00(_DWORD *this, int a2, char *a3, int a4, int a5, int a6)
{
  _DWORD *v6; // edi
  char v8; // al
  int i; // ebp
  int v10; // ecx
  int v11; // esi
  int v12; // edx
  int v13; // ecx
  int v14; // eax
  int v15; // edx
  int v16; // eax
  void (__thiscall *v17)(int, int *, int, int, int, signed int, _DWORD); // edx
  int v18; // eax
  char *v19; // eax
  int v20; // [esp+4h] [ebp-10h]
  int v21; // [esp+8h] [ebp-Ch]
  int v22; // [esp+Ch] [ebp-8h]
  int v23; // [esp+10h] [ebp-4h]

  v6 = this;
  if ( !this[513] )
    return 0;
  v8 = *a3;
  for ( i = a5; v8; v8 = *v19 )
  {
    v10 = v6[515];
    v11 = v8 - v10;
    if ( v11 < 0 || (v12 = v6[513], v11 >= *(signed __int16 *)(v12 + 168)) )
    {
      v18 = *((signed __int16 *)v6 + 1322 - v10);
    }
    else
    {
      v13 = v6[513];
      v14 = v11 * *(signed __int16 *)(v12 + 172) + *((signed __int16 *)v6 + v11 + 1034);
      v15 = *((signed __int16 *)v6 + v11 + 1290);
      v20 = v14;
      v16 = v15 + v14 - 1;
      v17 = *(void (__thiscall **)(int, int *, int, int, int, signed int, _DWORD))(*(_DWORD *)a2 + 4);
      v22 = v16;
      v21 = 0;
      v23 = *(signed __int16 *)(v13 + 174);
      v17(a2, &v20, a4, i, a6, 1, 0);
      v18 = *((signed __int16 *)v6 + v11 + 1290);
    }
    i += v18;
    v19 = a3 + 1;
    a3 = v19;
  }
  return i - a5;
}

//----- (0049AFF0) --------------------------------------------------------
int __thiscall sub_49AFF0(_DWORD *this, int a2, const char *a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  const char *v8; // edi
  unsigned int v9; // ecx
  int v10; // eax
  int v11; // edx
  char v12; // cl
  int v13; // ebp
  int v14; // edx
  int v15; // edi
  int v16; // ecx
  int v17; // ebx
  int v18; // edx
  int v19; // [esp+4h] [ebp-10h]
  int v20; // [esp+8h] [ebp-Ch]
  int v21; // [esp+Ch] [ebp-8h]
  int v22; // [esp+10h] [ebp-4h]
  int i; // [esp+24h] [ebp+10h]

  v6 = this;
  if ( !this[513] )
    return 0;
  v8 = a3;
  v9 = strlen(a3);
  v10 = v6[773];
  v11 = v9 * v6[773];
  v12 = *a3;
  v13 = a5 - v11;
  for ( i = a5 - v11; v12; a3 = v8 )
  {
    v14 = v12 - v6[515];
    if ( v14 >= 0 && v14 < *(signed __int16 *)(v6[513] + 168) )
    {
      v15 = v6[513];
      v16 = *((signed __int16 *)v6 + v14 + 1034);
      v17 = v14 * *(signed __int16 *)(v15 + 172);
      v18 = *((signed __int16 *)v6 + v14 + 1290);
      v19 = v17 + v16;
      v21 = v18 + v17 + v16 - 1;
      v20 = 0;
      v22 = *(signed __int16 *)(v15 + 174);
      (*(void (__stdcall **)(int *, int, int, int, signed int, _DWORD))(*(_DWORD *)a2 + 4))(
        &v19,
        a4,
        v13 + (v10 - v18) / 2,
        a6,
        1,
        0);
      v8 = a3;
    }
    v10 = v6[773];
    v12 = (v8++)[1];
    v13 += v10;
  }
  return v13 - i;
}

//----- (0049B100) --------------------------------------------------------
int __thiscall sub_49B100(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // eax

  v8 = this;
  v9 = a2 - this[515];
  if ( a2 - this[515] >= 0 && v9 < *(signed __int16 *)(this[513] + 168) )
  {
    v10 = sub_4015FF(a8, this[a3 + 257]);
    sub_4A50B0(v8[513], v9, a4, a5 - *((signed __int16 *)v8 + v9 + 1034), a6, a7 | (v8[a3 + 1] << 23), v10, 0, 0, 0);
  }
  return *((signed __int16 *)v8 + v9 + 1290);
}
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);

//----- (0049B190) --------------------------------------------------------
int __thiscall sub_49B190(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // esi
  int v9; // ebx
  int result; // eax
  __int64 v11; // rax
  int v12; // edi
  int v13; // eax

  v8 = this;
  v9 = a2 - this[515];
  if ( a2 - this[515] >= 0 )
  {
    result = this[774];
    if ( v9 >= *(signed __int16 *)(this[513] + 168) )
      return result;
    v11 = result - *((signed __int16 *)this + v9 + 1290);
    v12 = ((signed int)v11 - HIDWORD(v11)) >> 1;
    v13 = sub_4015FF(a8, this[a3 + 257]);
    sub_4A50B0(
      v8[513],
      v9,
      a4,
      a5 + v12 - *((signed __int16 *)v8 + v9 + 1034),
      a6,
      a7 | (v8[a3 + 1] << 23),
      v13,
      0,
      0,
      0);
  }
  return v8[774];
}
// 4015FF: using guessed type _DWORD __cdecl sub_4015FF(_DWORD, _DWORD);

//----- (0049B230) --------------------------------------------------------
int __thiscall sub_49B230(_DWORD *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8)
{
  int v8; // edi
  char *v10; // ebx
  unsigned int v11; // kr00_4
  int v12; // edx
  int v13; // ebp
  int v14; // esi
  char v15; // al
  _DWORD *v16; // [esp+8h] [ebp-14h]
  int v17; // [esp+Ch] [ebp-10h]
  int v18; // [esp+10h] [ebp-Ch]
  unsigned int v19; // [esp+14h] [ebp-8h]
  int v20; // [esp+18h] [ebp-4h]
  int i; // [esp+20h] [ebp+4h]

  v8 = this[513];
  v16 = this;
  if ( !v8 )
    return 0;
  v10 = (char *)a2;
  v11 = strlen(a2);
  v12 = *(signed __int16 *)(v8 + 174);
  v13 = a6;
  v14 = a5;
  v19 = a5 + v11 * this[774];
  v17 = a5;
  v18 = a6;
  v20 = a6 + v12;
  sub_49A890(a4, &v17);
  (*(void (__thiscall **)(_DWORD *, int *, int *))(*a4 + 92))(a4, &a6, &a5);
  v15 = *a2;
  for ( i = v14; *v10; v15 = *v10 )
  {
    ++v10;
    v14 += sub_49B190(v16, v15, a3, (int)a4, v14, v13, a7, a8);
  }
  (*(void (__thiscall **)(_DWORD *))(*a4 + 96))(a4);
  return v14 - i;
}

//----- (0049B310) --------------------------------------------------------
int __thiscall sub_49B310(_DWORD *this, char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // esi
  int v9; // edi
  char *v11; // ebx
  int v12; // eax
  int v13; // ebp
  int v14; // eax
  _DWORD *v15; // edi
  char v16; // al
  __int16 v17; // cx
  int v18; // edx
  int v19; // edi
  __int16 v20; // kr00_2
  int v21; // ecx
  int v22; // [esp+10h] [ebp-1Ch]
  char v23; // [esp+14h] [ebp-18h]
  char v24; // [esp+18h] [ebp-14h]
  int v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+20h] [ebp-Ch]
  int v27; // [esp+24h] [ebp-8h]
  int v28; // [esp+28h] [ebp-4h]
  int v29; // [esp+3Ch] [ebp+10h]

  v8 = this;
  v9 = this[513];
  if ( !v9 )
    return 0;
  v11 = a2;
  v12 = sub_49AD40(this, a2);
  v13 = a5;
  v22 = v12;
  v27 = a5 + v12;
  v14 = *(signed __int16 *)(v9 + 174);
  v15 = a4;
  v26 = a6;
  v25 = a5;
  v28 = a6 + v14;
  sub_49A890(a4, &v25);
  (*(void (__thiscall **)(_DWORD *, char *, char *))(*v15 + 92))(v15, &v24, &v23);
  v16 = *a2;
  if ( *a2 )
  {
    v17 = a8;
    do
    {
      v18 = v8[515];
      v19 = v16 - v18;
      if ( v19 < 0 || v19 >= *(signed __int16 *)(v8[513] + 168) )
      {
        v13 += *((signed __int16 *)v8 + 1322 - v18);
      }
      else
      {
        v20 = v17;
        v21 = v8[a3 + 257];
        v29 = 0;
        BYTE1(v29) = BYTE1(v21) + HIBYTE(v20);
        BYTE2(v29) = (unsigned __int16)(v8[a3 + 257] >> 16) + BYTE2(a8);
        LOBYTE(v29) = v21 + v20;
        sub_4A50B0(
          v8[513],
          v19,
          (int)a4,
          v13 - *((signed __int16 *)v8 + v19 + 1034),
          a6,
          a7 | (v8[a3 + 1] << 23),
          v29,
          0,
          0,
          0);
        v11 = a2;
        v13 += *((signed __int16 *)v8 + v19 + 1290);
        v17 = a8;
      }
      v16 = (v11++)[1];
      a2 = v11;
    }
    while ( v16 );
    v15 = a4;
  }
  (*(void (__thiscall **)(_DWORD *))(*v15 + 96))(v15);
  return v22;
}

//----- (0049B490) --------------------------------------------------------
int __thiscall sub_49B490(_DWORD *this, const char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8)
{
  int result; // eax

  if ( this[513] )
    result = sub_49B230(this, a2, a3, a4, a5 - strlen(a2) * this[774], a6, a7, a8);
  else
    result = 0;
  return result;
}

//----- (0049B4F0) --------------------------------------------------------
int __thiscall sub_49B4F0(_DWORD *this, char *a2, int a3, _DWORD *a4, int a5, int a6, int a7, int a8)
{
  int v9; // eax
  _DWORD *v10; // ecx

  if ( !this[513] )
    return 0;
  v9 = sub_49AD40(this, a2);
  return sub_49B310(v10, a2, a3, a4, a5 - v9, a6, a7, a8);
}

//----- (0049B540) --------------------------------------------------------
_DWORD *__thiscall sub_49B540(void *Memory, char a2)
{
  _DWORD *v2; // esi
  void (__stdcall ***v3)(signed int); // ecx

  v2 = Memory;
  v3 = (void (__stdcall ***)(signed int))*((_DWORD *)Memory + 513);
  *v2 = &FontManager::`vftable';
  if ( v3 && v2[514] )
    (**v3)(1);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51D2D8: using guessed type void *FontManager::`vftable';

//----- (0049B580) --------------------------------------------------------
signed int __cdecl sub_49B580(int *a1, int *a2, _DWORD *a3)
{
  int v3; // esi
  int v4; // esi
  int v5; // esi
  int v6; // esi
  signed int result; // eax

  v3 = *a1;
  if ( a1[2] <= *a1 )
    goto LABEL_16;
  if ( *a2 < v3 )
  {
    *a3 += v3 - *a2;
    *a2 = *a1;
  }
  v4 = a2[1];
  if ( v4 < a1[1] )
  {
    a3[1] += a1[1] - v4;
    a2[1] = a1[1];
  }
  v5 = a2[2];
  if ( v5 > a1[2] )
  {
    a3[2] += a1[2] - v5;
    a2[2] = a1[2];
  }
  v6 = a2[3];
  if ( v6 > a1[3] )
  {
    a3[3] += a1[3] - v6;
    a2[3] = a1[3];
  }
  if ( *a2 < a2[2] && a2[1] < a2[3] )
LABEL_16:
    result = 0;
  else
    result = 1;
  return result;
}

//----- (0049B600) --------------------------------------------------------
signed int __cdecl sub_49B600(int *a1, _DWORD *a2)
{
  int v2; // edx
  int v3; // edx
  int v4; // edx
  int v5; // ecx
  signed int result; // eax

  v2 = *a1;
  if ( a1[2] <= *a1 )
    goto LABEL_16;
  if ( *a2 < v2 )
    *a2 = v2;
  v3 = a1[1];
  if ( a2[1] < v3 )
    a2[1] = v3;
  v4 = a1[2];
  if ( a2[2] > v4 )
    a2[2] = v4;
  v5 = a1[3];
  if ( a2[3] > v5 )
    a2[3] = v5;
  if ( *a2 < a2[2] && a2[1] < a2[3] )
LABEL_16:
    result = 0;
  else
    result = 1;
  return result;
}

//----- (0049B650) --------------------------------------------------------
_DWORD *__thiscall sub_49B650(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &Surface::`vftable';
  this[5] = 0;
  this[1] = 0;
  this[2] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  return result;
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0049B6A0) --------------------------------------------------------
_DWORD *__thiscall sub_49B6A0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  void (__stdcall *v3)(int, int *); // eax
  int v4; // edx
  int v6; // [esp+4h] [ebp-6Ch]
  int v7; // [esp+Ch] [ebp-64h]
  int v8; // [esp+10h] [ebp-60h]

  v2 = this;
  this[5] = a2;
  *this = &Surface::`vftable';
  v3 = *(void (__stdcall **)(int, int *))(*(_DWORD *)a2 + 88);
  v6 = 108;
  v3(a2, &v6);
  v4 = v7;
  v2[1] = v8;
  v2[2] = v4;
  v2[6] = 0;
  v2[7] = 0;
  v2[8] = 0;
  v2[9] = 0;
  v2[37] = 0;
  v2[38] = 0;
  v2[39] = 0;
  v2[40] = 0;
  v2[3] = -1;
  v2[4] = -1;
  return v2;
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0049B710) --------------------------------------------------------
void __thiscall sub_49B710(_DWORD *this)
{
  *this = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0049B720) --------------------------------------------------------
int __thiscall sub_49B720(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax

  this[38] = a2;
  result = a3;
  this[39] = a4;
  this[40] = a3;
  return result;
}

//----- (0049B750) --------------------------------------------------------
int __thiscall sub_49B750(_DWORD *this)
{
  int result; // eax

  result = this[39];
  this[38] = 0;
  return result;
}

//----- (0049B770) --------------------------------------------------------
int __thiscall sub_49B770(_DWORD *this, int *a2, int a3, int a4, int a5, int a6, int a7)
{
  int *v7; // edx
  _DWORD *v8; // eax
  int v9; // edx
  int v10; // ecx
  int v12; // [esp+0h] [ebp-10h]
  int v13; // [esp+4h] [ebp-Ch]
  int v14; // [esp+8h] [ebp-8h]
  int v15; // [esp+Ch] [ebp-4h]

  v7 = a2;
  v8 = this;
  if ( !a2 )
  {
    v9 = this[2];
    v12 = 0;
    v13 = 0;
    v10 = this[1];
    v15 = v9;
    v14 = v10;
    v7 = &v12;
  }
  return (*(int (__stdcall **)(int, int, _DWORD *, int *, int, int))(*(_DWORD *)a3 + 28))(a4, a5, v8, v7, a6, a7);
}

//----- (0049B7D0) --------------------------------------------------------
int __thiscall sub_49B7D0(_DWORD *this, int *a2, int a3, int a4, int a5)
{
  int *v5; // edx
  _DWORD *v6; // eax
  int v7; // edx
  int v8; // ecx
  int v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]
  int v12; // [esp+8h] [ebp-8h]
  int v13; // [esp+Ch] [ebp-4h]

  v5 = a2;
  v6 = this;
  if ( !a2 )
  {
    v7 = this[2];
    v10 = 0;
    v11 = 0;
    v8 = this[1];
    v13 = v7;
    v12 = v8;
    v5 = &v10;
  }
  return (*(int (__stdcall **)(int, _DWORD *, int *, int))(*(_DWORD *)a3 + 32))(a4, v6, v5, a5);
}

//----- (0049B820) --------------------------------------------------------
int __thiscall sub_49B820(_DWORD *this, int a2, int *a3, int a4, int a5, int a6)
{
  int *v6; // edx
  _DWORD *v7; // eax
  int v8; // edx
  int v9; // ecx
  int v11; // [esp+0h] [ebp-10h]
  int v12; // [esp+4h] [ebp-Ch]
  int v13; // [esp+8h] [ebp-8h]
  int v14; // [esp+Ch] [ebp-4h]

  v6 = a3;
  v7 = this;
  if ( !a3 )
  {
    v8 = this[2];
    v11 = 0;
    v12 = 0;
    v9 = this[1];
    v14 = v8;
    v13 = v9;
    v6 = &v11;
  }
  return (*(int (__stdcall **)(int, int, int, _DWORD *, int *))(*(_DWORD *)a4 + 36))(a2, a5, a6, v7, v6);
}

//----- (0049B870) --------------------------------------------------------
int __thiscall sub_49B870(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int result; // eax
  int v5; // ebx
  int v6; // edi
  int v7; // eax
  int v8; // edx
  unsigned int v9; // eax
  unsigned __int8 *v10; // ecx
  int v11; // edi
  int v12; // edi
  int v13; // edi

  v3 = this;
  if ( !this[5] )
    return 0;
  v5 = a2;
  if ( a2 < this[6] )
    return 0;
  if ( a2 >= this[8] )
    return 0;
  v6 = a3;
  if ( a3 < this[7] )
    return 0;
  if ( a3 >= this[9] )
    return 0;
  v7 = (*(int (__stdcall **)(int *, int *))(*this + 92))(&a3, &a2);
  if ( !v7 )
    return 0;
  v8 = v7 + v5 * a2;
  v9 = v3[31];
  v10 = (unsigned __int8 *)(v8 + v6 * a3);
  if ( v9 == 8 )
  {
    v11 = *v10;
    (*(void (__thiscall **)(_DWORD *))(*v3 + 96))(v3);
    result = v11;
  }
  else if ( v9 > 0x10 )
  {
    if ( v9 > 0x18 )
      v13 = *(_DWORD *)v10;
    else
      v13 = *(unsigned __int16 *)v10 | (v10[2] << 16);
    (*(void (__thiscall **)(_DWORD *))(*v3 + 96))(v3);
    result = v13;
  }
  else
  {
    v12 = *(unsigned __int16 *)v10;
    (*(void (__thiscall **)(_DWORD *))(*v3 + 96))(v3);
    result = v12;
  }
  return result;
}

//----- (0049B950) --------------------------------------------------------
__int16 __thiscall sub_49B950(_DWORD *this, int a2, int a3, __int16 a4)
{
  __int16 result; // ax

  if ( a2 >= this[6] && a2 < this[8] )
  {
    result = a3;
    if ( a3 >= this[7] && a3 < this[9] )
    {
      result = a4;
      *(_WORD *)(this[19] + a3 * this[14] + 2 * a2) = a4;
    }
  }
  return result;
}

//----- (0049B990) --------------------------------------------------------
void __thiscall sub_49B990(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // ebx
  _DWORD *v5; // esi
  int v6; // edi
  int v7; // eax
  _BYTE *v8; // eax
  int v9; // ecx
  _BYTE *v10; // eax

  v4 = a2;
  v5 = this;
  if ( a2 >= this[6] && a2 < this[8] )
  {
    v6 = a3;
    if ( a3 >= this[7] && a3 < this[9] )
    {
      v7 = (*(int (__stdcall **)(int *, int *))(*this + 92))(&a3, &a2);
      v8 = (_BYTE *)(v7 + v6 * a3 + v4 * a2);
      switch ( a2 )
      {
        case 1:
          *v8 = a4;
          (*(void (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
          break;
        case 2:
          *(_WORD *)v8 = a4;
          (*(void (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
          break;
        case 3:
          v9 = a4;
          *v8 = a4;
          v10 = v8 + 1;
          *v10 = BYTE1(v9);
          v10[1] = BYTE2(v9);
          (*(void (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
          break;
        case 4:
          *(_DWORD *)v8 = a4;
          goto LABEL_10;
        default:
LABEL_10:
          (*(void (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
          break;
      }
    }
  }
}

//----- (0049BA70) --------------------------------------------------------
void __thiscall sub_49BA70(_DWORD *this, int *a2, _DWORD *a3, int *a4, char a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // ebx
  int v8; // edi
  int v9; // ebp
  int v10; // edx
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // ecx
  double v15; // st7
  signed int v16; // eax
  int v17; // ebp
  int v18; // ebp
  double v19; // st6
  double v20; // st7
  int v21; // eax
  int v22; // ebp
  float v23; // [esp+4h] [ebp-24h]
  int v24; // [esp+8h] [ebp-20h]
  int v25; // [esp+Ch] [ebp-1Ch]
  int v26; // [esp+10h] [ebp-18h]
  int v27; // [esp+14h] [ebp-14h]
  int v28; // [esp+18h] [ebp-10h]
  int v29; // [esp+1Ch] [ebp-Ch]
  int v30; // [esp+20h] [ebp-8h]
  int v31; // [esp+24h] [ebp-4h]
  float v32; // [esp+34h] [ebp+Ch]

  v5 = this;
  if ( this[5] )
  {
    v6 = a2[1];
    v7 = a2[2];
    v8 = *a2;
    v9 = *a4;
    v27 = a2[3];
    v10 = a4[2];
    v25 = v6;
    v11 = a4[1];
    v30 = v10;
    v12 = a4[3];
    v13 = v5[6];
    v29 = v11;
    v14 = v5[8];
    v24 = v8;
    v26 = v7;
    v28 = v9;
    v31 = v12;
    if ( v14 <= v13 )
      goto LABEL_18;
    v32 = (double)(v30 - v9) / (double)(v7 - v8);
    v23 = (double)(v12 - v29) / (double)(v27 - v25);
    v15 = v32;
    if ( v8 < v13 )
    {
      v16 = (signed int)((double)(v13 - v8) * v15);
      v8 = v5[6];
      v28 = v16 + v9;
      v24 = v8;
    }
    if ( v25 < v5[7] )
    {
      v17 = v5[7];
      v29 += (signed int)((double)(v5[7] - v25) * v23);
      v25 = v17;
    }
    if ( v7 <= v5[8] )
    {
      v20 = v23;
    }
    else
    {
      v18 = v5[8];
      v19 = v15 * (double)(v7 - v18);
      v20 = v23;
      v30 -= (signed int)v19;
      v7 = v18;
      v26 = v18;
    }
    v21 = v27;
    if ( v27 > v5[9] )
    {
      v22 = v5[9];
      v31 -= (signed int)(v20 * (double)(v27 - v22));
      v27 = v22;
      v21 = v22;
    }
    if ( v8 < v7 && v25 < v21 )
    {
LABEL_18:
      if ( (*(int (__stdcall **)(_DWORD, int *, _DWORD, int *, int, _DWORD))(*(_DWORD *)v5[5] + 20))(
             v5[5],
             &v24,
             a3[5],
             &v28,
             ((a5 & 0xF) != 0 ? 0x8000 : 0) | 0x1000000,
             0) == -2005532222 )
      {
        (*(void (__thiscall **)(_DWORD *))(*v5 + 52))(v5);
        (*(void (__thiscall **)(_DWORD *))(*a3 + 52))(a3);
      }
    }
  }
}

//----- (0049BC20) --------------------------------------------------------
void __thiscall sub_49BC20(_DWORD *this, int a2, int a3, _DWORD *a4, int *a5, unsigned int a6, int a7)
{
  int v7; // ebx
  int v8; // edx
  int v9; // esi
  int v10; // ecx
  int v11; // eax
  _DWORD *v12; // esi
  _DWORD *v13; // edi
  int v14; // esi
  int v15; // ebp
  int v16; // eax
  int v17; // edi
  int v18; // edx
  _BYTE *v19; // ecx
  unsigned int v20; // esi
  unsigned __int16 v21; // bx
  _DWORD *v22; // [esp+10h] [ebp-2Ch]
  char v23; // [esp+14h] [ebp-28h]
  char v24; // [esp+18h] [ebp-24h]
  int v25; // [esp+1Ch] [ebp-20h]
  int v26; // [esp+20h] [ebp-1Ch]
  int v27; // [esp+24h] [ebp-18h]
  int v28; // [esp+28h] [ebp-14h]
  int v29; // [esp+2Ch] [ebp-10h]
  int v30; // [esp+30h] [ebp-Ch]
  int v31; // [esp+34h] [ebp-8h]
  int v32; // [esp+38h] [ebp-4h]

  v7 = (int)this;
  v22 = this;
  if ( this[5] )
  {
    v8 = *a5;
    v9 = a5[1];
    v10 = a5[3];
    v31 = a5[2];
    v32 = v10;
    v27 = a2 + v31 - v8;
    v28 = a3 + v10 - v9;
    v29 = v8;
    v30 = v9;
    v25 = a2;
    v26 = a3;
    if ( !sub_49B580((int *)(v7 + 24), &v25, &v29) )
    {
      sub_49A890((_DWORD *)v7, &v25);
      v11 = a6 & 0xF;
      switch ( v11 )
      {
        case 0:
        case 1:
          v12 = a4;
          if ( (*(int (__stdcall **)(_DWORD, int *, _DWORD, int *, int, _DWORD))(**(_DWORD **)(v7 + 20) + 20))(
                 *(_DWORD *)(v7 + 20),
                 &v25,
                 a4[5],
                 &v29,
                 (v11 != 0 ? 0x8000 : 0) | 0x1000000,
                 0) == -2005532222 )
          {
            (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 52))(v7);
            (*(void (__thiscall **)(_DWORD *))(*v12 + 52))(v12);
          }
          break;
        case 2:
          v13 = a4;
          a3 = (*(int (__thiscall **)(_DWORD *, int *, char *))(*a4 + 92))(a4, &a2, &v23);
          if ( a3 )
          {
            v14 = (*(int (__thiscall **)(int, unsigned int *, char *))(*(_DWORD *)v7 + 92))(v7, &a6, &v24);
            a5 = (int *)v14;
            if ( v14 )
            {
              v15 = v26;
              v16 = v30;
              if ( v26 < v28 )
              {
                v17 = v25;
                while ( 1 )
                {
                  v18 = v29 + a3 + a2 * v16;
                  v19 = (_BYTE *)(v17 + v14 + a6 * v15);
                  v20 = v27 + v14 + a6 * v15;
                  if ( (unsigned int)v19 < v20 )
                  {
                    do
                    {
                      HIBYTE(v21) = *v19++;
                      LOBYTE(v21) = *(_BYTE *)(++v18 - 1);
                      *(v19 - 1) = *(_BYTE *)(v21 + a7);
                    }
                    while ( (unsigned int)v19 < v20 );
                    v17 = v25;
                    v7 = (int)v22;
                  }
                  ++v15;
                  ++v16;
                  if ( v15 >= v28 )
                    break;
                  v14 = (int)a5;
                }
                v13 = a4;
              }
              (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 96))(v7);
            }
            (*(void (__thiscall **)(_DWORD *))(*v13 + 96))(v13);
          }
          break;
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
        case 8:
        case 9:
        case 10:
        case 11:
          sub_4A1230((int)a4, a7, &v29, v7, &v25, a6, a7);
          break;
        default:
          return;
      }
    }
  }
}

//----- (0049BE30) --------------------------------------------------------
int __thiscall sub_49BE30(_DWORD *this, unsigned int a2, unsigned int a3, int *a4)
{
  int *v4; // esi
  _DWORD *v5; // edi
  int v6; // ecx
  char v7; // al
  unsigned __int8 v8; // dl
  unsigned int v9; // ecx
  int v10; // eax
  int v11; // ecx
  int v12; // ebp
  int v13; // edi
  int v14; // ebx
  int v15; // esi
  int v16; // esi
  int v17; // edi
  int v18; // ebx
  int v19; // esi
  bool v20; // sf
  unsigned __int8 v21; // of
  int v22; // edi
  int v23; // ebx
  int v24; // ecx
  unsigned int v25; // eax
  __int16 v26; // ax
  __int16 v27; // ax
  int v28; // ecx
  _WORD *v29; // edx
  int v31; // [esp+8h] [ebp-68h]
  __int16 v32; // [esp+9h] [ebp-67h]
  _DWORD *v33; // [esp+Ch] [ebp-64h]
  int v34; // [esp+10h] [ebp-60h]
  int v35; // [esp+14h] [ebp-5Ch]
  _WORD *v36; // [esp+18h] [ebp-58h]
  int v37; // [esp+1Ch] [ebp-54h]
  int v38; // [esp+20h] [ebp-50h]
  int v39; // [esp+24h] [ebp-4Ch]
  int v40; // [esp+28h] [ebp-48h]
  _WORD *v41; // [esp+2Ch] [ebp-44h]
  int v42; // [esp+30h] [ebp-40h]
  int i; // [esp+34h] [ebp-3Ch]
  int v44; // [esp+38h] [ebp-38h]
  int v45; // [esp+3Ch] [ebp-34h]
  int v46; // [esp+40h] [ebp-30h]
  int v47; // [esp+44h] [ebp-2Ch]
  int v48; // [esp+48h] [ebp-28h]
  int v49; // [esp+4Ch] [ebp-24h]
  int v50; // [esp+50h] [ebp-20h]
  int v51; // [esp+54h] [ebp-1Ch]
  int v52; // [esp+58h] [ebp-18h]
  int v53; // [esp+5Ch] [ebp-14h]
  int v54; // [esp+60h] [ebp-10h]
  int v55; // [esp+64h] [ebp-Ch]
  int v56; // [esp+68h] [ebp-8h]
  int v57; // [esp+6Ch] [ebp-4h]
  unsigned __int8 v58; // [esp+74h] [ebp+4h]
  int v59; // [esp+74h] [ebp+4h]
  int v60; // [esp+74h] [ebp+4h]
  unsigned __int8 v61; // [esp+75h] [ebp+5h]
  unsigned __int8 v62; // [esp+76h] [ebp+6h]
  int v63; // [esp+78h] [ebp+8h]

  v4 = a4;
  v5 = this;
  v33 = this;
  if ( !a4 )
  {
    v6 = this[2];
    v54 = 0;
    v55 = 0;
    v56 = v5[1];
    v57 = v6;
    a4 = &v54;
    v4 = &v54;
  }
  sub_49A890(v5, v4);
  v42 = (*(int (__thiscall **)(_DWORD *, int *, int *))(*v5 + 92))(v5, &v34, &v44);
  if ( v44 == 2 )
  {
    v34 /= 2;
    if ( dword_576828 == 2 )
    {
      HIBYTE(v32) = (a2 >> 7) & 0xF8;
      LOBYTE(v32) = 8 * (a2 >> 5);
      v7 = a3;
      v62 = (a3 >> 7) & 0xF8;
      v8 = 8 * a2;
      LOBYTE(v9) = 2 * (a3 >> 5);
    }
    else
    {
      v32 = __PAIR__(BYTE1(a2), (unsigned __int8)(4 * (a2 >> 5))) & 0xF8FF;
      v7 = a3;
      v62 = BYTE1(a3) & 0xF8;
      v8 = 8 * a2;
      v9 = a3 >> 5;
    }
    v58 = 8 * v7;
    v61 = 4 * v9;
    v10 = v4[2] - *v4;
    v11 = v4[3] - v4[1];
    v12 = 1000 * HIBYTE(v32);
    v13 = 1000 * (unsigned __int8)v32;
    v14 = 1000 * v8;
    v15 = 1000 * v62;
    v35 = 1000 * v61;
    v40 = v10;
    v59 = 1000 * v58;
    v63 = 1000 * (unsigned __int8)v32;
    v31 = 1000 * v8;
    i = v15;
    if ( v10 / v11 > 3 || v11 / v40 > 3 )
    {
      v16 = (v15 + v12) / 2;
      v17 = (v13 + v35) / 2;
      v18 = (v59 + v14) / 2;
    }
    else
    {
      v16 = (v12 + 2 * v15) / 3;
      v17 = (v13 + 2 * v35) / 3;
      v18 = (v14 + 2 * v59) / 3;
    }
    v37 = v16;
    v38 = v17;
    v39 = v18;
    v48 = (v16 - v12) / v11;
    v49 = (v17 - v63) / v11;
    v50 = (v18 - v31) / v11;
    v51 = (i - v16) / v11;
    v52 = (v35 - v17) / v11;
    v53 = (v59 - v18) / v11;
    v19 = a4[1];
    v21 = __OFSUB__(v19, a4[3]);
    v20 = v19 - a4[3] < 0;
    v36 = (_WORD *)(v42 + 2 * (*a4 + v34 * a4[1]));
    for ( i = v19; v20 ^ v21; i = v19 )
    {
      if ( v19 >= v33[7] && v19 < v33[9] )
      {
        v60 = v31;
        v22 = v63;
        v23 = v12;
        v45 = (v37 - v12) / v40;
        v46 = (v38 - v63) / v40;
        v24 = v33[8];
        v47 = (v39 - v31) / v40;
        v35 = a4[2];
        if ( v35 >= v24 )
          v35 = v24;
        v41 = v36;
        v42 = *a4;
        if ( v42 < v35 )
        {
          do
          {
            v25 = v22 / 1000 | 32
                             * (((unsigned __int16)((signed int)((unsigned __int64)(274877907i64 * v23) >> 32) >> 6)
                               + ((unsigned int)((unsigned __int64)(274877907i64 * v23) >> 32) >> 31)) & 0xFFF8);
            if ( dword_576828 == 2 )
              v26 = v25 & 0xFFF8;
            else
              v26 = 2 * (v25 & 0xFFFC);
            v27 = (v60 / 1000 >> 3) | 4 * v26;
            v28 = v42;
            if ( v42 > v33[6] )
            {
              v29 = v41;
              *v41 = v27;
              v41 = v29 + 1;
            }
            v23 += v45;
            v22 += v46;
            v60 += v47;
            v42 = v28 + 1;
          }
          while ( v28 + 1 < v35 );
          v19 = i;
        }
      }
      v12 += v48;
      v63 += v49;
      v31 += v50;
      v38 += v52;
      v39 += v53;
      v36 += v34;
      v37 += v51;
      v21 = __OFSUB__(++v19, a4[3]);
      v20 = v19 - a4[3] < 0;
    }
    v5 = v33;
  }
  return (*(int (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
}
// 576828: using guessed type int dword_576828;

//----- (0049C240) --------------------------------------------------------
int __thiscall sub_49C240(void *this, int a2, int *a3, int a4)
{
  void *v4; // esi
  int v5; // ecx
  void (__thiscall *v6)(void *, int, int *); // edx
  void (__thiscall *v7)(void *, int, int *); // edx
  int v8; // ecx
  void (__thiscall *v9)(void *, int, int *); // edx
  int v10; // edi
  int (__thiscall *v11)(void *, int, int *); // edx
  int v13; // [esp+18h] [ebp-10h]
  int v14; // [esp+1Ch] [ebp-Ch]
  int v15; // [esp+20h] [ebp-8h]
  int v16; // [esp+24h] [ebp-4h]

  v13 = *a3;
  v15 = a4 + v13;
  v4 = this;
  v5 = a3[3];
  v6 = *(void (__thiscall **)(void *, int, int *))(*(_DWORD *)v4 + 40);
  v14 = a3[1];
  v16 = v5;
  v6(v4, a2, &v13);
  v7 = *(void (__thiscall **)(void *, int, int *))(*(_DWORD *)v4 + 40);
  v15 = a3[2];
  v13 = v15 - a4;
  v7(v4, a2, &v13);
  v8 = a3[2];
  v9 = *(void (__thiscall **)(void *, int, int *))(*(_DWORD *)v4 + 40);
  v13 = *a3;
  v14 = a3[1];
  v16 = a4 + v14;
  v15 = v8;
  v9(v4, a2, &v13);
  v10 = a3[3];
  v11 = *(int (__thiscall **)(void *, int, int *))(*(_DWORD *)v4 + 40);
  v14 = v10 - a4;
  v16 = v10;
  return v11(v4, a2, &v13);
}

//----- (0049C2F0) --------------------------------------------------------
void __thiscall sub_49C2F0(int *this, int a2, int *a3)
{
  int *v3; // edi
  bool v4; // zf
  int v5; // eax
  int v6; // ecx
  int v7; // ecx
  int v8; // edx
  int v9; // eax
  int v10; // ebp
  int v11; // eax
  int v12; // edx
  int v13; // ebx
  char *v14; // edx
  int i; // esi
  unsigned int v16; // ecx
  unsigned __int8 v17; // cf
  char *v18; // edi
  int j; // ecx
  int v20; // eax
  int v21; // eax
  int v22; // [esp+Ch] [ebp-80h]
  int v23; // [esp+10h] [ebp-7Ch]
  int *v24; // [esp+14h] [ebp-78h]
  int v25; // [esp+18h] [ebp-74h]
  int v26; // [esp+1Ch] [ebp-70h]
  int v27; // [esp+20h] [ebp-6Ch]
  int v28; // [esp+24h] [ebp-68h]
  int Dst; // [esp+28h] [ebp-64h]
  int v30; // [esp+78h] [ebp-14h]

  v3 = this;
  v4 = this[5] == 0;
  v24 = this;
  if ( !v4 )
  {
    if ( a3 )
    {
      v7 = a3[1];
      v25 = *a3;
      v8 = a3[2];
      v9 = a3[3];
      v26 = v7;
      v27 = v8;
      v28 = v9;
    }
    else
    {
      v5 = this[1];
      v6 = this[2];
      v25 = 0;
      v26 = 0;
      v27 = v5;
      v28 = v6;
    }
    if ( !sub_49B600(v3 + 6, &v25) )
    {
      sub_49A890(v3, &v25);
      if ( v3[37] <= 0 )
      {
        memset(&Dst, 0, 0x64u);
        v20 = v3[5];
        v30 = a2;
        Dst = 100;
        v21 = (*(int (__stdcall **)(int, int *, _DWORD, _DWORD, signed int, int *))(*(_DWORD *)v20 + 20))(
                v20,
                &v25,
                0,
                0,
                1024,
                &Dst);
        if ( v21 == -2005532222 )
        {
LABEL_19:
          (*(void (__thiscall **)(int *))(*v3 + 52))(v3);
        }
        else
        {
          while ( v21 == -2005532132 )
          {
            v21 = (*(int (__stdcall **)(int, int *, _DWORD, _DWORD, signed int, int *))(*(_DWORD *)v3[5] + 20))(
                    v3[5],
                    &v25,
                    0,
                    0,
                    1024,
                    &Dst);
            if ( v21 == -2005532222 )
              goto LABEL_19;
          }
        }
      }
      else
      {
        v10 = (*(int (__thiscall **)(int *, int *, int *))(*v3 + 92))(v3, &v22, &v23);
        if ( v23 == 2 )
        {
          v11 = v22 / 2;
          v12 = v25 + v26 * (v22 / 2);
          v13 = v27 - v25;
          v22 /= 2;
          v14 = (char *)(v10 + 2 * v12);
          for ( i = v26; i < v28; v14 += 2 * v11 )
          {
            if ( v14 < &v14[2 * v13] )
            {
              LOWORD(v10) = a2;
              v16 = ((unsigned int)(2 * v13 - 1) >> 1) + 1;
              v10 <<= 16;
              LOWORD(v10) = a2;
              v17 = v16 & 1;
              v16 >>= 1;
              memset32(v14, v10, v16);
              v18 = &v14[4 * v16];
              for ( j = v17; j; --j )
              {
                *(_WORD *)v18 = a2;
                v18 += 2;
              }
              v11 = v22;
              v3 = v24;
            }
            ++i;
          }
        }
        (*(void (__thiscall **)(int *))(*v3 + 96))(v3);
      }
    }
  }
}

//----- (0049C4A0) --------------------------------------------------------
_DWORD *__thiscall sub_49C4A0(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a2;
  *a2 = this[6];
  a2[1] = this[7];
  a2[2] = this[8];
  a2[3] = this[9];
  return result;
}

//----- (0049C4C0) --------------------------------------------------------
int __thiscall sub_49C4C0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // esi
  int v6; // edx
  int v8; // [esp+4h] [ebp-10h]
  int v9; // [esp+8h] [ebp-Ch]
  int v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+10h] [ebp-4h]

  v5 = a4;
  if ( a4 == -1 )
    v5 = this[1];
  v6 = a5;
  if ( a5 == -1 )
    v6 = this[2];
  v8 = a2;
  v10 = v5 + a2;
  v9 = a3;
  v11 = v6 + a3;
  return (*(int (__stdcall **)(int *))(*this + 64))(&v8);
}

//----- (0049C510) --------------------------------------------------------
signed int __thiscall sub_49C510(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  signed int v3; // esi
  signed int v4; // eax
  int v5; // eax
  int v6; // eax
  signed int v7; // esi
  signed int v8; // eax
  signed int result; // eax

  this[6] = *a2;
  this[7] = a2[1];
  this[8] = a2[2];
  this[9] = a2[3];
  v2 = this[6];
  v3 = this[1];
  if ( v3 >= (v2 < 0 ? 0 : v2) )
    v4 = v2 < 0 ? 0 : v2;
  else
    v4 = this[1];
  this[6] = v4;
  v5 = this[8];
  if ( v3 >= (v5 < 0 ? 0 : v5) )
    v3 = v5 < 0 ? 0 : v5;
  v6 = this[7];
  this[8] = v3;
  v7 = this[2];
  if ( v7 >= (v6 < 0 ? 0 : v6) )
    v8 = v6 < 0 ? 0 : v6;
  else
    v8 = this[2];
  this[7] = v8;
  result = this[9];
  if ( v7 >= (result < 0 ? 0 : result) )
  {
    result = result < 0 ? 0 : result;
    this[9] = result;
  }
  else
  {
    this[9] = v7;
  }
  return result;
}

//----- (0049C5D0) --------------------------------------------------------
int __thiscall sub_49C5D0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // ecx
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  result = a2;
  this[3] = a2;
  this[4] = a3;
  if ( a2 != -1 )
  {
    v4 = this[5];
    v6 = a3;
    v5 = a2;
    result = (*(int (__stdcall **)(int, signed int, int *))(*(_DWORD *)v4 + 116))(v4, 8, &v5);
  }
  return result;
}

//----- (0049C610) --------------------------------------------------------
int __thiscall sub_49C610(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  _DWORD *v5; // edi
  int v6; // eax

  v3 = this;
  if ( !this[37] )
  {
    if ( !this[5] )
      return 0;
    v5 = this + 10;
    memset(this + 10, 0, 0x6Cu);
    v6 = v3[5];
    *v5 = 108;
    if ( (*(int (__stdcall **)(int, _DWORD, _DWORD *, signed int, _DWORD))(*(_DWORD *)v6 + 100))(v6, 0, v3 + 10, 1, 0) )
    {
      (*(void (__thiscall **)(_DWORD *))(*v3 + 52))(v3);
      if ( (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD *, signed int, _DWORD))(*(_DWORD *)v3[5] + 100))(
             v3[5],
             0,
             v3 + 10,
             1,
             0) )
      {
        return 0;
      }
    }
  }
  ++v3[37];
  if ( a2 )
    *a2 = v3[14];
  if ( a3 )
    *a3 = v3[31] >> 3;
  return v3[19];
}

//----- (0049C6B0) --------------------------------------------------------
void __thiscall sub_49C6B0(_DWORD *this)
{
  bool v1; // zf
  int v2; // eax

  v1 = this[37]-- == 1;
  if ( v1 )
  {
    v2 = this[5];
    if ( v2 )
      (*(void (__stdcall **)(int, _DWORD))(*(_DWORD *)v2 + 128))(v2, this[19]);
  }
}

//----- (0049C6D0) --------------------------------------------------------
int __thiscall sub_49C6D0(_DWORD **this, int a2)
{
  int result; // eax

  if ( this[5] )
    result = (*(int (__stdcall **)(_DWORD *, int))(*this[5] + 68))(this[5], a2);
  return result;
}

//----- (0049C6F0) --------------------------------------------------------
int __thiscall sub_49C6F0(_DWORD **this, int a2)
{
  int result; // eax

  if ( this[5] )
    result = (*(int (__stdcall **)(_DWORD *, int))(*this[5] + 104))(this[5], a2);
  return result;
}

//----- (0049C710) --------------------------------------------------------
int __thiscall sub_49C710(_DWORD *this, int a2, int *a3)
{
  _DWORD *v3; // ebp
  int v4; // ecx
  int v5; // ebx
  int v6; // edi
  int v7; // eax
  int v8; // ecx
  int v9; // eax
  int result; // eax
  int v11; // eax
  int *v12; // esi
  int v13; // ebp
  _BYTE *v14; // ecx
  unsigned int v15; // edx
  int v16; // [esp+Ch] [ebp-1Ch]
  int v17; // [esp+10h] [ebp-18h]
  _DWORD *v18; // [esp+14h] [ebp-14h]
  int v19; // [esp+20h] [ebp-8h]
  int v20; // [esp+24h] [ebp-4h]

  v3 = this;
  v18 = this;
  if ( a3 )
  {
    v5 = *a3;
    v6 = a3[1];
    v7 = a3[3];
    v19 = a3[2];
    v20 = v7;
  }
  else
  {
    v4 = this[2];
    v5 = 0;
    v6 = 0;
    v19 = v3[1];
    v20 = v4;
  }
  v8 = v3[8];
  v9 = v3[6];
  if ( v8 <= v9 )
    goto LABEL_28;
  if ( v5 < v9 )
    v5 = v3[6];
  if ( v6 < v3[7] )
    v6 = v3[7];
  if ( v19 > v8 )
    v19 = v3[8];
  result = v3[9];
  if ( v20 > result )
    v20 = v3[9];
  if ( v5 < v19 && v6 < v20 )
  {
LABEL_28:
    v11 = (*(int (__thiscall **)(_DWORD *, int *, int **))(*v3 + 92))(v3, &v16, &a3);
    v12 = a3;
    v17 = v11;
    if ( (a3 == (int *)1 || (signed int)a3 > 2 && (signed int)a3 <= 4) && v6 < v20 )
    {
      v13 = v19 - v5;
      do
      {
        v14 = (_BYTE *)(v17 + v16 * v6 + v5 * (_DWORD)v12);
        v15 = (unsigned int)&v14[(_DWORD)v12 * v13];
        if ( (unsigned int)v14 < v15 )
        {
          do
          {
            *v14 = *(_BYTE *)((unsigned __int8)*v14 + a2);
            ++v14;
          }
          while ( (unsigned int)v14 < v15 );
          v12 = a3;
        }
        ++v6;
      }
      while ( v6 < v20 );
      v3 = v18;
    }
    result = (*(int (__thiscall **)(_DWORD *))(*v3 + 96))(v3);
  }
  return result;
}

//----- (0049C830) --------------------------------------------------------
int __thiscall sub_49C830(_DWORD *this, HDC a2)
{
  _DWORD **v2; // esi
  HDC v4; // edi
  HDC v5; // ebx
  int v6; // [esp+18h] [ebp-4h]

  v2 = (_DWORD **)this;
  if ( !this[5] )
    return 0;
  v4 = a2;
  if ( a2 == (HDC)-1 || (*(int (__stdcall **)(_DWORD, HDC *))(*(_DWORD *)this[5] + 68))(this[5], &a2) )
  {
    v5 = a2;
  }
  else
  {
    v5 = (HDC)GetPixel(a2, 0, 0);
    SetPixel(a2, 0, 0, (COLORREF)v4);
    (*(void (__stdcall **)(_DWORD *, HDC))(*v2[5] + 104))(v2[5], a2);
  }
  v6 = ((int (__thiscall *)(_DWORD **, _DWORD, _DWORD))(*v2)[4])(v2, 0, 0);
  if ( v4 != (HDC)-1 && !(*(int (__stdcall **)(_DWORD *, HDC *))(*v2[5] + 68))(v2[5], &a2) )
  {
    SetPixel(a2, 0, 0, (COLORREF)v5);
    (*(void (__stdcall **)(_DWORD *, HDC))(*v2[5] + 104))(v2[5], a2);
  }
  return v6;
}

//----- (0049C8F0) --------------------------------------------------------
int __thiscall sub_49C8F0(void *this, _BYTE *a2, int a3)
{
  void *v3; // esi
  int v4; // eax
  _BYTE *v5; // ecx
  int v6; // eax
  signed int v7; // edi
  int v9; // [esp+8h] [ebp-8h]
  char v10; // [esp+Ch] [ebp-4h]

  v3 = this;
  v4 = (*(int (__thiscall **)(void *, int *, char *))(*(_DWORD *)this + 92))(this, &v9, &v10);
  v5 = a2;
  v6 = a3 * v9 + v4 - (_DWORD)a2;
  v7 = 256;
  do
  {
    *v5 = v5[v6];
    ++v5;
    --v7;
  }
  while ( v7 );
  return (*(int (__thiscall **)(void *))(*(_DWORD *)v3 + 96))(v3);
}

//----- (0049C940) --------------------------------------------------------
int __thiscall sub_49C940(void *this, _BYTE *a2, int a3)
{
  int (__stdcall *v3)(int *, char *); // eax
  int v4; // eax
  _BYTE *v5; // ecx
  signed int v6; // edx
  int v7; // edi
  signed int v8; // eax
  _BYTE *v9; // esi
  _BYTE *v10; // ecx
  _BYTE *v11; // ecx
  _BYTE *v12; // ecx
  int v14; // [esp+10h] [ebp-Ch]
  void *v15; // [esp+14h] [ebp-8h]
  char v16; // [esp+18h] [ebp-4h]

  v3 = *(int (__stdcall **)(int *, char *))(*(_DWORD *)this + 92);
  v15 = this;
  v4 = v3(&v14, &v16);
  v5 = a2;
  v6 = 0;
  v7 = v4 - 2;
  do
  {
    v8 = 2;
    v9 = (_BYTE *)(v7 + 4);
    do
    {
      if ( v8 - 2 == a3 )
        *v5 = v6;
      else
        *v5 = *(_BYTE *)(v7 + v8);
      v10 = v5 + 1;
      if ( v8 - 1 == a3 )
        *v10 = v6;
      else
        *v10 = *(v9 - 1);
      v11 = v10 + 1;
      if ( v8 == a3 )
        *v11 = v6;
      else
        *v11 = *v9;
      v12 = v11 + 1;
      if ( v8 + 1 == a3 )
        *v12 = v6;
      else
        *v12 = v9[1];
      v8 += 4;
      v5 = v12 + 1;
      v9 += 4;
    }
    while ( v8 - 2 < 256 );
    v7 += v14;
    ++v6;
  }
  while ( v6 < 256 );
  return (*(int (**)(void))(*(_DWORD *)v15 + 96))();
}

//----- (0049CA00) --------------------------------------------------------
void __thiscall sub_49CA00(_DWORD **this)
{
  _DWORD **v1; // esi

  v1 = this;
  if ( this[5] )
  {
    if ( (*(int (__stdcall **)(_DWORD *))(*this[5] + 96))(this[5]) )
      (*(void (__stdcall **)(_DWORD *))(*v1[5] + 108))(v1[5]);
  }
}

//----- (0049CA30) --------------------------------------------------------
signed int __thiscall sub_49CA30(_DWORD *this)
{
  _DWORD *v1; // esi
  signed int v2; // edi
  signed int result; // eax
  int v4; // edi
  int v5; // [esp+8h] [ebp-8h]
  char v6; // [esp+Ch] [ebp-4h]

  v1 = this;
  (*(void (__thiscall **)(_DWORD *, char *, int *))(*this + 92))(this, &v6, &v5);
  v2 = 0;
  switch ( v5 )
  {
    case 1:
      (*(void (__thiscall **)(_DWORD *))(*v1 + 96))(v1);
      result = 1;
      break;
    case 2:
      v4 = (v1[33] == 2016) + 2;
      (*(void (__thiscall **)(_DWORD *))(*v1 + 96))(v1);
      result = v4;
      break;
    case 3:
      (*(void (__thiscall **)(_DWORD *))(*v1 + 96))(v1);
      result = 4;
      break;
    case 4:
      v2 = 5;
      goto LABEL_6;
    default:
LABEL_6:
      (*(void (__thiscall **)(_DWORD *))(*v1 + 96))(v1);
      result = v2;
      break;
  }
  return result;
}

//----- (0049CB40) --------------------------------------------------------
int __thiscall sub_49CB40(_DWORD *this, int a2, __int16 a3, char *Filename)
{
  _DWORD *v4; // ebp
  int v5; // eax
  signed int v6; // ecx
  int result; // eax
  FILE *v8; // eax
  FILE *v9; // esi
  char *v10; // eax
  char *v11; // edx
  HRSRC v12; // eax
  HGLOBAL v13; // eax
  unsigned __int16 v14; // cx
  signed int v15; // eax
  signed int v16; // esi
  signed int v17; // ecx
  char *v18; // eax
  _DWORD *v19; // [esp+14h] [ebp-840h]
  char DstBuf; // [esp+18h] [ebp-83Ch]
  char v21; // [esp+28h] [ebp-82Ch]
  char v22; // [esp+50h] [ebp-804h]
  char v23; // [esp+51h] [ebp-803h]
  char v24; // [esp+52h] [ebp-802h]
  char v25[1021]; // [esp+53h] [ebp-801h]
  char v26; // [esp+450h] [ebp-404h]

  v4 = this;
  v5 = this[42];
  v19 = this;
  if ( v5 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v5 + 8))(v5);
    v4[42] = 0;
  }
  v6 = 0;
  do
  {
    *(&v22 + 4 * v6) = (char)-((v6 >> 5) & 7) / 7;
    *(&v23 + 4 * v6) = (char)-((v6 >> 2) & 7) / 7;
    result = 255 * (v6 & 3) / 3;
    *(&v24 + 4 * v6) = result;
    v25[4 * v6++] = 4;
  }
  while ( v6 < 256 );
  if ( Filename && *Filename && (result = _access(Filename, 0)) == 0 )
  {
    v8 = fopen(Filename, "rb");
    v9 = v8;
    if ( v8 )
    {
      fread(&DstBuf, 0xEu, 1u, v8);
      fread(&v21, 0x28u, 1u, v9);
      fread(&v26, 0x400u, 1u, v9);
      fclose(v9);
      v10 = &v21;
      v11 = &v26;
LABEL_12:
      if ( *(_DWORD *)v10 < 0x28u || (v14 = *((_WORD *)v10 + 7), v14 > 8u) )
      {
        v16 = 0;
      }
      else
      {
        v15 = *((_DWORD *)v10 + 8);
        if ( v15 )
          v16 = v15;
        else
          v16 = 1 << v14;
      }
      v17 = 0;
      if ( v16 > 0 )
      {
        v18 = v11 + 1;
        do
        {
          *(&v22 + 4 * v17) = v18[1];
          v18[&v22 - v11] = *v18;
          v18[&v23 - v11] = *(v18 - 1);
          v18[&v24 - v11] = 4;
          ++v17;
          v18 += 4;
        }
        while ( v17 < v16 );
        v4 = v19;
      }
      goto LABEL_22;
    }
  }
  else
  {
    if ( !a2 )
      return result;
    v12 = FindResourceA((HMODULE)a2, (LPCSTR)(unsigned __int16)a3, (LPCSTR)2);
    v13 = LoadResource((HMODULE)a2, v12);
    v10 = (char *)LockResource(v13);
    v11 = &v10[*(_DWORD *)v10];
    if ( v11 )
      goto LABEL_12;
  }
LABEL_22:
  result = v4[43];
  if ( result )
  {
    (*(void (__stdcall **)(int, signed int, char *, _DWORD *, _DWORD))(*(_DWORD *)result + 20))(
      result,
      68,
      &v22,
      v4 + 42,
      0);
    result = (*(int (__thiscall **)(_DWORD *))(*v4 + 132))(v4);
  }
  return result;
}
// 49CB40: using guessed type char var_801[1021];

//----- (0049CD70) --------------------------------------------------------
int __thiscall sub_49CD70(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int v3; // eax
  _DWORD *v4; // edi
  int result; // eax

  v2 = this;
  v3 = this[42];
  v4 = this + 42;
  if ( v3 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v3 + 8))(v3);
    *v4 = 0;
  }
  result = v2[43];
  if ( result )
  {
    (*(void (__stdcall **)(int, signed int, int, _DWORD *, _DWORD))(*(_DWORD *)result + 20))(result, 68, a2, v4, 0);
    result = (*(int (__thiscall **)(_DWORD *))(*v2 + 132))(v2);
  }
  return result;
}

//----- (0049CDC0) --------------------------------------------------------
void *__thiscall sub_49CDC0(_DWORD **this, void *Dst)
{
  void *result; // eax

  if ( this[42] )
    result = (void *)(*(int (__stdcall **)(_DWORD *, _DWORD, _DWORD, signed int, void *))(*this[42] + 16))(
                       this[42],
                       0,
                       0,
                       256,
                       Dst);
  else
    result = memset(Dst, 0, 0x400u);
  return result;
}

//----- (0049CE00) --------------------------------------------------------
int __thiscall sub_49CE00(int this)
{
  int v1; // esi
  int result; // eax

  v1 = this;
  if ( *(_DWORD *)(this + 172) && *(_DWORD *)(this + 168) )
  {
    if ( *(_DWORD *)(this + 20) )
    {
      (*(void (__stdcall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 164) + 124))(
        *(_DWORD *)(this + 164),
        *(_DWORD *)(this + 168));
      result = (*(int (__stdcall **)(_DWORD, _DWORD))(**(_DWORD **)(v1 + 20) + 124))(
                 *(_DWORD *)(v1 + 20),
                 *(_DWORD *)(v1 + 168));
    }
  }
  return result;
}

//----- (0049CE40) --------------------------------------------------------
int __thiscall sub_49CE40(void *this, int a2, int a3)
{
  void *v3; // esi
  signed int v4; // ecx
  int v5; // esi
  int v6; // eax
  signed int v7; // esi
  int v8; // ecx
  int v9; // ebp
  int v10; // ecx
  int v11; // ebx
  int v12; // eax
  void *v14; // [esp+10h] [ebp-40Ch]
  int v15; // [esp+14h] [ebp-408h]
  char v16; // [esp+18h] [ebp-404h]
  char v17; // [esp+1Ch] [ebp-400h]
  char v18; // [esp+1Dh] [ebp-3FFh]
  char v19[1022]; // [esp+1Eh] [ebp-3FEh]

  v3 = this;
  v14 = this;
  (*(void (__thiscall **)(void *, char *, int *))(*(_DWORD *)this + 92))(this, &v16, &v15);
  if ( v15 == 1 )
  {
    (*(void (__thiscall **)(void *, char *))(*(_DWORD *)v3 + 144))(v3, &v17);
    v7 = 0;
    do
    {
      v8 = a3 * (unsigned __int8)*(&v17 + 4 * v7);
      v9 = 255;
      if ( v8 / 1000 <= 255 )
        v9 = v8 / 1000;
      v10 = a3 * (unsigned __int8)*(&v18 + 4 * v7);
      v11 = 255;
      if ( v10 / 1000 <= 255 )
        v11 = v10 / 1000;
      v12 = a3 * (unsigned __int8)v19[4 * v7] / 1000;
      if ( v12 > 255 )
        v12 = 255;
      *(_BYTE *)(v7++ + a2) = (*(int (__stdcall **)(int))(*(_DWORD *)v14 + 88))(v9 | ((v11 | (v12 << 8)) << 8));
    }
    while ( v7 < 256 );
    goto LABEL_17;
  }
  if ( v15 > 2 && v15 <= 4 )
  {
    v4 = 0;
    v5 = 0;
    do
    {
      v6 = v5 / 1000;
      if ( v5 / 1000 > 255 )
        LOBYTE(v6) = -1;
      *(_BYTE *)(v4++ + a2) = v6;
      v5 += a3;
    }
    while ( v4 < 256 );
LABEL_17:
    v3 = v14;
  }
  return (*(int (__thiscall **)(void *))(*(_DWORD *)v3 + 96))(v3);
}
// 49CE40: using guessed type char var_3FE[1022];

//----- (0049CFB0) --------------------------------------------------------
int __thiscall sub_49CFB0(int *this, int a2, int a3, int a4)
{
  int *v4; // esi
  int v5; // eax
  void (__stdcall ***v6)(signed int); // ecx
  int v7; // eax
  int *v8; // edi
  int v9; // eax
  int v11; // eax
  int v12; // edx
  int v13; // eax
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  BOOL v19; // edx
  int v20; // eax
  int v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  _DWORD *v24; // ecx
  void (__thiscall *v25)(_DWORD *, _DWORD, _DWORD, signed int, signed int); // eax
  int v26; // [esp+34h] [ebp-ECh]
  _DWORD *v27; // [esp+38h] [ebp-E8h]
  int Dst; // [esp+3Ch] [ebp-E4h]
  int v29; // [esp+40h] [ebp-E0h]
  int v30; // [esp+44h] [ebp-DCh]
  int v31; // [esp+48h] [ebp-D8h]
  unsigned int v32; // [esp+A4h] [ebp-7Ch]
  int v33; // [esp+A8h] [ebp-78h]
  int v34; // [esp+ACh] [ebp-74h]
  int v35; // [esp+BCh] [ebp-64h]
  int v36; // [esp+110h] [ebp-10h]
  int v37; // [esp+11Ch] [ebp-4h]

  v4 = this;
  if ( this[51] )
  {
    v5 = this[45];
    if ( v5 )
    {
      (*(void (__stdcall **)(int))(*(_DWORD *)v5 + 8))(this[45]);
      v4[45] = 0;
    }
  }
  v6 = (void (__stdcall ***)(signed int))v4[44];
  if ( v6 )
  {
    (**v6)(1);
    v4[44] = 0;
  }
  v7 = v4[41];
  v8 = v4 + 41;
  if ( v7 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v7 + 8))(v4[41]);
    *v8 = 0;
  }
  v4[2] = a3;
  v9 = v4[43];
  v4[5] = 0;
  v4[1] = a2;
  if ( (*(int (__stdcall **)(int, int, int, int))(*(_DWORD *)v9 + 84))(v9, a2, a3, a4) )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 76))(v4[43]);
    (*(void (__stdcall **)(int, int, signed int))(*(_DWORD *)v4[43] + 80))(v4[43], v4[46], 8);
    (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 8))(v4[43]);
    v4[43] = 0;
    return MessageBoxA(0, "Could not switch to necessary resolution.", "Error", 0x30u);
  }
  if ( v4[51] )
  {
    memset(&Dst, 0, 0x6Cu);
    v11 = v4[43];
    Dst = 108;
    v29 = 1;
    v32 = 512;
    if ( (*(int (__stdcall **)(int, int *, int *, _DWORD))(*(_DWORD *)v11 + 24))(v11, &Dst, v4 + 41, 0) )
    {
      (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 76))(v4[43]);
      (*(void (__stdcall **)(int, int, signed int))(*(_DWORD *)v4[43] + 80))(v4[43], v4[46], 8);
      (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 8))(v4[43]);
      v4[43] = 0;
      return MessageBoxA(
               0,
               "Could not allocate solitary primary surface.  Try reinstalling the latest version of DirectX or picking a"
               " lower resolution.",
               "Error",
               0x30u);
    }
    memset(&Dst, 0, 0x6Cu);
    v12 = v4[2];
    v13 = v4[1];
    v14 = -(v4[52] != 0);
    Dst = 108;
    v30 = v12;
    v31 = v13;
    v15 = v4[43];
    v29 = 7;
    v32 = (v14 & 0xFFFFC800) + 16448;
    if ( (*(int (__stdcall **)(int, int *, int *, _DWORD))(*(_DWORD *)v15 + 24))(v15, &Dst, v4 + 45, 0) )
    {
      v16 = v4[43];
      v32 &= 0xFFFFB7FF;
      if ( (*(int (__stdcall **)(int, int *, int *, _DWORD))(*(_DWORD *)v16 + 24))(v16, &Dst, v4 + 45, 0) )
      {
        v17 = v4[43];
        if ( v17 )
        {
          (*(void (__stdcall **)(int))(*(_DWORD *)v17 + 8))(v4[43]);
          v4[43] = 0;
        }
        return MessageBoxA(
                 0,
                 "Could not allocate back buffer surface.  Try reinstalling the latest version of DirectX or picking a lower resolution.",
                 "Error",
                 0x30u);
      }
    }
    v4[5] = v4[45];
  }
  else
  {
    memset(&v33, 0, 0x6Cu);
    v18 = v4[43];
    v19 = v4[53] != 0;
    v33 = 108;
    v34 = 33;
    v36 = 16920;
    v35 = v19 + 1;
    if ( (*(int (__stdcall **)(int, int *, int *, _DWORD))(*(_DWORD *)v18 + 24))(v18, &v33, v4 + 41, 0) )
    {
      v20 = v4[43];
      v36 &= 0xFFFFBFFF;
      if ( (*(int (__stdcall **)(int, int *, int *, _DWORD))(*(_DWORD *)v20 + 24))(v20, &v33, v4 + 41, 0) )
      {
        (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 76))(v4[43]);
        (*(void (__stdcall **)(int, int, signed int))(*(_DWORD *)v4[43] + 80))(v4[43], v4[46], 8);
        (*(void (__stdcall **)(int))(*(_DWORD *)v4[43] + 8))(v4[43]);
        v4[43] = 0;
        return MessageBoxA(
                 0,
                 "Could not allocate primary surface.  Try reinstalling the latest version of DirectX or picking a lower resolution.",
                 "Error",
                 0x30u);
      }
    }
    v21 = *v8;
    v26 = 4;
    (*(void (__stdcall **)(int, int *, int *))(*(_DWORD *)v21 + 48))(v21, &v26, v4 + 45);
    v4[5] = v4[45];
  }
  v22 = operator new(0xA4u);
  v27 = v22;
  v37 = 0;
  if ( v22 )
    v23 = sub_49B6A0(v22, *v8);
  else
    v23 = 0;
  v4[44] = (int)v23;
  v24 = v23;
  v25 = *(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, signed int, signed int))(*v23 + 68);
  v37 = -1;
  v25(v24, 0, 0, -1, -1);
  (*(void (__thiscall **)(int *))(*v4 + 112))(v4);
  return (*(int (__thiscall **)(int *, _DWORD, _DWORD, signed int, signed int))(*v4 + 68))(v4, 0, 0, -1, -1);
}

//----- (0049D3A0) --------------------------------------------------------
int __thiscall sub_49D3A0(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  if ( this[51] )
    return (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*this + 4))(
             this,
             0,
             this[44],
             0,
             0,
             0,
             0);
  result = (*(int (__stdcall **)(_DWORD, _DWORD, int))(*(_DWORD *)this[41] + 44))(this[41], 0, (a2 != 0 ? 0 : 8) | 1);
  if ( result == -2005532222 )
    result = (*(int (__thiscall **)(_DWORD *))(*v2 + 52))(v2);
  return result;
}

//----- (0049D400) --------------------------------------------------------
LONG __thiscall sub_49D400(HWND *this)
{
  HWND *v1; // esi
  LONG result; // eax
  LONG v3; // eax
  LONG v4; // eax

  v1 = this;
  result = (LONG)this[46];
  if ( result )
  {
    if ( IsIconic(this[46]) || !v1[44] )
    {
      v4 = GetWindowLongA(v1[46], -16);
      result = SetWindowLongA(v1[46], -16, v4 | 0x80000);
    }
    else
    {
      v3 = GetWindowLongA(v1[46], -16);
      result = SetWindowLongA(v1[46], -16, v3 & 0xFFF7FFFF);
    }
  }
  return result;
}

//----- (0049D470) --------------------------------------------------------
BOOL __thiscall sub_49D470(_DWORD *this)
{
  int v1; // eax
  int v3; // [esp+0h] [ebp-6Ch]
  int v4; // [esp+54h] [ebp-18h]

  v1 = this[5];
  v3 = 108;
  (*(void (__stdcall **)(int, int *))(*(_DWORD *)v1 + 88))(v1, &v3);
  return v4 == 8;
}

//----- (0049D4A0) --------------------------------------------------------
int __thiscall sub_49D4A0(_DWORD *this)
{
  int result; // eax

  result = 0;
  if ( !this[51] )
  {
    LOBYTE(result) = this[53] != 0;
    ++result;
  }
  return result;
}

//----- (0049D4C0) --------------------------------------------------------
LONG __thiscall sub_49D4C0(_DWORD *this, LONG *a2, LONG *a3)
{
  HWND v3; // ecx
  LONG v4; // edx
  LONG result; // eax
  struct tagPOINT Point; // [esp+8h] [ebp-8h]

  v3 = (HWND)this[46];
  v4 = *a3;
  Point.x = *a2;
  Point.y = v4;
  ClientToScreen(v3, &Point);
  result = Point.y;
  *a2 = Point.x;
  *a3 = result;
  return result;
}

//----- (0049D510) --------------------------------------------------------
_DWORD *__thiscall sub_49D510(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a2;
  *a2 = 0;
  a2[1] = 0;
  a2[2] = this[1];
  a2[3] = this[2];
  return result;
}

//----- (0049D530) --------------------------------------------------------
int __thiscall sub_49D530(_DWORD **this)
{
  _DWORD **v1; // esi

  v1 = this;
  (*(void (__stdcall **)(_DWORD *))(*this[41] + 108))(this[41]);
  return (*(int (__stdcall **)(_DWORD *))(*v1[45] + 108))(v1[45]);
}

//----- (0049D560) --------------------------------------------------------
int __thiscall sub_49D560(_DWORD *this)
{
  _DWORD *v1; // esi
  bool v2; // zf
  HWND v3; // eax
  LONG v4; // eax
  void (__stdcall ***v5)(signed int); // ecx
  void (__stdcall ***v6)(signed int); // ecx
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int result; // eax
  CHAR String; // [esp+10h] [ebp-110h]
  int v13; // [esp+11Ch] [ebp-4h]

  v1 = this;
  *this = &WindowPrimarySurface::`vftable';
  v2 = this[52] == 0;
  v13 = 0;
  if ( !v2 )
  {
    v3 = (HWND)this[55];
    if ( v3 )
    {
      v4 = GetWindowLongA(v3, -16);
      SetWindowLongA((HWND)v1[55], -16, v4 | 0x80000);
      GetWindowTextA((HWND)v1[55], &String, 256);
      SetWindowTextA((HWND)v1[55], &String);
    }
  }
  v5 = (void (__stdcall ***)(signed int))v1[49];
  if ( v5 )
  {
    (**v5)(1);
    v1[49] = 0;
  }
  v6 = (void (__stdcall ***)(signed int))v1[48];
  if ( v6 )
  {
    (**v6)(1);
    v1[48] = 0;
  }
  v7 = v1[42];
  if ( v7 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v7 + 8))(v1[42]);
    v1[42] = 0;
  }
  v8 = v1[41];
  if ( v8 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v8 + 8))(v1[41]);
    v1[41] = 0;
  }
  v9 = v1[53];
  if ( v9 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v9 + 8))(v1[53]);
    v1[53] = 0;
  }
  v10 = v1[54];
  if ( v10 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v10 + 8))(v1[54]);
    v1[54] = 0;
  }
  result = v1[43];
  if ( result )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)result + 8))(v1[43]);
    v1[43] = 0;
  }
  *v1 = &Surface::`vftable';
  v1[5] = 0;
  return result;
}
// 51D684: using guessed type void *Surface::`vftable';
// 51D79C: using guessed type void *WindowPrimarySurface::`vftable';

//----- (0049D6F0) --------------------------------------------------------
int __thiscall sub_49D6F0(_DWORD *this)
{
  return this[48];
}

//----- (0049D700) --------------------------------------------------------
int __thiscall sub_49D700(HWND *this)
{
  HWND *v1; // esi
  HDC v2; // edi
  HDC v4; // [esp+8h] [ebp-4h]

  v1 = this;
  v2 = GetDC(this[55]);
  (*((void (__thiscall **)(HWND *, HDC *))*v1 + 25))(v1, &v4);
  StretchBlt(v2, 0, 0, (int)v1[1], (int)v1[2], v4, 0, 0, (int)v1[1], (int)v1[2], 0xCC0020u);
  (*((void (__thiscall **)(HWND *, HDC))*v1 + 26))(v1, v4);
  return ReleaseDC(v1[55], v2);
}

//----- (0049D770) --------------------------------------------------------
int __thiscall sub_49D770(_DWORD *this)
{
  _DWORD *v1; // esi

  v1 = this;
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*this + 76))(this, this[3], this[4]);
  return (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD, _DWORD, signed int, _DWORD))(*v1 + 4))(
           v1,
           0,
           v1[48],
           v1[44],
           v1[45],
           1,
           0);
}

//----- (0049D7B0) --------------------------------------------------------
int __thiscall sub_49D7B0(struct tagRECT *this)
{
  struct tagRECT *v1; // esi
  HWND v2; // eax
  int v3; // eax
  LONG v4; // ecx
  int result; // eax
  int v6; // eax
  LONG v7; // ecx
  LONG v8; // eax
  LONG *v9; // edi
  bool v10; // zf
  int v11; // edx
  _DWORD *v12; // ecx
  LONG v13; // eax
  LONG v14; // edx
  LONG v15; // [esp+10h] [ebp-74h]
  int v16; // [esp+14h] [ebp-70h]
  int Dst; // [esp+18h] [ebp-6Ch]
  int v18; // [esp+1Ch] [ebp-68h]
  LONG v19; // [esp+20h] [ebp-64h]
  int v20; // [esp+24h] [ebp-60h]
  int v21; // [esp+64h] [ebp-20h]
  int v22; // [esp+6Ch] [ebp-18h]
  int v23; // [esp+70h] [ebp-14h]
  int v24; // [esp+74h] [ebp-10h]
  int v25; // [esp+78h] [ebp-Ch]
  int v26; // [esp+7Ch] [ebp-8h]
  int v27; // [esp+80h] [ebp-4h]

  v1 = this;
  v15 = this->top;
  v2 = (HWND)this[13].bottom;
  v16 = this->right;
  if ( v2 )
  {
    GetClientRect(v2, this + 11);
    ClientToScreen((HWND)v1[13].bottom, (LPPOINT)&v1[11]);
    ClientToScreen((HWND)v1[13].bottom, (LPPOINT)&v1[11].right);
    v6 = v1[11].right - v1[11].left;
    v1->right = v1[11].bottom - v1[11].top;
    v7 = v1[12].top;
    v1->top = v6;
    (*(void (__stdcall **)(struct tagRECT *))(*(_DWORD *)v7 + 108))(v1 + 11);
    result = (*(int (__stdcall **)(struct tagRECT *))(*(_DWORD *)v1[12].left + 64))(v1 + 11);
    if ( !v1->top || !v1->right )
    {
      v1->top = 500;
      v1->right = 300;
    }
  }
  else
  {
    this->top = GetSystemMetrics(0);
    v3 = GetSystemMetrics(1);
    v4 = v1[12].top;
    v1->right = v3;
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 108))(0);
  }
  if ( v1[12].bottom )
  {
    v1[1].top = v1[10].top;
  }
  else if ( v15 != v1->top || (result = v16, v16 != v1->right) || !v1[13].top )
  {
    v8 = v1[13].top;
    v9 = &v1[13].top;
    if ( v8 )
    {
      (*(void (__stdcall **)(LONG))(*(_DWORD *)v8 + 8))(v1[13].top);
      *v9 = 0;
    }
    memset(&Dst, 0, 0x6Cu);
    v10 = v1[12].right == 0;
    Dst = 108;
    v18 = 7;
    v27 = 64;
    if ( !v10 || sub_49CA30((_DWORD *)v1[12].left) == 5 )
      v27 |= 0x800u;
    v11 = v1->top;
    v19 = v1->right;
    v12 = (_DWORD *)v1[12].left;
    v20 = v11;
    if ( sub_49CA30(v12) == 5 )
    {
      v18 |= 0x1000u;
      v21 = 64;
      v22 = 16;
      v23 = 63488;
      v24 = 2016;
      v25 = 31;
      v26 = 0;
    }
    if ( (*(int (__stdcall **)(LONG, int *, LONG *, _DWORD))(*(_DWORD *)v1[10].bottom + 24))(
           v1[10].bottom,
           &Dst,
           &v1[13].top,
           0) )
    {
      v13 = v1[10].bottom;
      if ( v13 )
      {
        (*(void (__stdcall **)(LONG))(*(_DWORD *)v13 + 8))(v1[10].bottom);
        v1[10].bottom = 0;
      }
      result = MessageBoxA(
                 0,
                 "Could not allocate back buffer surface.  Try reinstalling the latest version of DirectX or picking a lower resolution.",
                 "Error",
                 0x30u);
    }
    else
    {
      v14 = v1->left;
      v1[1].top = *v9;
      result = (*(int (__thiscall **)(struct tagRECT *, _DWORD, _DWORD, signed int, signed int))(v14 + 68))(
                 v1,
                 0,
                 0,
                 -1,
                 -1);
    }
  }
  return result;
}

//----- (0049D9E0) --------------------------------------------------------
LONG __thiscall sub_49D9E0(_DWORD *this, LONG *a2, LONG *a3)
{
  HWND v3; // ecx
  LONG v4; // edx
  LONG result; // eax
  struct tagPOINT Point; // [esp+8h] [ebp-8h]

  v3 = (HWND)this[55];
  v4 = *a3;
  Point.x = *a2;
  Point.y = v4;
  ScreenToClient(v3, &Point);
  result = Point.y;
  *a2 = Point.x;
  *a3 = result;
  return result;
}

//----- (0049DA20) --------------------------------------------------------
_DWORD *__thiscall sub_49DA20(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a2;
  *a2 = this[44];
  a2[1] = this[45];
  a2[2] = this[46];
  a2[3] = this[47];
  return result;
}

//----- (0049DA50) --------------------------------------------------------
int sub_49DA50()
{
  return 0;
}

//----- (0049DA60) --------------------------------------------------------
int sub_49DA60()
{
  return 0;
}

//----- (0049DA70) --------------------------------------------------------
int __thiscall sub_49DA70(_DWORD **this)
{
  _DWORD **v1; // esi
  int result; // eax

  v1 = this;
  if ( this[41] )
    result = (*(int (__stdcall **)(_DWORD *))(*this[41] + 108))(this[41]);
  if ( v1[53] )
    result = (*(int (__stdcall **)(_DWORD *))(*v1[53] + 108))(v1[53]);
  return result;
}

//----- (0049DAB0) --------------------------------------------------------
int __thiscall sub_49DAB0(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // eax
  int result; // eax

  v1 = this;
  *this = &MemorySurface::`vftable';
  v2 = (void *)this[42];
  if ( v2 )
  {
    free(v2);
    v1[42] = 0;
  }
  result = v1[5];
  if ( result )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)result + 8))(v1[5]);
    v1[5] = 0;
  }
  *v1 = &Surface::`vftable';
  return result;
}
// 51D684: using guessed type void *Surface::`vftable';
// 51D84C: using guessed type void *MemorySurface::`vftable';

//----- (0049DB30) --------------------------------------------------------
int __usercall sub_49DB30@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi
  int v3; // eax
  _DWORD *v4; // ebx
  int result; // eax
  const char *v6; // eax
  HANDLE v7; // eax
  HINSTANCE v8; // eax
  int v9; // eax
  int v10; // edx
  _DWORD *v11; // ecx
  int v12; // eax
  bool v13; // zf
  _DWORD *v14; // eax
  HDC v15; // edi
  int v16; // eax
  int v17; // ecx
  int v18; // [esp+30h] [ebp-9Ch]
  int v19; // [esp+34h] [ebp-98h]
  int v20; // [esp+34h] [ebp-98h]
  int v21; // [esp+38h] [ebp-94h]
  HGDIOBJ v22; // [esp+40h] [ebp-8Ch]
  int v23; // [esp+44h] [ebp-88h]
  int Dst; // [esp+48h] [ebp-84h]
  HDC v25; // [esp+4Ch] [ebp-80h]
  int v26; // [esp+50h] [ebp-7Ch]
  int v27; // [esp+54h] [ebp-78h]
  int v28; // [esp+98h] [ebp-34h]
  int v29; // [esp+A0h] [ebp-2Ch]
  int v30; // [esp+A4h] [ebp-28h]
  int v31; // [esp+A8h] [ebp-24h]
  int v32; // [esp+ACh] [ebp-20h]
  int v33; // [esp+B0h] [ebp-1Ch]
  char v34; // [esp+B4h] [ebp-18h]
  int v35; // [esp+B8h] [ebp-14h]
  int v36; // [esp+BCh] [ebp-10h]

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 20);
  v4 = (_DWORD *)(a1 + 20);
  if ( v3 )
  {
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v3 + 96))(v3);
    if ( !result )
      return result;
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v4 + 108))(*v4);
    if ( (*(int (__stdcall **)(_DWORD))(*(_DWORD *)*v4 + 96))(*v4) && *v4 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v4 + 8))(*v4);
      *v4 = 0;
    }
  }
  v22 = 0;
  if ( *(_DWORD *)(v2 + 172) || *(_DWORD *)(v2 + 168) )
  {
    v6 = *(const char **)(v2 + 168);
    if ( v6 && !_access(v6, 0) )
    {
      v7 = LoadImageA(*(HINSTANCE *)(v2 + 172), *(LPCSTR *)(v2 + 168), 0, 0, 0, 0x2010u);
      goto LABEL_13;
    }
    v8 = *(HINSTANCE *)(v2 + 172);
    if ( v8 )
    {
      v7 = LoadImageA(v8, (LPCSTR)*(unsigned __int16 *)(v2 + 176), 0, 0, 0, 0x2000u);
LABEL_13:
      v22 = v7;
      if ( v7 )
      {
        GetObjectA(v7, 24, &v34);
        if ( *(_DWORD *)(v2 + 196) )
        {
          v9 = *(_DWORD *)(v2 + 192) - *(_DWORD *)(v2 + 184);
          *(_DWORD *)(v2 + 4) = *(_DWORD *)(v2 + 188) - *(_DWORD *)(v2 + 180);
          *(_DWORD *)(v2 + 8) = v9;
        }
        else
        {
          v10 = v36;
          *(_DWORD *)(v2 + 4) = v35;
          *(_DWORD *)(v2 + 8) = v10;
        }
      }
      goto LABEL_17;
    }
  }
LABEL_17:
  if ( !*(_DWORD *)(v2 + 4) )
    *(_DWORD *)(v2 + 4) = 1;
  if ( !*(_DWORD *)(v2 + 8) )
    *(_DWORD *)(v2 + 8) = 1;
  v19 = a2;
  if ( !*v4 )
  {
    memset(&Dst, 0, 0x6Cu);
    v11 = *(_DWORD **)(v2 + 164);
    v12 = *(_DWORD *)(v2 + 4);
    Dst = 108;
    v25 = (HDC)7;
    v33 = 64;
    if ( v12 > v11[1] || *(_DWORD *)(v2 + 8) > v11[2] || (v13 = *(_DWORD *)(v2 + 200) == 0, v33 = 16448, !v13) )
      v33 = 2112;
    v27 = v12;
    v26 = *(_DWORD *)(v2 + 8);
    v14 = (_DWORD *)(*(int (__stdcall **)(int))(*v11 + 128))(a2);
    if ( sub_49CA30(v14) == 5 )
    {
      v26 |= 0x1000u;
      v28 = 64;
      v29 = 16;
      v30 = 63488;
      v31 = 2016;
      v32 = 31;
      v33 = 0;
    }
    v19 = 0;
    if ( (*(int (__stdcall **)(_DWORD, HDC *, _DWORD *))(**(_DWORD **)(*(_DWORD *)(v2 + 164) + 172) + 24))(
           *(_DWORD *)(*(_DWORD *)(v2 + 164) + 172),
           &v25,
           v4) )
    {
      v33 &= 0xFFFFBFFF;
      (*(void (__stdcall **)(_DWORD, int *, _DWORD *, _DWORD))(**(_DWORD **)(*(_DWORD *)(v2 + 164) + 172) + 24))(
        *(_DWORD *)(*(_DWORD *)(v2 + 164) + 172),
        &Dst,
        v4,
        0);
    }
  }
  if ( v22 )
  {
    if ( *v4 )
    {
      v23 = 0;
      v15 = CreateCompatibleDC(0);
      SelectObject(v15, v22);
      (*(void (__stdcall **)(_DWORD, int *, int, int))(*(_DWORD *)*v4 + 68))(*v4, &v23, v19, v21);
      v16 = *(_DWORD *)(v2 + 8);
      v17 = *(_DWORD *)(v2 + 4);
      v20 = *(_DWORD *)(v2 + 8);
      v18 = *(_DWORD *)(v2 + 4);
      if ( *(_DWORD *)(v2 + 196) )
        StretchBlt(v25, 0, 0, v17, v16, v15, *(_DWORD *)(v2 + 180), *(_DWORD *)(v2 + 184), v18, v20, 0xCC0020u);
      else
        StretchBlt(v25, 0, 0, v17, v16, v15, 0, 0, v18, v20, 0xCC0020u);
      (*(void (__cdecl **)(_DWORD, HDC))(*(_DWORD *)*v4 + 104))(*v4, v25);
      DeleteDC(v15);
    }
    DeleteObject(v22);
  }
  result = *(_DWORD *)(v2 + 12);
  if ( result != -1 )
    result = (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v2 + 76))(v2, result, *(_DWORD *)(v2 + 16));
  return result;
}
// 49DB30: could not find valid save-restore pair for edi

//----- (0049E1F0) --------------------------------------------------------
int __thiscall sub_49E1F0(_DWORD *this)
{
  return this[53] * this[54];
}

//----- (0049E200) --------------------------------------------------------
int __thiscall sub_49E200(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int result; // eax
  int v9; // esi
  int v10; // eax
  int v11; // edi
  int v12; // esi
  int (__stdcall *v13)(int *, int, int, int, int, int); // edx
  int v14; // [esp+4h] [ebp-10h]
  int v15; // [esp+8h] [ebp-Ch]
  int v16; // [esp+Ch] [ebp-8h]
  int v17; // [esp+10h] [ebp-4h]

  result = this[54] * this[53];
  if ( a2 <= result )
  {
    if ( a7 )
    {
      a4 += this[51] / -2;
      a5 += this[52] / -2;
    }
    v9 = this[54];
    v10 = a2 / v9;
    v11 = a2 % v9 * this[51] + this[51];
    v14 = a2 % v9 * this[51];
    v12 = a2 / v9 * this[52] + this[52];
    v15 = v10 * this[52];
    v13 = *(int (__stdcall **)(int *, int, int, int, int, int))(*this + 4);
    v16 = v11;
    v17 = v12;
    result = v13(&v14, a3, a4, a5, a6, a8);
  }
  return result;
}

//----- (0049E2C0) --------------------------------------------------------
signed int __thiscall sub_49E2C0(_DWORD *this, int *a2)
{
  int v2; // ebx
  int v3; // esi
  int v4; // edx
  int v5; // edi
  signed int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // ebp
  _DWORD *v10; // eax

  v2 = this[185];
  v3 = this[184];
  v4 = v3 + this[1];
  v5 = v2 + this[2];
  if ( this[179] == -1 )
  {
    this[180] = v3;
    this[181] = v2;
    this[182] = v4;
    this[183] = v5;
    *a2 = v3;
    a2[1] = v2;
    a2[2] = v4;
    a2[3] = v5;
    this[179] = 0;
    result = 1;
  }
  else
  {
    while ( 1 )
    {
      v7 = this[179];
      if ( v7 <= 0 )
        break;
      v8 = v7 - 1;
      this[179] = v8;
      v8 *= 16;
      v9 = *(_DWORD *)((char *)this + v8 + 204);
      v10 = (_DWORD *)((char *)this + v8 + 204);
      this[180] = v9;
      this[181] = v10[1];
      this[182] = v10[2];
      this[183] = v10[3];
      if ( v4 > v3 )
      {
        if ( this[180] < v3 )
          this[180] = v3;
        if ( this[181] < v2 )
          this[181] = v2;
        if ( this[182] > v4 )
          this[182] = v4;
        if ( this[183] > v5 )
          this[183] = v5;
        if ( this[180] >= this[182] || this[181] >= this[183] )
          continue;
      }
      *a2 = this[180];
      a2[1] = this[181];
      a2[2] = this[182];
      a2[3] = this[183];
      return 1;
    }
    result = 0;
    this[180] = 0;
    this[181] = 0;
    this[182] = 0;
    this[183] = 0;
  }
  return result;
}

//----- (0049E420) --------------------------------------------------------
int __thiscall sub_49E420(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // eax

  result = this[179];
  if ( result != -1 )
  {
    if ( result < 32 && a2 )
    {
      v3 = 4 * result;
      this[v3 + 51] = *a2;
      result = (int)&this[v3 + 51];
      *(_DWORD *)(result + 4) = a2[1];
      *(_DWORD *)(result + 8) = a2[2];
      *(_DWORD *)(result + 12) = a2[3];
      ++this[179];
    }
    else
    {
      this[179] = -1;
    }
  }
  return result;
}

//----- (0049E480) --------------------------------------------------------
signed int __usercall sub_49E480@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi
  signed int result; // eax

  v2 = a1;
  sub_49DB30(a1, a2);
  result = -1;
  if ( *(_DWORD *)(v2 + 716) != -1 )
    *(_DWORD *)(v2 + 716) = -1;
  return result;
}

//----- (0049E4A0) --------------------------------------------------------
int __thiscall sub_49E4A0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // edi
  int v12; // eax
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  int v17; // edx
  int v18; // eax
  int result; // eax
  int v20; // ecx
  int v21; // [esp+48h] [ebp-18h]
  int v22; // [esp+4Ch] [ebp-14h]
  int v23; // [esp+50h] [ebp-10h]
  int v24; // [esp+54h] [ebp-Ch]
  int v25; // [esp+58h] [ebp-8h]
  int v26; // [esp+5Ch] [ebp-4h]

  v7 = this;
  v8 = this[1];
  v9 = this[186];
  v10 = this[2];
  v25 = v8;
  v11 = v7[187];
  v12 = v8 - v9;
  v22 = 0;
  v21 = 0;
  v23 = v9;
  v24 = v11;
  v26 = v10;
  if ( v12 > 0 )
    v22 = v12;
  v13 = v10 - v11;
  if ( v13 > 0 )
    v21 = v13;
  if ( v12 > 0 && v13 > 0 )
    (*(void (__thiscall **)(int, int, int, _DWORD *, int *, int, int))(*(_DWORD *)a3 + 28))(
      a3,
      a4,
      a5,
      v7,
      &v23,
      a6,
      a7);
  v14 = v7[186];
  v15 = v7[187];
  v25 = v7[1];
  v23 = v14;
  v24 = 0;
  v26 = v15;
  if ( v25 - v14 > 0 && v15 > 0 )
    (*(void (__thiscall **)(int, int, int, _DWORD *, int *, int, int))(*(_DWORD *)a3 + 28))(
      a3,
      a4,
      a5 + v21,
      v7,
      &v23,
      a6,
      a7);
  v16 = v7[186];
  v17 = v7[187];
  v18 = v7[2];
  v23 = 0;
  v25 = v16;
  v24 = v17;
  v26 = v18;
  if ( v16 > 0 && v18 - v17 > 0 )
    (*(void (__thiscall **)(int, int, int, _DWORD *, int *, int, int))(*(_DWORD *)a3 + 28))(
      a3,
      a4 + v22,
      a5,
      v7,
      &v23,
      a6,
      a7);
  result = v7[186];
  v20 = v7[187];
  v23 = 0;
  v25 = result;
  v24 = 0;
  v26 = v20;
  if ( result > 0 && v20 > 0 )
    result = (*(int (__thiscall **)(int, int, int, _DWORD *, int *, int, int))(*(_DWORD *)a3 + 28))(
               a3,
               a4 + v22,
               a5 + v21,
               v7,
               &v23,
               a6,
               a7);
  return result;
}

//----- (0049E610) --------------------------------------------------------
_DWORD *__thiscall sub_49E610(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a2;
  *a2 = this[180];
  a2[1] = this[181];
  a2[2] = this[182];
  a2[3] = this[183];
  return result;
}

//----- (0049E640) --------------------------------------------------------
int __thiscall sub_49E640(_DWORD *this, _DWORD *a2)
{
  int result; // eax

  this[180] = *a2;
  this[181] = a2[1];
  this[182] = a2[2];
  result = a2[3];
  this[183] = result;
  return result;
}

//----- (0049E670) --------------------------------------------------------
int __thiscall sub_49E670(_DWORD *this, _DWORD *a2, int *a3)
{
  int v3; // edx
  int *v4; // eax
  int v5; // ebx
  int v6; // ebp
  int v7; // edx
  int v8; // edi
  int v9; // esi
  int v10; // edx
  int v11; // edx
  int v12; // edx
  int v13; // ebx
  int v14; // edx
  int v15; // ebp
  int v17; // [esp+24h] [ebp+4h]

  v3 = this[186] - this[184];
  v4 = a3;
  v5 = v3 + a2[2];
  v6 = v3 + *a2;
  v7 = this[187] - this[185];
  v8 = v7 + a2[1];
  v9 = v7 + a2[3];
  v10 = this[1];
  if ( v6 < v10 )
  {
    if ( v10 >= v5 )
    {
      v10 = v5;
      v17 = v5;
    }
    else
    {
      v17 = this[1];
    }
    if ( v8 < this[2] )
    {
      *a3 = v6;
      a3[1] = v8;
      a3[2] = v10;
      v11 = this[2];
      if ( v11 >= v9 )
        v11 = v9;
      a3[3] = v11;
      v4 = a3 + 4;
    }
    if ( v9 > this[2] )
    {
      *v4 = v6;
      v4[1] = v8 - this[2] < 0 ? 0 : v8 - this[2];
      v4[2] = v17;
      v4 += 4;
      *(v4 - 1) = v9 - this[2];
    }
  }
  v12 = this[1];
  if ( v5 > v12 )
  {
    v13 = v5 - this[1];
    v14 = (v6 - v12) & ((v6 - v12 < 0) - 1);
    if ( v8 < this[2] )
    {
      *v4 = v14;
      v4[2] = v13;
      v4[1] = v8;
      v15 = this[2];
      if ( v15 >= v9 )
        v15 = v9;
      v4[3] = v15;
      v4 += 4;
    }
    if ( v9 > this[2] )
    {
      *v4 = v14;
      v4[2] = v13;
      v4[1] = (v8 - this[2]) & ((v8 - this[2] < 0) - 1);
      v4 += 4;
      *(v4 - 1) = v9 - this[2];
    }
  }
  return ((char *)v4 - (char *)a3) >> 4;
}

//----- (0049E780) --------------------------------------------------------
int __thiscall sub_49E780(_DWORD *this, _DWORD *a2, _DWORD *a3, int *a4, _DWORD *a5)
{
  int v5; // edx
  int *v6; // eax
  _DWORD *v7; // esi
  int v8; // ebp
  int v9; // ebx
  int v10; // edx
  int v11; // ebp
  int v12; // edx
  int v13; // ebx
  int v14; // esi
  int v15; // edx
  int v16; // ebx
  int v17; // edx
  int v18; // ebx
  int v19; // ebx
  int v20; // edx
  int v22; // [esp+10h] [ebp-10h]
  int v23; // [esp+14h] [ebp-Ch]
  int v24; // [esp+18h] [ebp-8h]
  int v25; // [esp+24h] [ebp+4h]
  int v26; // [esp+30h] [ebp+10h]

  v5 = this[186] - this[184];
  v6 = a4;
  v7 = a5;
  v8 = v5 + a2[2];
  v9 = v5 + *a2;
  v10 = this[187] - this[185];
  v24 = v8;
  v23 = v10 + a2[1];
  v11 = v10 + a2[3];
  v12 = this[1];
  v22 = v9;
  if ( v9 < v12 )
  {
    v13 = v24;
    if ( v12 >= v24 )
    {
      v25 = v24;
    }
    else
    {
      v13 = this[1];
      v25 = this[1];
    }
    if ( v23 < this[2] )
    {
      *a4 = v22;
      a4[1] = v23;
      a4[2] = v13;
      v14 = this[2];
      if ( v14 >= v11 )
        v14 = v11;
      a4[3] = v14;
      *a5 = *a3;
      v7 = a5 + 4;
      *(v7 - 2) = a4[2] + *a3 - *a4;
      *(v7 - 3) = a3[1];
      v6 = a4 + 4;
      *(v7 - 1) = a4[3] + a3[1] - a4[1];
    }
    if ( v11 > this[2] )
    {
      *v6 = v22;
      v7 += 4;
      v6[1] = v23 - this[2] < 0 ? 0 : v23 - this[2];
      v6[2] = v25;
      v6[3] = v11 - this[2];
      *(v7 - 4) = *a3;
      *(v7 - 2) = v6[2] + *a3 - *v6;
      *(v7 - 1) = a3[3];
      v15 = a3[3] + v6[1] - v6[3];
      v6 += 4;
      *(v7 - 3) = v15;
    }
  }
  v16 = this[1];
  if ( v24 > v16 )
  {
    v26 = (v22 - v16) & ((v22 - v16 < 0) - 1);
    v17 = v24 - this[1];
    if ( v23 < this[2] )
    {
      *v6 = v26;
      v6[2] = v17;
      v6[1] = v23;
      v18 = this[2];
      if ( v18 >= v11 )
        v18 = v11;
      v6[3] = v18;
      v7[2] = a3[2];
      v7 += 4;
      *(v7 - 4) = *v6 + a3[2] - v6[2];
      *(v7 - 3) = a3[1];
      v19 = v6[3] + a3[1] - v6[1];
      v6 += 4;
      *(v7 - 1) = v19;
    }
    if ( v11 > this[2] )
    {
      v6[2] = v17;
      *v6 = v26;
      v6[1] = v23 - this[2] < 0 ? 0 : v23 - this[2];
      v6[3] = v11 - this[2];
      v7[2] = a3[2];
      *v7 = *v6 + a3[2] - v6[2];
      v7[3] = a3[3];
      v20 = a3[3] + v6[1] - v6[3];
      v6 += 4;
      v7[1] = v20;
    }
  }
  return ((char *)v6 - (char *)a4) >> 4;
}

//----- (0049E980) --------------------------------------------------------
int __thiscall sub_49E980(int this, _DWORD *a2, int a3, int a4, int a5, int a6, int a7)
{
  int *v7; // eax
  int v8; // edx
  int v9; // eax
  int v10; // ebx
  int v11; // esi
  int v12; // edx
  int v14; // [esp+4h] [ebp-10h]
  int v15; // [esp+8h] [ebp-Ch]
  int v16; // [esp+Ch] [ebp-8h]
  int v17; // [esp+10h] [ebp-4h]

  if ( a2 )
  {
    v8 = *(_DWORD *)(this + 168);
    v9 = a2[3];
    v10 = v8 + a2[2];
    v11 = v8 + *a2;
    v12 = *(_DWORD *)(this + 172);
    v15 = v12 + a2[1];
    v16 = v10;
    v17 = v12 + v9;
    v14 = v11;
    v7 = &v14;
  }
  else
  {
    v7 = (int *)(this + 168);
  }
  return (*(int (__stdcall **)(int *, int, int, int, int, int))(**(_DWORD **)(this + 164) + 4))(v7, a3, a4, a5, a6, a7);
}

//----- (0049EA00) --------------------------------------------------------
int __thiscall sub_49EA00(int this, int a2, int a3)
{
  return (*(int (__stdcall **)(int, int))(**(_DWORD **)(this + 164) + 16))(
           a2 + *(_DWORD *)(this + 168),
           a3 + *(_DWORD *)(this + 172));
}

//----- (0049EA30) --------------------------------------------------------
int __thiscall sub_49EA30(int this, int a2, int a3, int a4)
{
  return (*(int (__stdcall **)(int, int, int))(**(_DWORD **)(this + 164) + 20))(
           a2 + *(_DWORD *)(this + 168),
           a3 + *(_DWORD *)(this + 172),
           a4);
}

//----- (0049EA60) --------------------------------------------------------
int __thiscall sub_49EA60(int this, int a2, int a3, int a4)
{
  return (*(int (__stdcall **)(int, int, int))(**(_DWORD **)(this + 164) + 20))(
           a2 + *(_DWORD *)(this + 168),
           a3 + *(_DWORD *)(this + 172),
           a4);
}

//----- (0049EA90) --------------------------------------------------------
int __thiscall sub_49EA90(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  return (*(int (__stdcall **)(int, int, int, int, int, int))(**(_DWORD **)(this + 164) + 28))(
           a2 + *(_DWORD *)(this + 168),
           a3 + *(_DWORD *)(this + 172),
           a4,
           a5,
           a6,
           a7);
}

//----- (0049EAD0) --------------------------------------------------------
int __thiscall sub_49EAD0(int this, int a2, _DWORD *a3, int a4, int a5, int a6)
{
  int *v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // ebx
  int v10; // esi
  int v11; // edx
  int v13; // [esp+4h] [ebp-10h]
  int v14; // [esp+8h] [ebp-Ch]
  int v15; // [esp+Ch] [ebp-8h]
  int v16; // [esp+10h] [ebp-4h]

  if ( a3 )
  {
    v7 = *(_DWORD *)(this + 168);
    v8 = a3[3];
    v9 = v7 + a3[2];
    v10 = v7 + *a3;
    v11 = *(_DWORD *)(this + 172);
    v14 = v11 + a3[1];
    v15 = v9;
    v16 = v11 + v8;
    v13 = v10;
    v6 = &v13;
  }
  else
  {
    v6 = (int *)(this + 168);
  }
  return (*(int (__stdcall **)(int, int *, int, int, int))(**(_DWORD **)(this + 164) + 12))(a2, v6, a4, a5, a6);
}

//----- (0049EB50) --------------------------------------------------------
int __thiscall sub_49EB50(int this, int a2, int a3, int a4, int a5, int a6)
{
  return (*(int (__stdcall **)(int, int, int, int, int))(**(_DWORD **)(this + 164) + 36))(
           a2,
           a3 + *(_DWORD *)(this + 168),
           a4 + *(_DWORD *)(this + 172),
           a5,
           a6);
}

//----- (0049EB90) --------------------------------------------------------
int __thiscall sub_49EB90(_DWORD *this, _DWORD *a2, int a3, int a4, int a5)
{
  int v5; // edx
  int v6; // esi
  int v7; // edx
  int v8; // ecx
  int v9; // esi
  int v11; // [esp+4h] [ebp-10h]
  int v12; // [esp+8h] [ebp-Ch]
  int v13; // [esp+Ch] [ebp-8h]
  int v14; // [esp+10h] [ebp-4h]

  v5 = this[42];
  v11 = v5 + *a2;
  v6 = v5 + a2[2];
  v7 = this[43];
  v8 = this[41];
  v13 = v6;
  v9 = a2[1];
  v14 = v7 + a2[3];
  v12 = v7 + v9;
  return (*(int (__stdcall **)(int *, int, int, int))(*(_DWORD *)v8 + 32))(&v11, a3, a4, a5);
}

//----- (0049EBF0) --------------------------------------------------------
int __thiscall sub_49EBF0(int this, int a2, int a3, _DWORD *a4)
{
  int *v4; // eax
  int v5; // edx
  int v6; // eax
  int v7; // esi
  int v8; // ebx
  int v9; // edx
  int v11; // [esp+0h] [ebp-10h]
  int v12; // [esp+4h] [ebp-Ch]
  int v13; // [esp+8h] [ebp-8h]
  int v14; // [esp+Ch] [ebp-4h]

  if ( a4 )
  {
    v5 = *(_DWORD *)(this + 168);
    v6 = a4[3];
    v7 = v5 + *a4;
    v8 = v5 + a4[2];
    v9 = *(_DWORD *)(this + 172);
    v12 = v9 + a4[1];
    v11 = v7;
    v13 = v8;
    v14 = v9 + v6;
    v4 = &v11;
  }
  else
  {
    v4 = (int *)(this + 168);
  }
  return (*(int (__stdcall **)(int, int, int *))(**(_DWORD **)(this + 164) + 44))(a2, a3, v4);
}

//----- (0049EC60) --------------------------------------------------------
int __thiscall sub_49EC60(int this, int a2, _DWORD *a3)
{
  int *v3; // eax
  int v4; // edx
  int v5; // eax
  int v6; // esi
  int v7; // ebx
  int v8; // edx
  int v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]
  int v12; // [esp+8h] [ebp-8h]
  int v13; // [esp+Ch] [ebp-4h]

  if ( a3 )
  {
    v4 = *(_DWORD *)(this + 168);
    v5 = a3[3];
    v6 = v4 + *a3;
    v7 = v4 + a3[2];
    v8 = *(_DWORD *)(this + 172);
    v11 = v8 + a3[1];
    v10 = v6;
    v12 = v7;
    v13 = v8 + v5;
    v3 = &v10;
  }
  else
  {
    v3 = (int *)(this + 168);
  }
  return (*(int (__stdcall **)(int, int *))(**(_DWORD **)(this + 164) + 40))(a2, v3);
}

//----- (0049ECD0) --------------------------------------------------------
int __thiscall sub_49ECD0(int this, int a2, _DWORD *a3)
{
  int *v3; // eax
  int v4; // edx
  int v5; // eax
  int v6; // esi
  int v7; // ebx
  int v8; // edx
  int v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]
  int v12; // [esp+8h] [ebp-8h]
  int v13; // [esp+Ch] [ebp-4h]

  if ( a3 )
  {
    v4 = *(_DWORD *)(this + 168);
    v5 = a3[3];
    v6 = v4 + *a3;
    v7 = v4 + a3[2];
    v8 = *(_DWORD *)(this + 172);
    v11 = v8 + a3[1];
    v10 = v6;
    v12 = v7;
    v13 = v8 + v5;
    v3 = &v10;
  }
  else
  {
    v3 = (int *)(this + 168);
  }
  return (*(int (__stdcall **)(int, int *))(**(_DWORD **)(this + 164) + 48))(a2, v3);
}

//----- (0049ED40) --------------------------------------------------------
int __thiscall sub_49ED40(_DWORD **this)
{
  return (*(int (**)(void))(*this[41] + 52))();
}

//----- (0049ED50) --------------------------------------------------------
int __thiscall sub_49ED50(int this, int a2, int a3, int a4, int a5)
{
  int v5; // esi
  int v6; // edx

  v5 = a4;
  if ( a4 == -1 )
    v5 = *(_DWORD *)(this + 4);
  v6 = a5;
  if ( a5 == -1 )
    v6 = *(_DWORD *)(this + 8);
  return (*(int (__stdcall **)(int, int, int, int))(**(_DWORD **)(this + 164) + 68))(
           a2 + *(_DWORD *)(this + 168),
           a3 + *(_DWORD *)(this + 172),
           v5,
           v6);
}

//----- (0049EDA0) --------------------------------------------------------
int __thiscall sub_49EDA0(_DWORD **this, int a2, int a3)
{
  _DWORD *v3; // esi
  int result; // eax

  v3 = this;
  (*(void (__stdcall **)(int, int))(*this[41] + 76))(a2, a3);
  result = v3[41];
  v3[3] = *(_DWORD *)(result + 12);
  v3[4] = *(_DWORD *)(result + 16);
  return result;
}

//----- (0049EDD0) --------------------------------------------------------
int __thiscall sub_49EDD0(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // eax

  if ( a2 )
  {
    this[42] = *a2;
    this[43] = a2[1];
    this[44] = a2[2];
    result = a2[3];
  }
  else
  {
    v3 = this[41];
    this[42] = 0;
    this[43] = 0;
    this[44] = *(_DWORD *)(v3 + 4);
    result = *(_DWORD *)(v3 + 8);
  }
  this[45] = result;
  return result;
}

//----- (0049EE30) --------------------------------------------------------
int __thiscall sub_49EE30(int *this, _DWORD *a2, int a3, int a4, int a5)
{
  int *v5; // eax
  int v6; // edx
  int v7; // edi
  int v8; // eax
  int v9; // ebx
  int v10; // esi
  int v11; // edx
  int v13; // [esp+8h] [ebp-10h]
  int v14; // [esp+Ch] [ebp-Ch]
  int v15; // [esp+10h] [ebp-8h]
  int v16; // [esp+14h] [ebp-4h]

  if ( a2 )
  {
    v6 = this[42];
    v7 = a2[1];
    v8 = a2[3];
    v9 = v6 + a2[2];
    v10 = v6 + *a2;
    v11 = this[43];
    v15 = v9;
    v16 = v11 + v8;
    v13 = v10;
    v14 = v11 + v7;
    v5 = &v13;
  }
  else
  {
    v5 = this + 42;
  }
  return (*(int (__thiscall **)(int, int, int *, int *, int))(*(_DWORD *)a3 + 32))(a3, a4, this, v5, a5);
}

//----- (0049EEA0) --------------------------------------------------------
int __thiscall sub_49EEA0(_DWORD *this)
{
  _DWORD *v1; // esi
  void (__stdcall ***v2)(signed int); // ecx
  int result; // eax

  v1 = this;
  *this = &ComboPrimarySurface::`vftable';
  v2 = (void (__stdcall ***)(signed int))this[44];
  v1[44] = 0;
  if ( v2 )
    (**v2)(1);
  result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v1[43] + 8))(v1[43]);
  *v1 = &Surface::`vftable';
  return result;
}
// 51D684: using guessed type void *Surface::`vftable';
// 51D9AC: using guessed type void *ComboPrimarySurface::`vftable';

//----- (0049EF20) --------------------------------------------------------
int __thiscall sub_49EF20(_DWORD **this)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (**)(void))(*this[44] + 128))();
  else
    result = 0;
  return result;
}

//----- (0049EF40) --------------------------------------------------------
_DWORD *__thiscall sub_49EF40(_DWORD *this)
{
  _DWORD *result; // eax

  result = (_DWORD *)this[44];
  if ( result )
  {
    this[41] = result[41];
    this[42] = result[42];
    this[1] = result[1];
    this[2] = result[2];
    this[3] = result[3];
    this[4] = result[4];
    this[5] = result[5];
    result = (_DWORD *)(*(int (__thiscall **)(_DWORD *, _DWORD *))(*result + 72))(result, this + 6);
  }
  return result;
}

//----- (0049EF90) --------------------------------------------------------
int __thiscall sub_49EF90(_DWORD **this, int a2)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (__stdcall **)(int))(*this[44] + 108))(a2);
  return result;
}

//----- (0049EFB0) --------------------------------------------------------
_DWORD *__thiscall sub_49EFB0(_DWORD **this)
{
  _DWORD *v1; // esi
  _DWORD *result; // eax

  v1 = this;
  if ( this[44] )
  {
    (*(void (**)(void))(*this[44] + 112))();
    result = sub_49EF40(v1);
  }
  return result;
}

//----- (0049EFE0) --------------------------------------------------------
int __thiscall sub_49EFE0(_DWORD **this)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (**)(void))(*this[44] + 152))();
  else
    result = 0;
  return result;
}

//----- (0049F000) --------------------------------------------------------
int __thiscall sub_49F000(_DWORD **this)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (**)(void))(*this[44] + 156))();
  else
    result = 0;
  return result;
}

//----- (0049F020) --------------------------------------------------------
int __thiscall sub_49F020(_DWORD **this, int a2, int a3)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (__stdcall **)(int, int))(*this[44] + 116))(a2, a3);
  return result;
}

//----- (0049F040) --------------------------------------------------------
int __thiscall sub_49F040(_DWORD **this, int a2, int a3)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (__stdcall **)(int, int))(*this[44] + 120))(a2, a3);
  return result;
}

//----- (0049F060) --------------------------------------------------------
int __thiscall sub_49F060(_DWORD **this, int a2)
{
  int result; // eax

  if ( this[44] )
    result = (*(int (__stdcall **)(int))(*this[44] + 124))(a2);
  return result;
}

//----- (0049F080) --------------------------------------------------------
_DWORD *__thiscall sub_49F080(_DWORD **this)
{
  _DWORD *v1; // esi
  _DWORD *result; // eax

  v1 = this;
  if ( this[44] )
  {
    (*(void (**)(void))(*this[44] + 52))();
    result = sub_49EF40(v1);
  }
  return result;
}

//----- (0049F0B0) --------------------------------------------------------
signed int __thiscall sub_49F0B0(_DWORD *this, __int16 a2, int a3, int a4, int a5, int *a6)
{
  _DWORD *v6; // edi
  int v7; // edx
  int v8; // eax
  int v9; // esi
  int v10; // ecx
  signed int result; // eax
  int v12; // esi
  __int16 v13; // bx
  __int16 v14; // bp
  signed int v15; // eax
  int (__thiscall *v16)(int, int *, int *); // edx
  int v17; // edx
  int v18; // eax
  int v19; // ecx
  _WORD *v20; // esi
  unsigned int v21; // ecx
  unsigned int v22; // eax
  unsigned __int8 v23; // dl
  unsigned int v24; // ecx
  unsigned int v25; // eax
  unsigned int v26; // edx
  __int16 v27; // ax
  int (__thiscall *v28)(_DWORD *, int *, int *); // edx
  int v29; // edx
  int v30; // ecx
  int v31; // eax
  unsigned __int8 *v32; // esi
  char *v33; // ecx
  unsigned int v34; // edi
  __int16 v35; // dx
  _BYTE *v36; // ecx
  __int16 v37; // ax
  int v38; // esi
  __int16 v39; // dx
  int v40; // edx
  int v41; // ecx
  int *v42; // eax
  unsigned __int8 *v43; // esi
  char *v44; // ecx
  unsigned int v45; // edi
  __int16 v46; // dx
  _BYTE *v47; // ecx
  __int16 v48; // ax
  int v49; // esi
  __int16 v50; // dx
  int v51; // [esp+10h] [ebp-54h]
  int v52; // [esp+14h] [ebp-50h]
  _DWORD *v53; // [esp+18h] [ebp-4Ch]
  int v54; // [esp+1Ch] [ebp-48h]
  _WORD *v55; // [esp+20h] [ebp-44h]
  int v56; // [esp+24h] [ebp-40h]
  int v57; // [esp+28h] [ebp-3Ch]
  int v58; // [esp+2Ch] [ebp-38h]
  int v59; // [esp+30h] [ebp-34h]
  int v60; // [esp+34h] [ebp-30h]
  char *v61; // [esp+38h] [ebp-2Ch]
  int v62; // [esp+3Ch] [ebp-28h]
  char v63; // [esp+40h] [ebp-24h]
  int v64; // [esp+44h] [ebp-20h]
  int v65; // [esp+48h] [ebp-1Ch]
  int v66; // [esp+4Ch] [ebp-18h]
  int v67; // [esp+50h] [ebp-14h]
  int v68; // [esp+54h] [ebp-10h]
  int v69; // [esp+58h] [ebp-Ch]
  int v70; // [esp+5Ch] [ebp-8h]
  int v71; // [esp+60h] [ebp-4h]
  int i; // [esp+68h] [ebp+4h]
  int j; // [esp+68h] [ebp+4h]
  int k; // [esp+68h] [ebp+4h]
  int v75; // [esp+6Ch] [ebp+8h]
  int v76; // [esp+6Ch] [ebp+8h]
  unsigned __int8 v77; // [esp+6Eh] [ebp+Ah]

  v6 = this;
  v53 = this;
  v7 = *a6;
  v8 = a6[2];
  v9 = a6[1];
  v10 = a6[3];
  v70 = v8;
  v71 = v10;
  v66 = a3 + v8 - v7;
  v67 = a4 + v10 - v9;
  v68 = v7;
  v69 = v9;
  v64 = a3;
  v65 = a4;
  result = sub_49B580(v53 + 6, &v64, &v68);
  if ( !result )
  {
    sub_49A890(v6, &v64);
    v12 = a5;
    v13 = a2;
    v52 = *(_DWORD *)(a5 + 12);
    v14 = 256 - a2;
    v15 = sub_49CA30(v6);
    v16 = *(int (__thiscall **)(int, int *, int *))(*(_DWORD *)v12 + 92);
    v58 = v15;
    result = v16(v12, &v51, &v56);
    v57 = result;
    if ( result )
    {
      switch ( v56 )
      {
        case 2:
          v51 /= 2;
          v60 = (*(int (__thiscall **)(_DWORD *, int *, char *))(*v6 + 92))(v6, &v54, &v63);
          v54 /= 2;
          if ( v60 )
          {
            v17 = v65;
            v59 = v65;
            if ( v65 < v67 )
            {
              v18 = 2 * (v66 - v64);
              v19 = v69 - v65;
              v62 = 2 * (v66 - v64);
              for ( i = v69 - v65; ; v19 = i )
              {
                v55 = (_WORD *)(v57 + 2 * (v68 + v51 * (v17 + v19)));
                v20 = (_WORD *)(v60 + 2 * (v64 + v54 * v17));
                v21 = (unsigned int)v20 + v18;
                v61 = (char *)v20 + v18;
                if ( v20 < (_WORD *)((char *)v20 + v18) )
                {
                  do
                  {
                    LOWORD(v22) = *v55;
                    if ( (unsigned __int16)*v55 != v52 )
                    {
                      v22 = (unsigned __int16)v22;
                      v23 = 4 * ((unsigned int)(unsigned __int16)v22 >> 5);
                      if ( v58 == 2 )
                      {
                        v24 = v22 >> 7;
                        v23 = 8 * ((unsigned int)(unsigned __int16)v22 >> 5);
                      }
                      else
                      {
                        LOBYTE(v24) = *v55 >> 8;
                      }
                      LOBYTE(a6) = 8 * v22;
                      v25 = (unsigned __int16)*v20;
                      *(_WORD *)((char *)&a6 + 1) = __PAIR__(v24, v23) & 0xF8FF;
                      a4 = (int)a6;
                      if ( v58 == 2 )
                      {
                        v77 = (v25 >> 7) & 0xF8;
                        LOBYTE(v26) = 2 * (v25 >> 5);
                      }
                      else
                      {
                        v77 = BYTE1(v25) & 0xF8;
                        v26 = v25 >> 5;
                      }
                      BYTE2(a4) = ((unsigned __int16)(v13 * BYTE2(a6)) >> 8) + ((unsigned __int16)(v14 * v77) >> 8);
                      BYTE1(a4) = ((unsigned __int16)(v13 * BYTE1(a4)) >> 8)
                                + ((unsigned __int16)(v14 * (unsigned __int8)(4 * v26)) >> 8);
                      LOBYTE(a4) = ((unsigned __int16)(v13 * (unsigned __int8)a4) >> 8)
                                 + ((unsigned __int16)(v14 * (unsigned __int8)(8 * v25)) >> 8);
                      v27 = sub_40223E(v58, a4);
                      v21 = (unsigned int)v61;
                      v17 = v59;
                      *v20 = v27;
                    }
                    ++v55;
                    v6 = v53;
                    ++v20;
                  }
                  while ( (unsigned int)v20 < v21 );
                  v18 = v62;
                }
                v59 = ++v17;
                if ( v17 >= v67 )
                  break;
              }
              goto LABEL_48;
            }
LABEL_49:
            (*(void (__thiscall **)(_DWORD *))(*v6 + 96))(v6);
          }
          return (*(int (__thiscall **)(int))(*(_DWORD *)v12 + 96))(v12);
        case 3:
          v28 = *(int (__thiscall **)(_DWORD *, int *, int *))(*v6 + 92);
          *(_WORD *)((char *)&a6 + 1) = *(_WORD *)((char *)&v52 + 1);
          v61 = (char *)v28(v6, &v62, &a4);
          if ( !v61 )
            return (*(int (__thiscall **)(int))(*(_DWORD *)v12 + 96))(v12);
          v29 = v65;
          v59 = v65;
          if ( v65 >= v67 )
            goto LABEL_49;
          v75 = v66 - v64;
          v30 = v69 - v65;
          v31 = a4;
          for ( j = v69 - v65; ; v30 = j )
          {
            v32 = (unsigned __int8 *)(v57 + v51 * (v29 + v30) + v68 * v56);
            v33 = &v61[v62 * v29 + v64 * v31];
            v34 = (unsigned int)&v33[v31 * v75];
            if ( (unsigned int)v33 < v34 )
            {
              do
              {
                if ( *v32 != (_BYTE)v52 || *(_WORD *)(v32 + 1) != *(_WORD *)((char *)&a6 + 1) )
                {
                  *v33 = ((unsigned __int16)(v13 * *v32) >> 8) + ((unsigned __int16)(v14 * (unsigned __int8)*v33) >> 8);
                  v35 = v14 * (unsigned __int8)v33[1];
                  v36 = v33 + 1;
                  v37 = v13 * v32[1];
                  v38 = (int)(v32 + 1);
                  *v36 = HIBYTE(v37) + HIBYTE(v35);
                  v39 = v14 * (unsigned __int8)(v36++)[1];
                  *v36 = ((unsigned __int16)(v13 * *(unsigned __int8 *)(v38 + 1)) >> 8) + HIBYTE(v39);
                  v33 = v36 + 1;
                  v32 = (unsigned __int8 *)(v38 + 2);
                }
                else
                {
                  v33 += 3;
                  v32 += 3;
                }
              }
              while ( (unsigned int)v33 < v34 );
              v31 = a4;
            }
            v29 = v59++ + 1;
            if ( v59 >= v67 )
              break;
          }
          break;
        case 4:
          v61 = (char *)(*(int (__thiscall **)(_DWORD *, int *, int **))(*v6 + 92))(v6, &v62, &a6);
          if ( !v61 )
            return (*(int (__thiscall **)(int))(*(_DWORD *)v12 + 96))(v12);
          v40 = v65;
          a4 = v65;
          if ( v65 >= v67 )
            goto LABEL_49;
          v41 = v69 - v65;
          v76 = v66 - v64;
          v42 = a6;
          for ( k = v69 - v65; ; v41 = k )
          {
            v43 = (unsigned __int8 *)(v57 + v51 * (v40 + v41) + v68 * v56);
            v44 = &v61[v62 * v40 + v64 * (_DWORD)v42];
            v45 = (unsigned int)&v44[(_DWORD)v42 * v76];
            if ( (unsigned int)v44 < v45 )
            {
              do
              {
                if ( *(_DWORD *)v43 == v52 )
                {
                  v44 += 4;
                  v43 += 4;
                }
                else
                {
                  *v44 = ((unsigned __int16)(v13 * *v43) >> 8) + ((unsigned __int16)(v14 * (unsigned __int8)*v44) >> 8);
                  v46 = v14 * (unsigned __int8)v44[1];
                  v47 = v44 + 1;
                  v48 = v13 * v43[1];
                  v49 = (int)(v43 + 1);
                  *v47 = HIBYTE(v48) + HIBYTE(v46);
                  v50 = v14 * (unsigned __int8)(v47++)[1];
                  *v47 = ((unsigned __int16)(v13 * *(unsigned __int8 *)(v49 + 1)) >> 8) + HIBYTE(v50);
                  v40 = a4;
                  v44 = v47 + 2;
                  v43 = (unsigned __int8 *)(v49 + 3);
                }
              }
              while ( (unsigned int)v44 < v45 );
              v42 = a6;
            }
            a4 = ++v40;
            if ( v40 >= v67 )
              break;
          }
          break;
        default:
          return (*(int (__thiscall **)(int))(*(_DWORD *)v12 + 96))(v12);
      }
      v6 = v53;
LABEL_48:
      v12 = a5;
      goto LABEL_49;
    }
  }
  return result;
}
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);

//----- (0049F5F0) --------------------------------------------------------
int __thiscall sub_49F5F0(_DWORD *this, int a2, int a3, int *a4)
{
  int v4; // esi
  _DWORD *v5; // ebp
  int v6; // eax
  int v7; // ecx
  int v8; // ecx
  int v9; // edx
  int v10; // ecx
  int v11; // eax
  int result; // eax
  int v13; // ecx
  int v14; // edi
  int v15; // ebx
  _WORD *v16; // eax
  unsigned int v17; // edx
  unsigned int i; // edx
  _WORD *v19; // eax
  int v20; // [esp+8h] [ebp-20h]
  int v21; // [esp+Ch] [ebp-1Ch]
  _DWORD *v22; // [esp+10h] [ebp-18h]
  char v23; // [esp+14h] [ebp-14h]
  int v24; // [esp+18h] [ebp-10h]
  int v25; // [esp+1Ch] [ebp-Ch]
  int v26; // [esp+20h] [ebp-8h]
  int v27; // [esp+24h] [ebp-4h]

  v4 = 0;
  v5 = this;
  v22 = this;
  if ( a4 )
  {
    v8 = a4[2];
    v4 = a4[1];
    v24 = *a4;
    v9 = a4[3];
    v26 = v8;
    v27 = v9;
  }
  else
  {
    v6 = this[1];
    v7 = this[2];
    v24 = 0;
    v26 = v6;
    v27 = v7;
  }
  v10 = v5[8];
  v11 = v5[6];
  v25 = v4;
  if ( v10 <= v11 )
    goto LABEL_43;
  if ( v24 < v11 )
    v24 = v11;
  if ( v4 < v5[7] )
  {
    v4 = v5[7];
    v25 = v5[7];
  }
  if ( v26 > v10 )
    v26 = v10;
  if ( v27 > v5[9] )
    v27 = v5[9];
  result = v26;
  if ( v24 < v26 && v4 < v27 )
  {
LABEL_43:
    sub_49A890(v5, &v24);
    v21 = (*(int (__thiscall **)(_DWORD *, int *, char *))(*v5 + 92))(v5, &v20, &v23);
    v20 /= 2;
    v13 = (unsigned __int16)(sub_49CA30(v5) != 3 ? 31711 : -2081);
    v14 = a3 & v13;
    v15 = v4;
    if ( v4 < v27 )
    {
      do
      {
        v16 = (_WORD *)(v21 + 2 * (v20 * v15 + v24));
        v17 = v21 + 2 * (v26 + v20 * v15);
        switch ( a2 )
        {
          case 0:
            for ( ; (unsigned int)v16 < v17; ++v16 )
              *v16 = (v14 + (v13 & ((v14 + (v13 & ((v14 + (unsigned __int16)(v13 & *v16)) >> 1))) >> 1))) >> 1;
            break;
          case 1:
            for ( ; (unsigned int)v16 < v17; ++v16 )
              *v16 = (v14 + (v13 & ((v14 + (unsigned __int16)(v13 & *v16)) >> 1))) >> 1;
            break;
          case 2:
            for ( ; (unsigned int)v16 < v17; ++v16 )
              *v16 = (v14 + (unsigned __int16)(v13 & *v16)) >> 1;
            break;
          case 3:
            for ( ; (unsigned int)v16 < v17; ++v16 )
              *v16 = ((unsigned __int16)(v13 & *v16) + (v13 & (((unsigned __int16)(v13 & *v16) + v14) >> 1))) >> 1;
            break;
          case 4:
            for ( ; (unsigned int)v16 < v17; ++v16 )
              *v16 = ((unsigned __int16)(v13 & *v16)
                    + (v13 & (((unsigned __int16)(v13 & *v16) + (v13 & (((unsigned __int16)(v13 & *v16) + v14) >> 1))) >> 1))) >> 1;
            break;
          case 5:
            if ( ((_BYTE)v15 + (unsigned __int8)*a4) & 1 )
            {
              for ( ; (unsigned int)v16 < v17; v16 += 2 )
                *v16 = a3;
            }
            else
            {
              for ( i = v17 - 2; (unsigned int)v16 < i; v16 = v19 + 1 )
              {
                v19 = v16 + 1;
                *v19 = a3;
              }
            }
            break;
          default:
            break;
        }
        ++v15;
      }
      while ( v15 < v27 );
      v5 = v22;
    }
    result = (*(int (__thiscall **)(_DWORD *))(*v5 + 96))(v5);
  }
  return result;
}

//----- (0049F860) --------------------------------------------------------
void *__thiscall sub_49F860(char *this, HWND hWnd, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  void *v10; // esi
  LPDIRECTDRAW *v11; // ebx
  GUID *v12; // eax

  v10 = this;
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 7) = 0;
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  v11 = (LPDIRECTDRAW *)(this + 172);
  *((_DWORD *)this + 3) = -1;
  *((_DWORD *)this + 4) = -1;
  *((_DWORD *)this + 37) = 0;
  *((_DWORD *)this + 38) = 0;
  *((_DWORD *)this + 39) = 0;
  *((_DWORD *)this + 40) = 0;
  *((_DWORD *)this + 43) = 0;
  *((_DWORD *)this + 42) = 0;
  *((_DWORD *)this + 1) = a3;
  *((_DWORD *)this + 2) = a4;
  *((_DWORD *)this + 51) = a7;
  *(_DWORD *)this = &FullScreenPrimarySurface::`vftable';
  *((_DWORD *)this + 44) = 0;
  *((_DWORD *)this + 45) = 0;
  *((_DWORD *)this + 41) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 46) = hWnd;
  *((_DWORD *)this + 52) = a8;
  *((_DWORD *)this + 53) = a9;
  if ( a8 )
    *((_DWORD *)this + 51) = 1;
  if ( hWnd )
    GetWindowRect(hWnd, (LPRECT)(this + 188));
  if ( a10 )
  {
    *v11 = (LPDIRECTDRAW)a10;
    (*(void (__stdcall **)(int))(*(_DWORD *)a10 + 4))(a10);
  }
  else
  {
    v12 = 0;
    if ( a6 )
      v12 = (GUID *)2;
    if ( DirectDrawCreate(v12, v11, 0) )
    {
      *v11 = 0;
      MessageBoxA(0, "Could not create DirectDraw object", "Error", 0x30u);
      return v10;
    }
  }
  if ( (*v11)->lpVtbl->SetCooperativeLevel(*v11, *((HWND *)v10 + 46), 81) )
  {
    (*v11)->lpVtbl->Release(*v11);
    *v11 = 0;
    MessageBoxA(0, "Could not set cooperative level.", "Error", 0x30u);
  }
  else
  {
    sub_49CFB0((int *)v10, *((_DWORD *)v10 + 1), *((_DWORD *)v10 + 2), a5);
    sub_49C2F0((int *)v10, 0, 0);
    if ( *((_DWORD *)v10 + 51) )
    {
      (*(void (__thiscall **)(void *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 4))(
        v10,
        0,
        *((_DWORD *)v10 + 44),
        0,
        0,
        0,
        0);
    }
    else if ( (*(int (__stdcall **)(_DWORD, _DWORD, signed int))(**((_DWORD **)v10 + 41) + 44))(
                *((_DWORD *)v10 + 41),
                0,
                1) == -2005532222 )
    {
      (*(void (__thiscall **)(void *))(*(_DWORD *)v10 + 52))(v10);
    }
    sub_49C2F0((int *)v10, 0, 0);
  }
  return v10;
}
// 51DA54: using guessed type void *FullScreenPrimarySurface::`vftable';

//----- (0049FA40) --------------------------------------------------------
int __thiscall sub_49FA40(HWND *this)
{
  HWND *v1; // esi
  HWND v2; // eax
  void (__stdcall ***v3)(signed int); // ecx
  HWND v4; // eax
  HWND v5; // eax
  int result; // eax

  v1 = this;
  *this = (HWND)&FullScreenPrimarySurface::`vftable';
  if ( this[51] )
  {
    v2 = this[45];
    if ( v2 )
    {
      (*(void (__stdcall **)(HWND))(*(_DWORD *)v2 + 8))(this[45]);
      v1[45] = 0;
    }
  }
  v3 = (void (__stdcall ***)(signed int))v1[44];
  if ( v3 )
  {
    (**v3)(1);
    v1[44] = 0;
  }
  v4 = v1[41];
  if ( v4 )
  {
    (*(void (__stdcall **)(HWND))(*(_DWORD *)v4 + 8))(v1[41]);
    v1[41] = 0;
  }
  v5 = v1[42];
  if ( v5 )
  {
    (*(void (__stdcall **)(HWND))(*(_DWORD *)v5 + 8))(v1[42]);
    v1[42] = 0;
  }
  result = (int)v1[43];
  v1[5] = 0;
  if ( result )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)result + 76))(result);
    (*(void (__stdcall **)(HWND, HWND, signed int))(*(_DWORD *)v1[43] + 80))(v1[43], v1[46], 8);
    result = (*(int (__stdcall **)(HWND))(*(_DWORD *)v1[43] + 8))(v1[43]);
  }
  if ( v1[46] )
  {
    sub_49D400(v1);
    result = SetWindowPos(
               v1[46],
               0,
               (int)v1[47],
               (int)v1[48],
               (char *)v1[49] - (char *)v1[47],
               (char *)v1[50] - (char *)v1[48],
               4u);
  }
  *v1 = (HWND)&Surface::`vftable';
  return result;
}
// 51D684: using guessed type void *Surface::`vftable';
// 51DA54: using guessed type void *FullScreenPrimarySurface::`vftable';

//----- (0049FB70) --------------------------------------------------------
int __thiscall sub_49FB70(HWND *this, int a2)
{
  HWND *v2; // esi
  int result; // eax

  v2 = this;
  if ( sub_49CA30(this[48]) == 5 )
    result = sub_49D700(v2);
  else
    result = (*((int (__thiscall **)(HWND *, _DWORD, HWND, HWND, HWND, _DWORD, _DWORD))*v2 + 1))(
               v2,
               0,
               v2[48],
               v2[44],
               v2[45],
               0,
               0);
  return result;
}

//----- (0049FBC0) --------------------------------------------------------
_DWORD *__thiscall sub_49FBC0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  void (__thiscall *v7)(_DWORD *, int *); // edx
  int v9; // [esp+10h] [ebp-1Ch]
  int v10; // [esp+14h] [ebp-18h]
  int v11; // [esp+18h] [ebp-14h]
  int v12; // [esp+1Ch] [ebp-10h]
  int v13; // [esp+28h] [ebp-4h]

  v5 = this;
  this[5] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  this[41] = a2;
  this[1] = a3;
  v13 = 0;
  *this = &MemorySurface::`vftable';
  this[2] = a4;
  this[50] = a5;
  this[43] = 0;
  this[44] = 0;
  this[42] = 0;
  sub_49DB30((int)this, 0);
  v6 = v5[2];
  v7 = *(void (__thiscall **)(_DWORD *, int *))(*v5 + 64);
  v11 = v5[1];
  v12 = v6;
  v9 = 0;
  v10 = 0;
  v7(v5, &v9);
  return v5;
}
// 51D84C: using guessed type void *MemorySurface::`vftable';

//----- (0049FCA0) --------------------------------------------------------
_DWORD *__thiscall sub_49FCA0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, _DWORD *a8, int a9)
{
  _DWORD *v9; // esi
  int v10; // ecx
  void (__thiscall *v11)(_DWORD *, int *); // edx
  int v12; // eax
  int v14; // [esp+10h] [ebp-1Ch]
  int v15; // [esp+14h] [ebp-18h]
  int v16; // [esp+18h] [ebp-14h]
  int v17; // [esp+1Ch] [ebp-10h]
  int v18; // [esp+28h] [ebp-4h]

  v9 = this;
  this[5] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  this[41] = a2;
  v18 = 0;
  *this = &MemorySurface::`vftable';
  this[1] = 0;
  this[2] = 0;
  this[43] = a3;
  this[44] = a4;
  this[49] = 0;
  if ( a8 )
  {
    this[45] = *a8;
    this[46] = a8[1];
    this[47] = a8[2];
    this[48] = a8[3];
    this[49] = 1;
  }
  this[50] = a9;
  this[42] = 0;
  if ( a5 )
    this[42] = sub_40284C(a5);
  sub_49DB30((int)v9, 0);
  v10 = v9[2];
  v11 = *(void (__thiscall **)(_DWORD *, int *))(*v9 + 64);
  v16 = v9[1];
  v17 = v10;
  v14 = 0;
  v15 = 0;
  v11(v9, &v14);
  if ( a6 >= 0 && a7 >= 0 )
  {
    v12 = sub_49B870(v9, a6, a7);
    v9[3] = v12;
    v9[4] = v12;
    if ( v12 != -1 )
    {
      v14 = v12;
      v15 = v12;
      (*(void (__stdcall **)(_DWORD, signed int, int *))(*(_DWORD *)v9[5] + 116))(v9[5], 8, &v14);
    }
  }
  return v9;
}
// 40284C: using guessed type _DWORD __cdecl sub_40284C(_DWORD);
// 51D84C: using guessed type void *MemorySurface::`vftable';

//----- (0049FE20) --------------------------------------------------------
_DWORD *__thiscall sub_49FE20(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  int v8; // eax

  v7 = this;
  sub_49FBC0(this, a4, a5, a6, a7);
  v8 = v7[2] / a3;
  v7[52] = a3;
  *v7 = &FramedMemorySurface::`vftable';
  v7[51] = a2;
  v7[53] = v8;
  v7[54] = v7[1] / a2;
  return v7;
}
// 51D8BC: using guessed type void *FramedMemorySurface::`vftable';

//----- (0049FEF0) --------------------------------------------------------
_DWORD *__thiscall sub_49FEF0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // ecx
  int v7; // edx

  v5 = this;
  sub_49FBC0(this, a2, a3, a4, a5);
  v6 = v5[1];
  v7 = v5[2];
  v5[184] = 0;
  v5[185] = 0;
  v5[186] = 0;
  v5[187] = 0;
  v5[180] = 0;
  v5[181] = 0;
  *v5 = &VirtualSurface::`vftable';
  v5[179] = -1;
  v5[182] = v6;
  v5[183] = v7;
  return v5;
}
// 51D934: using guessed type void *VirtualSurface::`vftable';

//----- (0049FF60) --------------------------------------------------------
int __thiscall sub_49FF60(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // eax
  int v5; // ebp
  int v6; // ecx
  int v7; // ebx
  int v8; // edi
  int v9; // eax
  int v10; // edx
  int v11; // edx
  int v12; // edx
  int v13; // ecx
  int v14; // edi
  int v15; // eax
  int v16; // eax
  int v17; // ecx
  int v18; // eax
  int v19; // edx
  int v20; // ecx
  int v21; // eax
  int result; // eax
  __int64 v23; // rtt
  int v24; // [esp+10h] [ebp-14h]
  int v25; // [esp+14h] [ebp-10h]
  int v26; // [esp+18h] [ebp-Ch]
  int v27; // [esp+1Ch] [ebp-8h]
  int v28; // [esp+20h] [ebp-4h]
  int v29; // [esp+28h] [ebp+4h]

  v3 = this;
  v4 = this[5];
  if ( !v4 || (*(int (__stdcall **)(int))(*(_DWORD *)v4 + 96))(v4) )
    (*(void (__thiscall **)(_DWORD *))(*v3 + 52))(v3);
  v5 = a2;
  v6 = a2 - v3[184];
  v7 = a3 - v3[185];
  v8 = abs(a2 - v3[184]);
  v24 = a2 - v3[184];
  if ( v8 >= v3[1] || (v9 = abs(v7), v29 = v9, v9 >= v3[2]) )
  {
    v3[186] = 0;
    v3[187] = 0;
    result = -1;
    if ( v3[179] != -1 )
    {
      v3[179] = -1;
      result = a3;
    }
    v3[184] = v5;
    v3[185] = a3;
  }
  else
  {
    v10 = v5 + v3[1];
    v25 = v5;
    v27 = v10;
    if ( v7 > 0 )
      v11 = v3[2] + v3[185];
    else
      v11 = a3;
    v26 = v11;
    v12 = v9 + v11;
    v28 = v12;
    if ( v5 != v27 && v26 != v12 )
    {
      sub_49E420(v3, &v25);
      v12 = v28;
      v6 = v24;
    }
    if ( v6 > 0 )
      v13 = v3[184] + v3[1];
    else
      v13 = v5;
    v14 = v13 + v8;
    v25 = v13;
    v27 = v14;
    if ( v7 >= 0 )
      v12 = a3;
    v15 = v3[2] - v29;
    v26 = v12;
    v16 = v12 + v15;
    v28 = v16;
    if ( v13 != v14 && v12 != v16 )
      sub_49E420(v3, &v25);
    v17 = v3[1];
    v18 = v24 + v3[186] + (v3[1] << 12);
    v3[184] = v5;
    v19 = v18 % v17;
    v20 = v3[2];
    v21 = v3[187] + v7 + (v3[2] << 12);
    v3[186] = v19;
    v23 = v21;
    result = v21 / v20;
    v3[187] = v23 % v20;
    v3[185] = a3;
  }
  return result;
}

//----- (004A0100) --------------------------------------------------------
int __thiscall sub_4A0100(_DWORD *this, int a2, int a3, int *a4)
{
  _DWORD *v4; // esi
  int v5; // ebx
  int v6; // edx
  int v7; // edi
  int result; // eax
  int v9; // ebp
  int v10; // ecx
  int *v11; // edi
  int v12; // ebx
  int v13; // [esp+10h] [ebp-50h]
  int v14; // [esp+14h] [ebp-4Ch]
  int v15; // [esp+18h] [ebp-48h]
  int v16; // [esp+1Ch] [ebp-44h]
  char v17; // [esp+20h] [ebp-40h]

  v4 = this;
  if ( a4 )
  {
    v5 = *a4;
    v6 = a4[1];
    v7 = a4[2];
    result = a4[3];
  }
  else
  {
    v5 = this[180];
    v6 = this[181];
    v7 = this[182];
    result = this[183];
  }
  v9 = this[182];
  v10 = this[180];
  v16 = result;
  v15 = v7;
  v14 = v6;
  v13 = v5;
  if ( v9 <= v10 )
    goto LABEL_20;
  if ( v5 < v10 )
  {
    v5 = v10;
    v13 = v10;
  }
  if ( v6 < v4[181] )
  {
    v6 = v4[181];
    v14 = v4[181];
  }
  if ( v7 > v9 )
  {
    v7 = v9;
    v15 = v9;
  }
  if ( result > v4[183] )
  {
    result = v4[183];
    v16 = v4[183];
  }
  if ( v5 < v7 && v6 < result )
  {
LABEL_20:
    result = sub_49E670(v4, &v13, (int *)&v17);
    if ( result > 0 )
    {
      v11 = (int *)&v17;
      v12 = result;
      do
      {
        result = sub_49F5F0(v4, a2, a3, v11);
        v11 += 4;
        --v12;
      }
      while ( v12 );
    }
  }
  return result;
}

//----- (004A01E0) --------------------------------------------------------
void __thiscall sub_4A01E0(int *this, int a2, int *a3)
{
  int *v3; // esi
  int v4; // ebx
  int v5; // edx
  int v6; // edi
  int v7; // eax
  int v8; // ebp
  int v9; // ecx
  int v10; // eax
  int *v11; // edi
  int v12; // ebx
  int v13; // [esp+10h] [ebp-50h]
  int v14; // [esp+14h] [ebp-4Ch]
  int v15; // [esp+18h] [ebp-48h]
  int v16; // [esp+1Ch] [ebp-44h]
  char v17; // [esp+20h] [ebp-40h]

  v3 = this;
  if ( a3 )
  {
    v4 = *a3;
    v5 = a3[1];
    v6 = a3[2];
    v7 = a3[3];
  }
  else
  {
    v4 = this[180];
    v5 = this[181];
    v6 = this[182];
    v7 = this[183];
  }
  v8 = this[182];
  v9 = this[180];
  v16 = v7;
  v15 = v6;
  v14 = v5;
  v13 = v4;
  if ( v8 <= v9 )
    goto LABEL_20;
  if ( v4 < v9 )
  {
    v4 = v9;
    v13 = v9;
  }
  if ( v5 < v3[181] )
  {
    v5 = v3[181];
    v14 = v3[181];
  }
  if ( v6 > v8 )
  {
    v6 = v8;
    v15 = v8;
  }
  if ( v7 > v3[183] )
  {
    v7 = v3[183];
    v16 = v3[183];
  }
  if ( v4 < v6 && v5 < v7 )
  {
LABEL_20:
    v10 = sub_49E670(v3, &v13, (int *)&v17);
    if ( v10 > 0 )
    {
      v11 = (int *)&v17;
      v12 = v10;
      do
      {
        sub_49C2F0(v3, a2, v11);
        v11 += 4;
        --v12;
      }
      while ( v12 );
    }
  }
}

//----- (004A02B0) --------------------------------------------------------
int __thiscall sub_4A02B0(_DWORD *this, int a2, int *a3)
{
  _DWORD *v3; // esi
  int v4; // ebx
  int v5; // edx
  int v6; // edi
  int result; // eax
  int v8; // ebp
  int v9; // ecx
  int *v10; // edi
  int v11; // ebx
  int v12; // [esp+10h] [ebp-50h]
  int v13; // [esp+14h] [ebp-4Ch]
  int v14; // [esp+18h] [ebp-48h]
  int v15; // [esp+1Ch] [ebp-44h]
  char v16; // [esp+20h] [ebp-40h]

  v3 = this;
  if ( a3 )
  {
    v4 = *a3;
    v5 = a3[1];
    v6 = a3[2];
    result = a3[3];
  }
  else
  {
    v4 = this[180];
    v5 = this[181];
    v6 = this[182];
    result = this[183];
  }
  v8 = this[182];
  v9 = this[180];
  v15 = result;
  v14 = v6;
  v13 = v5;
  v12 = v4;
  if ( v8 <= v9 )
    goto LABEL_20;
  if ( v4 < v9 )
  {
    v4 = v9;
    v12 = v9;
  }
  if ( v5 < v3[181] )
  {
    v5 = v3[181];
    v13 = v3[181];
  }
  if ( v6 > v8 )
  {
    v6 = v8;
    v14 = v8;
  }
  if ( result > v3[183] )
  {
    result = v3[183];
    v15 = v3[183];
  }
  if ( v4 < v6 && v5 < result )
  {
LABEL_20:
    result = sub_49E670(v3, &v12, (int *)&v16);
    if ( result > 0 )
    {
      v10 = (int *)&v16;
      v11 = result;
      do
      {
        result = sub_49C710(v3, a2, v10);
        v10 += 4;
        --v11;
      }
      while ( v11 );
    }
  }
  return result;
}

//----- (004A0380) --------------------------------------------------------
void __thiscall sub_4A0380(_DWORD *this, int a2, int a3, _DWORD *a4, int *a5, unsigned int a6, int a7)
{
  _DWORD *v7; // edi
  int v8; // edx
  int v9; // esi
  int v10; // ecx
  int v11; // eax
  int v12; // esi
  int v13; // ebx
  int v14; // [esp+10h] [ebp-A0h]
  int v15; // [esp+14h] [ebp-9Ch]
  int v16; // [esp+18h] [ebp-98h]
  int v17; // [esp+1Ch] [ebp-94h]
  int v18; // [esp+20h] [ebp-90h]
  int v19; // [esp+24h] [ebp-8Ch]
  int v20; // [esp+28h] [ebp-88h]
  int v21; // [esp+2Ch] [ebp-84h]
  int v22; // [esp+30h] [ebp-80h]
  int v23[15]; // [esp+34h] [ebp-7Ch]
  char v24[64]; // [esp+70h] [ebp-40h]

  v7 = this;
  v8 = *a5;
  v9 = a5[1];
  v10 = a5[3];
  v20 = a5[2];
  v21 = v10;
  v16 = a2 + v20 - v8;
  v17 = a3 + v10 - v9;
  v18 = v8;
  v19 = v9;
  v14 = a2;
  v15 = a3;
  if ( !sub_49B580(v7 + 180, &v14, &v18) )
  {
    v11 = sub_49E780(v7, &v14, &v18, &v22, v24);
    if ( v11 > 0 )
    {
      v12 = 0;
      v13 = v11;
      do
      {
        sub_49BC20(v7, *(int *)((char *)&v22 + v12 * 4), v23[v12], a4, (int *)&v24[v12 * 4], a6, a7);
        v12 += 4;
        --v13;
      }
      while ( v13 );
    }
  }
}
// 4A0380: using guessed type char var_40[64];
// 4A0380: using guessed type int var_7C[15];

//----- (004A0460) --------------------------------------------------------
_DWORD *__thiscall sub_4A0460(_DWORD *this, int a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  int v4; // edx
  _DWORD *v5; // eax

  this[5] = 0;
  this[1] = 0;
  this[2] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  *this = &SubSurface::`vftable';
  this[41] = a2;
  sub_49EDD0(this, a3);
  v4 = v3[45] - v3[43];
  v3[1] = v3[44] - v3[42];
  v5 = (_DWORD *)v3[41];
  v3[2] = v4;
  v3[5] = v5[5];
  v3[3] = v5[3];
  v3[4] = v5[4];
  return v3;
}
// 51DAFC: using guessed type void *SubSurface::`vftable';

//----- (004A04F0) --------------------------------------------------------
_DWORD *__thiscall sub_4A04F0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, struct IDirectDraw *a7)
{
  _DWORD *v7; // esi
  LPDIRECTDRAW *v8; // edi
  _DWORD *v9; // ebp
  GUID *v10; // eax
  LPDIRECTDRAW v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // ecx
  void (__thiscall *v15)(_DWORD *, _DWORD, _DWORD, signed int, signed int); // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  bool v18; // zf
  HWND v19; // eax
  LONG v20; // eax
  int Dst; // [esp+28h] [ebp-17Ch]
  int v23; // [esp+2Ch] [ebp-178h]
  int v24; // [esp+90h] [ebp-114h]
  CHAR String; // [esp+94h] [ebp-110h]
  int v26; // [esp+1A0h] [ebp-4h]

  v7 = this;
  this[5] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  v8 = (LPDIRECTDRAW *)(this + 43);
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  this[43] = 0;
  this[42] = 0;
  this[55] = a2;
  this[52] = a6;
  v9 = this + 54;
  v26 = 0;
  *this = &WindowPrimarySurface::`vftable';
  this[54] = 0;
  this[48] = 0;
  this[53] = 0;
  this[1] = 0;
  this[2] = 0;
  this[50] = a4;
  this[51] = a5;
  if ( a7 )
  {
    *v8 = a7;
    a7->lpVtbl->AddRef(a7);
  }
  else
  {
    v10 = 0;
    if ( a3 )
      v10 = (GUID *)2;
    if ( DirectDrawCreate(v10, v8, 0) )
    {
      *v8 = 0;
      MessageBoxA(0, "Could not create DirectDraw object", "Error", 0x30u);
      return v7;
    }
  }
  if ( (*v8)->lpVtbl->SetCooperativeLevel(*v8, (HWND)v7[55], 12) )
  {
    (*v8)->lpVtbl->Release(*v8);
    *v8 = 0;
    MessageBoxA(0, "Could not set cooperative level.", "Error", 0x30u);
  }
  else
  {
    memset(&Dst, 0, 0x6Cu);
    v11 = *v8;
    Dst = 108;
    v23 = 1;
    v24 = 512;
    if ( v11->lpVtbl->CreateSurface(v11, (LPDDSURFACEDESC)&Dst, (LPDIRECTDRAWSURFACE *)v7 + 41, 0) )
    {
      (*v8)->lpVtbl->Release(*v8);
      *v8 = 0;
      MessageBoxA(
        0,
        "Could not allocate primary surface.  Try reinstalling the latest version of DirectX or picking a lower resolution.",
        "Error",
        0x30u);
    }
    else
    {
      v12 = operator new(0xA4u);
      LOBYTE(v26) = 1;
      if ( v12 )
        v13 = sub_49B6A0(v12, v7[41]);
      else
        v13 = 0;
      v7[48] = v13;
      v14 = v13;
      v15 = *(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, signed int, signed int))(*v13 + 68);
      LOBYTE(v26) = 0;
      v15(v14, 0, 0, -1, -1);
      v16 = operator new(0xB8u);
      if ( v16 )
        v17 = sub_4A0460(v16, v7[48], 0);
      else
        v17 = 0;
      v18 = v7[55] == 0;
      v7[49] = v17;
      if ( !v18 )
      {
        (*v8)->lpVtbl->CreateClipper(*v8, 0, (LPDIRECTDRAWCLIPPER *)v7 + 54, 0);
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)*v9 + 32))(*v9, 0, v7[55]);
        (*(void (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)v7[41] + 112))(v7[41], *v9);
      }
      sub_49D7B0((struct tagRECT *)v7);
      if ( v7[52] )
      {
        v19 = (HWND)v7[55];
        if ( v19 )
        {
          v20 = GetWindowLongA(v19, -16);
          SetWindowLongA((HWND)v7[55], -16, v20 & 0xFFF7FFFF);
          GetWindowTextA((HWND)v7[55], &String, 256);
          SetWindowTextA((HWND)v7[55], &String);
        }
      }
    }
  }
  return v7;
}
// 51D79C: using guessed type void *WindowPrimarySurface::`vftable';

//----- (004A0800) --------------------------------------------------------
_DWORD *__thiscall sub_4A0800(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int v5; // ecx
  _DWORD *result; // eax
  _DWORD *v7; // eax
  void *v8; // eax
  char *v9; // eax

  v4 = this;
  v5 = this[44];
  if ( v5 )
  {
    result = (_DWORD *)v4[46];
    if ( result )
    {
      if ( a2 )
        return (_DWORD *)(*(int (__stdcall **)(int, int, int))(*(_DWORD *)v5 + 160))(a2, a3, a4);
    }
    else if ( !a2 )
    {
      return result;
    }
    v4[44] = 0;
    if ( v5 )
      (**(void (__stdcall ***)(signed int))v5)(1);
  }
  v4[46] = a2;
  v4[47] = a3;
  v4[48] = a4;
  if ( a2 )
  {
    v9 = (char *)operator new(0xD8u);
    if ( v9 )
    {
      v8 = sub_49F860(v9, (HWND)v4[45], v4[46], v4[47], v4[48], v4[49], v4[52], v4[50], v4[53], v4[43]);
      goto LABEL_15;
    }
LABEL_14:
    v8 = 0;
    goto LABEL_15;
  }
  v7 = operator new(0xE0u);
  if ( !v7 )
    goto LABEL_14;
  v8 = sub_4A04F0(v7, v4[45], v4[49], v4[50], 0, v4[51], (struct IDirectDraw *)v4[43]);
LABEL_15:
  v4[44] = v8;
  return sub_49EF40(v4);
}

//----- (004A0990) --------------------------------------------------------
_DWORD *__thiscall sub_4A0990(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  _DWORD *v10; // esi
  LPDIRECTDRAW *v11; // ebx
  GUID *v12; // ecx

  v10 = this;
  this[5] = 0;
  this[1] = 0;
  this[2] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  v11 = (LPDIRECTDRAW *)(this + 43);
  this[3] = -1;
  this[4] = -1;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = 0;
  this[43] = 0;
  this[42] = 0;
  this[50] = a8;
  this[45] = a2;
  this[51] = a10;
  this[52] = a7;
  v12 = 0;
  *v10 = &ComboPrimarySurface::`vftable';
  v10[44] = 0;
  v10[49] = a6;
  v10[53] = a9;
  if ( a6 )
    v12 = (GUID *)2;
  if ( DirectDrawCreate(v12, v11, 0) )
  {
    *v11 = 0;
    MessageBoxA(0, "Could not create DirectDraw object", "Error", 0x30u);
  }
  else
  {
    sub_4A0800(v10, a3, a4, a5);
  }
  return v10;
}
// 51D9AC: using guessed type void *ComboPrimarySurface::`vftable';

//----- (004A0AB0) --------------------------------------------------------
void *__thiscall sub_4A0AB0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Surface::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (004A0AD0) --------------------------------------------------------
void *__thiscall sub_4A0AD0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Surface::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (004A0AF0) --------------------------------------------------------
void *__thiscall sub_4A0AF0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_49D560(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004A0B10) --------------------------------------------------------
void *__thiscall sub_4A0B10(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_49DAB0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004A0B30) --------------------------------------------------------
void *__thiscall sub_4A0B30(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &FramedMemorySurface::`vftable';
  sub_49DAB0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51D8BC: using guessed type void *FramedMemorySurface::`vftable';

//----- (004A0B60) --------------------------------------------------------
void *__thiscall sub_4A0B60(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &VirtualSurface::`vftable';
  sub_49DAB0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51D934: using guessed type void *VirtualSurface::`vftable';

//----- (004A0B90) --------------------------------------------------------
void *__thiscall sub_4A0B90(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Surface::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (004A0BB0) --------------------------------------------------------
void *__thiscall sub_4A0BB0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_49EEA0(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004A0BD0) --------------------------------------------------------
void *__thiscall sub_4A0BD0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_49FA40((HWND *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004A0C30) --------------------------------------------------------
size_t __thiscall sub_4A0C30(_DWORD *this, FILE *File)
{
  _DWORD *v2; // ebp
  int v3; // edi
  signed int v4; // esi
  unsigned __int16 *v5; // ecx
  unsigned int v6; // eax
  unsigned int v7; // edx
  unsigned int v8; // eax
  unsigned int v9; // edx
  unsigned int v10; // eax
  unsigned int v11; // edx
  unsigned int v12; // eax
  unsigned int v13; // edx
  const void *v14; // eax
  __int16 v15; // ax
  int Str; // [esp+Ch] [ebp-404h]
  int v18; // [esp+10h] [ebp-400h]
  int v19; // [esp+14h] [ebp-3FCh]
  int v20; // [esp+18h] [ebp-3F8h]
  int v21[253]; // [esp+1Ch] [ebp-3F4h]

  v2 = this;
  v3 = dword_576828;
  v4 = 0;
  v5 = (unsigned __int16 *)(this[94] + 4);
  do
  {
    v6 = *(v5 - 2);
    if ( v3 == 2 )
    {
      BYTE2(Str) = (v6 >> 7) & 0xF8;
      LOBYTE(v7) = 2 * (v6 >> 5);
    }
    else
    {
      BYTE2(Str) = BYTE1(v6) & 0xF8;
      v7 = v6 >> 5;
    }
    LOBYTE(Str) = 8 * v6;
    BYTE1(Str) = 4 * v7;
    *(&v18 + v4) = Str;
    v8 = *(v5 - 1);
    if ( v3 == 2 )
    {
      BYTE2(Str) = (v8 >> 7) & 0xF8;
      LOBYTE(v9) = 2 * (v8 >> 5);
    }
    else
    {
      BYTE2(Str) = BYTE1(v8) & 0xF8;
      v9 = v8 >> 5;
    }
    LOBYTE(Str) = 8 * v8;
    BYTE1(Str) = 4 * v9;
    *(&v19 + v4) = Str;
    v10 = *v5;
    if ( v3 == 2 )
    {
      BYTE2(Str) = (v10 >> 7) & 0xF8;
      LOBYTE(v11) = 2 * (v10 >> 5);
    }
    else
    {
      BYTE2(Str) = BYTE1(v10) & 0xF8;
      v11 = v10 >> 5;
    }
    LOBYTE(Str) = 8 * v10;
    BYTE1(Str) = 4 * v11;
    *(&v20 + v4) = Str;
    v12 = v5[1];
    if ( v3 == 2 )
    {
      BYTE2(Str) = (v12 >> 7) & 0xF8;
      LOBYTE(v13) = 2 * (v12 >> 5);
    }
    else
    {
      BYTE2(Str) = BYTE1(v12) & 0xF8;
      v13 = v12 >> 5;
    }
    LOBYTE(Str) = 8 * v12;
    BYTE1(Str) = 4 * v13;
    v21[v4] = Str;
    v4 += 4;
    v5 += 4;
  }
  while ( v4 < 256 );
  Str = 5;
  fwrite(&Str, 1u, 2u, File);
  fwrite(v2 + 41, 0xB6u, 1u, File);
  v14 = *(const void **)((char *)v2 + 350);
  if ( v14 )
    fwrite(v14, 0x400u, 1u, File);
  else
    fwrite(&v18, 0x400u, 1u, File);
  v15 = *((_WORD *)v2 + 92);
  if ( v15 > 0 )
    fwrite(*(const void **)((char *)v2 + 346), v15, 1u, File);
  fwrite((const void *)v2[90], 0xCu, *((signed __int16 *)v2 + 84), File);
  return fwrite((const void *)v2[89], 1u, v2[41], File);
}
// 576828: using guessed type int dword_576828;
// 4A0C30: using guessed type int var_3F4[253];

//----- (004A0E40) --------------------------------------------------------
char *__thiscall sub_4A0E40(void **this)
{
  void **v1; // esi
  signed int v2; // edi
  char *result; // eax
  bool v4; // zf
  bool v5; // sf
  int v6; // eax
  signed __int16 *v7; // ecx
  _WORD *v8; // eax
  _WORD *v9; // eax
  signed __int16 v10; // dx
  unsigned __int8 v11; // of
  signed __int16 *v12; // eax
  int v13; // eax
  int v14; // eax
  signed __int16 v15; // cx
  int v16; // eax
  signed __int16 *v17; // edx
  int v18; // ebp
  signed __int16 *v19; // edx
  signed int v20; // [esp+8h] [ebp-8h]
  _WORD *v21; // [esp+Ch] [ebp-4h]

  v1 = this;
  v2 = 0;
  if ( this[95] )
  {
    j__free(this[95]);
    v1[95] = 0;
  }
  result = (char *)operator new(8 * *((signed __int16 *)v1 + 88));
  v4 = *((_WORD *)v1 + 88) == 0;
  v5 = *((_WORD *)v1 + 88) < 0;
  v1[95] = result;
  if ( !v5 && !v4 )
  {
    do
    {
      *((_WORD *)v1[95] + 4 * v2) = 30000;
      *((_WORD *)v1[95] + 4 * v2 + 1) = 30000;
      *((_WORD *)v1[95] + 4 * v2 + 2) = -1;
      result = 0;
      *((_WORD *)v1[95] + 4 * v2 + 3) = -1;
      v20 = 0;
      if ( *((_WORD *)v1 + 89) > 0 )
      {
        do
        {
          v6 = (int)&result[v2 * *((signed __int16 *)v1 + 89)];
          if ( v6 < *((signed __int16 *)v1 + 84) )
          {
            v7 = (signed __int16 *)((char *)v1[90] + 12 * v6);
            v8 = (char *)v1[95] + 8 * v2;
            if ( *v7 < *v8 )
              *v8 = *v7;
            v9 = v1[95];
            v10 = v7[1];
            v11 = __OFSUB__(v10, v9[4 * v2 + 1]);
            v5 = (signed __int16)(v10 - v9[4 * v2 + 1]) < 0;
            v12 = &v9[4 * v2 + 1];
            if ( v5 ^ v11 )
              *v12 = v10;
            v13 = abs(v7[2]);
            v21 = (char *)v1[95] + 8 * v2 + 4;
            if ( v13 + *v7 > (signed __int16)*v21 )
              *v21 = v13 + *v7;
            v14 = v7[3];
            v15 = v7[1];
            v16 = abs(v14);
            v17 = (signed __int16 *)v1[95];
            v18 = v17[4 * v2 + 3];
            v19 = &v17[4 * v2 + 3];
            if ( v16 + v15 > v18 )
              *v19 = v16 + v15;
          }
          result = (char *)(v20++ + 1);
        }
        while ( v20 < *((signed __int16 *)v1 + 89) );
      }
      ++v2;
    }
    while ( v2 < *((signed __int16 *)v1 + 88) );
  }
  return result;
}

//----- (004A10E0) --------------------------------------------------------
int __thiscall sub_4A10E0(int this, int a2)
{
  int v2; // ebx
  int v4; // ebp
  int v5; // eax
  int v6; // edx
  unsigned __int8 *v7; // esi
  int v8; // eax
  int v9; // edi
  int v10; // [esp+8h] [ebp-8h]
  int v11; // [esp+Ch] [ebp-4h]
  int i; // [esp+14h] [ebp+4h]

  v2 = a2 * *(signed __int16 *)(this + 178);
  if ( v2 > *(signed __int16 *)(this + 168) )
    return 0;
  if ( *(_BYTE *)(this + 188) >= 0 )
  {
    v10 = 0;
    v4 = a2 * *(signed __int16 *)(this + 178);
    v11 = *(signed __int16 *)(this + 178) * (a2 + 1);
    if ( v2 < v11 )
    {
      v5 = 12 * v2;
      for ( i = 12 * v2; v4 < *(signed __int16 *)(this + 168); v5 = i )
      {
        v6 = *(_DWORD *)(this + 360);
        v7 = (unsigned __int8 *)(*(_DWORD *)(this + 356) + *(_DWORD *)(v5 + v6 + 8));
        v8 = abs(*(signed __int16 *)(v6 + v5 + 6));
        v9 = 0;
        if ( v8 > 0 )
        {
          do
          {
            if ( *v7 == -1 )
            {
              v9 += *(unsigned __int16 *)(v7 + 1);
              v7 += 3;
            }
            else
            {
              v9 += *v7++;
            }
            --v8;
          }
          while ( v8 );
        }
        if ( v9 > v10 )
        {
          v2 = v4;
          v10 = v9;
        }
        i += 12;
        if ( ++v4 >= v11 )
          break;
      }
    }
  }
  return v2;
}

//----- (004A11C0) --------------------------------------------------------
int __thiscall sub_4A11C0(_DWORD *this, int a2, int a3, int a4, int a5, unsigned __int16 a6)
{
  signed __int16 *v6; // eax
  int v8; // [esp+4h] [ebp-10h]
  int v9; // [esp+8h] [ebp-Ch]
  int v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+10h] [ebp-4h]

  v6 = (signed __int16 *)(this[90] + 12 * a2);
  v8 = *v6 + a4 - 1;
  v9 = v6[1] + a5 - 1;
  v10 = v6[2] + v8 + 2;
  v11 = v6[3] + v9 + 2;
  return (*(int (__stdcall **)(_DWORD, int *, signed int))(*(_DWORD *)a3 + 56))(a6, &v8, 1);
}

//----- (004A1230) --------------------------------------------------------
int *__fastcall sub_4A1230(int a1, int a2, int *a3, int a4, int *a5, unsigned int a6, int a7)
{
  int v7; // ebp
  bool v8; // zf
  int v9; // ecx
  unsigned __int8 *v10; // esi
  int v11; // edi
  int v12; // ebx
  int *result; // eax
  int v14; // eax
  int v15; // edx
  _WORD *i; // ecx
  unsigned int v17; // edx
  int v18; // edx
  int v19; // eax
  int v20; // edx
  int v21; // eax
  int *v22; // ebx
  int v23; // edx
  int v24; // eax
  int v25; // edx
  int v26; // eax
  int v27; // ecx
  unsigned __int8 *v28; // edi
  int v29; // esi
  int v30; // eax
  char *v31; // ecx
  int v32; // edx
  int v33; // eax
  int *v34; // esi
  int v35; // ebx
  int v36; // eax
  int v37; // eax
  signed int v38; // ecx
  int v39; // eax
  int *v40; // ecx
  unsigned int v41; // eax
  int v42; // ecx
  int v43; // edx
  int v44; // esi
  unsigned int v45; // ecx
  unsigned int v46; // esi
  unsigned int v47; // edx
  int v48; // edx
  unsigned int v49; // edi
  unsigned int v50; // edx
  int v51; // esi
  unsigned int v52; // esi
  unsigned int v53; // edx
  __int16 v54; // di
  unsigned int v55; // esi
  unsigned int v56; // edx
  int v57; // edx
  unsigned int v58; // esi
  unsigned int v59; // edx
  int v60; // edx
  unsigned int v61; // edi
  unsigned int v62; // edx
  int v63; // esi
  unsigned int v64; // edi
  unsigned int v65; // edx
  unsigned int v66; // edx
  int v67; // esi
  unsigned int v68; // ebp
  int v69; // edi
  unsigned int v70; // edx
  int v71; // esi
  int v72; // edi
  unsigned int v73; // edx
  int v74; // esi
  unsigned int v75; // esi
  unsigned int v76; // edx
  unsigned int v77; // edi
  int v78; // esi
  unsigned int v79; // ebp
  int v80; // esi
  unsigned __int8 *v81; // eax
  int v82; // edi
  int v83; // esi
  int v84; // edx
  int v85; // esi
  unsigned int v86; // edx
  unsigned int v87; // esi
  int v88; // edx
  unsigned int v89; // edi
  int v90; // esi
  int v91; // edx
  int v92; // esi
  int v93; // edx
  unsigned int v94; // esi
  unsigned int v95; // edx
  int v96; // edx
  unsigned int v97; // ebx
  unsigned int v98; // edi
  int v99; // edx
  unsigned __int8 *v100; // eax
  int v101; // esi
  int v102; // edx
  int v103; // edx
  unsigned int v104; // esi
  unsigned int v105; // edx
  int v106; // edx
  int v107; // edx
  unsigned int v108; // esi
  unsigned int v109; // edx
  int v110; // edx
  int v111; // edx
  unsigned int v112; // esi
  unsigned int v113; // edx
  int v114; // edx
  unsigned int v115; // edi
  unsigned int v116; // edx
  int v117; // esi
  unsigned int v118; // edi
  unsigned int v119; // edx
  int v120; // esi
  unsigned int v121; // ecx
  unsigned int v122; // ebx
  unsigned int v123; // edx
  unsigned int v124; // esi
  int v125; // edx
  unsigned int v126; // edx
  unsigned int v127; // edi
  int v128; // esi
  unsigned int v129; // edx
  unsigned int v130; // edx
  unsigned int v131; // esi
  int v132; // edx
  unsigned int v133; // edx
  unsigned int v134; // esi
  int v135; // edx
  unsigned int v136; // edx
  unsigned int v137; // edi
  int v138; // esi
  unsigned int v139; // edx
  unsigned int v140; // edi
  int v141; // esi
  unsigned int v142; // ebp
  int v143; // edi
  int v144; // esi
  int v145; // edi
  int v146; // esi
  unsigned int v147; // edx
  int v148; // esi
  int v149; // esi
  unsigned __int8 *v150; // eax
  int v151; // esi
  int v152; // edi
  int v153; // edx
  int v154; // edi
  int v155; // esi
  int v156; // esi
  unsigned int v157; // edx
  unsigned int v158; // esi
  int v159; // edx
  unsigned int v160; // edi
  int v161; // esi
  int v162; // edx
  int v163; // esi
  int v164; // edx
  unsigned int v165; // edx
  unsigned int v166; // esi
  int v167; // edx
  int v168; // ebp
  unsigned int v169; // edi
  int v170; // edx
  unsigned __int8 *v171; // eax
  int v172; // edx
  int v173; // esi
  int v174; // esi
  int v175; // edx
  int v176; // edx
  unsigned int v177; // edx
  unsigned int v178; // esi
  int v179; // edx
  int v180; // edx
  unsigned int v181; // edx
  unsigned int v182; // esi
  int v183; // edx
  int v184; // edx
  unsigned int v185; // edx
  unsigned int v186; // esi
  int v187; // edx
  __int16 v188; // bp
  unsigned int v189; // edx
  unsigned int v190; // edi
  int v191; // esi
  int v192; // edx
  __int16 v193; // bp
  unsigned int v194; // edx
  unsigned int v195; // edi
  int v196; // esi
  int v197; // edx
  unsigned int v198; // [esp+10h] [ebp-17D0h]
  int v199; // [esp+14h] [ebp-17CCh]
  unsigned int v200; // [esp+18h] [ebp-17C8h]
  unsigned int v201; // [esp+1Ch] [ebp-17C4h]
  unsigned int v202; // [esp+1Ch] [ebp-17C4h]
  unsigned int v203; // [esp+1Ch] [ebp-17C4h]
  unsigned int v204; // [esp+1Ch] [ebp-17C4h]
  unsigned int v205; // [esp+1Ch] [ebp-17C4h]
  unsigned int v206; // [esp+1Ch] [ebp-17C4h]
  unsigned int v207; // [esp+1Ch] [ebp-17C4h]
  unsigned int v208; // [esp+1Ch] [ebp-17C4h]
  signed int v209; // [esp+20h] [ebp-17C0h]
  unsigned int v210; // [esp+24h] [ebp-17BCh]
  signed int v211; // [esp+28h] [ebp-17B8h]
  int v212; // [esp+2Ch] [ebp-17B4h]
  signed int v213; // [esp+30h] [ebp-17B0h]
  unsigned int v214; // [esp+34h] [ebp-17ACh]
  int v215; // [esp+38h] [ebp-17A8h]
  unsigned int v216; // [esp+3Ch] [ebp-17A4h]
  int *v217; // [esp+40h] [ebp-17A0h]
  int v218; // [esp+44h] [ebp-179Ch]
  unsigned __int8 *v219; // [esp+48h] [ebp-1798h]
  int v220; // [esp+4Ch] [ebp-1794h]
  int v221; // [esp+50h] [ebp-1790h]
  int v222; // [esp+54h] [ebp-178Ch]
  int v223; // [esp+58h] [ebp-1788h]
  int v224; // [esp+5Ch] [ebp-1784h]
  int v225; // [esp+60h] [ebp-1780h]
  int v226; // [esp+64h] [ebp-177Ch]
  int v227; // [esp+68h] [ebp-1778h]
  char v228; // [esp+6Ch] [ebp-1774h]
  int v229; // [esp+70h] [ebp-1770h]
  char v230; // [esp+74h] [ebp-176Ch]

  v7 = a1;
  v8 = *(_BYTE *)(a1 + 188) >= 0;
  v218 = a1;
  if ( !v8 )
  {
    v9 = a3[1];
    v10 = (unsigned __int8 *)(*a3
                            + *(_DWORD *)(v7 + 356)
                            + v9 * *(signed __int16 *)(v7 + 172)
                            + *(_DWORD *)(*(_DWORD *)(v7 + 360) + 12 * dword_574824 + 8));
    v11 = a3[2] - *a3;
    v12 = a3[3] - v9;
    result = (int *)(*(int (__stdcall **)(signed int *, unsigned __int8 **))(*(_DWORD *)a4 + 92))(&v213, &v219);
    v217 = result;
    if ( result )
    {
      v14 = v213 / 2;
      v15 = *a5 + v213 / 2 * a5[1];
      v213 /= 2;
      for ( i = (_WORD *)((char *)v217 + 2 * v15); v12; v10 += *(signed __int16 *)(v7 + 172) - v11 )
      {
        v17 = (unsigned int)&v10[v11];
        --v12;
        if ( v10 < &v10[v11] )
        {
          do
          {
            *i = *(_WORD *)(a7 + 2 * *v10++);
            ++i;
          }
          while ( (unsigned int)v10 < v17 );
          v14 = v213;
          v7 = v218;
        }
        i += v14 - v11;
      }
      result = (int *)(*(int (**)(void))(*(_DWORD *)a4 + 96))();
    }
    return result;
  }
  if ( dword_576A40 )
  {
    v18 = a3[2];
    v224 = *a3;
    v226 = v18;
    v19 = abs(*(signed __int16 *)(*(_DWORD *)(a1 + 360) + 12 * dword_574824 + 6));
    v20 = v19 - a3[3];
    v21 = v19 - a3[1];
    v22 = &v224;
    v225 = v20;
    v227 = v21;
    a3 = &v224;
  }
  else
  {
    v22 = a3;
  }
  if ( dword_57682C )
  {
    v23 = v22[3];
    v221 = v22[1];
    v223 = v23;
    v24 = abs(*(signed __int16 *)(*(_DWORD *)(a1 + 360) + 12 * dword_574824 + 4));
    v25 = v24 - v22[2];
    v26 = v24 - *v22;
    v22 = &v220;
    v220 = v25;
    v222 = v26;
    a3 = &v220;
  }
  v27 = *(_DWORD *)(a1 + 360);
  v28 = (unsigned __int8 *)(*(_DWORD *)(v7 + 356) + *(_DWORD *)(v27 + 12 * dword_574824 + 8));
  v29 = 0;
  v30 = abs(*(signed __int16 *)(v27 + 12 * dword_574824 + 6));
  v219 = (unsigned __int8 *)(*(_DWORD *)(v7 + 356) + *(_DWORD *)(v27 + 12 * dword_574824 + 8));
  v229 = 0;
  v31 = &v230;
  if ( v30 > 0 )
  {
    do
    {
      if ( *v28 == -1 )
      {
        v32 = v29 + *(unsigned __int16 *)(v28 + 1);
        v28 += 3;
      }
      else
      {
        v32 = v29 + *v28++;
      }
      *(_DWORD *)v31 = v32;
      v31 += 4;
      --v30;
      v29 = v32;
    }
    while ( v30 );
    v219 = v28;
  }
  v33 = v22[1];
  v217 = &v229 + v33 + v22[3] - v33;
  v213 = (signed int)(&v229 + v33);
  result = (int *)(*(int (__stdcall **)(int *, char *))(*(_DWORD *)a4 + 92))(&v215, &v228);
  v34 = result;
  if ( result )
  {
    v35 = *a5;
    v36 = v215 / 2;
    v215 /= 2;
    if ( dword_576A40 )
    {
      v198 = (unsigned int)v34 + 2 * (v35 + v36 * (a5[3] - 1));
      v215 = -v36;
    }
    else
    {
      v198 = (unsigned int)v34 + 2 * (v35 + v215 * a5[1]);
    }
    v216 = dword_576A4C + ((a6 >> 12) & 1);
    if ( ((signed int)(v198 - (_DWORD)v34) >> 1) / v215 & 1 )
      ++v216;
    v37 = *(unsigned __int16 *)(v7 + 354);
    v218 = a5[2] - v35;
    v199 = v37;
    switch ( a6 & 0xF )
    {
      case 3u:
        if ( v37 == 256 )
        {
          v38 = 0;
          v211 = 0;
        }
        else
        {
          v38 = 2 - ((*(_BYTE *)(v7 + 188) & 0x10) != 0);
          v211 = 2 - ((*(_BYTE *)(v7 + 188) & 0x10) != 0);
        }
        goto LABEL_45;
      case 4u:
        v38 = dword_571818 != 0 ? 10 : 5;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = dword_571818 != 0 ? 10 : 5;
        goto LABEL_45;
      case 5u:
        v38 = dword_571818 != 0 ? 11 : 6;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = dword_571818 != 0 ? 11 : 6;
        goto LABEL_45;
      case 6u:
        v38 = dword_571818 != 0 ? 12 : 7;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = dword_571818 != 0 ? 12 : 7;
        goto LABEL_45;
      case 7u:
        v38 = dword_571818 != 0 ? 13 : 8;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = dword_571818 != 0 ? 13 : 8;
        goto LABEL_45;
      case 8u:
        v38 = dword_571818 != 0 ? 14 : 9;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = dword_571818 != 0 ? 14 : 9;
        goto LABEL_45;
      case 9u:
        if ( v37 == 256 )
        {
          v38 = 0;
          v211 = 0;
          goto LABEL_45;
        }
        if ( *(_BYTE *)(v7 + 188) & 0x10 )
          return (int *)(*(int (**)(void))(*(_DWORD *)a4 + 96))();
        v38 = 3;
        v211 = 3;
        goto LABEL_45;
      case 0xAu:
        if ( *(_BYTE *)(v7 + 188) & 0x10 )
        {
          v38 = 1;
          v211 = 1;
        }
        else
        {
          if ( v37 == 256 )
            return (int *)(*(int (**)(void))(*(_DWORD *)a4 + 96))();
          v38 = 4;
          v211 = 4;
        }
LABEL_45:
        if ( *(_DWORD *)(v7 + 384) )
        {
          v210 = (unsigned int)*(unsigned __int16 *)(v7 + 388) >> 5;
          v212 = (*(_WORD *)(v7 + 388) & 0xFF) + 2048;
          if ( v38 == 1 )
          {
            v211 = 15;
          }
          else if ( v38 == 2 )
          {
            v211 = 16;
          }
        }
        if ( v213 >= (unsigned int)v217 )
          return (int *)(*(int (**)(void))(*(_DWORD *)a4 + 96))();
        break;
      case 0xBu:
        v38 = 12;
        v209 = dword_576828 != 3 ? 31711 : 63455;
        v211 = 12;
        goto LABEL_45;
      default:
        v38 = v211;
        goto LABEL_45;
    }
    while ( 1 )
    {
      v39 = *(_DWORD *)v213;
      v40 = (int *)(v213 + 4);
      v213 = (signed int)v40;
      v41 = (unsigned int)&v219[v39];
      v200 = (unsigned int)&v219[*v40];
      v42 = 0;
      do
      {
        if ( v41 >= v200 )
          goto LABEL_471;
        v42 += (unsigned int)*(unsigned __int8 *)v41 >> 4;
        v43 = *(_BYTE *)v41 & 0xF;
        v44 = *a3 - v42;
        ++v41;
        if ( v43 < v44 )
          v44 = v43;
        if ( v44 > 0 )
        {
          v41 += v44;
          v43 -= v44;
          v42 += v44;
        }
      }
      while ( v42 < *a3 );
      if ( v41 < v200 )
        break;
LABEL_471:
      ++v216;
      v198 += 2 * v215;
      if ( v213 >= (unsigned int)v217 )
        return (int *)(*(int (**)(void))(*(_DWORD *)a4 + 96))();
    }
    if ( dword_57682C )
    {
      v45 = v198 + 2 * (v218 + *a3 - v42);
      switch ( v211 )
      {
        case 0:
          if ( v45 > v198 )
          {
            v52 = v198;
            do
            {
              v53 = v45 - 2 * v43;
              if ( v52 > v53 )
                v53 = v52;
              for ( ; v45 > v53; *(_WORD *)v45 = v54 )
              {
                v54 = *(_WORD *)(a7 + 2 * *(unsigned __int8 *)v41);
                v45 -= 2;
                ++v41;
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v52 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 1:
          for ( ; v45 > v198; v43 = *(_BYTE *)v41++ & 0xF )
          {
            v64 = v198;
            v65 = v45 - 2 * v43;
            if ( v198 <= v65 )
            {
              v64 = v65;
              v201 = v65;
            }
            else
            {
              v201 = v198;
            }
            if ( v45 > v64 && v45 & 3 )
            {
              v66 = *(unsigned __int16 *)(v45 - 2);
              v67 = dword_56E3F8[*(unsigned __int8 *)v41];
              v45 -= 2;
              ++v41;
              *(_WORD *)v45 = *(_WORD *)(v67 + 2 * (v66 >> 5)) | *(_WORD *)(v67 + 2 * (unsigned __int8)v66 + 4096);
            }
            v68 = (v64 + 2) & 0xFFFFFFFC;
            if ( v45 > v68 )
            {
              do
              {
                v69 = dword_56E3F8[*(unsigned __int8 *)v41];
                v70 = *(_DWORD *)(v45 - 4);
                v45 -= 4;
                v71 = *(unsigned __int16 *)(v69 + 2 * (v70 >> 21)) | *(unsigned __int16 *)(v69
                                                                                         + 2 * ((v70 >> 16) & 0xFF)
                                                                                         + 4096);
                v72 = dword_56E3F8[*(unsigned __int8 *)(v41 + 1)];
                v41 += 2;
                *(_DWORD *)v45 = (v71 << 16) | *(unsigned __int16 *)(v72 + 2 * (unsigned __int8)v70 + 4096) | *(unsigned __int16 *)(v72 + 2 * ((unsigned __int16)v70 >> 5));
              }
              while ( v45 > v68 );
              v64 = v201;
            }
            if ( v45 > v64 )
            {
              v73 = *(unsigned __int16 *)(v45 - 2);
              v74 = dword_56E3F8[*(unsigned __int8 *)v41];
              v45 -= 2;
              ++v41;
              *(_WORD *)v45 = *(_WORD *)(v74 + 2 * (v73 >> 5)) | *(_WORD *)(v74 + 2 * (unsigned __int8)v73 + 4096);
            }
            if ( v41 >= v200 )
              break;
            v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
          }
          goto LABEL_471;
        case 2:
          if ( v45 <= v198 )
            goto LABEL_471;
          v75 = v198;
          while ( 1 )
          {
            v76 = v45 - 2 * v43;
            if ( v75 <= v76 )
            {
              v77 = v76;
              v202 = v76;
            }
            else
            {
              v77 = v75;
              v202 = v75;
            }
            if ( v45 > v77 && v45 & 3 )
            {
              v78 = *(unsigned __int8 *)v41;
              v45 -= 2;
              if ( v78 < v199 )
                *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v78);
              else
                *(_WORD *)v45 = *(_WORD *)(dword_56E3F8[v78] + 2 * ((unsigned int)*(unsigned __int16 *)v45 >> 5)) | *(_WORD *)(dword_56E3F8[v78] + 2 * (unsigned __int8)*(_WORD *)v45 + 4096);
              ++v41;
            }
            v79 = (v77 + 2) & 0xFFFFFFFC;
            if ( v45 > v79 )
              break;
LABEL_162:
            if ( v45 > v77 )
            {
              v85 = *(unsigned __int8 *)v41;
              v45 -= 2;
              if ( v85 < v199 )
                *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v85);
              else
                *(_WORD *)v45 = *(_WORD *)(dword_56E3F8[v85] + 2 * ((unsigned int)*(unsigned __int16 *)v45 >> 5)) | *(_WORD *)(dword_56E3F8[v85] + 2 * (unsigned __int8)*(_WORD *)v45 + 4096);
              ++v41;
            }
            if ( v41 < v200 )
            {
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v75 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
              if ( v45 > v198 )
                continue;
            }
            goto LABEL_471;
          }
          while ( 1 )
          {
            v80 = *(unsigned __int8 *)v41;
            v45 -= 4;
            v81 = (unsigned __int8 *)(v41 + 1);
            if ( v80 < v199 )
              break;
            v82 = *v81;
            v83 = (*(unsigned __int16 *)(dword_56E3F8[v80] + 2 * (*(_DWORD *)v45 >> 21)) | *(unsigned __int16 *)(dword_56E3F8[v80] + 2 * ((*(_DWORD *)v45 >> 16) & 0xFF) + 4096)) << 16;
            if ( v82 < v199 )
            {
              v84 = a7;
LABEL_159:
              *(_DWORD *)v45 = v83 | *(unsigned __int16 *)(v84 + 2 * v82);
              goto LABEL_160;
            }
            *(_DWORD *)v45 = v83 | *(unsigned __int16 *)(dword_56E3F8[v82] + 2 * (*(_DWORD *)v45 & 0xFF) + 4096) | *(unsigned __int16 *)(dword_56E3F8[v82] + 2 * ((unsigned __int16)*(_DWORD *)v45 >> 5));
LABEL_160:
            v41 = (unsigned int)(v81 + 1);
            if ( v45 <= v79 )
            {
              v77 = v202;
              goto LABEL_162;
            }
          }
          v84 = a7;
          v82 = *v81;
          v83 = *(unsigned __int16 *)(a7 + 2 * v80) << 16;
          if ( v82 >= v199 )
          {
            *(_DWORD *)v45 = v83 | *(unsigned __int16 *)(dword_56E3F8[v82]
                                                       + 2 * ((unsigned int)*(unsigned __int16 *)v45 >> 5)) | *(unsigned __int16 *)(dword_56E3F8[v82] + 2 * (unsigned __int8)*(_WORD *)v45 + 4096);
            goto LABEL_160;
          }
          goto LABEL_159;
        case 3:
          if ( v45 > v198 )
          {
            v46 = v198;
            do
            {
              v47 = v45 - 2 * v43;
              if ( v46 <= v47 )
                v46 = v47;
              for ( ; v45 > v46; ++v41 )
              {
                v48 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v48 < v199 )
                  *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v48);
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v46 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 4:
          if ( v45 > v198 )
          {
            v49 = v198;
            do
            {
              v50 = v45 - 2 * v43;
              if ( v49 <= v50 )
                v49 = v50;
              for ( ; v45 > v49; ++v41 )
              {
                v51 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v51 >= v199 )
                  *(_WORD *)v45 = *(_WORD *)(dword_56E3F8[v51] + 2 * ((unsigned int)*(unsigned __int16 *)v45 >> 5)) | *(_WORD *)(dword_56E3F8[v51] + 2 * (unsigned __int8)*(_WORD *)v45 + 4096);
              }
              if ( v41 >= v200 )
                break;
              v49 = v198;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 5:
          if ( v45 > v198 )
          {
            v118 = v198;
            do
            {
              v119 = v45 - 2 * v43;
              if ( v118 <= v119 )
                v118 = v119;
              for ( ; v45 > v118; ++v41 )
              {
                v120 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v120 < v199 )
                  *(_WORD *)v45 = ((unsigned __int16)(v209 & *(_WORD *)v45)
                                 + (v209 & (((unsigned __int16)(v209 & *(_WORD *)v45)
                                           + (v209 & (((unsigned __int16)(v209 & *(_WORD *)v45)
                                                     + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v120))) >> 1))) >> 1))) >> 1;
              }
              if ( v41 >= v200 )
                break;
              v118 = v198;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 6:
          if ( v45 > v198 )
          {
            v115 = v198;
            do
            {
              v116 = v45 - 2 * v43;
              if ( v115 <= v116 )
                v115 = v116;
              for ( ; v45 > v115; ++v41 )
              {
                v117 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v117 < v199 )
                  *(_WORD *)v45 = ((unsigned __int16)(v209 & *(_WORD *)v45)
                                 + (v209 & (((unsigned __int16)(v209 & *(_WORD *)v45)
                                           + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v117))) >> 1))) >> 1;
              }
              if ( v41 >= v200 )
                break;
              v115 = v198;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 7:
          if ( v45 > v198 )
          {
            v112 = v198;
            do
            {
              v113 = v45 - 2 * v43;
              if ( v112 <= v113 )
                v112 = v113;
              for ( ; v45 > v112; ++v41 )
              {
                v114 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v114 < v199 )
                  *(_WORD *)v45 = ((unsigned __int16)(v209 & *(_WORD *)v45)
                                 + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v114))) >> 1;
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v112 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 8:
          if ( v45 > v198 )
          {
            v108 = v198;
            do
            {
              v109 = v45 - 2 * v43;
              if ( v108 <= v109 )
                v108 = v109;
              for ( ; v45 > v108; ++v41 )
              {
                v110 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v110 < v199 )
                {
                  v111 = (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v110));
                  *(_WORD *)v45 = (v111 + (v209 & ((v111 + (unsigned __int16)(v209 & *(_WORD *)v45)) >> 1))) >> 1;
                }
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v108 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 9:
          if ( v45 > v198 )
          {
            v104 = v198;
            do
            {
              v105 = v45 - 2 * v43;
              if ( v104 <= v105 )
                v104 = v105;
              for ( ; v45 > v104; ++v41 )
              {
                v106 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v106 < v199 )
                {
                  v107 = (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v106));
                  *(_WORD *)v45 = (v107
                                 + (v209 & ((v107 + (v209 & ((v107 + (unsigned __int16)(v209 & *(_WORD *)v45)) >> 1))) >> 1))) >> 1;
                }
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v104 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 10:
        case 11:
          if ( v45 > v198 )
          {
            v55 = v198;
            do
            {
              v56 = v45 - 2 * v43;
              if ( v55 <= v56 )
                v55 = v56;
              for ( ; v45 > v55; ++v41 )
              {
                v57 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v57 < v199 && !(v41 & 3) )
                  *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v57);
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v55 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 12:
          if ( v45 > v198 )
          {
            v61 = v198;
            do
            {
              v62 = v45 - 2 * v43;
              if ( v61 <= v62 )
                v61 = v62;
              for ( ; v45 > v61; ++v41 )
              {
                v63 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v63 < v199 && ((_BYTE)v45 - 2 * (_BYTE)v216) & 2 )
                  *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v63);
              }
              if ( v41 >= v200 )
                break;
              v61 = v198;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 13:
        case 14:
          if ( v45 > v198 )
          {
            v58 = v198;
            do
            {
              v59 = v45 - 2 * v43;
              if ( v58 <= v59 )
                v58 = v59;
              for ( ; v45 > v58; ++v41 )
              {
                v60 = *(unsigned __int8 *)v41;
                v45 -= 2;
                if ( v60 < v199 && v41 & 3 )
                  *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v60);
              }
              if ( v41 >= v200 )
                break;
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v58 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
            }
            while ( v45 > v198 );
          }
          goto LABEL_471;
        case 15:
          for ( ; v45 > v198; v43 = *(_BYTE *)v41++ & 0xF )
          {
            v86 = v45 - 2 * v43;
            v87 = v198;
            if ( v198 <= v86 )
            {
              v87 = v86;
              v203 = v86;
            }
            else
            {
              v203 = v198;
            }
            if ( v45 > v87 && v45 & 3 )
            {
              v88 = dword_56E3F8[*(unsigned __int8 *)v41];
              v45 -= 2;
              *(_WORD *)v45 = *(_WORD *)(v88 + 2 * v210) | *(_WORD *)(v88 + 2 * v212);
              ++v41;
            }
            v89 = (v87 + 2) & 0xFFFFFFFC;
            if ( v45 > v89 )
            {
              do
              {
                v90 = dword_56E3F8[*(unsigned __int8 *)v41];
                v91 = *(unsigned __int16 *)(v90 + 2 * v212) | *(unsigned __int16 *)(v90 + 2 * v210);
                v92 = dword_56E3F8[*(unsigned __int8 *)(v41 + 1)];
                v45 -= 4;
                v41 += 2;
                *(_DWORD *)v45 = (v91 << 16) | *(unsigned __int16 *)(v92 + 2 * v212) | *(unsigned __int16 *)(v92 + 2 * v210);
              }
              while ( v45 > v89 );
              v87 = v203;
            }
            if ( v45 > v87 )
            {
              v93 = dword_56E3F8[*(unsigned __int8 *)v41];
              v45 -= 2;
              *(_WORD *)v45 = *(_WORD *)(v93 + 2 * v210) | *(_WORD *)(v93 + 2 * v212);
              ++v41;
            }
            if ( v41 >= v200 )
              break;
            v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
          }
          goto LABEL_471;
        case 16:
          if ( v45 <= v198 )
            goto LABEL_471;
          v94 = v198;
          while ( 1 )
          {
            v95 = v45 - 2 * v43;
            if ( v94 <= v95 )
            {
              v94 = v95;
              v204 = v95;
            }
            else
            {
              v204 = v94;
            }
            if ( v45 > v94 && v45 & 3 )
            {
              v96 = *(unsigned __int8 *)v41;
              v97 = v210;
              v45 -= 2;
              if ( v96 < v199 )
              {
                *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v96);
                ++v41;
              }
              else
              {
                ++v41;
                *(_WORD *)v45 = *(_WORD *)(dword_56E3F8[v96] + 2 * v210) | *(_WORD *)(dword_56E3F8[v96] + 2 * v212);
              }
            }
            else
            {
              v97 = v210;
            }
            v98 = (v94 + 2) & 0xFFFFFFFC;
            if ( v45 > v98 )
              break;
LABEL_207:
            if ( v45 > v94 )
            {
              v103 = *(unsigned __int8 *)v41;
              v45 -= 2;
              if ( v103 < v199 )
                *(_WORD *)v45 = *(_WORD *)(a7 + 2 * v103);
              else
                *(_WORD *)v45 = *(_WORD *)(dword_56E3F8[v103] + 2 * v97) | *(_WORD *)(dword_56E3F8[v103] + 2 * v212);
              ++v41;
            }
            if ( v41 < v200 )
            {
              v45 -= 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
              v94 = v198;
              v43 = *(_BYTE *)v41++ & 0xF;
              if ( v45 > v198 )
                continue;
            }
            goto LABEL_471;
          }
          break;
        default:
          goto LABEL_471;
      }
      while ( 1 )
      {
        v99 = *(unsigned __int8 *)v41;
        v45 -= 4;
        v100 = (unsigned __int8 *)(v41 + 1);
        if ( v99 < v199 )
        {
          v101 = *v100;
          v102 = *(unsigned __int16 *)(a7 + 2 * v99) << 16;
          if ( v101 < v199 )
          {
LABEL_204:
            *(_DWORD *)v45 = v102 | *(unsigned __int16 *)(a7 + 2 * v101);
            goto LABEL_205;
          }
          *(_DWORD *)v45 = v102 | *(unsigned __int16 *)(dword_56E3F8[v101] + 2 * v97) | *(unsigned __int16 *)(dword_56E3F8[v101] + 2 * v212);
        }
        else
        {
          v101 = *v100;
          v102 = (*(unsigned __int16 *)(dword_56E3F8[v99] + 2 * v212) | *(unsigned __int16 *)(dword_56E3F8[v99] + 2 * v97)) << 16;
          if ( v101 < v199 )
            goto LABEL_204;
          *(_DWORD *)v45 = v102 | *(unsigned __int16 *)(dword_56E3F8[v101] + 2 * v212) | *(unsigned __int16 *)(dword_56E3F8[v101] + 2 * v97);
          v97 = v210;
        }
LABEL_205:
        v41 = (unsigned int)(v100 + 1);
        if ( v45 <= v98 )
        {
          v94 = v204;
          goto LABEL_207;
        }
      }
    }
    v121 = v198 + 2 * (v42 - *a3);
    v122 = v198 + 2 * v218;
    v214 = v198 + 2 * v218;
    switch ( v211 )
    {
      case 0:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v129 = v121 + 2 * v43;
          if ( v122 < v129 )
            v129 = v122;
          for ( ; v121 < v129; ++v41 )
          {
            *(_WORD *)v121 = *(_WORD *)(a7 + 2 * *(unsigned __int8 *)v41);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 1:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v139 = v121 + 2 * v43;
          if ( v122 >= v139 )
          {
            v140 = v139;
            v205 = v139;
          }
          else
          {
            v140 = v122;
            v205 = v122;
          }
          if ( v121 < v140 && v121 & 3 )
          {
            v141 = dword_56E3F8[*(unsigned __int8 *)v41++];
            *(_WORD *)v121 = *(_WORD *)(v141 + 2 * (*(_WORD *)v121 & 0xFF) + 4096) | *(_WORD *)(v141
                                                                                              + 2
                                                                                              * ((unsigned int)*(unsigned __int16 *)v121 >> 5));
            v121 += 2;
          }
          v142 = v140 & 0xFFFFFFFC;
          if ( v121 < (v140 & 0xFFFFFFFC) )
          {
            do
            {
              v143 = dword_56E3F8[*(unsigned __int8 *)v41];
              v144 = *(unsigned __int16 *)(v143 + 2 * (unsigned __int8)*(_DWORD *)v121 + 4096) | *(unsigned __int16 *)(v143 + 2 * ((*(_DWORD *)v121 >> 5) & 0x7FF));
              v145 = dword_56E3F8[*(unsigned __int8 *)(v41 + 1)];
              *(_DWORD *)v121 = v144 | ((*(unsigned __int16 *)(v145 + 2 * (*(_DWORD *)v121 >> 21)) | *(unsigned __int16 *)(v145 + 2 * ((*(_DWORD *)v121 >> 16) & 0xFF) + 4096)) << 16);
              v121 += 4;
              v41 += 2;
            }
            while ( v121 < v142 );
            v122 = v214;
            v140 = v205;
          }
          if ( v121 < v140 )
          {
            v146 = dword_56E3F8[*(unsigned __int8 *)v41++];
            *(_WORD *)v121 = *(_WORD *)(v146 + 2 * ((unsigned int)*(unsigned __int16 *)v121 >> 5)) | *(_WORD *)(v146 + 2 * (unsigned __int8)*(_WORD *)v121 + 4096);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 2:
        if ( v121 >= v122 )
          goto LABEL_471;
        break;
      case 3:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v123 = v121 + 2 * v43;
          v124 = v122;
          if ( v122 >= v123 )
            v124 = v123;
          for ( ; v121 < v124; ++v41 )
          {
            v125 = *(unsigned __int8 *)v41;
            if ( v125 < v199 )
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v125);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 4:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v126 = v121 + 2 * v43;
          v127 = v122;
          if ( v122 >= v126 )
            v127 = v126;
          for ( ; v121 < v127; ++v41 )
          {
            v128 = *(unsigned __int8 *)v41;
            if ( v128 >= v199 )
              *(_WORD *)v121 = *(_WORD *)(dword_56E3F8[v128] + 2 * ((unsigned int)*(unsigned __int16 *)v121 >> 5)) | *(_WORD *)(dword_56E3F8[v128] + 2 * (unsigned __int8)*(_WORD *)v121 + 4096);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 5:
        if ( v121 < v122 )
        {
          v193 = v209;
          do
          {
            v194 = v121 + 2 * v43;
            v195 = v122;
            if ( v122 >= v194 )
              v195 = v194;
            for ( ; v121 < v195; ++v41 )
            {
              v196 = *(unsigned __int8 *)v41;
              if ( v196 < v199 )
              {
                v197 = (unsigned __int16)(v193 & *(_WORD *)v121);
                v193 = v209;
                *(_WORD *)v121 = (v197
                                + (v209 & ((v197
                                          + (v209 & ((v197 + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v196))) >> 1))) >> 1))) >> 1;
              }
              v121 += 2;
            }
            if ( v41 >= v200 )
              break;
            v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
            v43 = *(_BYTE *)v41++ & 0xF;
          }
          while ( v121 < v122 );
        }
        goto LABEL_471;
      case 6:
        if ( v121 < v122 )
        {
          v188 = v209;
          do
          {
            v189 = v121 + 2 * v43;
            v190 = v122;
            if ( v122 >= v189 )
              v190 = v189;
            for ( ; v121 < v190; ++v41 )
            {
              v191 = *(unsigned __int8 *)v41;
              if ( v191 < v199 )
              {
                v192 = (unsigned __int16)(v188 & *(_WORD *)v121);
                v188 = v209;
                *(_WORD *)v121 = (v192 + (v209 & ((v192 + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v191))) >> 1))) >> 1;
              }
              v121 += 2;
            }
            if ( v41 >= v200 )
              break;
            v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
            v43 = *(_BYTE *)v41++ & 0xF;
          }
          while ( v121 < v122 );
        }
        goto LABEL_471;
      case 7:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v185 = v121 + 2 * v43;
          v186 = v122;
          if ( v122 >= v185 )
            v186 = v185;
          for ( ; v121 < v186; ++v41 )
          {
            v187 = *(unsigned __int8 *)v41;
            if ( v187 < v199 )
              *(_WORD *)v121 = ((unsigned __int16)(v209 & *(_WORD *)v121)
                              + (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v187))) >> 1;
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 8:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v181 = v121 + 2 * v43;
          v182 = v122;
          if ( v122 >= v181 )
            v182 = v181;
          for ( ; v121 < v182; ++v41 )
          {
            v183 = *(unsigned __int8 *)v41;
            if ( v183 < v199 )
            {
              v184 = (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v183));
              *(_WORD *)v121 = (v184 + (v209 & ((v184 + (unsigned __int16)(v209 & *(_WORD *)v121)) >> 1))) >> 1;
            }
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 9:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v177 = v121 + 2 * v43;
          v178 = v122;
          if ( v122 >= v177 )
            v178 = v177;
          for ( ; v121 < v178; ++v41 )
          {
            v179 = *(unsigned __int8 *)v41;
            if ( v179 < v199 )
            {
              v180 = (unsigned __int16)(v209 & *(_WORD *)(a7 + 2 * v179));
              *(_WORD *)v121 = (v180
                              + (v209 & ((v180 + (v209 & ((v180 + (unsigned __int16)(v209 & *(_WORD *)v121)) >> 1))) >> 1))) >> 1;
            }
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 10:
      case 11:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v130 = v121 + 2 * v43;
          v131 = v122;
          if ( v122 >= v130 )
            v131 = v130;
          for ( ; v121 < v131; ++v41 )
          {
            v132 = *(unsigned __int8 *)v41;
            if ( v132 < v199 && !(v41 & 3) )
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v132);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 12:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v136 = v121 + 2 * v43;
          v137 = v122;
          if ( v122 >= v136 )
            v137 = v136;
          for ( ; v121 < v137; ++v41 )
          {
            v138 = *(unsigned __int8 *)v41;
            if ( v138 < v199 && ((_BYTE)v121 - 2 * (_BYTE)v216) & 2 )
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v138);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 13:
      case 14:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v133 = v121 + 2 * v43;
          v134 = v122;
          if ( v122 >= v133 )
            v134 = v133;
          for ( ; v121 < v134; ++v41 )
          {
            v135 = *(unsigned __int8 *)v41;
            if ( v135 < v199 && v41 & 3 )
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v135);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 15:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v157 = v121 + 2 * v43;
          if ( v122 >= v157 )
          {
            v158 = v157;
            v207 = v157;
          }
          else
          {
            v158 = v122;
            v207 = v122;
          }
          if ( v121 < v158 && v121 & 3 )
          {
            v159 = dword_56E3F8[*(unsigned __int8 *)v41++];
            *(_WORD *)v121 = *(_WORD *)(v159 + 2 * v210) | *(_WORD *)(v159 + 2 * v212);
            v121 += 2;
          }
          v160 = v158 & 0xFFFFFFFC;
          if ( v121 < (v158 & 0xFFFFFFFC) )
          {
            do
            {
              v161 = dword_56E3F8[*(unsigned __int8 *)v41];
              v162 = *(unsigned __int16 *)(v161 + 2 * v212) | *(unsigned __int16 *)(v161 + 2 * v210);
              v163 = dword_56E3F8[*(unsigned __int8 *)(v41 + 1)];
              *(_DWORD *)v121 = v162 | ((*(unsigned __int16 *)(v163 + 2 * v212) | *(unsigned __int16 *)(v163 + 2 * v210)) << 16);
              v121 += 4;
              v41 += 2;
            }
            while ( v121 < v160 );
            v122 = v214;
            v158 = v207;
          }
          if ( v121 < v158 )
          {
            v164 = dword_56E3F8[*(unsigned __int8 *)v41++];
            *(_WORD *)v121 = *(_WORD *)(v164 + 2 * v210) | *(_WORD *)(v164 + 2 * v212);
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      case 16:
        for ( ; v121 < v122; v43 = *(_BYTE *)v41++ & 0xF )
        {
          v165 = v121 + 2 * v43;
          if ( v122 >= v165 )
          {
            v166 = v165;
            v208 = v165;
          }
          else
          {
            v166 = v122;
            v208 = v122;
          }
          if ( v121 < v166 && v121 & 3 )
          {
            v167 = *(unsigned __int8 *)v41;
            v168 = v199;
            if ( v167 < v199 )
            {
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v167);
              ++v41;
            }
            else
            {
              ++v41;
              *(_WORD *)v121 = *(_WORD *)(dword_56E3F8[v167] + 2 * v210) | *(_WORD *)(dword_56E3F8[v167] + 2 * v212);
              v166 = v208;
            }
            v121 += 2;
          }
          else
          {
            v168 = v199;
          }
          v169 = v166 & 0xFFFFFFFC;
          if ( v121 < (v166 & 0xFFFFFFFC) )
          {
            do
            {
              v170 = *(unsigned __int8 *)v41;
              v171 = (unsigned __int8 *)(v41 + 1);
              if ( v170 < v168 )
              {
                v174 = *(unsigned __int16 *)(a7 + 2 * v170);
                v175 = *v171;
                if ( v175 < v168 )
                {
                  *(_DWORD *)v121 = v174 | (*(unsigned __int16 *)(a7 + 2 * *v171) << 16);
                }
                else
                {
                  *(_DWORD *)v121 = v174 | ((*(unsigned __int16 *)(dword_56E3F8[*v171] + 2 * v210) | *(unsigned __int16 *)(dword_56E3F8[*v171] + 2 * v212)) << 16);
                  v122 = v214;
                }
                v41 = (unsigned int)(v171 + 1);
              }
              else
              {
                v172 = *(unsigned __int16 *)(dword_56E3F8[v170] + 2 * v212) | *(unsigned __int16 *)(dword_56E3F8[v170]
                                                                                                  + 2 * v210);
                v173 = *v171;
                v41 = (unsigned int)(v171 + 1);
                if ( v173 < v199 )
                {
                  *(_DWORD *)v121 = v172 | (*(unsigned __int16 *)(a7 + 2 * v173) << 16);
                }
                else
                {
                  *(_DWORD *)v121 = v172 | ((*(unsigned __int16 *)(dword_56E3F8[v173] + 2 * v212) | *(unsigned __int16 *)(dword_56E3F8[v173] + 2 * v210)) << 16);
                  v122 = v214;
                }
              }
              v168 = v199;
              v121 += 4;
            }
            while ( v121 < v169 );
            v166 = v208;
          }
          if ( v121 < v166 )
          {
            v176 = *(unsigned __int8 *)v41;
            if ( v176 < v168 )
              *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v176);
            else
              *(_WORD *)v121 = *(_WORD *)(dword_56E3F8[v176] + 2 * v210) | *(_WORD *)(dword_56E3F8[v176] + 2 * v212);
            ++v41;
            v121 += 2;
          }
          if ( v41 >= v200 )
            break;
          v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        }
        goto LABEL_471;
      default:
        goto LABEL_471;
    }
    while ( 1 )
    {
      v147 = v121 + 2 * v43;
      if ( v122 >= v147 )
      {
        v206 = v147;
      }
      else
      {
        v147 = v122;
        v206 = v122;
      }
      if ( v121 < v147 && v121 & 3 )
      {
        v148 = *(unsigned __int8 *)v41;
        if ( v148 < v199 )
          *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v148);
        else
          *(_WORD *)v121 = *(_WORD *)(dword_56E3F8[v148] + 2 * ((unsigned int)*(unsigned __int16 *)v121 >> 5)) | *(_WORD *)(dword_56E3F8[v148] + 2 * (unsigned __int8)*(_WORD *)v121 + 4096);
        ++v41;
        v121 += 2;
      }
      if ( v121 < (v206 & 0xFFFFFFFC) )
        break;
LABEL_367:
      if ( v121 < v206 )
      {
        v156 = *(unsigned __int8 *)v41;
        if ( v156 < v199 )
          *(_WORD *)v121 = *(_WORD *)(a7 + 2 * v156);
        else
          *(_WORD *)v121 = *(_WORD *)(dword_56E3F8[v156] + 2 * ((unsigned int)*(unsigned __int16 *)v121 >> 5)) | *(_WORD *)(dword_56E3F8[v156] + 2 * (unsigned __int8)*(_WORD *)v121 + 4096);
        ++v41;
        v121 += 2;
      }
      if ( v41 < v200 )
      {
        v121 += 2 * ((unsigned int)*(unsigned __int8 *)v41 >> 4);
        v43 = *(_BYTE *)v41++ & 0xF;
        if ( v121 < v122 )
          continue;
      }
      goto LABEL_471;
    }
    while ( 1 )
    {
      v149 = *(unsigned __int8 *)v41;
      v150 = (unsigned __int8 *)(v41 + 1);
      if ( v149 < v199 )
      {
        v154 = *(unsigned __int16 *)(a7 + 2 * v149);
        v155 = *v150;
        if ( v155 < v199 )
        {
          v153 = v154 | (*(unsigned __int16 *)(a7 + 2 * *v150) << 16);
          v41 = (unsigned int)(v150 + 1);
          goto LABEL_365;
        }
        *(_DWORD *)v121 = v154 | ((*(unsigned __int16 *)(dword_56E3F8[*v150]
                                                       + 2 * ((unsigned int)*(unsigned __int16 *)(v121 + 2) >> 5)) | *(unsigned __int16 *)(dword_56E3F8[*v150] + 2 * (unsigned __int8)*(_WORD *)(v121 + 2) + 4096)) << 16);
        v122 = v214;
        v41 = (unsigned int)(v150 + 1);
      }
      else
      {
        v151 = *(unsigned __int16 *)(dword_56E3F8[v149] + 2 * (unsigned __int8)*(_DWORD *)v121 + 4096) | *(unsigned __int16 *)(dword_56E3F8[v149] + 2 * ((*(_DWORD *)v121 >> 5) & 0x7FF));
        v152 = *v150;
        v41 = (unsigned int)(v150 + 1);
        if ( v152 < v199 )
        {
          v122 = v214;
          v153 = v151 | (*(unsigned __int16 *)(a7 + 2 * v152) << 16);
LABEL_365:
          *(_DWORD *)v121 = v153;
          goto LABEL_366;
        }
        *(_DWORD *)v121 = v151 | ((*(unsigned __int16 *)(dword_56E3F8[v152] + 2 * (*(_DWORD *)v121 >> 21)) | *(unsigned __int16 *)(dword_56E3F8[v152] + 2 * ((*(_DWORD *)v121 >> 16) & 0xFF) + 4096)) << 16);
        v122 = v214;
      }
LABEL_366:
      v121 += 4;
      if ( v121 >= (v206 & 0xFFFFFFFC) )
        goto LABEL_367;
    }
  }
  return result;
}
// 571818: using guessed type int dword_571818;
// 574824: using guessed type int dword_574824;
// 576828: using guessed type int dword_576828;
// 57682C: using guessed type int dword_57682C;
// 576A40: using guessed type int dword_576A40;
// 576A4C: using guessed type int dword_576A4C;

//----- (004A2E20) --------------------------------------------------------
void __thiscall sub_4A2E20(signed __int16 *this, int a2)
{
  signed __int16 *v2; // esi
  int v3; // ebp
  int v4; // eax
  _DWORD *v5; // edx
  int v6; // edi
  int v7; // ebx
  int v8; // ecx
  int v9; // eax
  size_t v10; // edx
  signed int v11; // edi
  signed int v12; // eax
  int v13; // ebp
  char *v14; // edi
  signed int v15; // ebx
  int v16; // ebp
  int v17; // edi
  int v18; // edx
  int v19; // ecx
  size_t v20; // ST08_4
  int v21; // ecx
  int v22; // eax
  int v23; // edx
  int v24; // ecx
  _DWORD *v25; // eax
  _DWORD *Memory; // [esp+10h] [ebp-14h]
  int *Dst; // [esp+14h] [ebp-10h]
  char *Dsta; // [esp+14h] [ebp-10h]
  char *Dstb; // [esp+14h] [ebp-10h]
  size_t v30; // [esp+18h] [ebp-Ch]
  signed int v31; // [esp+1Ch] [ebp-8h]
  int v32; // [esp+1Ch] [ebp-8h]
  int v33; // [esp+20h] [ebp-4h]
  char *v34; // [esp+20h] [ebp-4h]

  v2 = this;
  Memory = malloc(4 * this[84]);
  v3 = 0;
  if ( v2[84] > 0 )
  {
    v4 = *((_DWORD *)v2 + 90);
    v5 = (_DWORD *)(v4 + 8);
    v33 = v4 + 8;
    Dst = (int *)(v4 + 8);
    while ( 1 )
    {
      v6 = *Dst;
      v7 = v2[84];
      v8 = *((_DWORD *)v2 + 41) - *Dst;
      do
      {
        if ( *v5 - v6 > 0 && *v5 - v6 < v8 )
          v8 = *v5 - v6;
        v5 += 3;
        --v7;
      }
      while ( v7 );
      v9 = v2[84];
      Dst += 3;
      Memory[v3++] = v8;
      if ( v3 >= v9 )
        break;
      v5 = (_DWORD *)v33;
    }
  }
  v10 = 0;
  v11 = 0;
  v31 = 0;
  v30 = 0;
  if ( v2[84] <= 0 )
    goto LABEL_44;
  Dsta = 0;
  do
  {
    if ( (unsigned __int8)(128 >> (v11 & 7)) & *(_BYTE *)((v11 >> 3) + a2) )
    {
      v12 = 0;
      if ( v11 > 0 )
      {
        v13 = 0;
        do
        {
          if ( (unsigned __int8)(128 >> (v12 & 7)) & *(_BYTE *)((v12 >> 3) + a2)
            && *(_DWORD *)(*((_DWORD *)v2 + 90) + v13 + 8) == *(_DWORD *)&Dsta[*((_DWORD *)v2 + 90) + 8] )
          {
            break;
          }
          ++v12;
          v13 += 12;
        }
        while ( v12 < v11 );
        v10 = v30;
      }
      if ( v12 == v11 )
      {
        v10 += Memory[v11];
        v30 = v10;
      }
    }
    else
    {
      v31 = 1;
    }
    Dsta += 12;
    ++v11;
  }
  while ( v11 < v2[84] );
  if ( v31 )
  {
    v14 = (char *)malloc(v10);
    v15 = 0;
    v34 = v14;
    Dstb = v14;
    if ( v2[84] > 0 )
    {
      v16 = 0;
      do
      {
        if ( (unsigned __int8)(128 >> (v15 & 7)) & *(_BYTE *)((v15 >> 3) + a2) )
        {
          v17 = Memory[v15];
          if ( v17 )
          {
            v18 = *((_DWORD *)v2 + 90);
            v19 = *(_DWORD *)(v18 + v16 + 8);
            v20 = Memory[v15];
            *(_DWORD *)(v18 + v16 + 8) = Dstb - v34;
            v32 = v19;
            memcpy(Dstb, (const void *)(v19 + *((_DWORD *)v2 + 89)), v20);
            v21 = v2[84];
            Dstb += v17;
            v22 = v15 + 1;
            Memory[v15] = 0;
            if ( v15 + 1 < v21 )
            {
              v23 = v16 + 12;
              do
              {
                if ( Memory[v22] )
                {
                  v24 = *((_DWORD *)v2 + 90);
                  if ( *(_DWORD *)(v23 + v24 + 8) == v32 )
                  {
                    *(_DWORD *)(v23 + v24 + 8) = *(_DWORD *)(v24 + v16 + 8);
                    Memory[v22] = 0;
                  }
                }
                ++v22;
                v23 += 12;
              }
              while ( v22 < v2[84] );
            }
          }
        }
        else
        {
          v25 = (_DWORD *)(v16 + *((_DWORD *)v2 + 90));
          *v25 = 0;
          v25[1] = 0;
          v25[2] = 0;
        }
        ++v15;
        v16 += 12;
      }
      while ( v15 < v2[84] );
      v14 = v34;
    }
    if ( *((_DWORD *)v2 + 89) )
    {
      free(*((void **)v2 + 89));
      *((_DWORD *)v2 + 89) = 0;
    }
    free(Memory);
    *((_DWORD *)v2 + 89) = v14;
    *((_DWORD *)v2 + 41) = v30;
  }
  else
  {
LABEL_44:
    free(Memory);
  }
}

//----- (004A30E0) --------------------------------------------------------
void __thiscall sub_4A30E0(signed __int16 *this, int a2)
{
  int v2; // ebx
  signed __int16 *v3; // ebp
  _DWORD *v4; // ecx
  int v5; // edi
  int v6; // eax
  _DWORD *v7; // edx
  int v8; // esi
  int v9; // ebx
  int v10; // ecx
  int v11; // eax
  signed int v12; // edx
  int v13; // edi
  int v14; // eax
  signed int v15; // eax
  int v16; // esi
  _DWORD *v17; // eax
  _DWORD *v18; // esi
  char *v19; // edi
  signed int v20; // eax
  int v21; // edi
  int v22; // edx
  signed int v23; // ecx
  bool v24; // zf
  int v25; // edx
  int v26; // eax
  int v27; // edx
  int v28; // eax
  int v29; // eax
  size_t v30; // ebx
  signed int v31; // eax
  int j; // ecx
  int *v33; // [esp+10h] [ebp-E4h]
  __int16 v34; // [esp+10h] [ebp-E4h]
  size_t *v35; // [esp+10h] [ebp-E4h]
  char *Dst; // [esp+14h] [ebp-E0h]
  char *Dsta; // [esp+14h] [ebp-E0h]
  _DWORD *v38; // [esp+18h] [ebp-DCh]
  signed int v39; // [esp+18h] [ebp-DCh]
  _DWORD *Memory; // [esp+20h] [ebp-D4h]
  int v41; // [esp+24h] [ebp-D0h]
  _DWORD *v42; // [esp+24h] [ebp-D0h]
  int v43; // [esp+28h] [ebp-CCh]
  int i; // [esp+2Ch] [ebp-C8h]
  int v45; // [esp+2Ch] [ebp-C8h]
  char *v46; // [esp+30h] [ebp-C4h]
  char *v47; // [esp+38h] [ebp-BCh]
  __int16 v48; // [esp+3Ch] [ebp-B8h]
  __int16 v49; // [esp+ECh] [ebp-8h]

  v2 = a2;
  v3 = this;
  v4 = malloc(4 * this[84]);
  v5 = 0;
  Memory = v4;
  if ( v3[84] > 0 )
  {
    v6 = *((_DWORD *)v3 + 90);
    v7 = (_DWORD *)(v6 + 8);
    v41 = v6 + 8;
    v33 = (int *)(v6 + 8);
    while ( 1 )
    {
      v8 = *v33;
      v9 = v3[84];
      v10 = *((_DWORD *)v3 + 41) - *v33;
      do
      {
        if ( *v7 - v8 > 0 && *v7 - v8 < v10 )
          v10 = *v7 - v8;
        v7 += 3;
        --v9;
      }
      while ( v9 );
      v11 = v3[84];
      v33 += 3;
      Memory[v5++] = v10;
      if ( v5 >= v11 )
        break;
      v7 = (_DWORD *)v41;
    }
    v2 = a2;
    v4 = Memory;
  }
  v12 = 0;
  Dst = 0;
  v34 = 0;
  if ( v3[84] > 0 )
  {
    v13 = 0;
    v14 = v2 - (_DWORD)v4;
    v38 = v4;
    for ( i = v2 - (_DWORD)v4; ; v14 = i )
    {
      if ( *(_DWORD *)((char *)v38 + v14) )
      {
        ++v34;
        v15 = 0;
        if ( v12 > 0 )
        {
          v16 = 0;
          do
          {
            if ( *(_DWORD *)(v2 + 4 * v15) )
            {
              v2 = a2;
              if ( *(_DWORD *)(v16 + *((_DWORD *)v3 + 90) + 8) == *(_DWORD *)(v13 + *((_DWORD *)v3 + 90) + 8) )
                break;
            }
            ++v15;
            v16 += 12;
          }
          while ( v15 < v12 );
        }
        if ( v15 == v12 )
          Dst += *v38;
      }
      ++v38;
      ++v12;
      v13 += 12;
      if ( v12 >= v3[84] )
        break;
    }
  }
  qmemcpy(&v47, v3 + 82, 0xB6u);
  v48 = v34;
  v47 = Dst;
  v17 = operator new(12 * v34);
  v18 = v17;
  v42 = v17;
  v19 = (char *)malloc((size_t)Dst);
  v20 = 0;
  v46 = v19;
  Dsta = v19;
  v39 = 0;
  if ( v3[84] > 0 )
  {
    v21 = 0;
    v22 = v2 - (_DWORD)Memory;
    v35 = Memory;
    v45 = v2 - (_DWORD)Memory;
    while ( 1 )
    {
      if ( !*(size_t *)((char *)v35 + v22) )
        goto LABEL_38;
      v23 = 0;
      v24 = v20 == 0;
      v43 = 0;
      if ( v20 <= 0 )
        goto LABEL_35;
      v25 = 0;
      while ( !*(_DWORD *)(v2 + 4 * v23) )
      {
LABEL_31:
        ++v23;
        v25 += 12;
        if ( v23 >= v20 )
          goto LABEL_34;
      }
      v26 = *((_DWORD *)v3 + 90);
      v2 = a2;
      if ( *(_DWORD *)(v25 + v26 + 8) != *(_DWORD *)(v21 + v26 + 8) )
        break;
      v27 = *(_DWORD *)(v26 + v21);
      v28 = v21 + v26;
      *v18 = v27;
      v18[1] = *(_DWORD *)(v28 + 4);
      v18[2] = *(_DWORD *)(v28 + 8);
      v20 = v39;
      v18[2] = v42[3 * v43 + 2];
LABEL_34:
      v24 = v23 == v20;
LABEL_35:
      if ( v24 )
      {
        v29 = *((_DWORD *)v3 + 90);
        *v18 = *(_DWORD *)(v29 + v21);
        v18[1] = *(_DWORD *)(v29 + v21 + 4);
        v30 = *v35;
        v18[2] = Dsta - v46;
        memcpy(Dsta, (const void *)(*((_DWORD *)v3 + 89) + *(_DWORD *)(v21 + *((_DWORD *)v3 + 90) + 8)), v30);
        v20 = v39;
        Dsta += v30;
        v2 = a2;
      }
      v22 = v45;
      v18 += 3;
LABEL_38:
      ++v35;
      ++v20;
      v21 += 12;
      v39 = v20;
      if ( v20 >= v3[84] )
      {
        v19 = v46;
        v18 = v42;
        goto LABEL_40;
      }
    }
    ++v43;
    v20 = v39;
    goto LABEL_31;
  }
LABEL_40:
  v31 = 0;
  for ( j = 0; v31 < v3[84]; ++v31 )
  {
    if ( *(_DWORD *)(v2 + 4 * v31) )
      *(_DWORD *)(v2 + 4 * v31) = j++;
    else
      *(_DWORD *)(v2 + 4 * v31) = 0;
  }
  if ( *((_DWORD *)v3 + 90) )
  {
    j__free(*((void **)v3 + 90));
    *((_DWORD *)v3 + 90) = 0;
  }
  if ( *((_DWORD *)v3 + 89) )
  {
    free(*((void **)v3 + 89));
    *((_DWORD *)v3 + 89) = 0;
  }
  free(Memory);
  *((_DWORD *)v3 + 90) = v18;
  *((_DWORD *)v3 + 89) = v19;
  qmemcpy(v3 + 82, &v47, 0xB4u);
  v3[172] = v49;
}

//----- (004A3460) --------------------------------------------------------
int __thiscall sub_4A3460(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  _DWORD *v3; // edi
  int result; // eax

  v2 = this;
  v3 = this + 41;
  memset(this + 41, 0, 0xB6u);
  result = a2;
  *((_WORD *)v2 + 84) = *(_WORD *)a2;
  *((_WORD *)v2 + 85) = *(_WORD *)(a2 + 2);
  *((_WORD *)v2 + 86) = *(_WORD *)(a2 + 4);
  *((_WORD *)v2 + 87) = *(_WORD *)(a2 + 6);
  *((_WORD *)v2 + 88) = *(_WORD *)(a2 + 8);
  *((_WORD *)v2 + 89) = *(_WORD *)(a2 + 10);
  *((_WORD *)v2 + 90) = *(_WORD *)(a2 + 12);
  *((_WORD *)v2 + 91) = *(_WORD *)(a2 + 14);
  *((_WORD *)v2 + 92) = *(_WORD *)(a2 + 16);
  v2[47] = *(unsigned __int8 *)(a2 + 18);
  *((_BYTE *)v2 + 198) = *(_BYTE *)(a2 + 19);
  *v3 = *(_DWORD *)(a2 + 26);
  return result;
}

//----- (004A3500) --------------------------------------------------------
int __thiscall sub_4A3500(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  _DWORD *v3; // edi
  int result; // eax
  char *v5; // ecx
  char v6; // dl

  v2 = this;
  v3 = this + 41;
  memset(this + 41, 0, 0xB6u);
  result = a2;
  *((_WORD *)v2 + 84) = *(_WORD *)a2;
  *((_WORD *)v2 + 85) = *(_WORD *)(a2 + 2);
  *((_WORD *)v2 + 86) = *(_WORD *)(a2 + 4);
  *((_WORD *)v2 + 87) = *(_WORD *)(a2 + 6);
  *((_WORD *)v2 + 88) = *(_WORD *)(a2 + 8);
  *((_WORD *)v2 + 89) = *(_WORD *)(a2 + 10);
  *((_WORD *)v2 + 90) = *(_WORD *)(a2 + 12);
  *((_WORD *)v2 + 91) = *(_WORD *)(a2 + 14);
  *((_WORD *)v2 + 92) = *(_WORD *)(a2 + 16);
  v2[47] = *(unsigned __int8 *)(a2 + 18);
  *((_BYTE *)v2 + 198) = *(_BYTE *)(a2 + 19);
  *v3 = *(_DWORD *)(a2 + 20);
  v5 = (char *)(a2 + 24);
  do
  {
    v6 = *v5;
    v5[(_DWORD)((char *)v2 - a2 + 178)] = *v5;
    ++v5;
  }
  while ( v6 );
  *((_WORD *)v2 + 96) = *(unsigned __int8 *)(a2 + 40);
  *((_WORD *)v2 + 97) = *(unsigned __int8 *)(a2 + 41);
  *((_WORD *)v2 + 93) = *(_WORD *)(a2 + 42);
  *((_BYTE *)v2 + 199) = *(_BYTE *)(a2 + 44);
  *((_BYTE *)v2 + 200) = *(_BYTE *)(a2 + 45);
  *((_BYTE *)v2 + 201) = *(_BYTE *)(a2 + 46);
  return result;
}

//----- (004A3600) --------------------------------------------------------
char *__thiscall sub_4A3600(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  _DWORD *v3; // edi
  char *v4; // ecx
  char v5; // dl
  char *result; // eax
  char v7; // cl

  v2 = this;
  v3 = this + 41;
  memset(this + 41, 0, 0xB6u);
  *((_WORD *)v2 + 84) = *(_WORD *)a2;
  *((_WORD *)v2 + 85) = *(_WORD *)(a2 + 2);
  *((_WORD *)v2 + 86) = *(_WORD *)(a2 + 4);
  *((_WORD *)v2 + 87) = *(_WORD *)(a2 + 6);
  *((_WORD *)v2 + 88) = *(_WORD *)(a2 + 8);
  *((_WORD *)v2 + 89) = *(_WORD *)(a2 + 10);
  *((_WORD *)v2 + 90) = *(_WORD *)(a2 + 12);
  *((_WORD *)v2 + 91) = *(_WORD *)(a2 + 14);
  *((_WORD *)v2 + 92) = *(_WORD *)(a2 + 16);
  v2[47] = *(unsigned __int8 *)(a2 + 18);
  *((_BYTE *)v2 + 198) = *(_BYTE *)(a2 + 19);
  *v3 = *(_DWORD *)(a2 + 20);
  v4 = (char *)(a2 + 24);
  do
  {
    v5 = *v4;
    v4[(_DWORD)((char *)v2 - a2 + 178)] = *v4;
    ++v4;
  }
  while ( v5 );
  *((_WORD *)v2 + 96) = *(unsigned __int8 *)(a2 + 40);
  *((_WORD *)v2 + 97) = *(unsigned __int8 *)(a2 + 41);
  *((_WORD *)v2 + 93) = *(_WORD *)(a2 + 42);
  *((_BYTE *)v2 + 199) = *(_BYTE *)(a2 + 44);
  *((_BYTE *)v2 + 200) = *(_BYTE *)(a2 + 45);
  *((_BYTE *)v2 + 201) = *(_BYTE *)(a2 + 46);
  result = (char *)(a2 + 47);
  do
  {
    v7 = *result;
    result[(_DWORD)((char *)v2 - a2 + 187)] = *result;
    ++result;
  }
  while ( v7 );
  *((_WORD *)v2 + 98) = 0;
  return result;
}

//----- (004A38F0) --------------------------------------------------------
int __cdecl sub_4A38F0(int a1, int a2, int a3)
{
  int result; // eax

  result = a2;
  dword_574820 = a2;
  dword_576A44 = a3;
  dword_576A34 = 0;
  dword_576A30 = a1;
  return result;
}
// 574820: using guessed type int dword_574820;
// 576A30: using guessed type int dword_576A30;
// 576A34: using guessed type int dword_576A34;
// 576A44: using guessed type int dword_576A44;

//----- (004A3920) --------------------------------------------------------
int sub_4A3920()
{
  int result; // eax

  result = dword_576A34;
  dword_574820 = 0;
  dword_576A44 = 0;
  dword_576A30 = 0;
  dword_576A34 = 0;
  return result;
}
// 574820: using guessed type int dword_574820;
// 576A30: using guessed type int dword_576A30;
// 576A34: using guessed type int dword_576A34;
// 576A44: using guessed type int dword_576A44;

//----- (004A3940) --------------------------------------------------------
int __cdecl sub_4A3940(int a1)
{
  int result; // eax

  result = a1;
  dword_576A3C = a1;
  return result;
}
// 576A3C: using guessed type int dword_576A3C;

//----- (004A3950) --------------------------------------------------------
void sub_4A3950()
{
  void **v0; // esi
  signed int v1; // edi
  void **v2; // esi
  int i; // esi

  v0 = (void **)dword_576830;
  do
  {
    v1 = 32;
    do
    {
      if ( *v0 )
      {
        free(*v0);
        *v0 = 0;
      }
      ++v0;
      --v1;
    }
    while ( v1 );
  }
  while ( (signed int)v0 < (signed int)&dword_576A30 );
  v2 = (void **)&dword_5717F8;
  do
  {
    if ( *v2 )
    {
      free(*v2);
      *v2 = 0;
    }
    ++v2;
  }
  while ( (signed int)v2 < (signed int)&dword_571818 );
  for ( i = 0; i < dword_576A48; ++i )
  {
    if ( dword_574828[i] )
    {
      free(dword_574828[i]);
      dword_574828[i] = 0;
    }
  }
}
// 5717F8: using guessed type int dword_5717F8;
// 571818: using guessed type int dword_571818;
// 576A30: using guessed type int dword_576A30;
// 576A48: using guessed type int dword_576A48;

//----- (004A39F0) --------------------------------------------------------
int __cdecl sub_4A39F0(char a1, unsigned __int8 a2)
{
  int result; // eax

  result = (a2 ^ (unsigned __int8)~a1) & 1;
  dword_576A4C = (a2 ^ (unsigned __int8)~a1) & 1;
  return result;
}
// 576A4C: using guessed type int dword_576A4C;

//----- (004A3A10) --------------------------------------------------------
int __cdecl sub_4A3A10(int a1)
{
  int result; // eax

  result = a1;
  dword_571818 = a1;
  return result;
}
// 571818: using guessed type int dword_571818;

//----- (004A3A20) --------------------------------------------------------
int sub_4A3A20()
{
  _DWORD *v0; // ecx
  signed int v1; // ebp
  int v2; // edi
  signed int v3; // ebx
  int result; // eax
  int v5; // [esp+10h] [ebp-4h]

  v5 = 0;
  v0 = &unk_571820;
  do
  {
    v1 = 768000;
    do
    {
      v2 = 0;
      v3 = 32;
      do
      {
        result = v5 + v2 / 1000;
        v2 += v1 / 24 / 32;
        *v0 = dword_576830[result];
        ++v0;
        --v3;
      }
      while ( v3 );
      v1 -= 32000;
    }
    while ( v1 > 0 );
    v5 += 32;
  }
  while ( (signed int)v0 < (signed int)&dword_574820 );
  return result;
}
// 574820: using guessed type int dword_574820;

//----- (004A3AB0) --------------------------------------------------------
int __cdecl sub_4A3AB0(_WORD *a1, int a2)
{
  signed int v2; // ST10_4
  _WORD *v3; // ebp
  __int64 v4; // rax
  double v5; // st6
  int v6; // ebx
  int v7; // esi
  signed int v8; // edi
  unsigned int v9; // eax
  unsigned __int8 v10; // dl
  unsigned int v11; // ecx
  int v12; // eax
  char v13; // bl
  int v14; // eax
  unsigned __int8 v15; // cl
  __int16 v16; // ax
  signed int v17; // ebx
  int v18; // eax
  unsigned __int8 v19; // al
  int result; // eax
  signed int v21; // [esp+10h] [ebp-10h]
  int v22; // [esp+1Ch] [ebp-4h]
  signed int v23; // [esp+24h] [ebp+4h]
  int v24; // [esp+28h] [ebp+8h]

  v2 = BYTE2(a2);
  v3 = a1;
  v23 = BYTE1(a2);
  v4 = 80 * (unsigned __int8)a2;
  v5 = (double)(unsigned __int8)a2 * 0.072169;
  v6 = 80 * BYTE2(a2) / 256;
  v7 = 80 * BYTE1(a2) / 256;
  v24 = 80 * BYTE2(a2) / 256;
  v22 = (BYTE4(v4) + (signed int)v4) >> 8;
  v21 = (signed int)(((double)v23 * 0.71516 + (double)v2 * 0.212671 + v5) * 48.0 * 0.00390625);
  if ( !v7 && !((BYTE4(v4) + (signed int)v4) >> 8) )
  {
    v24 = 3 * v6 / 2;
    v6 = 3 * v6 / 2;
  }
  v8 = 0;
  while ( 1 )
  {
    v9 = (unsigned __int16)(32 * v8);
    v10 = 4 * (v9 >> 5);
    if ( dword_576828 == 2 )
    {
      v11 = v9 >> 7;
      v10 = 8 * ((unsigned int)(unsigned __int16)(32 * v8) >> 5);
    }
    else
    {
      LOBYTE(v11) = BYTE1(v9);
    }
    v12 = (signed int)(v21 * (v11 & 0xF8)) / 256;
    v13 = (signed int)(v6 + v12 + (v11 & 0xF8)) <= 255 ? v6 + (v11 & 0xF8) + v12 : -1;
    v14 = v21 * v10 / 256;
    v15 = v7 + v14 + v10 <= 255 ? v7 + v14 + v10 : -1;
    v16 = dword_576828 == 2 ? 4 * ((v15 | (unsigned __int16)(32 * (v13 & 0xF8))) & 0xFFF8) : 8
                                                                                           * ((v15 | (unsigned __int16)(32 * (v13 & 0xF8))) & 0xFFFC);
    *v3 = v16;
    ++v8;
    ++v3;
    if ( v8 >= 2048 )
      break;
    v6 = v24;
  }
  v17 = 0;
  do
  {
    v18 = v21 * (unsigned __int8)(8 * v17) / 256;
    if ( v22 + v18 + (unsigned __int8)(8 * v17) <= 255 )
      v19 = v22 + 8 * v17 + v18;
    else
      v19 = -1;
    result = v19 >> 3;
    *v3 = (unsigned __int8)result;
    ++v17;
    ++v3;
  }
  while ( v17 < 256 );
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (004A3D00) --------------------------------------------------------
int __cdecl sub_4A3D00(int a1, int a2)
{
  int v2; // ebp
  int v3; // ebx
  int v4; // edi
  int *v5; // esi
  int result; // eax
  int v7; // [esp+10h] [ebp-10h]
  signed int v8; // [esp+14h] [ebp-Ch]

  v2 = (unsigned __int8)a2;
  v3 = BYTE1(a2);
  v4 = BYTE2(a2);
  v5 = &dword_576830[32 * a1];
  v8 = 32;
  do
  {
    BYTE2(v7) = v4 / 32;
    BYTE1(v7) = v3 / 32;
    LOBYTE(v7) = v2 / 32;
    sub_4A3AB0((_WORD *)*v5, v7);
    result = BYTE2(a2);
    v3 += BYTE1(a2);
    v2 += (unsigned __int8)a2;
    ++v5;
    v4 += BYTE2(a2);
    --v8;
  }
  while ( v8 );
  return result;
}

//----- (004A3DA0) --------------------------------------------------------
int sub_4A3DA0()
{
  signed int v0; // edi
  _WORD *v1; // eax
  _WORD *v2; // ebp
  signed int v3; // ebx
  unsigned int v4; // eax
  unsigned __int8 v5; // dl
  unsigned int v6; // ecx
  __int16 v7; // cx
  __int16 v8; // cx
  signed int v9; // ebx
  int result; // eax
  int *v11; // [esp+14h] [ebp-8h]

  v11 = &dword_5717F8;
  v0 = 768;
  do
  {
    v1 = malloc(0x1200u);
    *v11 = (int)v1;
    v2 = v1;
    v3 = 0;
    do
    {
      v4 = (unsigned __int16)(32 * v3);
      v5 = 4 * (v4 >> 5);
      if ( dword_576828 == 2 )
      {
        v6 = v4 >> 7;
        v5 = 8 * ((unsigned int)(unsigned __int16)(32 * v3) >> 5);
      }
      else
      {
        LOBYTE(v6) = BYTE1(v4);
      }
      v7 = (unsigned __int8)(v0 * v5 / 768) | (unsigned __int16)(32 * ((signed int)(v0 * (v6 & 0xF8)) / 768 & 0xF8));
      if ( dword_576828 == 2 )
        v8 = v7 & 0xFFF8;
      else
        v8 = 2 * (v7 & 0xFFFC);
      *v2 = 4 * v8;
      ++v3;
      ++v2;
    }
    while ( v3 < 2048 );
    v9 = 0;
    do
    {
      result = (unsigned __int8)(v0 * (unsigned __int8)(8 * v9) / 768) >> 3;
      *v2 = (unsigned __int8)result;
      ++v9;
      ++v2;
    }
    while ( v9 < 256 );
    ++v11;
    v0 -= 32;
  }
  while ( v0 > 512 );
  return result;
}
// 5717F8: using guessed type int dword_5717F8;
// 576828: using guessed type int dword_576828;

//----- (004A3F00) --------------------------------------------------------
void __cdecl sub_4A3F00(void *a1)
{
  int v1; // eax
  int v2; // esi
  bool v3; // zf

  v1 = dword_576A48;
  v2 = 0;
  if ( dword_576A48 > 0 )
  {
    while ( 1 )
    {
      if ( dword_574828[v2] == a1 )
      {
        v3 = dword_56F7F8[v2]-- == 1;
        if ( v3 )
          break;
      }
      if ( ++v2 >= v1 )
        return;
    }
    if ( dword_574828[v2] )
    {
      free(dword_574828[v2]);
      dword_574828[v2] = 0;
    }
  }
}
// 576A48: using guessed type int dword_576A48;

//----- (004A3F50) --------------------------------------------------------
int __cdecl sub_4A3F50(unsigned __int16 *a1, int a2, int a3)
{
  unsigned __int16 *v3; // edi
  signed int v4; // ebx
  int v5; // ecx
  int v6; // esi
  unsigned int v7; // eax
  unsigned int v8; // edx
  int v9; // eax
  __int16 v10; // dx
  __int16 v11; // ax
  __int16 v12; // dx
  unsigned __int16 v13; // dx
  int result; // eax
  int v15; // [esp+10h] [ebp-4h]

  v3 = a1;
  v4 = 256;
  do
  {
    v5 = a3 + dword_576A54;
    if ( a3 + dword_576A54 >= 2000 )
      v5 = 2000;
    v6 = dword_576828;
    v7 = *(unsigned __int16 *)((char *)v3 + a2 - (_DWORD)a1);
    if ( dword_576828 == 2 )
    {
      BYTE2(v15) = (v7 >> 7) & 0xF8;
      LOBYTE(v8) = 2 * (v7 >> 5);
    }
    else
    {
      BYTE2(v15) = BYTE1(v7) & 0xF8;
      v8 = v7 >> 5;
    }
    LOBYTE(v15) = 8 * v7;
    BYTE1(v15) = 4 * v8;
    v9 = sub_401889(v15, v5, dword_57181C, dword_576A38);
    v10 = BYTE1(v9) | (unsigned __int16)(32 * (BYTE2(v9) & 0xF8));
    v11 = (unsigned __int8)v9 >> 3;
    if ( v6 == 2 )
      v12 = v10 & 0xFFF8;
    else
      v12 = 2 * (v10 & 0xFFFC);
    v13 = v11 | 4 * v12;
    result = v13;
    *v3 = v13;
    ++v3;
    --v4;
  }
  while ( v4 );
  return result;
}
// 401889: using guessed type _DWORD __cdecl sub_401889(_DWORD, _DWORD, _DWORD, _DWORD);
// 57181C: using guessed type int dword_57181C;
// 576828: using guessed type int dword_576828;
// 576A38: using guessed type int dword_576A38;
// 576A54: using guessed type int dword_576A54;

//----- (004A4050) --------------------------------------------------------
void __thiscall sub_4A4050(int this, _DWORD *a2)
{
  int v2; // edi
  const void *v3; // esi
  signed int v4; // edx
  _DWORD *v5; // esi
  unsigned int v6; // eax
  unsigned int v7; // ecx
  unsigned int v8; // eax
  unsigned int v9; // ecx
  unsigned int v10; // eax
  unsigned int v11; // ecx
  unsigned int v12; // eax
  unsigned int v13; // ecx

  v2 = this;
  v3 = *(const void **)(this + 350);
  if ( v3 )
  {
    qmemcpy(a2, v3, 0x400u);
  }
  else
  {
    v4 = 0;
    v5 = a2 + 2;
    do
    {
      v6 = *(unsigned __int16 *)(v4 + *(_DWORD *)(v2 + 376));
      if ( dword_576828 == 2 )
      {
        BYTE2(a2) = (v6 >> 7) & 0xF8;
        LOBYTE(v7) = 2 * (v6 >> 5);
      }
      else
      {
        BYTE2(a2) = BYTE1(v6) & 0xF8;
        v7 = v6 >> 5;
      }
      LOBYTE(a2) = 8 * v6;
      BYTE1(a2) = 4 * v7;
      *(v5 - 2) = a2;
      v8 = *(unsigned __int16 *)(*(_DWORD *)(v2 + 376) + v4 + 2);
      if ( dword_576828 == 2 )
      {
        BYTE2(a2) = (v8 >> 7) & 0xF8;
        LOBYTE(v9) = 2 * (v8 >> 5);
      }
      else
      {
        BYTE2(a2) = BYTE1(v8) & 0xF8;
        v9 = v8 >> 5;
      }
      LOBYTE(a2) = 8 * v8;
      BYTE1(a2) = 4 * v9;
      *(v5 - 1) = a2;
      v10 = *(unsigned __int16 *)(*(_DWORD *)(v2 + 376) + v4 + 4);
      if ( dword_576828 == 2 )
      {
        BYTE2(a2) = (v10 >> 7) & 0xF8;
        LOBYTE(v11) = 2 * (v10 >> 5);
      }
      else
      {
        BYTE2(a2) = BYTE1(v10) & 0xF8;
        v11 = v10 >> 5;
      }
      LOBYTE(a2) = 8 * v10;
      BYTE1(a2) = 4 * v11;
      *v5 = a2;
      v12 = *(unsigned __int16 *)(v4 + *(_DWORD *)(v2 + 376) + 6);
      if ( dword_576828 == 2 )
      {
        BYTE2(a2) = (v12 >> 7) & 0xF8;
        LOBYTE(v13) = 2 * (v12 >> 5);
      }
      else
      {
        BYTE2(a2) = BYTE1(v12) & 0xF8;
        v13 = v12 >> 5;
      }
      LOBYTE(a2) = 8 * v12;
      BYTE1(a2) = 4 * v13;
      v5[1] = a2;
      v4 += 8;
      v5 += 4;
    }
    while ( v4 < 512 );
  }
}
// 576828: using guessed type int dword_576828;

//----- (004A41E0) --------------------------------------------------------
int __thiscall sub_4A41E0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int result; // eax

  v3 = this;
  this[96] = a2;
  result = sub_40223E(dword_576828, a3);
  *((_WORD *)v3 + 194) = result;
  return result;
}
// 40223E: using guessed type _DWORD __cdecl sub_40223E(_DWORD, _DWORD);
// 576828: using guessed type int dword_576828;

//----- (004A4210) --------------------------------------------------------
void __thiscall sub_4A4210(_DWORD *this)
{
  _DWORD *v1; // esi
  void *v2; // eax
  void **v3; // edi
  signed int v4; // ebx

  v1 = this;
  *this = &CompressedFramedSurface::`vftable';
  v2 = (void *)this[94];
  if ( v2 )
    sub_4A3F00(v2);
  v3 = (void **)((char *)v1 + 390);
  v4 = 8;
  do
  {
    if ( *v3 )
      sub_4A3F00(*v3);
    v3 += 3;
    --v4;
  }
  while ( v4 );
  if ( v1[95] )
  {
    j__free((void *)v1[95]);
    v1[95] = 0;
  }
  if ( *(_DWORD *)((char *)v1 + 350) )
  {
    free(*(void **)((char *)v1 + 350));
    *(_DWORD *)((char *)v1 + 350) = 0;
  }
  if ( v1[93] )
  {
    free((void *)v1[93]);
    v1[93] = 0;
  }
  if ( v1[90] )
  {
    j__free((void *)v1[90]);
    v1[90] = 0;
  }
  if ( *(_DWORD *)((char *)v1 + 346) )
  {
    free(*(void **)((char *)v1 + 346));
    *(_DWORD *)((char *)v1 + 346) = 0;
  }
  if ( v1[89] )
  {
    free((void *)v1[89]);
    v1[89] = 0;
  }
  sub_49B710(v1);
}
// 51DB8C: using guessed type void *CompressedFramedSurface::`vftable';

//----- (004A4380) --------------------------------------------------------
void __thiscall sub_4A4380(signed __int16 *this, int a2)
{
  signed __int16 *v2; // ebx
  signed int i; // ebp
  int v4; // edi
  int v5; // eax
  char *v6; // esi
  signed int v7; // edx
  char Dst[30000]; // [esp+8h] [ebp-7534h]

  v2 = this;
  memset(Dst, 0, this[84] / 8 + 1);
  for ( i = 0; i < v2[88]; ++i )
  {
    if ( (unsigned __int8)(128 >> (i & 7)) & *(_BYTE *)((i >> 3) + a2) )
    {
      v4 = v2[89];
      if ( v4 > 0 )
      {
        v5 = i * v4;
        do
        {
          v6 = &Dst[v5 >> 3];
          v7 = 128 >> (v5++ & 7);
          *v6 |= v7;
          --v4;
        }
        while ( v4 );
      }
    }
  }
  sub_4A2E20(v2, (int)Dst);
}
// 4A4380: using guessed type char Dst[30000];

//----- (004A4460) --------------------------------------------------------
char *__thiscall sub_4A4460(signed __int16 *this, int a2)
{
  signed __int16 *v2; // edi
  int v3; // ecx
  int v4; // ebx
  int v5; // ebp
  int v6; // eax
  signed int v7; // eax
  int i; // ecx
  signed __int16 v10; // [esp+8h] [ebp-FA04h]
  int v11[16000]; // [esp+Ch] [ebp-FA00h]

  v2 = this;
  v3 = 0;
  v10 = 0;
  if ( v2[84] > 0 )
  {
    v4 = v2[89];
    v5 = v2[84];
    do
    {
      v6 = *(_DWORD *)(a2 + 4 * (v3 / v4));
      v11[v3] = v6;
      if ( !(v3 % v4) && v6 )
        ++v10;
      ++v3;
    }
    while ( v3 < v5 );
  }
  sub_4A30E0(v2, (int)v11);
  v7 = 0;
  for ( i = 0; v7 < v2[88]; ++v7 )
  {
    if ( *(_DWORD *)(a2 + 4 * v7) )
      *(_DWORD *)(a2 + 4 * v7) = i++;
    else
      *(_DWORD *)(a2 + 4 * v7) = 0;
  }
  v2[88] = v10;
  return sub_4A0E40((void **)v2);
}
// 4A4460: using guessed type int var_FA00[16000];

//----- (004A4520) --------------------------------------------------------
void __thiscall sub_4A4520(signed __int16 *this, int a2)
{
  signed __int16 *v2; // esi
  int v3; // ecx
  int v4; // ebp
  void *v5; // edi
  signed int i; // ecx

  v2 = this;
  v3 = this[88];
  v4 = v3 / a2;
  if ( v3 / a2 >= 2 )
  {
    v5 = operator new(4 * v3);
    memset(v5, 0, 4 * v2[88]);
    for ( i = 0; i < v2[88]; ++i )
    {
      if ( !(i % v4) )
        *((_DWORD *)v5 + i) = 1;
    }
    sub_4A4460(v2, (int)v5);
    if ( v5 )
      j__free(v5);
  }
}

//----- (004A45C0) --------------------------------------------------------
int __cdecl sub_4A45C0(int a1)
{
  int *v1; // esi
  signed int v2; // edi
  int result; // eax

  dword_576828 = a1;
  memset(dword_56E3F8, 0, 0x400u);
  memset(dword_576830, 0, 0x200u);
  memset(&unk_571820, 0, 0x3000u);
  dword_5717F8 = 0;
  dword_5717FC = 0;
  dword_571800 = 0;
  dword_571804 = 0;
  dword_571808 = 0;
  dword_57180C = 0;
  dword_571810 = 0;
  dword_571814 = 0;
  memset(dword_574828, 0, 0x2000u);
  dword_576A48 = 0;
  dword_571818 = 0;
  dword_576A54 = 1000;
  *(_WORD *)((char *)&dword_57181C + 1) = 0;
  LOBYTE(dword_57181C) = 0;
  dword_576A38 = 0;
  *(_WORD *)((char *)&dword_576A3C + 1) = 0;
  LOBYTE(dword_576A3C) = 0;
  dword_574820 = 0;
  dword_576A44 = 0;
  dword_576A34 = 0;
  dword_576A30 = 0;
  v1 = dword_576830;
  do
  {
    v2 = 32;
    do
    {
      *v1 = (int)malloc(0x1200u);
      ++v1;
      --v2;
    }
    while ( v2 );
  }
  while ( (signed int)v1 < (signed int)&dword_576A30 );
  *(_WORD *)((char *)&a1 + 1) = -1;
  LOBYTE(a1) = -1;
  sub_4A3D00(0, a1);
  *(_WORD *)((char *)&a1 + 1) = -256;
  LOBYTE(a1) = 0;
  sub_4A3D00(1, a1);
  *(_WORD *)((char *)&a1 + 1) = 255;
  LOBYTE(a1) = 0;
  sub_4A3D00(2, a1);
  *(_WORD *)((char *)&a1 + 1) = 0;
  LOBYTE(a1) = -1;
  sub_4A3D00(3, a1);
  sub_4A3DA0();
  result = sub_4A3A20();
  qmemcpy(&unk_56E7D8, &dword_5717F8, 0x20u);
  qmemcpy(&unk_56E758, &unk_571820, 0x80u);
  dword_576A50 = 0;
  return result;
}
// 5717F8: using guessed type int dword_5717F8;
// 5717FC: using guessed type int dword_5717FC;
// 571800: using guessed type int dword_571800;
// 571804: using guessed type int dword_571804;
// 571808: using guessed type int dword_571808;
// 57180C: using guessed type int dword_57180C;
// 571810: using guessed type int dword_571810;
// 571814: using guessed type int dword_571814;
// 571818: using guessed type int dword_571818;
// 57181C: using guessed type int dword_57181C;
// 574820: using guessed type int dword_574820;
// 576828: using guessed type int dword_576828;
// 576A30: using guessed type int dword_576A30;
// 576A34: using guessed type int dword_576A34;
// 576A38: using guessed type int dword_576A38;
// 576A3C: using guessed type int dword_576A3C;
// 576A44: using guessed type int dword_576A44;
// 576A48: using guessed type int dword_576A48;
// 576A50: using guessed type int dword_576A50;
// 576A54: using guessed type int dword_576A54;

//----- (004A4770) --------------------------------------------------------
void *__cdecl sub_4A4770(int a1, int a2)
{
  int v2; // edi
  signed int v3; // ecx
  __int16 v4; // dx
  __int16 v5; // dx
  int v6; // edi
  _DWORD *v7; // edx
  unsigned int v8; // eax
  __int16 *v9; // ecx
  int v10; // esi
  int v11; // eax
  unsigned __int8 *v12; // ecx
  unsigned __int8 *v13; // edx
  int v14; // eax
  unsigned __int8 *v15; // ecx
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // ecx
  unsigned __int8 *v18; // edx
  signed int v19; // eax
  int v21; // ebp
  __int16 *v22; // eax
  unsigned __int16 *v23; // eax
  signed int v24; // [esp+10h] [ebp-208h]
  __int16 v25[256]; // [esp+14h] [ebp-204h]

  v2 = dword_576828;
  v3 = 0;
  do
  {
    v4 = (unsigned __int8)(*(_WORD *)(a1 + 4 * v3) >> 8) | (unsigned __int16)(32
                                                                            * ((*(_DWORD *)(a1 + 4 * v3) >> 16) & 0xF8));
    if ( v2 == 2 )
      v5 = v4 & 0xFFF8;
    else
      v5 = 2 * (v4 & 0xFFFC);
    v25[v3] = ((unsigned __int8)*(_DWORD *)(a1 + 4 * v3) >> 3) | 4 * v5;
    ++v3;
  }
  while ( v3 < 256 );
  v6 = 0;
  v24 = -1;
  if ( dword_576A48 <= 0 )
    goto LABEL_34;
  do
  {
    v7 = dword_574828[v6];
    if ( v7 )
    {
      v8 = 512;
      v9 = v25;
      do
      {
        if ( *v7 != *(_DWORD *)v9 )
          goto LABEL_12;
        v8 -= 4;
        v9 += 2;
        ++v7;
      }
      while ( v8 >= 4 );
      if ( !v8 )
      {
LABEL_21:
        v19 = 0;
        goto LABEL_22;
      }
LABEL_12:
      v10 = *(unsigned __int8 *)v7 - *(unsigned __int8 *)v9;
      if ( *(unsigned __int8 *)v7 == *(unsigned __int8 *)v9 )
      {
        v11 = v8 - 1;
        v12 = (unsigned __int8 *)v9 + 1;
        v13 = (unsigned __int8 *)v7 + 1;
        if ( !v11 )
          goto LABEL_21;
        v10 = *v13 - *v12;
        if ( *v13 == *v12 )
        {
          v14 = v11 - 1;
          v15 = v12 + 1;
          v16 = v13 + 1;
          if ( !v14 )
            goto LABEL_21;
          v10 = *v16 - *v15;
          if ( *v16 == *v15 )
          {
            v17 = v15 + 1;
            v18 = v16 + 1;
            if ( v14 == 1 )
              goto LABEL_21;
            v10 = *v18 - *v17;
            if ( *v18 == *v17 )
              goto LABEL_21;
          }
        }
      }
      v19 = 1;
      if ( v10 <= 0 )
        v19 = -1;
LABEL_22:
      if ( !v19 && word_56E7F8[v6] == a2 )
      {
        ++dword_56F7F8[v6];
        return dword_574828[v6];
      }
    }
    else
    {
      v24 = v6;
    }
    ++v6;
  }
  while ( v6 < dword_576A48 );
  v21 = v24;
  if ( v24 == -1 )
  {
LABEL_34:
    if ( dword_576A48 >= 2048 )
    {
      ++dword_56F7F8[0];
      return dword_574828[0];
    }
    v21 = dword_576A48++;
  }
  v22 = (__int16 *)malloc(0x400u);
  dword_574828[v21] = v22;
  qmemcpy(v22, v25, 0x200u);
  v23 = (unsigned __int16 *)dword_574828[v21];
  ++dword_56F7F8[v21];
  word_56E7F8[v21] = a2;
  sub_4A3F50(v23 + 256, (int)v23, (signed __int16)a2);
  return dword_574828[v21];
}
// 576828: using guessed type int dword_576828;
// 576A48: using guessed type int dword_576A48;
// 4A4770: using guessed type __int16 var_204[256];

//----- (004A4970) --------------------------------------------------------
unsigned __int16 *__cdecl sub_4A4970(int a1, int a2, int a3)
{
  unsigned __int16 *result; // eax
  int v4; // esi

  result = (unsigned __int16 *)a1;
  v4 = 0;
  dword_576A54 = a1;
  dword_57181C = a2;
  for ( dword_576A38 = a3; v4 < dword_576A48; ++v4 )
  {
    result = (unsigned __int16 *)dword_574828[v4];
    if ( result )
      result = (unsigned __int16 *)sub_4A3F50(result + 256, (int)result, word_56E7F8[v4]);
  }
  return result;
}
// 57181C: using guessed type int dword_57181C;
// 576A38: using guessed type int dword_576A38;
// 576A48: using guessed type int dword_576A48;
// 576A54: using guessed type int dword_576A54;

//----- (004A49D0) --------------------------------------------------------
void *__thiscall sub_4A49D0(_DWORD *this, FILE *File)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  void *v4; // eax
  size_t v5; // ST20_4
  void *v6; // eax
  size_t v7; // ST24_4
  void *v8; // eax
  size_t v9; // ST10_4
  void *result; // eax
  char *v11; // edi
  __int16 DstBuf; // [esp+8h] [ebp-4C0h]
  char v13; // [esp+Ch] [ebp-4BCh]
  char v14; // [esp+40Ch] [ebp-BCh]
  char v15; // [esp+444h] [ebp-84h]

  v2 = this;
  fread(&DstBuf, 1u, 2u, File);
  if ( DstBuf > 2 )
  {
    if ( DstBuf > 3 )
    {
      if ( DstBuf > 4 )
      {
        fread(v2 + 41, 0xB6u, 1u, File);
      }
      else
      {
        fread(&v15, 0x7Fu, 1u, File);
        sub_4A3600(v2, (int)&v15);
      }
    }
    else
    {
      fread(&v14, 0x38u, 1u, File);
      sub_4A3500(v2, (int)&v14);
    }
  }
  else
  {
    fread(&v14, 0x1Eu, 1u, File);
    sub_4A3460(v2, (int)&v14);
  }
  fread(&v13, 4u, 0x100u, File);
  v3 = *((_WORD *)v2 + 92);
  if ( v3 > 0 )
  {
    v4 = malloc(v3);
    v5 = *((signed __int16 *)v2 + 92);
    *(_DWORD *)((char *)v2 + 346) = v4;
    fread(v4, v5, 1u, File);
  }
  v6 = operator new(12 * *((signed __int16 *)v2 + 84));
  v7 = *((signed __int16 *)v2 + 84);
  v2[90] = v6;
  fread(v6, 0xCu, v7, File);
  v8 = malloc(v2[41]);
  v9 = v2[41];
  v2[89] = v8;
  fread(v8, 1u, v9, File);
  *((_WORD *)v2 + 177) = 256 - *((_WORD *)v2 + 91) - *((_WORD *)v2 + 90);
  result = sub_4A4770((int)&v13, 0);
  v11 = *(char **)((char *)v2 + 350);
  v2[94] = result;
  if ( v11 )
    qmemcpy(v11, &v13, 0x400u);
  return result;
}

//----- (004A4B90) --------------------------------------------------------
void *__fastcall sub_4A4B90(int a1, int a2, int a3)
{
  int v3; // esi
  void *result; // eax
  signed int v5; // eax
  _DWORD *v6; // ecx
  signed int v7; // eax
  int v8; // eax
  void *v9; // eax
  int v10; // eax
  int v11; // esi
  int v12; // eax
  int v13; // [esp+8h] [ebp-40Ch]
  LARGE_INTEGER PerformanceCount; // [esp+Ch] [ebp-408h]
  char v15[1024]; // [esp+14h] [ebp-400h]

  v3 = a1;
  if ( !a3 )
    return *(void **)(a1 + 376);
  v5 = 0;
  v6 = (_DWORD *)(a1 + 394);
  do
  {
    if ( *v6 == a3 )
    {
      v11 = v3 + 12 * v5;
      *(_DWORD *)(v11 + 398) = sub_401D39(v6, a2);
      return *(void **)(v11 + 390);
    }
    ++v5;
    v6 += 3;
  }
  while ( v5 < 8 );
  v7 = 0;
  if ( *(_DWORD *)(v3 + 410) < *(_DWORD *)(v3 + 398) )
    v7 = 1;
  if ( *(_DWORD *)(v3 + 422) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 2;
  if ( *(_DWORD *)(v3 + 434) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 3;
  if ( *(_DWORD *)(v3 + 446) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 4;
  if ( *(_DWORD *)(v3 + 458) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 5;
  if ( *(_DWORD *)(v3 + 470) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 6;
  if ( *(_DWORD *)(v3 + 482) < *(_DWORD *)(v3 + 12 * v7 + 398) )
    v7 = 7;
  v8 = v3 + 12 * v7;
  v13 = v8;
  v9 = *(void **)(v8 + 390);
  if ( v9 )
    sub_4A3F00(v9);
  sub_4A4050(v3, v15);
  if ( *(_BYTE *)(v3 + 283) )
  {
    sub_48DDC0((int *)v15, *(unsigned __int8 *)(v3 + 282), SBYTE2(a3), SBYTE1(a3), (char)a3);
    v10 = *(unsigned __int8 *)(v3 + 282) + *(unsigned __int8 *)(v3 + 283);
    sub_48DDC0((int *)&v15[4 * v10], 256 - v10, SBYTE2(a3), SBYTE1(a3), (char)a3);
  }
  else
  {
    sub_48DDC0((int *)v15, 256, SBYTE2(a3), SBYTE1(a3), (char)a3);
  }
  if ( Frequency.QuadPart )
  {
    QueryPerformanceCounter(&PerformanceCount);
    v12 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
  }
  else
  {
    v12 = GetTickCount() / 0xA;
  }
  *(_DWORD *)(v13 + 398) = v12;
  *(_DWORD *)(v13 + 394) = a3;
  result = sub_4A4770((int)v15, 0);
  *(_DWORD *)(v13 + 390) = result;
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);
// 4A4B90: using guessed type char var_400[1024];

//----- (004A4DC0) --------------------------------------------------------
int __fastcall sub_4A4DC0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *Src, int a10)
{
  char *v10; // esi
  signed int v11; // edi
  int v12; // ebx
  unsigned __int8 v13; // al
  int v14; // edx
  char *v15; // eax
  __int16 *v16; // ebp
  int v17; // edi
  signed int v18; // esi
  int v19; // ebp
  unsigned int v20; // eax
  unsigned __int8 v21; // dl
  unsigned int v22; // ecx
  int v23; // eax
  char v24; // dl
  int v25; // eax
  unsigned __int8 v26; // cl
  int v27; // eax
  __int16 v28; // dx
  __int16 v29; // ax
  __int16 v30; // dx
  int v31; // edx
  int v32; // edi
  unsigned int v33; // edx
  int v34; // eax
  char *v35; // esi
  size_t v37; // [esp-4h] [ebp-240h]
  unsigned __int8 v38; // [esp+10h] [ebp-22Ch]
  unsigned __int8 v39; // [esp+15h] [ebp-227h]
  int v40; // [esp+18h] [ebp-224h]
  int v41; // [esp+20h] [ebp-21Ch]
  int v42; // [esp+24h] [ebp-218h]
  int v43; // [esp+28h] [ebp-214h]
  int v44; // [esp+2Ch] [ebp-210h]
  int v45; // [esp+30h] [ebp-20Ch]
  int v46; // [esp+34h] [ebp-208h]
  __int16 v47[256]; // [esp+38h] [ebp-204h]

  v10 = (char *)a10;
  v11 = (unsigned int)a7 >> 23;
  v12 = a1;
  if ( a8 && !(*(_BYTE *)(a1 + 188) & 0x10) )
    v10 = (char *)sub_4A4B90(a1, a2, a8);
  if ( !v10 )
    v10 = *(char **)(v12 + 376);
  if ( Src )
  {
    v13 = *(_BYTE *)(v12 + 201);
    if ( v13 )
    {
      v14 = *(unsigned __int8 *)(v12 + 200);
      v37 = 2 * v13;
      v15 = &v10[2 * v14 + 512];
      if ( v11 < 256 )
        v15 = &v10[2 * v14];
      memcpy(v15, Src, v37);
    }
  }
  v16 = (__int16 *)&v10[2 * v11];
  if ( a7 & 0x800 )
  {
    v17 = dword_576828;
    v41 = BYTE2(dword_576A3C);
    v18 = 0;
    v40 = BYTE1(dword_576A3C);
    v42 = (unsigned __int8)dword_576A3C;
    v19 = (char *)v16 - (char *)v47;
    do
    {
      v20 = *(unsigned __int16 *)((char *)&v47[v18] + v19);
      v21 = 4 * (v20 >> 5);
      if ( v17 == 2 )
      {
        v22 = v20 >> 7;
        v21 = 8 * ((unsigned int)*(unsigned __int16 *)((char *)&v47[v18] + v19) >> 5);
      }
      else
      {
        LOBYTE(v22) = BYTE1(v20);
      }
      v38 = 8 * v20;
      v39 = v21;
      v23 = v41 + (unsigned __int8)(v22 & 0xF8);
      if ( v23 <= 255 )
        v24 = v41 + (v22 & 0xF8);
      else
        v24 = -1;
      v25 = v40 + v39;
      if ( v25 <= 255 )
        v26 = v40 + v39;
      else
        v26 = -1;
      v27 = v42 + v38;
      if ( v27 > 255 )
        LOBYTE(v27) = -1;
      v17 = dword_576828;
      v28 = v26 | (unsigned __int16)(32 * (v24 & 0xF8));
      v29 = (unsigned __int8)v27 >> 3;
      if ( dword_576828 == 2 )
        v30 = v28 & 0xFFF8;
      else
        v30 = 2 * (v28 & 0xFFFC);
      v47[v18++] = v29 | 4 * v30;
    }
    while ( v18 < 256 );
    v16 = v47;
  }
  v31 = *(_DWORD *)(v12 + 360);
  v43 = 0;
  v44 = 0;
  v32 = 12 * a3 + v31;
  v45 = abs(*(signed __int16 *)(v32 + 4));
  v33 = a7;
  v46 = abs(*(signed __int16 *)(v32 + 6));
  dword_574824 = a3;
  if ( *(_WORD *)(12 * a3 + *(_DWORD *)(v12 + 360) + 6) >= 0 )
  {
    dword_576A40 = a7 & 0x200;
    v33 = a7;
  }
  else
  {
    dword_576A40 = ~(unsigned __int8)((unsigned int)a7 >> 9) & 1;
  }
  if ( *(_WORD *)(12 * a3 + *(_DWORD *)(v12 + 360) + 4) >= 0 )
    dword_57682C = v33 & 0x400;
  else
    dword_57682C = ~(unsigned __int8)(v33 >> 10) & 1;
  v34 = (v33 >> 16) & 0x7F;
  if ( v34 >= 95 )
    v34 = 95;
  if ( dword_576A50 != v34 && *(_WORD *)(v12 + 354) < 0x100u )
  {
    v35 = (char *)&unk_571820 + 128 * v34;
    if ( v35 )
    {
      v33 = a7;
      dword_576A50 = v34;
      qmemcpy(&unk_56E758, (char *)&unk_571820 + 128 * v34, 0x80u);
    }
  }
  return (*(int (__stdcall **)(int, int, int, int *, unsigned int, __int16 *))(*(_DWORD *)a4 + 28))(
           a5,
           a6,
           v12,
           &v43,
           v33,
           v16);
}
// 574824: using guessed type int dword_574824;
// 576828: using guessed type int dword_576828;
// 57682C: using guessed type int dword_57682C;
// 576A3C: using guessed type int dword_576A3C;
// 576A40: using guessed type int dword_576A40;
// 576A50: using guessed type int dword_576A50;
// 4A4DC0: using guessed type __int16 var_204[256];

//----- (004A50B0) --------------------------------------------------------
int __thiscall sub_4A50B0(int this, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8, void *Src, int a10)
{
  int result; // eax
  int v11; // ebp
  int v12; // edi
  int v13; // edi
  int v14; // edx
  int v15; // eax
  int v16; // ST08_4
  signed __int16 *v17; // eax
  int v18; // edx

  result = *(signed __int16 *)(this + 168);
  if ( a2 < result )
  {
    v11 = a4;
    v12 = a5;
    if ( a6 & 0x100 )
    {
      v11 = *(signed __int16 *)(this + 172) / -2 + a4;
      a4 += *(signed __int16 *)(this + 172) / -2;
      v12 = *(signed __int16 *)(this + 174) / -2 + a5;
    }
    if ( a3 != dword_576A30 || dword_576A34 >= dword_576A44 )
    {
      if ( a6 & 0x200 )
      {
        v14 = *(_DWORD *)(this + 360);
        v15 = 12 * a2;
        if ( a6 & 0x400 )
        {
          v16 = v11
              + *(signed __int16 *)(this + 172)
              - *(signed __int16 *)(v15 + *(_DWORD *)(this + 360))
              - abs(*(signed __int16 *)(v15 + *(_DWORD *)(this + 360) + 4));
          result = sub_4A4DC0(
                     this,
                     v16,
                     a2,
                     a3,
                     v16,
                     v12
                   + *(signed __int16 *)(this + 174)
                   - *(signed __int16 *)(v15 + v14 + 2)
                   - abs(*(signed __int16 *)(v15 + v14 + 6)),
                     a6,
                     a7,
                     Src,
                     a10);
        }
        else
        {
          result = sub_4A4DC0(
                     this,
                     a3,
                     a2,
                     a3,
                     v11 + *(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2),
                     v12
                   + *(signed __int16 *)(this + 174)
                   - *(signed __int16 *)(v14 + v15 + 2)
                   - abs(*(signed __int16 *)(v14 + v15 + 6)),
                     a6,
                     a7,
                     Src,
                     a10);
        }
      }
      else if ( a6 & 0x400 )
      {
        v17 = (signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2);
        v18 = v11 + *(signed __int16 *)(this + 172) - *v17 - abs(v17[2]);
        result = sub_4A4DC0(this, v18, a2, a3, v18, v12 + v17[1], a6, a7, Src, a10);
      }
      else
      {
        result = sub_4A4DC0(
                   this,
                   a3,
                   a2,
                   a3,
                   v11 + *(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2),
                   v12 + *(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2 + 2),
                   a6,
                   a7,
                   Src,
                   a10);
      }
    }
    else
    {
      *(_DWORD *)(44 * dword_576A34 + dword_574820) = this;
      *(_WORD *)(44 * dword_576A34 + dword_574820 + 8) = a2;
      *(_WORD *)(44 * dword_576A34 + dword_574820 + 10) = v11;
      *(_WORD *)(44 * dword_576A34 + dword_574820 + 12) = v12;
      *(_WORD *)(44 * dword_576A34 + dword_574820 + 14) = v12 + a8 + *(_WORD *)(this + 186) + *(_WORD *)(this + 174) / 2;
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 16) = a10;
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 24) = a7;
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 20) = Src;
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 4) = a6 & 0xFFFFFEFF;
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 28) = a4 + *(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2);
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 36) = *(_DWORD *)(44 * dword_576A34 + dword_574820 + 28)
                                                         + abs(*(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2 + 4));
      *(_DWORD *)(44 * dword_576A34 + dword_574820 + 32) = v12
                                                         + *(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2 + 2);
      v13 = 44 * dword_576A34 + dword_574820;
      result = *(_DWORD *)(v13 + 32) + abs(*(signed __int16 *)(*(_DWORD *)(this + 360) + 12 * a2 + 6));
      *(_DWORD *)(v13 + 40) = result;
      ++dword_576A34;
    }
  }
  return result;
}
// 574820: using guessed type int dword_574820;
// 576A30: using guessed type int dword_576A30;
// 576A34: using guessed type int dword_576A34;
// 576A44: using guessed type int dword_576A44;

//----- (004A5420) --------------------------------------------------------
_DWORD *__thiscall sub_4A5420(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // ebx
  const char *v6; // eax
  FILE *v7; // eax
  FILE *v8; // edi
  HMODULE v9; // eax
  HRSRC v10; // eax
  HGLOBAL v11; // eax
  __int16 *v12; // eax
  __int16 v13; // cx
  _WORD *v14; // eax
  void *v15; // ST3C_4
  int v16; // eax
  void *v17; // ST3C_4
  void *v18; // ST3C_4
  const void *v19; // esi
  __int16 v20; // ax
  void *v21; // eax
  size_t v22; // ST20_4
  void *v23; // eax
  size_t v24; // ST20_4
  char *v25; // esi
  void *v26; // eax
  size_t v27; // ST10_4
  char *Src; // [esp+14h] [ebp-4D8h]
  char v30; // [esp+1Ch] [ebp-4D0h]
  char v31; // [esp+41Ch] [ebp-D0h]
  __int16 v32; // [esp+438h] [ebp-B4h]
  char v33; // [esp+454h] [ebp-98h]
  int v34; // [esp+4E8h] [ebp-4h]

  v5 = this;
  sub_49B650(this);
  v34 = 0;
  *v5 = &CompressedFramedSurface::`vftable';
  v5[93] = 0;
  if ( a4 )
    v5[93] = sub_40284C(a4);
  *(_DWORD *)((char *)v5 + 350) = 0;
  v5[90] = 0;
  v5[1] = 0;
  v5[2] = 0;
  v5[91] = a2;
  v5[92] = a3;
  *((_WORD *)v5 + 177) = 256;
  *(_DWORD *)((char *)v5 + 346) = 0;
  v5[89] = 0;
  v5[95] = 0;
  v5[94] = 0;
  v5[96] = 0;
  *((_WORD *)v5 + 194) = 0;
  memset((char *)v5 + 390, 0, 0x60u);
  if ( a5 )
    *(_DWORD *)((char *)v5 + 350) = malloc(0x400u);
  v6 = (const char *)v5[93];
  if ( v6 && !_access(v6, 0) )
  {
    v7 = fopen((const char *)v5[93], "rb");
    v8 = v7;
    if ( v7 )
    {
      sub_4A49D0(v5, v7);
      fclose(v8);
    }
LABEL_24:
    sub_4A0E40((void **)v5);
    return v5;
  }
  v9 = (HMODULE)v5[91];
  if ( v9 )
  {
    v10 = FindResourceA(v9, (LPCSTR)*((unsigned __int16 *)v5 + 184), Type);
    if ( v10 )
    {
      v11 = LoadResource((HMODULE)v5[91], v10);
      if ( v11 )
      {
        v12 = (__int16 *)LockResource(v11);
        if ( v12 )
        {
          v13 = *v12;
          v14 = v12 + 1;
          if ( v13 > 2 )
          {
            if ( v13 > 3 )
            {
              if ( v13 > 4 )
              {
                qmemcpy(v5 + 41, v14, 0xB6u);
                v16 = (int)(v14 + 91);
              }
              else
              {
                qmemcpy(&v33, v14, 0x7Fu);
                v18 = (char *)v14 + 127;
                sub_4A3600(v5, (int)&v33);
                v16 = (int)v18;
              }
            }
            else
            {
              qmemcpy(&v31, v14, 0x38u);
              v17 = v14 + 28;
              sub_4A3500(v5, (int)&v31);
              v16 = (int)v17;
            }
          }
          else
          {
            qmemcpy(&v31, v14, 0x1Cu);
            v15 = v14 + 15;
            v32 = v14[14];
            sub_4A3460(v5, (int)&v31);
            v16 = (int)v15;
          }
          v19 = (const void *)v16;
          Src = (char *)(v16 + 1024);
          v20 = *((_WORD *)v5 + 92);
          qmemcpy(&v30, v19, 0x400u);
          if ( v20 > 0 )
          {
            v21 = malloc(v20);
            v22 = *((signed __int16 *)v5 + 92);
            *(_DWORD *)((char *)v5 + 346) = v21;
            memcpy(v21, Src, v22);
            Src += *((signed __int16 *)v5 + 92);
          }
          v23 = operator new(12 * *((signed __int16 *)v5 + 84));
          v24 = 12 * *((signed __int16 *)v5 + 84);
          v5[90] = v23;
          memcpy(v23, Src, v24);
          v25 = &Src[12 * *((signed __int16 *)v5 + 84)];
          v26 = malloc(v5[41]);
          v27 = v5[41];
          v5[89] = v26;
          memcpy(v26, v25, v27);
          *((_WORD *)v5 + 177) = 256 - *((_WORD *)v5 + 91) - *((_WORD *)v5 + 90);
          v5[94] = sub_4A4770((int)&v30, 0);
          if ( a5 )
            qmemcpy(*(void **)((char *)v5 + 350), &v30, 0x400u);
          goto LABEL_24;
        }
      }
    }
  }
  return v5;
}
// 40284C: using guessed type _DWORD __cdecl sub_40284C(_DWORD);
// 51DB8C: using guessed type void *CompressedFramedSurface::`vftable';

//----- (004A5790) --------------------------------------------------------
_DWORD *__thiscall sub_4A5790(_DWORD *this, FILE *File, int Offset, int a4)
{
  _DWORD *v4; // esi

  v4 = this;
  sub_49B650(this);
  *v4 = &CompressedFramedSurface::`vftable';
  v4[95] = 0;
  *(_DWORD *)((char *)v4 + 350) = 0;
  v4[90] = 0;
  v4[1] = 0;
  v4[2] = 0;
  v4[91] = 0;
  v4[92] = 0;
  *((_WORD *)v4 + 177) = 256;
  *(_DWORD *)((char *)v4 + 346) = 0;
  v4[93] = 0;
  v4[89] = 0;
  v4[94] = 0;
  v4[96] = 0;
  *((_WORD *)v4 + 194) = 0;
  memset((char *)v4 + 390, 0, 0x60u);
  if ( a4 )
    *(_DWORD *)((char *)v4 + 350) = malloc(0x400u);
  if ( Offset >= 0 )
    fseek(File, Offset, 0);
  sub_4A49D0(v4, File);
  sub_4A0E40((void **)v4);
  return v4;
}
// 51DB8C: using guessed type void *CompressedFramedSurface::`vftable';

//----- (004A5890) --------------------------------------------------------
_DWORD *__thiscall sub_4A5890(_DWORD *this, int a2, char *Str1, int a4)
{
  _DWORD *v4; // esi
  FILE *v5; // eax
  int v7; // [esp+10h] [ebp-10h]
  int v8; // [esp+1Ch] [ebp-4h]

  v4 = this;
  sub_49B650(this);
  v8 = 0;
  *v4 = &CompressedFramedSurface::`vftable';
  v4[95] = 0;
  *(_DWORD *)((char *)v4 + 350) = 0;
  v4[90] = 0;
  v4[1] = 0;
  v4[2] = 0;
  v4[91] = 0;
  v4[92] = 0;
  *((_WORD *)v4 + 177) = 256;
  *(_DWORD *)((char *)v4 + 346) = 0;
  v4[93] = 0;
  v4[89] = 0;
  v4[94] = 0;
  v4[96] = 0;
  *((_WORD *)v4 + 194) = 0;
  memset((char *)v4 + 390, 0, 0x60u);
  if ( a4 )
    *(_DWORD *)((char *)v4 + 350) = malloc(0x400u);
  v5 = (FILE *)sub_4B85C0((_DWORD *)a2, Str1, (int)&v7);
  sub_4A49D0(v4, v5);
  sub_4A0E40((void **)v4);
  return v4;
}
// 51DB8C: using guessed type void *CompressedFramedSurface::`vftable';

//----- (004A5990) --------------------------------------------------------
void *__thiscall sub_4A5990(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4A4210(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004A59B0) --------------------------------------------------------
int __thiscall sub_4A59B0(_DWORD *this)
{
  bool v2; // zf
  _DWORD *v3; // [esp+8h] [ebp-4h]

  v3 = this;
  if ( this[59] )
    return this[58];
  v2 = this[56] == 0;
  v3 = 0;
  if ( !v2 )
    (*(void (__stdcall **)(_DWORD, _DWORD **))(*(_DWORD *)this[56] + 24))(this[56], &v3);
  return (int)v3;
}

//----- (004A59F0) --------------------------------------------------------
int __fastcall sub_4A59F0(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int result; // eax
  _DWORD *v8; // edx

  result = 0;
  v8 = (_DWORD *)(a1 + 16);
  while ( *v8 && (*v8 != a3 || v8[1] != a4) )
  {
    ++result;
    v8 += 5;
    if ( result >= 8 )
      return result;
  }
  result = a1 + 20 * result;
  *(_DWORD *)(result + 20) = a4;
  *(_DWORD *)(result + 24) = a5;
  *(_DWORD *)(result + 16) = a3;
  *(_DWORD *)(result + 28) = a6;
  *(_DWORD *)(result + 32) = a7;
  return result;
}

//----- (004A5A50) --------------------------------------------------------
__int64 __thiscall sub_4A5A50(_DWORD *this, unsigned int a2)
{
  __int64 result; // rax

  result = a2;
  if ( this[4] == a2 )
    this[4] = 0;
  if ( this[9] == (_DWORD)result )
    this[9] = 0;
  if ( this[14] == (_DWORD)result )
    this[14] = 0;
  if ( this[19] == (_DWORD)result )
    this[19] = 0;
  if ( this[24] == (_DWORD)result )
    this[24] = 0;
  if ( this[29] == (_DWORD)result )
    this[29] = 0;
  if ( this[34] == (_DWORD)result )
    this[34] = 0;
  if ( this[39] == (_DWORD)result )
    this[39] = 0;
  return result;
}

//----- (004A5AF0) --------------------------------------------------------
int __thiscall sub_4A5AF0(_DWORD *this, float a2, float a3, float a4, int a5, int a6)
{
  _DWORD *v6; // esi
  int result; // eax

  v6 = this;
  this[51] = a5;
  result = this[44];
  this[52] = a6;
  if ( result )
  {
    (*(void (__stdcall **)(int, _DWORD, signed int))(*(_DWORD *)result + 44))(result, LODWORD(a2), 1);
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int))(*(_DWORD *)v6[44] + 60))(v6[44], LODWORD(a3), 1);
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int))(*(_DWORD *)v6[44] + 48))(v6[44], LODWORD(a4), 1);
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v6[44] + 68))(v6[44]);
  }
  return result;
}

//----- (004A5B70) --------------------------------------------------------
void *__cdecl sub_4A5B70(_DWORD *a1, size_t *a2, int a3, int a4)
{
  void *v4; // ebp
  int v5; // eax
  int *v6; // esi
  unsigned int v7; // ecx
  int v8; // eax
  size_t v9; // edi
  _DWORD *v10; // esi
  void *v11; // eax
  int v13; // [esp+Ch] [ebp+4h]

  v4 = 0;
  *a2 = 0;
  v5 = a1[1];
  v6 = a1 + 3;
  if ( *a1 == 1179011410 && a1[2] == 1163280727 )
  {
    v7 = (unsigned int)v6 + v5 - 4;
    v13 = (int)v6 + v5 - 4;
    if ( (unsigned int)v6 >= v7 )
      return v4;
    while ( 1 )
    {
      v8 = *v6;
      v9 = v6[1];
      v10 = v6 + 2;
      if ( v8 == 544501094 )
      {
        *(_DWORD *)a3 = *v10;
        *(_DWORD *)(a3 + 4) = v10[1];
        *(_DWORD *)(a3 + 8) = v10[2];
        *(_DWORD *)(a3 + 12) = v10[3];
        *(_WORD *)(a3 + 16) = *((_WORD *)v10 + 8);
        if ( a4 )
          return 0;
      }
      else if ( v8 == 1635017060 )
      {
        v11 = malloc(v9);
        v4 = v11;
        if ( v11 )
          memcpy(v11, v10, v9);
        *a2 = v9;
        v7 = v13;
      }
      v6 = (_DWORD *)((char *)v10 + ((v9 + 1) & 0xFFFFFFFE));
      if ( (unsigned int)v6 >= v7 )
        return v4;
    }
  }
  return 0;
}

//----- (004A5F60) --------------------------------------------------------
int __thiscall sub_4A5F60(_DWORD *this)
{
  unsigned int v1; // esi
  _DWORD *v2; // ecx
  int result; // eax
  int i; // edi

  v1 = (unsigned int)this;
  v2 = (_DWORD *)this[37];
  if ( v2 )
  {
    if ( v2[53] )
    {
      result = sub_4A5A50(v2, v1);
      for ( i = 0; i < *(_DWORD *)(v1 + 72); ++i )
        result = (*(int (__stdcall **)(_DWORD))(**(_DWORD **)(v1 + 4 * i) + 8))(*(_DWORD *)(v1 + 4 * i));
    }
  }
  return result;
}

//----- (004A5FA0) --------------------------------------------------------
int __thiscall sub_4A5FA0(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int result; // eax
  int v4; // esi

  v2 = this;
  result = this[37];
  if ( result && *(_DWORD *)(result + 212) )
  {
    result = a2;
    if ( a2 == -1 )
    {
      v4 = 0;
      if ( this[18] > 0 )
      {
        do
        {
          result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v2[v4] + 72))(v2[v4]);
          ++v4;
        }
        while ( v4 < v2[18] );
      }
    }
    else
    {
      result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this[a2] + 72))(this[a2]);
    }
  }
  return result;
}

//----- (004A5FF0) --------------------------------------------------------
signed int __thiscall sub_4A5FF0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // edi
  int v6; // ebp
  signed int result; // eax
  int v8; // eax
  int v9; // ecx
  int v10; // ebx
  int v11; // esi
  int v12; // eax
  signed int v13; // esi
  signed int v14; // ebp
  int v15; // eax
  int v16; // eax
  int v17; // [esp+8h] [ebp-4h]

  v5 = this;
  v6 = this[a2];
  v17 = this[a2];
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v6 + 36))(this[a2], &a2);
  if ( !(a2 & 1) )
    return 0;
  v8 = v5[37];
  v9 = a4 - *(_DWORD *)(v8 + 184);
  v10 = a3 - *(_DWORD *)(v8 + 180);
  v11 = abs(v9);
  v12 = abs(v10);
  if ( v12 <= v11 )
    v12 = v11;
  if ( v12 <= v5[59] )
  {
    v13 = 0;
    v14 = 0;
    if ( v12 > v5[58] )
    {
      v15 = v5[59] - v5[58];
      a4 = v10 * v10;
      a3 = v15 * v15;
      v13 = (signed int)((double)(v10 * v10 + v9 * v9) * -10000.0 / (double)(v15 * v15));
      if ( v13 <= -10000 )
        v13 = -10000;
      v14 = (signed int)((double)a4 * 10000.0 / 10000.0) < 0 ? 0 : (signed int)((double)a4 * 10000.0 / 10000.0);
      if ( v14 > 10000 )
        v14 = 10000;
      if ( v10 < 0 )
        v14 = -v14;
    }
    v16 = *(_DWORD *)(v5[37] + 232) + v13;
    if ( v16 <= -10000 )
      v16 = -10000;
    (*(void (__stdcall **)(int, int))(*(_DWORD *)v17 + 60))(v17, v16);
    (*(void (__stdcall **)(int, signed int))(*(_DWORD *)v17 + 64))(v17, v14);
    result = 1;
  }
  else
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v6 + 72))(v6);
    result = 0;
  }
  return result;
}

//----- (004A61A0) --------------------------------------------------------
void *__thiscall sub_4A61A0(char *this, size_t *a2, int a3)
{
  char *v3; // edi
  _DWORD *v4; // ecx
  FILE *v5; // eax
  FILE *v6; // esi
  void *v7; // edi
  FILE *v9; // eax
  FILE *v10; // esi
  int v11; // eax
  int v12; // ebx
  _DWORD *v13; // edi
  void *v14; // esi
  HRSRC v15; // eax
  HGLOBAL v16; // eax
  _DWORD *v17; // eax
  int v18; // [esp+8h] [ebp-4h]

  v3 = this;
  v4 = (_DWORD *)*((_DWORD *)this + 38);
  if ( v4 )
  {
    v5 = sub_4B88C0(v4, v3 + 84, (int)&v18);
    v6 = v5;
    if ( v5 )
    {
      v7 = sub_4A5B70(v5, a2, a3, 0);
      free(v6);
      return v7;
    }
  }
  else
  {
    if ( v3[84] )
    {
      if ( !_access(v3 + 84, 0) )
      {
        v9 = fopen(v3 + 84, "rb");
        v10 = v9;
        if ( v9 )
        {
          v11 = _fileno(v9);
          v12 = _filelength(v11);
          v13 = malloc(v12);
          fread(v13, 1u, v12, v10);
          fclose(v10);
          v14 = sub_4A5B70(v13, a2, a3, 0);
          free(v13);
          return v14;
        }
      }
    }
    v15 = FindResourceA(*((HMODULE *)v3 + 17), (LPCSTR)*((unsigned __int16 *)v3 + 32), "WAVE");
    if ( v15 )
    {
      v16 = LoadResource(*((HMODULE *)v3 + 17), v15);
      if ( v16 )
      {
        v17 = LockResource(v16);
        if ( v17 )
          return sub_4A5B70(v17, a2, a3, 0);
      }
    }
  }
  return 0;
}

//----- (004A62C0) --------------------------------------------------------
int __thiscall sub_4A62C0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  _DWORD *v4; // esi
  bool v5; // zf
  int v6; // ebx
  _DWORD *v7; // edi
  float v8; // ST0C_4
  float v9; // ST0C_4

  result = a2;
  v4 = this;
  this[58] = a2;
  if ( a2 <= a3 )
    result = a3;
  v5 = this[57] == 0;
  this[59] = result;
  if ( !v5 )
  {
    v6 = 0;
    if ( this[18] > 0 )
    {
      v7 = this + 41;
      do
      {
        if ( *v7 )
        {
          v8 = (double)(signed int)v4[58];
          (*(void (__stdcall **)(_DWORD, _DWORD, signed int))(*(_DWORD *)*v7 + 68))(*v7, LODWORD(v8), 1);
          v9 = (double)(signed int)v4[59];
          result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int))(*(_DWORD *)*v7 + 64))(*v7, LODWORD(v9), 1);
        }
        ++v6;
        ++v7;
      }
      while ( v6 < v4[18] );
    }
  }
  return result;
}

//----- (004A6340) --------------------------------------------------------
unsigned int __thiscall sub_4A6340(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  unsigned int result; // eax
  char v4; // [esp+4h] [ebp-4h]

  v2 = this;
  if ( a2 == -1
    || !this[40]
    || (*(int (__stdcall **)(_DWORD, int *, char *))(*(_DWORD *)this[a2] + 16))(this[a2], &a2, &v4) )
  {
    result = -1;
  }
  else
  {
    result = (unsigned int)(a2 * v2[39]) / v2[40];
  }
  return result;
}

//----- (004A6390) --------------------------------------------------------
int __thiscall sub_4A6390(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int v3; // esi
  int result; // eax

  v2 = this;
  if ( a2 == -1 )
  {
    v3 = 0;
    if ( this[18] <= 0 )
    {
LABEL_5:
      result = 0;
    }
    else
    {
      while ( 1 )
      {
        (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)v2[v3] + 36))(v2[v3], &a2);
        if ( a2 & 1 )
          break;
        if ( ++v3 >= v2[18] )
          goto LABEL_5;
      }
      result = 1;
    }
  }
  else
  {
    (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)this[a2] + 36))(this[a2], &a2);
    result = a2 & 1;
  }
  return result;
}

//----- (004A6420) --------------------------------------------------------
_DWORD *__thiscall sub_4A6420(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  _DWORD *v8; // edi
  _DWORD *v9; // ebp
  int v10; // eax
  signed int v11; // ecx
  int v12; // edi
  bool v13; // zf
  int v14; // ecx
  unsigned __int16 v15; // dx
  int v16; // edi
  LARGE_INTEGER PerformanceCount; // [esp+50h] [ebp-30h]
  __int16 v19; // [esp+58h] [ebp-28h]
  unsigned __int16 v20; // [esp+5Ah] [ebp-26h]
  int v21; // [esp+5Ch] [ebp-24h]
  int v22; // [esp+60h] [ebp-20h]
  unsigned __int16 v23; // [esp+64h] [ebp-1Ch]
  unsigned __int16 v24; // [esp+66h] [ebp-1Ah]
  __int16 v25; // [esp+68h] [ebp-18h]
  int v26; // [esp+6Ch] [ebp-14h]
  int v27; // [esp+70h] [ebp-10h]
  int v28; // [esp+74h] [ebp-Ch]
  int v29; // [esp+78h] [ebp-8h]
  int v30; // [esp+7Ch] [ebp-4h]
  int v31; // [esp+94h] [ebp+14h]

  v7 = this;
  v8 = this + 3;
  this[3] = 0;
  this[53] = 0;
  this[56] = 0;
  this[55] = a6;
  memset(this + 4, 0, 0xA0u);
  *v7 = a3;
  v9 = v7 + 44;
  v7[1] = a4;
  v7[2] = a5;
  v7[58] = 0;
  v7[59] = a7;
  v7[45] = 0;
  v7[46] = 0;
  v7[47] = 0;
  v7[48] = 0;
  v7[49] = 0;
  v7[50] = 0;
  v7[44] = 0;
  v7[51] = 1;
  v7[52] = 1000000;
  v31 = sub_401D39(a5, a7);
  while ( 1 )
  {
    if ( Frequency.QuadPart )
    {
      QueryPerformanceCounter(&PerformanceCount);
      v10 = 100 * PerformanceCount.QuadPart / Frequency.QuadPart & 0x7FFFFFFF;
    }
    else
    {
      v10 = GetTickCount() / 0xA;
    }
    if ( abs(v10 - v31) >= 155 || *v8 )
      break;
    if ( DirectSoundCreate(0, (LPDIRECTSOUND *)v7 + 3, 0) )
    {
LABEL_13:
      if ( !*v8 )
        Sleep(0xFAu);
    }
    else
    {
      if ( v7[1] != 8 || (v11 = 1, *v7 != 22050) )
        v11 = 3;
      if ( !(*(int (__stdcall **)(_DWORD, int, signed int))(*(_DWORD *)*v8 + 24))(*v8, a2, v11) )
      {
        v7[53] = 1;
        goto LABEL_13;
      }
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v8 + 8))(*v8);
      *v8 = 0;
      Sleep(0xFAu);
    }
  }
  v12 = *v8;
  if ( v12 )
  {
    v13 = v7[55] == 0;
    v26 = 20;
    v27 = 129;
    if ( !v13 )
      v27 = 145;
    v28 = 0;
    v29 = 0;
    v30 = 0;
    (*(void (__stdcall **)(int, int *, _DWORD *, _DWORD))(*(_DWORD *)v12 + 12))(v12, &v26, v7 + 56, 0);
    v14 = v7[56];
    if ( v14 )
    {
      v15 = *((_WORD *)v7 + 4);
      v24 = *((_WORD *)v7 + 2);
      v16 = *v7;
      v20 = v15;
      v23 = v15 * v24 / 8;
      v22 = v16 * v23;
      v19 = 1;
      v21 = v16;
      v25 = 0;
      (*(void (__stdcall **)(int, __int16 *))(*(_DWORD *)v14 + 56))(v14, &v19);
      (**(void (__stdcall ***)(_DWORD, void *, int))v7[56])(v7[56], &unk_517FC4, (int)(v7 + 44));
      if ( *v9 )
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*v9 + 52))(
          *v9,
          0.0,
          -1.0,
          0.0,
          0.0,
          0.0,
          1.0,
          0);
      v7[57] = sub_4A59B0(v7);
    }
  }
  v7[54] = v7[53];
  return v7;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A66D0) --------------------------------------------------------
int __thiscall sub_4A66D0(_DWORD *this, signed int a2)
{
  int result; // eax
  int v3; // ecx

  result = a2;
  if ( a2 > -8000 )
  {
    if ( this[53] )
      this[54] = 1;
  }
  else if ( this[53] )
  {
    this[54] = 0;
  }
  if ( this[59] )
  {
    this[58] = a2;
  }
  else
  {
    this[58] = 0;
    v3 = this[56];
    if ( v3 )
      result = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v3 + 60))(v3, a2);
  }
  return result;
}

//----- (004A6740) --------------------------------------------------------
signed int __thiscall sub_4A6740(_DWORD *this, signed int a2, signed int a3, signed int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  signed int result; // eax
  float v9; // ST1C_4
  float v10; // ST18_4
  float v11; // ST14_4
  float v12; // ST1C_4
  float v13; // ST18_4
  float v14; // ST14_4
  int *v15; // esi
  signed int v16; // edi
  _DWORD *v17; // ecx

  v7 = this;
  this[45] = a2;
  this[48] = a5;
  result = this[44];
  this[46] = a3;
  this[47] = a4;
  this[49] = a6;
  this[50] = a7;
  if ( result )
  {
    v9 = (double)a4;
    v10 = (double)a3;
    v11 = (double)a2;
    (*(void (__stdcall **)(signed int, _DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)result + 56))(
      result,
      LODWORD(v11),
      LODWORD(v10),
      LODWORD(v9),
      1);
    v12 = (double)(signed int)v7[50];
    v13 = (double)(signed int)v7[49];
    v14 = (double)(signed int)v7[48];
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v7[44] + 64))(
      v7[44],
      LODWORD(v14),
      LODWORD(v13),
      LODWORD(v12),
      1);
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v7[44] + 68))(v7[44]);
  }
  if ( !v7[55] )
  {
    v15 = v7 + 7;
    v16 = 8;
    do
    {
      v17 = (_DWORD *)*(v15 - 3);
      if ( v17 )
      {
        result = sub_4A5FF0(v17, *(v15 - 2), *(v15 - 1), *v15, v15[1]);
        if ( !result )
          *(v15 - 3) = 0;
      }
      v15 += 5;
      --v16;
    }
    while ( v16 );
  }
  return result;
}

//----- (004A6970) --------------------------------------------------------
void __thiscall sub_4A6970(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // edi
  int *v4; // ebp
  char *v5; // ebx
  unsigned int v6; // ecx
  bool v7; // zf
  int v8; // edx
  int v9; // ecx
  int v10; // ecx
  signed int v11; // edi
  int v12; // ebx
  size_t v13; // ecx
  void (__stdcall ***v14)(_DWORD, void *, _DWORD *); // ecx
  _DWORD *v15; // ST28_4
  size_t Size; // [esp+3Ch] [ebp-3Ch]
  char *v17; // [esp+40h] [ebp-38h]
  size_t v18; // [esp+44h] [ebp-34h]
  void *v19; // [esp+48h] [ebp-30h]
  void *Dst; // [esp+4Ch] [ebp-2Ch]
  char v21; // [esp+50h] [ebp-28h]
  unsigned int v22; // [esp+58h] [ebp-20h]
  int v23; // [esp+64h] [ebp-14h]
  int v24; // [esp+68h] [ebp-10h]
  int v25; // [esp+6Ch] [ebp-Ch]
  int v26; // [esp+70h] [ebp-8h]
  char *v27; // [esp+74h] [ebp-4h]

  v1 = this;
  v2 = this[37];
  v3 = 0;
  if ( v2 && *(_DWORD *)(v2 + 212) && this[18] )
  {
    v4 = this + 40;
    v5 = (char *)sub_4A61A0((char *)this, this + 40, (int)&v21);
    v17 = v5;
    if ( v5 )
    {
      v6 = v22;
      v7 = v22 == 0;
      v1[39] = 0;
      if ( !v7 )
        v1[39] = 100 * *v4 / v6;
      if ( !*v1 )
      {
        v8 = *v4;
        v9 = v1[57] != 0 ? 0xFFFFFF30 : 0;
        v23 = 0;
        v25 = 0;
        v26 = 0;
        v27 = 0;
        v24 = v9 + 226;
        v10 = v1[37];
        v25 = v8;
        v23 = 20;
        v26 = 0;
        v27 = &v21;
        if ( (*(int (__stdcall **)(_DWORD, int *, _DWORD *, _DWORD))(**(_DWORD **)(v10 + 12) + 12))(
               *(_DWORD *)(v10 + 12),
               &v23,
               v1,
               0) >= 0 )
        {
          v11 = 1;
          if ( v1[18] > 1 )
          {
            v12 = (int)(v1 + 1);
            while ( !(*(int (__stdcall **)(_DWORD, _DWORD, int))(**(_DWORD **)(v1[37] + 12) + 20))(
                       *(_DWORD *)(v1[37] + 12),
                       *v1,
                       v12) )
            {
              ++v11;
              v12 += 4;
              if ( v11 >= v1[18] )
                goto LABEL_17;
            }
            v1[v11] = 0;
LABEL_17:
            v5 = v17;
          }
          v1[18] = v11;
          v3 = 0;
        }
        else
        {
          v1[18] = 0;
        }
      }
      if ( v1[18] )
      {
        if ( !(*(int (__stdcall **)(_DWORD, _DWORD, int, void **, size_t *, void **, size_t *, _DWORD))(*(_DWORD *)*v1 + 44))(
                *v1,
                0,
                *v4,
                &Dst,
                &Size,
                &v19,
                &v18,
                0) )
        {
          memcpy(Dst, v5, Size);
          v13 = v18;
          if ( v18 )
          {
            memcpy(v19, &v5[Size], v18);
            v13 = v18;
          }
          (*(void (__stdcall **)(_DWORD, void *, size_t, void *, size_t))(*(_DWORD *)*v1 + 76))(
            *v1,
            Dst,
            Size,
            v19,
            v13);
        }
        free(v5);
        if ( v1[57] && v1[18] > 0 )
        {
          do
          {
            v14 = (void (__stdcall ***)(_DWORD, void *, _DWORD *))v1[v3];
            v15 = &v1[v3 + 41];
            *v15 = 0;
            (**v14)(v14, &unk_517FD4, v15);
            ++v3;
          }
          while ( v3 < v1[18] );
        }
        sub_4A62C0(v1, v1[58], v1[59]);
      }
      else
      {
        free(v5);
      }
    }
    else
    {
      v1[18] = 0;
    }
  }
}

//----- (004A6B90) --------------------------------------------------------
int __thiscall sub_4A6B90(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // esi

  v1 = this;
  result = this[44];
  if ( result )
    result = (*(int (__stdcall **)(int))(*(_DWORD *)result + 8))(result);
  if ( v1[56] )
  {
    sub_4A66D0(v1, v1[57]);
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v1[56] + 8))(v1[56]);
    v1[56] = 0;
  }
  v3 = v1[3];
  if ( v3 )
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v3 + 8))(v3);
  return result;
}

//----- (004A6BF0) --------------------------------------------------------
int __thiscall sub_4A6BF0(_DWORD *this, signed int a2)
{
  int result; // eax

  if ( a2 )
    result = sub_4A66D0(this, (signed int)(log((double)a2 / 100.0) * 1000.0));
  else
    result = sub_4A66D0(this, -10000);
  return result;
}

//----- (004A6C30) --------------------------------------------------------
_DWORD *__thiscall sub_4A6C30(void *Dst, int a2, int a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // esi
  int v8; // edx
  int v9; // eax
  char *v10; // eax
  char v11; // cl

  v7 = Dst;
  *((_DWORD *)Dst + 57) = a7;
  *((_DWORD *)Dst + 38) = 0;
  *((_DWORD *)Dst + 37) = a2;
  if ( a2 && !*(_DWORD *)(a2 + 176) )
    *((_DWORD *)Dst + 57) = 0;
  *((_DWORD *)Dst + 18) = 0;
  if ( a2 && *(_DWORD *)(a2 + 212) )
  {
    *((_DWORD *)Dst + 58) = *(_DWORD *)(a2 + 204);
    v8 = *(_DWORD *)(a2 + 208);
    *((_DWORD *)Dst + 17) = a3;
    v9 = a5;
    *((_DWORD *)Dst + 59) = v8;
    *((_DWORD *)Dst + 16) = a4;
    if ( a5 <= 1 )
    {
      v9 = 1;
    }
    else if ( a5 >= 16 )
    {
      v9 = 16;
    }
    *((_DWORD *)Dst + 18) = v9;
    *((_DWORD *)Dst + 19) = 0;
    memset(Dst, 0, 0x40u);
    memset(v7 + 41, 0, 0x40u);
    v10 = (char *)a6;
    *((_BYTE *)v7 + 84) = 0;
    if ( a6 )
    {
      do
      {
        v11 = *v10;
        v10[(_DWORD)((char *)v7 - a6 + 84)] = *v10;
        ++v10;
      }
      while ( v11 );
    }
    sub_4A6970(v7);
    if ( *v7 )
      (*(void (__stdcall **)(_DWORD, _DWORD *))(*(_DWORD *)*v7 + 32))(*v7, v7 + 20);
  }
  return v7;
}

//----- (004A6D20) --------------------------------------------------------
_DWORD *__thiscall sub_4A6D20(void *Dst, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  char *v7; // eax
  char *v8; // edx
  char v9; // cl
  int v10; // eax

  v6 = Dst;
  *((_DWORD *)Dst + 38) = a3;
  v7 = (char *)a4;
  v8 = (char *)Dst - a4 + 84;
  do
  {
    v9 = *v7;
    v7[(_DWORD)v8] = *v7;
    ++v7;
  }
  while ( v9 );
  v6[57] = a6;
  v6[37] = a2;
  v6[17] = 0;
  v6[16] = 0;
  if ( a2 && !*(_DWORD *)(a2 + 176) )
    v6[57] = 0;
  v6[18] = 0;
  if ( a2 && *(_DWORD *)(a2 + 212) )
  {
    v6[58] = *(_DWORD *)(a2 + 204);
    v10 = a5;
    v6[59] = *(_DWORD *)(a2 + 208);
    if ( a5 <= 1 )
    {
      v10 = 1;
    }
    else if ( a5 >= 16 )
    {
      v10 = 16;
    }
    v6[18] = v10;
    v6[19] = 0;
    memset(v6, 0, 0x40u);
    memset(v6 + 41, 0, 0x40u);
    sub_4A6970(v6);
    if ( *v6 )
      (*(void (__stdcall **)(_DWORD, _DWORD *))(*(_DWORD *)*v6 + 32))(*v6, v6 + 20);
  }
  return v6;
}

//----- (004A6E00) --------------------------------------------------------
signed int __thiscall sub_4A6E00(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  signed int result; // eax
  int v4; // edi
  char v5; // [esp+8h] [ebp-4h]

  v1 = this;
  v2 = this[37];
  if ( !v2 || !*(_DWORD *)(v2 + 212) || !this[18] || !*(_DWORD *)(v2 + 216) )
    return -1;
  v4 = this[this[19]];
  if ( (*(int (__stdcall **)(_DWORD, char *))(*(_DWORD *)v4 + 36))(this[this[19]], &v5) || v5 & 1 && v5 & 4 )
    return -1;
  if ( v5 & 2 )
  {
    if ( v1[16] != -1 )
    {
      (*(void (__stdcall **)(int))(*(_DWORD *)v4 + 80))(v4);
      sub_4A6970(v1);
    }
  }
  result = v1[19];
  v1[19] = (v1[19] + 1) % v1[18];
  return result;
}

//----- (004A6E90) --------------------------------------------------------
signed int __thiscall sub_4A6E90(int *this, int a2, int a3, int a4, signed int a5, signed int a6, signed int a7, int a8)
{
  int *v8; // edi
  int v9; // eax
  signed int v11; // ebx
  int v12; // eax
  int v13; // ebp
  int v14; // esi
  int v15; // ecx
  int v16; // eax
  int v17; // esi
  signed int v18; // ebx
  int v19; // eax
  int v20; // eax
  float v21; // ST3C_4
  float v22; // ST38_4
  float v23; // ST34_4
  float v24; // ST3C_4
  float v25; // ST38_4
  float v26; // ST34_4
  int v27; // [esp+54h] [ebp-Ch]
  int v28; // [esp+58h] [ebp-8h]
  int v29; // [esp+5Ch] [ebp-4h]
  int v30; // [esp+74h] [ebp+14h]
  signed int v31; // [esp+78h] [ebp+18h]

  v8 = this;
  v9 = this[37];
  if ( !v9 || !*(_DWORD *)(v9 + 212) )
    return -1;
  v11 = sub_4A6E00(this);
  v27 = v11;
  if ( v11 >= 0 )
  {
    v12 = v8[37];
    v13 = a3 - *(_DWORD *)(v12 + 184);
    v14 = a2 - *(_DWORD *)(v12 + 180);
    v15 = abs(a3 - *(_DWORD *)(v12 + 184));
    v16 = abs(a2 - *(_DWORD *)(v12 + 180));
    v29 = v14;
    if ( v16 <= v15 )
    {
      v28 = v15;
      v16 = v15;
    }
    else
    {
      v28 = v16;
    }
    if ( v16 > v8[59] )
      return -1;
    v17 = v8[v11];
    v18 = v8[v11 + 41];
    if ( v18 )
    {
      (*(void (__stdcall **)(int, _DWORD))(*(_DWORD *)v17 + 60))(v17, *(_DWORD *)(v8[37] + 232));
      v21 = (double)a4;
      v22 = (double)a3;
      v23 = (double)a2;
      (*(void (__stdcall **)(signed int, _DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v18 + 76))(
        v18,
        LODWORD(v23),
        LODWORD(v22),
        LODWORD(v21),
        1);
      v24 = (double)a7;
      v25 = (double)a6;
      v26 = (double)a5;
      (*(void (__stdcall **)(signed int, _DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v18 + 80))(
        v18,
        LODWORD(v26),
        LODWORD(v25),
        LODWORD(v24),
        1);
      (*(void (__stdcall **)(signed int, signed int, _DWORD))(*(_DWORD *)v18 + 72))(v18, v28 >= v8[58] ? 0 : 2, 0);
      (*(void (__stdcall **)(int, _DWORD))(*(_DWORD *)v17 + 52))(v17, 0);
      (*(void (__stdcall **)(int, _DWORD, _DWORD, bool))(*(_DWORD *)v17 + 48))(v17, 0, 0, a8 != 0);
    }
    else
    {
      v31 = 0;
      if ( v16 > v8[58] )
      {
        v19 = v8[59] - v8[58];
        v18 = (signed int)((double)(v29 * v29 + v13 * v13) * -10000.0 / (double)(v19 * v19));
        if ( v18 <= -10000 )
          v18 = -10000;
        v31 = 10000;
        v30 = v29 * v29;
        if ( ((signed int)((double)v30 * 10000.0 / 10000.0) < 0 ? 0 : (unsigned int)(signed int)((double)v30
                                                                                               * 10000.0
                                                                                               / 10000.0)) <= 10000 )
          v31 = (signed int)((double)v30 * 10000.0 / 10000.0) < 0 ? 0 : (signed int)((double)v30 * 10000.0 / 10000.0);
        if ( v29 < 0 )
          v31 = -v31;
      }
      v20 = *(_DWORD *)(v8[37] + 232) + v18;
      if ( v20 <= -10000 )
        v20 = -10000;
      (*(void (__stdcall **)(int, int))(*(_DWORD *)v17 + 60))(v17, v20);
      (*(void (__stdcall **)(int, signed int))(*(_DWORD *)v17 + 64))(v17, v31);
      (*(void (__stdcall **)(int, _DWORD))(*(_DWORD *)v17 + 52))(v17, 0);
      (*(void (__stdcall **)(int, _DWORD, _DWORD, bool))(*(_DWORD *)v17 + 48))(v17, 0, 0, a8 != 0);
      if ( v8[39] >= 300 || a8 )
      {
        sub_4A59F0(v8[37], v27, (int)v8, v27, a2, a3, a4);
        return v27;
      }
    }
    v11 = v27;
  }
  return v11;
}

//----- (004A7120) --------------------------------------------------------
signed int __thiscall sub_4A7120(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // edi
  signed int result; // eax
  signed int v7; // ebx
  int v8; // eax
  int v9; // esi
  int v10; // eax

  v5 = this;
  result = sub_4A6E00(this);
  v7 = result;
  if ( result >= 0 )
  {
    v8 = v5[result + 41];
    v9 = v5[v7];
    if ( v8 )
      (*(void (__stdcall **)(int, signed int, _DWORD))(*(_DWORD *)v8 + 72))(v8, 2, 0);
    v10 = *(_DWORD *)(v5[37] + 232) + a2;
    if ( v10 <= -10000 )
      v10 = -10000;
    (*(void (__stdcall **)(int, int))(*(_DWORD *)v9 + 60))(v9, v10);
    (*(void (__stdcall **)(int, int))(*(_DWORD *)v9 + 64))(v9, a3);
    (*(void (__stdcall **)(int, _DWORD))(*(_DWORD *)v9 + 52))(v9, 0);
    (*(void (__stdcall **)(int, int))(*(_DWORD *)v9 + 68))(v9, v5[20] + a5 * v5[20] / 10000);
    (*(void (__stdcall **)(int, _DWORD, _DWORD, bool))(*(_DWORD *)v9 + 48))(v9, 0, 0, a4 != 0);
    result = v7;
  }
  return result;
}

//----- (004A71E0) --------------------------------------------------------
void __thiscall sub_4A71E0(_DWORD *this)
{
  *this = &off_511668;
}
// 511668: using guessed type int (__thiscall *off_511668)(void *Memory, char);

//----- (004A7210) --------------------------------------------------------
bool __thiscall sub_4A7210(_DWORD *this, int a2)
{
  int v2; // edx

  this[11] += a2;
  v2 = this[11];
  this[4] += a2 * this[6];
  this[5] += a2 * this[7];
  return v2 >= this[10];
}

//----- (004A7240) --------------------------------------------------------
int __thiscall sub_4A7240(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // esi
  int result; // eax
  int v6; // edi
  int v7; // ST1C_4
  int v8; // ST18_4
  int v9; // ST14_4
  int v10; // eax

  v4 = this[4] / 10000 - a3;
  result = this[5] / 10000 - a4;
  if ( v4 >= -64 && v4 <= *(_DWORD *)(a2 + 4) && result >= -64 && result <= *(_DWORD *)(a2 + 8) )
  {
    v6 = this[3];
    v7 = this[13];
    v8 = this[12];
    v9 = this[5] / 10000 - a4;
    v10 = sub_401B59(this[8], this[11], this[9]);
    result = sub_4A50B0(v6, v10, a2, v4, v9, v8, v7, 0, 0, 0);
  }
  return result;
}
// 401B59: using guessed type _DWORD __stdcall sub_401B59(_DWORD, _DWORD, _DWORD);

//----- (004A72E0) --------------------------------------------------------
int __thiscall sub_4A72E0(int *this)
{
  int v1; // ecx
  int v2; // esi
  int result; // eax

  v1 = *this;
  if ( v1 )
  {
    do
    {
      v2 = *(_DWORD *)(v1 + 4);
      result = (**(int (__stdcall ***)(signed int))v1)(1);
      v1 = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004A7300) --------------------------------------------------------
int __thiscall sub_4A7300(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a2 + 4) = *this;
  *(_DWORD *)(a2 + 8) = 0;
  *this = a2;
  return result;
}

//----- (004A7320) --------------------------------------------------------
void __thiscall sub_4A7320(int *this, int a2)
{
  int *v2; // ebx
  _DWORD *v3; // esi
  signed int v4; // edi
  int v5; // ecx
  int *i; // esi

  v2 = this;
  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      if ( (*(int (__thiscall **)(_DWORD *, int))(*v3 + 4))(v3, a2) )
      {
        v4 = 1;
        v3[2] = 1;
      }
      v3 = (_DWORD *)v3[1];
    }
    while ( v3 );
    if ( v4 )
    {
      v5 = *v2;
      for ( i = v2; *i; v5 = *i )
      {
        if ( *(_DWORD *)(v5 + 8) )
        {
          *i = *(_DWORD *)(v5 + 4);
          (**(void (__stdcall ***)(signed int))v5)(1);
        }
        else
        {
          i = (int *)(v5 + 4);
        }
      }
    }
  }
}

//----- (004A7390) --------------------------------------------------------
int __thiscall sub_4A7390(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v4; // esi
  int result; // eax

  v4 = (_DWORD *)*this;
  if ( *this )
  {
    do
    {
      result = (*(int (__thiscall **)(_DWORD *, int, int, int))(*v4 + 8))(v4, a2, a3, a4);
      v4 = (_DWORD *)v4[1];
    }
    while ( v4 );
  }
  return result;
}

//----- (004A73C0) --------------------------------------------------------
int __thiscall sub_4A73C0(_DWORD *this)
{
  _DWORD *v1; // esi
  int result; // eax

  v1 = (_DWORD *)*this;
  if ( *this )
  {
    do
    {
      result = (*(int (__thiscall **)(_DWORD *))(*v1 + 12))(v1);
      v1 = (_DWORD *)v1[1];
    }
    while ( v1 );
  }
  return result;
}

//----- (004A73E0) --------------------------------------------------------
int __thiscall sub_4A73E0(int *this)
{
  int *v1; // esi
  int v2; // ecx
  int result; // eax

  v1 = this;
  v2 = *this;
  if ( v2 )
  {
    do
    {
      *v1 = *(_DWORD *)(v2 + 4);
      result = (**(int (__stdcall ***)(signed int))v2)(1);
      v2 = *v1;
    }
    while ( *v1 );
  }
  return result;
}

//----- (004A7410) --------------------------------------------------------
_DWORD *__thiscall sub_4A7410(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  _DWORD *result; // eax

  result = this;
  this[3] = a2;
  this[4] = a3;
  this[5] = a4;
  this[6] = a5;
  this[7] = a6;
  this[8] = a7;
  this[9] = a8;
  this[10] = a9;
  *this = &SimpleAnimateObject::`vftable';
  this[11] = 0;
  this[12] = a10 | 0x100;
  this[13] = a11;
  return result;
}
// 51DC20: using guessed type void *SimpleAnimateObject::`vftable';

//----- (004A7470) --------------------------------------------------------
void *__thiscall sub_4A7470(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &off_511668;
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 511668: using guessed type int (__thiscall *off_511668)(void *Memory, char);

//----- (004A74A0) --------------------------------------------------------
int sub_4A74A0()
{
  struct WSAData WSAData; // [esp+0h] [ebp-194h]

  return WSAStartup(0x101u, &WSAData);
}

//----- (004A7520) --------------------------------------------------------
int __thiscall sub_4A7520(_DWORD *this)
{
  int v1; // edx
  int v2; // eax
  int v3; // esi
  _DWORD *v4; // ecx

  v1 = this[10];
  v2 = 0;
  if ( v1 <= 0 )
    return 0;
  v3 = this[11];
  v4 = (_DWORD *)(v3 + 12);
  while ( *v4 )
  {
    ++v2;
    v4 += 269;
    if ( v2 >= v1 )
      return 0;
  }
  return v3 + 1076 * v2;
}

//----- (004A7590) --------------------------------------------------------
int __thiscall sub_4A7590(_DWORD *this, int *a2, _DWORD *a3, _WORD *a4)
{
  _DWORD *v4; // esi
  int v5; // edi
  char *v6; // ST04_4
  SOCKET v7; // ST00_4
  int v8; // edx
  int v9; // ecx
  int v10; // ebx
  int v11; // eax
  int v12; // eax
  int fromlen; // [esp+18h] [ebp-18h]
  struct sockaddr from; // [esp+1Ch] [ebp-14h]

  v4 = this;
  v5 = 540 * this[20];
  v6 = (char *)(v5 + this[18]);
  v7 = this[12];
  fromlen = 16;
  v10 = recvfrom(v7, v6, 512, 0, &from, &fromlen);
  if ( v10 == -1 )
    return 0;
  v4[16] = sub_401D39(v9, v8);
  *(_WORD *)(v5 + v4[18] + 538) = v10;
  v11 = *(_DWORD *)&from.sa_data[2];
  v4[20] = (v4[20] + 1) % v4[19];
  *(_DWORD *)(v5 + v4[18] + 532) = v11;
  *(_WORD *)(v5 + v4[18] + 536) = *(_WORD *)from.sa_data;
  *a3 = *(_DWORD *)&from.sa_data[2];
  *a4 = *(_WORD *)from.sa_data;
  *a2 = v10;
  v4[23] += v10;
  v12 = v4[18];
  ++v4[24];
  ++v4[7];
  return v5 + v12;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A7690) --------------------------------------------------------
int __fastcall sub_4A7690(_DWORD *a1, int a2, char *buf, int len, int a5, __int16 a6)
{
  _DWORD *v6; // esi
  SOCKET v7; // ST00_4
  int result; // eax
  struct sockaddr to; // [esp+Ch] [ebp-14h]

  v6 = a1;
  a1[17] = sub_401D39(a1, a2);
  *(_DWORD *)&to.sa_data[2] = a5;
  v7 = v6[12];
  to.sa_family = 2;
  *(_WORD *)to.sa_data = a6;
  sendto(v7, buf, len, 0, &to, 16);
  v6[21] += len;
  result = 1;
  ++v6[22];
  ++v6[6];
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A7790) --------------------------------------------------------
int __cdecl sub_4A7790(int a1, unsigned int **a2)
{
  unsigned int v2; // ecx

  v2 = **a2;
  if ( *(_DWORD *)a1 > v2 )
    return 1;
  if ( *(_DWORD *)a1 >= v2 )
    return *(unsigned __int16 *)(a1 + 4) - *((unsigned __int16 *)*a2 + 2);
  return -1;
}

//----- (004A7870) --------------------------------------------------------
int *__thiscall sub_4A7870(char *this, int *a2, int a3)
{
  int *result; // eax
  unsigned int v4; // esi
  int v5; // edx
  int v6; // edi
  int v7; // ecx

  result = a2;
  v4 = (unsigned int)&a2[(unsigned int)(a3 + 3) >> 2];
  v5 = *((_DWORD *)this + 5);
  if ( a2 != (int *)v4 )
  {
    v6 = this + 96 - (char *)a2;
    do
    {
      v7 = *result;
      *result ^= v5 ^ *(int *)((char *)result + v6);
      ++result;
      v5 = v7;
    }
    while ( result != (int *)v4 );
  }
  return result;
}

//----- (004A78B0) --------------------------------------------------------
unsigned int __thiscall sub_4A78B0(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // edx
  unsigned int result; // eax
  int v5; // esi
  int v6; // edi
  unsigned int v7; // ecx
  int v8; // edi
  int v9; // eax

  v3 = a2;
  result = (unsigned int)(a3 + 3) >> 2;
  v5 = (int)&a2[result];
  v6 = (int)(this + 24);
  v7 = this[5];
  if ( a2 != (_DWORD *)v5 )
  {
    v8 = v6 - (_DWORD)a2;
    do
    {
      v9 = *v3 ^ *(_DWORD *)((char *)v3 + v8);
      ++v3;
      result = v7 ^ v9;
      *(v3 - 1) = result;
      v7 = result;
    }
    while ( v3 != (_DWORD *)v5 );
  }
  return result;
}

//----- (004A79F0) --------------------------------------------------------
_DWORD *__thiscall sub_4A79F0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // eax
  int v7; // ecx

  v5 = this;
  this[1] = a5;
  *this = a3;
  this[6] = 0;
  this[7] = 0;
  this[5] = 0;
  this[2] = a4;
  this[3] = a2;
  memset(this + 19, 0, 0x2020u);
  memset(v5 + 2075, 0, 0x2100u);
  v6 = 16 * v5[2];
  v7 = (unsigned __int64)(unsigned int)v5[2] >> 28 != 0;
  v5[14] = 0;
  v5[15] = 0;
  v5[17] = 0;
  v5[18] = 0;
  v5[16] = 0;
  v5[4] = 0;
  v5[13] = 0;
  v5[12] = 0;
  v5[11] = 0;
  v5[8] = 0;
  v5[9] = 0;
  v5[10] = operator new(v6 | -v7);
  return v5;
}

//----- (004A7BB0) --------------------------------------------------------
int __cdecl sub_4A7BB0(int a1, struct in_addr in)
{
  char *v2; // eax
  _BYTE *v3; // edx
  char v4; // cl

  v2 = inet_ntoa(in);
  v3 = (_BYTE *)a1;
  do
  {
    v4 = *v2;
    *v3++ = *v2++;
  }
  while ( v4 );
  return a1;
}

//----- (004A7C00) --------------------------------------------------------
_DWORD *__thiscall sub_4A7C00(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, signed int a9, int a10)
{
  signed int v10; // eax
  _DWORD *v11; // esi
  void *v12; // eax
  size_t v13; // ST0C_4
  void *v14; // eax
  void *v15; // ebx
  int v16; // eax
  int v17; // ecx
  SOCKET v18; // eax
  SOCKET v19; // ST00_4
  SOCKET v20; // ST00_4
  SOCKET v21; // ST00_4
  u_short v22; // ST10_2
  char optval[4]; // [esp+14h] [ebp-2Ch]
  u_long argp; // [esp+18h] [ebp-28h]
  void *v26; // [esp+1Ch] [ebp-24h]
  struct sockaddr name; // [esp+20h] [ebp-20h]
  int v28; // [esp+3Ch] [ebp-4h]

  v10 = a9;
  v11 = this;
  if ( a9 < 1 )
    v10 = 1;
  this[19] = v10;
  this[20] = 0;
  v12 = operator new(540 * v10);
  v13 = 540 * v11[19];
  v11[18] = v12;
  memset(v12, 0, v13);
  v11[15] = a10;
  v11[1] = a2;
  v11[8] = a3;
  *v11 = a4;
  v11[9] = a6;
  v11[2] = 0;
  v11[13] = 0;
  v11[4] = 150;
  v11[5] = 1000000;
  v11[10] = a5;
  v11[3] = 500;
  v11[14] = 0;
  v11[21] = 0;
  v11[22] = 0;
  v11[23] = 0;
  v11[24] = 0;
  v11[6] = 0;
  v11[7] = 0;
  v14 = operator new(1076 * a5);
  v15 = v14;
  v26 = v14;
  v28 = 0;
  if ( v14 )
    sub_4A9730((int)v14, 1076, a5, (int (__thiscall *)(int))sub_4A77C0);
  else
    v15 = 0;
  v16 = 4 * v11[10];
  v17 = (unsigned __int64)(unsigned int)v11[10] >> 30 != 0;
  v28 = -1;
  v11[11] = v15;
  v11[26] = 0;
  v11[25] = operator new(v16 | -v17);
  v18 = socket(2, 2, 0);
  v11[12] = v18;
  argp = 1;
  ioctlsocket(v18, -2147195266, &argp);
  v19 = v11[12];
  *(_DWORD *)optval = -1;
  setsockopt(v19, 6, 1, optval, 4);
  v20 = v11[12];
  *(_DWORD *)optval = a7;
  setsockopt(v20, 0xFFFF, 4097, optval, 4);
  v21 = v11[12];
  *(_DWORD *)optval = a8;
  setsockopt(v21, 0xFFFF, 4098, optval, 4);
  v22 = *((_WORD *)v11 + 18);
  name.sa_family = 2;
  *(_WORD *)name.sa_data = htons(v22);
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  bind(v11[12], &name, 16);
  return v11;
}
// 4A77C0: using guessed type int sub_4A77C0();

//----- (004A7F20) --------------------------------------------------------
void *__thiscall sub_4A7F20(unsigned int *this, int a2)
{
  int v2; // ebx
  unsigned int *v3; // esi
  void *result; // eax
  int v5; // edi
  __int16 v6; // dx
  int v7; // eax
  unsigned int v8; // ecx
  int v9; // [esp+Ch] [ebp-8h]
  __int16 v10; // [esp+10h] [ebp-4h]

  v2 = a2;
  v3 = this;
  result = (void *)this[26];
  v5 = 0;
  if ( result )
  {
    v6 = *(_WORD *)(a2 + 4);
    v9 = *(_DWORD *)a2;
    v10 = v6;
    v7 = sub_48CDA0((int)&v9, this[25], (int)result, 4, (int (__cdecl *)(int, unsigned int))sub_4A7790, &a2);
    v8 = v3[25];
    v5 = (signed int)(v7 - v8) >> 2;
    result = memcpy_0((void *)(v8 + 4 * v5 + 4), (const void *)(v8 + 4 * v5), 4 * (v3[26] - v5));
  }
  *(_DWORD *)(v3[25] + 4 * v5) = v2;
  ++v3[26];
  return result;
}

//----- (004A7FA0) --------------------------------------------------------
void *__thiscall sub_4A7FA0(_DWORD *this, int a2)
{
  __int16 v2; // dx
  _DWORD *v3; // esi
  int v4; // ecx
  void *result; // eax
  int v6; // [esp+4h] [ebp-8h]
  __int16 v7; // [esp+8h] [ebp-4h]

  v2 = *(_WORD *)(a2 + 4);
  v3 = this;
  v6 = *(_DWORD *)a2;
  v4 = this[26];
  v7 = v2;
  result = (void *)sub_48CDA0((int)&v6, v3[25], v4, 4, (int (__cdecl *)(int, unsigned int))sub_4A7790, &a2);
  if ( a2 )
    result = memcpy_0(
               (void *)(v3[25] + 4 * ((_DWORD)((_DWORD)result - v3[25]) >> 2)),
               (const void *)(v3[25] + 4 * ((_DWORD)((_DWORD)result - v3[25]) >> 2) + 4),
               4 * (--v3[26] - ((_DWORD)((_DWORD)result - v3[25]) >> 2)));
  return result;
}

//----- (004A8060) --------------------------------------------------------
int __thiscall sub_4A8060(_DWORD *this)
{
  int v1; // esi
  _WORD *v2; // ecx
  signed int v3; // edi
  unsigned int v4; // edx
  int result; // eax

  v1 = this[5];
  v2 = this + 24;
  v3 = 260;
  do
  {
    v4 = (signed int)(v1 + ((unsigned __int64)(-2092037281i64 * v1) >> 32)) >> 16;
    result = 0x7FFFFFFF * (v4 + (v4 >> 31));
    v1 = 16807 * v1 - result + 123;
    if ( v1 <= 0 )
      v1 += 0x7FFFFFFF;
    *v2 = v1;
    ++v2;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (004A80B0) --------------------------------------------------------
void __fastcall sub_4A80B0(int a1, int a2, void *Src, size_t Size)
{
  int v4; // esi
  char *v5; // edi
  char v6; // bl
  char v7; // al
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  __int64 v11; // rax
  signed int v12; // ecx
  int v13; // eax
  __int64 v14; // rax
  char Dst; // [esp+8h] [ebp-404h]
  char v16; // [esp+9h] [ebp-403h]
  char v17; // [esp+Ah] [ebp-402h]

  v4 = a1;
  v5 = (char *)Src;
  if ( *(_DWORD *)(a1 + 12) != 3 )
  {
    if ( *(_DWORD *)(a1 + 20) > 0 )
    {
      v6 = *(_BYTE *)Src;
      if ( *(_BYTE *)Src || (v7 = *((_BYTE *)Src + 1), v7 != 1) && v7 != 2 )
      {
        memcpy(&Dst, Src, Size);
        if ( v6 )
          sub_4A78B0((_DWORD *)v4, &v16, Size - 1);
        else
          sub_4A78B0((_DWORD *)v4, &v17, Size - 2);
        v5 = &Dst;
      }
    }
    v8 = sub_401D39(a1, a2);
    ++*(_DWORD *)(v4 + 616);
    *(_DWORD *)(v4 + 672) += Size;
    *(_DWORD *)(v4 + 76) = v8;
    v11 = *(_DWORD *)(v4 + 680) - sub_401D39(v10, v9);
    v12 = (HIDWORD(v11) ^ v11) - HIDWORD(v11);
    if ( v12 >= 100 )
    {
      v13 = *(_DWORD *)(v4 + 672) - *(_DWORD *)(v4 + 676);
      *(_DWORD *)(v4 + 676) = *(_DWORD *)(v4 + 672);
      v14 = 100 * v13;
      *(_DWORD *)(v4 + 668) = v14 / v12;
      *(_DWORD *)(v4 + 680) = sub_401D39(v12, v14 % v12);
    }
    sub_4A7690(*(_DWORD **)(v4 + 32), SHIDWORD(v11), v5, Size, *(_DWORD *)v4, *(_WORD *)(v4 + 4));
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A81C0) --------------------------------------------------------
void __fastcall sub_4A81C0(int a1, int a2, signed int a3)
{
  int v3; // esi
  signed int v4; // edi
  __int64 v5; // rax

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 1068) - a1 - 684;
  if ( v4 > 2 )
  {
    v5 = sub_401D39(a1, a2) - *(_DWORD *)(a1 + 84);
    if ( (signed int)((HIDWORD(v5) ^ v5) - HIDWORD(v5)) >= a3 )
    {
      if ( *(unsigned __int8 *)(v3 + 686) + 3 == v4 )
      {
        sub_4A80B0(v3, SHIDWORD(v5), (void *)(v3 + 687), v4 - 3);
      }
      else
      {
        sub_4A80B0(v3, v3 + 684, (void *)(v3 + 684), v4);
        *(_DWORD *)(*(_DWORD *)(v3 + 32) + 24) += *(_DWORD *)(v3 + 1072) - 1;
      }
      *(_DWORD *)(v3 + 1068) = v3 + 684;
      *(_DWORD *)(v3 + 1072) = 0;
    }
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A8280) --------------------------------------------------------
void *__thiscall sub_4A8280(_DWORD *this, int a2, int a3, int a4, int a5, __int16 a6, int a7, int a8, int a9, int a10, int a11)
{
  int v11; // esi
  int v12; // ecx
  int v13; // edx
  int v14; // edx
  int v15; // ecx
  int v16; // edx
  int v17; // ecx
  int v18; // edx
  int v19; // ecx
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax

  v11 = (int)this;
  this[23] = a8;
  this[8] = a2;
  this[3] = a3;
  this[2] = a4;
  *this = a5;
  v12 = a7;
  *(_WORD *)(v11 + 4) = a6;
  v13 = a10;
  *(_DWORD *)(v11 + 20) = a9;
  *(_DWORD *)(v11 + 16) = a7;
  *(_DWORD *)(v11 + 72) = a10;
  *(_DWORD *)(v11 + 36) = 9999999;
  *(_DWORD *)(v11 + 40) = 0;
  *(_DWORD *)(v11 + 48) = 0;
  *(_DWORD *)(v11 + 44) = 0;
  *(_DWORD *)(v11 + 52) = 0;
  *(_DWORD *)(v11 + 56) = 0;
  *(_DWORD *)(v11 + 60) = 0;
  *(_DWORD *)(v11 + 64) = 0;
  *(_DWORD *)(v11 + 68) = 0;
  if ( a9 )
    sub_4A8060((_DWORD *)v11);
  *(_DWORD *)(v11 + 76) = 0;
  *(_DWORD *)(v11 + 80) = sub_401D39(v12, v13);
  *(_DWORD *)(v11 + 76) = sub_401D39(v15, v14);
  *(_DWORD *)(v11 + 84) = sub_401D39(v17, v16);
  *(_DWORD *)(v11 + 668) = 0;
  *(_DWORD *)(v11 + 672) = 0;
  *(_DWORD *)(v11 + 676) = 0;
  *(_DWORD *)(v11 + 680) = sub_401D39(v19, v18);
  *(_DWORD *)(v11 + 660) = 1000;
  *(_DWORD *)(v11 + 664) = 1000;
  *(_DWORD *)(v11 + 616) = 0;
  *(_DWORD *)(v11 + 620) = 0;
  *(_DWORD *)(v11 + 624) = 0;
  *(_DWORD *)(v11 + 628) = 0;
  *(_DWORD *)(v11 + 652) = 0;
  *(_DWORD *)(v11 + 656) = 0;
  *(_DWORD *)(v11 + 640) = 0;
  *(_DWORD *)(v11 + 644) = 0;
  *(_DWORD *)(v11 + 648) = 0;
  *(_DWORD *)(v11 + 632) = 0;
  *(_DWORD *)(v11 + 1068) = v11 + 684;
  *(_DWORD *)(v11 + 1072) = 0;
  v20 = operator new(0x4174u);
  if ( v20 )
    v21 = sub_4A79F0(v20, 0, v11, a11, 80);
  else
    v21 = 0;
  *(_DWORD *)(v11 + 24) = v21;
  v22 = operator new(0x4174u);
  if ( v22 )
    v23 = sub_4A79F0(v22, 1, v11, a11, 100);
  else
    v23 = 0;
  *(_DWORD *)(v11 + 28) = v23;
  v23[6] = 100;
  v23[7] = 100;
  return sub_4A7F20(*(unsigned int **)(v11 + 32), v11);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A8450) --------------------------------------------------------
void *__fastcall sub_4A8450(int a1, int a2)
{
  int v2; // esi
  void **v3; // edi
  void **v4; // edi
  int v5; // edx
  void *result; // eax
  char Src; // [esp+Ch] [ebp-8h]
  char v8; // [esp+Dh] [ebp-7h]
  int v9; // [esp+10h] [ebp-4h]

  v2 = a1;
  v3 = *(void ***)(a1 + 24);
  if ( v3 )
  {
    j_j__free(v3[10]);
    if ( v3[13] )
    {
      j__free(v3[13]);
      v3[13] = 0;
    }
    j__free(v3);
    *(_DWORD *)(v2 + 24) = 0;
  }
  v4 = *(void ***)(v2 + 28);
  if ( v4 )
  {
    j_j__free(v4[10]);
    if ( v4[13] )
    {
      j__free(v4[13]);
      v4[13] = 0;
    }
    j__free(v4);
    *(_DWORD *)(v2 + 28) = 0;
  }
  sub_4A81C0(v2, a2, 0);
  if ( *(_DWORD *)(v2 + 12) == 2 )
  {
    v5 = *(_DWORD *)(v2 + 16);
    Src = 0;
    v8 = 7;
    v9 = v5;
    sub_4A80B0(v2, v5, &Src, 8u);
  }
  result = sub_4A7FA0(*(_DWORD **)(v2 + 32), v2);
  *(_DWORD *)(v2 + 12) = 0;
  return result;
}

//----- (004A8500) --------------------------------------------------------
void __fastcall sub_4A8500(int a1, int a2, void *Src, size_t Size)
{
  int v4; // esi
  int v5; // eax
  signed int v6; // ecx
  int v7; // edx

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1068) - a1 - 684;
  if ( (signed int)Size <= 255 )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(a1 + 32) + 8);
    a2 = Size + 3;
    if ( (signed int)(Size + 3) <= v6 )
    {
      v7 = v5 + Size + 1;
      if ( v7 <= v6 )
      {
        if ( v5 )
        {
LABEL_7:
          *(_BYTE *)(*(_DWORD *)(v4 + 1068))++ = Size;
          memcpy(*(void **)(v4 + 1068), Src, Size);
          *(_DWORD *)(v4 + 1068) += Size;
          ++*(_DWORD *)(v4 + 1072);
          return;
        }
      }
      else
      {
        sub_4A81C0(v4, v7, 0);
      }
      *(_DWORD *)(v4 + 84) = sub_401D39(v6, v7);
      *(_BYTE *)(*(_DWORD *)(v4 + 1068))++ = 0;
      *(_BYTE *)(*(_DWORD *)(v4 + 1068))++ = 9;
      goto LABEL_7;
    }
  }
  if ( v5 > 2 )
    sub_4A81C0(v4, a2, 0);
  sub_4A80B0(v4, a2, Src, Size);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A85D0) --------------------------------------------------------
void __thiscall sub_4A85D0(_DWORD *this, int a2, void *Src, size_t Size)
{
  _DWORD *v4; // esi
  int v5; // eax
  int i; // eax
  int v7; // edi
  char *v8; // eax
  char v9; // dl
  int v10; // ecx
  int v11; // esi
  char v12; // [esp+8h] [ebp-8h]
  char v13; // [esp+9h] [ebp-7h]
  char v14; // [esp+Ah] [ebp-6h]
  int v15; // [esp+Ch] [ebp-4h]

  v4 = this;
  v5 = this[14];
  if ( v5 <= a2 )
  {
    if ( v5 == a2 )
    {
      sub_4A93E0(this, Src, Size);
      for ( i = ++v4[14]; *((_WORD *)v4 + 257 * (v4[14] % 16) + 294) > 0; i = v4[14] )
      {
        v7 = (int)v4 + 514 * (i % 16);
        sub_4A93E0(v4, (void *)(v7 + 76), *(signed __int16 *)(v7 + 588));
        *(_WORD *)(v7 + 588) = 0;
        ++v4[14];
      }
    }
    else
    {
      v8 = (char *)this + 514 * (a2 % 16);
      if ( !*((_WORD *)v8 + 294) )
      {
        *((_WORD *)v8 + 294) = Size;
        memcpy(v8 + 76, Src, Size);
      }
    }
  }
  v9 = *((_BYTE *)v4 + 12);
  v10 = *v4;
  v12 = 0;
  v14 = v9;
  v15 = a2;
  v13 = 4;
  if ( *(_DWORD *)(v10 + 92) >= 2 )
  {
    v11 = v4[14];
    if ( v11 > a2 )
    {
      v15 = v11 - 1;
      v13 = 11;
    }
  }
  sub_4A8500(v10, v9, &v12, 8u);
}

//----- (004A8710) --------------------------------------------------------
void __fastcall sub_4A8710(int *a1, int a2)
{
  int *v2; // edi
  int v3; // eax
  int v4; // esi
  int v5; // ecx
  __int16 v6; // bx
  int v7; // ecx
  int v8; // edx
  int j; // ebx
  int v10; // eax
  int v11; // esi
  int v12; // ecx
  int v13; // edx
  int v14; // eax
  size_t v15; // ecx
  signed int i; // [esp+4h] [ebp-8h]
  int v17; // [esp+8h] [ebp-4h]

  v2 = a1;
  if ( a1[16] < a1[15] )
  {
    v3 = sub_401D39(a1, a2);
    v4 = v2[16];
    v17 = v3;
    for ( i = 0; v4 < v2[15]; ++v4 )
    {
      v5 = 132 * (v4 % 16);
      v6 = v2[v5 + 2078];
      v7 = (int)&v2[v5 + 2075];
      if ( v6 )
      {
        v8 = *(_DWORD *)(v7 + 4);
        if ( v8 >= v2[4] && abs(v3 - v8) < *(_DWORD *)(v7 + 8) )
          i += v6;
      }
    }
    for ( j = v2[16]; j < v2[15]; ++j )
    {
      if ( i >= 4000 )
        break;
      v10 = 132 * (j % 16);
      v11 = (int)&v2[v10 + 2075];
      if ( LOWORD(v2[v10 + 2078]) )
      {
        v12 = v2[v10 + 2076];
        if ( (v12 < v2[4] || abs(v17 - v12) >= v2[v10 + 2077]) && abs(v17 - v2[5]) >= v2[7] )
        {
          v2[5] = v17;
          v13 = SLOWORD(v2[v10 + 2078]);
          i += v13;
          if ( v2[v10 + 2076] )
          {
            v14 = sub_401D39(v17, v13);
          }
          else
          {
            v14 = sub_401D39(v17, v13);
            *(_DWORD *)v11 = v14;
          }
          v15 = *(signed __int16 *)(v11 + 12);
          *(_DWORD *)(v11 + 4) = v14;
          *(_DWORD *)(v11 + 8) = v2[1] + i / 10;
          sub_4A8500(*v2, (signed int)((unsigned __int64)(1717986919i64 * i) >> 32) >> 2, (void *)(v11 + 14), v15);
        }
      }
    }
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A8870) --------------------------------------------------------
void __fastcall sub_4A8870(int a1, int a2)
{
  int v2; // esi
  int v3; // ebx
  int i; // edi

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 44);
  for ( i = 0; i < *(_DWORD *)(v2 + 40); v3 += 1076 )
  {
    if ( *(_DWORD *)(v3 + 12) )
      sub_4A8450(v3, a2);
    ++i;
  }
  Sleep(0xC8u);
  closesocket(*(_DWORD *)(v2 + 48));
  j__free(*(void **)(v2 + 44));
  j__free(*(void **)(v2 + 100));
  j__free(*(void **)(v2 + 72));
}

//----- (004A88E0) --------------------------------------------------------
struct hostent *__thiscall sub_4A88E0(_DWORD *this, char *cp, u_short hostshort, int a4)
{
  char *v4; // esi
  _DWORD *v5; // edi
  unsigned int v6; // eax
  struct hostent *result; // eax
  u_short v8; // ax
  int v9; // edx
  _DWORD *v10; // eax
  int v11; // eax
  _DWORD *v12; // ebx
  int v13; // ecx
  int v14; // esi
  int v15; // ebp
  int v16; // eax
  int v17; // ST24_4
  int v18; // ST14_4
  __int16 v19; // ax
  int v20; // [esp+8h] [ebp-Ch]
  unsigned int v21; // [esp+Ch] [ebp-8h]
  u_short v22; // [esp+10h] [ebp-4h]
  char *cpa; // [esp+18h] [ebp+4h]

  v4 = cp;
  v5 = this;
  v6 = inet_addr(cp);
  cpa = (char *)v6;
  if ( v6 == -1 )
  {
    result = gethostbyname(v4);
    if ( !result )
      return result;
    cpa = **(char ***)result->h_addr_list;
    v6 = **(_DWORD **)result->h_addr_list;
  }
  v21 = v6;
  v8 = htons(hostshort);
  v9 = v5[26];
  v22 = v8;
  v10 = (_DWORD *)sub_48CDA0((int)&v21, v5[25], v9, 4, (int (__cdecl *)(int, unsigned int))sub_4A7790, &v20);
  if ( v20 && *v10 )
    return 0;
  v11 = sub_4A7520(v5);
  v12 = (_DWORD *)v11;
  if ( !v11 )
    return 0;
  v13 = v11 - v5[11];
  v14 = v13 / 1076;
  v15 = 16 * sub_401D39(v13, (signed int)((unsigned __int64)(2043701911i64 * v13) >> 32) >> 9);
  v16 = rand();
  v17 = v5[15];
  v18 = v15 ^ v16;
  v19 = htons(hostshort);
  sub_4A8280(v12, (int)v5, 1, v14, (int)cpa, v19, v18, 3, 0, a4, v17);
  return (struct hostent *)v12;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A8A10) --------------------------------------------------------
void __fastcall sub_4A8A10(_DWORD *a1, int a2)
{
  _DWORD *v2; // esi
  signed int v3; // ebp
  int v4; // eax
  int v5; // edx
  int v6; // eax
  int v7; // ecx
  int v8; // ebx
  int v9; // edi
  int v10; // edx
  signed int v11; // ecx
  int v12; // edi
  int v13; // ebp
  _DWORD *v14; // eax
  int v15; // ecx
  signed int v16; // ecx
  int v17; // ecx
  int v18; // eax
  void *v19; // eax
  signed int v20; // [esp+4h] [ebp-Ch]
  int v21; // [esp+8h] [ebp-8h]
  int v22; // [esp+8h] [ebp-8h]
  int v23; // [esp+Ch] [ebp-4h]

  v2 = a1;
  if ( a1[9] < a1[8] )
  {
    if ( a1[6] )
    {
      v20 = a1[6];
      v3 = a1[6];
    }
    else
    {
      v3 = 496;
      v20 = 496;
    }
    v23 = a1[16] - a1[15] + 16;
    if ( v23 > 0 )
    {
      while ( 1 )
      {
        v4 = v2[9];
        if ( v4 >= v2[8] )
          break;
        v5 = v4 % v2[2];
        v6 = v2[15] % 16;
        v7 = v2[10];
        v8 = 16 * v5;
        v9 = *(_DWORD *)(v7 + 16 * v5 + 8);
        v10 = v7 + 16 * v5;
        if ( v9 || (v11 = *(_DWORD *)(v10 + 4), v21 = *(_DWORD *)(v10 + 4), v11 >= v3) )
        {
          v16 = *(_DWORD *)(v10 + 4) - v9;
          v22 = *(_DWORD *)(v10 + 4) - v9;
          if ( v3 < v16 )
          {
            v22 = v3;
            v16 = v3;
          }
          v12 = (int)&v2[132 * v6];
          v13 = v16 + 16;
          *(_WORD *)(v12 + 8312) = v16 + 16;
          *(_BYTE *)(v12 + 8314) = 0;
          *(_BYTE *)(v12 + 8315) = 3;
          *(_BYTE *)(v12 + 8316) = *((_BYTE *)v2 + 12);
          *(_DWORD *)(v12 + 8318) = v2[15];
          *(_BYTE *)(v12 + 8322) = 0;
          *(_BYTE *)(v12 + 8323) = 8;
          *(_DWORD *)(v12 + 8326) = *(_DWORD *)(v2[10] + v8 + 4);
          memcpy((void *)(v12 + 8330), (const void *)(*(_DWORD *)(v2[10] + v8) + *(_DWORD *)(v2[10] + v8 + 8)), v16);
          v15 = v22;
          v14 = (_DWORD *)(v2[10] + v8 + 8);
        }
        else
        {
          v12 = (int)&v2[132 * v6];
          v13 = v11 + 8;
          *(_WORD *)(v12 + 8312) = v11 + 8;
          *(_BYTE *)(v12 + 8314) = 0;
          *(_BYTE *)(v12 + 8315) = 3;
          *(_BYTE *)(v12 + 8316) = *((_BYTE *)v2 + 12);
          *(_DWORD *)(v12 + 8318) = v2[15];
          memcpy((void *)(v12 + 8322), *(const void **)(v2[10] + v8), v11);
          v14 = (_DWORD *)(v2[10] + v8 + 8);
          v15 = v21;
        }
        *v14 += v15;
        v2[18] += v13;
        ++v2[15];
        v2[17] += v13 - v15;
        *(_DWORD *)(v12 + 8308) = 0;
        *(_DWORD *)(v12 + 8304) = 0;
        v17 = v2[10];
        a2 = *(_DWORD *)(v17 + v8 + 8);
        v18 = v17 + v8;
        if ( a2 == *(_DWORD *)(v17 + v8 + 4) )
        {
          if ( *(_DWORD *)(v18 + 12) )
          {
            v19 = *(void **)v18;
            if ( v19 )
            {
              free(v19);
              *(_DWORD *)(v8 + v2[10]) = 0;
            }
          }
          ++v2[9];
        }
        if ( --v23 <= 0 )
          break;
        v3 = v20;
      }
    }
  }
  sub_4A8710(v2, a2);
}

//----- (004A8BF0) --------------------------------------------------------
void __usercall sub_4A8BF0(__int64 a1@<edx:eax>, _DWORD *a2@<ecx>)
{
  int v2; // esi
  int v3; // eax
  __int64 v4; // rax
  int v5; // ecx
  int v6; // edx
  int v7; // ecx
  int v8; // eax
  int v9; // edx
  int v10; // eax
  bool v11; // sf
  unsigned __int8 v12; // of
  __int16 v13; // dx
  __int16 v14; // ax
  int v15; // ecx
  int v16; // edx
  __int64 v17; // rax
  int v18; // ecx
  char v19; // [esp+4h] [ebp-28h]
  char v20; // [esp+5h] [ebp-27h]
  char Src; // [esp+8h] [ebp-24h]
  char v22; // [esp+9h] [ebp-23h]
  __int16 v23; // [esp+Ah] [ebp-22h]
  int v24; // [esp+Ch] [ebp-20h]
  char v25; // [esp+10h] [ebp-1Ch]
  char v26; // [esp+11h] [ebp-1Bh]
  int v27; // [esp+14h] [ebp-18h]
  int v28; // [esp+18h] [ebp-14h]
  int v29; // [esp+1Ch] [ebp-10h]
  __int16 v30; // [esp+20h] [ebp-Ch]
  __int16 v31; // [esp+22h] [ebp-Ah]
  __int16 v32; // [esp+24h] [ebp-8h]
  __int16 v33; // [esp+26h] [ebp-6h]
  __int16 v34; // [esp+28h] [ebp-4h]

  v2 = (int)a2;
  v3 = a2[3];
  if ( v3 == 1 )
  {
    v4 = sub_401D39(a2, HIDWORD(a1)) - a2[19];
    if ( (signed int)((HIDWORD(v4) ^ v4) - HIDWORD(v4)) > 100 )
    {
      LODWORD(v4) = *(_DWORD *)(v2 + 16);
      Src = 0;
      v22 = 1;
      v24 = v4;
      v23 = 3;
      sub_4A80B0(v2, SHIDWORD(v4), &Src, 8u);
    }
  }
  else if ( v3 == 2 )
  {
    if ( a2[18] )
    {
      if ( (a1 = sub_401D39(a2, HIDWORD(a1)) - a2[11],
            LODWORD(a1) = (HIDWORD(a1) ^ a1) - HIDWORD(a1),
            (signed int)a1 > 3000)
        || (signed int)a1 > 500 && *(_DWORD *)(v2 + 36) > 300
        || (signed int)a1 > 50 && *(_DWORD *)(v2 + 36) > 1000 )
      {
        *(_DWORD *)(v2 + 44) = sub_401D39(v5, HIDWORD(a1));
        v25 = 0;
        v26 = 5;
        v8 = sub_401D39(v7, v6);
        v9 = *(_DWORD *)(v2 + 616);
        v27 = v8;
        v10 = *(_DWORD *)(v2 + 620);
        v12 = __OFSUB__(*(_DWORD *)(v2 + 36), 60000);
        v11 = *(_DWORD *)(v2 + 36) - 60000 < 0;
        v28 = v9 + 1;
        v29 = v10;
        if ( v11 ^ v12 )
          v31 = *(_WORD *)(v2 + 36);
        else
          v31 = 0;
        v13 = *(_WORD *)(v2 + 68);
        v14 = *(_WORD *)(v2 + 60);
        v34 = *(_WORD *)(v2 + 64);
        v15 = *(_DWORD *)(v2 + 52);
        v32 = v13;
        v33 = v14;
        if ( v15 <= 0 )
          v30 = 0;
        else
          v30 = *(_DWORD *)(v2 + 56) / v15;
        sub_4A80B0(v2, (int)&v25, &v25, 0x1Cu);
      }
    }
    sub_4A8A10(*(_DWORD **)(v2 + 24), SHIDWORD(a1));
    sub_4A8A10(*(_DWORD **)(v2 + 28), v16);
    if ( *(_DWORD *)(*(_DWORD *)(v2 + 32) + 16) > 0 )
    {
      v17 = sub_401D39(v18, HIDWORD(v17)) - *(_DWORD *)(v2 + 76);
      if ( (signed int)((HIDWORD(v17) ^ v17) - HIDWORD(v17)) > *(_DWORD *)(*(_DWORD *)(v2 + 32) + 16) )
      {
        v19 = 0;
        v20 = 10;
        sub_4A80B0(v2, (int)&v19, &v19, 2u);
      }
    }
    sub_4A81C0(v2, SHIDWORD(v17), *(_DWORD *)(*(_DWORD *)(v2 + 32) + 20));
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A8D80) --------------------------------------------------------
signed int __thiscall sub_4A8D80(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // esi
  int v6; // edx
  int v7; // eax
  int v8; // edx

  v4 = this[8];
  v5 = this[2];
  v6 = this[8] - this[9];
  this[17] += a3;
  if ( v6 >= v5 )
    return 0;
  v7 = 16 * (v4 % v5);
  *(_DWORD *)(v7 + this[10]) = a2;
  *(_DWORD *)(this[10] + v7 + 4) = a3;
  *(_DWORD *)(this[10] + v7 + 8) = 0;
  v8 = this[10];
  *(_DWORD *)(v8 + v7 + 12) = a4;
  ++this[8];
  sub_4A8A10(this, v8);
  return 1;
}

//----- (004A8DF0) --------------------------------------------------------
void __fastcall sub_4A8DF0(_DWORD *a1, int a2, int a3)
{
  int v3; // eax
  int v4; // eax

  if ( a3 >= a1[16] && a3 < a1[15] )
  {
    v3 = (int)&a1[132 * (a3 % 16)];
    if ( *(_WORD *)(v3 + 8312) )
    {
      a1[4] = *(_DWORD *)(v3 + 8300) - 4;
      a1[18] -= *(signed __int16 *)(v3 + 8312);
      a2 = *(signed __int16 *)(v3 + 8312);
      a1[17] -= a2;
      *(_WORD *)(v3 + 8312) = 0;
      if ( a1[16] < a1[15] )
      {
        do
        {
          a2 = 528 * (a1[16] % 16);
          if ( *(_WORD *)((char *)a1 + a2 + 8312) )
            break;
          v4 = a1[16] + 1;
          a1[16] = v4;
        }
        while ( v4 < a1[15] );
      }
    }
  }
  sub_4A8A10(a1, a2);
}

//----- (004A8E90) --------------------------------------------------------
int __thiscall sub_4A8E90(_DWORD *this, void *Src, size_t Size)
{
  _DWORD *v3; // esi
  signed int v4; // eax
  signed int v5; // ecx
  int v6; // eax
  int v7; // edi
  int v8; // edx
  int result; // eax
  void *v10; // edi

  v3 = this;
  v4 = this[6];
  v5 = 496;
  if ( v4 )
    v5 = v4;
  v6 = v3[15];
  if ( v3[16] - v6 == -16 || (signed int)Size > v5 || v3[8] != v3[9] )
  {
    v10 = malloc(Size);
    memcpy(v10, Src, Size);
    result = sub_4A8D80(v3, (int)v10, Size, 1);
  }
  else
  {
    v7 = (int)&v3[132 * (v6 % 16)];
    *(_WORD *)(v7 + 8312) = Size + 8;
    v3[18] += Size + 8;
    *(_BYTE *)(v7 + 8314) = 0;
    *(_BYTE *)(v7 + 8315) = 3;
    *(_BYTE *)(v7 + 8316) = *((_BYTE *)v3 + 12);
    *(_DWORD *)(v7 + 8318) = v3[15];
    memcpy((void *)(v7 + 8322), Src, Size);
    ++v3[15];
    v3[17] += Size + 8;
    *(_DWORD *)(v7 + 8304) = 0;
    *(_DWORD *)(v7 + 8308) = 0;
    sub_4A8710(v3, v8);
    result = 1;
  }
  return result;
}

//----- (004A8F80) --------------------------------------------------------
void __fastcall sub_4A8F80(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // edi
  int i; // esi

  v3 = a1;
  if ( a3 <= a1[15] )
  {
    for ( i = a1[16]; i <= a3; ++i )
      sub_4A8DF0(v3, a2, i);
  }
}

//----- (004A8FB0) --------------------------------------------------------
void __thiscall sub_4A8FB0(_DWORD *this, void *Memory, int a3, int a4)
{
  int v4; // esi
  int v5; // ecx
  char *v6; // edi
  int v7; // edx
  unsigned __int8 v8; // al
  unsigned __int8 v9; // al
  unsigned __int8 v10; // cl
  int v11; // edx
  int v12; // ebx
  int v13; // eax
  int v14; // ebp
  int v15; // ecx
  int v16; // edx
  unsigned int v17; // edx
  int v18; // ecx
  bool v19; // sf
  unsigned __int8 v20; // of
  int v21; // edx
  int v22; // edx
  int v23; // ebx
  signed int v24; // ecx
  signed int v25; // ecx
  int v26; // edx
  int v27; // ebx
  signed int v28; // ecx
  signed int v29; // ecx
  char *v30; // eax
  char *v31; // ebp
  int v32; // ebx
  int v33; // ST08_4
  char *v34; // ebp
  char Src; // [esp+10h] [ebp-Ch]
  char v36; // [esp+11h] [ebp-Bh]
  int v37; // [esp+14h] [ebp-8h]
  int v38; // [esp+18h] [ebp-4h]
  char *Memorya; // [esp+20h] [ebp+4h]
  unsigned int v40; // [esp+24h] [ebp+8h]

  v4 = (int)this;
  v5 = this[3];
  v6 = (char *)Memory;
  if ( v5 != 3 )
  {
    if ( *(_BYTE *)Memory || a3 <= 1 )
    {
      (**(void (__cdecl ***)(_DWORD, void *, int, int))(v4 + 32))(*(_DWORD *)(*(_DWORD *)(v4 + 32) + 4), Memory, a3, v4);
    }
    else
    {
      v7 = *((char *)Memory + 1);
      switch ( v7 )
      {
        case 2:
          if ( v5 == 1 && *(_DWORD *)(v4 + 16) == *((_DWORD *)Memory + 1) )
          {
            *(_DWORD *)(v4 + 20) = *((_DWORD *)Memory + 2);
            sub_4A8060((_DWORD *)v4);
            *(_DWORD *)(v4 + 12) = 2;
          }
          break;
        case 3:
          if ( (unsigned int)a3 >= 8 )
          {
            v10 = *((_BYTE *)Memory + 2);
            if ( v10 < 2u )
              sub_4A85D0(*(_DWORD **)(v4 + 4 * v10 + 24), *((_DWORD *)Memory + 1), (char *)Memory + 8, a3 - 8);
          }
          break;
        case 4:
          if ( (unsigned int)a3 >= 8 )
          {
            v9 = *((_BYTE *)Memory + 2);
            if ( v9 < 2u )
              sub_4A8DF0(*(_DWORD **)(v4 + 4 * v9 + 24), v9, *((_DWORD *)Memory + 1));
          }
          break;
        case 5:
          v20 = __OFSUB__(*(_DWORD *)(v4 + 92), 3);
          v19 = *(_DWORD *)(v4 + 92) - 3 < 0;
          v21 = *((_DWORD *)Memory + 1);
          Src = 0;
          v36 = 6;
          v37 = v21;
          if ( !(v19 ^ v20) )
          {
            v38 = sub_401D39(v5, v21);
            sub_4A80B0(v4, v22, &Src, 0xCu);
            *(_DWORD *)(v4 + 640) = *((unsigned __int16 *)Memory + 8);
            v23 = *(_DWORD *)(v4 + 620);
            *(_DWORD *)(v4 + 624) = *((_DWORD *)Memory + 2);
            *(_DWORD *)(v4 + 628) = *((_DWORD *)Memory + 3);
            *(_DWORD *)(v4 + 644) = *((unsigned __int16 *)Memory + 11);
            *(_DWORD *)(v4 + 648) = *((unsigned __int16 *)Memory + 12);
            *(_DWORD *)(v4 + 632) = *((unsigned __int16 *)Memory + 9);
            *(_DWORD *)(v4 + 636) = *((unsigned __int16 *)Memory + 10);
            v24 = *(_DWORD *)(v4 + 616);
            *(_DWORD *)(v4 + 652) = v24;
            *(_DWORD *)(v4 + 656) = v23;
            if ( v24 <= 200 )
              *(_DWORD *)(v4 + 660) = 1000;
            else
              *(_DWORD *)(v4 + 660) = 1000 * *((_DWORD *)Memory + 3) / v24;
            v25 = *((_DWORD *)Memory + 2);
            if ( v25 <= 200 )
              *(_DWORD *)(v4 + 664) = 1000;
            else
              *(_DWORD *)(v4 + 664) = 1000 * v23 / v25;
            goto LABEL_33;
          }
          v38 = sub_401D39(v5, v21);
          sub_4A80B0(v4, v26, &Src, 0xCu);
          v27 = *(_DWORD *)(v4 + 620);
          *(_DWORD *)(v4 + 640) = *((_DWORD *)Memory + 4);
          v28 = *(_DWORD *)(v4 + 616);
          *(_DWORD *)(v4 + 624) = *((_DWORD *)Memory + 2);
          *(_DWORD *)(v4 + 628) = *((_DWORD *)Memory + 3);
          *(_DWORD *)(v4 + 652) = v28;
          *(_DWORD *)(v4 + 656) = v27;
          if ( v28 <= 200 )
            *(_DWORD *)(v4 + 660) = 1000;
          else
            *(_DWORD *)(v4 + 660) = 1000 * *((_DWORD *)Memory + 3) / v28;
          v29 = *((_DWORD *)Memory + 2);
          if ( v29 <= 200 )
            *(_DWORD *)(v4 + 664) = 1000;
          else
            *(_DWORD *)(v4 + 664) = 1000 * v27 / v29;
          break;
        case 6:
          v12 = sub_401D39(v5, v7);
          v13 = *(_DWORD *)(v4 + 60);
          v14 = v12 - *((_DWORD *)Memory + 1);
          ++*(_DWORD *)(v4 + 52);
          *(_DWORD *)(v4 + 56) += v14;
          if ( !v13 || v14 < v13 )
            *(_DWORD *)(v4 + 60) = v14;
          if ( v14 > *(_DWORD *)(v4 + 64) )
            *(_DWORD *)(v4 + 64) = v14;
          v15 = *(_DWORD *)(v4 + 36) + 2;
          *(_DWORD *)(v4 + 68) = v14;
          if ( v14 <= v15 || abs(sub_401D39(v15, v11) - *(_DWORD *)(v4 + 48)) > 12000 )
          {
            v16 = 2 * *(_DWORD *)(v4 + 36);
            if ( v14 < v16 || abs(sub_401D39(v15, v16) - *(_DWORD *)(v4 + 48)) > 24000 )
            {
              v17 = (signed int)((unsigned __int64)(274877907i64 * v14 * (1000 - *(_DWORD *)(*(_DWORD *)(v4 + 32) + 12))) >> 32) >> 6;
              v18 = *((_DWORD *)Memory + 2) + v17 + (v17 >> 31) - v12;
              *(_DWORD *)(v4 + 40) = v18;
              *(_DWORD *)(v4 + 48) = sub_401D39(v18, v17);
              *(_DWORD *)(v4 + 36) = v14;
            }
          }
          break;
        case 7:
LABEL_33:
          if ( *(_DWORD *)(v4 + 16) == *((_DWORD *)Memory + 1) )
            *(_DWORD *)(v4 + 12) = 3;
          break;
        case 9:
          v30 = (char *)Memory + a3;
          v31 = (char *)Memory + 2;
          Memorya = 0;
          v40 = (unsigned int)v30;
          if ( v6 + 2 < v30 )
          {
            do
            {
              v32 = (unsigned __int8)*v31;
              v33 = (unsigned __int8)*v31;
              v34 = v31 + 1;
              sub_4A8FB0(v34, v33, 0);
              ++Memorya;
              v31 = &v34[v32];
            }
            while ( (unsigned int)v31 < v40 );
          }
          *(_DWORD *)(*(_DWORD *)(v4 + 32) + 28) += Memorya - 1;
          break;
        case 11:
          if ( (unsigned int)a3 >= 8 )
          {
            v8 = *((_BYTE *)Memory + 2);
            if ( v8 < 2u )
              sub_4A8F80(*(_DWORD **)(v4 + 4 * v8 + 24), *((_DWORD *)Memory + 1), *((_DWORD *)Memory + 1));
          }
          break;
        default:
          break;
      }
    }
  }
  if ( a4 )
    free(v6);
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A9380) --------------------------------------------------------
int __thiscall sub_4A9380(_DWORD **this, int a2, void *Src, size_t Size)
{
  int v4; // eax
  int result; // eax

  v4 = a2;
  if ( (signed int)Size > 496 && *(_BYTE *)Src && (a2 == 2 || a2 == 3) )
  {
    v4 = 0;
    return sub_4A8E90(this[v4 + 6], Src, Size);
  }
  if ( a2 == 2 )
  {
    sub_4A8500((int)this, Size, Src, Size);
    result = 1;
  }
  else
  {
    if ( a2 != 3 )
      return sub_4A8E90(this[v4 + 6], Src, Size);
    sub_4A80B0((int)this, Size, Src, Size);
    result = 1;
  }
  return result;
}

//----- (004A93E0) --------------------------------------------------------
void __thiscall sub_4A93E0(_DWORD *this, void *Memory, int a3)
{
  _DWORD *v3; // esi
  size_t v4; // eax
  int v5; // eax
  int v6; // eax

  v3 = this;
  if ( *(_BYTE *)Memory || *((_BYTE *)Memory + 1) != 8 )
  {
    sub_4A8FB0((_DWORD *)*this, Memory, a3, 0);
  }
  else
  {
    if ( !this[13] )
    {
      v4 = *((_DWORD *)Memory + 1);
      this[12] = v4;
      this[13] = malloc(v4);
      v3[11] = 0;
    }
    v5 = v3[11];
    if ( a3 - 8 <= v3[12] - v5 )
    {
      memcpy((void *)(v5 + v3[13]), (char *)Memory + 8, a3 - 8);
      v3[11] += a3 - 8;
      v6 = v3[12];
      if ( v3[11] == v6 )
      {
        sub_4A8FB0((_DWORD *)*v3, (void *)v3[13], v6, 1);
        v3[13] = 0;
        v3[12] = 0;
        v3[11] = 0;
      }
    }
    else
    {
      *(_DWORD *)(*v3 + 12) = 3;
    }
  }
}

//----- (004A9490) --------------------------------------------------------
void __fastcall sub_4A9490(int a1, int a2, void *Memory, int a4)
{
  int v4; // esi
  int v5; // eax
  bool v6; // zf
  bool v7; // sf

  v4 = a1;
  if ( a4 >= 1 )
  {
    v5 = sub_401D39(a1, a2);
    ++*(_DWORD *)(v4 + 620);
    v6 = *(_DWORD *)(v4 + 20) == 0;
    v7 = *(_DWORD *)(v4 + 20) < 0;
    *(_DWORD *)(v4 + 80) = v5;
    if ( !v7 && !v6 )
    {
      if ( *(_BYTE *)Memory )
      {
        sub_4A7870((char *)v4, (int *)((char *)Memory + 1), a4 - 1);
      }
      else if ( *((_BYTE *)Memory + 1) != 2 )
      {
        if ( a4 < 2 )
          return;
        sub_4A7870((char *)v4, (int *)((char *)Memory + 2), a4 - 2);
      }
    }
    sub_4A8FB0((_DWORD *)v4, Memory, a4, 0);
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A9500) --------------------------------------------------------
void __thiscall sub_4A9500(unsigned int *this, void *Memory, int a3, int a4, int a5)
{
  int v5; // esi
  int v6; // eax
  _DWORD **v7; // eax
  _DWORD *v8; // ecx
  _DWORD *v9; // ebx
  int v10; // eax
  int v11; // eax
  _DWORD *v12; // edi
  int v13; // ecx
  int v14; // eax
  int v15; // ebp
  int v16; // edx
  int v17; // ecx
  int v18; // edx
  int v19; // edx
  int v20; // eax
  int v21; // [esp+8h] [ebp-18h]
  int v22; // [esp+Ch] [ebp-14h]
  __int16 v23; // [esp+10h] [ebp-10h]
  char Src; // [esp+14h] [ebp-Ch]
  char v25; // [esp+15h] [ebp-Bh]
  int v26; // [esp+18h] [ebp-8h]
  int v27; // [esp+1Ch] [ebp-4h]
  int Memorya; // [esp+24h] [ebp+4h]
  int Memoryb; // [esp+24h] [ebp+4h]

  v5 = (int)this;
  v22 = a4;
  v6 = this[26];
  v23 = a5;
  v7 = (_DWORD **)sub_48CDA0((int)&v22, this[25], v6, 4, (int (__cdecl *)(int, unsigned int))sub_4A7790, &v21);
  if ( v21 )
    v8 = *v7;
  else
    v8 = 0;
  v9 = Memory;
  if ( *(_BYTE *)Memory || *((_BYTE *)Memory + 1) != 1 )
  {
    if ( v8 )
      sub_4A9490((int)v8, a3, Memory, a3);
  }
  else if ( v8 )
  {
    if ( v8[4] == *((_DWORD *)Memory + 1) )
    {
      v26 = v8[4];
      v10 = v8[5];
      Src = 0;
      v25 = 2;
      v27 = v10;
      sub_4A80B0((int)v8, (int)&Src, &Src, 0xCu);
    }
    else
    {
      v8[3] = 3;
    }
  }
  else
  {
    v11 = sub_4A7520((_DWORD *)v5);
    v12 = (_DWORD *)v11;
    if ( v11 && *(_DWORD *)(v5 + 32) )
    {
      v13 = v11 - *(_DWORD *)(v5 + 44);
      v14 = 0;
      v15 = v13 / 1076;
      if ( *(_DWORD *)(v5 + 52) )
      {
        Memorya = rand() << 16;
        Memoryb = Memorya ^ sub_401D39(v17, v16);
        v14 = Memoryb ^ rand();
      }
      sub_4A8280(v12, v5, 4, v15, a4, a5, v9[1], *((signed __int16 *)v9 + 1), v14, 0, *(_DWORD *)(v5 + 60));
      if ( (*(int (__cdecl **)(_DWORD, _DWORD *))(v5 + 32))(*(_DWORD *)(v5 + 4), v12) )
      {
        v19 = v12[4];
        v12[3] = 2;
        v25 = 2;
        v20 = v12[5];
        Src = 0;
        v26 = v19;
        v27 = v20;
        sub_4A80B0((int)v12, v19, &Src, 0xCu);
      }
      else
      {
        sub_4A8450((int)v12, v18);
      }
    }
  }
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A96A0) --------------------------------------------------------
signed int __fastcall sub_4A96A0(unsigned int *a1, int a2)
{
  unsigned int *v2; // esi
  __int64 v3; // rax
  int v4; // ecx
  __int64 v5; // rax
  signed int v6; // edi
  bool v7; // zf
  bool v8; // sf
  void *v9; // eax
  int v11; // [esp+4h] [ebp-Ch]
  int v12; // [esp+8h] [ebp-8h]
  int v13; // [esp+Ch] [ebp-4h]

  v2 = a1;
  v3 = (signed int)(sub_401D39(a1, a2) - a1[14]);
  if ( (signed int)((HIDWORD(v3) ^ v3) - HIDWORD(v3)) > 15 )
  {
    LODWORD(v5) = sub_401D39(v4, HIDWORD(v3));
    v6 = 0;
    v7 = v2[26] == 0;
    v8 = (v2[26] & 0x80000000) != 0;
    v2[14] = v5;
    if ( !v8 && !v7 )
    {
      do
      {
        LODWORD(v5) = v2[25];
        sub_4A8BF0(v5, *(_DWORD **)(v5 + 4 * v6++));
      }
      while ( v6 < (signed int)v2[26] );
    }
  }
  v9 = (void *)sub_4A7590(v2, &v11, &v13, &v12);
  if ( !v9 || v11 <= 0 )
    return 0;
  sub_4A9500(v2, v9, v11, v13, v12);
  return 1;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A9730) --------------------------------------------------------
int __stdcall sub_4A9730(int a1, int a2, int a3, int (__thiscall *a4)(int))
{
  int v4; // edi
  int v5; // esi
  int result; // eax

  v4 = a3 - 1;
  if ( a3 - 1 >= 0 )
  {
    v5 = a1;
    do
    {
      result = a4(v5);
      v5 += a2;
      --v4;
    }
    while ( v4 >= 0 );
  }
  return result;
}

//----- (004A97B0) --------------------------------------------------------
int __thiscall sub_4A97B0(SOCKET *this)
{
  int result; // eax

  result = *this;
  if ( *this != -1 )
    result = closesocket(*this);
  return result;
}

//----- (004A97C0) --------------------------------------------------------
int __thiscall sub_4A97C0(SOCKET *this)
{
  SOCKET *v1; // esi
  SOCKET v2; // eax
  SOCKET v3; // ST00_4
  SOCKET v4; // ST00_4
  SOCKET v5; // ST00_4
  u_short v6; // ST10_2
  u_long v7; // eax
  SOCKET v8; // ecx
  unsigned int v9; // edi
  struct hostent *v10; // eax
  u_short v11; // ST10_2
  char optval[4]; // [esp+Ch] [ebp-2Ch]
  u_long argp; // [esp+10h] [ebp-28h]
  struct sockaddr name; // [esp+14h] [ebp-24h]
  struct sockaddr v16; // [esp+24h] [ebp-14h]

  v1 = this;
  if ( *this != -1 )
    closesocket(*this);
  v2 = socket(2, 2, 0);
  *v1 = v2;
  argp = 1;
  ioctlsocket(v2, -2147195266, &argp);
  v3 = *v1;
  *(_DWORD *)optval = -1;
  setsockopt(v3, 6, 1, optval, 4);
  v4 = *v1;
  *(_DWORD *)optval = 1024;
  setsockopt(v4, 0xFFFF, 4097, optval, 4);
  v5 = *v1;
  *(_DWORD *)optval = 1024;
  setsockopt(v5, 0xFFFF, 4098, optval, 4);
  v6 = *((_WORD *)v1 + 144);
  name.sa_family = 2;
  *(_WORD *)name.sa_data = htons(v6);
  v7 = htonl(0);
  v8 = *v1;
  *(_DWORD *)&name.sa_data[2] = v7;
  bind(v8, &name, 16);
  v9 = inet_addr((const char *)v1 + 28);
  if ( v9 == -1 )
  {
    v10 = gethostbyname((const char *)v1 + 28);
    if ( v10 )
      v9 = **(_DWORD **)v10->h_addr_list;
  }
  v11 = *((_WORD *)v1 + 142);
  v16.sa_family = 2;
  *(_DWORD *)&v16.sa_data[2] = v9;
  *(_WORD *)v16.sa_data = htons(v11);
  return connect(*v1, &v16, 16);
}

//----- (004A9900) --------------------------------------------------------
int __thiscall sub_4A9900(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int result; // eax

  *a2 = this[5];
  result = this[6];
  *a3 = result;
  return result;
}

//----- (004A9920) --------------------------------------------------------
int __fastcall sub_4A9920(SOCKET *a1, int a2, void *Src, size_t Size)
{
  SOCKET *v4; // esi
  int result; // eax
  int v6; // eax
  SOCKET v7; // ecx
  char buf[4]; // [esp+8h] [ebp-808h]
  int v9; // [esp+Ch] [ebp-804h]
  char Dst; // [esp+10h] [ebp-800h]

  v4 = a1;
  ++v4[5];
  if ( Src && (signed int)Size > 0 )
  {
    v9 = 0;
    memcpy(&Dst, Src, Size);
    result = send(*v4, (const char *)&v9, Size + 4, 0);
  }
  else
  {
    v6 = sub_401D39(a1, a2);
    v7 = *v4;
    *(_DWORD *)buf = v6;
    result = send(v7, buf, 4, 0);
  }
  return result;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A99B0) --------------------------------------------------------
int __thiscall sub_4A99B0(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[4] = a2;
  return result;
}

//----- (004A99C0) --------------------------------------------------------
SOCKET __fastcall sub_4A99C0(SOCKET *a1, int a2, _DWORD *a3)
{
  SOCKET *v3; // esi
  signed int v4; // ebx
  __int64 v5; // rax
  int v6; // ecx
  int v7; // ecx
  unsigned int v8; // edi
  SOCKET v9; // edx
  int v10; // eax
  char buf[4]; // [esp+10h] [ebp-804h]
  int v13; // [esp+14h] [ebp-800h]

  v3 = a1;
  v4 = 0;
  v5 = (signed int)(sub_401D39(a1, a2) - a1[3]);
  if ( (signed int)((HIDWORD(v5) ^ v5) - HIDWORD(v5)) > (signed int)v3[4] )
    v4 = 1;
  v3[3] = sub_401D39(v6, HIDWORD(v5));
  while ( recv(*v3, buf, 2048, 2) != -1 )
  {
    v8 = recv(*v3, buf, 2048, 0);
    if ( v8 >= 8 )
    {
      ++v3[6];
      if ( !v4 )
      {
        v9 = *(_DWORD *)buf;
        v3[1] = *(_DWORD *)buf;
        v10 = sub_401D39(v7, v9);
        v3[2] = v10 - v13;
      }
    }
    if ( v8 == -1 )
      goto LABEL_12;
  }
  if ( WSAGetLastError() != 10035 )
    sub_4A97C0(v3);
LABEL_12:
  *a3 = v3[2];
  return v3[1];
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A9C60) --------------------------------------------------------
SOCKET *__thiscall sub_4A9C60(SOCKET *this, char *a2, SOCKET a3, SOCKET a4)
{
  char *v4; // eax
  SOCKET *v5; // esi
  int v6; // edx
  char v7; // cl
  int v8; // edx
  int v9; // ecx
  int v10; // edx

  v4 = a2;
  v5 = this;
  *this = -1;
  v6 = (char *)(this + 7) - a2;
  do
  {
    v7 = *v4;
    v4[v6] = *v4;
    ++v4;
  }
  while ( v7 );
  v5[72] = a4;
  v5[71] = a3;
  sub_4A97C0(v5);
  v5[5] = 0;
  v5[6] = 0;
  v5[3] = sub_401D39(v9, v8);
  v5[1] = -1;
  v5[2] = -1;
  v5[4] = 0x7FFFFFF;
  sub_4A9920(v5, v10, 0, 0);
  return v5;
}
// 401D39: using guessed type int __fastcall sub_401D39(_DWORD, _DWORD);

//----- (004A9CE0) --------------------------------------------------------
HHOOK sub_4A9CE0()
{
  HHOOK result; // eax

  result = hhk;
  if ( hhk )
    result = (HHOOK)UnhookWindowsHookEx(hhk);
  return result;
}

//----- (004A9D00) --------------------------------------------------------
void __thiscall sub_4A9D00(int *this, int a2)
{
  int *v2; // esi
  LPVOID *v3; // eax
  void *v4; // edi

  v2 = this;
  if ( a2 )
  {
    if ( !this[2180] )
    {
      v3 = (LPVOID *)operator new(0x10690u);
      if ( v3 )
        v2[2180] = (int)sub_4B4410(v3, v2[2178], v2[2179]);
      else
        v2[2180] = 0;
    }
  }
  else
  {
    v4 = (void *)this[2180];
    if ( v4 )
    {
      sub_4B4170((_DWORD *)this[2180]);
      j__free(v4);
      v2[2180] = 0;
    }
  }
}

//----- (004A9DE0) --------------------------------------------------------
int __thiscall sub_4A9DE0(_DWORD *this, int a2)
{
  return this[3 * a2 + 2] | ((this[3 * a2 + 1] | (this[3 * a2] << 9)) << 9);
}

//----- (004A9E00) --------------------------------------------------------
int __stdcall sub_4A9E00(int a1, int a2, int a3)
{
  return a3 | ((a2 | (a1 << 9)) << 9);
}

//----- (004A9E20) --------------------------------------------------------
int __thiscall sub_4A9E20(char *this, int a2, _DWORD *a3, _DWORD *a4, _DWORD *a5)
{
  char *v5; // eax
  int result; // eax

  v5 = &this[12 * a2];
  *a3 = *(_DWORD *)v5;
  *a4 = *((_DWORD *)v5 + 1);
  result = *((_DWORD *)v5 + 2);
  *a5 = result;
  return result;
}

//----- (004A9E50) --------------------------------------------------------
int __thiscall sub_4A9E50(_DWORD *this, int nVirtKey)
{
  SHORT v2; // ax
  int result; // eax
  _DWORD *v4; // ecx
  _DWORD *v5; // ecx
  int v6; // esi
  signed int v7; // eax

  if ( hhk )
  {
    switch ( nVirtKey )
    {
      case 160:
        if ( dword_576A5C )
          return 0;
        goto LABEL_4;
      case 161:
        if ( !dword_576A5C )
          return 0;
LABEL_4:
        v2 = GetKeyState(16);
        break;
      case 162:
        if ( dword_576A64 )
          return 0;
        v2 = GetKeyState(17);
        break;
      case 163:
        if ( !dword_576A64 )
          return 0;
        v2 = GetKeyState(17);
        break;
      case 164:
        if ( dword_576A60 )
          return 0;
        v2 = GetKeyState(18);
        break;
      case 165:
        if ( !dword_576A60 )
          return 0;
        v2 = GetKeyState(18);
        break;
      default:
        goto LABEL_18;
    }
    if ( v2 < 0 )
      return 1;
    return 0;
  }
LABEL_18:
  if ( nVirtKey < 256 )
  {
    if ( nVirtKey < 296 )
      return GetKeyState(nVirtKey) & 0x8000;
    goto LABEL_23;
  }
  if ( nVirtKey >= 296 )
  {
LABEL_23:
    if ( nVirtKey < 328 )
    {
      v5 = (_DWORD *)this[2180];
      result = v5
            && (v6 = nVirtKey - 296, v7 = sub_4B42D0(v5, (nVirtKey - 296) / 2), v7 != -1)
            && (v7 < 15000 && !(v6 % 2) || v7 > 50000 && v6 % 2 == 1);
      return result;
    }
    return GetKeyState(nVirtKey) & 0x8000;
  }
  v4 = (_DWORD *)this[2180];
  if ( !v4 )
    return 0;
  return sub_4B4260(v4, nVirtKey - 256);
}
// 576A5C: using guessed type int dword_576A5C;
// 576A60: using guessed type int dword_576A60;
// 576A64: using guessed type int dword_576A64;

//----- (004A9F90) --------------------------------------------------------
int __thiscall sub_4A9F90(_DWORD *this)
{
  _DWORD *v1; // ecx
  int result; // eax

  v1 = (_DWORD *)this[2180];
  if ( v1 )
    result = sub_4B41D0(v1);
  return result;
}

//----- (004A9FA0) --------------------------------------------------------
signed int sub_4A9FA0()
{
  return 328;
}

//----- (004A9FB0) --------------------------------------------------------
void *__thiscall sub_4A9FB0(int *this, int a2)
{
  int *v2; // edi
  _DWORD *v3; // ecx
  int v4; // ebp
  _DWORD *v5; // ebx
  void *result; // eax
  bool v7; // zf
  bool v8; // sf
  int *v9; // esi
  int *v10; // edx
  int v11; // ecx
  _DWORD *v12; // eax
  int *v13; // esi
  int v14; // ebp
  int v15; // edi
  int v16; // eax
  int v17; // ecx
  unsigned __int8 v18; // of
  int *v19; // [esp+10h] [ebp-14h]
  int v20; // [esp+14h] [ebp-10h]
  int v21; // [esp+18h] [ebp-Ch]
  int v22; // [esp+1Ch] [ebp-8h]
  int v23; // [esp+20h] [ebp-4h]
  _DWORD *v24; // [esp+28h] [ebp+4h]

  v2 = this;
  v3 = (_DWORD *)this[2180];
  v4 = 0;
  v19 = v2;
  if ( v3 )
    sub_4B41D0(v3);
  v5 = v2 + 1537;
  result = memset(v2 + 1537, 0, 0x800u);
  v7 = v2[1536] == 0;
  v8 = v2[1536] < 0;
  v2[2049] = 0;
  if ( !v8 && !v7 )
  {
    v9 = v2;
    do
    {
      result = (void *)*v9;
      if ( *v9 )
      {
        result = (void *)sub_4A9E50(v2, *v9);
        if ( result )
        {
          if ( !v9[1] || (result = (void *)sub_4A9E50(v2, v9[1])) != 0 )
          {
            result = (void *)v9[2];
            if ( !result || (result = (void *)sub_4A9E50(v2, v9[2])) != 0 )
            {
              *v5 = 1;
              if ( a2
                || v9[2]
                || (result = (void *)*v9, !*((_BYTE *)v2 + *v9 + 8200))
                && (result != (void *)16 && result != (void *)160 && result != (void *)161
                 || (result = (void *)v9[1], !*((_BYTE *)v2 + (_DWORD)result + 8200))) )
              {
                v2[2049] = 1;
              }
              else
              {
                *v5 = 0;
              }
            }
          }
        }
      }
      ++v4;
      ++v5;
      v9 += 3;
    }
    while ( v4 < v2[1536] );
  }
  v20 = 0;
  if ( v2[1536] > 0 )
  {
    v10 = v2 + 1;
    v21 = (int)(v2 + 1);
    v24 = v2 + 1537;
    do
    {
      if ( *v24 )
      {
        v11 = 0;
        v22 = 0;
        if ( v2[1536] > 0 )
        {
          v12 = v2 + 1537;
          v13 = v2 + 2;
          v23 = (int)(v2 + 1537);
          do
          {
            if ( v20 != v11 && *v12 )
            {
              v14 = *v10;
              v15 = *(v10 - 1);
              v16 = *v13;
              if ( (*v13 != 0) + (*(v13 - 1) != 0) + (*(v13 - 2) != 0) > (*v10 != 0) + (v15 != 0) + (v10[1] != 0) )
              {
                v17 = *(v13 - 2);
                if ( v15 == v17 || v15 == *(v13 - 1) || v15 == v16 )
                {
                  if ( v14 )
                  {
                    if ( v14 == v17 || v14 == *(v13 - 1) || v14 == v16 )
                      *v24 = 0;
                  }
                  else
                  {
                    *v24 = 0;
                  }
                }
              }
              v2 = v19;
            }
            v10 = (int *)v21;
            v11 = v22 + 1;
            v12 = (_DWORD *)(v23 + 4);
            v13 += 3;
            v18 = __OFSUB__(v22 + 1, v2[1536]);
            v8 = v22++ + 1 - v2[1536] < 0;
            v23 += 4;
          }
          while ( v8 ^ v18 );
        }
      }
      ++v24;
      result = (void *)(v20 + 1);
      v10 += 3;
      v18 = __OFSUB__(v20 + 1, v2[1536]);
      v8 = v20++ + 1 - v2[1536] < 0;
      v21 = (int)v10;
    }
    while ( v8 ^ v18 );
  }
  return result;
}

//----- (004AA1F0) --------------------------------------------------------
int __stdcall sub_4AA1F0(int *a1, int *a2, int *a3)
{
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  int result; // eax
  int v8; // ecx

  v3 = *a3;
  if ( *a3 == 17 || v3 == 16 || v3 == 18 || v3 == 163 || v3 == 161 || v3 == 165 || v3 == 162 || v3 == 160 || v3 == 164 )
  {
    v4 = *a1;
    if ( *a1 != 16 && v4 != 161 && v4 != 160 )
    {
      *a3 = v4;
      *a1 = v3;
    }
  }
  v5 = *a3;
  if ( *a3 == 17 || v5 == 16 || v5 == 18 || v5 == 163 || v5 == 161 || v5 == 165 || v5 == 162 || v5 == 160 || v5 == 164 )
  {
    v6 = *a2;
    *a2 = v5;
    *a3 = v6;
  }
  result = *a2;
  if ( *a2 == 17
    || result == 16
    || result == 18
    || result == 163
    || result == 161
    || result == 165
    || result == 162
    || result == 160
    || result == 164 )
  {
    v8 = *a1;
    if ( *a1 != 16 && v8 != 161 && v8 != 160 )
    {
      *a2 = v8;
      *a1 = result;
    }
  }
  return result;
}

//----- (004AA2F0) --------------------------------------------------------
int __thiscall sub_4AA2F0(char *this, int a2)
{
  return this[a2 + 8200];
}

//----- (004AA300) --------------------------------------------------------
int __thiscall sub_4AA300(int this)
{
  int v1; // esi
  int result; // eax

  v1 = this;
  memset((void *)(this + 8200), 0, 0x200u);
  *(_BYTE *)(v1 + 8232) = 1;
  memset((void *)(v1 + 8248), 1, 0x2Bu);
  *(_DWORD *)(v1 + 8296) = 16843009;
  *(_DWORD *)(v1 + 8300) = 16843009;
  *(_DWORD *)(v1 + 8304) = 16843009;
  *(_DWORD *)(v1 + 8308) = 16843009;
  memset((void *)(v1 + 8346), 1, 0x64u);
  result = 0;
  *(_DWORD *)(v1 + 8360) = 0;
  *(_BYTE *)(v1 + 8364) = 0;
  return result;
}

//----- (004AA370) --------------------------------------------------------
char *__stdcall sub_4AA370(int a1, int a2, int a3)
{
  char v3; // bl
  char *v4; // esi

  sprintf(Dest, "%s+%s+%s", *(&off_53A9E8 + a1), *(&off_53A9E8 + a2), *(&off_53A9E8 + a3));
  v3 = Dest[0];
  if ( !Dest[0] )
    goto LABEL_7;
  v4 = &Dest[-1];
  while ( v4[strlen(Dest)] == 43 )
  {
    v4[strlen(Dest)] = 0;
    v3 = Dest[0];
    if ( !Dest[0] )
      goto LABEL_7;
  }
  if ( !v3 )
LABEL_7:
    strcpy(Dest, "None");
  return Dest;
}
// 53A9E8: using guessed type void *off_53A9E8;
// 576A6C: using guessed type char byte_576A6C;

//----- (004AA420) --------------------------------------------------------
LRESULT __stdcall fn(int code, WPARAM wParam, LPARAM lParam)
{
  switch ( wParam )
  {
    case 0x10u:
      dword_576A5C = (lParam & 0xFF0000) == 3538944;
      break;
    case 0x11u:
      dword_576A64 = (lParam & 0xFF0000) != 1900544;
      break;
    case 0x12u:
      dword_576A60 = (lParam & 0xFF0000) != 3670016;
      break;
  }
  return CallNextHookEx(hhk, code, wParam, lParam);
}
// 576A5C: using guessed type int dword_576A5C;
// 576A60: using guessed type int dword_576A60;
// 576A64: using guessed type int dword_576A64;

//----- (004AA4A0) --------------------------------------------------------
HHOOK sub_4AA4A0()
{
  HHOOK result; // eax
  DWORD v1; // eax
  struct _OSVERSIONINFOA VersionInformation; // [esp+4h] [ebp-98h]

  dword_576A5C = 0;
  dword_576A64 = 0;
  dword_576A60 = 0;
  hhk = 0;
  VersionInformation.dwOSVersionInfoSize = 148;
  result = (HHOOK)GetVersionExA(&VersionInformation);
  if ( VersionInformation.dwPlatformId != 2 )
  {
    v1 = GetCurrentThreadId();
    result = SetWindowsHookExA(2, fn, 0, v1);
    hhk = result;
  }
  return result;
}
// 576A5C: using guessed type int dword_576A5C;
// 576A60: using guessed type int dword_576A60;
// 576A64: using guessed type int dword_576A64;

//----- (004AA520) --------------------------------------------------------
_DWORD *__thiscall sub_4AA520(void *Dst, int a2, int a3)
{
  _DWORD *v3; // esi

  v3 = Dst;
  sub_4AA300((int)Dst);
  memset(v3, 0, 0x1800u);
  v3[2178] = a2;
  v3[1536] = 0;
  v3[2179] = a3;
  v3[2180] = 0;
  return v3;
}

//----- (004AA570) --------------------------------------------------------
void __thiscall sub_4AA570(_DWORD *this)
{
  _DWORD *v1; // edi
  void *v2; // esi

  v1 = this;
  v2 = (void *)this[2180];
  if ( v2 )
  {
    sub_4B4170((_DWORD *)this[2180]);
    j__free(v2);
    v1[2180] = 0;
  }
}

//----- (004AA5A0) --------------------------------------------------------
void __thiscall sub_4AA5A0(int *this, int a2)
{
  int *v2; // esi
  _DWORD *v3; // edi

  v2 = this;
  v3 = (_DWORD *)this[2180];
  this[2179] = a2;
  if ( v3 )
  {
    sub_4B4170(v3);
    j__free(v3);
    v2[2180] = 0;
    sub_4A9D00(v2, 1);
  }
}

//----- (004AA5E0) --------------------------------------------------------
_DWORD *__thiscall sub_4AA5E0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  _DWORD *result; // eax
  int v7; // edx
  int v8; // ecx

  v5 = this;
  sub_4AA1F0(&a3, &a4, &a5);
  if ( a2 >= v5[1536] )
    v5[1536] = a2 + 1;
  result = &v5[3 * a2];
  v7 = a4;
  *result = a3;
  v8 = a5;
  result[1] = v7;
  result[2] = v8;
  return result;
}

//----- (004AA630) --------------------------------------------------------
int __stdcall sub_4AA630(int a1)
{
  int *v1; // esi
  int v2; // eax
  int result; // eax
  int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v1 = (int *)a1;
  v2 = *(_DWORD *)a1;
  a1 = (*(_DWORD *)a1 >> 18) & 0x1FF;
  v5 = v2 & 0x1FF;
  v4 = (v2 >> 9) & 0x1FF;
  result = sub_4AA1F0(&a1, &v4, &v5);
  *v1 = v5 | ((v4 | (a1 << 9)) << 9);
  return result;
}

//----- (004AA690) --------------------------------------------------------
char *__stdcall sub_4AA690(int a1)
{
  return sub_4AA370((a1 >> 18) & 0x1FF, (a1 >> 9) & 0x1FF, a1 & 0x1FF);
}

//----- (004AA6C0) --------------------------------------------------------
int *__thiscall sub_4AA6C0(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ecx
  int v5; // edx
  int *result; // eax
  int v7; // edx
  int v8; // ecx
  int v9; // [esp+4h] [ebp-8h]
  int v10; // [esp+8h] [ebp-4h]

  v3 = this;
  v4 = a3 & 0x1FF;
  v5 = a3 >> 9;
  a3 = (a3 >> 18) & 0x1FF;
  v10 = v4;
  v9 = v5 & 0x1FF;
  sub_4AA1F0(&a3, &v9, &v10);
  if ( a2 >= v3[1536] )
    v3[1536] = a2 + 1;
  result = &v3[3 * a2];
  v7 = v9;
  *result = a3;
  v8 = v10;
  result[1] = v7;
  result[2] = v8;
  return result;
}

//----- (004AA7C0) --------------------------------------------------------
int *__thiscall sub_4AA7C0(int *this)
{
  int *v1; // esi
  int v2; // edi

  v1 = this;
  v2 = rand() << 16;
  *v1 = v2 | rand();
  v1[1] = 0;
  v1[2] = 0;
  v1[3] = 0;
  v1[4] = 0;
  return v1;
}

//----- (004AA7F0) --------------------------------------------------------
void __thiscall sub_4AA7F0(void **this)
{
  void **v1; // esi

  v1 = this;
  if ( this[1] )
  {
    free(this[1]);
    v1[1] = 0;
  }
  if ( v1[2] )
  {
    free(v1[2]);
    v1[2] = 0;
  }
}

//----- (004AA830) --------------------------------------------------------
int __thiscall sub_4AA830(int *this)
{
  int *v1; // esi
  int v2; // edx
  int result; // eax
  int v4; // ecx
  void *v5; // ecx
  _DWORD *v6; // eax
  int v7; // edx
  int v8; // ecx
  size_t v9; // eax
  void *v10; // edx
  char *v11; // eax
  int v12; // ecx
  int v13; // ecx

  v1 = this;
  v2 = this[3];
  result = 0;
  if ( v2 <= 0 )
  {
LABEL_5:
    v5 = (void *)v1[1];
    v1[3] = v2 + 1;
    v6 = realloc(v5, 4 * (v2 + 1));
    v7 = v1[3];
    v8 = *v1;
    v1[1] = (int)v6;
    v6[v7 - 1] = v8;
    v9 = v1[3];
    v10 = (void *)v1[2];
    v1[4] ^= *(_DWORD *)(v1[1] + 4 * v9 - 4);
    v11 = (char *)realloc(v10, v9);
    v12 = v1[3];
    v1[2] = (int)v11;
    v11[v12 - 1] = 1;
    result = v1[3] - 1;
  }
  else
  {
    v4 = this[2];
    while ( *(_BYTE *)(v4 + result) )
    {
      if ( ++result >= v2 )
        goto LABEL_5;
    }
    *(_BYTE *)(v4 + result) = 1;
    v13 = v1[1];
    v1[4] ^= *(_DWORD *)(v13 + 4 * result);
    *(_DWORD *)(v13 + 4 * result) = *v1;
    v1[4] ^= *(_DWORD *)(v1[1] + 4 * result);
  }
  return result;
}

//----- (004AA8C0) --------------------------------------------------------
BOOL __thiscall sub_4AA8C0(_DWORD *this)
{
  int v1; // esi
  int v2; // eax
  _DWORD *v3; // edx

  v1 = this[3];
  v2 = 0;
  if ( v1 > 0 )
  {
    v3 = (_DWORD *)this[1];
    do
    {
      v2 ^= *v3;
      ++v3;
      --v1;
    }
    while ( v1 );
  }
  return v2 == this[4];
}

//----- (004AA8F0) --------------------------------------------------------
void __thiscall sub_4AA8F0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // eax
  void *v3; // edi
  void *v4; // eax
  size_t v5; // ST08_4

  v1 = this;
  v2 = this[3];
  if ( v2 > 0 )
  {
    v3 = (void *)this[1];
    v4 = malloc(4 * v2);
    v5 = 4 * v1[3];
    v1[1] = v4;
    memcpy(v4, v3, v5);
    if ( v3 )
      free(v3);
  }
}

//----- (004AA930) --------------------------------------------------------
BOOL __thiscall sub_4AA930(_DWORD *this, int a2, _DWORD *a3, int a4, int a5)
{
  int v5; // eax
  int v6; // esi
  signed __int16 *v7; // eax

  v5 = this[95];
  v6 = *(signed __int16 *)(v5 + 8 * a2);
  v7 = (signed __int16 *)(v5 + 8 * a2);
  return a4 + v6 >= *a3 && a5 + v7[1] >= a3[1] && a4 + v7[2] <= a3[2] && a5 + v7[3] <= a3[3];
}

//----- (004AA990) --------------------------------------------------------
BOOL __thiscall sub_4AA990(_DWORD *this, int a2, _DWORD *a3, int a4, int a5)
{
  int v5; // eax
  int v6; // esi
  signed __int16 *v7; // eax

  v5 = this[95];
  v6 = *(signed __int16 *)(v5 + 8 * a2);
  v7 = (signed __int16 *)(v5 + 8 * a2);
  return a4 + v6 <= a3[2] && a5 + v7[1] <= a3[3] && a4 + v7[2] >= *a3 && a5 + v7[3] >= a3[1];
}

//----- (004AAA00) --------------------------------------------------------
BOOL __cdecl sub_4AAA00(int a1, signed __int16 *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  int v4; // eax
  int v5; // eax

  v3 = *(_DWORD **)(a1 + 4 * (*((_DWORD *)a2 + 1) & 0x1FFF));
  if ( !v3 )
    return 0;
  if ( *((_DWORD *)a2 + 3) & 0x40000000 )
    v4 = (*((_DWORD *)a2 + 2) >> 13) & 0x1FFF;
  else
    v4 = 0;
  if ( dword_53A7C4 )
    v5 = 7 * v4 / 10;
  else
    v5 = 0;
  return sub_4AA990(v3, (*((_DWORD *)a2 + 1) >> 13) & 0x7F, a3, *a2, a2[1] - v5);
}
// 53A7C4: using guessed type int dword_53A7C4;

//----- (004AAB10) --------------------------------------------------------
void sub_4AAB10()
{
  srand(0x82C0u);
}

//----- (004AAB20) --------------------------------------------------------
char *__thiscall sub_4AAB20(char *this, int a2)
{
  signed int v2; // ecx
  unsigned __int8 *v3; // edi
  unsigned int v4; // edx
  int v5; // esi
  int v6; // ebp
  int v7; // eax
  int v8; // eax
  int v9; // esi
  __int16 v10; // si
  unsigned int v11; // edx
  int v12; // esi
  int v13; // ebp
  int v14; // eax
  int v15; // eax
  int v16; // esi
  __int16 v17; // si
  unsigned int v18; // edx
  int v19; // esi
  int v20; // ebp
  int v21; // eax
  int v22; // eax
  int v23; // esi
  __int16 v24; // si
  unsigned int v25; // edx
  int v26; // esi
  int v27; // ebp
  int v28; // eax
  int v29; // eax
  int v30; // esi
  __int16 v31; // si
  char *result; // eax
  char *v33; // [esp+10h] [ebp-8h]
  int v34; // [esp+14h] [ebp-4h]

  v33 = this;
  v2 = 0;
  v34 = dword_576828;
  v3 = (unsigned __int8 *)(v33 + 25);
  do
  {
    v4 = (signed int)((unsigned __int64)(274877907i64 * a2 * v3[1]) >> 32) >> 6;
    v5 = v4 + (v4 >> 31);
    if ( v5 > 255 )
      LOWORD(v5) = 255;
    v6 = 255;
    if ( a2 * *v3 / 1000 <= 255 )
      v6 = a2 * *v3 / 1000;
    v7 = a2 * *(v3 - 1) / 1000;
    if ( v7 > 255 )
      v7 = 255;
    v8 = v7 >> 3;
    v9 = v6 | 32 * (v5 & 0xFFF8);
    if ( v34 == 2 )
      v10 = v9 & 0xFFF8;
    else
      v10 = 2 * (v9 & 0xFFFC);
    *(_WORD *)(v2 + *((_DWORD *)v33 + 1296)) = v8 | 4 * v10;
    v11 = (signed int)((unsigned __int64)(274877907i64 * a2 * v3[5]) >> 32) >> 6;
    v12 = v11 + (v11 >> 31);
    if ( v12 > 255 )
      LOWORD(v12) = 255;
    v13 = 255;
    if ( a2 * v3[4] / 1000 <= 255 )
      v13 = a2 * v3[4] / 1000;
    v14 = a2 * v3[3] / 1000;
    if ( v14 > 255 )
      v14 = 255;
    v15 = v14 >> 3;
    v16 = v13 | 32 * (v12 & 0xFFF8);
    if ( v34 == 2 )
      v17 = v16 & 0xFFF8;
    else
      v17 = 2 * (v16 & 0xFFFC);
    *(_WORD *)(v2 + *((_DWORD *)v33 + 1296) + 2) = v15 | 4 * v17;
    v18 = (signed int)((unsigned __int64)(274877907i64 * a2 * v3[9]) >> 32) >> 6;
    v19 = v18 + (v18 >> 31);
    if ( v19 > 255 )
      LOWORD(v19) = 255;
    v20 = 255;
    if ( a2 * v3[8] / 1000 <= 255 )
      v20 = a2 * v3[8] / 1000;
    v21 = a2 * v3[7] / 1000;
    if ( v21 > 255 )
      v21 = 255;
    v22 = v21 >> 3;
    v23 = v20 | 32 * (v19 & 0xFFF8);
    if ( v34 == 2 )
      v24 = v23 & 0xFFF8;
    else
      v24 = 2 * (v23 & 0xFFFC);
    *(_WORD *)(v2 + *((_DWORD *)v33 + 1296) + 4) = v22 | 4 * v24;
    v25 = (signed int)((unsigned __int64)(274877907i64 * a2 * v3[13]) >> 32) >> 6;
    v26 = v25 + (v25 >> 31);
    if ( v26 > 255 )
      LOWORD(v26) = 255;
    v27 = 255;
    if ( a2 * v3[12] / 1000 <= 255 )
      v27 = a2 * v3[12] / 1000;
    v28 = a2 * v3[11] / 1000;
    if ( v28 > 255 )
      v28 = 255;
    v29 = v28 >> 3;
    v30 = v27 | 32 * (v26 & 0xFFF8);
    if ( v34 == 2 )
      v31 = v30 & 0xFFF8;
    else
      v31 = 2 * (v30 & 0xFFFC);
    *(_WORD *)(v2 + *((_DWORD *)v33 + 1296) + 6) = v29 | 4 * v31;
    v2 += 8;
    v3 += 16;
  }
  while ( v2 < 1024 );
  result = v33;
  *((_WORD *)v33 + 2594) = *(_WORD *)(*((_DWORD *)v33 + 1296)
                                    + 2 * ((unsigned int)**((unsigned __int16 **)v33 + 1292) >> 7));
  return result;
}
// 576828: using guessed type int dword_576828;

//----- (004AAE30) --------------------------------------------------------
void __userpurge sub_4AAE30(int a1@<ecx>, int a2@<edi>, int a3, int a4, int a5, _DWORD *a6, int a7)
{
  int v7; // ebx
  _DWORD *v8; // ecx
  int v9; // eax
  bool v10; // sf
  int v11; // edi
  int v12; // ST50_4
  int v13; // esi
  int v14; // ST58_4
  int v15; // ST64_4
  int v16; // ebp
  int i; // edi
  int v18; // esi
  LONG v19; // eax
  int v20; // edx
  int v21; // eax
  int v22; // ebx
  int v23; // ecx
  int v24; // ebp
  int v25; // esi
  LONG v26; // eax
  int v27; // edi
  int v28; // [esp-8h] [ebp-78h]
  int v29; // [esp+Ch] [ebp-64h]
  int v30; // [esp+10h] [ebp-60h]
  _BYTE *v31; // [esp+14h] [ebp-5Ch]
  LONG v32; // [esp+18h] [ebp-58h]
  int v33; // [esp+1Ch] [ebp-54h]
  int v34; // [esp+20h] [ebp-50h]
  int v35; // [esp+24h] [ebp-4Ch]
  int v36; // [esp+28h] [ebp-48h]
  int v37; // [esp+2Ch] [ebp-44h]
  int v38; // [esp+34h] [ebp-3Ch]
  int v39; // [esp+38h] [ebp-38h]
  int v40; // [esp+3Ch] [ebp-34h]
  int v41; // [esp+40h] [ebp-30h]
  struct tagRECT rcDst; // [esp+44h] [ebp-2Ch]
  RECT rcSrc2; // [esp+54h] [ebp-1Ch]
  char v44; // [esp+64h] [ebp-Ch]
  int v45; // [esp+80h] [ebp+10h]

  v7 = a1;
  v8 = a6;
  if ( a6 )
  {
    v9 = *a6 / 16;
    v10 = *a6 < 0;
    v28 = a2;
    v45 = *a6 / 16;
    if ( v10 )
      v45 = v9 - 1;
    v11 = v8[1];
    v12 = (v8[2] - 1) / 16;
    v13 = v11 / 16;
    if ( v11 < 0 )
      --v13;
    v14 = *(_DWORD *)(*(_DWORD *)(v7 + 5196) + 4 * (**(_BYTE **)(v7 + 5168) & 0x7F));
    v15 = (v8[3] - 1) / 16;
    (*(void (__stdcall **)(LONG *, int))(*(_DWORD *)a3 + 72))(&rcSrc2.bottom, v28);
    v33 = 16 * v13;
    v32 = 16 * v13 - v45;
    v16 = v13;
    v34 = v13;
    if ( v13 <= v15 )
    {
      for ( i = 16 * a7; ; i = 16 * a7 )
      {
        v18 = a7;
        v19 = i - a5;
        v36 = i;
        v30 = a7;
        if ( a7 <= v37 )
        {
          v31 = (_BYTE *)(a7 + *(_DWORD *)(v7 + 5168) + 3 * v16 * *(_DWORD *)(v7 + 4) + 2 * a7);
          do
          {
            rcSrc2.left = v19;
            v40 = v19 + 16;
            rcSrc2.right = v19 + 16;
            rcSrc2.bottom = v32 + 16;
            rcSrc2.top = v32;
            if ( IntersectRect(&rcDst, (const RECT *)&v44, &rcSrc2) )
            {
              (*(void (__stdcall **)(struct tagRECT *))(*(_DWORD *)a4 + 64))(&rcDst);
              if ( v18 < 0 || v18 >= *(_DWORD *)(v7 + 4) || v16 < 0 || v16 >= *(_DWORD *)(v7 + 8) )
              {
                v29 = v38;
                v21 = v38;
              }
              else
              {
                v20 = *v31 & 0x7F;
                v21 = *(_DWORD *)(*(_DWORD *)(v7 + 5196) + 4 * v20);
                v29 = *(_DWORD *)(*(_DWORD *)(v7 + 5196) + 4 * v20);
              }
              if ( v21 )
              {
                v22 = *(signed __int16 *)(v21 + 172);
                v23 = *(signed __int16 *)(v21 + 174);
                v39 = v23;
                v24 = v22 * ((i + 500 * v22) / v22 - 500) - a5;
                v25 = v23 * ((v33 + 500 * v23) / v23 - 500) - v45;
                if ( v25 < rcDst.bottom )
                {
                  v26 = rcDst.right;
                  do
                  {
                    v27 = v24;
                    if ( v24 < v26 )
                    {
                      do
                      {
                        sub_4A50B0(v29, 0, a4, v27, v25, -2147483645, 0, 0, 0, 0);
                        v26 = rcDst.right;
                        v27 += v22;
                      }
                      while ( v27 < rcDst.right );
                      v23 = v39;
                    }
                    v25 += v23;
                  }
                  while ( v25 < rcDst.bottom );
                  i = v36;
                }
                v7 = v35;
                v16 = v34;
                v18 = v30;
              }
            }
            v31 += 3;
            v19 = v40;
            ++v18;
            i += 16;
            v36 = i;
            v30 = v18;
          }
          while ( v18 <= v37 );
        }
        v32 += 16;
        v33 += 16;
        v34 = ++v16;
        if ( v16 > v41 )
          break;
      }
    }
    (*(void (__cdecl **)(char *))(*(_DWORD *)a4 + 64))(&v44);
  }
}
// 4AAE30: could not find valid save-restore pair for edi

//----- (004AB0E0) --------------------------------------------------------
signed int __thiscall sub_4AB0E0(_DWORD *this, signed int a2, signed int a3, int *a4, int *a5, int *a6, int *a7, int a8, int a9)
{
  int v9; // esi
  int v10; // edi
  int v11; // ebp
  int v12; // ebx
  int v13; // eax
  int v14; // ecx
  int v15; // ebx
  int v16; // eax
  signed int result; // eax
  int v18; // eax
  double v19; // st6
  int v20; // eax
  int v21; // eax
  double v22; // st7
  double v23; // st7
  int v24; // eax
  int v25; // ebx
  double v26; // st7
  double v27; // st6
  double v28; // st5
  double v29; // st4
  int v30; // eax
  int v31; // ebp
  int v32; // eax
  double v33; // st7
  double v34; // st5
  double v35; // st7
  int v36; // eax
  double v37; // st7
  double v38; // st6
  double v39; // st5
  double v40; // st4
  int v41; // eax
  double v42; // st5
  int v43; // eax
  int v44; // eax
  double v45; // st7
  double v46; // st6
  double v47; // st5
  double v48; // st4
  int v49; // [esp+10h] [ebp-34h]
  signed int v50; // [esp+14h] [ebp-30h]
  int v51; // [esp+18h] [ebp-2Ch]
  int v52; // [esp+1Ch] [ebp-28h]
  int v53; // [esp+20h] [ebp-24h]
  _DWORD *v54; // [esp+24h] [ebp-20h]
  int v55; // [esp+28h] [ebp-1Ch]
  int v56; // [esp+2Ch] [ebp-18h]
  int v57; // [esp+30h] [ebp-14h]
  int v58; // [esp+34h] [ebp-10h]
  int v59; // [esp+38h] [ebp-Ch]
  signed int v60; // [esp+64h] [ebp+20h]
  signed int v61; // [esp+64h] [ebp+20h]
  signed int v62; // [esp+64h] [ebp+20h]
  signed int v63; // [esp+64h] [ebp+20h]
  signed int v64; // [esp+64h] [ebp+20h]

  v9 = *a6;
  v54 = this;
  v10 = *a7;
  v58 = *a6;
  v50 = *a6;
  v59 = *a7;
  v49 = *a7;
  if ( dword_53A7C4 )
    v52 = 7 * v10 / 10;
  else
    v52 = *a7;
  v11 = *a5;
  v12 = *a4 / 160000;
  v13 = *a5 / 160000;
  v55 = *a4 / 160000;
  v51 = *a5 / 160000;
  if ( v12 < 0 )
    return 1;
  if ( v13 < 0 )
    return 1;
  if ( v12 >= this[1] )
    return 1;
  if ( v13 >= this[2] )
    return 1;
  v14 = v9 + *a4;
  v57 = v52 + v11;
  v15 = v14 / 160000;
  v16 = (v52 + v11) / 160000;
  v56 = v9 + *a4;
  v53 = (v52 + v11) / 160000;
  if ( v14 / 160000 < 0 || v16 < 0 || v15 >= v54[1] || v16 >= v54[2] )
    return 1;
  if ( a9 )
  {
    *a4 = v14;
    *a5 = v57;
    return 0;
  }
  v18 = sub_4022CA(v55, v51);
  v19 = -0.9429;
  if ( v18 && a2 < *((signed __int16 *)v54 + v18 + 1328) && a3 >= *((signed __int16 *)v54 + v18 + 1296) )
  {
    switch ( v18 )
    {
      case 2:
      case 7:
      case 12:
      case 17:
      case 22:
        if ( v15 < v55 && -v52 > v9 )
          goto LABEL_38;
        break;
      case 3:
      case 8:
      case 13:
      case 18:
      case 23:
        v19 = 0.9429;
        if ( v15 > v55 && v52 < v9 )
        {
          v20 = v9;
          v60 = v9;
          if ( dword_53A7C4 )
            goto LABEL_39;
          goto LABEL_31;
        }
        break;
      case 4:
      case 9:
      case 14:
      case 19:
      case 24:
        v19 = 0.9429;
        if ( v15 < v55 && v52 > v9 )
        {
          v20 = v9;
          v60 = v9;
          if ( dword_53A7C4 )
            goto LABEL_39;
LABEL_31:
          v9 = v10;
          v10 = v20;
          v50 = v9;
          v49 = v20;
        }
        break;
      case 5:
      case 10:
      case 15:
      case 20:
      case 25:
        if ( v15 > v55 && -v52 < v9 )
        {
LABEL_38:
          v21 = v9;
          v60 = v9;
          if ( dword_53A7C4 )
          {
LABEL_39:
            v22 = (double)v49;
            v9 = (signed int)(-0.3331 * (double)v50 + v22 * v19);
            v50 = (signed int)(-0.3331 * (double)v50 + v22 * v19);
            v23 = v22 * 0.3331 + v19 * (double)v60;
            v10 = (signed int)v23;
            v49 = (signed int)v23;
          }
          else
          {
            v9 = -v10;
            v10 = -v21;
            v50 = v9;
            v49 = -v21;
          }
        }
        break;
      case 26:
        if ( v9 < 0 )
        {
          v9 = -v9;
          v50 = v9;
        }
        break;
      case 27:
        if ( v9 > 0 )
        {
          v9 = -v9;
          v50 = v9;
        }
        break;
      default:
        break;
    }
    if ( v9 != v58 )
      goto LABEL_131;
    if ( v10 != v59 )
    {
LABEL_131:
      *a6 = v9;
      *a7 = v10;
      return 1;
    }
  }
  v24 = sub_4022CA(v15, v51);
  if ( v24 && a2 < *((signed __int16 *)v54 + v24 + 1328) && a3 >= *((signed __int16 *)v54 + v24 + 1296) )
  {
    switch ( v24 )
    {
      case 1:
      case 6:
      case 11:
      case 16:
      case 21:
      case 30:
      case 31:
        goto LABEL_46;
      case 2:
      case 7:
      case 12:
      case 17:
      case 22:
        if ( v55 < v15 )
          goto LABEL_46;
        if ( v56 + v11 - 160000 * (v15 + v51) >= 160000 )
          goto LABEL_51;
        goto LABEL_64;
      case 3:
      case 8:
      case 13:
      case 18:
      case 23:
        if ( v55 > v15 )
          goto LABEL_46;
        if ( v56 - 160000 * v15 > v11 - 160000 * v51 )
          goto LABEL_55;
        goto LABEL_51;
      case 4:
      case 9:
      case 14:
      case 19:
      case 24:
        if ( v55 < v15 )
          goto LABEL_46;
        if ( v56 - 160000 * v15 >= v11 - 160000 * v51 )
          goto LABEL_51;
LABEL_55:
        v61 = v9;
        if ( dword_53A7C4 )
        {
          v26 = (double)v49;
          v27 = (double)v50 * -0.3331;
          v28 = v26;
          v29 = 0.9429;
          goto LABEL_57;
        }
        v25 = v10;
        goto LABEL_67;
      case 5:
      case 10:
      case 15:
      case 20:
      case 25:
        if ( v55 > v15 )
          goto LABEL_46;
        if ( v56 + v11 - 160000 * (v15 + v51) <= 160000 )
          goto LABEL_51;
LABEL_64:
        v61 = v9;
        if ( dword_53A7C4 )
        {
          v26 = (double)v49;
          v27 = (double)v50 * -0.3331;
          v28 = v26;
          v29 = -0.9429;
LABEL_57:
          v25 = (signed int)(v28 * v29 + v27);
          v10 = (signed int)(v29 * (double)v61 + v26 * 0.3331);
        }
        else
        {
          v25 = -v10;
          v9 = -v9;
LABEL_67:
          v10 = v9;
        }
LABEL_68:
        *a6 = v25;
        *a7 = v10;
        break;
      case 26:
        if ( v9 >= 0 )
          goto LABEL_51;
LABEL_46:
        v25 = -v9;
        goto LABEL_68;
      case 27:
        if ( v9 <= 0 )
          goto LABEL_51;
        v25 = -v9;
        goto LABEL_68;
      default:
        goto LABEL_51;
    }
    return 1;
  }
LABEL_51:
  if ( !*(_BYTE *)(sub_401DD4(v15, v51) + a8) )
  {
    *a6 = -v58;
    return 2;
  }
  v30 = sub_4022CA(v15, v51);
  if ( v30 && a2 < *((signed __int16 *)v54 + v30 + 1328) && a3 >= *((signed __int16 *)v54 + v30 + 1296) )
  {
    switch ( v30 )
    {
      case 2:
      case 7:
      case 12:
      case 17:
      case 22:
        v31 = (v52 + v11) / 160000;
        if ( v53 < v51 && -v52 > v9 )
        {
          v32 = v9;
          v62 = v9;
          if ( dword_53A7C4 )
          {
            v33 = (double)v49;
            v34 = v33 * -0.9429 + (double)v50 * -0.3331;
            v9 = (signed int)v34;
            v50 = (signed int)v34;
            v35 = -0.9429 * (double)v62 + v33 * 0.3331;
            v10 = (signed int)v35;
            v49 = (signed int)v35;
          }
          else
          {
            v9 = -v10;
            v10 = -v32;
            v50 = v9;
            v49 = -v32;
          }
        }
        goto LABEL_77;
      case 3:
      case 8:
      case 13:
      case 18:
      case 23:
        v31 = (v52 + v11) / 160000;
        if ( v53 < v51 && v52 < v9 )
          goto LABEL_89;
        goto LABEL_77;
      case 4:
      case 9:
      case 14:
      case 19:
      case 24:
        v31 = (v52 + v11) / 160000;
        if ( v53 > v51 && v52 > v9 )
        {
LABEL_89:
          v36 = v9;
          v63 = v9;
          if ( dword_53A7C4 )
          {
            v37 = (double)v49;
            v38 = (double)v50 * -0.3331;
            v39 = v37;
            v40 = 0.9429;
            goto LABEL_99;
          }
          v9 = v10;
          v10 = v36;
          v50 = v9;
          v49 = v36;
        }
        goto LABEL_77;
      case 5:
      case 10:
      case 15:
      case 20:
      case 25:
        v31 = (v52 + v11) / 160000;
        if ( v53 > v51 && -v52 < v9 )
        {
          v41 = v9;
          v63 = v9;
          if ( dword_53A7C4 )
          {
            v37 = (double)v49;
            v38 = (double)v50 * -0.3331;
            v39 = v37;
            v40 = -0.9429;
LABEL_99:
            v42 = v39 * v40 + v38;
            v9 = (signed int)v42;
            v50 = (signed int)v42;
            v10 = (signed int)(v40 * (double)v63 + v37 * 0.3331);
            v49 = (signed int)(v40 * (double)v63 + v37 * 0.3331);
          }
          else
          {
            v9 = -v10;
            v10 = -v41;
            v50 = v9;
            v49 = -v41;
          }
        }
        goto LABEL_77;
      case 28:
        if ( v10 >= 0 )
          break;
        goto LABEL_75;
      case 29:
        if ( v10 > 0 )
        {
LABEL_75:
          v10 = -v10;
          v49 = v10;
        }
        break;
      default:
        break;
    }
    v31 = (v52 + v11) / 160000;
LABEL_77:
    if ( v9 != v58 || v10 != v59 )
    {
      *a6 = v9;
      *a7 = v10;
      return 1;
    }
  }
  else
  {
    v31 = (v52 + v11) / 160000;
  }
  v43 = sub_4022CA(v15, v31);
  if ( v43 && a2 < *((signed __int16 *)v54 + v43 + 1328) && a3 >= *((signed __int16 *)v54 + v43 + 1296) )
  {
    switch ( v43 )
    {
      case 1:
      case 6:
      case 11:
      case 16:
      case 21:
      case 30:
      case 31:
        goto LABEL_107;
      case 2:
      case 7:
      case 12:
      case 17:
      case 22:
        if ( v51 < v31 )
          goto LABEL_107;
        if ( v56 + v57 - 160000 * (v15 + v31) >= 160000 )
          goto LABEL_112;
        goto LABEL_124;
      case 3:
      case 8:
      case 13:
      case 18:
      case 23:
        if ( v51 < v31 )
          goto LABEL_107;
        if ( v56 - 160000 * v15 > v57 - 160000 * v31 )
          goto LABEL_116;
        goto LABEL_112;
      case 4:
      case 9:
      case 14:
      case 19:
      case 24:
        if ( v51 > v31 )
          goto LABEL_107;
        if ( v56 - 160000 * v15 >= v57 - 160000 * v31 )
          goto LABEL_112;
LABEL_116:
        v44 = v9;
        v64 = v9;
        if ( !dword_53A7C4 )
          goto LABEL_127;
        v45 = (double)v49;
        v46 = (double)v50 * -0.3331;
        v47 = v45;
        v48 = 0.9429;
        goto LABEL_118;
      case 5:
      case 10:
      case 15:
      case 20:
      case 25:
        if ( v51 > v31 )
          goto LABEL_107;
        if ( v56 + v57 - 160000 * (v15 + v31) <= 160000 )
          goto LABEL_112;
LABEL_124:
        v64 = v9;
        if ( dword_53A7C4 )
        {
          v45 = (double)v49;
          v46 = (double)v50 * -0.3331;
          v47 = v45;
          v48 = -0.9429;
LABEL_118:
          *a6 = (signed int)(v47 * v48 + v46);
          *a7 = (signed int)(v48 * (double)v64 + v45 * 0.3331);
          result = 1;
        }
        else
        {
          v10 = -v10;
          v44 = -v9;
LABEL_127:
          *a6 = v10;
          *a7 = v44;
          result = 1;
        }
        break;
      case 28:
        if ( v10 >= 0 )
          goto LABEL_112;
LABEL_107:
        *a6 = v9;
        *a7 = -v10;
        result = 1;
        break;
      case 29:
        if ( v10 <= 0 )
          goto LABEL_112;
        *a6 = v9;
        *a7 = -v10;
        result = 1;
        break;
      default:
        goto LABEL_112;
    }
  }
  else
  {
LABEL_112:
    if ( *(_BYTE *)(sub_401DD4(v15, v31) + a8) )
    {
      *a4 = v56;
      *a5 = v57;
      result = 0;
    }
    else
    {
      *a7 = -v59;
      result = 2;
    }
  }
  return result;
}
// 401DD4: using guessed type _DWORD __stdcall sub_401DD4(_DWORD, _DWORD);
// 4022CA: using guessed type _DWORD __stdcall sub_4022CA(_DWORD, _DWORD);
// 53A7C4: using guessed type int dword_53A7C4;

//----- (004ABD20) --------------------------------------------------------
signed int __thiscall sub_4ABD20(_DWORD *this, int a2, int a3, int a4, signed int a5, signed int a6, int *a7, int *a8, int *a9, int *a10, int a11, int a12)
{
  int v12; // ebp
  _DWORD *v13; // ebx
  int v14; // eax
  int v15; // esi
  int v16; // ecx
  int v17; // edi
  int v18; // eax
  signed int result; // eax
  int v20; // [esp+10h] [ebp-10h]
  int v21; // [esp+14h] [ebp-Ch]
  int v22; // [esp+18h] [ebp-8h]
  int v23; // [esp+1Ch] [ebp-4h]

  v12 = a12;
  v13 = this;
  v14 = *a10;
  v15 = 0;
  v20 = *a9;
  v21 = v14;
  if ( a3 <= 0 )
    return sub_4AB0E0(v13, a5, a6, a7, a8, a9, a10, a11, v12);
  v16 = *a8;
  v17 = a2;
  a12 = *a7;
  v22 = v16;
  while ( 1 )
  {
    v18 = *(_DWORD *)(v17 + 8 * v15 + 4);
    v23 = a12 + *(_DWORD *)(v17 + 8 * v15);
    a2 = v22 + v18;
    result = sub_4AB0E0(v13, a5, a6, &v23, &a2, &v20, &v21, a11, v12);
    if ( result )
      break;
    v15 += a4;
    if ( v15 >= a3 )
      return sub_4AB0E0(v13, a5, a6, a7, a8, a9, a10, a11, v12);
  }
  *a9 = v20;
  *a10 = v21;
  return result;
}

//----- (004ABE10) --------------------------------------------------------
void __stdcall sub_4ABE10(void *Memory, int a2)
{
  int i; // esi
  void (__stdcall ***v3)(signed int); // ecx

  for ( i = 0; i < a2; ++i )
  {
    v3 = (void (__stdcall ***)(signed int))*((_DWORD *)Memory + i);
    if ( v3 )
      (**v3)(1);
  }
  free(Memory);
}

//----- (004ABE90) --------------------------------------------------------
int __thiscall sub_4ABE90(int *this, _DWORD *a2, int a3, int *a4, int a5, int a6)
{
  _DWORD *v6; // ebp
  int *v7; // edi
  signed int v8; // eax
  int v9; // ecx
  int v10; // edx
  int v11; // esi
  signed int v12; // ebx
  int v13; // edx
  int v14; // eax
  __int64 v15; // rax
  int v16; // ecx
  int v17; // eax
  int v18; // eax
  int v19; // edx
  int v20; // eax
  int v21; // ecx
  signed __int16 *v22; // esi
  int v23; // eax
  unsigned int v24; // ebx
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // ecx
  BOOL v29; // eax
  int v30; // ecx
  int v31; // edx
  int v32; // ebx
  signed __int16 *v33; // eax
  int v35; // [esp+10h] [ebp-14h]
  int v36; // [esp+14h] [ebp-10h]
  signed int v37; // [esp+18h] [ebp-Ch]
  signed int v38; // [esp+1Ch] [ebp-8h]
  unsigned int v39; // [esp+20h] [ebp-4h]
  int v40; // [esp+28h] [ebp+4h]

  v6 = a2;
  v7 = this;
  v8 = (*a2 - 320) / 256 <= 0 ? 0 : (*a2 - 320) / 256;
  v9 = this[7] - 1;
  v37 = v9;
  if ( v9 >= v8 )
    v37 = (*a2 - 320) / 256 <= 0 ? 0 : (*a2 - 320) / 256;
  v10 = v7[8];
  v11 = v10 - 1;
  v12 = v10 - 1;
  if ( v10 - 1 >= ((a2[1] - 320) / 256 <= 0 ? 0 : (unsigned int)((a2[1] - 320) / 256)) )
    v12 = (a2[1] - 320) / 256 <= 0 ? 0 : (a2[1] - 320) / 256;
  v13 = a2[2] / 256;
  v36 = a2[2] / 256;
  v14 = v13;
  if ( v13 >= v9 )
    v14 = v9;
  if ( v14 >= 0 )
  {
    if ( v13 >= v9 )
      v36 = v9;
  }
  else
  {
    v36 = 0;
  }
  v15 = (signed int)a2[3];
  v40 = a2[3] / 256;
  v17 = (BYTE4(v15) + (signed int)v15) >> 8;
  v16 = v17;
  if ( v17 >= v11 )
    v17 = v11;
  if ( v17 >= 0 )
  {
    if ( v16 >= v11 )
    {
      v40 = v11;
      v16 = v11;
    }
  }
  else
  {
    v40 = 0;
    v16 = 0;
  }
  v18 = 0;
  v35 = 0;
  v19 = v12;
  v38 = v12;
  if ( v12 <= v16 )
  {
    while ( 1 )
    {
      v20 = v19 * v7[7];
      v21 = v7[6];
      v22 = *(signed __int16 **)(v21 + 4 * (v20 + v37));
      v23 = v36 + v20;
      v24 = *(_DWORD *)(v21 + 4 * v23 + 4);
      v39 = *(_DWORD *)(v21 + 4 * v23 + 4);
      if ( (unsigned int)v22 >= v24 )
        goto LABEL_37;
      do
      {
        v25 = v7[4];
        if ( v35 >= v25 - 1 )
        {
          v26 = v25 + 512;
          v7[4] = v26;
          v7[3] = sub_48C990(v7[3], 4 * v26, 0x2000);
        }
        v27 = (*((_DWORD *)v22 + 2) >> 26) & 7;
        if ( v27 >= a5 && v27 <= a6 )
        {
          v28 = *v7;
          if ( a3 )
          {
            v29 = sub_4AAA00(v28, v22, v6);
          }
          else
          {
            v30 = *(_DWORD *)(v28 + 4 * (*((_DWORD *)v22 + 1) & 0x1FFF));
            if ( !v30 )
              goto LABEL_35;
            v31 = *v22;
            v32 = v22[1];
            v33 = (signed __int16 *)(*(_DWORD *)(v30 + 380) + 8 * ((*((_DWORD *)v22 + 1) >> 13) & 0x7F));
            v29 = v31 + *v33 >= *v6 && v32 + v33[1] >= v6[1] && v31 + v33[2] <= v6[2] && v32 + v33[3] <= v6[3];
            v24 = v39;
          }
          if ( v29 )
            *(_DWORD *)(v7[3] + 4 * v35++) = v22;
        }
LABEL_35:
        v22 = (signed __int16 *)((char *)v22 + 17);
      }
      while ( (unsigned int)v22 < v24 );
      v19 = v38;
LABEL_37:
      v38 = ++v19;
      if ( v19 > v40 )
      {
        v18 = v35;
        break;
      }
    }
  }
  *(_DWORD *)(v7[3] + 4 * v18) = 0;
  *a4 = v18;
  return v7[3];
}

//----- (004AC470) --------------------------------------------------------
_DWORD *__cdecl sub_4AC470(_DWORD *a1, unsigned int a2)
{
  _DWORD *result; // eax
  int i; // ecx

  result = a1;
  for ( i = *a1; i; ++result )
  {
    if ( ((*(_DWORD *)(i + 8) >> 26) & 7u) >= a2 )
      break;
    i = result[1];
  }
  return result;
}

//----- (004AC4A0) --------------------------------------------------------
int __cdecl sub_4AC4A0(_DWORD *a1, int a2, signed __int16 **a3, int a4, int a5, int a6, unsigned int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15)
{
  int result; // eax
  signed __int16 *v16; // esi
  unsigned int v17; // ebx
  unsigned int v18; // edi
  unsigned int v19; // eax
  int v20; // ecx
  int v21; // ebp
  int v22; // edi
  int v23; // edi
  int v24; // edx
  int v25; // ecx
  int v26; // ebx
  int v27; // eax
  int v28; // edx
  int v29; // [esp+4h] [ebp-14h]
  signed int v30; // [esp+8h] [ebp-10h]
  int v31; // [esp+Ch] [ebp-Ch]
  signed int v32; // [esp+14h] [ebp-4h]

  v32 = dword_576828 != 2 ? 2016 : 992;
  result = (int)a3;
  v16 = *a3;
  if ( *a3 )
  {
    while ( 1 )
    {
      v17 = *((_DWORD *)v16 + 2);
      v18 = (*((_DWORD *)v16 + 2) >> 26) & 7;
      if ( v18 >= a7 )
        return result;
      if ( !a1 || sub_4AAA00(a2, v16, a1) )
      {
        v19 = *((_DWORD *)v16 + 1);
        v20 = *((_DWORD *)v16 + 1) & 0x1FFF;
        v21 = *(_DWORD *)(a2 + 4 * v20);
        v31 = *(_DWORD *)(a2 + 4 * v20);
        if ( v21 )
        {
          v30 = 0;
          if ( v18 >= 3
            && !(v19 & 0x3FF00000)
            && *(_WORD *)(v21 + 354) < 0x100u
            && *(_BYTE *)(v21 + 198)
            && !(v19 & 0xC0000000) )
          {
            v30 = 1;
          }
          if ( !a10 || v30 )
            break;
        }
      }
LABEL_48:
      v16 = a3[1];
      result = (int)(a3 + 1);
      ++a3;
      if ( !v16 )
        return result;
    }
    v22 = (v17 >> 13) & 0x1FFF;
    if ( a8 == -1 )
    {
      v23 = sub_4A10E0(v21, (v19 >> 13) & 0x7F);
    }
    else
    {
      v24 = v17 & 0x1FFF;
      if ( !(v17 & 0x1FFF) )
        v24 = *v16 + v16[1];
      v25 = (v19 >> 20) & 0x3FF;
      if ( (unsigned int)v25 > 0x320 )
        v25 = 100 * (v25 - 800);
      v26 = *(signed __int16 *)(v21 + 178);
      v27 = v26 * ((v19 >> 13) & 0x7F);
      if ( v25 )
      {
        v28 = (v24 + a8) % (v25 + v22);
        v21 = v31;
        if ( v28 >= v22 )
          v23 = v27 + v26 * (v28 - v22) / v25;
        else
          v23 = v27;
      }
      else
      {
        v23 = v27;
      }
    }
    v29 = dword_53B1E8[*((_DWORD *)v16 + 1) >> 30];
    if ( !a10 && v30 && a8 != -1 )
      v29 = 9;
    if ( *((_DWORD *)v16 + 2) >= 0
      || abs(*v16 + *(signed __int16 *)(v21 + 172) / 2 - a11) >= a14
      || abs(v16[1] + *(signed __int16 *)(v21 + 174) / 2 - a12) >= a14
      || !a15 && v16[1] + *(signed __int16 *)(v21 + 174) / 2 - a12 <= a14 / -2 )
    {
      goto LABEL_38;
    }
    if ( a13 )
    {
      if ( a13 != 1 )
      {
        if ( a13 == 3 )
          v23 = -1;
LABEL_38:
        if ( v29 == 3 && a10 && v30 )
          v29 = 10;
        goto LABEL_42;
      }
      v29 = 6;
    }
    else
    {
      v29 = 11;
    }
LABEL_42:
    if ( v23 >= 0 )
    {
      sub_4A50B0(
        v21,
        v23,
        a4,
        *v16 - a5,
        v16[1] - a6,
        v29 | ((*((_DWORD *)v16 + 3) & 0x3F800000 | 0x80000u) >> 7) | ((*((unsigned __int8 *)v16 + 16) - 256) << 23),
        *((_DWORD *)v16 + 3) & 0x7FFFFF,
        0,
        0,
        0);
      if ( a9 )
        sub_4A11C0((_DWORD *)v21, v23, a4, *v16 - a5, v16[1] - a6, v32);
    }
    goto LABEL_48;
  }
  return result;
}
// 53A7C4: using guessed type int dword_53A7C4;
// 576828: using guessed type int dword_576828;

//----- (004AC7D0) --------------------------------------------------------
void sub_4AC7D0()
{
  srand(0x82BFu);
}

//----- (004AC7E0) --------------------------------------------------------
int __thiscall sub_4AC7E0(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi
  int v7; // ecx
  int v8; // eax
  int v9; // eax
  int v10; // ebx
  int v11; // eax
  signed __int16 *v12; // edi
  int v13; // ecx
  int v14; // ebx
  int v15; // eax
  int v16; // ebp
  int v17; // edx
  int v18; // eax
  int v19; // ebp
  int i; // ebx
  int v22; // [esp+10h] [ebp+4h]
  unsigned int v23; // [esp+14h] [ebp+8h]
  int v24; // [esp+18h] [ebp+Ch]

  v6 = (int)this;
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  this[4] = 2048;
  this[3] = sub_48C990(0, 0x2000, 1);
  v7 = 1;
  if ( (a5 + 255) / 256 >= 1 )
    v7 = (a5 + 255) / 256;
  v8 = (a6 + 255) / 256;
  *(_DWORD *)(v6 + 28) = v7;
  if ( v8 < 1 )
    v8 = 1;
  *(_DWORD *)(v6 + 32) = v8;
  v9 = v7 * v8;
  v10 = v9 + 1;
  v24 = v9 + 1;
  *(_DWORD *)(v6 + 24) = malloc(4 * (v9 + 1));
  dword_576AE8 = v6;
  sub_48DD20(*(void **)(v6 + 4), *(_DWORD *)(v6 + 8), 0x11u, (int)sub_4AC3D0);
  v11 = *(_DWORD *)(v6 + 8);
  v12 = *(signed __int16 **)(v6 + 4);
  v13 = 0;
  v23 = (unsigned int)&v12[8 * *(_DWORD *)(v6 + 8)] + v11;
  if ( v12 < (signed __int16 *)((char *)&v12[8 * *(_DWORD *)(v6 + 8)] + v11) )
  {
    do
    {
      v14 = *(_DWORD *)(v6 + 28);
      v15 = *v12 / 256;
      v16 = v14 - 1;
      if ( v14 - 1 >= v15 )
        v16 = *v12 / 256;
      if ( v16 >= 0 )
      {
        v22 = v14 - 1;
        if ( v14 - 1 >= v15 )
          v22 = *v12 / 256;
      }
      else
      {
        v22 = 0;
      }
      v17 = *(_DWORD *)(v6 + 32) - 1;
      v18 = v12[1] / 256;
      v19 = *(_DWORD *)(v6 + 32) - 1;
      if ( v17 >= v18 )
        v19 = v12[1] / 256;
      if ( v19 >= 0 )
      {
        if ( v17 < v18 )
          v18 = *(_DWORD *)(v6 + 32) - 1;
      }
      else
      {
        v18 = 0;
      }
      for ( i = v22 + v18 * v14; v13 <= i; ++v13 )
        *(_DWORD *)(*(_DWORD *)(v6 + 24) + 4 * v13) = v12;
      v12 = (signed __int16 *)((char *)v12 + 17);
    }
    while ( (unsigned int)v12 < v23 );
    v10 = v24;
  }
  for ( ; v13 < v10; ++v13 )
    *(_DWORD *)(*(_DWORD *)(v6 + 24) + 4 * v13) = v12;
  return v6;
}
// 4AC3D0: using guessed type int sub_4AC3D0();
// 576AE8: using guessed type int dword_576AE8;

//----- (004AC960) --------------------------------------------------------
char *__thiscall sub_4AC960(char *this, int a2, char *Filename, int a4, int a5, int a6)
{
  char *v6; // esi
  int v7; // ebp
  size_t v8; // ST20_4
  void *v9; // eax
  size_t v10; // ST1C_4
  signed int v11; // edi
  char *v12; // eax
  char *v13; // ebx
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  bool v16; // sf
  unsigned __int8 v17; // of
  int v18; // ebp
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  int v21; // edx
  int v22; // ebp
  _DWORD *v23; // edi
  char *v24; // eax
  signed int v25; // edx
  void *v26; // eax
  size_t v27; // ST1C_4
  int v28; // ebp
  signed int v29; // edi
  int v30; // ebx
  char *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  signed __int16 *v34; // ecx
  int v35; // ebp
  int v36; // ebx
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  signed __int16 *v39; // ecx
  _DWORD *v40; // eax
  int v41; // eax
  char *Memory; // [esp+14h] [ebp-2712Ch]
  char *Memorya; // [esp+14h] [ebp-2712Ch]
  int v45; // [esp+18h] [ebp-27128h]
  char *v46; // [esp+18h] [ebp-27128h]
  signed int v47; // [esp+1Ch] [ebp-27124h]
  int v48; // [esp+1Ch] [ebp-27124h]
  signed int v49; // [esp+20h] [ebp-27120h]
  int v50; // [esp+24h] [ebp-2711Ch]
  char Dst[160000]; // [esp+30h] [ebp-27110h]
  int v52; // [esp+2713Ch] [ebp-4h]

  v6 = this;
  sub_4B5CD0(this, Filename, a5);
  v7 = 0;
  v8 = 4 * *((_DWORD *)v6 + 4);
  v52 = 0;
  v9 = malloc(v8);
  v10 = 4 * *((_DWORD *)v6 + 4);
  *((_DWORD *)v6 + 1299) = v9;
  memset(v9, 0, v10);
  if ( *((_DWORD *)v6 + 4) > 0 )
  {
    v11 = 1;
    v45 = 0;
    v47 = 1;
    Memory = 0;
    do
    {
      if ( !*(_DWORD *)&Memory[*((_DWORD *)v6 + 1299)] )
      {
        v12 = (char *)operator new(0x214u);
        LOBYTE(v52) = 1;
        if ( v12 )
          v13 = sub_4B8820(v12, v7 + *((_DWORD *)v6 + 1289), 0);
        else
          v13 = 0;
        v14 = operator new(0x1E6u);
        LOBYTE(v52) = 2;
        if ( v14 )
          v15 = sub_4A5890(v14, (int)v13, (char *)(*((_DWORD *)v6 + 1289) + v7 + 32), 0);
        else
          v15 = 0;
        *(_DWORD *)&Memory[*((_DWORD *)v6 + 1299)] = v15;
        v17 = __OFSUB__(v11, *((_DWORD *)v6 + 4));
        v16 = v11 - *((_DWORD *)v6 + 4) < 0;
        LOBYTE(v52) = 0;
        if ( v16 ^ v17 )
        {
          v18 = v7 + 64;
          do
          {
            if ( !_stricmp((const char *)(v18 + *((_DWORD *)v6 + 1289)), (const char *)(*((_DWORD *)v6 + 1289) + v45))
              && !*(_DWORD *)(*((_DWORD *)v6 + 1299) + 4 * v11) )
            {
              v19 = operator new(0x1E6u);
              LOBYTE(v52) = 3;
              if ( v19 )
                v20 = sub_4A5890(v19, (int)v13, (char *)(*((_DWORD *)v6 + 1289) + v18 + 32), 0);
              else
                v20 = 0;
              v21 = *((_DWORD *)v6 + 1299);
              LOBYTE(v52) = 0;
              *(_DWORD *)(v21 + 4 * v11) = v20;
            }
            ++v11;
            v18 += 64;
          }
          while ( v11 < *((_DWORD *)v6 + 4) );
          v7 = v45;
          v11 = v47;
        }
        if ( v13 )
        {
          sub_4B8440((void **)v13);
          j__free(v13);
        }
      }
      Memory += 4;
      ++v11;
      v7 += 64;
      v47 = v11;
      v45 = v7;
    }
    while ( v11 - 1 < *((_DWORD *)v6 + 4) );
  }
  memset(Dst, 0, 0x27100u);
  if ( *((_DWORD *)v6 + 3) > 0 )
  {
    v22 = *((_DWORD *)v6 + 3);
    v23 = (_DWORD *)(*((_DWORD *)v6 + 1293) + 4);
    do
    {
      v24 = &Dst[40 * (*v23 & 0x1FFF) + (((*v23 >> 13) & 0x7F) >> 3)];
      v25 = 128 >> ((unsigned __int8)(*(_WORD *)v23 >> 8) >> 5);
      v23 = (_DWORD *)((char *)v23 + 17);
      *v24 |= v25;
      --v22;
    }
    while ( v22 );
  }
  v26 = malloc(4 * *((_DWORD *)v6 + 5));
  v27 = 4 * *((_DWORD *)v6 + 5);
  *((_DWORD *)v6 + 1298) = v26;
  memset(v26, 0, v27);
  if ( *((_DWORD *)v6 + 5) > 0 )
  {
    v28 = 0;
    v29 = 1;
    v30 = 0;
    v48 = 0;
    v49 = 1;
    v50 = 0;
    v46 = Dst;
    do
    {
      if ( !*(_DWORD *)(v30 + *((_DWORD *)v6 + 1298)) )
      {
        v31 = (char *)operator new(0x214u);
        LOBYTE(v52) = 4;
        if ( v31 )
          Memorya = sub_4B8820(v31, v28 + *((_DWORD *)v6 + 1288), 0);
        else
          Memorya = 0;
        LOBYTE(v52) = 0;
        v32 = operator new(0x1E6u);
        LOBYTE(v52) = 5;
        if ( v32 )
          v33 = sub_4A5890(v32, (int)Memorya, (char *)(*((_DWORD *)v6 + 1288) + v28 + 32), 0);
        else
          v33 = 0;
        *(_DWORD *)(v30 + *((_DWORD *)v6 + 1298)) = v33;
        v34 = *(signed __int16 **)(v30 + *((_DWORD *)v6 + 1298));
        LOBYTE(v52) = 0;
        sub_4A4380(v34, (int)v46);
        if ( v29 < *((_DWORD *)v6 + 5) )
        {
          v35 = v28 + 64;
          v36 = (int)(v46 + 40);
          do
          {
            if ( !_stricmp((const char *)(*((_DWORD *)v6 + 1288) + v35), (const char *)(*((_DWORD *)v6 + 1288) + v48))
              && !*(_DWORD *)(*((_DWORD *)v6 + 1298) + 4 * v29) )
            {
              v37 = operator new(0x1E6u);
              LOBYTE(v52) = 6;
              if ( v37 )
                v38 = sub_4A5890(v37, (int)Memorya, (char *)(*((_DWORD *)v6 + 1288) + v35 + 32), 0);
              else
                v38 = 0;
              *(_DWORD *)(*((_DWORD *)v6 + 1298) + 4 * v29) = v38;
              v39 = *(signed __int16 **)(*((_DWORD *)v6 + 1298) + 4 * v29);
              LOBYTE(v52) = 0;
              sub_4A4380(v39, v36);
            }
            ++v29;
            v35 += 64;
            v36 += 40;
          }
          while ( v29 < *((_DWORD *)v6 + 5) );
          v30 = v50;
          v29 = v49;
          v28 = v48;
        }
        if ( Memorya )
        {
          sub_4B8440((void **)Memorya);
          j__free(Memorya);
        }
      }
      v46 += 40;
      ++v29;
      v30 += 4;
      v28 += 64;
      v50 = v30;
      v49 = v29;
      v48 = v28;
    }
    while ( v29 - 1 < *((_DWORD *)v6 + 5) );
  }
  sub_4A3D00(0, *((_DWORD *)v6 + 680));
  sub_4A3D00(1, *((_DWORD *)v6 + 681));
  sub_4A3D00(2, *((_DWORD *)v6 + 682));
  sub_4A3D00(3, *((_DWORD *)v6 + 683));
  *((_DWORD *)v6 + 1296) = operator new(0x400u);
  sub_4AAB20(v6, a6);
  v40 = operator new(0x24u);
  LOBYTE(v52) = 7;
  if ( v40 )
    v41 = sub_4AC7E0(
            v40,
            *((_DWORD *)v6 + 1298),
            *((_DWORD *)v6 + 1293),
            *((_DWORD *)v6 + 3),
            16 * *((_DWORD *)v6 + 1),
            16 * *((_DWORD *)v6 + 2));
  else
    v41 = 0;
  *((_DWORD *)v6 + 1295) = v41;
  *((_DWORD *)v6 + 1293) = 0;
  return v6;
}
// 4AC960: using guessed type char Dst[160000];

//----- (004ACEA0) --------------------------------------------------------
void __thiscall sub_4ACEA0(void **this)
{
  void **v1; // esi
  void *v2; // edi

  v1 = this;
  j_j__free(this[1296]);
  sub_4ABE10(v1[1299], (int)v1[4]);
  sub_4ABE10(v1[1298], (int)v1[5]);
  v2 = v1[1295];
  if ( v2 )
  {
    sub_48C990(*((_DWORD *)v2 + 1), 0, 1);
    if ( *((_DWORD *)v2 + 6) )
    {
      free(*((void **)v2 + 6));
      *((_DWORD *)v2 + 6) = 0;
    }
    sub_48C990(*((_DWORD *)v2 + 3), 0, 1);
    j__free(v2);
  }
  sub_4B4FE0(v1);
}

//----- (004ACFE0) --------------------------------------------------------
_DWORD *__thiscall sub_4ACFE0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  int *v3; // ebx
  __int16 v4; // ax
  bool v5; // sf
  unsigned __int8 v6; // of
  char v8[8192]; // [esp+Ch] [ebp-2004h]

  v2 = this;
  v3 = this + 1;
  *this = &Lio::`vftable';
  this[14] = 0;
  memset(this + 1, 0, 0x34u);
  v2[13] = -3;
  if ( Dst )
  {
    sub_48CA10((int)v8, Dst);
    v2[14] = j__atol(&v8[1]);
    *v3 = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 2), Dst);
    *((_WORD *)v2 + 20) = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v2[14], 14);
    v5 = v2[14] - 14 < 0;
    *((_WORD *)v2 + 21) = v4;
    if ( !(v5 ^ v6) )
    {
      *((_WORD *)v2 + 22) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 23) = sub_48CBB0(Dst);
    }
    if ( v2[14] >= 21 )
      *((_WORD *)v2 + 24) = sub_48CBB0(Dst);
    if ( v2[14] >= 22 )
      v2[13] = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AD0D0) --------------------------------------------------------
int __thiscall sub_4AD0D0(signed __int16 *this, char *Dest)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  return sprintf(Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v2);
}

//----- (004AD120) --------------------------------------------------------
_BYTE *__stdcall sub_4AD120(_BYTE *a1)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = 0;
  return result;
}

//----- (004AD150) --------------------------------------------------------
int __thiscall sub_4AD150(int this, int a2)
{
  int v2; // eax
  char *v3; // ecx
  char v5; // [esp+8h] [ebp-38h]
  int v6; // [esp+3Ch] [ebp-4h]

  qmemcpy(&v5, (const void *)(this + 4), 0x34u);
  v2 = -1;
  if ( a2 )
    v2 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a2]) >> 8) ^ BYTE2(a2))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a2] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a2))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a2]) >> 8) ^ BYTE2(a2))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a2]) ^ BYTE1(a2))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a2] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v3 = &v5;
  do
    v2 = dword_53A208[(unsigned __int8)(v2 ^ *v3++)] ^ (v2 >> 8) & 0xFFFFFF;
  while ( v3 < (char *)&v6 );
  return ~v2;
}

//----- (004AD220) --------------------------------------------------------
_DWORD *__thiscall sub_4AD220(_DWORD *this, void *Dst)
{
  _DWORD *v2; // edi
  _DWORD *v3; // esi
  char v5[256]; // [esp+14h] [ebp-110h]
  int v6; // [esp+120h] [ebp-4h]

  v2 = this;
  sub_4ACFE0(this, 0);
  v3 = v2 + 15;
  *v2 = &NestedLio::`vftable';
  *v3 = 0;
  v3[1] = 0;
  v3[2] = 0;
  v3[3] = 0;
  v3[4] = 0;
  v3[5] = 0;
  v3[6] = 0;
  v6 = 0;
  v3[7] = 0;
  if ( Dst )
  {
    sub_48CA10((int)v5, Dst);
    v2[14] = j__atol(&v5[1]);
    v2[1] = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 2), Dst);
    sub_48CA10((int)(v2 + 15), Dst);
  }
  return v2;
}
// 51E910: using guessed type void *NestedLio::`vftable';

//----- (004AD310) --------------------------------------------------------
signed int sub_4AD310()
{
  return 10;
}

//----- (004AD320) --------------------------------------------------------
int __fastcall sub_4AD320(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 92) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 92 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AD3E0) --------------------------------------------------------
int __thiscall sub_4AD3E0(_DWORD *this, char *Dest)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(signed int, _DWORD, _DWORD *, _DWORD *))(*this + 4))(25, this[1], this + 2, this + 15);
  return sprintf(Dest, "%d,v%d,%d,\"%s\",\"%s\"", v2);
}

//----- (004AD410) --------------------------------------------------------
int __thiscall sub_4AD410(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 60);
}

//----- (004AD430) --------------------------------------------------------
_DWORD *__thiscall sub_4AD430(_DWORD *this, void *Dst)
{
  _DWORD *v2; // edi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  __int16 v6; // ax
  signed int v7; // eax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &DoorLio::`vftable';
  memset(v2 + 15, 0, 0xB4u);
  if ( Dst )
  {
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 31) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 32) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 11);
    v4 = v2[14] - 11 < 0;
    *((_WORD *)v2 + 33) = v3;
    if ( v4 ^ v5 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    *((_WORD *)v2 + 34) = sub_48CBB0(Dst);
    v6 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 24);
    v4 = v2[14] - 24 < 0;
    *((_WORD *)v2 + 35) = v6;
    if ( !(v4 ^ v5) )
    {
      *((_WORD *)v2 + 36) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 37) = sub_48CBB0(Dst);
    }
    v7 = v2[14];
    if ( v7 < 13 )
    {
      if ( v7 < 7 )
        sub_48EC80((int)(v2 + 19), Dst);
      else
        sub_48ECE0((int)(v2 + 19), Dst);
    }
    else
    {
      sub_401A78((int)(v2 + 19), Dst);
    }
    sub_48CA10((int)(v2 + 34), Dst);
    sub_48CA10((int)(v2 + 40), Dst);
    *((_WORD *)v2 + 92) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 93) = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 47), Dst);
    sub_48CA10((int)(v2 + 53), Dst);
    *((_WORD *)v2 + 118) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 119) = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E92C: using guessed type void *DoorLio::`vftable';

//----- (004AD5B0) --------------------------------------------------------
int __thiscall sub_4AD5B0(char *this, int (__thiscall ***a2)(_DWORD, int, int))
{
  char *v2; // esi
  int (__thiscall ***v3)(_DWORD, int, int); // edi
  int v4; // ebx
  int v5; // eax
  int v6; // eax
  int v7; // ST08_4
  int result; // eax

  v2 = this;
  v3 = a2;
  v4 = (int)(this + 76);
  v5 = (**a2)(a2, (int)(this + 76), (int)(this + 100));
  *((_DWORD *)v2 + 62) = v5;
  *((_DWORD *)v2 + 63) = (*v3)[1](v3, v5, v4);
  v6 = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, _DWORD, signed int))(*v3)[2])(
         v3,
         v2 + 136,
         v2 + 160,
         *((signed __int16 *)v2 + 92),
         1);
  v7 = *((signed __int16 *)v2 + 118);
  *((_DWORD *)v2 + 60) = v6;
  result = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, int, signed int))(*v3)[2])(
             v3,
             v2 + 188,
             v2 + 212,
             v7,
             1);
  *((_DWORD *)v2 + 61) = result;
  return result;
}

//----- (004AD640) --------------------------------------------------------
int __thiscall sub_4AD640(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char *v4; // edi
  char *v5; // ebx
  char *v6; // eax
  char Dest; // [esp+10h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v2 + 94, v2 + 106, v2[118], 0);
  v5 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v5, "%s,%s,%d,%d", v2 + 68, v2 + 80, v2[92], 0);
  v6 = sub_48DF30((int)(v2 + 38));
  return sprintf(
           a2,
           "%s,    %d,%d,%d,%d, %d,%d,%d,%d, %s,%s,%s",
           &Dest,
           v2[30],
           v2[31],
           v2[32],
           v2[33],
           v2[34],
           v2[35],
           v2[36],
           v2[37],
           v6,
           v5,
           v4);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004AD790) --------------------------------------------------------
int __thiscall sub_4AD790(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s,%s", &v3, this + 76, this + 136, this + 188);
}

//----- (004AD800) --------------------------------------------------------
signed int sub_4AD800()
{
  return 1;
}

//----- (004AD810) --------------------------------------------------------
int __fastcall sub_4AD810(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 240) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 240 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AD8E0) --------------------------------------------------------
_DWORD *__thiscall sub_4AD8E0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  _WORD *v3; // ebx
  signed int v4; // ebp
  signed int v5; // eax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &SwitchLio::`vftable';
  memset(v2 + 15, 0, 0x104u);
  if ( Dst )
  {
    if ( v2[14] >= 9 )
      v2[15] = sub_48CBB0(Dst);
    v3 = v2 + 16;
    v4 = 16;
    do
    {
      *v3 = sub_48CBB0(Dst);
      ++v3;
      --v4;
    }
    while ( v4 );
    v2[24] = sub_48CBB0(Dst);
    v2[25] = sub_48CBB0(Dst);
    v2[26] = sub_48CBB0(Dst);
    v2[27] = sub_48CBB0(Dst);
    v2[28] = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 29), Dst);
    if ( v2[14] < 3 )
      *((_WORD *)v2 + 90) = -1;
    else
      *((_WORD *)v2 + 90) = sub_48CBB0(Dst);
    if ( v2[14] >= 12 )
    {
      v2[46] = sub_48CBB0(Dst);
      v2[47] = sub_48CBB0(Dst);
      v2[48] = sub_48CBB0(Dst);
      v2[49] = sub_48CBB0(Dst);
      v2[50] = sub_48CBB0(Dst);
      v2[51] = sub_48CBB0(Dst);
    }
    v5 = v2[14];
    if ( v5 < 13 )
    {
      if ( v5 < 7 )
        sub_48EC80((int)(v2 + 52), Dst);
      else
        sub_48ECE0((int)(v2 + 52), Dst);
    }
    else
    {
      sub_401A78((int)(v2 + 52), Dst);
    }
    sub_48CA10((int)(v2 + 67), Dst);
    sub_48CA10((int)(v2 + 73), Dst);
    *((_WORD *)v2 + 158) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 159) = sub_48CBB0(Dst);
  }
  else
  {
    *((_WORD *)v2 + 90) = -1;
  }
  return v2;
}
// 51E948: using guessed type void *SwitchLio::`vftable';

//----- (004ADAB0) --------------------------------------------------------
int __thiscall sub_4ADAB0(char *this, int (__thiscall ***a2)(_DWORD, int, int))
{
  char *v2; // esi
  int (__thiscall ***v3)(_DWORD, int, int); // edi
  int v4; // ebx
  int v5; // eax
  int result; // eax

  v2 = this;
  v3 = a2;
  v4 = (int)(this + 208);
  v5 = (**a2)(a2, (int)(this + 208), (int)(this + 232));
  *((_DWORD *)v2 + 81) = v5;
  *((_DWORD *)v2 + 82) = (*v3)[1](v3, v5, v4);
  result = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, _DWORD, _DWORD))(*v3)[2])(
             v3,
             v2 + 268,
             v2 + 292,
             *((signed __int16 *)v2 + 158),
             0);
  *((_DWORD *)v2 + 80) = result;
  *((_DWORD *)v2 + 83) = 0;
  return result;
}

//----- (004ADB20) --------------------------------------------------------
int __thiscall sub_4ADB20(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char *v4; // edi
  char *v5; // eax
  char Dest; // [esp+Ch] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v2 + 134, v2 + 146, v2[158], 0);
  v5 = sub_48DF30((int)(v2 + 104));
  return sprintf(
           a2,
           "%s,    %d, %d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d, %d,%d,%d,%d,%d, \"%s\",%d,  %d,%d,%d,%d,%d,%d, %s,%s",
           &Dest,
           *((_DWORD *)v2 + 15),
           v2[32],
           v2[33],
           v2[34],
           v2[35],
           v2[36],
           v2[37],
           v2[38],
           v2[39],
           v2[40],
           v2[41],
           v2[42],
           v2[43],
           v2[44],
           v2[45],
           v2[46],
           v2[47],
           *((_DWORD *)v2 + 24),
           *((_DWORD *)v2 + 25),
           *((_DWORD *)v2 + 26),
           *((_DWORD *)v2 + 27),
           *((_DWORD *)v2 + 28),
           v2 + 58,
           v2[90],
           *((_DWORD *)v2 + 46),
           *((_DWORD *)v2 + 47),
           *((_DWORD *)v2 + 48),
           *((_DWORD *)v2 + 49),
           *((_DWORD *)v2 + 50),
           *((_DWORD *)v2 + 51),
           v5,
           v4);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004ADCB0) --------------------------------------------------------
int __thiscall sub_4ADCB0(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s,%s", &v3, this + 208, this + 268);
}

//----- (004ADD10) --------------------------------------------------------
signed int sub_4ADD10()
{
  return 2;
}

//----- (004ADD20) --------------------------------------------------------
int __fastcall sub_4ADD20(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 320) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 320 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004ADDF0) --------------------------------------------------------
_DWORD *__thiscall sub_4ADDF0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  int v6; // ecx
  __int16 v7; // ax
  __int16 v8; // ax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &SoundLio::`vftable';
  memset(v2 + 15, 0, 0x80u);
  *((_WORD *)v2 + 30) = -1;
  *((_WORD *)v2 + 31) = 1000;
  *((_WORD *)v2 + 34) = 1;
  *((_WORD *)v2 + 36) = 1000;
  *((_WORD *)v2 + 37) = -1;
  if ( Dst )
  {
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 14);
    v4 = v2[14] - 14 < 0;
    *((_WORD *)v2 + 31) = v3;
    if ( v4 ^ v5 )
    {
      v6 = sub_48CBB0(Dst);
      if ( !v6 )
        v6 = 600;
      v7 = abs(v6);
      *((_WORD *)v2 + 22) = v7;
      *((_WORD *)v2 + 23) = v7;
      if ( v6 < 0 )
        *((_WORD *)v2 + 32) = 1;
    }
    else
    {
      *((_WORD *)v2 + 32) = sub_48CBB0(Dst);
    }
    *((_WORD *)v2 + 33) = sub_48CBB0(Dst);
    v8 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 15);
    v4 = v2[14] - 15 < 0;
    *((_WORD *)v2 + 34) = v8;
    if ( !(v4 ^ v5) )
    {
      *((_WORD *)v2 + 35) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 36) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 37) = sub_48CBB0(Dst);
      sub_401A78((int)(v2 + 32), Dst);
    }
    sub_48CA10((int)(v2 + 19), Dst);
    sub_48CA10((int)(v2 + 25), Dst);
    *((_WORD *)v2 + 62) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 63) = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E964: using guessed type void *SoundLio::`vftable';

//----- (004ADF60) --------------------------------------------------------
int __thiscall sub_4ADF60(int this, int a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // eax
  int result; // eax

  v2 = this;
  v3 = a2;
  *(_DWORD *)(this + 196) = (*(int (__thiscall **)(int, int, int, _DWORD, signed int))(*(_DWORD *)a2 + 8))(
                              a2,
                              this + 76,
                              this + 100,
                              *(signed __int16 *)(this + 124),
                              1);
  v4 = (**(int (__thiscall ***)(int, int, int))v3)(v3, v2 + 128, v2 + 152);
  *(_DWORD *)(v2 + 188) = v4;
  result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v3 + 4))(v3, v4, v2 + 128);
  *(_DWORD *)(v2 + 192) = result;
  return result;
}

//----- (004ADFC0) --------------------------------------------------------
int __thiscall sub_4ADFC0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char *v4; // edi
  char *v5; // eax
  char Dest; // [esp+Ch] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v2 + 38, v2 + 50, v2[62], 0);
  v5 = sub_48DF30((int)(v2 + 64));
  return sprintf(
           a2,
           "%s,    %d,%d,%d,%d,%d,  %d,%d,%d,  %s,%s",
           &Dest,
           v2[30],
           v2[31],
           v2[32],
           v2[33],
           v2[34],
           v2[35],
           v2[36],
           v2[37],
           v5,
           v4);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004AE0D0) --------------------------------------------------------
int __thiscall sub_4AE0D0(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s,%s", &v3, this + 76, this + 128);
}

//----- (004AE130) --------------------------------------------------------
signed int sub_4AE130()
{
  return 7;
}

//----- (004AE140) --------------------------------------------------------
_DWORD *__thiscall sub_4AE140(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  __int16 v4; // ax
  bool v5; // sf
  unsigned __int8 v6; // of
  signed int v7; // eax
  signed int v8; // eax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &PortalLio::`vftable';
  memset(v2 + 15, 0, 0x138u);
  *((_WORD *)v2 + 30) = -1;
  if ( Dst )
  {
    if ( v2[14] < 14 )
    {
      v3 = sub_48CBB0(Dst);
      *((_WORD *)v2 + 22) = v3;
      *((_WORD *)v2 + 23) = v3;
    }
    v4 = sub_48CBB0(Dst);
    v6 = __OFSUB__(v2[14], 14);
    v5 = v2[14] - 14 < 0;
    *((_WORD *)v2 + 30) = v4;
    if ( v5 ^ v6 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    else
    {
      *((_WORD *)v2 + 95) = sub_48CBB0(Dst);
      sub_48CA10((int)v2 + 62, Dst);
    }
    if ( v2[14] >= 4 )
      *((_WORD *)v2 + 96) = sub_48CBB0(Dst);
    v7 = v2[14];
    if ( v7 >= 5 && v7 < 14 )
      sub_48CBB0(Dst);
    if ( v2[14] >= 14 )
      *((_WORD *)v2 + 97) = sub_48CBB0(Dst);
    if ( v2[14] >= 17 )
      *((_WORD *)v2 + 98) = sub_48CBB0(Dst);
    v8 = v2[14];
    if ( v8 < 13 )
    {
      if ( v8 < 7 )
        sub_48EC80((int)(v2 + 50), Dst);
      else
        sub_48ECE0((int)(v2 + 50), Dst);
    }
    else
    {
      sub_401A78((int)(v2 + 50), Dst);
    }
    if ( v2[14] >= 19 )
      sub_401A78((int)(v2 + 65), Dst);
    sub_48CA10((int)(v2 + 80), Dst);
    sub_48CA10((int)(v2 + 86), Dst);
    *((_WORD *)v2 + 184) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 185) = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E980: using guessed type void *PortalLio::`vftable';

//----- (004AE300) --------------------------------------------------------
int __thiscall sub_4AE300(char *this, int (__thiscall ***a2)(_DWORD, int, int))
{
  char *v2; // esi
  int (__thiscall ***v3)(_DWORD, int, int); // edi
  int v4; // ebx
  int v5; // eax
  int v6; // eax
  int result; // eax

  v2 = this;
  v3 = a2;
  v4 = (int)(this + 200);
  v5 = (**a2)(a2, (int)(this + 200), (int)(this + 224));
  *((_DWORD *)v2 + 94) = v5;
  *((_DWORD *)v2 + 95) = (*v3)[1](v3, v5, v4);
  *((_DWORD *)v2 + 93) = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, _DWORD, _DWORD))(*v3)[2])(
                           v3,
                           v2 + 320,
                           v2 + 344,
                           *((signed __int16 *)v2 + 184),
                           0);
  v6 = (**v3)(v3, (int)(v2 + 260), (int)(v2 + 284));
  *((_DWORD *)v2 + 96) = v6;
  result = (*v3)[1](v3, v6, (int)(v2 + 260));
  *((_DWORD *)v2 + 97) = result;
  *((_DWORD *)v2 + 98) = 0;
  return result;
}

//----- (004AE3A0) --------------------------------------------------------
int __thiscall sub_4AE3A0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char *v4; // edi
  char *v5; // ST40_4
  char *v6; // eax
  char Dest; // [esp+Ch] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v2 + 160, v2 + 172, v2[184], 0);
  v5 = sub_48DF30((int)(v2 + 130));
  v6 = sub_48DF30((int)(v2 + 100));
  return sprintf(
           a2,
           "%s,    %d,%d,%s, %d,%d,%d,%s,%s,%s",
           &Dest,
           v2[30],
           v2[95],
           v2 + 31,
           v2[96],
           v2[97],
           v2[98],
           v6,
           v5,
           v4);
}
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004AE4C0) --------------------------------------------------------
int __thiscall sub_4AE4C0(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s,%s", &v3, this + 200, this + 320);
}

//----- (004AE520) --------------------------------------------------------
signed int sub_4AE520()
{
  return 6;
}

//----- (004AE530) --------------------------------------------------------
int __fastcall sub_4AE530(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 372) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 372 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AE600) --------------------------------------------------------
_DWORD *__thiscall sub_4AE600(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  int v6; // eax
  __int16 v7; // ax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &WarpLio::`vftable';
  memset(v2 + 15, 0, 0x94u);
  *((_WORD *)v2 + 31) = 500;
  *((_WORD *)v2 + 33) = 500;
  if ( Dst )
  {
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 14);
    v4 = v2[14] - 14 < 0;
    *((_WORD *)v2 + 31) = v3;
    if ( !(v4 ^ v5) )
    {
      *((_WORD *)v2 + 32) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 33) = sub_48CBB0(Dst);
    }
    if ( v2[14] < 8 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    else
    {
      *((_WORD *)v2 + 34) = sub_48CBB0(Dst);
    }
    v2[18] = sub_48CBB0(Dst);
    v6 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 14);
    v4 = v2[14] - 14 < 0;
    v2[19] = v6;
    if ( v4 ^ v5 )
    {
      v7 = sub_48CBB0(Dst);
      *((_WORD *)v2 + 22) = v7;
      *((_WORD *)v2 + 23) = v7;
    }
    sub_48CA10((int)(v2 + 20), Dst);
  }
  return v2;
}
// 51E99C: using guessed type void *WarpLio::`vftable';

//----- (004AE730) --------------------------------------------------------
int __thiscall sub_4AE730(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char Dest; // [esp+8h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  return sprintf(
           a2,
           "%s,  %d,%d,%d,%d,%d, %d,%d,\"%s\"",
           &Dest,
           v2[30],
           v2[31],
           v2[32],
           v2[33],
           v2[34],
           *((_DWORD *)v2 + 18),
           *((_DWORD *)v2 + 19),
           v2 + 40);
}

//----- (004AE7F0) --------------------------------------------------------
_BYTE *__stdcall sub_4AE7F0(_BYTE *a1)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = 0;
  return result;
}

//----- (004AE810) --------------------------------------------------------
int __fastcall sub_4AE810(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 208) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 208 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AE8E0) --------------------------------------------------------
_DWORD *__thiscall sub_4AE8E0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &ParallaxLio::`vftable';
  memset(v2 + 15, 0, 0x44u);
  *((_WORD *)v2 + 32) = 40;
  *((_WORD *)v2 + 31) = 20;
  *((_WORD *)v2 + 30) = 1;
  if ( Dst )
  {
    *((_WORD *)v2 + 31) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 32) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    sub_401A78((int)(v2 + 17), Dst);
  }
  return v2;
}
// 51E9B8: using guessed type void *ParallaxLio::`vftable';

//----- (004AE9A0) --------------------------------------------------------
int __thiscall sub_4AE9A0(char *this, int a2)
{
  char *v2; // esi
  int v3; // ebx
  int v4; // eax
  int result; // eax

  v2 = this;
  v3 = (int)(this + 68);
  v4 = (**(int (__thiscall ***)(int, int, int))a2)(a2, (int)(this + 68), (int)(this + 92));
  *((_DWORD *)v2 + 32) = v4;
  result = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, v4, v3);
  *((_DWORD *)v2 + 33) = result;
  return result;
}

//----- (004AE9E0) --------------------------------------------------------
int __thiscall sub_4AE9E0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char *v4; // eax
  char Dest; // [esp+8h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v4 = sub_48DF30((int)(v2 + 34));
  return sprintf(a2, "%s,    %d,%d,%d,%s", &Dest, v2[31], v2[32], v2[30], v4);
}

//----- (004AEA90) --------------------------------------------------------
int __thiscall sub_4AEA90(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s", &v3, this + 68);
}

//----- (004AEAF0) --------------------------------------------------------
signed int sub_4AEAF0()
{
  return 9;
}

//----- (004AEB00) --------------------------------------------------------
int __fastcall sub_4AEB00(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 128) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 128 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AEBC0) --------------------------------------------------------
_DWORD *__thiscall sub_4AEBC0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  int v3; // eax
  __int16 v4; // ax
  signed int v5; // ebx
  bool v6; // sf
  unsigned __int8 v7; // of
  int v8; // eax
  _BYTE *v9; // ebp
  signed int v10; // eax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &FlagLio::`vftable';
  memset(v2 + 15, 0, 0x150u);
  *((_BYTE *)v2 + 66) = 3;
  *((_BYTE *)v2 + 67) = 1;
  *((_BYTE *)v2 + 68) = 1;
  *((_BYTE *)v2 + 69) = 1;
  *((_BYTE *)v2 + 70) = 0;
  if ( Dst )
  {
    if ( v2[14] < 14 )
    {
      v3 = sub_48CBB0(Dst);
      if ( v3 < 0 )
        LOWORD(v3) = 30000;
      *((_WORD *)v2 + 22) = v3;
      *((_WORD *)v2 + 23) = v3;
    }
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 31) = sub_48CBB0(Dst);
    v4 = sub_48CBB0(Dst);
    v5 = 16;
    v7 = __OFSUB__(v2[14], 16);
    v6 = v2[14] - 16 < 0;
    *((_WORD *)v2 + 32) = v4;
    if ( v6 ^ v7 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    else
    {
      *((_BYTE *)v2 + 66) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 67) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 68) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 69) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 70) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 71) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 72) = sub_48CBB0(Dst);
      *((_BYTE *)v2 + 73) = sub_48CBB0(Dst);
    }
    *((_BYTE *)v2 + 74) = sub_48CBB0(Dst);
    *((_BYTE *)v2 + 75) = sub_48CBB0(Dst);
    *((_BYTE *)v2 + 76) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 39) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 40) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 41) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 42) = sub_48CBB0(Dst);
    v2[22] = sub_48CBB0(Dst);
    v2[23] = sub_48CBB0(Dst);
    v2[24] = sub_48CBB0(Dst);
    v2[26] = sub_48CBB0(Dst);
    v2[27] = sub_48CBB0(Dst);
    v2[28] = sub_48CBB0(Dst);
    v2[29] = sub_48CBB0(Dst);
    v2[30] = sub_48CBB0(Dst);
    v8 = sub_48CBB0(Dst);
    v7 = __OFSUB__(v2[14], 6);
    v6 = v2[14] - 6 < 0;
    v2[31] = v8;
    if ( !(v6 ^ v7) )
      *((_WORD *)v2 + 50) = sub_48CBB0(Dst);
    if ( v2[14] >= 20 )
      *((_WORD *)v2 + 51) = sub_48CBB0(Dst);
    if ( v2[14] >= 21 )
      *((_WORD *)v2 + 114) = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 41), Dst);
    v9 = v2 + 37;
    do
    {
      if ( v2[14] < 2 )
        *v9 = 1;
      else
        *v9 = sub_48CBB0(Dst);
      ++v9;
      --v5;
    }
    while ( v5 );
    v2[32] = sub_48CBB0(Dst);
    v2[33] = sub_48CBB0(Dst);
    v2[34] = sub_48CBB0(Dst);
    v2[35] = sub_48CBB0(Dst);
    v2[36] = sub_48CBB0(Dst);
    v10 = v2[14];
    if ( v10 < 13 )
    {
      if ( v10 < 7 )
        sub_48EC80((int)(v2 + 58), Dst);
      else
        sub_48ECE0((int)(v2 + 58), Dst);
    }
    else
    {
      sub_401A78((int)(v2 + 58), Dst);
    }
    sub_48CA10((int)(v2 + 73), Dst);
    sub_48CA10((int)(v2 + 79), Dst);
    *((_WORD *)v2 + 170) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 171) = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 86), Dst);
    sub_48CA10((int)(v2 + 92), Dst);
    *((_WORD *)v2 + 196) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 197) = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E9D4: using guessed type void *FlagLio::`vftable';

//----- (004AEEE0) --------------------------------------------------------
int __thiscall sub_4AEEE0(char *this, int (__thiscall ***a2)(_DWORD, int, int))
{
  char *v2; // esi
  int (__thiscall ***v3)(_DWORD, int, int); // edi
  int v4; // ebx
  int v5; // eax
  int v6; // eax
  int v7; // ST08_4
  int result; // eax

  v2 = this;
  v3 = a2;
  v4 = (int)(this + 232);
  v5 = (**a2)(a2, (int)(this + 232), (int)(this + 256));
  *((_DWORD *)v2 + 101) = v5;
  *((_DWORD *)v2 + 102) = (*v3)[1](v3, v5, v4);
  v6 = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, _DWORD, _DWORD))(*v3)[2])(
         v3,
         v2 + 292,
         v2 + 316,
         *((signed __int16 *)v2 + 170),
         0);
  v7 = *((signed __int16 *)v2 + 196);
  *((_DWORD *)v2 + 99) = v6;
  result = ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int, int), char *, char *, int, _DWORD))(*v3)[2])(
             v3,
             v2 + 344,
             v2 + 368,
             v7,
             0);
  *((_DWORD *)v2 + 100) = result;
  return result;
}

//----- (004AEF70) --------------------------------------------------------
int __thiscall sub_4AEF70(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  signed int v4; // ebx
  char *v5; // edi
  char v6; // al
  char *v7; // edi
  char *v8; // ebx
  char *v9; // eax
  char v11; // [esp+Fh] [ebp-2805h]
  char v12[2048]; // [esp+10h] [ebp-2804h]
  char Dest; // [esp+810h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  v12[0] = 0;
  v4 = 0;
  do
  {
    if ( v4 )
    {
      v5 = &v11;
      do
        v6 = (v5++)[1];
      while ( v6 );
      *(_WORD *)v5 = 44;
    }
    sprintf(&v12[strlen(v12)], "%d", *((char *)v2 + v4++ + 148));
  }
  while ( v4 < 16 );
  v7 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v7, "%s,%s,%d,%d", v2 + 172, v2 + 184, v2[196], 0);
  v8 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v8, "%s,%s,%d,%d", v2 + 146, v2 + 158, v2[170], 0);
  v9 = sub_48DF30((int)(v2 + 116));
  return sprintf(
           a2,
           "%s,     %d,%d,%d,  %d,%d,%d,%d,%d,  %d,%d,%d,  %d,%d,%d,%d,  %d,%d,%d,%d, %d,%d,%d,%d,%d, %d,%d,%d,%d,%d, %d,"
           "\"%s\",%s, %d,%d,%d,%d,%d, %s,%s,%s",
           &Dest,
           v2[30],
           v2[31],
           v2[32],
           *((char *)v2 + 66),
           *((char *)v2 + 67),
           *((char *)v2 + 68),
           *((char *)v2 + 69),
           *((char *)v2 + 70),
           *((char *)v2 + 71),
           *((char *)v2 + 72),
           *((char *)v2 + 73),
           *((char *)v2 + 74),
           *((char *)v2 + 75),
           *((char *)v2 + 76),
           v2[39],
           v2[40],
           v2[41],
           v2[42],
           *((_DWORD *)v2 + 22),
           *((_DWORD *)v2 + 23),
           *((_DWORD *)v2 + 24),
           *((_DWORD *)v2 + 26),
           *((_DWORD *)v2 + 27),
           *((_DWORD *)v2 + 28),
           *((_DWORD *)v2 + 29),
           *((_DWORD *)v2 + 30),
           *((_DWORD *)v2 + 31),
           v2[50],
           v2[51],
           v2[114],
           v2 + 82,
           v12,
           *((_DWORD *)v2 + 32),
           *((_DWORD *)v2 + 33),
           *((_DWORD *)v2 + 34),
           *((_DWORD *)v2 + 35),
           *((_DWORD *)v2 + 36),
           v9,
           v8,
           v7);
}
// 56E3F0: using guessed type int dword_56E3F0;
// 4AEF70: using guessed type char var_2804[2048];

//----- (004AF1D0) --------------------------------------------------------
int __thiscall sub_4AF1D0(char *this, char *Dest)
{
  char v3; // [esp+0h] [ebp-2004h]

  v3 = 0;
  return sprintf(Dest, "%s,%s,%s,%s", &v3, this + 232, this + 292, this + 344);
}

//----- (004AF240) --------------------------------------------------------
signed int sub_4AF240()
{
  return 3;
}

//----- (004AF250) --------------------------------------------------------
int __fastcall sub_4AF250(int a1, int a2, int a3)
{
  int v3; // esi
  _BYTE *v4; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = (_BYTE *)(a1 + 60);
  if ( a1 + 60 < (unsigned int)(a1 + 396) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v4++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v4 < a1 + 396 );
  }
  return ~v3 + sub_4AD150(a1, a3);
}

//----- (004AF320) --------------------------------------------------------
_DWORD *__thiscall sub_4AF320(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  int v3; // eax
  bool v4; // sf
  unsigned __int8 v5; // of
  int v6; // eax
  int v7; // eax
  signed int v8; // eax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &HideLio::`vftable';
  memset(v2 + 15, 0, 0xC4u);
  v2[29] = -1;
  v2[21] = 0x7FFF;
  *((_WORD *)v2 + 44) = -1;
  *((_WORD *)v2 + 45) = -1;
  v2[26] = -2;
  v2[63] = -1;
  if ( Dst )
  {
    *((_WORD *)v2 + 30) = sub_48CBB0(Dst);
    v2[16] = sub_48CBB0(Dst);
    v2[17] = sub_48CBB0(Dst);
    v2[18] = sub_48CBB0(Dst);
    *((_WORD *)v2 + 38) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 39) = sub_48CBB0(Dst);
    v2[20] = sub_48CBB0(Dst);
    v2[21] = sub_48CBB0(Dst);
    *((_WORD *)v2 + 44) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 45) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 14);
    v4 = v2[14] - 14 < 0;
    v2[23] = v3;
    if ( v4 ^ v5 )
    {
      v6 = sub_48CBB0(Dst);
      if ( v6 < 0 )
        LOWORD(v6) = 30000;
      *((_WORD *)v2 + 22) = v6;
      *((_WORD *)v2 + 23) = v6;
    }
    v7 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 9);
    v4 = v2[14] - 9 < 0;
    v2[24] = v7;
    if ( !(v4 ^ v5) )
      v2[25] = sub_48CBB0(Dst);
    if ( v2[14] >= 21 )
    {
      sub_48CA10((int)(v2 + 30), Dst);
      *((_WORD *)v2 + 56) = sub_48CBB0(Dst);
      v2[29] = sub_48CBB0(Dst);
    }
    v8 = v2[14];
    if ( v8 < 22 && v2[23] < 0 )
    {
      v2[29] = v2[24];
      v2[24] = 0;
    }
    if ( v8 >= 23 )
    {
      *((_WORD *)v2 + 124) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 125) = sub_48CBB0(Dst);
    }
    if ( v2[14] >= 24 )
    {
      v2[26] = sub_48CBB0(Dst);
      v2[27] = sub_48CBB0(Dst);
    }
    if ( v2[14] >= 25 )
      v2[63] = sub_48CBB0(Dst);
  }
  return v2;
}
// 51E9F0: using guessed type void *HideLio::`vftable';

//----- (004AF510) --------------------------------------------------------
int __thiscall sub_4AF510(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char Dest; // [esp+8h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  return sprintf(
           a2,
           "%s,     %d,%d,%d,%d, %d,%d,%d,%d, %d,%d,%d, %d,%d,%s,%d,%d, %d,%d,%d,%d, %d",
           &Dest,
           v2[30],
           *((_DWORD *)v2 + 16),
           *((_DWORD *)v2 + 17),
           *((_DWORD *)v2 + 18),
           v2[38],
           v2[39],
           *((_DWORD *)v2 + 20),
           *((_DWORD *)v2 + 21),
           v2[44],
           v2[45],
           *((_DWORD *)v2 + 23),
           *((_DWORD *)v2 + 24),
           *((_DWORD *)v2 + 25),
           v2 + 60,
           v2[56],
           *((_DWORD *)v2 + 29),
           v2[124],
           v2[125],
           *((_DWORD *)v2 + 26),
           *((_DWORD *)v2 + 27),
           *((_DWORD *)v2 + 63));
}

//----- (004AF610) --------------------------------------------------------
_BYTE *__stdcall sub_4AF610(_BYTE *a1)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = 0;
  return result;
}

//----- (004AF630) --------------------------------------------------------
_DWORD *__thiscall sub_4AF630(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  __int16 v6; // ax

  v2 = this;
  sub_4ACFE0(this, Dst);
  *v2 = &TextLio::`vftable';
  memset(v2 + 15, 0, 0x108u);
  if ( Dst )
  {
    v2[15] = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[14], 14);
    v4 = v2[14] - 14 < 0;
    *((_WORD *)v2 + 32) = v3;
    if ( v4 ^ v5 )
    {
      v6 = abs((unsigned __int16)sub_48CBB0(Dst));
      *((_WORD *)v2 + 22) = v6;
      *((_WORD *)v2 + 23) = v6;
    }
    sub_48CA10((int)v2 + 66, Dst);
  }
  return v2;
}
// 51EA0C: using guessed type void *TextLio::`vftable';

//----- (004AF6F0) --------------------------------------------------------
int __thiscall sub_4AF6F0(signed __int16 *this, char *a2)
{
  signed __int16 *v2; // esi
  int v3; // eax
  char Dest; // [esp+8h] [ebp-2004h]

  v2 = this;
  v3 = (*(int (__thiscall **)(signed __int16 *, signed int, _DWORD, signed __int16 *, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 4))(
         this,
         25,
         *((_DWORD *)this + 1),
         this + 4,
         this[20],
         this[21],
         this[22],
         this[23],
         this[24],
         *((_DWORD *)this + 13));
  sprintf(&Dest, "%d,v%d,%d,\"%s\",%d,%d,%d,%d,%d,%d", v3);
  return sprintf(a2, "%s,    %d,%d,\"%s\"", &Dest, *((_DWORD *)v2 + 15), v2[32], v2 + 33);
}

//----- (004AF790) --------------------------------------------------------
_BYTE *__stdcall sub_4AF790(_BYTE *a1)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = 0;
  return result;
}

//----- (004AF7A0) --------------------------------------------------------
signed int sub_4AF7A0()
{
  return 8;
}

//----- (004AF7B0) --------------------------------------------------------
int __thiscall sub_4AF7B0(_DWORD *this)
{
  _DWORD *v1; // edi
  int i; // esi
  int (__stdcall ***v3)(signed int); // ecx
  int result; // eax

  v1 = this;
  for ( i = 0; i < v1[2000]; ++i )
  {
    v3 = (int (__stdcall ***)(signed int))v1[i];
    if ( v3 )
      result = (**v3)(1);
  }
  return result;
}

//----- (004AF7E0) --------------------------------------------------------
_DWORD *__thiscall sub_4AF7E0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // ebx
  _DWORD *v3; // esi
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax

  v2 = this;
  v3 = 0;
  switch ( sub_48CBB0(Dst) )
  {
    case 1:
      v12 = operator new(0x100u);
      if ( !v12 )
        goto LABEL_22;
      v5 = sub_4AD430(v12, Dst);
      goto LABEL_23;
    case 2:
      v9 = operator new(0x150u);
      if ( !v9 )
        goto LABEL_22;
      v5 = sub_4AD8E0(v9, Dst);
      goto LABEL_23;
    case 3:
      v11 = operator new(0x19Cu);
      if ( !v11 )
        goto LABEL_22;
      v5 = sub_4AEBC0(v11, Dst);
      goto LABEL_23;
    case 4:
      v8 = operator new(0xD0u);
      if ( !v8 )
        goto LABEL_22;
      v5 = sub_4AE600(v8, Dst);
      goto LABEL_23;
    case 5:
      v7 = operator new(0x100u);
      if ( !v7 )
        goto LABEL_22;
      v5 = sub_4AF320(v7, Dst);
      goto LABEL_23;
    case 6:
      v4 = operator new(0x18Cu);
      if ( !v4 )
        goto LABEL_22;
      v5 = sub_4AE140(v4, Dst);
      goto LABEL_23;
    case 7:
      v10 = operator new(0xC8u);
      if ( !v10 )
        goto LABEL_22;
      v5 = sub_4ADDF0(v10, Dst);
      goto LABEL_23;
    case 8:
      v13 = operator new(0x144u);
      if ( !v13 )
        goto LABEL_22;
      v5 = sub_4AF630(v13, Dst);
      goto LABEL_23;
    case 9:
      v6 = operator new(0x88u);
      if ( !v6 )
        goto LABEL_22;
      v5 = sub_4AE8E0(v6, Dst);
      goto LABEL_23;
    case 10:
      v14 = operator new(0x5Cu);
      if ( v14 )
        v5 = sub_4AD220(v14, Dst);
      else
LABEL_22:
        v5 = 0;
LABEL_23:
      v3 = v5;
      break;
    default:
      break;
  }
  if ( v2[4049] )
    (*(void (__thiscall **)(_DWORD *, _DWORD))(*v3 + 20))(v3, v2[4049]);
  return v3;
}

//----- (004AFA40) --------------------------------------------------------
int __thiscall sub_4AFA40(_DWORD **this, int a2)
{
  _DWORD **v2; // edi
  int v3; // ebx
  signed int i; // esi
  int v5; // eax

  v2 = this;
  v3 = 0;
  for ( i = 0; i < (signed int)v2[2000]; v3 += v5 )
    v5 = (*(int (__stdcall **)(int))(*v2[i++] + 8))(a2);
  return v3;
}

//----- (004AFBA0) --------------------------------------------------------
int __thiscall sub_4AFBA0(_DWORD *this, __int16 a2, __int16 a3)
{
  int result; // eax

  for ( result = 0; result < this[2000]; ++result )
  {
    *(_WORD *)(this[result] + 40) -= 16 * a2;
    *(_WORD *)(this[result] + 42) -= 16 * a3;
  }
  return result;
}

//----- (004AFBE0) --------------------------------------------------------
FILE *__thiscall sub_4AFBE0(_DWORD *this, char *Filename)
{
  _DWORD *v2; // esi
  FILE *result; // eax
  FILE *v4; // ebp
  char *v5; // eax
  void *v6; // edi
  _DWORD *v7; // eax
  int v8; // [esp+8h] [ebp-2004h]

  v2 = this;
  result = fopen(Filename, "rt");
  v4 = result;
  if ( result )
  {
    if ( !feof(result) )
    {
      do
      {
        LOBYTE(v8) = 0;
        v5 = (char *)sub_4C352E((int)&v8, 0x2000, v4);
        v6 = v5;
        if ( v5 )
        {
          if ( isdigit(*v5) )
          {
            v7 = sub_4AF7E0(v2, v6);
            if ( v7 )
            {
              if ( v2[v7[1] + 2001] )
              {
                (*(void (__thiscall **)(_DWORD *, signed int))*v7)(v7, 1);
              }
              else
              {
                v2[v2[2000]++] = v7;
                v2[v7[1] + 2001] = v7;
              }
            }
          }
        }
      }
      while ( !feof(v4) );
    }
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (004AFD10) --------------------------------------------------------
_DWORD *__thiscall sub_4AFD10(_DWORD *this, char *Filename, int a3)
{
  _DWORD *v3; // esi

  v3 = this;
  this[4049] = a3;
  this[2000] = 0;
  memset(this + 2001, 0, 0x2000u);
  if ( Filename )
    sub_4AFBE0(v3, Filename);
  return v3;
}

//----- (004AFD60) --------------------------------------------------------
void __thiscall sub_4AFD60(_DWORD *this)
{
  _DWORD *v1; // esi
  int i; // edi

  v1 = this;
  for ( i = 0; i < v1[2000]; ++i )
  {
    if ( (*(int (**)(void))(*(_DWORD *)v1[i] + 4))() == 10 )
      sub_4AFBE0(v1, (char *)(v1[i] + 60));
  }
}

//----- (004AFDA0) --------------------------------------------------------
int __cdecl sub_4AFDA0(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (004AFEA0) --------------------------------------------------------
void *__thiscall sub_4AFEA0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFEC0) --------------------------------------------------------
void *__thiscall sub_4AFEC0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFEE0) --------------------------------------------------------
void *__thiscall sub_4AFEE0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFF00) --------------------------------------------------------
void *__thiscall sub_4AFF00(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFF20) --------------------------------------------------------
void *__thiscall sub_4AFF20(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFF40) --------------------------------------------------------
void *__thiscall sub_4AFF40(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFF60) --------------------------------------------------------
void *__thiscall sub_4AFF60(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFF80) --------------------------------------------------------
void *__thiscall sub_4AFF80(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFFA0) --------------------------------------------------------
void *__thiscall sub_4AFFA0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFFC0) --------------------------------------------------------
void *__thiscall sub_4AFFC0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004AFFE0) --------------------------------------------------------
void *__thiscall sub_4AFFE0(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &Lio::`vftable';
  if ( a2 & 1 )
    j__free(Memory);
  return v2;
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (004B0000) --------------------------------------------------------
_DWORD *__thiscall sub_4B0000(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  _DWORD *v3; // ebp
  _WORD *v4; // eax
  signed int v5; // ecx
  _BYTE *v6; // eax
  _BYTE *v7; // eax
  int *v8; // ecx
  _BYTE *v9; // edx
  char v10; // al
  int v11; // eax
  bool v12; // sf
  unsigned __int8 v13; // of
  int v14; // ebp
  __int16 v15; // ax
  __int16 v16; // ax
  int v17; // eax
  __int16 v18; // ax
  int v19; // eax
  int *v20; // ebp
  signed int v21; // ebx
  int *v22; // ebp
  signed int v23; // ebx
  signed int v24; // eax
  signed int v25; // ebx
  _WORD *v26; // ebx
  int v27; // ebp
  signed int v28; // eax
  unsigned __int8 v29; // ST40_1
  char v30; // ST44_1
  int v31; // eax
  __int16 v32; // ax
  __int16 v33; // ax
  __int16 v34; // ax
  _WORD *v35; // ebx
  signed int v36; // ebp
  signed int v37; // eax
  int v38; // eax
  _WORD *v39; // ebx
  signed int v40; // ebp
  int v42; // [esp+10h] [ebp-2018h]
  signed int v43; // [esp+14h] [ebp-2014h]
  int *v44; // [esp+14h] [ebp-2014h]
  signed int v45; // [esp+18h] [ebp-2010h]
  char v46[8192]; // [esp+24h] [ebp-2004h]

  v2 = this;
  v3 = this + 3;
  *this = &VItem::`vftable';
  this[2] = 0;
  memset(this + 3, 0, 0x5A8u);
  *((_WORD *)v2 + 705) = 1;
  *((_WORD *)v2 + 697) = -1;
  *((_WORD *)v2 + 698) = -1;
  *((_WORD *)v2 + 696) = -1;
  *((_WORD *)v2 + 699) = 0;
  *((_WORD *)v2 + 706) = 0;
  *((_WORD *)v2 + 700) = 0;
  *((_WORD *)v2 + 702) = 0;
  *((_WORD *)v2 + 704) = 0;
  *((_WORD *)v2 + 701) = 45;
  *((_WORD *)v2 + 703) = 45;
  v2[354] = -1;
  v2[355] = -1;
  v2[356] = -1;
  v2[357] = -1;
  v2[358] = -1;
  v2[359] = -1;
  v2[360] = -1;
  v2[361] = -1;
  *v3 = 1;
  *((_WORD *)v2 + 707) = 1;
  v2[4] = 1;
  v2[5] = -1;
  v2[6] = -1;
  v4 = v2 + 22;
  v5 = 30;
  do
  {
    *(v4 - 30) = -1;
    *v4 = -1;
    ++v4;
    --v5;
  }
  while ( v5 );
  *((_WORD *)v2 + 510) = 1;
  *(_DWORD *)((char *)v2 + 1022) = 1;
  *((_WORD *)v2 + 513) = 1;
  v2[345] = -1;
  v2[346] = -1;
  v2[347] = -1;
  *((_WORD *)v2 + 527) = 1;
  *((_WORD *)v2 + 526) = 1;
  v2[271] = -1;
  v2[272] = 0;
  if ( Dst )
  {
    if ( *(_BYTE *)Dst == 118 )
    {
      sub_48CA10((int)v46, Dst);
      v2[2] = j__atol(&v46[1]);
    }
    v2[269] = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 245), Dst);
    sub_48CA10((int)(v2 + 229), Dst);
    sub_48CA10((int)v46, Dst);
    v7 = malloc(strlen(v46) + 1);
    v2[1] = v7;
    v8 = (int *)v46;
    v9 = v7;
    do
    {
      v10 = *(_BYTE *)v8;
      *v9 = *(_BYTE *)v8;
      v8 = (int *)((char *)v8 + 1);
      ++v9;
    }
    while ( v10 );
    v2[270] = sub_48CBB0(Dst);
    v11 = sub_48CBB0(Dst);
    v13 = __OFSUB__(v2[2], 31);
    v12 = v2[2] - 31 < 0;
    v2[264] = v11;
    if ( !(v12 ^ v13) )
      v2[265] = sub_48CBB0(Dst);
    v14 = (int)(v2 + 274);
    v43 = 6;
    do
    {
      *(_DWORD *)(v14 - 4) = sub_48CBB0(Dst);
      *(_DWORD *)v14 = sub_48CBB0(Dst);
      *(_WORD *)(v14 + 4) = sub_48CBB0(Dst);
      *(_WORD *)(v14 + 6) = sub_48CBB0(Dst);
      v14 += 12;
      --v43;
    }
    while ( v43 );
    *((_WORD *)v2 + 514) = sub_48CBB0(Dst);
    v15 = sub_48CBB0(Dst);
    v13 = __OFSUB__(v2[2], 34);
    v12 = v2[2] - 34 < 0;
    *((_WORD *)v2 + 515) = v15;
    if ( v12 ^ v13 )
    {
      v16 = sub_48CBB0(Dst);
      *((_WORD *)v2 + 516) = v16;
      *((_WORD *)v2 + 517) = v16;
      if ( v16 != -1 )
      {
        v17 = v16 - 8;
        if ( v17 < 1 )
          LOWORD(v17) = 1;
        *((_WORD *)v2 + 516) = v17;
      }
    }
    else
    {
      *((_WORD *)v2 + 516) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 517) = sub_48CBB0(Dst);
    }
    if ( v2[2] < 11 )
    {
      sub_48CBB0(Dst);
      sub_48CBB0(Dst);
    }
    else
    {
      *((_WORD *)v2 + 510) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 511) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 512) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 513) = sub_48CBB0(Dst);
    }
    *((_WORD *)v2 + 523) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 524) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 525) = sub_48CBB0(Dst);
    v18 = sub_48CBB0(Dst);
    v13 = __OFSUB__(v2[2], 8);
    v12 = v2[2] - 8 < 0;
    *((_WORD *)v2 + 526) = v18;
    if ( v12 ^ v13 )
      *((_WORD *)v2 + 527) = 1;
    else
      *((_WORD *)v2 + 527) = sub_48CBB0(Dst);
    v2[266] = sub_48CBB0(Dst);
    v2[267] = sub_48CBB0(Dst);
    v19 = sub_48CBB0(Dst);
    v13 = __OFSUB__(v2[2], 1);
    v12 = v2[2] - 1 < 0;
    v2[268] = v19;
    if ( v12 ^ v13 )
      *((_WORD *)v2 + 518) = 0;
    else
      *((_WORD *)v2 + 518) = sub_48CBB0(Dst);
    v20 = v2 + 291;
    v21 = 6;
    do
    {
      *v20 = sub_48CBB0(Dst);
      ++v20;
      --v21;
    }
    while ( v21 );
    v22 = v2 + 297;
    v23 = 8;
    do
    {
      *v22 = sub_48CBB0(Dst);
      ++v22;
      --v23;
    }
    while ( v23 );
    v24 = v2[2];
    if ( v24 >= 6 && v24 < 31 )
    {
      sub_48CBB0(Dst);
      v25 = 30;
      do
      {
        sub_48CBB0(Dst);
        --v25;
      }
      while ( v25 );
    }
    if ( v2[2] >= 17 )
      *((_WORD *)v2 + 519) = sub_48CBB0(Dst);
    if ( v2[2] >= 35 )
      v2[271] = sub_48CBB0(Dst);
    if ( v2[2] >= 36 )
      v2[272] = sub_48CBB0(Dst);
    if ( v2[2] >= 37 )
      *((_WORD *)v2 + 522) = sub_48CBB0(Dst);
    if ( v2[2] >= 46 )
    {
      *((_WORD *)v2 + 520) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 521) = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 5 )
    {
      v44 = v2 + 308;
      v26 = v2 + 306;
      v27 = (int)(v2 + 322);
      v45 = 2;
      do
      {
        *(v26 - 2) = sub_48CBB0(Dst);
        *v26 = sub_48CBB0(Dst);
        v26[2] = sub_48CBB0(Dst);
        *v44 = sub_48CBB0(Dst);
        v28 = v2[2];
        if ( v28 < 30 )
        {
          if ( v28 < 12 )
          {
            sub_48CA10(v27 - 48, Dst);
            sub_48CA10(v27 - 24, Dst);
            *(_WORD *)v27 = sub_48CBB0(Dst);
            *(_WORD *)(v27 + 2) = sub_48CBB0(Dst);
            v42 = 0;
            *(_WORD *)(v27 + 8) = 0;
          }
          else
          {
            sub_48CA10(v27 - 48, Dst);
            sub_48CA10(v27 - 24, Dst);
            *(_WORD *)v27 = sub_48CBB0(Dst);
            *(_WORD *)(v27 + 2) = sub_48CBB0(Dst);
            v29 = sub_48CBB0(Dst);
            v30 = sub_48CBB0(Dst);
            LOBYTE(v42) = sub_48CBB0(Dst);
            BYTE1(v42) = v30;
            HIWORD(v42) = v29;
          }
          *(_DWORD *)(v27 + 4) = v42;
        }
        else
        {
          sub_401A78(v27 - 48, Dst);
        }
        ++v44;
        ++v26;
        v27 += 60;
        --v45;
      }
      while ( v45 );
      v2[345] = sub_48CBB0(Dst);
      v31 = sub_48CBB0(Dst);
      v13 = __OFSUB__(v2[2], 21);
      v12 = v2[2] - 21 < 0;
      v2[346] = v31;
      if ( !(v12 ^ v13) )
        v2[347] = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 9 )
    {
      v32 = sub_48CBB0(Dst);
      v13 = __OFSUB__(v2[2], 24);
      v12 = v2[2] - 24 < 0;
      *((_WORD *)v2 + 696) = v32;
      if ( v12 ^ v13 )
        sub_48CBB0(Dst);
      *((_WORD *)v2 + 697) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 699) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 701) = sub_48CBB0(Dst);
      v33 = sub_48CBB0(Dst);
      v13 = __OFSUB__(v2[2], 15);
      v12 = v2[2] - 15 < 0;
      *((_WORD *)v2 + 703) = v33;
      if ( !(v12 ^ v13) )
      {
        *((_WORD *)v2 + 705) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 698) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 700) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 702) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 704) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 706) = sub_48CBB0(Dst);
      }
      v34 = sub_48CBB0(Dst);
      v13 = __OFSUB__(v2[2], 24);
      v12 = v2[2] - 24 < 0;
      *((_WORD *)v2 + 707) = v34;
      if ( !(v12 ^ v13) )
      {
        v35 = v2 + 354;
        v36 = 16;
        do
        {
          *v35 = sub_48CBB0(Dst);
          ++v35;
          --v36;
        }
        while ( v36 );
      }
      if ( v2[2] < 23 )
        sub_48CBB0(Dst);
    }
    if ( v2[2] >= 29 )
    {
      *((_WORD *)v2 + 724) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 725) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 726) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 727) = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 33 )
      sub_48CA10((int)(v2 + 37), Dst);
    if ( v2[2] >= 38 )
    {
      sub_48CA10((int)(v2 + 101), Dst);
      sub_48CA10((int)(v2 + 165), Dst);
    }
    if ( v2[2] >= 42 )
    {
      v2[340] = sub_48CBB0(Dst);
      v2[341] = sub_48CBB0(Dst);
      v2[342] = sub_48CBB0(Dst);
      v2[343] = sub_48CBB0(Dst);
      *((_WORD *)v2 + 688) = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 47 )
      *((_WORD *)v2 + 728) = sub_48CBB0(Dst);
    v37 = v2[2];
    if ( v37 >= 50 )
    {
      if ( v37 >= 52 )
        v2[3] = sub_48CBB0(Dst);
      v38 = sub_48CBB0(Dst);
      v13 = __OFSUB__(v2[2], 52);
      v12 = v2[2] - 52 < 0;
      v2[5] = v38;
      if ( !(v12 ^ v13) )
        v2[4] = sub_48CBB0(Dst);
      v2[6] = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 48 )
    {
      v39 = v2 + 22;
      v40 = 30;
      do
      {
        *(v39 - 30) = sub_48CBB0(Dst);
        *v39 = sub_48CBB0(Dst);
        ++v39;
        --v40;
      }
      while ( v40 );
    }
  }
  else
  {
    v6 = malloc(1u);
    v2[1] = v6;
    *v6 = 0;
  }
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B0890) --------------------------------------------------------
int __thiscall sub_4B0890(_DWORD *this, int (__thiscall ***a2)(_DWORD, int, int))
{
  _DWORD *v2; // esi
  int (__thiscall ***v3)(_DWORD, int, int); // edi
  int v4; // ebx
  int v5; // eax
  int v6; // eax
  int result; // eax

  v2 = this;
  v3 = a2;
  this[365] = 0;
  v4 = (int)(this + 310);
  v5 = (**a2)(a2, (int)(this + 310), (int)(this + 316));
  v2[366] = v5;
  v2[368] = (*v3)[1](v3, v5, v4);
  v6 = (**v3)(v3, (int)(v2 + 325), (int)(v2 + 331));
  v2[367] = v6;
  result = (*v3)[1](v3, v6, (int)(v2 + 325));
  v2[369] = result;
  return result;
}

//----- (004B0910) --------------------------------------------------------
int __fastcall sub_4B0910(int a1, int a2, int a3)
{
  _BYTE *v3; // ecx
  int v4; // eax
  unsigned int v5; // esi

  v3 = (_BYTE *)(a1 + 12);
  v4 = -1;
  if ( a3 )
    v4 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v5 = (unsigned int)(v3 + 1448);
  if ( v3 < v3 + 1448 )
  {
    do
      v4 = dword_53A208[(unsigned __int8)(v4 ^ *v3++)] ^ (v4 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v3 < v5 );
  }
  return ~v4;
}

//----- (004B09C0) --------------------------------------------------------
#error "4B0F3F: call analysis failed (funcsize=438)"

//----- (004B0F80) --------------------------------------------------------
int __thiscall sub_4B0F80(char *this, char *Dest)
{
  return sprintf(Dest, "%s,%s", this + 1240, this + 1300);
}

//----- (004B0FB0) --------------------------------------------------------
int __thiscall sub_4B0FB0(_DWORD *this, void *Dst)
{
  int v2; // edi
  void *v3; // esi
  _DWORD *v4; // eax
  signed int v5; // ecx
  int v6; // ebp
  __int16 v7; // ax
  bool v8; // sf
  unsigned __int8 v9; // of
  __int16 v10; // ax
  signed int v11; // eax
  signed int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  char *Dsta; // [esp+28h] [ebp+4h]

  v2 = (int)this;
  v3 = Dst;
  sub_4B0000(this, Dst);
  *(_DWORD *)v2 = &CarVItem::`vftable';
  memset((void *)(v2 + 1480), 0, 0x520u);
  *(_WORD *)(v2 + 2570) = 1;
  *(_WORD *)(v2 + 2572) = 1;
  *(_WORD *)(v2 + 2574) = 1000;
  *(_WORD *)(v2 + 2578) = 10;
  *(_WORD *)(v2 + 2580) = 24;
  *(_WORD *)(v2 + 2554) = 4000;
  v4 = (_DWORD *)(v2 + 1912);
  v5 = 16;
  do
  {
    *(v4 - 1) = -1;
    *v4 = -1;
    v4 += 10;
    --v5;
  }
  while ( v5 );
  if ( Dst )
  {
    Dsta = 0;
    v6 = v2 + 1920;
    do
    {
      *(_WORD *)(v6 + 16) = sub_48CBB0(v3);
      *(_DWORD *)(v6 - 4) = sub_48CBB0(v3);
      *(_DWORD *)v6 = sub_48CBB0(v3);
      *(_DWORD *)(v6 + 4) = sub_48CBB0(v3);
      *(_DWORD *)(v6 + 8) = sub_48CBB0(v3);
      if ( *(_DWORD *)(v2 + 8) < 4 )
        *(_DWORD *)(v6 + 12) = 0;
      else
        *(_DWORD *)(v6 + 12) = sub_48CBB0(v3);
      if ( *(_DWORD *)(v2 + 8) >= 16 )
      {
        *(_DWORD *)(v6 - 20) = sub_48CBB0(v3);
        *(_DWORD *)(v6 - 16) = sub_48CBB0(v3);
      }
      if ( *(_DWORD *)(v2 + 8) >= 32 )
      {
        *(_DWORD *)(v6 - 12) = sub_48CBB0(v3);
        *(_DWORD *)(v6 - 8) = sub_48CBB0(v3);
      }
      Dsta[v2 + 2792] = *(_WORD *)(v6 + 16) != -1;
      v6 += 40;
      ++Dsta;
    }
    while ( (signed int)Dsta < 16 );
    *(_WORD *)(v2 + 2544) = sub_48CBB0(v3);
    v7 = sub_48CBB0(v3);
    v9 = __OFSUB__(*(_DWORD *)(v2 + 8), 2);
    v8 = *(_DWORD *)(v2 + 8) - 2 < 0;
    *(_WORD *)(v2 + 2546) = v7;
    if ( v8 ^ v9 )
    {
      *(_WORD *)(v2 + 2556) = 0;
      *(_WORD *)(v2 + 2558) = 0;
      *(_WORD *)(v2 + 2560) = 0;
    }
    else
    {
      *(_WORD *)(v2 + 2556) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2558) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2560) = sub_48CBB0(v3);
    }
    if ( *(_DWORD *)(v2 + 8) >= 5 )
    {
      *(_WORD *)(v2 + 2548) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2550) = sub_48CBB0(v3);
      v10 = sub_48CBB0(v3);
      v9 = __OFSUB__(*(_DWORD *)(v2 + 8), 43);
      v8 = *(_DWORD *)(v2 + 8) - 43 < 0;
      *(_WORD *)(v2 + 2552) = v10;
      if ( !(v8 ^ v9) )
        *(_WORD *)(v2 + 2554) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2562) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2564) = sub_48CBB0(v3);
    }
    if ( *(_DWORD *)(v2 + 8) >= 16 )
      *(_DWORD *)(v2 + 2540) = sub_48CBB0(v3);
    if ( *(_DWORD *)(v2 + 8) >= 18 )
    {
      *(_WORD *)(v2 + 2566) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2568) = sub_48CBB0(v3);
    }
    if ( *(_DWORD *)(v2 + 8) >= 20 )
    {
      *(_WORD *)(v2 + 2570) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2572) = sub_48CBB0(v3);
    }
    if ( *(_DWORD *)(v2 + 8) >= 28 )
      *(_WORD *)(v2 + 2574) = sub_48CBB0(v3);
    if ( *(_DWORD *)(v2 + 8) >= 40 )
      *(_WORD *)(v2 + 2576) = sub_48CBB0(v3);
    if ( *(_DWORD *)(v2 + 8) >= 41 )
    {
      *(_WORD *)(v2 + 2578) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2580) = sub_48CBB0(v3);
    }
    v11 = *(_DWORD *)(v2 + 8);
    if ( v11 < 30 )
    {
      if ( v11 < 12 )
      {
        sub_48CA10(v2 + 1480, v3);
        sub_48CA10(v2 + 1504, v3);
        *(_WORD *)(v2 + 1528) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1530) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1532) = 0;
        *(_WORD *)(v2 + 1536) = 0;
        sub_48CA10(v2 + 1540, v3);
        sub_48CA10(v2 + 1564, v3);
        *(_WORD *)(v2 + 1588) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1590) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1592) = 0;
        *(_WORD *)(v2 + 1596) = 0;
        sub_48CA10(v2 + 1600, v3);
        sub_48CA10(v2 + 1624, v3);
        *(_WORD *)(v2 + 1648) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1650) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1652) = 0;
        *(_WORD *)(v2 + 1656) = 0;
        sub_48CA10(v2 + 1660, v3);
        sub_48CA10(v2 + 1684, v3);
        *(_WORD *)(v2 + 1708) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1710) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1712) = 0;
        *(_WORD *)(v2 + 1716) = 0;
        sub_48CA10(v2 + 1720, v3);
        sub_48CA10(v2 + 1744, v3);
        *(_WORD *)(v2 + 1768) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1770) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1772) = 0;
        *(_WORD *)(v2 + 1776) = 0;
        sub_48CA10(v2 + 1780, v3);
        sub_48CA10(v2 + 1804, v3);
        *(_WORD *)(v2 + 1828) = sub_48CBB0(v3);
        *(_WORD *)(v2 + 1830) = sub_48CBB0(v3);
        *(_DWORD *)(v2 + 1832) = 0;
        *(_WORD *)(v2 + 1836) = 0;
      }
      else
      {
        sub_48ECE0(v2 + 1480, v3);
        sub_48ECE0(v2 + 1540, v3);
        sub_48ECE0(v2 + 1600, v3);
        sub_48ECE0(v2 + 1660, v3);
        sub_48ECE0(v2 + 1720, v3);
        sub_48ECE0(v2 + 1780, v3);
      }
    }
    else
    {
      sub_401A78(v2 + 1480, v3);
      sub_401A78(v2 + 1540, v3);
      sub_401A78(v2 + 1600, v3);
      sub_401A78(v2 + 1660, v3);
      sub_401A78(v2 + 1720, v3);
      sub_401A78(v2 + 1780, v3);
    }
    v12 = *(_DWORD *)(v2 + 8);
    if ( v12 < 30 )
    {
      if ( v12 >= 19 )
        sub_48ECE0(v2 + 1840, v3);
    }
    else
    {
      sub_401A78(v2 + 1840, v3);
    }
    sub_48CA10(v2 + 2582, v3);
    sub_48CA10(v2 + 2606, v3);
    *(_WORD *)(v2 + 2630) = sub_48CBB0(v3);
    *(_WORD *)(v2 + 2632) = sub_48CBB0(v3);
    sub_48CA10(v2 + 2634, v3);
    sub_48CA10(v2 + 2658, v3);
    *(_WORD *)(v2 + 2682) = sub_48CBB0(v3);
    *(_WORD *)(v2 + 2684) = sub_48CBB0(v3);
    sub_48CA10(v2 + 2686, v3);
    sub_48CA10(v2 + 2710, v3);
    *(_WORD *)(v2 + 2734) = sub_48CBB0(v3);
    *(_WORD *)(v2 + 2736) = sub_48CBB0(v3);
    if ( *(_DWORD *)(v2 + 8) < 4 )
    {
      memset((void *)(v2 + 2738), 0, 0x34u);
      *(_DWORD *)(v2 + 2738) = 1701736270;
      *(_BYTE *)(v2 + 2742) = 0;
    }
    else
    {
      sub_48CA10(v2 + 2738, v3);
      sub_48CA10(v2 + 2762, v3);
      *(_WORD *)(v2 + 2786) = sub_48CBB0(v3);
      *(_WORD *)(v2 + 2788) = sub_48CBB0(v3);
    }
    if ( *(_DWORD *)(v2 + 8) < 3 )
    {
      v13 = j__atol((const char *)(v2 + 1504));
      sprintf((char *)(v2 + 1504), "gfx%05d", v13);
      v14 = j__atol((const char *)(v2 + 1564));
      sprintf((char *)(v2 + 1564), "gfx%05d", v14);
      v15 = j__atol((const char *)(v2 + 1624));
      sprintf((char *)(v2 + 1624), "gfx%05d", v15);
      v16 = j__atol((const char *)(v2 + 1684));
      sprintf((char *)(v2 + 1684), "gfx%05d", v16);
      v17 = j__atol((const char *)(v2 + 1744));
      sprintf((char *)(v2 + 1744), "gfx%05d", v17);
      v18 = j__atol((const char *)(v2 + 1804));
      sprintf((char *)(v2 + 1804), "gfx%05d", v18);
      v19 = j__atol((const char *)(v2 + 2606));
      sprintf((char *)(v2 + 2606), "wav%05d", v19);
      v20 = j__atol((const char *)(v2 + 2658));
      sprintf((char *)(v2 + 2658), "wav%05d", v20);
      v21 = j__atol((const char *)(v2 + 2710));
      sprintf((char *)(v2 + 2710), "wav%05d", v21);
    }
  }
  return v2;
}
// 51EFE8: using guessed type void *CarVItem::`vftable';

//----- (004B1720) --------------------------------------------------------
int __fastcall sub_4B1720(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 2792;
  v5 = (_BYTE *)(a1 + 1480);
  if ( a1 + 1480 < (unsigned int)(a1 + 2792) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_4B0910(a1, v4, a3);
}

//----- (004B17F0) --------------------------------------------------------
signed int sub_4B17F0()
{
  return 2;
}

//----- (004B1800) --------------------------------------------------------
int __thiscall sub_4B1800(_DWORD *this, char *a2)
{
  _DWORD *v2; // esi
  signed int v3; // ebp
  int v4; // ebx
  _WORD *v5; // edi
  char v6; // al
  char *v7; // edi
  char *v8; // ebx
  char *v9; // ebp
  int v10; // ST84_4
  char *v11; // ST7C_4
  char *v12; // ST78_4
  char *v13; // ST74_4
  char *v14; // ST70_4
  char *v15; // ST6C_4
  char *v16; // ST68_4
  char *v17; // ST64_4
  char *v18; // eax
  char *v20; // [esp+14h] [ebp-2808h]
  char Dest[2048]; // [esp+18h] [ebp-2804h]
  char v22; // [esp+818h] [ebp-2004h]

  v2 = this;
  sub_4B09C0(&v22);
  Dest[0] = 0;
  v3 = 0;
  v4 = (int)(v2 + 477);
  do
  {
    if ( v3 )
    {
      v5 = (_WORD *)((char *)&v20 + 3);
      do
      {
        v6 = *((_BYTE *)v5 + 1);
        v5 = (_WORD *)((char *)v5 + 1);
      }
      while ( v6 );
      *v5 = 44;
    }
    sprintf(
      &Dest[strlen(Dest)],
      "%d,%d,%d,%d,%d,%d,  %d,%d,%d,%d",
      *(signed __int16 *)(v4 + 28),
      *(_DWORD *)(v4 + 8),
      *(_DWORD *)(v4 + 12),
      *(_DWORD *)(v4 + 16),
      *(_DWORD *)(v4 + 20),
      *(_DWORD *)(v4 + 24),
      *(_DWORD *)(v4 - 8),
      *(_DWORD *)(v4 - 4),
      *(_DWORD *)v4,
      *(_DWORD *)(v4 + 4));
    ++v3;
    v4 += 40;
  }
  while ( v3 < 16 );
  v7 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v7, "%s,%s,%d,%d", (char *)v2 + 2738, (char *)v2 + 2762, *((signed __int16 *)v2 + 1393), 0);
  v8 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v8, "%s,%s,%d,%d", (char *)v2 + 2686, (char *)v2 + 2710, *((signed __int16 *)v2 + 1367), 0);
  v9 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v9, "%s,%s,%d,%d", (char *)v2 + 2634, (char *)v2 + 2658, *((signed __int16 *)v2 + 1341), 0);
  ++dword_56E3F0;
  v10 = *((signed __int16 *)v2 + 1315);
  v20 = &byte_56DBF0[32 * (dword_56E3F0 % 64)];
  sprintf(v20, "%s,%s,%d,%d", (char *)v2 + 2582, (char *)v2 + 2606, v10, 0);
  v11 = v20;
  v12 = sub_48DF30((int)(v2 + 460));
  v13 = sub_48DF30((int)(v2 + 445));
  v14 = sub_48DF30((int)(v2 + 430));
  v15 = sub_48DF30((int)(v2 + 415));
  v16 = sub_48DF30((int)(v2 + 400));
  v17 = sub_48DF30((int)(v2 + 385));
  v18 = sub_48DF30((int)(v2 + 370));
  return sprintf(
           a2,
           "%s,    %s,  %d,%d,%d,%d,%d,  %d,%d,%d,%d,%d,%d,  %d,%d,%d,%d,%d,  %d,%d,%d,%d,  %s,%s,%s,%s,%s,%s,%s,  %s,%s,%s,%s",
           &v22,
           Dest,
           *((signed __int16 *)v2 + 1272),
           *((signed __int16 *)v2 + 1273),
           *((signed __int16 *)v2 + 1278),
           *((signed __int16 *)v2 + 1279),
           *((signed __int16 *)v2 + 1280),
           *((signed __int16 *)v2 + 1274),
           *((signed __int16 *)v2 + 1275),
           *((signed __int16 *)v2 + 1276),
           *((signed __int16 *)v2 + 1277),
           *((signed __int16 *)v2 + 1281),
           *((signed __int16 *)v2 + 1282),
           v2[635],
           *((signed __int16 *)v2 + 1283),
           *((signed __int16 *)v2 + 1284),
           *((signed __int16 *)v2 + 1285),
           *((signed __int16 *)v2 + 1286),
           *((signed __int16 *)v2 + 1287),
           *((signed __int16 *)v2 + 1288),
           *((signed __int16 *)v2 + 1289),
           *((signed __int16 *)v2 + 1290),
           v18,
           v17,
           v16,
           v15,
           v14,
           v13,
           v12,
           v11,
           v9,
           v8,
           v7);
}
// 4B09C0: using guessed type _DWORD __stdcall sub_4B09C0(_DWORD);
// 56E3F0: using guessed type int dword_56E3F0;
// 4B1800: using guessed type char Dest[2048];

//----- (004B1B20) --------------------------------------------------------
int __thiscall sub_4B1B20(char *this, char *Dest)
{
  return sprintf(
           Dest,
           "%s,%s,%s,%s,%s,%s,%s,%s,%s",
           this + 1480,
           this + 1540,
           this + 1600,
           this + 1660,
           this + 1720,
           this + 1780,
           this + 2582,
           this + 2634,
           this + 2686);
}

//----- (004B1B80) --------------------------------------------------------
_DWORD *__thiscall sub_4B1B80(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  __int16 v6; // ax
  signed int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v13; // [esp-8h] [ebp-28h]

  v2 = this;
  sub_4B0000(this, Dst);
  *v2 = &DependentVItem::`vftable';
  memset(v2 + 370, 0, 0x13Cu);
  *((_WORD *)v2 + 751) = 400;
  if ( Dst )
  {
    v2[376] = sub_48CBB0(Dst);
    v2[377] = sub_48CBB0(Dst);
    *((_WORD *)v2 + 742) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 743) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 744) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 745) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[2], 27);
    v4 = v2[2] - 27 < 0;
    *((_WORD *)v2 + 746) = v3;
    if ( !(v4 ^ v5) )
      *((_WORD *)v2 + 747) = sub_48CBB0(Dst);
    v6 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[2], 14);
    v4 = v2[2] - 14 < 0;
    *((_WORD *)v2 + 748) = v6;
    if ( !(v4 ^ v5) )
      *((_WORD *)v2 + 740) = sub_48CBB0(Dst);
    if ( v2[2] >= 38 )
      *((_WORD *)v2 + 741) = sub_48CBB0(Dst);
    if ( v2[2] >= 44 )
    {
      *((_WORD *)v2 + 749) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 750) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 751) = sub_48CBB0(Dst);
      sub_48CA10((int)(v2 + 436), Dst);
      sub_48CA10((int)(v2 + 442), Dst);
      *((_WORD *)v2 + 896) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 897) = sub_48CBB0(Dst);
    }
    v7 = v2[2];
    v13 = (int)(v2 + 378);
    if ( v7 < 30 )
    {
      if ( v7 < 12 )
      {
        sub_48EC80(v13, Dst);
        sub_48EC80((int)(v2 + 393), Dst);
        sub_48EC80((int)(v2 + 408), Dst);
      }
      else
      {
        sub_48ECE0(v13, Dst);
        sub_48ECE0((int)(v2 + 393), Dst);
        sub_48ECE0((int)(v2 + 408), Dst);
      }
    }
    else
    {
      sub_401A78(v13, Dst);
      sub_401A78((int)(v2 + 393), Dst);
      sub_401A78((int)(v2 + 408), Dst);
    }
    sub_48CA10((int)(v2 + 423), Dst);
    sub_48CA10((int)(v2 + 429), Dst);
    *((_WORD *)v2 + 870) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 871) = sub_48CBB0(Dst);
    if ( v2[2] < 3 )
    {
      v8 = j__atol((const char *)v2 + 1536);
      sprintf((char *)v2 + 1536, "gfx%05d", v8);
      v9 = j__atol((const char *)v2 + 1596);
      sprintf((char *)v2 + 1596, "gfx%05d", v9);
      v10 = j__atol((const char *)v2 + 1656);
      sprintf((char *)v2 + 1656, "gfx%05d", v10);
      v11 = j__atol((const char *)v2 + 1716);
      sprintf((char *)v2 + 1716, "wav%05d", v11);
    }
  }
  return v2;
}
// 51F008: using guessed type void *DependentVItem::`vftable';

//----- (004B1E40) --------------------------------------------------------
int __fastcall sub_4B1E40(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 1796;
  v5 = (_BYTE *)(a1 + 1480);
  if ( a1 + 1480 < (unsigned int)(a1 + 1796) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_4B0910(a1, v4, a3);
}

//----- (004B1F10) --------------------------------------------------------
signed int sub_4B1F10()
{
  return 3;
}

//----- (004B1F20) --------------------------------------------------------
int __thiscall sub_4B1F20(_DWORD *this, char *Dest)
{
  _DWORD *v2; // esi
  char *v3; // edi
  char *v4; // ebx
  char *v5; // ST50_4
  char *v6; // ST4C_4
  char *v7; // eax
  char v9; // [esp+10h] [ebp-2004h]

  v2 = this;
  sub_4B09C0(&v9);
  v3 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v3, "%s,%s,%d,%d", v2 + 423, v2 + 429, *((signed __int16 *)v2 + 870), 0);
  v4 = &byte_56DBF0[32 * (++dword_56E3F0 % 64)];
  sprintf(v4, "%s,%s,%d,%d", v2 + 436, v2 + 442, *((signed __int16 *)v2 + 896), 0);
  v5 = sub_48DF30((int)(v2 + 408));
  v6 = sub_48DF30((int)(v2 + 393));
  v7 = sub_48DF30((int)(v2 + 378));
  return sprintf(
           Dest,
           "%s,    %d,%d,%d,%d,%d, %d,%d,%d,%d, %d,%d,  %d,%d,%d,%s,  %s,%s,%s,%s",
           &v9,
           v2[376],
           v2[377],
           *((signed __int16 *)v2 + 742),
           *((signed __int16 *)v2 + 743),
           *((signed __int16 *)v2 + 744),
           *((signed __int16 *)v2 + 745),
           *((signed __int16 *)v2 + 746),
           *((signed __int16 *)v2 + 747),
           *((signed __int16 *)v2 + 748),
           *((signed __int16 *)v2 + 740),
           *((signed __int16 *)v2 + 741),
           *((signed __int16 *)v2 + 749),
           *((signed __int16 *)v2 + 750),
           *((signed __int16 *)v2 + 751),
           v4,
           v7,
           v6,
           v5,
           v3);
}
// 4B09C0: using guessed type _DWORD __stdcall sub_4B09C0(_DWORD);
// 56E3F0: using guessed type int dword_56E3F0;

//----- (004B20A0) --------------------------------------------------------
int __thiscall sub_4B20A0(char *this, char *Dest)
{
  return sprintf(Dest, "%s,%s,%s,%s,%s", this + 1512, this + 1572, this + 1632, this + 1692, this + 1744);
}

//----- (004B20E0) --------------------------------------------------------
_DWORD *__thiscall sub_4B20E0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi
  __int16 v3; // ax
  bool v4; // sf
  unsigned __int8 v5; // of
  __int16 v6; // ax
  __int16 v7; // ax
  __int16 v8; // ax
  signed int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // ebx
  signed int v13; // ebp

  v2 = this;
  sub_4B0000(this, Dst);
  *v2 = &ComputerVItem::`vftable';
  memset(v2 + 370, 0, 0xE08u);
  *((_WORD *)v2 + 759) = 2;
  *((_WORD *)v2 + 760) = 2;
  *((_WORD *)v2 + 769) = 800;
  *((_WORD *)v2 + 761) = -1;
  *((_WORD *)v2 + 762) = -1;
  *((_WORD *)v2 + 763) = 10;
  *((_WORD *)v2 + 764) = 10;
  *((_WORD *)v2 + 765) = -1;
  *((_WORD *)v2 + 766) = -1;
  *((_WORD *)v2 + 767) = -1;
  *((_WORD *)v2 + 768) = -1;
  v2[371] = 100000;
  *((_WORD *)v2 + 840) = -1;
  *((_WORD *)v2 + 841) = 0;
  *((_WORD *)v2 + 842) = 0;
  v2[418] = 0;
  v2[419] = 0;
  *(_DWORD *)((char *)v2 + 1542) = 824256049;
  *((_BYTE *)v2 + 1546) = 0;
  *(_DWORD *)((char *)v2 + 1606) = 824256049;
  *((_BYTE *)v2 + 1610) = 0;
  if ( Dst )
  {
    v2[372] = sub_48CBB0(Dst);
    *((_WORD *)v2 + 746) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 747) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 748) = sub_48CBB0(Dst);
    v3 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[2], 30);
    v4 = v2[2] - 30 < 0;
    *((_WORD *)v2 + 749) = v3;
    if ( !(v4 ^ v5) )
    {
      v2[370] = sub_48CBB0(Dst);
      v2[371] = sub_48CBB0(Dst);
    }
    *((_WORD *)v2 + 750) = sub_48CBB0(Dst);
    *((_WORD *)v2 + 751) = sub_48CBB0(Dst);
    v6 = sub_48CBB0(Dst);
    v5 = __OFSUB__(v2[2], 7);
    v4 = v2[2] - 7 < 0;
    *((_WORD *)v2 + 752) = v6;
    if ( !(v4 ^ v5) )
    {
      *((_WORD *)v2 + 754) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 755) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 756) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 757) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 758) = sub_48CBB0(Dst);
    }
    if ( v2[2] >= 10 )
      *((_WORD *)v2 + 753) = sub_48CBB0(Dst);
    if ( v2[2] >= 13 )
    {
      *((_WORD *)v2 + 769) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 759) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 760) = sub_48CBB0(Dst);
      v7 = sub_48CBB0(Dst);
      v5 = __OFSUB__(v2[2], 53);
      v4 = v2[2] - 53 < 0;
      *((_WORD *)v2 + 761) = v7;
      if ( !(v4 ^ v5) )
        *((_WORD *)v2 + 762) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 763) = sub_48CBB0(Dst);
      *((_WORD *)v2 + 764) = sub_48CBB0(Dst);
      v8 = sub_48CBB0(Dst);
      v5 = __OFSUB__(v2[2], 39);
      v4 = v2[2] - 39 < 0;
      *((_WORD *)v2 + 765) = v8;
      if ( !(v4 ^ v5) )
      {
        *((_WORD *)v2 + 766) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 767) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 768) = sub_48CBB0(Dst);
      }
      if ( v2[2] >= 53 )
      {
        v2[418] = sub_48CBB0(Dst);
        v2[419] = sub_48CBB0(Dst);
        *((_WORD *)v2 + 840) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 841) = sub_48CBB0(Dst);
        *((_WORD *)v2 + 842) = sub_48CBB0(Dst);
      }
    }
    if ( v2[2] >= 49 )
    {
      sub_48CA10((int)v2 + 1542, Dst);
      sub_48CA10((int)v2 + 1606, Dst);
    }
    if ( v2[2] >= 27 )
      *((_WORD *)v2 + 770) = sub_48CBB0(Dst);
    v9 = v2[2];
    if ( v9 < 30 )
    {
      if ( v9 < 12 )
      {
        sub_48EC80((int)(v2 + 1238), Dst);
        sub_48EC80((int)(v2 + 1253), Dst);
      }
      else
      {
        sub_48ECE0((int)(v2 + 1238), Dst);
        sub_48ECE0((int)(v2 + 1253), Dst);
      }
    }
    else
    {
      sub_401A78((int)(v2 + 1238), Dst);
      sub_401A78((int)(v2 + 1253), Dst);
    }
    if ( v2[2] < 3 )
    {
      v10 = j__atol((const char *)v2 + 4976);
      sprintf((char *)v2 + 4976, "gfx%05d", v10);
      v11 = j__atol((const char *)v2 + 5036);
      sprintf((char *)v2 + 5036, "gfx%05d", v11);
    }
    if ( v2[2] >= 22 )
    {
      v12 = (int)(v2 + 468);
      v13 = 16;
      do
      {
        sub_48CA10(v12 - 56, Dst);
        *(_WORD *)v12 = sub_48CBB0(Dst);
        *(_WORD *)(v12 + 2) = sub_48CBB0(Dst);
        *(_DWORD *)(v12 + 12) = sub_48CBB0(Dst);
        *(_DWORD *)(v12 - 16) = sub_48CBB0(Dst);
        *(_WORD *)(v12 + 4) = sub_48CBB0(Dst);
        *(_DWORD *)(v12 - 12) = sub_48CBB0(Dst);
        *(_DWORD *)(v12 - 8) = sub_48CBB0(Dst);
        sub_48CA10(v12 - 184, Dst);
        *(_WORD *)(v12 + 6) = sub_48CBB0(Dst);
        *(_DWORD *)(v12 - 4) = sub_48CBB0(Dst);
        sub_48CA10(v12 - 120, Dst);
        *(_DWORD *)(v12 + 16) = sub_48CBB0(Dst);
        if ( v2[2] >= 51 )
          *(_WORD *)(v12 + 8) = sub_48CBB0(Dst);
        v12 += 204;
        --v13;
      }
      while ( v13 );
    }
  }
  return v2;
}
// 51F028: using guessed type void *ComputerVItem::`vftable';

//----- (004B25A0) --------------------------------------------------------
int __fastcall sub_4B25A0(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 5072;
  v5 = (_BYTE *)(a1 + 1480);
  if ( a1 + 1480 < (unsigned int)(a1 + 5072) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_4B0910(a1, v4, a3);
}

//----- (004B2680) --------------------------------------------------------
int __thiscall sub_4B2680(_DWORD *this, char *a2)
{
  _DWORD *v2; // ebp
  _DWORD *v3; // ebx
  char *v4; // edi
  char v5; // al
  unsigned int v6; // eax
  char *v7; // edi
  char v8; // cl
  bool v9; // sf
  unsigned __int8 v10; // of
  char *v11; // ST9C_4
  char *v12; // eax
  int v14; // [esp+10h] [ebp-320Ch]
  char Dest; // [esp+18h] [ebp-3204h]
  char v16; // [esp+217h] [ebp-3005h]
  char v17; // [esp+218h] [ebp-3004h]
  char v18; // [esp+1218h] [ebp-2004h]

  v2 = this;
  sub_4B09C0(&v18);
  v17 = 0;
  v14 = 0;
  v3 = v2 + 472;
  do
  {
    sprintf(
      &Dest,
      "\"%s\",%d,%d,%d,%d,  %d,%d,%d,\"%s\",  %d,%d,\"%s\",%d,  %d",
      v3 - 18,
      *((signed __int16 *)v3 - 8),
      *((signed __int16 *)v3 - 7),
      *(v3 - 1),
      *(v3 - 8),
      *((signed __int16 *)v3 - 6),
      *(v3 - 7),
      *(v3 - 6),
      v3 - 50,
      *((signed __int16 *)v3 - 5),
      *(v3 - 5),
      v3 - 34,
      *v3,
      *((signed __int16 *)v3 - 4));
    if ( v14 )
    {
      v4 = &v16;
      do
        v5 = (v4++)[1];
      while ( v5 );
      *(_WORD *)v4 = 44;
    }
    v6 = strlen(&Dest) + 1;
    v7 = &v16;
    do
      v8 = (v7++)[1];
    while ( v8 );
    qmemcpy(v7, &Dest, v6);
    v3 += 51;
    v10 = __OFSUB__(v14 + 1, 16);
    v9 = v14++ - 15 < 0;
  }
  while ( v9 ^ v10 );
  v11 = sub_48DF30((int)(v2 + 1253));
  v12 = sub_48DF30((int)(v2 + 1238));
  return sprintf(
           a2,
           "%s,    %d,%d,%d,%d,  %d,%d,%d,%d,%d,%d,  %d,%d,%d,%d,  %d,%d,%d,%d,  %d,%d,%d,%d,%d,  %d,%d,%d,%d, %d,%d,%d,%"
           "d,%d,  \"%s\",\"%s\",  %d,%s,%s,  %s",
           &v18,
           v2[372],
           *((signed __int16 *)v2 + 746),
           *((signed __int16 *)v2 + 747),
           *((signed __int16 *)v2 + 748),
           *((signed __int16 *)v2 + 749),
           v2[370],
           v2[371],
           *((signed __int16 *)v2 + 750),
           *((signed __int16 *)v2 + 751),
           *((signed __int16 *)v2 + 752),
           *((signed __int16 *)v2 + 754),
           *((signed __int16 *)v2 + 755),
           *((signed __int16 *)v2 + 756),
           *((signed __int16 *)v2 + 757),
           *((signed __int16 *)v2 + 758),
           *((signed __int16 *)v2 + 753),
           *((signed __int16 *)v2 + 769),
           *((signed __int16 *)v2 + 759),
           *((signed __int16 *)v2 + 760),
           *((signed __int16 *)v2 + 761),
           *((signed __int16 *)v2 + 762),
           *((signed __int16 *)v2 + 763),
           *((signed __int16 *)v2 + 764),
           *((signed __int16 *)v2 + 765),
           *((signed __int16 *)v2 + 766),
           *((signed __int16 *)v2 + 767),
           *((signed __int16 *)v2 + 768),
           v2[418],
           v2[419],
           *((signed __int16 *)v2 + 840),
           *((signed __int16 *)v2 + 841),
           *((signed __int16 *)v2 + 842),
           (char *)v2 + 1542,
           (char *)v2 + 1606,
           *((signed __int16 *)v2 + 770),
           v12,
           v11,
           &v17);
}
// 4B09C0: using guessed type _DWORD __stdcall sub_4B09C0(_DWORD);

//----- (004B2910) --------------------------------------------------------
int __thiscall sub_4B2910(char *this, char *Dest)
{
  return sprintf(Dest, "%s,%s", this + 4952, this + 5012);
}

//----- (004B2940) --------------------------------------------------------
_DWORD *__thiscall sub_4B2940(_DWORD *this, void *Dst)
{
  _DWORD *v2; // esi

  v2 = this;
  sub_4B0000(this, Dst);
  *v2 = &SpectatorVItem::`vftable';
  return v2;
}
// 51F048: using guessed type void *SpectatorVItem::`vftable';

//----- (004B29A0) --------------------------------------------------------
_BYTE *__stdcall sub_4B29A0(_BYTE *a1)
{
  _BYTE *result; // eax

  result = a1;
  *a1 = 0;
  return result;
}

//----- (004B29B0) --------------------------------------------------------
_DWORD *__thiscall sub_4B29B0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // edi
  _DWORD *v3; // esi
  char v5[256]; // [esp+14h] [ebp-110h]
  int v6; // [esp+120h] [ebp-4h]

  v2 = this;
  sub_4B0000(this, 0);
  v3 = v2 + 370;
  *v2 = &NestedVItem::`vftable';
  *v3 = 0;
  v3[1] = 0;
  v3[2] = 0;
  v3[3] = 0;
  v3[4] = 0;
  v3[5] = 0;
  v3[6] = 0;
  v6 = 0;
  v3[7] = 0;
  if ( Dst )
  {
    sub_48CA10((int)v5, Dst);
    v2[2] = j__atol(&v5[1]);
    v2[269] = sub_48CBB0(Dst);
    sub_48CA10((int)(v2 + 245), Dst);
    sub_48CA10((int)(v2 + 370), Dst);
  }
  return v2;
}
// 51F068: using guessed type void *NestedVItem::`vftable';

//----- (004B2AC0) --------------------------------------------------------
signed int sub_4B2AC0()
{
  return 6;
}

//----- (004B2AD0) --------------------------------------------------------
int __thiscall sub_4B2AD0(_DWORD *this, char *Dest)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(signed int, _DWORD, _DWORD *, _DWORD *))(*this + 4))(53, this[269], this + 245, this + 370);
  return sprintf(Dest, "%d,v%d,%d,\"%s\",\"%s\"", v2);
}

//----- (004B2B10) --------------------------------------------------------
int __thiscall sub_4B2B10(char *this, char *Dest)
{
  return sprintf(Dest, "%s", this + 1480);
}

//----- (004B2B30) --------------------------------------------------------
int __fastcall sub_4B2B30(int a1, int a2, int a3)
{
  int v3; // esi
  unsigned int v4; // edx
  _BYTE *v5; // eax

  v3 = -1;
  if ( a3 )
    v3 = dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))]) ^ ((unsigned __int16)(LOWORD(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8)) >> 8) ^ HIBYTE(a3))] ^ ((dword_53A208[(unsigned __int8)(LOBYTE(dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))]) ^ ((unsigned __int16)~LOWORD(dword_53A208[(unsigned __int8)~(_BYTE)a3]) >> 8) ^ BYTE2(a3))] ^ ((dword_53A208[(unsigned __int8)(~LOBYTE(dword_53A208[(unsigned __int8)~(_BYTE)a3]) ^ BYTE1(a3))] ^ ((dword_53A208[(unsigned __int8)~(_BYTE)a3] ^ 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF) >> 8) & 0xFFFFFF;
  v4 = a1 + 1512;
  v5 = (_BYTE *)(a1 + 1480);
  if ( a1 + 1480 < (unsigned int)(a1 + 1512) )
  {
    do
      v3 = dword_53A208[(unsigned __int8)(v3 ^ *v5++)] ^ (v3 >> 8) & 0xFFFFFF;
    while ( (unsigned int)v5 < v4 );
  }
  return ~v3 + sub_4B0910(a1, v4, a3);
}

//----- (004B2C00) --------------------------------------------------------
int __thiscall sub_4B2C00(_DWORD *this)
{
  _DWORD *v1; // edi
  int i; // esi
  int (__stdcall ***v3)(signed int); // ecx
  int result; // eax

  v1 = this;
  for ( i = 0; i < v1[500]; ++i )
  {
    v3 = (int (__stdcall ***)(signed int))v1[i];
    if ( v3 )
      result = (**v3)(1);
  }
  return result;
}

//----- (004B2C80) --------------------------------------------------------
int __thiscall sub_4B2C80(_DWORD **this, int a2)
{
  _DWORD **v2; // edi
  int v3; // ebx
  signed int i; // esi
  int v5; // eax

  v2 = this;
  v3 = 0;
  for ( i = 0; i < (signed int)v2[500]; v3 += v5 )
    v5 = (*(int (__stdcall **)(int))(*v2[i++] + 8))(a2);
  return v3;
}

//----- (004B2CC0) --------------------------------------------------------
_DWORD *__thiscall sub_4B2CC0(_DWORD *this, void *Dst)
{
  _DWORD *v2; // ebx
  _DWORD *v3; // esi
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax

  v2 = this;
  v3 = 0;
  switch ( sub_48CBB0(Dst) )
  {
    case 2:
      v4 = operator new(0xAF8u);
      if ( !v4 )
        goto LABEL_12;
      v5 = (_DWORD *)sub_4B0FB0(v4, Dst);
      goto LABEL_13;
    case 3:
      v6 = operator new(0x704u);
      if ( !v6 )
        goto LABEL_12;
      v5 = sub_4B1B80(v6, Dst);
      goto LABEL_13;
    case 4:
      v7 = operator new(0x5C8u);
      if ( !v7 )
        goto LABEL_12;
      v5 = sub_4B2940(v7, Dst);
      goto LABEL_13;
    case 5:
      v8 = operator new(0x13D0u);
      if ( !v8 )
        goto LABEL_12;
      v5 = sub_4B20E0(v8, Dst);
      goto LABEL_13;
    case 6:
      v9 = operator new(0x5E8u);
      if ( v9 )
        v5 = sub_4B29B0(v9, Dst);
      else
LABEL_12:
        v5 = 0;
LABEL_13:
      v3 = v5;
      break;
    default:
      break;
  }
  if ( v2[501] )
    (*(void (__thiscall **)(_DWORD *, _DWORD))(*v3 + 24))(v3, v2[501]);
  return v3;
}

//----- (004B2F10) --------------------------------------------------------
int __cdecl sub_4B2F10(_DWORD *a1, int a2)
{
  return *a1 - *(_DWORD *)(*(_DWORD *)a2 + 1076);
}

//----- (004B2F30) --------------------------------------------------------
int __thiscall sub_4B2F30(int *this, char a2)
{
  int *v2; // eax
  int result; // eax
  int *v4; // [esp+0h] [ebp-4h]

  v4 = this;
  v2 = (int *)sub_48CDA0(
                (int)&a2,
                (unsigned int)this,
                this[500],
                4,
                (int (__cdecl *)(int, unsigned int))sub_4B2F10,
                &v4);
  if ( v4 )
    result = *v2;
  else
    result = 0;
  return result;
}

//----- (004B2F70) --------------------------------------------------------
void __thiscall sub_4B2F70(int *this, void (__thiscall ***a2)(_DWORD, signed int))
{
  void (__thiscall ***v2)(_DWORD, signed int); // ebx
  int *v3; // esi
  int v4; // eax
  int v5; // eax
  int *v6; // edi

  v2 = a2;
  v3 = this;
  if ( a2 )
  {
    v4 = sub_48CDA0(
           (int)(a2 + 269),
           (unsigned int)this,
           this[500],
           4,
           (int (__cdecl *)(int, unsigned int))sub_4B2F10,
           &a2);
    if ( a2 )
    {
      (**v2)(v2, 1);
    }
    else
    {
      v5 = (v4 - (signed int)v3) >> 2;
      v6 = &v3[v5];
      memcpy_0(v6 + 1, &v3[v5], 4 * (v3[500] - v5));
      *v6 = (int)v2;
      ++v3[500];
    }
  }
}

//----- (004B30B0) --------------------------------------------------------
signed int __thiscall sub_4B30B0(_DWORD *this, unsigned int a2, int a3)
{
  unsigned int v3; // ebx
  _DWORD *v4; // esi
  unsigned int *v5; // edi
  int v6; // ecx
  int v7; // eax
  unsigned int v8; // ST14_4
  unsigned int v9; // ST14_4
  _DWORD *v10; // edi
  signed int v11; // ebp
  signed int v12; // eax
  __int16 v13; // ax
  signed int v14; // eax
  __int16 v15; // ax
  int v16; // ST0C_4
  _DWORD *v17; // eax
  int v18; // ST18_4
  __int16 v19; // ax
  int v20; // ST0C_4
  _DWORD *v21; // eax
  int v22; // ST18_4
  __int16 v23; // ax
  int v24; // ST0C_4
  _DWORD *v25; // eax
  int v26; // ST18_4
  __int16 v27; // ax
  int v28; // ST0C_4
  _DWORD *v29; // eax
  int v30; // ST18_4
  signed int v32; // [esp+10h] [ebp-Ch]
  signed int v33; // [esp+14h] [ebp-8h]
  int v34; // [esp+18h] [ebp-4h]

  v3 = a2;
  v4 = this;
  v32 = 1;
  v5 = this + 297;
  v33 = 8;
  do
  {
    if ( (signed int)*v5 <= 0 )
      goto LABEL_9;
    v6 = *(_DWORD *)(v3 + 2000);
    a2 = *v5;
    v7 = sub_48CDA0((int)&a2, v3, v6, 4, (int (__cdecl *)(int, unsigned int))sub_4B2F10, &v34);
    if ( v34 && *(_DWORD *)v7 )
    {
      if ( (*(int (**)(void))(**(_DWORD **)v7 + 4))() == 3 )
        goto LABEL_9;
      v9 = *v5;
      sub_4C657A((int)"VEH ERROR(%d): Child is not dependent type(%d)\n", v4[269]);
    }
    else
    {
      v8 = *v5;
      sub_4C657A((int)"VEH ERROR(%d): Missing child vehicle(%d)\n", v4[269]);
    }
    v32 = 0;
LABEL_9:
    ++v5;
    --v33;
  }
  while ( v33 );
  v10 = v4 + 291;
  v11 = 6;
  do
  {
    if ( *v10 > 0 )
    {
      v12 = abs(*v10);
      if ( v12 > 5100 || !*(_DWORD *)(a3 + 4 * v12 + 8008) )
      {
        sub_4C657A((int)"VEH ERROR(%d): Vehicle assigned weapon missing(%d)\n", v4[269]);
        v32 = 0;
      }
    }
    ++v10;
    --v11;
  }
  while ( v11 );
  v13 = *((_WORD *)v4 + 525);
  if ( v13 > 0 )
  {
    v14 = abs(v13);
    if ( v14 > 5100 || !*(_DWORD *)(a3 + 4 * v14 + 8008) )
    {
      sub_4C657A((int)"VEH ERROR(%d): Vehicle pickup item missing(%d)\n", v4[269]);
      v32 = 0;
    }
  }
  v15 = *((_WORD *)v4 + 724);
  if ( v15 )
  {
    v16 = *(_DWORD *)(v3 + 2000);
    a3 = v15;
    v17 = (_DWORD *)sub_48CDA0((int)&a3, v3, v16, 4, (int (__cdecl *)(int, unsigned int))sub_4B2F10, &a2);
    if ( !a2 || !*v17 )
    {
      v18 = *((signed __int16 *)v4 + 724);
      sub_4C657A((int)"VEH ERROR(%d): Vehicle soccer carry roll link missing(%d)\n", v4[269]);
      v32 = 0;
    }
  }
  v19 = *((_WORD *)v4 + 725);
  if ( v19 )
  {
    v20 = *(_DWORD *)(v3 + 2000);
    a3 = v19;
    v21 = (_DWORD *)sub_48CDA0((int)&a3, v3, v20, 4, (int (__cdecl *)(int, unsigned int))sub_4B2F10, &a2);
    if ( !a2 || !*v21 )
    {
      v22 = *((signed __int16 *)v4 + 725);
      sub_4C657A((int)"VEH ERROR(%d): Vehicle soccer carry armor link missing(%d)\n", v4[269]);
      v32 = 0;
    }
  }
  v23 = *((_WORD *)v4 + 726);
  if ( v23 )
  {
    v24 = *(_DWORD *)(v3 + 2000);
    a3 = v23;
    v25 = (_DWORD *)sub_48CDA0((int)&a3, v3, v24, 4, (int (__cdecl *)(int, unsigned int))sub_4B2F10, &a2);
    if ( !a2 || !*v25 )
    {
      v26 = *((signed __int16 *)v4 + 726);
      sub_4C657A((int)"VEH ERROR(%d): Vehicle flag carry roll link missing(%d)\n", v4[269]);
      v32 = 0;
    }
  }
  v27 = *((_WORD *)v4 + 727);
  if ( !v27 )
    return v32;
  v28 = *(_DWORD *)(v3 + 2000);
  a3 = v27;
  v29 = (_DWORD *)sub_48CDA0((int)&a3, v3, v28, 4, (int (__cdecl *)(int, unsigned int))sub_4B2F10, &a2);
  if ( a2 )
  {
    if ( *v29 )
      return v32;
  }
  v30 = *((signed __int16 *)v4 + 727);
  sub_4C657A((int)"VEH ERROR(%d): Vehicle flag carry armor link missing(%d)\n", v4[269]);
  return 0;
}

//----- (004B3390) --------------------------------------------------------
FILE *__thiscall sub_4B3390(int *this, char *Filename)
{
  int *v2; // ebp
  FILE *result; // eax
  FILE *v4; // edi
  char *v5; // eax
  void *v6; // esi
  _DWORD *v7; // eax
  int v8; // [esp+8h] [ebp-2004h]

  v2 = this;
  result = fopen(Filename, "rt");
  v4 = result;
  if ( result )
  {
    if ( !feof(result) )
    {
      do
      {
        LOBYTE(v8) = 0;
        v5 = (char *)sub_4C352E((int)&v8, 0x2000, v4);
        v6 = v5;
        if ( v5 && isdigit(*v5) )
        {
          v7 = sub_4B2CC0(v2, v6);
          if ( v7 )
            sub_4B2F70(v2, (void (__thiscall ***)(_DWORD, signed int))v7);
        }
      }
      while ( !feof(v4) );
    }
    result = (FILE *)fclose(v4);
  }
  return result;
}

//----- (004B3450) --------------------------------------------------------
int *__thiscall sub_4B3450(int *this, char *Filename, int a3)
{
  int *v3; // esi

  v3 = this;
  this[501] = a3;
  this[500] = 0;
  if ( Filename )
    sub_4B3390(this, Filename);
  return v3;
}

//----- (004B3480) --------------------------------------------------------
void __thiscall sub_4B3480(int *this)
{
  int *v1; // esi
  int i; // edi

  v1 = this;
  for ( i = 0; i < v1[500]; ++i )
  {
    if ( (*(int (**)(void))(*(_DWORD *)v1[i] + 4))() == 6 )
      sub_4B3390(v1, (char *)(v1[i] + 1480));
  }
}

//----- (004B34C0) --------------------------------------------------------
int __cdecl sub_4B34C0(_DWORD *a1, int *a2, char a3)
{
  int result; // eax
  int v4; // ebx
  _DWORD *v5; // eax
  unsigned int v6; // ecx
  char *v7; // edx
  _DWORD *v8; // esi
  int v9; // edi
  int v10; // ecx
  unsigned __int8 *v11; // edx
  unsigned __int8 *v12; // esi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  unsigned __int8 *v16; // edx
  unsigned __int8 *v17; // esi
  int v18; // edx
  signed int v19; // ecx
  int v20; // esi
  int v21; // eax

  result = 0;
  v4 = 0;
  if ( *a2 > 0 )
  {
    v5 = a1;
    while ( 1 )
    {
      v6 = 4;
      v7 = &a3;
      v8 = v5;
      do
      {
        if ( *v8 != *(_DWORD *)v7 )
          goto LABEL_7;
        v6 -= 4;
        v7 += 4;
        ++v8;
      }
      while ( v6 >= 4 );
      if ( !v6 )
      {
LABEL_16:
        v19 = 0;
        goto LABEL_17;
      }
LABEL_7:
      v9 = *(unsigned __int8 *)v8 - (unsigned __int8)*v7;
      if ( *(unsigned __int8 *)v8 == (unsigned __int8)*v7 )
      {
        v10 = v6 - 1;
        v11 = (unsigned __int8 *)(v7 + 1);
        v12 = (unsigned __int8 *)v8 + 1;
        if ( !v10 )
          goto LABEL_16;
        v9 = *v12 - *v11;
        if ( *v12 == *v11 )
        {
          v13 = v10 - 1;
          v14 = v11 + 1;
          v15 = v12 + 1;
          if ( !v13 )
            goto LABEL_16;
          v9 = *v15 - *v14;
          if ( *v15 == *v14 )
          {
            v16 = v14 + 1;
            v17 = v15 + 1;
            if ( v13 == 1 )
              goto LABEL_16;
            v18 = *v16;
            v9 = *v17 - v18;
            if ( *v17 == v18 )
              goto LABEL_16;
          }
        }
      }
      v19 = 1;
      if ( v9 <= 0 )
        v19 = -1;
LABEL_17:
      if ( !v19 )
        break;
      ++v4;
      ++v5;
      if ( v4 >= *a2 )
        return 0;
    }
    v20 = a1[v4];
    v21 = *a2 - 1;
    *a2 = v21;
    memcpy_0(&a1[v4], &a1[v4 + 1], 4 * (v21 - v4));
    result = v20;
  }
  return result;
}

//----- (004B35C0) --------------------------------------------------------
void *__thiscall sub_4B35C0(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B35F0) --------------------------------------------------------
void *__thiscall sub_4B35F0(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B3620) --------------------------------------------------------
void *__thiscall sub_4B3620(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B3650) --------------------------------------------------------
void *__thiscall sub_4B3650(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B3680) --------------------------------------------------------
void *__thiscall sub_4B3680(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B36B0) --------------------------------------------------------
void *__thiscall sub_4B36B0(void *Memory, char a2)
{
  void *v2; // esi
  void *v3; // ST00_4

  v2 = Memory;
  v3 = (void *)*((_DWORD *)Memory + 1);
  *(_DWORD *)Memory = &VItem::`vftable';
  free(v3);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (004B36E0) --------------------------------------------------------
_DWORD *__thiscall sub_4B36E0(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  result = this;
  *this = 0;
  this[18946] = a2;
  this[18945] = 0;
  return result;
}

//----- (004B3700) --------------------------------------------------------
int __thiscall sub_4B3700(_DWORD *this, char *Str1, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  int v6; // edi
  const char *v7; // ebp
  int v8; // eax
  char *v9; // ecx
  _BYTE *v10; // edx
  char v11; // al
  char *v12; // eax
  char *v13; // eax
  int v14; // edi
  const char *v15; // ebp
  void *v16; // eax
  _DWORD *v17; // eax
  char *v19; // ecx
  _BYTE *v20; // edx
  char v21; // al
  int v22; // [esp+14h] [ebp-11Ch]
  char Dest; // [esp+20h] [ebp-110h]
  int v24; // [esp+12Ch] [ebp-4h]

  v5 = this;
  if ( !*Str1 || *Str1 == 48 && !Str1[1] || !_stricmp(Str1, "NOSOUND") || !_stricmp(Str1, "NONE") )
    return 0;
  v6 = 0;
  if ( v5[18945] > 0 )
  {
    v7 = (const char *)(v5 + 16897);
    while ( _stricmp(Str1, v7) )
    {
      ++v6;
      v7 += 28;
      if ( v6 >= v5[18945] )
        goto LABEL_12;
    }
    v22 = v6;
  }
LABEL_12:
  v8 = v5[18945];
  if ( v6 == v8 )
  {
    v22 = v6;
    v9 = Str1;
    v10 = &v5[7 * v8 + 16897];
    do
    {
      v11 = *v9;
      *v10++ = *v9++;
    }
    while ( v11 );
    v12 = (char *)operator new(0x214u);
    v24 = 0;
    if ( v12 )
      v13 = sub_4B8820(v12, (int)Str1, 1);
    else
      v13 = 0;
    v5[v5[18945]++ + 18689] = v13;
    v24 = -1;
  }
  v14 = 0;
  if ( *v5 <= 0 )
  {
LABEL_24:
    sprintf(&Dest, "%s.wav", a3);
    if ( sub_4B8510((_DWORD *)v5[v22 + 18689], &Dest) )
    {
      v16 = operator new(0xF0u);
      v24 = 1;
      if ( v16 )
        v17 = sub_4A6D20(v16, v5[18946], v5[v22 + 18689], (int)&Dest, a4, a5);
      else
        v17 = 0;
      v5[*v5 + 1] = v17;
      *((_BYTE *)v5 + 29 * *v5 + 8196) = v22;
      v19 = (char *)a3;
      v20 = (char *)v5 + 29 * *v5 + 8197;
      do
      {
        v21 = *v19;
        *v20++ = *v19++;
      }
      while ( v21 );
      return v5[++*v5];
    }
    return 0;
  }
  v15 = (char *)v5 + 8197;
  while ( *((unsigned __int8 *)v15 - 1) != v22 || _stricmp(v15, (const char *)a3) )
  {
    ++v14;
    v15 += 29;
    if ( v14 >= *v5 )
      goto LABEL_24;
  }
  return v5[v14 + 1];
}

//----- (004B3970) --------------------------------------------------------
void __thiscall sub_4B3970(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ebp
  _DWORD **v3; // edi
  _DWORD *v4; // ebx
  int v5; // edi
  void ***v6; // ebx
  void **v7; // ebp

  v1 = this;
  v2 = 0;
  if ( *this > 0 )
  {
    v3 = (_DWORD **)(this + 1);
    do
    {
      v4 = *v3;
      if ( *v3 )
      {
        sub_4A5F60(*v3);
        j__free(v4);
        *v3 = 0;
      }
      ++v2;
      ++v3;
    }
    while ( v2 < *v1 );
  }
  v5 = 0;
  if ( v1[18945] > 0 )
  {
    v6 = (void ***)(v1 + 18689);
    do
    {
      v7 = *v6;
      if ( *v6 )
      {
        sub_4B8440(*v6);
        j__free(v7);
      }
      ++v5;
      ++v6;
    }
    while ( v5 < v1[18945] );
  }
}

//----- (004B39E0) --------------------------------------------------------
int __thiscall sub_4B39E0(_DWORD *this, const char *a2, int a3, int a4)
{
  _DWORD *v4; // esi
  char Dst; // [esp+4h] [ebp-304h]
  int v7; // [esp+104h] [ebp-204h]
  char Str1[4]; // [esp+204h] [ebp-104h]

  v4 = this;
  strcpy(&Dst, a2);
  sub_48CA10((int)Str1, &Dst);
  sub_48CA10((int)&v7, &Dst);
  return sub_4B3700(v4, Str1, (int)&v7, a3, a4);
}

//----- (004B3A80) --------------------------------------------------------
_DWORD *__thiscall sub_4B3A80(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = 0;
  this[18945] = 0;
  return result;
}

//----- (004B3AA0) --------------------------------------------------------
int __thiscall sub_4B3AA0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  _DWORD *v4; // esi
  int v5; // edi
  bool v6; // zf
  bool v7; // sf
  _DWORD **v8; // ebx

  result = a2;
  v4 = this;
  v5 = 0;
  v6 = *this == 0;
  v7 = *this < 0;
  this[18946] = a2;
  this[18947] = a3;
  if ( !v7 && !v6 )
  {
    v8 = (_DWORD **)(this + 1);
    do
    {
      result = sub_4A41E0(*v8, v4[18946], v4[18947]);
      ++v5;
      ++v8;
    }
    while ( v5 < *v4 );
  }
  return result;
}

//----- (004B3AF0) --------------------------------------------------------
int __thiscall sub_4B3AF0(_DWORD *this, char *Str1, int a3)
{
  _DWORD *v3; // esi
  int v4; // edi
  const char *v5; // ebp
  int v6; // eax
  char *v7; // ecx
  _BYTE *v8; // edx
  char v9; // al
  char *v10; // eax
  char *v11; // eax
  int v12; // edi
  const char *v13; // ebp
  FILE *v14; // edi
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v18; // ecx
  int v19; // ST08_4
  int v20; // ST04_4
  char *v21; // ecx
  _BYTE *v22; // edx
  char v23; // al
  int v24; // [esp+14h] [ebp-120h]
  int v25; // [esp+20h] [ebp-114h]
  char Dest; // [esp+24h] [ebp-110h]
  int v27; // [esp+130h] [ebp-4h]

  v3 = this;
  if ( *Str1 == 48 && !Str1[1] || !*Str1 || !_stricmp(Str1, "NONE") )
    return 0;
  v4 = 0;
  if ( v3[18945] > 0 )
  {
    v5 = (const char *)(v3 + 16897);
    while ( _stricmp(Str1, v5) )
    {
      ++v4;
      v5 += 28;
      if ( v4 >= v3[18945] )
        goto LABEL_11;
    }
    v24 = v4;
  }
LABEL_11:
  v6 = v3[18945];
  if ( v4 == v6 )
  {
    v24 = v4;
    v7 = Str1;
    v8 = &v3[7 * v6 + 16897];
    do
    {
      v9 = *v7;
      *v8++ = *v7++;
    }
    while ( v9 );
    v10 = (char *)operator new(0x214u);
    v27 = 0;
    if ( v10 )
      v11 = sub_4B8820(v10, (int)Str1, 1);
    else
      v11 = 0;
    v3[v3[18945]++ + 18689] = v11;
    v27 = -1;
  }
  v12 = 0;
  if ( *v3 <= 0 )
  {
LABEL_23:
    sprintf(&Dest, "%s.cfs", a3);
    v14 = (FILE *)sub_4B85C0((_DWORD *)v3[v24 + 18689], &Dest, (int)&v25);
    if ( v14 )
    {
      v15 = operator new(0x1E6u);
      v27 = 1;
      if ( v15 )
        v16 = sub_4A5790(v15, v14, -1, 0);
      else
        v16 = 0;
      v3[*v3 + 1] = v16;
      v18 = (_DWORD *)v3[*v3 + 1];
      v19 = v3[18947];
      v20 = v3[18946];
      v27 = -1;
      sub_4A41E0(v18, v20, v19);
      *((_BYTE *)v3 + 29 * *v3 + 8196) = v24;
      v21 = (char *)a3;
      v22 = (char *)v3 + 29 * *v3 + 8197;
      do
      {
        v23 = *v21;
        *v22++ = *v21++;
      }
      while ( v23 );
      return v3[++*v3];
    }
    return 0;
  }
  v13 = (char *)v3 + 8197;
  while ( *((unsigned __int8 *)v13 - 1) != v24 || _stricmp(v13, (const char *)a3) )
  {
    ++v12;
    v13 += 29;
    if ( v12 >= *v3 )
      goto LABEL_23;
  }
  return v3[v12 + 1];
}

//----- (004B3D60) --------------------------------------------------------
void __thiscall sub_4B3D60(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // ebx
  void (__stdcall ****v3)(signed int); // esi
  int v4; // esi
  void ***v5; // ebx
  void **v6; // ebp

  v1 = this;
  v2 = 0;
  if ( *this > 0 )
  {
    v3 = (void (__stdcall ****)(signed int))(this + 1);
    do
    {
      if ( *v3 )
      {
        (***v3)(1);
        *v3 = 0;
      }
      ++v2;
      ++v3;
    }
    while ( v2 < *v1 );
  }
  v4 = 0;
  if ( v1[18945] > 0 )
  {
    v5 = (void ***)(v1 + 18689);
    do
    {
      v6 = *v5;
      if ( *v5 )
      {
        sub_4B8440(*v5);
        j__free(v6);
      }
      ++v4;
      ++v5;
    }
    while ( v4 < v1[18945] );
  }
}

//----- (004B3DD0) --------------------------------------------------------
int __cdecl sub_4B3DD0(int a1, void *Dst, size_t Size)
{
  _DWORD *v3; // esi
  int v4; // ecx
  int v5; // edi

  v3 = *(_DWORD **)(a1 + 52);
  v4 = v3[2];
  v5 = Size;
  if ( (signed int)Size >= v3[1] - v4 )
    v5 = v3[1] - v4;
  memcpy(Dst, (const void *)(v4 + *v3), v5);
  v3[2] += v5;
  return v5;
}

//----- (004B3E10) --------------------------------------------------------
_DWORD *__thiscall sub_4B3E10(_DWORD *this, int a2, int a3, _DWORD *a4, int a5)
{
  _DWORD *v5; // ebp
  int *v6; // eax
  int *v7; // ebx
  int v8; // eax
  int v9; // edi
  int v10; // esi
  _DWORD *v11; // eax
  int v12; // edx
  _DWORD *v13; // eax
  bool v14; // zf
  bool v15; // sf
  _DWORD *v16; // edi
  int v17; // eax
  int v18; // ecx
  int v19; // esi
  char v20; // dl
  unsigned __int8 *v21; // eax
  signed int v22; // eax
  int v23; // ecx
  int v24; // eax
  int v25; // ebx
  int v26; // ecx
  _WORD *v27; // ebp
  unsigned __int8 *v28; // esi
  int v29; // eax
  int v30; // edx
  int v31; // eax
  signed int v32; // ecx
  int v33; // eax
  int v34; // eax
  int v35; // eax
  unsigned __int8 v36; // of
  _DWORD *v38; // [esp+24h] [ebp-44h]
  int v39; // [esp+28h] [ebp-40h]
  int v40; // [esp+2Ch] [ebp-3Ch]
  int v41; // [esp+30h] [ebp-38h]
  int v42; // [esp+34h] [ebp-34h]
  int v43; // [esp+38h] [ebp-30h]
  int v44; // [esp+3Ch] [ebp-2Ch]
  int v45; // [esp+40h] [ebp-28h]
  int v46; // [esp+44h] [ebp-24h]
  int v47; // [esp+48h] [ebp-20h]
  int *v48; // [esp+4Ch] [ebp-1Ch]
  int v49; // [esp+50h] [ebp-18h]
  int v50; // [esp+54h] [ebp-14h]
  int v51; // [esp+58h] [ebp-10h]
  int v52; // [esp+64h] [ebp-4h]
  int v53; // [esp+6Ch] [ebp+4h]
  signed int v54; // [esp+70h] [ebp+8h]
  int v55; // [esp+78h] [ebp+10h]

  v5 = this;
  v38 = this;
  *this = 0;
  this[3] = 0;
  v49 = a2;
  v50 = a3;
  v51 = 0;
  v6 = sub_4B9420((int)&v49, (int)sub_4B3DD0);
  v7 = v6;
  v48 = v6;
  if ( v6 )
  {
    sub_4B99F0((int)v6);
    v8 = v7[5];
    v5[2] = v8;
    v5[3] = malloc(4 * v8);
    v5[1] = 0;
    v9 = v7[1];
    v10 = *v7;
    v45 = v7[1];
    v11 = operator new(0xDCu);
    v12 = 0;
    v52 = 0;
    if ( v11 )
    {
      v13 = sub_49FE20(v11, v10, v9, (int)a4, v10, v9 * v5[2], a5);
      v12 = 0;
    }
    else
    {
      v13 = 0;
    }
    *v5 = v13;
    v14 = v7[5] == 0;
    v15 = v7[5] < 0;
    v52 = -1;
    v53 = 0;
    if ( !v15 && !v14 )
    {
      v40 = 0;
      v39 = 0;
      do
      {
        v16 = (_DWORD *)(v39 + v7[12]);
        v55 = v7[4];
        v17 = v16[5];
        v44 = 10;
        if ( v17 )
          v55 = v17;
        if ( v55 )
        {
          v54 = -1;
          if ( v16[8] > 0 )
          {
            v18 = v16[9] + 4;
            v19 = v16[8];
            do
            {
              if ( *(_DWORD *)(v18 + 4) == 249 )
              {
                v20 = **(_BYTE **)v18;
                v21 = (unsigned __int8 *)(*(_DWORD *)v18 + 2);
                v5 = v38;
                v44 = (*v21 << 8) + *(unsigned __int8 *)(*(_DWORD *)v18 + 1);
                if ( v20 & 1 )
                  v54 = v21[1];
                else
                  v54 = -1;
              }
              v18 += 12;
              --v19;
            }
            while ( v19 );
            v12 = v53;
          }
          if ( v12 )
            (*(void (__stdcall **)(int, _DWORD, _DWORD, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*v5 + 112))(
              v12 - 1,
              *v5,
              0,
              v40,
              0,
              0,
              0);
          v22 = sub_49CA30(a4);
          v23 = *v5;
          v47 = v22;
          v24 = (*(int (__stdcall **)(int *, int *))(*(_DWORD *)v23 + 92))(&v41, &v46);
          v25 = v24 + v45 * v53 * v41;
          if ( v46 == 2 )
          {
            v26 = 0;
            v14 = v16[3] == 0;
            v15 = v16[3] < 0;
            v43 = 0;
            if ( !v15 && !v14 )
            {
              do
              {
                v27 = (_WORD *)(v25 + v41 * (v26 + v16[1]) + 2 * *v16);
                v28 = (unsigned __int8 *)(v16[6] + v26 * v16[2]);
                if ( v16[2] > 0 )
                {
                  v42 = v16[2];
                  do
                  {
                    v29 = *v28;
                    if ( v29 != v54 )
                    {
                      v30 = *(_DWORD *)(v55 + 8);
                      v31 = 3 * v29;
                      v32 = (signed int)*(unsigned __int8 *)(v31 + v30 + 2) >> 3;
                      v33 = *(unsigned __int8 *)(v30 + v31 + 1) | 32 * (*(_BYTE *)(v30 + v31) & 0xF8);
                      if ( v47 == 2 )
                        v34 = v33 & 0xFFF8;
                      else
                        v34 = 2 * (unsigned __int16)(v33 & 0xFFFC);
                      v35 = v32 | 4 * v34;
                      v26 = v43;
                      *v27 = v35;
                    }
                    ++v27;
                    ++v28;
                    --v42;
                  }
                  while ( v42 );
                }
                v36 = __OFSUB__(++v26, v16[3]);
                v15 = v26 - v16[3] < 0;
                v43 = v26;
              }
              while ( v15 ^ v36 );
              v5 = v38;
            }
          }
          (*(void (**)(void))(*(_DWORD *)*v5 + 96))();
          v7 = v48;
          *(_DWORD *)(v5[3] + 4 * v53) = v5[1];
          v5[1] += v44;
        }
        v39 += 40;
        v40 += v45;
        v12 = v53++ + 1;
      }
      while ( v53 < v7[5] );
    }
    sub_4B8A60(v7);
  }
  return v5;
}

//----- (004B4100) --------------------------------------------------------
void __thiscall sub_4B4100(void (__stdcall ****this)(signed int))
{
  void (__stdcall ****v1)(signed int); // esi
  void (__stdcall ***v2)(signed int); // ecx

  v1 = this;
  v2 = *this;
  if ( v2 )
  {
    (**v2)(1);
    *v1 = 0;
  }
  if ( v1[3] )
  {
    free(v1[3]);
    v1[3] = 0;
  }
}

//----- (004B4130) --------------------------------------------------------
int __thiscall sub_4B4130(_DWORD *this, int a2)
{
  int v2; // edi
  int v3; // esi
  int result; // eax
  int *v5; // ecx

  v2 = this[3];
  if ( !v2 )
    return 0;
  v3 = this[1];
  if ( !v3 )
    return 0;
  result = this[2] - 1;
  if ( result < 0 )
    return 0;
  v5 = (int *)(v2 + 4 * result);
  while ( a2 % v3 < *v5 )
  {
    --result;
    --v5;
    if ( result < 0 )
      return 0;
  }
  return result;
}

//----- (004B4170) --------------------------------------------------------
void __thiscall sub_4B4170(_DWORD *this)
{
  _DWORD *v1; // ebx
  int v2; // edi
  _DWORD *v3; // esi

  v1 = this;
  if ( *this )
  {
    v2 = 0;
    if ( this[16801] > 0 )
    {
      v3 = this + 146;
      do
      {
        if ( *v3 )
        {
          (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v3 + 32))(*v3);
          (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v3 + 8))(*v3);
        }
        ++v2;
        v3 += 168;
      }
      while ( v2 < v1[16801] );
    }
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v1 + 8))(*v1);
  }
  CoUninitialize();
}

//----- (004B41D0) --------------------------------------------------------
int __thiscall sub_4B41D0(_DWORD *this)
{
  _DWORD *v1; // ebp
  int v2; // ebx
  _DWORD *v3; // esi
  int result; // eax

  v1 = this;
  v2 = 0;
  if ( this[16801] > 0 )
  {
    v3 = this + 146;
    do
    {
      if ( *v3 )
      {
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v3 + 28))(*v3);
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)*v3 + 100))(*v3);
        memset(v3 + 1, 0, 0x50u);
        result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD *))(*(_DWORD *)*v3 + 36))(*v3, 80, v3 + 1);
      }
      ++v2;
      v3 += 168;
    }
    while ( v2 < v1[16801] );
  }
  return result;
}

//----- (004B4240) --------------------------------------------------------
int __thiscall sub_4B4240(_DWORD *this)
{
  return this[16802];
}

//----- (004B4260) --------------------------------------------------------
int __thiscall sub_4B4260(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // ebx
  int v4; // esi
  _DWORD *v5; // edi
  int v6; // edx
  int v7; // eax

  result = 0;
  if ( a2 < this[16802] )
  {
    v3 = this[16801];
    v4 = 0;
    if ( v3 <= 0 )
      goto LABEL_6;
    v5 = this + 167;
    while ( 1 )
    {
      v6 = v4 + *v5;
      if ( a2 < v6 )
        break;
      ++result;
      v5 += 168;
      v4 = v6;
      if ( result >= v3 )
        goto LABEL_6;
    }
    v7 = 168 * result;
    if ( this[v7 + 146] )
      result = *((_BYTE *)this + a2 + v7 * 4 - v4 + 636) & 0x80;
    else
LABEL_6:
      result = 0;
  }
  return result;
}

//----- (004B42D0) --------------------------------------------------------
signed int __thiscall sub_4B42D0(_DWORD *this, int a2)
{
  signed int result; // eax
  int v3; // ebx
  int v4; // esi
  int v5; // eax
  _DWORD *v6; // edi
  int v7; // edx
  _DWORD *v8; // eax

  if ( a2 >= this[16803] )
    return -1;
  v3 = this[16801];
  v4 = 0;
  v5 = 0;
  if ( v3 <= 0 )
    return -1;
  v6 = this + 168;
  while ( 1 )
  {
    v7 = v4 + *v6;
    if ( a2 < v7 )
      break;
    ++v5;
    v6 += 168;
    v4 = v7;
    if ( v5 >= v3 )
      return -1;
  }
  v8 = &this[168 * v5];
  if ( !v8[146] )
    return -1;
  switch ( a2 - v4 )
  {
    case 0:
      result = v8[147];
      break;
    case 1:
      result = v8[148];
      break;
    case 2:
      result = v8[149];
      break;
    case 3:
      result = v8[153];
      break;
    case 4:
      result = v8[154];
      break;
    case 5:
      result = v8[150];
      break;
    case 6:
      result = v8[151];
      break;
    case 7:
      result = v8[152];
      break;
    default:
      return -1;
  }
  return result;
}

//----- (004B4410) --------------------------------------------------------
LPVOID *__thiscall sub_4B4410(LPVOID *ppv, int a2, int a3)
{
  LPVOID *v3; // edi
  signed int v4; // ebp
  _DWORD *v5; // esi
  int v6; // eax
  int v7; // eax
  int v9; // [esp+44h] [ebp-2Ch]
  int v10; // [esp+54h] [ebp-1Ch]

  v3 = ppv;
  v4 = 0;
  ppv[16802] = 0;
  ppv[16803] = 0;
  *ppv = 0;
  memset(ppv + 1, 0, 0x10680u);
  v3[16801] = 0;
  CoInitialize(0);
  CoCreateInstance(&rclsid, 0, 1u, &riid, v3);
  if ( *v3 )
  {
    (*(void (__stdcall **)(LPVOID, int, signed int))(*(_DWORD *)*v3 + 28))(*v3, a2, 2048);
    (*(void (__stdcall **)(LPVOID, signed int, int (__stdcall *)(int, int), LPVOID *, signed int))(*(_DWORD *)*v3 + 16))(
      *v3,
      4,
      sub_4B43D0,
      v3,
      1);
    if ( (signed int)v3[16801] > 0 )
    {
      v5 = v3 + 146;
      do
      {
        if ( (*(int (__stdcall **)(LPVOID, _DWORD *, _DWORD *, _DWORD))(*(_DWORD *)*v3 + 12))(*v3, v5 - 144, v5, 0) )
        {
          *v5 = 0;
        }
        else
        {
          (*(void (__stdcall **)(_DWORD, int, signed int))(*(_DWORD *)*v5 + 52))(*v5, a3, 1);
          (*(void (__stdcall **)(_DWORD, void *))(*(_DWORD *)*v5 + 44))(*v5, &unk_52A51C);
          v6 = *v5;
          v9 = 44;
          (*(void (__stdcall **)(int, int *))(*(_DWORD *)v6 + 12))(v6, &v9);
          v7 = v10;
          v5[22] = 8;
          v5[21] = v7;
          v3[16802] = (char *)v3[16802] + v7;
          v3[16803] = (char *)v3[16803] + v5[22];
        }
        ++v4;
        v5 += 168;
      }
      while ( v4 < (signed int)v3[16801] );
    }
  }
  return v3;
}
// 4B43D0: using guessed type int __stdcall sub_4B43D0(int, int);

//----- (004B4550) --------------------------------------------------------
FILE *__thiscall sub_4B4550(const CHAR *this, int a2)
{
  const char *v2; // esi
  FILE *result; // eax
  FILE *v4; // edi
  int *i; // eax
  int v6; // [esp+8h] [ebp-204h]

  v2 = this;
  if ( a2 || !this[4] || (result = (FILE *)sub_48CD30(this + 4, (int)(this + 268))) != 0 )
  {
    (*(void (__thiscall **)(const char *))(*(_DWORD *)v2 + 4))(v2);
    result = (FILE *)(v2 + 4);
    if ( v2[4] )
    {
      result = fopen(v2 + 4, "rt");
      v4 = result;
      if ( result )
      {
        if ( !feof(result) )
        {
          do
          {
            if ( sub_4C352E((int)&v6, 512, v4) )
            {
              for ( i = (int *)((char *)&v6 + strlen((const char *)&v6)); i != &v6; i = (int *)((char *)i - 1) )
              {
                if ( *((_BYTE *)i - 1) >= 32 )
                  break;
              }
              *(_BYTE *)i = 0;
              if ( (char *)&v6 + strlen((const char *)&v6) + 1 != (char *)&v6 + 1 )
                (*(void (__thiscall **)(const char *, int *))(*(_DWORD *)v2 + 8))(v2, &v6);
            }
          }
          while ( !feof(v4) );
        }
        result = (FILE *)fclose(v4);
      }
    }
  }
  return result;
}

//----- (004B4680) --------------------------------------------------------
int __thiscall sub_4B4680(_DWORD *this)
{
  return this[68];
}

//----- (004B4690) --------------------------------------------------------
int __thiscall sub_4B4690(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  int result; // eax

  v1 = this;
  if ( this[65] )
  {
    v2 = 0;
    if ( this[68] > 0 )
    {
      do
        free(*(void **)(v1[65] + 4 * v2++));
      while ( v2 < v1[68] );
    }
    result = sub_48C990(v1[65], 0, 1);
    v1[65] = 0;
    v1[68] = 0;
  }
  return result;
}

//----- (004B4700) --------------------------------------------------------
int __thiscall sub_4B4700(_DWORD *this, int a2)
{
  return *(_DWORD *)(this[65] + 4 * a2);
}

//----- (004B4710) --------------------------------------------------------
int __thiscall sub_4B4710(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = this;
  free(*(void **)(this[65] + 4 * a2));
  memcpy_0((void *)(v2[65] + 4 * a2), (const void *)(v2[65] + 4 * a2 + 4), 4 * (--v2[68] - a2));
  result = sub_48C990(v2[65], 4 * v2[68], 2048);
  v2[65] = result;
  return result;
}

//----- (004B4780) --------------------------------------------------------
int __cdecl sub_4B4780(int a1, char *Str2)
{
  return _stricmp((const char *)a1, *(const char **)Str2);
}

//----- (004B4790) --------------------------------------------------------
FILE *__thiscall sub_4B4790(const char *this)
{
  const char *v1; // edi
  FILE *result; // eax
  FILE *v3; // ebx
  int i; // esi

  v1 = this;
  result = (FILE *)(this + 4);
  if ( this[4] )
  {
    result = fopen(this + 4, "wt");
    v3 = result;
    if ( result )
    {
      for ( i = 0; i < *((_DWORD *)v1 + 68); ++i )
        sub_4C3361(v3, (int)"%s\n", *(_DWORD *)(*((_DWORD *)v1 + 65) + 4 * i));
      result = (FILE *)fclose(v3);
    }
  }
  return result;
}

//----- (004B47F0) --------------------------------------------------------
void __thiscall sub_4B47F0(int *this)
{
  int *v1; // esi
  int v2; // edi
  int i; // edi
  int v4; // eax
  bool v5; // zf
  void **v6; // eax

  v1 = this;
  if ( this[65] )
  {
    v2 = 0;
    if ( this[68] > 0 )
    {
      do
        free(*(void **)(v1[65] + 4 * v2++));
      while ( v2 < v1[68] );
    }
    sub_48C990(v1[65], 0, 1);
  }
  if ( v1[69] )
  {
    for ( i = 0; i < v1[68]; ++i )
    {
      v4 = v1[69];
      v5 = *(_DWORD *)(v4 + 4 * i) == 0;
      v6 = (void **)(v4 + 4 * i);
      if ( !v5 )
        free(*v6);
    }
    sub_48C990(v1[69], 0, 1);
  }
  v1[65] = 0;
  v1[69] = 0;
  v1[68] = 0;
}

//----- (004B48B0) --------------------------------------------------------
int __thiscall sub_4B48B0(int *this, int a2)
{
  int *v2; // esi
  void **v3; // eax
  int v4; // eax
  int v5; // edx
  int result; // eax

  v2 = this;
  free(*(void **)(this[65] + 4 * a2));
  v3 = (void **)(v2[69] + 4 * a2);
  if ( *v3 )
    free(*v3);
  memcpy_0((void *)(v2[65] + 4 * a2), (const void *)(v2[65] + 4 * a2 + 4), 4 * (--v2[68] - a2));
  memcpy_0((void *)(v2[69] + 4 * a2), (const void *)(v2[69] + 4 * a2 + 4), 4 * (v2[68] - a2));
  v4 = sub_48C990(v2[65], 4 * v2[68], 2048);
  v5 = 4 * v2[68];
  v2[65] = v4;
  result = sub_48C990(v2[69], v5, 2048);
  v2[69] = result;
  return result;
}

//----- (004B4980) --------------------------------------------------------
int __thiscall sub_4B4980(_DWORD *this, int a2)
{
  return *(_DWORD *)(this[69] + 4 * a2);
}

//----- (004B4990) --------------------------------------------------------
int __thiscall sub_4B4990(int this, int a2, int a3)
{
  int v3; // ebx
  int *v4; // esi
  int v5; // edi
  int result; // eax
  int v7; // eax
  int v8; // edx
  int v9; // eax
  int v10; // ecx

  v3 = a2;
  v4 = (int *)this;
  v5 = 0;
  result = sub_48CDA0(
             a2,
             *(_DWORD *)(this + 260),
             *(_DWORD *)(this + 272),
             4,
             (int (__cdecl *)(int, unsigned int))sub_4B4780,
             &a2);
  if ( !a2 || !v4[66] )
  {
    if ( result )
      v5 = (result - v4[65]) >> 2;
    v7 = sub_48C990(v4[65], 4 * v4[68] + 4, 2048);
    v8 = v4[69];
    v4[65] = v7;
    v9 = sub_48C990(v8, 4 * v4[68] + 4, 2048);
    v10 = v4[68] - v5;
    v4[69] = v9;
    memcpy_0((void *)(v4[65] + 4 * v5 + 4), (const void *)(v4[65] + 4 * v5), 4 * v10);
    memcpy_0((void *)(v4[69] + 4 * v5 + 4), (const void *)(v4[69] + 4 * v5), 4 * (v4[68] - v5));
    *(_DWORD *)(v4[65] + 4 * v5) = sub_40284C(v3);
    if ( a3 )
      result = sub_40284C(a3);
    else
      result = 0;
    *(_DWORD *)(v4[69] + 4 * v5) = result;
    ++v4[68];
  }
  return result;
}
// 40284C: using guessed type _DWORD __cdecl sub_40284C(_DWORD);

//----- (004B4AB0) --------------------------------------------------------
FILE *__thiscall sub_4B4AB0(const CHAR *this, int a2)
{
  const char *v2; // edi
  FILE *result; // eax
  FILE *v4; // ebp
  int *i; // eax
  int *v6; // eax
  const char *v7; // eax
  int v8; // [esp+8h] [ebp-204h]

  v2 = this;
  if ( a2 || !this[4] || (result = (FILE *)sub_48CD30(this + 4, (int)(this + 268))) != 0 )
  {
    (*(void (__thiscall **)(const char *))(*(_DWORD *)v2 + 4))(v2);
    result = (FILE *)(v2 + 4);
    if ( v2[4] )
    {
      result = fopen(v2 + 4, "rt");
      v4 = result;
      if ( result )
      {
        if ( !feof(result) )
        {
          while ( !sub_4C352E((int)&v8, 512, v4) )
          {
LABEL_19:
            if ( feof(v4) )
              goto LABEL_20;
          }
          for ( i = (int *)((char *)&v8 + strlen((const char *)&v8)); i != &v8; i = (int *)((char *)i - 1) )
          {
            if ( *((_BYTE *)i - 1) >= 32 )
              break;
          }
          *(_BYTE *)i = 0;
          v6 = &v8;
          if ( (_BYTE)v8 == 58 )
          {
LABEL_14:
            if ( *(_BYTE *)v6 )
            {
              *(_BYTE *)v6 = 0;
              v7 = (char *)v6 + 1;
              if ( strlen(v7) )
                goto LABEL_17;
            }
          }
          else
          {
            while ( *(_BYTE *)v6 )
            {
              v6 = (int *)((char *)v6 + 1);
              if ( *(_BYTE *)v6 == 58 )
                goto LABEL_14;
            }
          }
          v7 = 0;
LABEL_17:
          if ( (char *)&v8 + strlen((const char *)&v8) + 1 != (char *)&v8 + 1 )
            sub_4B4990((int)v2, (int)&v8, (int)v7);
          goto LABEL_19;
        }
LABEL_20:
        result = (FILE *)fclose(v4);
      }
    }
  }
  return result;
}

//----- (004B4C20) --------------------------------------------------------
FILE *__thiscall sub_4B4C20(const char *this)
{
  const char *v1; // edi
  FILE *result; // eax
  FILE *v3; // ebx
  int i; // esi
  int v5; // eax
  bool v6; // zf
  int v7; // edx
  _DWORD *v8; // eax
  char Dest; // [esp+4h] [ebp-204h]

  v1 = this;
  result = (FILE *)(this + 4);
  if ( this[4] )
  {
    result = fopen(this + 4, "wt");
    v3 = result;
    if ( result )
    {
      for ( i = 0; i < *((_DWORD *)v1 + 68); ++i )
      {
        v5 = *((_DWORD *)v1 + 69);
        v6 = *(_DWORD *)(v5 + 4 * i) == 0;
        v7 = *((_DWORD *)v1 + 65);
        v8 = (_DWORD *)(v5 + 4 * i);
        if ( v6 )
          sprintf(&Dest, "%s:", *(_DWORD *)(v7 + 4 * i));
        else
          sprintf(&Dest, "%s:%s", *(_DWORD *)(v7 + 4 * i), *v8);
        sub_4C3361(v3, (int)"%s\n", &Dest);
      }
      result = (FILE *)fclose(v3);
    }
  }
  return result;
}

//----- (004B4D00) --------------------------------------------------------
char *__thiscall sub_4B4D00(char *this, char *Source, int a3)
{
  char *v3; // esi

  v3 = this;
  *((_DWORD *)this + 66) = a3;
  *(_DWORD *)this = &SortedStringList::`vftable';
  if ( Source )
  {
    strncpy(this + 4, Source, 0x100u);
    v3[259] = 0;
  }
  else
  {
    this[4] = 0;
  }
  *((_DWORD *)v3 + 68) = 0;
  *((_DWORD *)v3 + 65) = 0;
  sub_4B4550(v3, 1);
  return v3;
}
// 51F0D4: using guessed type void *SortedStringList::`vftable';

//----- (004B4D60) --------------------------------------------------------
int __thiscall sub_4B4D60(_DWORD *this)
{
  *this = &SortedStringList::`vftable';
  return sub_4B4690(this);
}
// 51F0D4: using guessed type void *SortedStringList::`vftable';

//----- (004B4D70) --------------------------------------------------------
int __thiscall sub_4B4D70(int this, int a2)
{
  int v2; // ebx
  int *v3; // esi
  int v4; // edi
  int result; // eax
  int v6; // eax
  int v7; // ecx

  v2 = a2;
  v3 = (int *)this;
  v4 = 0;
  result = sub_48CDA0(
             a2,
             *(_DWORD *)(this + 260),
             *(_DWORD *)(this + 272),
             4,
             (int (__cdecl *)(int, unsigned int))sub_4B4780,
             &a2);
  if ( !a2 || !v3[66] )
  {
    if ( result )
      v4 = (result - v3[65]) >> 2;
    v6 = sub_48C990(v3[65], 4 * v3[68] + 4, 2048);
    v7 = 2 * (v3[68] - v4);
    v3[65] = v6;
    memcpy_0((void *)(v6 + 4 * v4 + 4), (const void *)(v6 + 4 * v4), 2 * v7);
    result = sub_40284C(v2);
    *(_DWORD *)(v3[65] + 4 * v4) = result;
    ++v3[68];
  }
  return result;
}
// 40284C: using guessed type _DWORD __cdecl sub_40284C(_DWORD);

//----- (004B4E20) --------------------------------------------------------
int __thiscall sub_4B4E20(int this, int a2)
{
  int v2; // esi
  int v3; // eax
  int result; // eax

  v2 = this;
  v3 = sub_48CDA0(
         a2,
         *(_DWORD *)(this + 260),
         *(_DWORD *)(this + 272),
         4,
         (int (__cdecl *)(int, unsigned int))sub_4B4780,
         &a2);
  if ( a2 )
    result = (v3 - *(_DWORD *)(v2 + 260)) >> 2;
  else
    result = -1;
  return result;
}

//----- (004B4E70) --------------------------------------------------------
char *__thiscall sub_4B4E70(char *this, char *Source, int a3)
{
  char *v3; // esi

  v3 = this;
  *((_DWORD *)this + 66) = a3;
  *(_DWORD *)this = &SortedStringStringList::`vftable';
  if ( Source )
  {
    strncpy(this + 4, Source, 0x100u);
    v3[259] = 0;
  }
  else
  {
    this[4] = 0;
  }
  *((_DWORD *)v3 + 68) = 0;
  *((_DWORD *)v3 + 65) = 0;
  *((_DWORD *)v3 + 69) = 0;
  sub_4B4AB0(v3, 1);
  return v3;
}
// 51F0EC: using guessed type void *SortedStringStringList::`vftable';

//----- (004B4F10) --------------------------------------------------------
int __thiscall sub_4B4F10(int *this)
{
  int *v1; // esi

  v1 = this;
  *this = (int)&SortedStringStringList::`vftable';
  sub_4B47F0(this);
  *v1 = (int)&SortedStringList::`vftable';
  return sub_4B4690(v1);
}
// 51F0D4: using guessed type void *SortedStringList::`vftable';
// 51F0EC: using guessed type void *SortedStringStringList::`vftable';

//----- (004B4FE0) --------------------------------------------------------
void __thiscall sub_4B4FE0(void **this)
{
  void **v1; // esi
  void *v2; // esi

  v1 = this;
  if ( this[1288] )
  {
    j__free(this[1288]);
    v1[1288] = 0;
  }
  if ( v1[1289] )
  {
    j__free(v1[1289]);
    v1[1289] = 0;
  }
  sub_48C990((int)v1[1293], 0, 1);
  v2 = v1[1292];
  if ( v2 )
    j_j__free(v2);
}

//----- (004B5050) --------------------------------------------------------
int __stdcall sub_4B5050(int a1)
{
  return a1 + 1;
}

//----- (004B5060) --------------------------------------------------------
signed int __thiscall sub_4B5060(signed __int16 *this, int a2, int a3, int a4, int a5, int a6, signed int a7)
{
  int v8; // kr00_4
  int v9; // edi
  int v10; // ebx
  int v11; // ecx
  int v12; // ebp
  int v13; // esi
  int v14; // edi
  int v15; // esi
  int v16; // ebx
  int v17; // edi
  int v18; // eax
  int v19; // edx
  int v20; // eax
  int v21; // esi
  int v22; // ebx
  int v23; // edi
  int v24; // eax
  int v25; // edx
  int v26; // ebx
  int v27; // edi
  signed __int16 *v28; // ebp
  int v29; // esi
  int v30; // eax
  int v31; // ebp
  bool v32; // sf
  unsigned __int8 v33; // of
  int v34; // ebx
  int v35; // edi
  signed __int16 *v36; // ebp
  int v37; // esi
  int v38; // eax
  int v39; // ebp
  signed __int16 *v40; // [esp+10h] [ebp-8h]
  int v41; // [esp+14h] [ebp-4h]
  int v42; // [esp+14h] [ebp-4h]
  int v43; // [esp+14h] [ebp-4h]
  int v44; // [esp+14h] [ebp-4h]
  int v45; // [esp+1Ch] [ebp+4h]
  int v46; // [esp+1Ch] [ebp+4h]
  int v47; // [esp+1Ch] [ebp+4h]
  int v48; // [esp+1Ch] [ebp+4h]
  int v49; // [esp+20h] [ebp+8h]
  int v50; // [esp+24h] [ebp+Ch]
  int v51; // [esp+24h] [ebp+Ch]
  int v52; // [esp+24h] [ebp+Ch]
  int v53; // [esp+24h] [ebp+Ch]
  int v54; // [esp+28h] [ebp+10h]
  int v55; // [esp+2Ch] [ebp+14h]

  v40 = this;
  if ( (a5 - a3) * (a5 - a3) + (a6 - a4) * (a6 - a4) > a2 * a2 )
    return 0;
  v8 = a6;
  v9 = a3 / 16;
  v10 = a5 / 16 - v9;
  v49 = a4 / 16;
  v11 = a6 / 16;
  v55 = a5 / 16;
  v12 = v11 - a4 / 16;
  v13 = abs(v10);
  v54 = v9;
  v14 = abs(v12);
  if ( v13 >= v14 )
  {
    if ( v13 )
    {
      v26 = v55;
      if ( v55 < v54 )
      {
        v27 = 1000 * v11 + 500;
        v28 = v40;
        v47 = *((_DWORD *)v40 + 1292);
        v43 = 1000 * (v49 - v11) / v13;
        v52 = *((_DWORD *)v40 + 1);
        while ( 1 )
        {
          v29 = v27 / 1000;
          v30 = *(_BYTE *)(v26 + v52 * (v27 / 1000) + v47 + 2 * (v26 + v52 * (v27 / 1000)) + 2) & 0x1F;
          if ( *(_BYTE *)(v26 + v52 * (v27 / 1000) + v47 + 2 * (v26 + v52 * (v27 / 1000)) + 2) & 0x1F )
          {
            v31 = v28[v30 + 1296];
            v33 = __OFSUB__(a7, v31);
            v32 = a7 - v31 < 0;
            v28 = v40;
            if ( !(v32 ^ v33) && a7 <= v40[v30 + 1328] && (v26 != v55 || v29 != v11) && (v26 != v54 || v29 != v49) )
              break;
          }
          v27 += v43;
          if ( ++v26 >= v54 )
            return 1;
        }
        return 0;
      }
      v34 = v54;
      v35 = 1000 * v49 + 500;
      v44 = 1000 * v12 / v13;
      if ( v54 <= v55 )
      {
        v36 = v40;
        v53 = *((_DWORD *)v40 + 1);
        v48 = *((_DWORD *)v40 + 1292);
        while ( 1 )
        {
          v37 = v35 / 1000;
          v38 = *(_BYTE *)(v34 + v53 * (v35 / 1000) + v48 + 2 * (v34 + v53 * (v35 / 1000)) + 2) & 0x1F;
          if ( *(_BYTE *)(v34 + v53 * (v35 / 1000) + v48 + 2 * (v34 + v53 * (v35 / 1000)) + 2) & 0x1F )
          {
            v39 = v36[v38 + 1296];
            v33 = __OFSUB__(a7, v39);
            v32 = a7 - v39 < 0;
            v36 = v40;
            if ( !(v32 ^ v33) && a7 <= v40[v38 + 1328] && (v34 != v55 || v37 != v11) && (v34 != v54 || v37 != v49) )
              break;
          }
          v35 += v44;
          if ( ++v34 > v55 )
            return 1;
        }
        return 0;
      }
    }
  }
  else
  {
    if ( v11 < v49 )
    {
      v15 = 1000 * v55 + 500;
      v16 = v8 / 16;
      v41 = 1000 * (v54 - v55) / v14;
      v50 = *((_DWORD *)v40 + 1);
      v17 = v11 * v50;
      v45 = *((_DWORD *)v40 + 1292);
      while ( 1 )
      {
        v18 = v15 / 1000;
        v19 = *(_BYTE *)(v17 + v15 / 1000 + v45 + 2 * (v17 + v15 / 1000) + 2) & 0x1F;
        if ( *(_BYTE *)(v17 + v15 / 1000 + v45 + 2 * (v17 + v15 / 1000) + 2) & 0x1F )
        {
          if ( a7 >= v40[v19 + 1296]
            && a7 <= v40[v19 + 1328]
            && (v16 != v11 || v18 != v55)
            && (v16 != v49 || v18 != v54) )
          {
            break;
          }
        }
        v15 += v41;
        v17 += v50;
        if ( ++v16 >= v49 )
          return 1;
      }
      return 0;
    }
    v20 = 1000 * v10 / v14;
    v21 = 1000 * v54 + 500;
    v22 = a4 / 16;
    v42 = v20;
    if ( v49 <= v11 )
    {
      v51 = *((_DWORD *)v40 + 1);
      v23 = v49 * v51;
      v46 = *((_DWORD *)v40 + 1292);
      while ( 1 )
      {
        v24 = v21 / 1000;
        v25 = *(_BYTE *)(v23 + v21 / 1000 + v46 + 2 * (v23 + v21 / 1000) + 2) & 0x1F;
        if ( *(_BYTE *)(v23 + v21 / 1000 + v46 + 2 * (v23 + v21 / 1000) + 2) & 0x1F )
        {
          if ( a7 >= v40[v25 + 1296]
            && a7 <= v40[v25 + 1328]
            && (v22 != v11 || v24 != v55)
            && (v22 != v49 || v24 != v54) )
          {
            break;
          }
        }
        v21 += v42;
        v23 += v51;
        if ( ++v22 > v11 )
          return 1;
      }
      return 0;
    }
  }
  return 1;
}

//----- (004B5710) --------------------------------------------------------
signed int __thiscall sub_4B5710(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // ebp
  int v6; // edi
  _DWORD *v7; // eax
  int v8; // ecx
  int v9; // esi
  int v10; // eax
  int v11; // ebx
  int v12; // ebp
  int v13; // edi
  _BYTE *v14; // edx
  _DWORD *v16; // [esp+Ch] [ebp-4h]
  signed int v17; // [esp+18h] [ebp+8h]
  signed int v18; // [esp+20h] [ebp+10h]

  v5 = a3;
  v6 = a5;
  v7 = this;
  v16 = this;
  if ( a3 <= a5 )
    return 0;
  if ( a4 <= a5 )
    return 0;
  v8 = this[1];
  if ( a3 >= 16 * v7[1] - a5 || a4 >= 16 * v7[2] - a5 )
    return 0;
  v17 = (a3 - a5) / 16 < 0 ? 0 : (a3 - a5) / 16;
  v18 = (a4 - a5) / 16 < 0 ? 0 : (a4 - a5) / 16;
  v9 = (v6 + v5 + 15) / 16;
  v10 = (a4 + v6 + 15) / 16;
  if ( v9 >= v8 - 1 )
    v9 = v8 - 1;
  if ( v10 >= v16[2] - 1 )
    v10 = v16[2] - 1;
  v11 = v17;
  if ( v17 > v9 )
    return 1;
  v12 = a2;
  while ( 1 )
  {
    v13 = v18;
    if ( v18 <= v10 )
      break;
LABEL_18:
    v17 = ++v11;
    if ( v11 > v9 )
      return 1;
  }
  v14 = (_BYTE *)(v16[1292] + 3 * (v11 + v18 * v8));
  while ( !(v14[2] & 0x1F) )
  {
    if ( v12 )
    {
      v12 = a2;
      if ( !*(_BYTE *)(v16[(*v14 & 0x7F) + 520] + a2) )
        break;
    }
    ++v13;
    v14 += 3 * v8;
    if ( v13 > v10 )
    {
      v11 = v17;
      goto LABEL_18;
    }
  }
  return 0;
}

//----- (004B5860) --------------------------------------------------------
int __thiscall sub_4B5860(_DWORD *this, int a2, int *a3, int *a4, int *a5, int a6)
{
  int v6; // esi
  int v7; // edi
  bool v8; // sf
  unsigned __int8 v9; // of
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // ecx
  int result; // eax
  _DWORD *v15; // [esp+10h] [ebp-18h]
  int v16; // [esp+14h] [ebp-14h]
  int v17; // [esp+18h] [ebp-10h]
  int v18; // [esp+1Ch] [ebp-Ch]
  int v19; // [esp+20h] [ebp-8h]
  int v20; // [esp+24h] [ebp-4h]
  int v21; // [esp+38h] [ebp+10h]

  *a3 = 0;
  v15 = this;
  *a4 = 0;
  v17 = *a5;
  v18 = a5[1];
  v19 = a5[2];
  v20 = a5[3];
  v16 = 0;
  do
  {
    v21 = 0;
    do
    {
      v6 = v17 + rand() % (v19 - v17 + 1);
      v7 = v18 + rand() % (v20 - v18 + 1);
      if ( sub_4B5710(v15, a2, v6, v7, a6) )
      {
        result = (int)a3;
        *a3 = v6;
        *a4 = v7;
        return result;
      }
      v9 = __OFSUB__(v21 + 1, 20);
      v8 = v21++ - 19 < 0;
    }
    while ( v8 ^ v9 );
    v17 = (v17 - 32) & ((v17 - 32 < 0) - 1);
    v10 = v19 + 32;
    v18 = (v18 - 32) & ((v18 - 32 < 0) - 1);
    v11 = 16 * v15[1];
    v9 = __OFSUB__(v11, v19 + 32);
    v8 = v11 - (v19 + 32) < 0;
    v19 = 16 * v15[1];
    if ( !(v8 ^ v9) )
      v19 = v10;
    v12 = 16 * v15[2];
    v13 = v20 + 32;
    v9 = __OFSUB__(v12, v20 + 32);
    v8 = v12 - (v20 + 32) < 0;
    v20 = 16 * v15[2];
    if ( !(v8 ^ v9) )
      v20 = v13;
    result = v16 + 1;
    v9 = __OFSUB__(v16 + 1, 200);
    v8 = v16++ - 199 < 0;
  }
  while ( v8 ^ v9 );
  return result;
}

//----- (004B59C0) --------------------------------------------------------
int __thiscall sub_4B59C0(_DWORD *this, int *a2, int *a3, int a4, int a5, int a6, int a7)
{
  _DWORD *v7; // ebp
  int v8; // esi
  int result; // eax
  int v10; // edx
  int v11; // ecx
  bool v12; // zf
  bool v13; // sf
  unsigned __int8 v14; // of
  int v15; // edi

  *a2 = 0;
  v7 = this;
  *a3 = this[1294];
  v8 = a4 / 160000;
  result = a5 / 160000;
  if ( a4 / 160000 < 0 || result < 0 || (v10 = this[1], v8 >= v10) || result >= this[2] )
    v11 = 1;
  else
    v11 = *(_BYTE *)(3 * (v8 + result * v10) + this[1292] + 2) & 0x1F;
  switch ( v11 )
  {
    case 0:
    case 26:
    case 27:
    case 28:
    case 29:
      return result;
    case 2:
    case 7:
    case 12:
    case 17:
    case 22:
      result = 160000 * (v8 + result);
      if ( a5 + a4 - result < 160000 )
        goto LABEL_15;
      return result;
    case 3:
    case 8:
    case 13:
    case 18:
    case 23:
      result *= 160000;
      v14 = __OFSUB__(a4 % 160000, a5 - result);
      v12 = a4 % 160000 == a5 - result;
      v13 = a4 % 160000 - (a5 - result) < 0;
      goto LABEL_14;
    case 4:
    case 9:
    case 14:
    case 19:
    case 24:
      result *= 160000;
      if ( a4 % 160000 < a5 - result )
        goto LABEL_15;
      return result;
    case 5:
    case 10:
    case 15:
    case 20:
    case 25:
      result = 160000 * (v8 + result);
      v15 = a5 + a4 - result;
      v14 = __OFSUB__(v15, 160000);
      v12 = v15 == 160000;
      v13 = v15 - 160000 < 0;
LABEL_14:
      if ( !((unsigned __int8)(v13 ^ v14) | v12) )
        goto LABEL_15;
      break;
    default:
LABEL_15:
      result = 10000 * *((signed __int16 *)v7 + v11 + 1328);
      if ( a6 < result )
      {
        result = 10000 * *((signed __int16 *)v7 + v11 + 1296);
        if ( a7 <= result )
          *a3 = result;
      }
      else
      {
        *a2 = result;
      }
      break;
  }
  return result;
}

//----- (004B5BB0) --------------------------------------------------------
_DWORD *__cdecl sub_4B5BB0(int a1, int a2)
{
  int v2; // ecx
  _DWORD *result; // eax
  int v4; // edx
  int v5; // esi
  int v6; // edx
  int v7; // esi
  int v8; // edx

  v2 = a2;
  result = (_DWORD *)a1;
  *(_WORD *)a1 = *(_WORD *)a2;
  *(_WORD *)(a1 + 2) = *(_WORD *)(a2 + 2);
  result[1] ^= (*(_DWORD *)(a2 + 4) ^ result[1]) & 0x1FFF;
  v4 = result[1] ^ (result[1] ^ *(_DWORD *)(a2 + 4)) & 0xFE000;
  *(_DWORD *)(a1 + 4) = v4;
  v5 = v4 ^ (v4 ^ *(_DWORD *)(a2 + 4)) & 0x3FF00000;
  v6 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 + 4) = v5;
  result[2] ^= (*(_DWORD *)(a2 + 8) ^ v6) & 0x60000000;
  v7 = result[2] ^ (result[2] ^ *(_DWORD *)(a2 + 8)) & 0x1C000000;
  *(_DWORD *)(a1 + 8) = v7;
  result[3] ^= (result[3] ^ (*(unsigned __int8 *)(a2 + 13) << 23)) & 0x3F800000;
  result[2] ^= (*(_DWORD *)(a2 + 8) ^ v7) & 0x3FFE000;
  *(_BYTE *)(a1 + 16) = *(_BYTE *)(a2 + 12);
  v8 = *(_DWORD *)(v2 + 8) ^ (*(_DWORD *)(a1 + 8) ^ *(_DWORD *)(v2 + 8)) & 0x7FFFFFFF;
  *(_DWORD *)(a1 + 8) = v8;
  *(_DWORD *)(a1 + 8) = v8 ^ ((unsigned __int16)v8 ^ (unsigned __int16)*(_DWORD *)(a2 + 8)) & 0x1FFF;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(v2 + 4) ^ (*(_DWORD *)(a1 + 4) ^ *(_DWORD *)(v2 + 4)) & 0x3FFFFFFF;
  *(_DWORD *)(a1 + 12) &= 0xBF800000;
  return result;
}

//----- (004B5CD0) --------------------------------------------------------
_DWORD *__thiscall sub_4B5CD0(void *DstBuf, char *Filename, int a3)
{
  _DWORD *v3; // esi
  FILE *v4; // ebp
  signed int v5; // edi
  int v6; // ST30_4
  int v7; // edx
  int v8; // ecx
  int v9; // edx
  _DWORD *v10; // eax
  void *v11; // eax
  bool v12; // sf
  unsigned __int8 v13; // of
  char *v14; // eax
  char *v15; // eax
  char *v16; // edx
  char v17; // cl
  char *v18; // eax
  int v19; // edi
  int v20; // ebp
  char *v21; // edx
  _BYTE *v22; // eax
  char v23; // cl
  int v24; // edi
  int v25; // ebp
  char *v26; // edx
  _BYTE *v27; // eax
  char v28; // cl
  int v29; // edi
  unsigned int v30; // ebx
  int v31; // ebp
  int v32; // edi
  int v33; // ebx
  char v34; // al
  _BYTE *v35; // ecx
  void *v36; // eax
  char *v37; // eax
  unsigned int v38; // ebx
  char *v39; // ebp
  int v40; // edi
  int v41; // ebx
  char v42; // al
  int v43; // ebp
  int v44; // ebx
  int v45; // edi
  int v46; // ecx
  int v47; // edx
  unsigned int v49; // [esp+10h] [ebp-214h]
  unsigned int v50; // [esp+10h] [ebp-214h]
  FILE *File; // [esp+14h] [ebp-210h]
  int v52; // [esp+18h] [ebp-20Ch]
  int v53; // [esp+18h] [ebp-20Ch]
  int v54; // [esp+1Ch] [ebp-208h]
  char Str[512]; // [esp+20h] [ebp-204h]

  v3 = DstBuf;
  *((_DWORD *)DstBuf + 1293) = 0;
  *((_DWORD *)DstBuf + 1294) = 10000 * a3;
  *((_DWORD *)DstBuf + 1288) = 0;
  *((_DWORD *)DstBuf + 1289) = 0;
  v4 = fopen(Filename, "rb");
  File = v4;
  if ( !v4 )
    sub_48D4A0("Could not open level file: %s", Filename);
  fread(v3, 0x1420u, 1u, v4);
  v5 = 128;
  if ( *v3 < 4 )
  {
    memset(v3 + 648, 0, 0x40u);
    *((_WORD *)v3 + 1334) = 16;
    *((_WORD *)v3 + 1335) = 16;
    *((_WORD *)v3 + 1336) = 16;
    *((_WORD *)v3 + 1337) = 16;
    *((_WORD *)v3 + 1338) = 16;
    *((_WORD *)v3 + 1329) = 1024;
    *((_WORD *)v3 + 1330) = 1024;
    *((_WORD *)v3 + 1331) = 1024;
    *((_WORD *)v3 + 1332) = 1024;
    *((_WORD *)v3 + 1333) = 1024;
    *((_WORD *)v3 + 1354) = 1024;
    *((_WORD *)v3 + 1355) = 1024;
    *((_WORD *)v3 + 1357) = 1024;
    *((_WORD *)v3 + 1356) = 1024;
    *((_WORD *)v3 + 1358) = 1024;
    *((_WORD *)v3 + 1359) = 1024;
    *(_WORD *)((char *)&v6 + 1) = -1;
    LOBYTE(v6) = -1;
    HIBYTE(v6) = 0;
    v7 = v6;
    *((_WORD *)v3 + 1339) = 32;
    *((_WORD *)v3 + 1340) = 32;
    *((_WORD *)v3 + 1341) = 32;
    *((_WORD *)v3 + 1342) = 32;
    *((_WORD *)v3 + 1343) = 32;
    *(_WORD *)((char *)&v6 + 1) = -256;
    LOBYTE(v6) = 0;
    *((_WORD *)v3 + 1344) = 64;
    *((_WORD *)v3 + 1345) = 64;
    *((_WORD *)v3 + 1346) = 64;
    *((_WORD *)v3 + 1347) = 64;
    *((_WORD *)v3 + 1348) = 64;
    v8 = v6;
    *(_WORD *)((char *)&v6 + 1) = 255;
    LOBYTE(v6) = 0;
    v3[680] = v7;
    *((_WORD *)v3 + 1328) = 0;
    *((_WORD *)v3 + 1349) = 128;
    *((_WORD *)v3 + 1350) = 128;
    *((_WORD *)v3 + 1351) = 128;
    *((_WORD *)v3 + 1352) = 128;
    *((_WORD *)v3 + 1353) = 128;
    v3[681] = v8;
    v3[682] = v6;
    v3[683] = 255;
  }
  v9 = 16 * v3[2];
  v3[1290] = 16 * v3[1];
  v3[1291] = v9;
  v10 = v3 + 520;
  do
  {
    *v10 %= 16;
    ++v10;
    --v5;
  }
  while ( v5 );
  v3[1288] = malloc(v3[5] << 6);
  v11 = malloc(v3[4] << 6);
  v13 = __OFSUB__(*v3, 6);
  v12 = *v3 - 6 < 0;
  v3[1289] = v11;
  if ( v12 ^ v13 )
  {
    v14 = strrchr(Filename, 92);
    if ( v14 )
      v15 = v14 + 1;
    else
      v15 = Filename;
    v16 = (char *)(Str - v15);
    do
    {
      v17 = *v15;
      v15[(_DWORD)v16] = *v15;
      ++v15;
    }
    while ( v17 );
    v18 = strrchr(Str, 46);
    *(_DWORD *)v18 = 1651928110;
    v19 = 0;
    v18[4] = 0;
    if ( v3[5] > 0 )
    {
      v20 = 0;
      do
      {
        v21 = Str;
        v22 = (_BYTE *)(v20 + v3[1288]);
        do
        {
          v23 = *v21;
          *v22++ = *v21++;
        }
        while ( v23 );
        sprintf((char *)(v3[1288] + v20 + 32), "o%d.cfs", v19++);
        v20 += 64;
      }
      while ( v19 < v3[5] );
    }
    v24 = 0;
    if ( v3[4] > 0 )
    {
      v25 = 0;
      do
      {
        v26 = Str;
        v27 = (_BYTE *)(v25 + v3[1289]);
        do
        {
          v28 = *v26;
          *v27++ = *v26++;
        }
        while ( v28 );
        sprintf((char *)(v3[1289] + v25 + 32), "f%d.cfs", v24++);
        v25 += 64;
      }
      while ( v24 < v3[4] );
    }
  }
  else
  {
    fread((void *)v3[1288], v3[5], 0x40u, v4);
    fread((void *)v3[1289], v3[4], 0x40u, v4);
  }
  v29 = v3[2] * v3[1];
  v54 = v3[2] * v3[1];
  v30 = 0;
  v3[1292] = operator new(3 * v29);
  v49 = 0;
  do
  {
    v31 = v3[1292];
    v52 = v29;
    if ( v29 > 0 )
    {
      do
      {
        v32 = sub_4C2E5B(File);
        if ( !v32 )
        {
          v33 = sub_4C2E5B(File);
          v32 = (v33 << 8) + sub_4C2E5B(File);
          v30 = v49;
        }
        v34 = sub_4C2E5B(File);
        for ( v52 -= v32; v32 > 0; v31 += 3 )
        {
          *(_BYTE *)(v30 + v31) = v34;
          --v32;
        }
      }
      while ( v52 > 0 );
      v29 = v54;
    }
    v49 = ++v30;
  }
  while ( v30 < 3 );
  if ( *v3 < 4 && v29 > 0 )
  {
    v35 = (_BYTE *)(v3[1292] + 2);
    do
    {
      *v35 ^= (*v35 ^ LOBYTE(dword_53B3F0[*v35 & 0x1F])) & 0x1F;
      v35 += 3;
      --v29;
    }
    while ( v29 );
  }
  v36 = (void *)sub_48C990(0, 17 * v3[3], 0x2000);
  v13 = __OFSUB__(*v3, 3);
  v12 = *v3 - 3 < 0;
  v3[1293] = v36;
  if ( v12 ^ v13 )
  {
    v37 = (char *)malloc(14 * v3[3]);
    v38 = 0;
    v54 = (int)v37;
    v50 = 0;
    do
    {
      v39 = v37;
      v53 = v3[3];
      if ( v3[3] > 0 )
      {
        do
        {
          v40 = sub_4C2E5B(File);
          if ( !v40 )
          {
            v41 = sub_4C2E5B(File);
            v40 = (v41 << 8) + sub_4C2E5B(File);
            v38 = v50;
          }
          v42 = sub_4C2E5B(File);
          for ( v53 -= v40; v40 > 0; v39 += 14 )
          {
            v39[v38] = v42;
            --v40;
          }
        }
        while ( v53 > 0 );
        v37 = (char *)v54;
      }
      v50 = ++v38;
    }
    while ( v38 < 0xE );
    v43 = 0;
    if ( v3[3] > 0 )
    {
      v44 = 0;
      v45 = (int)v37;
      do
      {
        sub_4B5BB0(v44 + v3[1293], v45);
        ++v43;
        v45 += 14;
        v44 += 17;
      }
      while ( v43 < v3[3] );
      v37 = (char *)v54;
    }
    free(v37);
  }
  else
  {
    fread(v36, 0x11u, v3[3], File);
  }
  if ( *v3 < 5 )
  {
    v46 = 0;
    if ( v3[3] > 0 )
    {
      v47 = 0;
      do
      {
        *(_DWORD *)(v47 + v3[1293] + 12) &= 0xBFFFFFFF;
        ++v46;
        v47 += 17;
      }
      while ( v46 < v3[3] );
    }
  }
  fclose(File);
  return v3;
}
// 53B3F0: using guessed type int dword_53B3F0[];
// 4B5CD0: using guessed type char Str[512];

//----- (004B62B0) --------------------------------------------------------
int __thiscall sub_4B62B0(signed __int16 *this, int a2, int *a3, int *a4, signed int a5, int a6, int a7)
{
  signed int v7; // ebx
  int v8; // edx
  int result; // eax
  signed int v10; // eax
  int v11; // ebp
  int v12; // esi
  int v13; // edi
  int v14; // [esp+4h] [ebp-24h]
  signed __int16 *v15; // [esp+8h] [ebp-20h]
  int v16; // [esp+Ch] [ebp-1Ch]
  int v17; // [esp+10h] [ebp-18h]
  int v18; // [esp+14h] [ebp-14h]
  int v19; // [esp+18h] [ebp-10h]
  int v20; // [esp+1Ch] [ebp-Ch]
  int v21; // [esp+20h] [ebp-8h]
  int v22; // [esp+24h] [ebp-4h]
  signed int v23; // [esp+38h] [ebp+10h]

  v7 = a5;
  v15 = this;
  if ( a5 == -1 )
  {
    v8 = *((_DWORD *)this + 2);
    v19 = 0;
    v20 = 0;
    v21 = 16 * *((_DWORD *)this + 1);
    v22 = 16 * v8;
    result = sub_4B5860(this, a2, a3, a4, &v19, a7);
  }
  else
  {
    v17 = *a3;
    v18 = *a4;
    if ( a5 < 1 )
      v7 = 1;
    v10 = 150;
    v14 = 0;
    v23 = 150;
    while ( 1 )
    {
      v16 = 0;
      if ( v10 > 0 )
        break;
LABEL_13:
      v7 += v14;
      if ( v7 > 2000 )
        a6 = 0;
      v14 += 10;
      v23 = --v10;
      if ( v10 <= 50 )
      {
        result = (int)a4;
        *a3 = 0;
        *a4 = 0;
        return result;
      }
    }
    v11 = 2 * v7;
    while ( 1 )
    {
      v12 = v17 + rand() % v11 - v7;
      v13 = v18 + rand() % v11 - v7;
      if ( sub_4B5710(v15, a2, v12, v13, a7) )
      {
        if ( !a6 || sub_4B5060(v15, 20000, *a3, *a4, v12, v13, 0) )
          break;
      }
      if ( ++v16 >= v23 )
      {
        v10 = v23;
        goto LABEL_13;
      }
    }
    result = (int)a4;
    *a3 = v12;
    *a4 = v13;
  }
  return result;
}

//----- (004B66B0) --------------------------------------------------------
int __thiscall sub_4B66B0(_DWORD *this, int a2, int a3, int a4, int *a5, int *a6, int a7, int a8, int a9, int a10)
{
  _DWORD *v10; // ebp
  _DWORD *v11; // edi
  int result; // eax
  int v13; // esi
  int v14; // ebx

  v10 = a5;
  v11 = this;
  result = sub_4B59C0(this, a5, a6, a7, a8, a9, a10);
  v13 = 0;
  if ( a3 > 0 )
  {
    v14 = a2;
    do
    {
      sub_4B59C0(v11, (int *)&a5, &a2, a7 + *(_DWORD *)(v14 + 8 * v13), a8 + *(_DWORD *)(v14 + 8 * v13 + 4), a9, a10);
      if ( (signed int)a5 > *v10 )
        *v10 = a5;
      result = a2;
      if ( a2 < *a6 )
        *a6 = a2;
      v13 += a4;
    }
    while ( v13 < a3 );
  }
  return result;
}

//----- (004B6860) --------------------------------------------------------
char __cdecl sub_4B6860(char *Filename, int a2, int a3)
{
  char v3; // bl
  FILE *v4; // edi
  void *v5; // ebp
  _BYTE *v6; // esi
  int v7; // ebx
  int v8; // ebx
  _BYTE *v9; // esi
  int v10; // eax
  int v11; // ST18_4
  size_t v12; // edi
  FILE *File; // [esp+Ch] [ebp-Ch]
  FILE *v15; // [esp+10h] [ebp-8h]

  remove("delta.hld");
  rename(Filename, "delta.hld");
  v3 = 0;
  v4 = fopen("delta.hld", "rb");
  v15 = v4;
  if ( v4 )
  {
    File = fopen(Filename, "wb");
    if ( File )
    {
      v5 = malloc(0x40000u);
      v6 = (_BYTE *)(a2 + 8);
      if ( a2 + 8 < (unsigned int)(a2 + a3) )
      {
        do
        {
          v7 = (unsigned __int8)v6[1];
          BYTE1(v7) = *v6;
          v8 = (unsigned __int8)v6[3] | (((unsigned __int8)v6[2] | (v7 << 8)) << 8);
          v9 = v6 + 4;
          if ( v8 >= 0 )
          {
            v10 = (unsigned __int8)v9[1];
            BYTE1(v10) = *v9;
            v11 = (unsigned __int8)v9[3] | (((unsigned __int8)v9[2] | (v10 << 8)) << 8);
            v6 = v9 + 4;
            fseek(v4, v11, 0);
            if ( v8 > 0 )
            {
              do
              {
                v12 = 0x40000;
                if ( v8 <= 0x40000 )
                  v12 = v8;
                fread(v5, 1u, v12, v15);
                fwrite(v5, 1u, v12, File);
                v8 -= v12;
              }
              while ( v8 > 0 );
              v4 = v15;
            }
          }
          else
          {
            fwrite(v9, 1u, -v8, File);
            v6 = &v9[-v8];
          }
        }
        while ( (unsigned int)v6 < a2 + a3 );
      }
      fclose(File);
      free(v5);
      v3 = 1;
    }
    fclose(v4);
  }
  remove("delta.hld");
  return v3;
}

//----- (004B69D0) --------------------------------------------------------
void __cdecl sub_4B69D0(int *a1, int *a2)
{
  int *v2; // ebp
  int *v3; // ecx
  unsigned int v4; // edi
  _DWORD *v5; // ecx
  _DWORD *v6; // edx
  unsigned int v7; // eax
  int v8; // esi
  int v9; // eax
  unsigned __int8 *v10; // ecx
  unsigned __int8 *v11; // edx
  int v12; // eax
  unsigned __int8 *v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // ecx
  unsigned __int8 *v16; // edx
  signed int v17; // eax
  int v18; // kr00_4
  int v19; // edx
  _DWORD *v20; // ecx
  unsigned int v21; // eax
  _DWORD *v22; // edx
  int v23; // esi
  int v24; // eax
  unsigned __int8 *v25; // ecx
  unsigned __int8 *v26; // edx
  int v27; // eax
  unsigned __int8 *v28; // ecx
  unsigned __int8 *v29; // edx
  unsigned __int8 *v30; // ecx
  unsigned __int8 *v31; // edx
  signed int v32; // eax
  bool v33; // sf
  _DWORD *v34; // edx
  _DWORD *v35; // ecx
  unsigned int v36; // eax
  int v37; // esi
  int v38; // eax
  unsigned __int8 *v39; // ecx
  unsigned __int8 *v40; // edx
  int v41; // eax
  unsigned __int8 *v42; // ecx
  unsigned __int8 *v43; // edx
  unsigned __int8 *v44; // ecx
  unsigned __int8 *v45; // edx
  signed int v46; // eax
  _DWORD *v47; // ecx
  unsigned int v48; // eax
  _DWORD *v49; // edx
  int v50; // esi
  int v51; // eax
  unsigned __int8 *v52; // ecx
  unsigned __int8 *v53; // edx
  int v54; // eax
  unsigned __int8 *v55; // ecx
  unsigned __int8 *v56; // edx
  unsigned __int8 *v57; // ecx
  unsigned __int8 *v58; // edx
  signed int v59; // eax
  int v60; // esi
  int v61; // eax
  unsigned __int8 *v62; // ecx
  unsigned __int8 *v63; // edx
  int v64; // eax
  unsigned __int8 *v65; // ecx
  unsigned __int8 *v66; // edx
  unsigned __int8 *v67; // ecx
  unsigned __int8 *v68; // edx
  signed int v69; // eax
  _DWORD *v70; // ecx
  unsigned int v71; // eax
  _DWORD *v72; // edx
  int v73; // esi
  int v74; // eax
  unsigned __int8 *v75; // ecx
  unsigned __int8 *v76; // edx
  int v77; // eax
  unsigned __int8 *v78; // ecx
  unsigned __int8 *v79; // edx
  unsigned __int8 *v80; // ecx
  unsigned __int8 *v81; // edx
  signed int v82; // eax
  int *v83; // ebx
  int *v84; // edi
  bool v85; // zf
  _DWORD *v86; // ecx
  _DWORD *v87; // edx
  unsigned int v88; // eax
  int v89; // esi
  int v90; // eax
  unsigned __int8 *v91; // ecx
  unsigned __int8 *v92; // edx
  int v93; // eax
  unsigned __int8 *v94; // ecx
  unsigned __int8 *v95; // edx
  unsigned __int8 *v96; // ecx
  unsigned __int8 *v97; // edx
  signed int v98; // eax
  _DWORD *v99; // ecx
  _DWORD *v100; // edx
  unsigned int v101; // eax
  int v102; // esi
  int v103; // eax
  unsigned __int8 *v104; // ecx
  unsigned __int8 *v105; // edx
  int v106; // eax
  unsigned __int8 *v107; // ecx
  unsigned __int8 *v108; // edx
  unsigned __int8 *v109; // ecx
  unsigned __int8 *v110; // edx
  signed int v111; // eax
  int v112; // eax
  _DWORD *v113; // ecx
  _DWORD *v114; // edx
  unsigned int v115; // eax
  int v116; // esi
  int v117; // eax
  unsigned __int8 *v118; // ecx
  unsigned __int8 *v119; // edx
  int v120; // eax
  unsigned __int8 *v121; // ecx
  unsigned __int8 *v122; // edx
  unsigned __int8 *v123; // ecx
  unsigned __int8 *v124; // edx
  signed int v125; // eax

  while ( 1 )
  {
    v2 = a1;
    v3 = a2;
    v4 = (unsigned int)a1;
    dword_576AF8 = (int)a2;
    dword_576AF4 = (int)a1;
    if ( a1 < a2 )
    {
      do
      {
        v5 = *(_DWORD **)(v4 + 4);
        v6 = *(_DWORD **)v4;
        v7 = 16;
        while ( *v6 == *v5 )
        {
          v7 -= 4;
          ++v5;
          ++v6;
          if ( v7 < 4 )
          {
            if ( !v7 )
              goto LABEL_15;
            break;
          }
        }
        v8 = *(unsigned __int8 *)v6 - *(unsigned __int8 *)v5;
        if ( *(unsigned __int8 *)v6 == *(unsigned __int8 *)v5 )
        {
          v9 = v7 - 1;
          v10 = (unsigned __int8 *)v5 + 1;
          v11 = (unsigned __int8 *)v6 + 1;
          if ( !v9 )
            goto LABEL_15;
          v8 = *v11 - *v10;
          if ( *v11 == *v10 )
          {
            v12 = v9 - 1;
            v13 = v10 + 1;
            v14 = v11 + 1;
            if ( !v12
              || (v8 = *v14 - *v13, *v14 == *v13)
              && ((v15 = v13 + 1, v16 = v14 + 1, v12 == 1) || (v8 = *v16 - *v15, *v16 == *v15)) )
            {
LABEL_15:
              v17 = 0;
              goto LABEL_16;
            }
          }
        }
        v17 = 1;
        if ( v8 <= 0 )
          v17 = -1;
LABEL_16:
        v3 = a2;
        if ( v17 > 0 )
          break;
        v4 += 4;
      }
      while ( v4 < (unsigned int)a2 );
      dword_576AF4 = v4;
    }
    if ( (int *)v4 == v3 )
      return;
    v18 = v3 - a1;
    v19 = a1[v18 / 2];
    dword_576AF4 = (int)a1;
    dword_576AEC = v19;
    if ( v18 > 8 )
    {
      v20 = (_DWORD *)v19;
      v21 = 16;
      v22 = (_DWORD *)*a1;
      while ( *v22 == *v20 )
      {
        v21 -= 4;
        ++v20;
        ++v22;
        if ( v21 < 4 )
        {
          if ( !v21 )
            goto LABEL_34;
          break;
        }
      }
      v23 = *(unsigned __int8 *)v22 - *(unsigned __int8 *)v20;
      if ( *(unsigned __int8 *)v22 == *(unsigned __int8 *)v20 )
      {
        v24 = v21 - 1;
        v25 = (unsigned __int8 *)v20 + 1;
        v26 = (unsigned __int8 *)v22 + 1;
        if ( !v24 )
          goto LABEL_34;
        v23 = *v26 - *v25;
        if ( *v26 == *v25 )
        {
          v27 = v24 - 1;
          v28 = v25 + 1;
          v29 = v26 + 1;
          if ( !v27
            || (v23 = *v29 - *v28, *v29 == *v28)
            && ((v30 = v28 + 1, v31 = v29 + 1, v27 == 1) || (v23 = *v31 - *v30, *v31 == *v30)) )
          {
LABEL_34:
            v32 = 0;
            goto LABEL_35;
          }
        }
      }
      v32 = 1;
      if ( v23 <= 0 )
        v32 = -1;
LABEL_35:
      v33 = v32 < 0;
      v34 = (_DWORD *)*a1;
      v35 = (_DWORD *)*a2;
      v36 = 16;
      if ( v33 )
      {
        while ( *v34 == *v35 )
        {
          v36 -= 4;
          ++v35;
          ++v34;
          if ( v36 < 4 )
          {
            if ( !v36 )
              goto LABEL_49;
            break;
          }
        }
        v37 = *(unsigned __int8 *)v34 - *(unsigned __int8 *)v35;
        if ( *(unsigned __int8 *)v34 == *(unsigned __int8 *)v35 )
        {
          v38 = v36 - 1;
          v39 = (unsigned __int8 *)v35 + 1;
          v40 = (unsigned __int8 *)v34 + 1;
          if ( !v38 )
            goto LABEL_164;
          v37 = *v40 - *v39;
          if ( *v40 == *v39 )
          {
            v41 = v38 - 1;
            v42 = v39 + 1;
            v43 = v40 + 1;
            if ( !v41
              || (v37 = *v43 - *v42, *v43 == *v42)
              && ((v44 = v42 + 1, v45 = v43 + 1, v41 == 1) || (v37 = *v45 - *v44, *v45 == *v44)) )
            {
LABEL_164:
              v2 = (int *)dword_576AF4;
LABEL_49:
              v46 = 0;
              goto LABEL_50;
            }
          }
        }
        v2 = (int *)dword_576AF4;
        v46 = 1;
        if ( v37 <= 0 )
          v46 = -1;
LABEL_50:
        if ( v46 > 0 )
        {
          dword_576AEC = *a1;
          goto LABEL_100;
        }
        v47 = (_DWORD *)dword_576AEC;
        v48 = 16;
        v49 = (_DWORD *)*a2;
        while ( *v49 == *v47 )
        {
          v48 -= 4;
          ++v47;
          ++v49;
          if ( v48 < 4 )
          {
            if ( !v48 )
              goto LABEL_65;
            break;
          }
        }
        v50 = *(unsigned __int8 *)v49 - *(unsigned __int8 *)v47;
        if ( *(unsigned __int8 *)v49 == *(unsigned __int8 *)v47 )
        {
          v51 = v48 - 1;
          v52 = (unsigned __int8 *)v47 + 1;
          v53 = (unsigned __int8 *)v49 + 1;
          if ( !v51 )
            goto LABEL_65;
          v50 = *v53 - *v52;
          if ( *v53 == *v52 )
          {
            v54 = v51 - 1;
            v55 = v52 + 1;
            v56 = v53 + 1;
            if ( !v54
              || (v50 = *v56 - *v55, *v56 == *v55)
              && ((v57 = v55 + 1, v58 = v56 + 1, v54 == 1) || (v50 = *v58 - *v57, *v58 == *v57)) )
            {
LABEL_65:
              v59 = 0;
              goto LABEL_66;
            }
          }
        }
        v59 = 1;
        if ( v50 <= 0 )
          v59 = -1;
LABEL_66:
        if ( v59 < 0 )
          goto LABEL_99;
      }
      else
      {
        while ( *v34 == *v35 )
        {
          v36 -= 4;
          ++v35;
          ++v34;
          if ( v36 < 4 )
          {
            if ( !v36 )
              goto LABEL_81;
            break;
          }
        }
        v60 = *(unsigned __int8 *)v34 - *(unsigned __int8 *)v35;
        if ( *(unsigned __int8 *)v34 == *(unsigned __int8 *)v35 )
        {
          v61 = v36 - 1;
          v62 = (unsigned __int8 *)v35 + 1;
          v63 = (unsigned __int8 *)v34 + 1;
          if ( !v61 )
            goto LABEL_165;
          v60 = *v63 - *v62;
          if ( *v63 == *v62 )
          {
            v64 = v61 - 1;
            v65 = v62 + 1;
            v66 = v63 + 1;
            if ( !v64
              || (v60 = *v66 - *v65, *v66 == *v65)
              && ((v67 = v65 + 1, v68 = v66 + 1, v64 == 1) || (v60 = *v68 - *v67, *v68 == *v67)) )
            {
LABEL_165:
              v2 = (int *)dword_576AF4;
LABEL_81:
              v69 = 0;
              goto LABEL_82;
            }
          }
        }
        v2 = (int *)dword_576AF4;
        v69 = 1;
        if ( v60 <= 0 )
          v69 = -1;
LABEL_82:
        if ( v69 < 0 )
        {
          dword_576AEC = *a1;
          goto LABEL_100;
        }
        v70 = (_DWORD *)dword_576AEC;
        v71 = 16;
        v72 = (_DWORD *)*a2;
        while ( *v72 == *v70 )
        {
          v71 -= 4;
          ++v70;
          ++v72;
          if ( v71 < 4 )
          {
            if ( !v71 )
              goto LABEL_97;
            break;
          }
        }
        v73 = *(unsigned __int8 *)v72 - *(unsigned __int8 *)v70;
        if ( *(unsigned __int8 *)v72 == *(unsigned __int8 *)v70 )
        {
          v74 = v71 - 1;
          v75 = (unsigned __int8 *)v70 + 1;
          v76 = (unsigned __int8 *)v72 + 1;
          if ( !v74 )
            goto LABEL_97;
          v73 = *v76 - *v75;
          if ( *v76 == *v75 )
          {
            v77 = v74 - 1;
            v78 = v75 + 1;
            v79 = v76 + 1;
            if ( !v77
              || (v73 = *v79 - *v78, *v79 == *v78)
              && ((v80 = v78 + 1, v81 = v79 + 1, v77 == 1) || (v73 = *v81 - *v80, *v81 == *v80)) )
            {
LABEL_97:
              v82 = 0;
              goto LABEL_98;
            }
          }
        }
        v82 = 1;
        if ( v73 <= 0 )
          v82 = -1;
LABEL_98:
        if ( v82 > 0 )
        {
LABEL_99:
          dword_576AEC = *a2;
          goto LABEL_100;
        }
      }
    }
LABEL_100:
    v83 = a1;
    v84 = (int *)dword_576AF8;
    if ( a1 >= a2 )
      goto LABEL_141;
    v85 = v2 == (int *)dword_576AF8;
    if ( (unsigned int)v2 < dword_576AF8 )
    {
      while ( 1 )
      {
LABEL_102:
        v86 = (_DWORD *)dword_576AEC;
        v87 = (_DWORD *)*v2;
        v88 = 16;
        do
        {
          if ( *v87 != *v86 )
            goto LABEL_106;
          v88 -= 4;
          ++v86;
          ++v87;
        }
        while ( v88 >= 4 );
        if ( !v88 )
        {
LABEL_115:
          v98 = 0;
          goto LABEL_116;
        }
LABEL_106:
        v89 = *(unsigned __int8 *)v87 - *(unsigned __int8 *)v86;
        if ( *(unsigned __int8 *)v87 == *(unsigned __int8 *)v86 )
        {
          v90 = v88 - 1;
          v91 = (unsigned __int8 *)v86 + 1;
          v92 = (unsigned __int8 *)v87 + 1;
          if ( !v90 )
            goto LABEL_115;
          v89 = *v92 - *v91;
          if ( *v92 == *v91 )
          {
            v93 = v90 - 1;
            v94 = v91 + 1;
            v95 = v92 + 1;
            if ( !v93 )
              goto LABEL_115;
            v89 = *v95 - *v94;
            if ( *v95 == *v94 )
            {
              v96 = v94 + 1;
              v97 = v95 + 1;
              if ( v93 == 1 )
                goto LABEL_115;
              v89 = *v97 - *v96;
              if ( *v97 == *v96 )
                goto LABEL_115;
            }
          }
        }
        v98 = 1;
        if ( v89 <= 0 )
          v98 = -1;
LABEL_116:
        if ( v98 >= 0 )
          break;
        ++v2;
        if ( v2 >= v84 )
          goto LABEL_136;
      }
      v85 = v2 == v84;
      if ( v2 >= v84 )
        goto LABEL_137;
      do
      {
        v99 = (_DWORD *)dword_576AEC;
        v100 = (_DWORD *)*v84;
        v101 = 16;
        do
        {
          if ( *v100 != *v99 )
            goto LABEL_124;
          v101 -= 4;
          ++v99;
          ++v100;
        }
        while ( v101 >= 4 );
        if ( !v101 )
        {
LABEL_133:
          v111 = 0;
          goto LABEL_134;
        }
LABEL_124:
        v102 = *(unsigned __int8 *)v100 - *(unsigned __int8 *)v99;
        if ( *(unsigned __int8 *)v100 == *(unsigned __int8 *)v99 )
        {
          v103 = v101 - 1;
          v104 = (unsigned __int8 *)v99 + 1;
          v105 = (unsigned __int8 *)v100 + 1;
          if ( !v103 )
            goto LABEL_133;
          v102 = *v105 - *v104;
          if ( *v105 == *v104 )
          {
            v106 = v103 - 1;
            v107 = v104 + 1;
            v108 = v105 + 1;
            if ( !v106 )
              goto LABEL_133;
            v102 = *v108 - *v107;
            if ( *v108 == *v107 )
            {
              v109 = v107 + 1;
              v110 = v108 + 1;
              if ( v106 == 1 )
                goto LABEL_133;
              v102 = *v110 - *v109;
              if ( *v110 == *v109 )
                goto LABEL_133;
            }
          }
        }
        v111 = 1;
        if ( v102 <= 0 )
          v111 = -1;
LABEL_134:
        if ( v111 <= 0 )
          break;
        --v84;
      }
      while ( v84 > v2 );
LABEL_136:
      v85 = v2 == v84;
    }
LABEL_137:
    if ( !v85 )
    {
      v112 = *v2;
      *v2 = *v84;
      *v84 = v112;
      ++v2;
      dword_576AF0 = v112;
      --v84;
    }
    if ( v2 < v84 )
      goto LABEL_102;
    v83 = a1;
    dword_576AF8 = (int)v84;
    dword_576AF4 = (int)v2;
LABEL_141:
    if ( v2 == v84 )
    {
      v113 = (_DWORD *)dword_576AEC;
      v114 = (_DWORD *)*v2;
      v115 = 16;
      do
      {
        if ( *v114 != *v113 )
          goto LABEL_146;
        v115 -= 4;
        ++v113;
        ++v114;
      }
      while ( v115 >= 4 );
      if ( !v115 )
      {
LABEL_155:
        v125 = 0;
        goto LABEL_156;
      }
LABEL_146:
      v116 = *(unsigned __int8 *)v114 - *(unsigned __int8 *)v113;
      if ( *(unsigned __int8 *)v114 == *(unsigned __int8 *)v113 )
      {
        v117 = v115 - 1;
        v118 = (unsigned __int8 *)v113 + 1;
        v119 = (unsigned __int8 *)v114 + 1;
        if ( !v117 )
          goto LABEL_155;
        v116 = *v119 - *v118;
        if ( *v119 == *v118 )
        {
          v120 = v117 - 1;
          v121 = v118 + 1;
          v122 = v119 + 1;
          if ( !v120 )
            goto LABEL_155;
          v116 = *v122 - *v121;
          if ( *v122 == *v121 )
          {
            v123 = v121 + 1;
            v124 = v122 + 1;
            if ( v120 == 1 )
              goto LABEL_155;
            v116 = *v124 - *v123;
            if ( *v124 == *v123 )
              goto LABEL_155;
          }
        }
      }
      v125 = 1;
      if ( v116 <= 0 )
        v125 = -1;
LABEL_156:
      if ( v125 <= 0 )
      {
        ++v2;
        dword_576AF4 = (int)v2;
      }
    }
    if ( v83 != v2 - 1 )
      sub_4B69D0(v83, v2 - 1);
    if ( v2 == a2 )
      break;
    a1 = v2;
  }
}
// 576AEC: using guessed type int dword_576AEC;
// 576AF0: using guessed type int dword_576AF0;
// 576AF4: using guessed type int dword_576AF4;
// 576AF8: using guessed type int dword_576AF8;

//----- (004B7000) --------------------------------------------------------
_DWORD **__cdecl sub_4B7000(_DWORD *a1, _DWORD **a2, int a3, int a4)
{
  _DWORD **result; // eax
  int v5; // ebp
  unsigned int v6; // ebx
  unsigned int v7; // esi
  unsigned int v8; // ecx
  int v9; // eax
  _DWORD *v10; // edx
  _DWORD *v11; // esi
  int v12; // edi
  int v13; // ecx
  unsigned __int8 *v14; // edx
  unsigned __int8 *v15; // esi
  int v16; // ecx
  unsigned __int8 *v17; // edx
  unsigned __int8 *v18; // esi
  unsigned __int8 *v19; // edx
  unsigned __int8 *v20; // esi
  signed int v21; // ecx
  _DWORD *v22; // esi
  _DWORD *v23; // edx
  unsigned int v24; // ecx
  int v25; // edi
  int v26; // ecx
  unsigned __int8 *v27; // edx
  unsigned __int8 *v28; // esi
  int v29; // ecx
  unsigned __int8 *v30; // edx
  unsigned __int8 *v31; // esi
  unsigned __int8 *v32; // edx
  unsigned __int8 *v33; // esi
  int v34; // edx
  signed int v35; // ecx
  int v36; // [esp+10h] [ebp+Ch]

  result = 0;
  if ( !a3 )
    return a2;
  v5 = a4;
  v6 = (unsigned int)a2 + a4 * (a3 - 1);
  v7 = (unsigned int)a2;
  v36 = (int)a2;
  if ( (unsigned int)a2 <= v6 )
  {
    while ( 1 )
    {
      v8 = 16;
      v9 = v5 * ((signed int)(v6 - v7) / v5 / 2);
      v10 = *(_DWORD **)(v9 + v7);
      result = (_DWORD **)(v7 + v9);
      v11 = a1;
      do
      {
        if ( *v11 != *v10 )
          goto LABEL_8;
        v8 -= 4;
        ++v10;
        ++v11;
      }
      while ( v8 >= 4 );
      if ( !v8 )
        goto LABEL_18;
LABEL_8:
      v12 = *(unsigned __int8 *)v11 - *(unsigned __int8 *)v10;
      if ( *(unsigned __int8 *)v11 == *(unsigned __int8 *)v10 )
      {
        v13 = v8 - 1;
        v14 = (unsigned __int8 *)v10 + 1;
        v15 = (unsigned __int8 *)v11 + 1;
        if ( !v13 )
          goto LABEL_48;
        v12 = *v15 - *v14;
        if ( *v15 == *v14 )
        {
          v16 = v13 - 1;
          v17 = v14 + 1;
          v18 = v15 + 1;
          if ( !v16
            || (v12 = *v18 - *v17, *v18 == *v17)
            && ((v19 = v17 + 1, v20 = v18 + 1, v16 == 1) || (v12 = *v20 - *v19, *v20 == *v19)) )
          {
LABEL_48:
            v5 = a4;
LABEL_18:
            v21 = 0;
            goto LABEL_19;
          }
        }
      }
      v5 = a4;
      v21 = 1;
      if ( v12 <= 0 )
        v21 = -1;
LABEL_19:
      if ( v21 >= 0 )
      {
        if ( v21 <= 0 )
        {
          while ( result != a2 )
          {
            v22 = a1;
            result = (_DWORD **)((char *)result - v5);
            v23 = *result;
            v24 = 16;
            do
            {
              if ( *v22 != *v23 )
                goto LABEL_33;
              v24 -= 4;
              ++v23;
              ++v22;
            }
            while ( v24 >= 4 );
            if ( !v24 )
            {
LABEL_42:
              v35 = 0;
              goto LABEL_43;
            }
LABEL_33:
            v25 = *(unsigned __int8 *)v22 - *(unsigned __int8 *)v23;
            if ( *(unsigned __int8 *)v22 == *(unsigned __int8 *)v23 )
            {
              v26 = v24 - 1;
              v27 = (unsigned __int8 *)v23 + 1;
              v28 = (unsigned __int8 *)v22 + 1;
              if ( !v26 )
                goto LABEL_42;
              v25 = *v28 - *v27;
              if ( *v28 == *v27 )
              {
                v29 = v26 - 1;
                v30 = v27 + 1;
                v31 = v28 + 1;
                if ( !v29 )
                  goto LABEL_42;
                v25 = *v31 - *v30;
                if ( *v31 == *v30 )
                {
                  v32 = v30 + 1;
                  v33 = v31 + 1;
                  if ( v29 == 1 )
                    goto LABEL_42;
                  v34 = *v32;
                  v25 = *v33 - v34;
                  if ( *v33 == v34 )
                    goto LABEL_42;
                }
              }
            }
            v35 = 1;
            if ( v25 <= 0 )
              v35 = -1;
LABEL_43:
            if ( v35 )
            {
              result = (_DWORD **)((char *)result + v5);
              return result;
            }
          }
          return a2;
        }
        v7 = (unsigned int)result + v5;
        v36 = (int)result + v5;
      }
      else
      {
        if ( result == a2 )
          goto LABEL_25;
        v7 = v36;
        v6 = (unsigned int)result - v5;
      }
      if ( v7 > v6 )
      {
LABEL_25:
        if ( v21 > 0 )
          result = (_DWORD **)((char *)result + v5);
        return result;
      }
    }
  }
  return result;
}

//----- (004B75C0) --------------------------------------------------------
void *__cdecl sub_4B75C0(int a1, int a2, int a3, size_t NewSize)
{
  void *v4; // esi
  void *result; // eax

  v4 = realloc(0, NewSize);
  if ( sub_4BA5C0((int)v4, (int *)&NewSize, a1, a2) )
  {
    free(v4);
    result = 0;
  }
  else
  {
    result = realloc(v4, NewSize);
    *(_DWORD *)a3 = NewSize;
  }
  return result;
}

//----- (004B7620) --------------------------------------------------------
char *__thiscall sub_4B7620(const char *this, char *a2)
{
  char *v2; // eax
  char *v3; // esi
  const char *v4; // edi
  int v5; // edx
  char v6; // cl
  signed int v7; // ebp
  FILE *v8; // eax
  FILE *v9; // edi
  int v10; // ST00_4
  int v11; // eax
  char v12; // cl
  int v13; // edx
  _BYTE *v14; // eax
  int v15; // edi
  int v16; // eax
  _BYTE *v17; // edx
  char v18; // cl
  bool v19; // zf
  int *v20; // eax
  char v21; // cl
  char v22; // cl
  char *v23; // eax
  char *v24; // edx
  int v25; // ecx
  FILE *v27; // [esp+10h] [ebp-1008h]
  int v28; // [esp+14h] [ebp-1004h]
  char v29; // [esp+814h] [ebp-804h]

  v2 = a2;
  v3 = (char *)this;
  v4 = this + 16;
  v5 = this + 16 - a2;
  do
  {
    v6 = *v2;
    v2[v5] = *v2;
    ++v2;
  }
  while ( v6 );
  *(_DWORD *)v3 = 0;
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 2) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v3[528] = 0;
  v7 = -1;
  v8 = fopen(v4, "rt");
  v9 = v8;
  v27 = v8;
  if ( v8 )
  {
    if ( !feof(v8) )
    {
      do
      {
        LOBYTE(v28) = 0;
        sub_4C352E((int)&v28, 2048, v9);
        if ( (_BYTE)v28 == 91 )
        {
          v7 = *((_DWORD *)v3 + 3);
          v10 = *((_DWORD *)v3 + 2);
          *((_DWORD *)v3 + 3) = v7 + 1;
          v11 = sub_48C990(v10, 72 * (v7 + 1), 4096);
          v12 = BYTE1(v28);
          v13 = 72 * v7;
          *((_DWORD *)v3 + 2) = v11;
          v14 = (_BYTE *)(72 * v7 + v11);
          if ( v12 )
          {
            v15 = (char *)&v28 + 1 - v14;
            do
            {
              if ( v12 == 93 )
                break;
              *v14 = v12;
              v12 = (v14++)[v15 + 1];
            }
            while ( v12 );
            v9 = v27;
          }
          *v14 = 0;
          *(_DWORD *)(*((_DWORD *)v3 + 2) + v13 + 68) = *((_DWORD *)v3 + 1);
          *(_DWORD *)(*((_DWORD *)v3 + 2) + v13 + 64) = 0;
        }
        else if ( isalpha((char)v28) && v7 != -1 )
        {
          v16 = sub_48C990(*(_DWORD *)v3, 72 * (*((_DWORD *)v3 + 1) + 1), 4096);
          v17 = (_BYTE *)(v16 + 72 * *((_DWORD *)v3 + 1));
          v18 = v28;
          v19 = (_BYTE)v28 == 0;
          *(_DWORD *)v3 = v16;
          v20 = &v28;
          if ( !v19 )
          {
            do
            {
              if ( v18 == 61 )
                break;
              if ( v18 == 32 )
                break;
              v20 = (int *)((char *)v20 + 1);
              *v17 = v18;
              v18 = *(_BYTE *)v20;
              ++v17;
            }
            while ( *(_BYTE *)v20 );
          }
          *v17 = 0;
          v21 = *(_BYTE *)v20;
          if ( *(_BYTE *)v20 )
          {
            while ( v21 != 61 )
            {
              v21 = *((_BYTE *)v20 + 1);
              v20 = (int *)((char *)v20 + 1);
              if ( !v21 )
                goto LABEL_26;
            }
            if ( *(_BYTE *)v20 )
            {
              v22 = *((_BYTE *)v20 + 1);
              v23 = (char *)v20 + 1;
              v24 = &v29;
              if ( v22 >= 32 )
              {
                do
                {
                  ++v23;
                  *v24 = v22;
                  v22 = *v23;
                  ++v24;
                }
                while ( *v23 >= 32 );
              }
              *v24 = 0;
              sub_48D0B0(&v29);
              *(_DWORD *)(*(_DWORD *)v3 + 72 * *((_DWORD *)v3 + 1) + 64) = sub_40284C(&v29);
              v25 = *((_DWORD *)v3 + 2);
              ++*((_DWORD *)v3 + 1);
              ++*(_DWORD *)(v25 + 72 * v7 + 64);
            }
          }
        }
LABEL_26:
        ;
      }
      while ( !feof(v9) );
    }
    fclose(v9);
  }
  return v3;
}
// 40284C: using guessed type _DWORD __cdecl sub_40284C(_DWORD);

//----- (004B7860) --------------------------------------------------------
int __thiscall sub_4B7860(int *this)
{
  int *v1; // esi
  int v2; // ebx
  int v3; // edi

  v1 = this;
  v2 = 0;
  if ( this[1] > 0 )
  {
    v3 = 0;
    do
    {
      if ( *(_DWORD *)(v3 + *v1 + 64) )
      {
        free(*(void **)(v3 + *v1 + 64));
        *(_DWORD *)(v3 + *v1 + 64) = 0;
      }
      ++v2;
      v3 += 72;
    }
    while ( v2 < v1[1] );
  }
  sub_48C990(*v1, 0, 1);
  return sub_48C990(v1[2], 0, 1);
}

//----- (004B78C0) --------------------------------------------------------
FILE *__thiscall sub_4B78C0(_BYTE *this, FILE *File)
{
  FILE *result; // eax
  int v3; // ebp
  _BYTE *v4; // esi
  int v5; // edx
  char v6; // cl
  FILE *v7; // ebx
  int v8; // ecx
  int v9; // edx
  int v10; // edi
  int v11; // ebx
  int i; // [esp+8h] [ebp-4h]
  FILE *Filea; // [esp+10h] [ebp+4h]

  result = File;
  v3 = 0;
  v4 = this;
  if ( File )
  {
    v5 = this + 16 - (_BYTE *)File;
    do
    {
      v6 = (char)result->_ptr;
      *((_BYTE *)&result->_ptr + v5) = result->_ptr;
      result = (FILE *)((char *)result + 1);
    }
    while ( v6 );
  }
  else if ( !this[528] )
  {
    return result;
  }
  result = fopen(v4 + 16, "wt");
  v7 = result;
  Filea = result;
  if ( result )
  {
    for ( i = 0; i < *((_DWORD *)v4 + 3); ++i )
    {
      v8 = *((_DWORD *)v4 + 2);
      if ( *(_DWORD *)(v8 + v3 + 64) > 0 )
      {
        sub_4C3361(v7, (int)"[%s]\n", v8 + v3);
        v9 = *((_DWORD *)v4 + 2);
        v10 = 0;
        if ( *(_DWORD *)(v9 + v3 + 64) > 0 )
        {
          v11 = 72 * *(_DWORD *)(v9 + v3 + 68);
          do
          {
            sub_4C3361(Filea, (int)"%s=%s\n", v11 + *(_DWORD *)v4, *(_DWORD *)(*(_DWORD *)v4 + v11 + 64));
            ++v10;
            v11 += 72;
          }
          while ( v10 < *(_DWORD *)(*((_DWORD *)v4 + 2) + v3 + 64) );
          v7 = Filea;
        }
        sub_4C3361(v7, (int)"\n");
      }
      v3 += 72;
    }
    result = (FILE *)fclose(v7);
  }
  return result;
}

//----- (004B79C0) --------------------------------------------------------
int __thiscall sub_4B79C0(int *this, char *Str2, int a3, int a4)
{
  int *v4; // esi
  int v5; // ebx
  bool v6; // zf
  bool v7; // sf
  int v8; // edi
  int v9; // eax
  int v10; // edx
  char *v11; // ecx
  _BYTE *v12; // edx
  char v13; // al
  int v14; // eax
  int v15; // eax
  char *v16; // edx
  int v17; // ecx
  _BYTE *v18; // eax
  char v19; // cl
  char *v20; // edi
  _BYTE *v21; // eax
  _BYTE *v22; // edx
  char v23; // cl
  int result; // eax
  int v25; // eax
  int v26; // ebx
  int v27; // ebp
  int v28; // edi
  int v29; // eax
  int v30; // eax
  int v31; // edi
  char *v32; // ecx
  _BYTE *v33; // eax
  char v34; // dl
  char *v35; // ebx
  _BYTE *v36; // eax
  _BYTE *v37; // edx
  char v38; // cl
  int v39; // edx
  int v40; // edx
  int v41; // ecx
  unsigned __int8 v42; // of
  _DWORD *v43; // ecx
  int v44; // ebp
  char *v45; // edi
  _BYTE *v46; // eax
  _BYTE *v47; // edx
  char v48; // cl
  int v49; // [esp+14h] [ebp-1010h]
  int v50; // [esp+18h] [ebp-100Ch]
  int v51; // [esp+1Ch] [ebp-1008h]
  char v52; // [esp+20h] [ebp-1004h]

  v4 = this;
  strcpy(&v52, (const char *)a4);
  sub_48D0B0(&v52);
  v5 = 0;
  v6 = v4[3] == 0;
  v7 = v4[3] < 0;
  *((_BYTE *)v4 + 528) = 1;
  if ( v7 || v6 )
  {
LABEL_5:
    v9 = sub_48C990(v4[2], 72 * (v4[3] + 1), 4096);
    v10 = 9 * v4[3];
    v4[2] = v9;
    v11 = Str2;
    v12 = (_BYTE *)(v9 + 8 * v10);
    do
    {
      v13 = *v11;
      *v12++ = *v11++;
    }
    while ( v13 );
    *(_DWORD *)(v4[2] + 72 * v4[3] + 68) = v4[1];
    *(_DWORD *)(v4[2] + 72 * v4[3] + 64) = 1;
    v14 = v4[1];
    ++v4[3];
    v15 = sub_48C990(*v4, 72 * (v14 + 1), 4096);
    v16 = (char *)a3;
    v17 = 9 * v4[1];
    *v4 = v15;
    v18 = (_BYTE *)(v15 + 8 * v17);
    do
    {
      v19 = *v16;
      *v18++ = *v16++;
    }
    while ( v19 );
    v20 = &v52;
    v21 = malloc(strlen(&v52) + 1);
    v22 = v21;
    do
    {
      v23 = *v20;
      *v21++ = *v20++;
    }
    while ( v23 );
    *(_DWORD *)(*v4 + 72 * v4[1] + 64) = v22;
    result = *v4;
    *(_BYTE *)(*v4 + 72 * v4[1]++ + 68) = 1;
  }
  else
  {
    v8 = 0;
    while ( _stricmp((const char *)(v8 + v4[2]), Str2) )
    {
      ++v5;
      v8 += 72;
      if ( v5 >= v4[3] )
        goto LABEL_5;
    }
    v25 = v4[2];
    v50 = v5;
    v26 = 72 * v5;
    v27 = *(_DWORD *)(v25 + v26 + 68);
    v28 = 0;
    v51 = v26;
    if ( *(_DWORD *)(v26 + v25 + 64) <= 0 )
    {
LABEL_18:
      v30 = sub_48C990(*v4, 72 * (v4[1] + 1), 4096);
      *v4 = v30;
      v31 = 72 * v27;
      memcpy_0((void *)(72 * v27 + v30 + 72), (const void *)(72 * v27 + v30), 72 * (v4[1] - v27));
      v32 = (char *)a3;
      v33 = (_BYTE *)(72 * v27 + *v4);
      do
      {
        v34 = *v32;
        *v33++ = *v32++;
      }
      while ( v34 );
      v35 = &v52;
      v36 = malloc(strlen(&v52) + 1);
      v37 = v36;
      do
      {
        v38 = *v35;
        *v36++ = *v35++;
      }
      while ( v38 );
      *(_DWORD *)(v31 + *v4 + 64) = v37;
      *(_BYTE *)(v31 + *v4 + 68) = 1;
      v39 = v4[2];
      ++v4[1];
      ++*(_DWORD *)(v51 + v39 + 64);
      result = 0;
      if ( v4[3] > 0 )
      {
        v40 = 0;
        do
        {
          v41 = v4[2];
          v42 = __OFSUB__(*(_DWORD *)(v40 + v41 + 68), v27);
          v7 = *(_DWORD *)(v40 + v41 + 68) - v27 < 0;
          v43 = (_DWORD *)(v40 + v41 + 68);
          if ( !(v7 ^ v42) && result != v50 )
            ++*v43;
          ++result;
          v40 += 72;
        }
        while ( result < v4[3] );
      }
    }
    else
    {
      v29 = 72 * v27;
      v49 = 72 * v27;
      while ( _stricmp((const char *)(v29 + *v4), (const char *)a3) )
      {
        v49 += 72;
        ++v28;
        ++v27;
        if ( v28 >= *(_DWORD *)(v26 + v4[2] + 64) )
          goto LABEL_18;
        v29 = v49;
      }
      v44 = 72 * v27;
      if ( *(_DWORD *)(*v4 + v44 + 64) )
      {
        free(*(void **)(*v4 + v44 + 64));
        *(_DWORD *)(*v4 + v44 + 64) = 0;
      }
      v45 = &v52;
      v46 = malloc(strlen(&v52) + 1);
      v47 = v46;
      do
      {
        v48 = *v45;
        *v46++ = *v45++;
      }
      while ( v48 );
      result = *v4;
      *(_DWORD *)(*v4 + v44 + 64) = v47;
      *(_BYTE *)(*v4 + v44 + 68) = 1;
    }
  }
  return result;
}

//----- (004B7DD0) --------------------------------------------------------
void __thiscall sub_4B7DD0(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // edi
  int v3; // ebp
  int v4; // edx
  bool v5; // zf
  bool v6; // sf
  int v7; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // [esp+8h] [ebp-4h]

  v1 = this;
  v2 = 0;
  if ( this[1] > 0 )
  {
    v3 = 0;
    do
    {
      if ( !*(_BYTE *)(*v1 + v3 + 68) )
      {
        v4 = 0;
        v5 = v1[3] == 0;
        v6 = v1[3] < 0;
        *((_BYTE *)v1 + 528) = 1;
        v10 = 0;
        if ( !v6 && !v5 )
        {
          while ( 1 )
          {
            v7 = v1[2] + v4;
            v8 = *(_DWORD *)(v7 + 68);
            if ( v8 > v2 )
              break;
            if ( v8 + *(_DWORD *)(v7 + 64) <= v2 )
            {
              if ( v8 > v2 )
                break;
            }
            else
            {
              --*(_DWORD *)(v7 + 64);
            }
LABEL_10:
            v4 += 72;
            if ( ++v10 >= v1[3] )
              goto LABEL_11;
          }
          --*(_DWORD *)(v7 + 68);
          goto LABEL_10;
        }
LABEL_11:
        if ( *(_DWORD *)(*v1 + v3 + 64) )
        {
          free(*(void **)(*v1 + v3 + 64));
          *(_DWORD *)(*v1 + v3 + 64) = 0;
        }
        v9 = *v1;
        memcpy_0((void *)(v3 + v9), (const void *)(v3 + v9 + 72), 72 * (--v1[1] - v2--));
        v3 -= 72;
      }
      ++v2;
      v3 += 72;
    }
    while ( v2 < v1[1] );
  }
}

//----- (004B7F30) --------------------------------------------------------
char *__thiscall sub_4B7F30(int *this, char *Str2, char *a3, char *Source, char *Dest, size_t Count, char a7)
{
  int v7; // ebx
  int *v8; // esi
  int v9; // edx
  int v10; // ebp
  int v11; // edi
  int v12; // ebx
  bool v13; // sf
  unsigned __int8 v14; // of
  size_t v15; // edi
  char *v17; // [esp-8h] [ebp-20h]
  size_t v18; // [esp-4h] [ebp-1Ch]
  int v19; // [esp+10h] [ebp-8h]
  int v20; // [esp+14h] [ebp-4h]

  v7 = 0;
  v8 = this;
  v20 = 0;
  if ( this[3] <= 0 )
  {
LABEL_10:
    if ( a7 )
      sub_4B79C0(v8, Str2, (int)a3, (int)Source);
    v15 = Count;
    v18 = Count;
    v17 = Source;
  }
  else
  {
    v19 = 0;
    while ( 1 )
    {
      if ( !_stricmp((const char *)(v7 + v8[2]), Str2) )
      {
        v9 = v8[2];
        v10 = *(_DWORD *)(v9 + v7 + 68);
        v11 = 0;
        if ( *(_DWORD *)(v9 + v7 + 64) > 0 )
          break;
      }
LABEL_9:
      v7 += 72;
      v14 = __OFSUB__(v20 + 1, v8[3]);
      v13 = v20++ + 1 - v8[3] < 0;
      v19 = v7;
      if ( !(v13 ^ v14) )
        goto LABEL_10;
    }
    v12 = 72 * v10;
    while ( _stricmp((const char *)(v12 + *v8), a3) )
    {
      ++v11;
      ++v10;
      v12 += 72;
      if ( v11 >= *(_DWORD *)(v8[2] + v19 + 64) )
      {
        v7 = v19;
        goto LABEL_9;
      }
    }
    v15 = Count;
    *(_BYTE *)(72 * v10 + *v8 + 68) = 1;
    v18 = Count;
    v17 = *(char **)(72 * v10 + *v8 + 64);
  }
  strncpy(Dest, v17, v18);
  Dest[v15 - 1] = 0;
  return Dest;
}

//----- (004B80F0) --------------------------------------------------------
int __thiscall sub_4B80F0(int *this, char *a2, const char *a3, int a4, char a5)
{
  int *v5; // esi
  int v6; // ebx
  int v7; // ecx
  int v8; // ebp
  int v9; // edi
  int v10; // ebx
  bool v11; // sf
  unsigned __int8 v12; // of
  int result; // eax
  int v14; // [esp+10h] [ebp-24h]
  int v15; // [esp+1Ch] [ebp-18h]
  char Dest; // [esp+20h] [ebp-14h]

  v5 = this;
  v6 = 0;
  v15 = 0;
  if ( this[3] <= 0 )
  {
LABEL_10:
    if ( a5 )
    {
      sprintf(&Dest, "%d", a4);
      sub_4B79C0(v5, a2, (int)a3, (int)&Dest);
    }
    result = a4;
  }
  else
  {
    v14 = 0;
    while ( 1 )
    {
      if ( !_stricmp((const char *)(v6 + v5[2]), a2) )
      {
        v7 = v5[2];
        v8 = *(_DWORD *)(v6 + v7 + 68);
        v9 = 0;
        if ( *(_DWORD *)(v6 + v7 + 64) > 0 )
          break;
      }
LABEL_9:
      v6 += 72;
      v12 = __OFSUB__(v15 + 1, v5[3]);
      v11 = v15++ + 1 - v5[3] < 0;
      v14 = v6;
      if ( !(v11 ^ v12) )
        goto LABEL_10;
    }
    v10 = 72 * v8;
    while ( _stricmp((const char *)(v10 + *v5), a3) )
    {
      ++v9;
      ++v8;
      v10 += 72;
      if ( v9 >= *(_DWORD *)(v14 + v5[2] + 64) )
      {
        v6 = v14;
        goto LABEL_9;
      }
    }
    *(_BYTE *)(*v5 + 72 * v8 + 68) = 1;
    result = j__atol(*(const char **)(*v5 + 72 * v8 + 64));
  }
  return result;
}

//----- (004B8220) --------------------------------------------------------
void __thiscall sub_4B8220(int *this, int a2, int a3, double a4, char a5)
{
  int *v5; // esi
  int v6; // ebx
  int v7; // ecx
  int v8; // ebp
  int v9; // edi
  int v10; // ebx
  bool v11; // sf
  unsigned __int8 v12; // of
  int v13; // [esp+18h] [ebp-34h]
  int v14; // [esp+24h] [ebp-28h]
  char Dest; // [esp+28h] [ebp-24h]

  v5 = this;
  v6 = 0;
  v14 = 0;
  if ( this[3] <= 0 )
  {
LABEL_10:
    if ( a5 )
    {
      sprintf(&Dest, "%f", a4);
      sub_4B79C0(v5, (char *)a2, a3, (int)&Dest);
    }
  }
  else
  {
    v13 = 0;
    while ( 1 )
    {
      if ( !_stricmp((const char *)(v6 + v5[2]), (const char *)a2) )
      {
        v7 = v5[2];
        v8 = *(_DWORD *)(v6 + v7 + 68);
        v9 = 0;
        if ( *(_DWORD *)(v6 + v7 + 64) > 0 )
          break;
      }
LABEL_9:
      v6 += 72;
      v12 = __OFSUB__(v14 + 1, v5[3]);
      v11 = v14++ + 1 - v5[3] < 0;
      v13 = v6;
      if ( !(v11 ^ v12) )
        goto LABEL_10;
    }
    v10 = 72 * v8;
    while ( _stricmp((const char *)(v10 + *v5), (const char *)a3) )
    {
      ++v9;
      ++v8;
      v10 += 72;
      if ( v9 >= *(_DWORD *)(v13 + v5[2] + 64) )
      {
        v6 = v13;
        goto LABEL_9;
      }
    }
    *(_BYTE *)(*v5 + 72 * v8 + 68) = 1;
    sub_4C6A07(*(char **)(*v5 + 72 * v8 + 64));
  }
}

//----- (004B8360) --------------------------------------------------------
int __thiscall sub_4B8360(int *this, int a2, char *Str2, char *a4, char *Source, char a6)
{
  int v6; // eax
  char Dest; // [esp+Ch] [ebp-CCh]

  *(_DWORD *)a2 = 0;
  sub_4B7F30(this, Str2, a4, Source, &Dest, 0xC8u, a6);
  v6 = sub_48CBB0(&Dest);
  *(_BYTE *)(a2 + 2) = BYTE2(v6);
  *(_WORD *)a2 = v6;
  return a2;
}

//----- (004B8440) --------------------------------------------------------
int __thiscall sub_4B8440(void **this)
{
  void **v1; // esi
  int result; // eax
  FILE *v3; // esi

  v1 = this;
  if ( this[131] )
  {
    free(this[131]);
    v1[131] = 0;
  }
  result = (int)v1[130];
  if ( result )
    result = fclose((FILE *)v1[130]);
  v3 = (FILE *)v1[129];
  if ( v3 )
    result = fclose(v3);
  return result;
}

//----- (004B8510) --------------------------------------------------------
int __thiscall sub_4B8510(_DWORD *this, char *Str1)
{
  _DWORD *v2; // esi
  int v3; // edi
  int v4; // ebx
  char Dest; // [esp+10h] [ebp-84h]

  v2 = this;
  v3 = 0;
  if ( this[132] <= 0 )
  {
LABEL_5:
    if ( !v2[128] )
      return 0;
    sprintf(&Dest, "%s\\%s", v2 + 64, Str1);
    if ( _access(&Dest, 0) )
      return 0;
  }
  else
  {
    v4 = 0;
    while ( _stricmp(Str1, (const char *)(v4 + v2[131])) )
    {
      ++v3;
      v4 += 40;
      if ( v3 >= v2[132] )
        goto LABEL_5;
    }
  }
  return 1;
}

//----- (004B85C0) --------------------------------------------------------
int __thiscall sub_4B85C0(_DWORD *this, char *Str1, int a3)
{
  _DWORD *v3; // ebx
  _DWORD *v4; // esi
  FILE *v5; // eax
  int v6; // edi
  FILE *v7; // eax
  int v8; // eax
  int result; // eax
  int v10; // ebx
  int v11; // edi
  char Dest; // [esp+14h] [ebp-84h]

  v3 = (_DWORD *)a3;
  v4 = this;
  v5 = (FILE *)this[130];
  v6 = 0;
  if ( v5 )
  {
    fclose(v5);
    v4[130] = 0;
  }
  if ( !v4[128] || (sprintf(&Dest, "%s\\%s", v4 + 64, Str1), _access(&Dest, 0)) )
  {
    if ( v4[132] <= 0 )
    {
LABEL_11:
      *v3 = 0;
      result = 0;
    }
    else
    {
      v10 = 0;
      while ( _stricmp(Str1, (const char *)(v10 + v4[131])) )
      {
        ++v6;
        v10 += 40;
        if ( v6 >= v4[132] )
        {
          v3 = (_DWORD *)a3;
          goto LABEL_11;
        }
      }
      v11 = 40 * v6;
      fseek((FILE *)v4[129], *(_DWORD *)(v4[131] + v11 + 32), 0);
      *(_DWORD *)a3 = *(_DWORD *)(v4[131] + v11 + 36);
      result = v4[129];
    }
  }
  else
  {
    v7 = fopen(&Dest, "rb");
    v4[130] = v7;
    v8 = _fileno(v7);
    *(_DWORD *)a3 = _filelength(v8);
    result = v4[130];
  }
  return result;
}

//----- (004B8700) --------------------------------------------------------
void __thiscall sub_4B8700(char *Filename)
{
  char *v1; // esi
  FILE *v2; // eax
  size_t v3; // ST08_4
  void *v4; // eax
  size_t v5; // edx
  bool v6; // zf
  char *v7; // edi
  int v8; // ebp
  int v9; // ebx
  _DWORD *v10; // edi
  char *v11; // edx
  _BYTE *v12; // eax
  char v13; // cl
  char *v14; // [esp+4h] [ebp-Ch]
  int DstBuf; // [esp+8h] [ebp-8h]
  int v16; // [esp+Ch] [ebp-4h]

  v1 = Filename;
  v2 = fopen(Filename, "rb");
  *((_DWORD *)v1 + 129) = v2;
  if ( v2 )
  {
    fread(&DstBuf, 1u, 8u, v2);
    v3 = 40 * v16;
    *((_DWORD *)v1 + 132) = v16;
    v4 = malloc(v3);
    v5 = *((_DWORD *)v1 + 132);
    v6 = DstBuf == 1;
    *((_DWORD *)v1 + 131) = v4;
    if ( v6 )
    {
      v7 = (char *)malloc(22 * v5);
      v14 = v7;
      fread(v7, *((_DWORD *)v1 + 132), 0x16u, *((FILE **)v1 + 129));
      v8 = 0;
      if ( *((_DWORD *)v1 + 132) > 0 )
      {
        v9 = 0;
        v10 = v7 + 14;
        do
        {
          *(_DWORD *)(v9 + *((_DWORD *)v1 + 131) + 36) = v10[1];
          *(_DWORD *)(v9 + *((_DWORD *)v1 + 131) + 32) = *v10;
          v11 = (char *)v10 - 14;
          v12 = (_BYTE *)(v9 + *((_DWORD *)v1 + 131));
          do
          {
            v13 = *v11;
            *v12++ = *v11++;
          }
          while ( v13 );
          ++v8;
          v10 = (_DWORD *)((char *)v10 + 22);
          v9 += 40;
        }
        while ( v8 < *((_DWORD *)v1 + 132) );
        v7 = v14;
      }
      if ( v7 )
        free(v7);
    }
    else
    {
      fread(v4, v5, 0x28u, *((FILE **)v1 + 129));
    }
  }
}

//----- (004B8820) --------------------------------------------------------
char *__thiscall sub_4B8820(char *Filename, int a2, int a3)
{
  char *v3; // esi
  unsigned int v4; // eax
  char *v5; // eax
  char v6; // cl

  v3 = strcpy(Filename, (const char *)a2);
  if ( !strrchr(v3, 46) )
  {
    v4 = (unsigned int)&v3[strlen(v3)];
    *(_DWORD *)v4 = 1869373998;
    *(_BYTE *)(v4 + 4) = 0;
  }
  v5 = v3;
  do
  {
    v6 = *v5;
    v5[256] = *v5;
    ++v5;
  }
  while ( v6 );
  *strrchr(v3 + 256, 46) = 0;
  *((_DWORD *)v3 + 128) = a3;
  *((_DWORD *)v3 + 131) = 0;
  *((_DWORD *)v3 + 132) = 0;
  *((_DWORD *)v3 + 129) = 0;
  *((_DWORD *)v3 + 130) = 0;
  sub_4B8700(v3);
  return v3;
}

//----- (004B88C0) --------------------------------------------------------
FILE *__thiscall sub_4B88C0(_DWORD *this, char *Str1, int a3)
{
  FILE *result; // eax
  FILE *v4; // ebx
  FILE *v5; // esi

  result = (FILE *)sub_4B85C0(this, Str1, a3);
  v4 = result;
  if ( result )
  {
    v5 = (FILE *)malloc(*(_DWORD *)a3);
    fread(v5, 1u, *(_DWORD *)a3, v4);
    result = v5;
  }
  return result;
}

//----- (004B8900) --------------------------------------------------------
int __cdecl sub_4B8900(int DstBuf, int a2)
{
  int v2; // ecx
  int result; // eax
  int (__cdecl *v4)(int, int *, signed int); // eax
  size_t v5; // eax

  v2 = *(_DWORD *)(DstBuf + 56);
  if ( *(_BYTE *)v2 & 8 )
  {
    v4 = *(int (__cdecl **)(int, int *, signed int))(v2 + 60);
    if ( v4 )
      v5 = v4(DstBuf, &DstBuf, 1);
    else
      v5 = fread(&DstBuf, 1u, 1u, *(FILE **)(v2 + 56));
    if ( v5 == 1 )
    {
      switch ( (_BYTE)DstBuf )
      {
        case 0x21:
          *(_DWORD *)a2 = 3;
          result = 1;
          break;
        case 0x2C:
          *(_DWORD *)a2 = 2;
          result = 1;
          break;
        case 0x3B:
          *(_DWORD *)a2 = 4;
          result = 1;
          break;
        default:
          *(_DWORD *)a2 = 0;
          dword_576AFC = 107;
          result = 0;
          break;
      }
    }
    else
    {
      dword_576AFC = 102;
      result = 0;
    }
  }
  else
  {
    dword_576AFC = 111;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B89B0) --------------------------------------------------------
int __cdecl sub_4B89B0(int DstBuf, int a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // eax
  size_t v5; // eax
  char v6; // cl
  _DWORD *v7; // edx
  int v8; // ecx
  int (__cdecl *v9)(int, void *, _DWORD); // eax
  void *v10; // edx
  size_t v11; // eax

  v2 = DstBuf;
  v3 = *(_DWORD *)(DstBuf + 56);
  v4 = *(_DWORD *)(DstBuf + 56);
  if ( *(_DWORD *)(v3 + 60) )
    v5 = (*(int (__cdecl **)(int, int *, signed int))(v4 + 60))(DstBuf, &DstBuf, 1);
  else
    v5 = fread(&DstBuf, 1u, 1u, *(FILE **)(v4 + 56));
  if ( v5 != 1 )
  {
LABEL_10:
    dword_576AFC = 102;
    return 0;
  }
  v6 = DstBuf;
  v7 = (_DWORD *)a2;
  if ( (_BYTE)DstBuf )
  {
    *(_DWORD *)a2 = v3 + 68;
    *(_BYTE *)(v3 + 68) = v6;
    v8 = *(_DWORD *)(v2 + 56);
    v9 = *(int (__cdecl **)(int, void *, _DWORD))(v8 + 60);
    v10 = (void *)(*v7 + 1);
    if ( v9 )
      v11 = v9(v2, v10, (unsigned __int8)DstBuf);
    else
      v11 = fread(v10, 1u, (unsigned __int8)DstBuf, *(FILE **)(v8 + 56));
    if ( v11 != (unsigned __int8)DstBuf )
      goto LABEL_10;
  }
  else
  {
    *(_DWORD *)a2 = 0;
  }
  return 1;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8A60) --------------------------------------------------------
int __cdecl sub_4B8A60(void *Memory)
{
  int result; // eax
  _DWORD *v2; // edi
  void *v3; // eax
  FILE *v4; // ebx

  if ( !Memory )
    return 0;
  v2 = (_DWORD *)*((_DWORD *)Memory + 14);
  if ( *(_BYTE *)v2 & 8 )
  {
    v3 = (void *)*((_DWORD *)Memory + 11);
    v4 = (FILE *)v2[14];
    if ( v3 )
      sub_4B9FC0(v3);
    if ( *((_DWORD *)Memory + 4) )
      sub_4B9FC0(*((void **)Memory + 4));
    free(v2);
    if ( *((_DWORD *)Memory + 12) )
      sub_4BA450(Memory);
    free(Memory);
    if ( v4 && fclose(v4) )
    {
      dword_576AFC = 110;
      result = 0;
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    dword_576AFC = 111;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8B00) --------------------------------------------------------
signed int __usercall sub_4B8B00@<eax>(int a1@<edx>, int a2@<ecx>, _DWORD *a3)
{
  int v3; // eax
  int (__cdecl *v4)(int, int *, signed int); // ecx
  size_t v5; // eax
  signed int result; // eax
  int DstBuf; // [esp+0h] [ebp-4h]

  DstBuf = a2;
  v3 = *(_DWORD *)(a1 + 56);
  v4 = *(int (__cdecl **)(int, int *, signed int))(v3 + 60);
  if ( v4 )
    v5 = v4(a1, &DstBuf, 2);
  else
    v5 = fread(&DstBuf, 1u, 2u, *(FILE **)(v3 + 56));
  if ( v5 == 2 )
  {
    *a3 = (unsigned __int8)DstBuf + (BYTE1(DstBuf) << 8);
    result = 1;
  }
  else
  {
    dword_576AFC = 102;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8B60) --------------------------------------------------------
int __cdecl sub_4B8B60(int DstBuf, int a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // eax
  size_t v5; // eax
  char v6; // cl
  _DWORD *v7; // edx
  int v8; // ecx
  int (__cdecl *v9)(int, void *, _DWORD); // eax
  void *v10; // edx
  size_t v11; // eax

  v2 = DstBuf;
  v3 = *(_DWORD *)(DstBuf + 56);
  v4 = *(_DWORD *)(DstBuf + 56);
  if ( *(_DWORD *)(v3 + 60) )
    v5 = (*(int (__cdecl **)(int, int *, signed int))(v4 + 60))(DstBuf, &DstBuf, 1);
  else
    v5 = fread(&DstBuf, 1u, 1u, *(FILE **)(v4 + 56));
  if ( v5 != 1 )
  {
LABEL_10:
    dword_576AFC = 102;
    return 0;
  }
  v6 = DstBuf;
  v7 = (_DWORD *)a2;
  if ( (_BYTE)DstBuf )
  {
    *(_DWORD *)a2 = v3 + 68;
    *(_BYTE *)(v3 + 68) = v6;
    v8 = *(_DWORD *)(v2 + 56);
    v9 = *(int (__cdecl **)(int, void *, _DWORD))(v8 + 60);
    v10 = (void *)(*v7 + 1);
    if ( v9 )
      v11 = v9(v2, v10, (unsigned __int8)DstBuf);
    else
      v11 = fread(v10, 1u, (unsigned __int8)DstBuf, *(FILE **)(v8 + 56));
    if ( v11 != (unsigned __int8)DstBuf )
      goto LABEL_10;
  }
  else
  {
    *(_DWORD *)a2 = 0;
    *(_BYTE *)(v3 + 68) = 0;
    *(_DWORD *)(v3 + 52) = 0;
  }
  return 1;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8C20) --------------------------------------------------------
signed int __usercall sub_4B8C20@<eax>(int a1@<eax>)
{
  int v1; // esi
  int v2; // ecx
  int v3; // ecx
  signed int v4; // eax
  unsigned __int8 DstBuf; // [esp+Fh] [ebp-1h]

  v1 = *(_DWORD *)(a1 + 56);
  v2 = *(_DWORD *)(a1 + 56);
  if ( *(_DWORD *)(v1 + 60) )
    (*(void (__cdecl **)(int, unsigned __int8 *, signed int))(v2 + 60))(a1, &DstBuf, 1);
  else
    fread(&DstBuf, 1u, 1u, *(FILE **)(v2 + 56));
  v3 = DstBuf;
  v4 = 1 << DstBuf;
  *(_DWORD *)(v1 + 8) = DstBuf;
  ++v3;
  *(_DWORD *)(v1 + 12) = v4++;
  *(_DWORD *)(v1 + 16) = v4;
  *(_DWORD *)(v1 + 20) = v4 + 1;
  *(_DWORD *)(v1 + 24) = v3;
  *(_BYTE *)(v1 + 68) = 0;
  *(_DWORD *)(v1 + 40) = 0;
  *(_DWORD *)(v1 + 32) = 4098;
  *(_DWORD *)(v1 + 44) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 28) = 1 << v3;
  memset32((void *)(v1 + 8516), 4098, 0x1000u);
  return 1;
}

//----- (004B8CB0) --------------------------------------------------------
int __usercall sub_4B8CB0@<eax>(int result@<eax>, int a2@<edx>, int a3@<esi>)
{
  signed int i; // ecx
  signed int v4; // edi

  for ( i = 0; result > a2; result = *(_DWORD *)(a3 + 4 * result) )
  {
    v4 = i++;
    if ( v4 > 4095 )
      break;
  }
  return result;
}

//----- (004B8CE0) --------------------------------------------------------
signed int __usercall sub_4B8CE0@<eax>(int a1@<ebx>, unsigned __int8 *a2@<esi>, _BYTE *a3)
{
  int v3; // ecx
  int (__cdecl *v4)(int, unsigned __int8 *, signed int); // eax
  size_t v5; // eax
  signed int result; // eax
  int v7; // eax
  int (__cdecl *v8)(int, unsigned __int8 *, _DWORD); // ecx
  _BYTE *v9; // edi
  size_t v10; // eax

  if ( *a2 )
  {
    *a3 = a2[a2[1]++];
    --*a2;
    result = 1;
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 56);
    v4 = *(int (__cdecl **)(int, unsigned __int8 *, signed int))(v3 + 60);
    if ( v4 )
      v5 = v4(a1, a2, 1);
    else
      v5 = fread(a2, 1u, 1u, *(FILE **)(v3 + 56));
    if ( v5 != 1
      || ((v7 = *(_DWORD *)(a1 + 56), v8 = *(int (__cdecl **)(int, unsigned __int8 *, _DWORD))(v7 + 60),
                                      v9 = a2 + 1,
                                      !v8) ? (v10 = fread(a2 + 1, 1u, *a2, *(FILE **)(v7 + 56))) : (v10 = v8(a1, a2 + 1, *a2)),
          v10 != *a2) )
    {
      dword_576AFC = 102;
      result = 0;
    }
    else
    {
      *a3 = *v9;
      --*a2;
      *v9 = 2;
      result = 1;
    }
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8D90) --------------------------------------------------------
int __cdecl sub_4B8D90(int DstBuf)
{
  int v1; // ecx
  _DWORD *v2; // esi
  int result; // eax
  int v4; // eax
  int (__cdecl *v5)(_DWORD *, int *, signed int); // ecx
  size_t v6; // eax
  char v7; // dl
  char v8; // al
  char v9; // al
  size_t *v10; // eax
  int v11; // ebx
  int v12; // edi
  int v13; // eax
  int (__cdecl *v14)(_DWORD *, int *, signed int); // ecx
  int v15; // eax

  v2 = (_DWORD *)DstBuf;
  if ( !(**(_BYTE **)(DstBuf + 56) & 8) )
  {
    dword_576AFC = 111;
    return 0;
  }
  if ( !sub_4B8B00(DstBuf, v1, (_DWORD *)DstBuf) || !sub_4B8B00((int)v2, (int)(v2 + 1), v2 + 1) )
    return 0;
  v4 = v2[14];
  v5 = *(int (__cdecl **)(_DWORD *, int *, signed int))(v4 + 60);
  if ( v5 )
    v6 = v5(v2, &DstBuf, 3);
  else
    v6 = fread(&DstBuf, 1u, 3u, *(FILE **)(v4 + 56));
  if ( v6 == 3 )
  {
    v7 = DstBuf;
    v8 = DstBuf;
    v2[2] = (((unsigned int)(unsigned __int8)DstBuf >> 4) & 7) + 1;
    v9 = (v8 & 7) + 1;
    v2[3] = BYTE1(DstBuf);
    if ( v7 >= 0 || (v10 = sub_4B9F30(1 << v9, 0), v11 = 0, v2[4] = v10, (signed int)*v10 <= 0) )
    {
LABEL_19:
      result = 1;
    }
    else
    {
      v12 = 0;
      while ( 1 )
      {
        v13 = v2[14];
        v14 = *(int (__cdecl **)(_DWORD *, int *, signed int))(v13 + 60);
        v15 = v14 ? v14(v2, &DstBuf, 3) : fread(&DstBuf, 1u, 3u, *(FILE **)(v13 + 56));
        if ( v15 != 3 )
          break;
        *(_WORD *)(v12 + *(_DWORD *)(v2[4] + 8)) = DstBuf;
        *(_BYTE *)(*(_DWORD *)(v2[4] + 8) + v12 + 2) = BYTE2(DstBuf);
        ++v11;
        v12 += 3;
        if ( v11 >= *(_DWORD *)v2[4] )
          goto LABEL_19;
      }
      dword_576AFC = 102;
      result = 0;
    }
  }
  else
  {
    dword_576AFC = 102;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B8EF0) --------------------------------------------------------
int __cdecl sub_4B8EF0(int DstBuf)
{
  int v1; // ecx
  int v2; // esi
  int result; // eax
  _DWORD *v4; // ebp
  int v5; // ecx
  int v6; // ecx
  int v7; // ecx
  int v8; // ecx
  int (__cdecl *v9)(int, int *, signed int); // eax
  size_t v10; // eax
  char v11; // di
  bool v12; // sf
  size_t *v13; // eax
  int v14; // ebx
  int v15; // edi
  int v16; // eax
  int (__cdecl *v17)(int, int *, signed int); // ecx
  int v18; // eax
  void *v19; // ecx
  void *v20; // eax
  _DWORD *v21; // edi
  int v22; // eax
  int v23; // ecx
  int v24; // ecx
  int v25; // [esp+4h] [ebp-4h]

  v2 = DstBuf;
  v25 = *(_DWORD *)(DstBuf + 56);
  if ( !(**(_BYTE **)(DstBuf + 56) & 8) )
  {
    dword_576AFC = 111;
    return 0;
  }
  v4 = (_DWORD *)(DstBuf + 24);
  if ( !sub_4B8B00(DstBuf, v1, (_DWORD *)(DstBuf + 24))
    || !sub_4B8B00(v2, v5, (_DWORD *)(v2 + 28))
    || !sub_4B8B00(v2, v6, (_DWORD *)(v2 + 32))
    || !sub_4B8B00(v2, v7, (_DWORD *)(v2 + 36)) )
  {
    return 0;
  }
  v8 = *(_DWORD *)(v2 + 56);
  v9 = *(int (__cdecl **)(int, int *, signed int))(v8 + 60);
  if ( v9 )
    v10 = v9(v2, &DstBuf, 1);
  else
    v10 = fread(&DstBuf, 1u, 1u, *(FILE **)(v8 + 56));
  if ( v10 != 1 )
  {
    dword_576AFC = 102;
    return 0;
  }
  v11 = (DstBuf & 7) + 1;
  v12 = (DstBuf & 0x80u) != 0;
  *(_DWORD *)(v2 + 40) = DstBuf & 0x40;
  if ( !v12 )
    goto LABEL_24;
  if ( *(_DWORD *)(v2 + 44) && !*(_DWORD *)(v2 + 48) )
    sub_4B9FC0(*(void **)(v2 + 44));
  v13 = sub_4B9F30(1 << v11, 0);
  v14 = 0;
  *(_DWORD *)(v2 + 44) = v13;
  if ( (signed int)*v13 > 0 )
  {
    v15 = 0;
    while ( 1 )
    {
      v16 = *(_DWORD *)(v2 + 56);
      v17 = *(int (__cdecl **)(int, int *, signed int))(v16 + 60);
      v18 = v17 ? v17(v2, &DstBuf, 3) : fread(&DstBuf, 1u, 3u, *(FILE **)(v16 + 56));
      if ( v18 != 3 )
        break;
      *(_WORD *)(v15 + *(_DWORD *)(*(_DWORD *)(v2 + 44) + 8)) = DstBuf;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v2 + 44) + 8) + v15 + 2) = BYTE2(DstBuf);
      ++v14;
      v15 += 3;
      if ( v14 >= **(_DWORD **)(v2 + 44) )
        goto LABEL_24;
    }
    dword_576AFC = 102;
    result = 0;
  }
  else
  {
LABEL_24:
    v19 = *(void **)(v2 + 48);
    if ( v19 )
      v20 = realloc(v19, 40 * (*(_DWORD *)(v2 + 20) + 1));
    else
      v20 = malloc(0x28u);
    *(_DWORD *)(v2 + 48) = v20;
    if ( v20 )
    {
      v21 = (_DWORD *)(*(_DWORD *)(v2 + 48) + 40 * *(_DWORD *)(v2 + 20));
      *v21 = *v4;
      v21[1] = *(_DWORD *)(v2 + 28);
      v21[2] = *(_DWORD *)(v2 + 32);
      v21[3] = *(_DWORD *)(v2 + 36);
      v21[4] = *(_DWORD *)(v2 + 40);
      v21[5] = *(_DWORD *)(v2 + 44);
      if ( *(_DWORD *)(v2 + 44) )
      {
        v21[5] = malloc(0xCu);
        v21[5] = *(_DWORD *)(v2 + 44);
        v21[6] = *(_DWORD *)(v2 + 48);
        v21[7] = *(_DWORD *)(v2 + 52);
        *(_DWORD *)(v21[5] + 8) = malloc(3u);
        v22 = *(_DWORD *)(v2 + 44);
        v23 = v21[5] + 8;
        *(_WORD *)v23 = *(_WORD *)(v22 + 8);
        *(_BYTE *)(v23 + 2) = *(_BYTE *)(v22 + 10);
      }
      v21[6] = 0;
      v21[8] = 0;
      v21[9] = 0;
      v24 = *(_DWORD *)(v2 + 36) * *(_DWORD *)(v2 + 32);
      ++*(_DWORD *)(v2 + 20);
      *(_DWORD *)(v25 + 52) = v24;
      sub_4B8C20(v2);
      result = 1;
    }
    else
    {
      dword_576AFC = 109;
      result = 0;
    }
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B9160) --------------------------------------------------------
int __cdecl sub_4B9160(int DstBuf, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int result; // eax
  int (__cdecl *v6)(int, int *, signed int); // ecx
  size_t v7; // eax
  int v8; // ST0C_4

  v3 = DstBuf;
  v4 = *(_DWORD *)(DstBuf + 56);
  if ( *(_BYTE *)v4 & 8 )
  {
    v6 = *(int (__cdecl **)(int, int *, signed int))(v4 + 60);
    if ( v6 )
      v7 = v6(DstBuf, &DstBuf, 1);
    else
      v7 = fread(&DstBuf, 1u, 1u, *(FILE **)(v4 + 56));
    if ( v7 == 1 )
    {
      v8 = a3;
      *(_DWORD *)a2 = (unsigned __int8)DstBuf;
      result = sub_4B89B0(v3, v8);
    }
    else
    {
      dword_576AFC = 102;
      result = 0;
    }
  }
  else
  {
    dword_576AFC = 111;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B9220) --------------------------------------------------------
signed int __usercall sub_4B9220@<eax>(int a1@<eax>, int *a2)
{
  int v2; // ebx
  int v3; // edi
  int v4; // ecx
  int v5; // edx
  signed int v6; // ecx
  int v7; // edx
  int v8; // eax
  signed int result; // eax
  unsigned __int8 v10; // [esp+Fh] [ebp-1h]

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 56);
  if ( *(_DWORD *)(v3 + 44) >= *(_DWORD *)(v3 + 24) )
  {
LABEL_4:
    *a2 = *(_DWORD *)(v3 + 48) & dword_53B4DC[*(_DWORD *)(v3 + 24)];
    v6 = *(_DWORD *)(v3 + 24);
    v7 = ++*(_DWORD *)(v3 + 20);
    v8 = *(_DWORD *)(v3 + 28);
    *(_DWORD *)(v3 + 48) >>= v6;
    *(_DWORD *)(v3 + 44) -= v6;
    if ( v7 > v8 && v6 < 12 )
    {
      *(_DWORD *)(v3 + 28) = 2 * v8;
      *(_DWORD *)(v3 + 24) = v6 + 1;
    }
    result = 1;
  }
  else
  {
    while ( sub_4B8CE0(v2, (unsigned __int8 *)(v3 + 68), &v10) )
    {
      v4 = *(_DWORD *)(v3 + 44);
      v5 = v10 << v4;
      *(_DWORD *)(v3 + 44) = v4 + 8;
      *(_DWORD *)(v3 + 48) |= v5;
      if ( v4 + 8 >= *(_DWORD *)(v3 + 24) )
        goto LABEL_4;
    }
    result = 0;
  }
  return result;
}

//----- (004B92B0) --------------------------------------------------------
_DWORD *__cdecl sub_4B92B0(int FileHandle)
{
  _DWORD *result; // eax
  _DWORD *v2; // edi
  _DWORD *v3; // esi
  FILE *v4; // eax
  FILE *v5; // ebp
  int v6; // ecx
  int (__cdecl *v7)(_DWORD *, char *, signed int); // eax
  size_t v8; // eax
  char DstBuf; // [esp+4h] [ebp-Ch]
  char v10; // [esp+Ah] [ebp-6h]

  result = malloc(0x3Cu);
  v2 = result;
  if ( !result )
  {
    dword_576AFC = 109;
    return result;
  }
  memset(result, 0, 0x3Cu);
  v3 = malloc(0x6148u);
  if ( !v3 )
  {
    dword_576AFC = 109;
    free(v2);
    return 0;
  }
  v4 = _fdopen(FileHandle, aR);
  v2[14] = v3;
  v3[1] = FileHandle;
  v5 = v4;
  v3[14] = v4;
  *v3 = 8;
  v3[15] = 0;
  v6 = v2[14];
  v2[13] = 0;
  v7 = *(int (__cdecl **)(_DWORD *, char *, signed int))(v6 + 60);
  if ( v7 )
    v8 = v7(v2, &DstBuf, 6);
  else
    v8 = fread(&DstBuf, 1u, 6u, *(FILE **)(v6 + 56));
  if ( v8 != 6 )
  {
    dword_576AFC = 102;
LABEL_12:
    fclose(v5);
    free(v3);
    free(v2);
    return 0;
  }
  v10 = 0;
  if ( strncmp(aGifver_0, &DstBuf, 3u) )
  {
    dword_576AFC = 103;
    goto LABEL_12;
  }
  if ( !sub_4B8D90((int)v2) )
    goto LABEL_12;
  dword_576AFC = 0;
  return v2;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B9420) --------------------------------------------------------
_DWORD *__cdecl sub_4B9420(int a1, int a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // esi
  _DWORD *result; // eax
  _DWORD *v5; // edi
  int v6; // ecx
  int (__cdecl *v7)(_DWORD *, char *, signed int); // eax
  size_t v8; // eax
  char DstBuf; // [esp+8h] [ebp-Ch]
  char v10; // [esp+Eh] [ebp-6h]

  v2 = malloc(0x3Cu);
  v3 = v2;
  if ( !v2 )
  {
    dword_576AFC = 109;
    return 0;
  }
  memset(v2, 0, 0x3Cu);
  v5 = malloc(0x6148u);
  if ( !v5 )
  {
    dword_576AFC = 109;
    free(v3);
    return 0;
  }
  v3[14] = v5;
  v5[1] = 0;
  v5[14] = 0;
  *v5 = 8;
  v5[15] = a2;
  v3[13] = a1;
  v6 = v3[14];
  v7 = *(int (__cdecl **)(_DWORD *, char *, signed int))(v6 + 60);
  if ( v7 )
    v8 = v7(v3, &DstBuf, 6);
  else
    v8 = fread(&DstBuf, 1u, 6u, *(FILE **)(v6 + 56));
  if ( v8 != 6 )
  {
    dword_576AFC = 102;
LABEL_12:
    free(v5);
    free(v3);
    return 0;
  }
  v10 = 0;
  if ( strncmp(aGifver, &DstBuf, 3u) )
  {
    dword_576AFC = 103;
    goto LABEL_12;
  }
  if ( !sub_4B8D90((int)v3) )
    goto LABEL_12;
  result = v3;
  dword_576AFC = 0;
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B9570) --------------------------------------------------------
signed int __cdecl sub_4B9570(int a1, int a2, int a3)
{
  _DWORD *v3; // ebp
  int v4; // ebx
  int v5; // edx
  int v6; // edi
  int v7; // esi
  char v8; // al
  int v9; // eax
  int v10; // ecx
  char v11; // al
  signed int v12; // ecx
  signed int v13; // edi
  bool v14; // zf
  char v15; // dl
  int v16; // edi
  int v18; // [esp+10h] [ebp-18h]
  int v19; // [esp+14h] [ebp-14h]
  int v20; // [esp+18h] [ebp-10h]
  int v21; // [esp+1Ch] [ebp-Ch]
  int v22; // [esp+20h] [ebp-8h]
  int v23; // [esp+24h] [ebp-4h]

  v3 = *(_DWORD **)(a1 + 56);
  v4 = v3[10];
  v5 = v3[3];
  v6 = v3[8];
  v7 = 0;
  v18 = 0;
  v23 = v3[4];
  v22 = v5;
  v20 = v6;
  if ( v4 )
  {
    do
    {
      if ( v7 >= a3 )
        goto LABEL_37;
      v8 = *((_BYTE *)v3 + v4-- + 323);
      *(_BYTE *)(v7++ + a2) = v8;
    }
    while ( v4 );
    v18 = v7;
  }
  if ( v7 >= a3 )
  {
LABEL_37:
    v3[8] = v6;
    v3[10] = v4;
    return 1;
  }
  while ( 1 )
  {
    if ( !sub_4B9220(a1, &v19) )
      return 0;
    v9 = v19;
    if ( v19 != v23 )
      break;
    if ( v7 != a3 - 1 || v3[13] )
    {
      dword_576AFC = 113;
      return 0;
    }
    v18 = ++v7;
LABEL_36:
    if ( v7 >= a3 )
      goto LABEL_37;
  }
  if ( v19 == v22 )
  {
    memset32(v3 + 2129, 4098, 0x1000u);
    v3[5] = v3[4] + 1;
    v10 = v3[2] + 1;
    v3[6] = v10;
    v3[8] = 4098;
    v20 = 4098;
    v3[7] = 1 << v10;
    v6 = 4098;
    goto LABEL_36;
  }
  if ( v19 < v22 )
  {
    *(_BYTE *)(v7++ + a2) = v19;
    v18 = v7;
LABEL_31:
    if ( v6 != 4098 )
    {
      v3[v3[5] + 2127] = v6;
      v16 = v3[5];
      if ( v9 == v16 - 2 )
        v9 = v20;
      v7 = v18;
      *((_BYTE *)v3 + v16 + 4417) = sub_4B8CB0(v9, v22, (int)(v3 + 2129));
      v9 = v19;
    }
    v20 = v9;
    v6 = v9;
    goto LABEL_36;
  }
  if ( v3[v19 + 2129] == 4098 )
  {
    if ( v19 != v3[5] - 2 )
      goto LABEL_40;
    v21 = v6;
    v11 = sub_4B8CB0(v6, v22, (int)(v3 + 2129));
    v7 = v18;
    *((_BYTE *)v3 + v4 + 324) = v11;
    *((_BYTE *)v3 + v3[5] + 4417) = v11;
    v9 = v19;
    ++v4;
    v12 = v6;
  }
  else
  {
    v9 = v19;
    v12 = v19;
  }
  v13 = 0;
  while ( 1 )
  {
    ++v13;
    if ( v12 <= v22 || v12 > 4095 )
      break;
    *((_BYTE *)v3 + v4 + 324) = *((_BYTE *)v3 + v12 + 4419);
    v12 = v3[v12 + 2129];
    ++v4;
    v21 = v12;
    if ( v13 > 4095 )
    {
      ++v13;
      break;
    }
  }
  if ( v13 < 4095 && v12 <= 4095 )
  {
    v14 = v4++ == -1;
    *((_BYTE *)v3 + v4 + 323) = v12;
    if ( !v14 )
    {
      do
      {
        if ( v7 >= a3 )
          break;
        v15 = *((_BYTE *)v3 + v4-- + 323);
        *(_BYTE *)(v7++ + a2) = v15;
      }
      while ( v4 );
      v18 = v7;
    }
    v6 = v20;
    goto LABEL_31;
  }
LABEL_40:
  dword_576AFC = 112;
  return 0;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B98E0) --------------------------------------------------------
int __cdecl sub_4B98E0(int DstBuf, int a2, int a3)
{
  int v3; // edi
  int v4; // esi
  int result; // eax
  int v6; // eax

  v3 = DstBuf;
  v4 = *(_DWORD *)(DstBuf + 56);
  if ( !(*(_BYTE *)v4 & 8) )
  {
    dword_576AFC = 111;
    return 0;
  }
  v6 = a3;
  if ( !a3 )
    v6 = *(_DWORD *)(DstBuf + 32);
  *(_DWORD *)(v4 + 52) -= v6;
  if ( *(_DWORD *)(v4 + 52) <= 0xFFFF0000 )
  {
    if ( sub_4B9570(v3, a2, v6) != 1 )
      return 0;
    if ( !*(_DWORD *)(v4 + 52) )
    {
      while ( sub_4B8B60(v3, (int)&DstBuf) )
      {
        if ( !DstBuf )
          goto LABEL_12;
      }
      return 0;
    }
LABEL_12:
    result = 1;
  }
  else
  {
    dword_576AFC = 108;
    result = 0;
  }
  return result;
}
// 576AFC: using guessed type int dword_576AFC;

//----- (004B99F0) --------------------------------------------------------
int __cdecl sub_4B99F0(int DstBuf)
{
  unsigned __int8 *v1; // eax
  int v2; // eax
  int v3; // edi
  _DWORD *v4; // esi
  void *v5; // eax
  int v7; // [esp+10h] [ebp-30h]
  int v8; // [esp+14h] [ebp-2Ch]
  int v9; // [esp+18h] [ebp-28h]
  int v10; // [esp+34h] [ebp-Ch]
  int v11; // [esp+38h] [ebp-8h]
  int v12; // [esp+3Ch] [ebp-4h]

  v12 = 0;
  v11 = 0;
  do
  {
    while ( 1 )
    {
      while ( 1 )
      {
LABEL_2:
        if ( !sub_4B8900(DstBuf, (int)&v8) )
          return 0;
        if ( v8 != 2 )
          break;
        if ( !sub_4B8EF0(DstBuf) )
          return 0;
        v2 = *(_DWORD *)(DstBuf + 48);
        v3 = *(_DWORD *)(v2 + 40 * *(_DWORD *)(DstBuf + 20) - 32) * *(_DWORD *)(v2 + 40 * *(_DWORD *)(DstBuf + 20) - 28);
        v4 = (_DWORD *)(v2 + 40 * *(_DWORD *)(DstBuf + 20) - 40);
        v5 = malloc(v3);
        v4[6] = v5;
        if ( !sub_4B98E0(DstBuf, (int)v5, v3) )
          return 0;
        if ( v12 )
        {
          v4[9] = v12;
          v4[8] = v11;
          v12 = 0;
          v11 = 0;
          v4[7] = *(_DWORD *)(v4[9] + 8);
        }
      }
      if ( v8 != 3 )
        break;
      if ( !sub_4B9160(DstBuf, (int)&v10, (int)&v7) )
        return 0;
      v1 = (unsigned __int8 *)v7;
      if ( v7 )
      {
        while ( sub_4BA270((int)&v9, *v1, v1 + 1) && sub_4B89B0(DstBuf, (int)&v7) )
        {
          v1 = (unsigned __int8 *)v7;
          v10 = 0;
          if ( !v7 )
            goto LABEL_2;
        }
        return 0;
      }
    }
  }
  while ( v8 != 4 );
  if ( v12 )
    sub_4BA300((int)&v9);
  return 1;
}

//----- (004B9F00) --------------------------------------------------------
signed int __cdecl sub_4B9F00(signed int a1)
{
  signed int result; // eax

  result = 1;
  do
  {
    if ( 1 << result >= a1 )
      break;
    ++result;
  }
  while ( result <= 8 );
  return result;
}

//----- (004B9F30) --------------------------------------------------------
size_t *__cdecl sub_4B9F30(size_t NumOfElements, void *Src)
{
  signed int v2; // ecx
  size_t *result; // eax
  size_t *v4; // edi
  size_t *v5; // ebx

  v2 = 1;
  do
  {
    if ( 1 << v2 >= (signed int)NumOfElements )
      break;
    ++v2;
  }
  while ( v2 <= 8 );
  if ( NumOfElements != 1 << v2 )
    return 0;
  result = (size_t *)malloc(0xCu);
  v4 = result;
  if ( result )
  {
    result = (size_t *)calloc(NumOfElements, 3u);
    v5 = result;
    v4[2] = (size_t)result;
    if ( result )
    {
      *v4 = NumOfElements;
      v4[1] = sub_4B9F00(NumOfElements);
      if ( Src )
        memcpy(v5, Src, 3 * NumOfElements);
      result = v4;
    }
  }
  return result;
}

//----- (004B9FC0) --------------------------------------------------------
void __cdecl sub_4B9FC0(void *Memory)
{
  free(*((void **)Memory + 2));
  free(Memory);
}

//----- (004BA270) --------------------------------------------------------
char *__cdecl sub_4BA270(int a1, size_t Size, void *Src)
{
  void *v3; // ecx
  char *result; // eax
  char *v5; // ecx
  int v6; // eax
  size_t *v7; // edi

  v3 = *(void **)(a1 + 36);
  if ( v3 )
    result = (char *)realloc(v3, 12 * (*(_DWORD *)(a1 + 32) + 1));
  else
    result = (char *)malloc(0xCu);
  v5 = result;
  *(_DWORD *)(a1 + 36) = result;
  if ( result )
  {
    v6 = *(_DWORD *)(a1 + 32);
    v7 = (size_t *)&v5[12 * v6];
    *(_DWORD *)(a1 + 32) = v6 + 1;
    *v7 = Size;
    result = (char *)malloc(Size);
    v7[1] = (size_t)result;
    if ( result )
    {
      if ( Src )
      {
        memcpy(result, Src, Size);
        v7[2] = *(_DWORD *)(a1 + 28);
      }
      result = (char *)1;
    }
  }
  return result;
}

//----- (004BA300) --------------------------------------------------------
void __cdecl sub_4BA300(int a1)
{
  unsigned int v1; // esi

  v1 = *(_DWORD *)(a1 + 36);
  if ( v1 < v1 + 12 * *(_DWORD *)(a1 + 32) )
  {
    do
    {
      free(*(void **)(v1 + 4));
      v1 += 12;
    }
    while ( v1 < *(_DWORD *)(a1 + 36) + 12 * *(_DWORD *)(a1 + 32) );
  }
  free(*(void **)(a1 + 36));
  *(_DWORD *)(a1 + 36) = 0;
}

//----- (004BA450) --------------------------------------------------------
void __cdecl sub_4BA450(void *Memory)
{
  unsigned int v1; // esi
  void **v2; // edi

  v1 = *((_DWORD *)Memory + 12);
  if ( v1 < v1 + 40 * *((_DWORD *)Memory + 5) )
  {
    do
    {
      v2 = *(void ***)(v1 + 20);
      if ( v2 )
      {
        free(v2[2]);
        free(v2);
      }
      if ( *(_DWORD *)(v1 + 24) )
        free(*(void **)(v1 + 24));
      if ( *(_DWORD *)(v1 + 36) )
        sub_4BA300(v1);
      v1 += 40;
    }
    while ( v1 < *((_DWORD *)Memory + 12) + 40 * *((_DWORD *)Memory + 5) );
  }
  free(*((void **)Memory + 12));
}

//----- (004BA4D0) --------------------------------------------------------
signed int __cdecl sub_4BA4D0(int a1, int *a2, int a3, int a4, unsigned int a5)
{
  signed int result; // eax
  signed int v6; // esi
  int v7; // [esp+4h] [ebp-38h]
  int v8; // [esp+8h] [ebp-34h]
  int v9; // [esp+10h] [ebp-2Ch]
  int v10; // [esp+14h] [ebp-28h]
  int v11; // [esp+18h] [ebp-24h]
  int v12; // [esp+24h] [ebp-18h]
  int v13; // [esp+28h] [ebp-14h]
  int v14; // [esp+2Ch] [ebp-10h]

  v8 = a4;
  v9 = a1;
  v7 = a3;
  v10 = *a2;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  result = sub_4BC360(&v7, a5, a121_0, 56);
  if ( !result )
  {
    v6 = sub_4BA870(&v7, 4u);
    if ( v6 == 1 )
    {
      *a2 = v11;
      result = sub_4BAC80((int)&v7);
    }
    else
    {
      sub_4BAC80((int)&v7);
      result = -5;
      if ( v6 )
        result = v6;
    }
  }
  return result;
}

//----- (004BA580) --------------------------------------------------------
signed int __cdecl sub_4BA580(int a1, int *a2, int a3, int a4)
{
  return sub_4BA4D0(a1, a2, a3, a4, 0xFFFFFFFF);
}

//----- (004BA5A0) --------------------------------------------------------
int __cdecl sub_4BA5A0(unsigned int a1)
{
  return (a1 >> 12) + a1 + (a1 >> 14) + 11;
}

//----- (004BA5C0) --------------------------------------------------------
signed int __cdecl sub_4BA5C0(int a1, int *a2, int a3, int a4)
{
  int v4; // eax
  signed int result; // eax
  signed int v6; // esi
  int v7; // [esp+4h] [ebp-38h]
  int v8; // [esp+8h] [ebp-34h]
  int v9; // [esp+10h] [ebp-2Ch]
  int v10; // [esp+14h] [ebp-28h]
  int v11; // [esp+18h] [ebp-24h]
  int v12; // [esp+24h] [ebp-18h]
  int v13; // [esp+28h] [ebp-14h]

  v8 = a4;
  v7 = a3;
  v4 = *a2;
  v9 = a1;
  v10 = v4;
  v12 = 0;
  v13 = 0;
  result = sub_4BC4B0(&v7, a121, 56);
  if ( !result )
  {
    v6 = sub_4BC5E0((int)&v7, 4);
    if ( v6 == 1 )
    {
      *a2 = v11;
      result = sub_4BDA40(&v7);
    }
    else
    {
      sub_4BDA40(&v7);
      if ( v6 != 2 && (v6 != -5 || v8) )
        result = v6;
      else
        result = -3;
    }
  }
  return result;
}

//----- (004BA7F0) --------------------------------------------------------
int __usercall sub_4BA7F0@<eax>(int result@<eax>, __int16 a2@<cx>)
{
  int v2; // edi

  *(_BYTE *)(*(_DWORD *)(result + 8) + *(_DWORD *)(result + 20)) = HIBYTE(a2);
  v2 = *(_DWORD *)(result + 8);
  *(_BYTE *)(++*(_DWORD *)(result + 20) + v2) = a2;
  ++*(_DWORD *)(result + 20);
  return result;
}

//----- (004BA820) --------------------------------------------------------
int __usercall sub_4BA820@<eax>(int a1@<eax>)
{
  int v1; // esi
  int result; // eax
  size_t v3; // edi
  int v4; // eax
  _DWORD *v5; // esi

  v1 = a1;
  result = *(_DWORD *)(a1 + 28);
  v3 = *(_DWORD *)(result + 20);
  if ( v3 > *(_DWORD *)(v1 + 16) )
    v3 = *(_DWORD *)(v1 + 16);
  if ( v3 )
  {
    memcpy(*(void **)(v1 + 12), *(const void **)(result + 16), v3);
    v4 = *(_DWORD *)(v1 + 28);
    *(_DWORD *)(v1 + 12) += v3;
    *(_DWORD *)(v4 + 16) += v3;
    *(_DWORD *)(v1 + 20) += v3;
    *(_DWORD *)(v1 + 16) -= v3;
    result = *(_DWORD *)(v1 + 28);
    *(_DWORD *)(result + 20) -= v3;
    v5 = *(_DWORD **)(v1 + 28);
    if ( !v5[5] )
      v5[4] = v5[2];
  }
  return result;
}

//----- (004BA870) --------------------------------------------------------
signed int __cdecl sub_4BA870(_DWORD *a1, unsigned int a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // ebp
  int v5; // eax
  int v7; // ecx
  signed int v8; // eax
  char v9; // al
  int v10; // eax
  signed int v11; // ebp
  int v12; // eax
  bool v13; // zf
  unsigned int v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // [esp+10h] [ebp+4h]

  v2 = (int)a1;
  if ( !a1 )
    return -2;
  v3 = a1[7];
  if ( !v3 )
    return -2;
  v4 = a2;
  if ( a2 > 4 )
    return -2;
  if ( !a1[3] || !*a1 && a1[1] || (v5 = *(_DWORD *)(v3 + 4), v5 == 666) && a2 != 4 )
  {
    a1[6] = aStreamError;
    return -2;
  }
  if ( !a1[4] )
  {
    a1[6] = aBufferError;
    return -5;
  }
  v7 = *(_DWORD *)(v3 + 32);
  *(_DWORD *)v3 = a1;
  v22 = v7;
  *(_DWORD *)(v3 + 32) = a2;
  if ( v5 == 42 )
  {
    if ( *(_DWORD *)(v3 + 24) == 2 )
    {
      *(_BYTE *)(*(_DWORD *)(v3 + 8) + (*(_DWORD *)(v3 + 20))++) = 31;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = -117;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 8;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 0;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 0;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 0;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 0;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = 0;
      v8 = *(_DWORD *)(v3 + 124);
      if ( v8 == 9 )
      {
        v9 = 2;
      }
      else if ( *(_DWORD *)(v3 + 128) >= 2 || v8 < 2 )
      {
        v9 = 4;
      }
      else
      {
        v9 = 0;
      }
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = v9;
      *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = -1;
      *(_DWORD *)(v3 + 4) = 113;
      v10 = sub_4BFFF0(0, 0, 0);
LABEL_32:
      *(_DWORD *)(v2 + 48) = v10;
      goto LABEL_33;
    }
    if ( *(_DWORD *)(v3 + 128) < 2 )
    {
      v11 = *(_DWORD *)(v3 + 124);
      if ( v11 >= 2 )
      {
        if ( v11 >= 6 )
        {
          v13 = v11 == 6;
          v4 = a2;
          v12 = !v13 + 2;
        }
        else
        {
          v4 = a2;
          v12 = 1;
        }
        goto LABEL_27;
      }
      v4 = a2;
    }
    v12 = 0;
LABEL_27:
    v14 = (v12 << 6) | (((*(_DWORD *)(v3 + 40) - 8) << 12) + 2048);
    if ( *(_DWORD *)(v3 + 100) )
      v14 |= 0x20u;
    *(_DWORD *)(v3 + 4) = 113;
    v15 = sub_4BA7F0(v3, 31 * (v14 / 0x1F + 1));
    if ( *(_DWORD *)(v3 + 100) )
    {
      v16 = sub_4BA7F0(v15, *(_WORD *)(v2 + 50));
      sub_4BA7F0(v16, *(_WORD *)(v2 + 48));
    }
    v10 = sub_4BDE00(0, 0, 0);
    goto LABEL_32;
  }
LABEL_33:
  if ( *(_DWORD *)(v3 + 20) )
  {
    sub_4BA820(v2);
    if ( !*(_DWORD *)(v2 + 16) )
    {
LABEL_35:
      *(_DWORD *)(v3 + 32) = -1;
      return 0;
    }
  }
  else if ( !*(_DWORD *)(v2 + 4) && v4 <= v22 && v4 != 4 )
  {
    *(_DWORD *)(v2 + 24) = aBufferError;
    return -5;
  }
  v17 = *(_DWORD *)(v3 + 4);
  if ( v17 == 666 )
  {
    if ( *(_DWORD *)(v2 + 4) )
    {
      *(_DWORD *)(v2 + 24) = aBufferError;
      return -5;
    }
LABEL_45:
    if ( !*(_DWORD *)(v3 + 108) && (!v4 || v17 == 666) )
      goto LABEL_59;
    goto LABEL_48;
  }
  if ( !*(_DWORD *)(v2 + 4) )
    goto LABEL_45;
LABEL_48:
  v18 = off_51F200[3 * *(_DWORD *)(v3 + 124)](v3, v4);
  if ( v18 == 2 || v18 == 3 )
    *(_DWORD *)(v3 + 4) = 666;
  if ( !v18 || v18 == 2 )
  {
    if ( *(_DWORD *)(v2 + 16) )
      return 0;
    *(_DWORD *)(v3 + 32) = -1;
    return 0;
  }
  if ( v18 == 1 )
  {
    if ( v4 == 1 )
    {
      sub_4BF670(v3);
    }
    else
    {
      sub_4BF5D0(v3, 0, 0, 0);
      if ( v4 == 3 )
      {
        *(_WORD *)(*(_DWORD *)(v3 + 60) + 2 * *(_DWORD *)(v3 + 68) - 2) = 0;
        memset(*(void **)(v3 + 60), 0, 2 * *(_DWORD *)(v3 + 68) - 2);
      }
    }
    sub_4BA820(v2);
    if ( !*(_DWORD *)(v2 + 16) )
      goto LABEL_35;
  }
LABEL_59:
  if ( v4 != 4 )
    return 0;
  v19 = *(_DWORD *)(v3 + 24);
  if ( v19 <= 0 )
    return 1;
  if ( v19 == 2 )
  {
    *(_BYTE *)(*(_DWORD *)(v3 + 8) + (*(_DWORD *)(v3 + 20))++) = *(_BYTE *)(v2 + 48);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 49);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 50);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 51);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 8);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 9);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 10);
    *(_BYTE *)((*(_DWORD *)(v3 + 20))++ + *(_DWORD *)(v3 + 8)) = *(_BYTE *)(v2 + 11);
  }
  else
  {
    v20 = sub_4BA7F0(v3, *(_WORD *)(v2 + 50));
    sub_4BA7F0(v20, *(_WORD *)(v2 + 48));
  }
  sub_4BA820(v2);
  v21 = *(_DWORD *)(v3 + 24);
  if ( v21 > 0 )
    *(_DWORD *)(v3 + 24) = -v21;
  return *(_DWORD *)(v3 + 20) == 0;
}

//----- (004BAC80) --------------------------------------------------------
signed int __cdecl sub_4BAC80(int a1)
{
  int v1; // eax
  int v2; // edi
  int v4; // eax
  int v5; // edx
  int v6; // edx
  int v7; // edx

  if ( !a1 )
    return -2;
  v1 = *(_DWORD *)(a1 + 28);
  if ( !v1 )
    return -2;
  v2 = *(_DWORD *)(v1 + 4);
  if ( v2 != 42 && v2 != 113 && v2 != 666 )
    return -2;
  v4 = *(_DWORD *)(v1 + 8);
  if ( v4 )
    (*(void (__cdecl **)(_DWORD, int))(a1 + 36))(*(_DWORD *)(a1 + 40), v4);
  v5 = *(_DWORD *)(a1 + 28);
  if ( *(_DWORD *)(v5 + 60) )
    (*(void (__cdecl **)(_DWORD, _DWORD))(a1 + 36))(*(_DWORD *)(a1 + 40), *(_DWORD *)(v5 + 60));
  v6 = *(_DWORD *)(a1 + 28);
  if ( *(_DWORD *)(v6 + 56) )
    (*(void (__cdecl **)(_DWORD, _DWORD))(a1 + 36))(*(_DWORD *)(a1 + 40), *(_DWORD *)(v6 + 56));
  v7 = *(_DWORD *)(a1 + 28);
  if ( *(_DWORD *)(v7 + 48) )
    (*(void (__cdecl **)(_DWORD, _DWORD))(a1 + 36))(*(_DWORD *)(a1 + 40), *(_DWORD *)(v7 + 48));
  (*(void (__cdecl **)(_DWORD, _DWORD))(a1 + 36))(*(_DWORD *)(a1 + 40), *(_DWORD *)(a1 + 28));
  *(_DWORD *)(a1 + 28) = 0;
  return v2 != 113 ? 0 : 0xFFFFFFFD;
}

//----- (004BAF50) --------------------------------------------------------
signed int __usercall sub_4BAF50@<eax>(int a1@<esi>)
{
  int v1; // ecx
  int v2; // edx
  int v3; // eax
  int v4; // edx
  signed int result; // eax

  v1 = *(_DWORD *)(a1 + 68);
  v2 = *(_DWORD *)(a1 + 60);
  *(_DWORD *)(a1 + 52) = 2 * *(_DWORD *)(a1 + 36);
  *(_WORD *)(v2 + 2 * v1 - 2) = 0;
  memset(*(void **)(a1 + 60), 0, 2 * *(_DWORD *)(a1 + 68) - 2);
  v3 = 6 * *(_DWORD *)(a1 + 124);
  *(_DWORD *)(a1 + 120) = (unsigned __int16)word_51F1FA[6 * *(_DWORD *)(a1 + 124)];
  *(_DWORD *)(a1 + 132) = (unsigned __int16)word_51F1F8[v3];
  *(_DWORD *)(a1 + 136) = (unsigned __int16)word_51F1FC[v3];
  v4 = (unsigned __int16)word_51F1FE[v3];
  result = 2;
  *(_DWORD *)(a1 + 100) = 0;
  *(_DWORD *)(a1 + 84) = 0;
  *(_DWORD *)(a1 + 108) = 0;
  *(_DWORD *)(a1 + 96) = 0;
  *(_DWORD *)(a1 + 64) = 0;
  *(_DWORD *)(a1 + 116) = v4;
  *(_DWORD *)(a1 + 112) = 2;
  *(_DWORD *)(a1 + 88) = 2;
  return result;
}
// 51F1F8: using guessed type __int16 word_51F1F8[];
// 51F1FA: using guessed type __int16 word_51F1FA[];
// 51F1FC: using guessed type __int16 word_51F1FC[];
// 51F1FE: using guessed type __int16 word_51F1FE[];

//----- (004BAFD0) --------------------------------------------------------
unsigned int __usercall sub_4BAFD0@<eax>(unsigned int a1@<eax>, _DWORD *a2@<edi>)
{
  unsigned int v2; // edx
  unsigned int v3; // ebp
  int v4; // esi
  _BYTE *v5; // ecx
  unsigned int v6; // esi
  _BYTE *v7; // edx
  char v8; // bl
  int v9; // edx
  unsigned int v10; // ecx
  _BYTE *v11; // edx
  char v12; // bl
  _BYTE *v13; // edx
  char v14; // bl
  _BYTE *v15; // edx
  char v16; // bl
  _BYTE *v17; // edx
  char v18; // bl
  _BYTE *v19; // edx
  char v20; // bl
  _BYTE *v21; // edx
  char v22; // bl
  _BYTE *v23; // edx
  char v24; // bl
  _BYTE *v25; // edx
  char v26; // bl
  int v27; // edx
  unsigned int result; // eax
  char v29; // [esp+Eh] [ebp-12h]
  char v30; // [esp+Fh] [ebp-11h]
  unsigned int v31; // [esp+10h] [ebp-10h]
  int v32; // [esp+14h] [ebp-Ch]
  unsigned int v33; // [esp+18h] [ebp-8h]

  v2 = a2[25];
  v3 = a2[28];
  v31 = a2[29];
  v32 = a2[34];
  v4 = a2[9];
  v5 = (_BYTE *)(v2 + a2[12]);
  if ( v2 <= v4 - 262 )
    v33 = 0;
  else
    v33 = v2 - v4 + 262;
  v29 = v5[v3 - 1];
  v6 = (unsigned int)(v5 + 258);
  v30 = v5[v3];
  if ( v3 >= a2[33] )
    v31 >>= 2;
  if ( (unsigned int)v32 > a2[27] )
    v32 = a2[27];
  do
  {
    v7 = (_BYTE *)(a1 + a2[12]);
    if ( v7[v3] == v30 && v7[v3 - 1] == v29 && *v7 == *v5 )
    {
      v8 = v7[1];
      v9 = (int)(v7 + 1);
      if ( v8 == v5[1] )
      {
        v10 = (unsigned int)(v5 + 2);
        v11 = (_BYTE *)(v9 + 1);
        do
        {
          v12 = *(_BYTE *)(v10++ + 1);
          v13 = v11 + 1;
          if ( v12 != *v13 )
            break;
          v14 = *(_BYTE *)(v10++ + 1);
          v15 = v13 + 1;
          if ( v14 != *v15 )
            break;
          v16 = *(_BYTE *)(v10++ + 1);
          v17 = v15 + 1;
          if ( v16 != *v17 )
            break;
          v18 = *(_BYTE *)(v10++ + 1);
          v19 = v17 + 1;
          if ( v18 != *v19 )
            break;
          v20 = *(_BYTE *)(v10++ + 1);
          v21 = v19 + 1;
          if ( v20 != *v21 )
            break;
          v22 = *(_BYTE *)(v10++ + 1);
          v23 = v21 + 1;
          if ( v22 != *v23 )
            break;
          v24 = *(_BYTE *)(v10++ + 1);
          v25 = v23 + 1;
          if ( v24 != *v25 )
            break;
          v26 = *(_BYTE *)(v10++ + 1);
          v11 = v25 + 1;
          if ( v26 != *v11 )
            break;
        }
        while ( v10 < v6 );
        v27 = v10 - v6 + 258;
        v5 = (_BYTE *)(v6 - 258);
        if ( v27 > (signed int)v3 )
        {
          a2[26] = a1;
          v3 = v27;
          if ( v27 >= v32 )
            break;
          v29 = v5[v27 - 1];
          v30 = v5[v27];
        }
      }
    }
    a1 = *(unsigned __int16 *)(a2[14] + 2 * (a1 & a2[11]));
    if ( a1 <= v33 )
      break;
    --v31;
  }
  while ( v31 );
  result = a2[27];
  if ( v3 <= result )
    result = v3;
  return result;
}

//----- (004BB150) --------------------------------------------------------
int __usercall sub_4BB150@<eax>(_DWORD *a1@<esi>, int a2)
{
  int v2; // ecx
  char v3; // dl
  _BYTE *v4; // eax
  int v5; // ecx
  unsigned int v6; // edi
  unsigned int v7; // eax
  _BYTE *v8; // ecx
  char v9; // dl
  _BYTE *v10; // ecx
  char v11; // dl
  _BYTE *v12; // ecx
  char v13; // dl
  _BYTE *v14; // ecx
  char v15; // dl
  _BYTE *v16; // ecx
  char v17; // dl
  _BYTE *v18; // ecx
  char v19; // dl
  _BYTE *v20; // ecx
  char v21; // dl
  _BYTE *v22; // ecx
  char v23; // dl
  int result; // eax
  unsigned int v25; // ecx

  v2 = a1[12];
  v3 = *(_BYTE *)(v2 + a2);
  v4 = (_BYTE *)(v2 + a1[25]);
  v5 = a2 + v2;
  v6 = (unsigned int)(v4 + 258);
  if ( v3 != *v4 || *(_BYTE *)(v5 + 1) != v4[1] )
    return 2;
  v7 = (unsigned int)(v4 + 2);
  v8 = (_BYTE *)(v5 + 2);
  do
  {
    v9 = *(_BYTE *)(v7++ + 1);
    v10 = v8 + 1;
    if ( v9 != *v10 )
      break;
    v11 = *(_BYTE *)(v7++ + 1);
    v12 = v10 + 1;
    if ( v11 != *v12 )
      break;
    v13 = *(_BYTE *)(v7++ + 1);
    v14 = v12 + 1;
    if ( v13 != *v14 )
      break;
    v15 = *(_BYTE *)(v7++ + 1);
    v16 = v14 + 1;
    if ( v15 != *v16 )
      break;
    v17 = *(_BYTE *)(v7++ + 1);
    v18 = v16 + 1;
    if ( v17 != *v18 )
      break;
    v19 = *(_BYTE *)(v7++ + 1);
    v20 = v18 + 1;
    if ( v19 != *v20 )
      break;
    v21 = *(_BYTE *)(v7++ + 1);
    v22 = v20 + 1;
    if ( v21 != *v22 )
      break;
    v23 = *(_BYTE *)(v7++ + 1);
    v8 = v22 + 1;
    if ( v23 != *v8 )
      break;
  }
  while ( v7 < v6 );
  result = v7 - v6 + 258;
  if ( result < 3 )
    return 2;
  v25 = a1[27];
  a1[26] = a2;
  if ( result > v25 )
    result = v25;
  return result;
}

//----- (004BB220) --------------------------------------------------------
void *__usercall sub_4BB220@<eax>(int *a1@<esi>)
{
  size_t v1; // ebp
  void *result; // eax
  int v3; // edi
  int v4; // edx
  int v5; // eax
  _WORD *v6; // ecx
  unsigned int v7; // eax
  __int16 v8; // ax
  size_t v9; // edx
  _WORD *v10; // ecx
  unsigned int v11; // eax
  int v12; // edi
  unsigned int v13; // ebx
  int v14; // edx
  int v15; // ecx
  int v16; // eax
  unsigned int v17; // edi
  int v18; // ecx
  unsigned __int8 *v19; // edx
  int v20; // eax
  unsigned int v21; // [esp+Ch] [ebp-8h]
  int v22; // [esp+10h] [ebp-4h]

  v1 = a1[9];
  do
  {
    result = (void *)a1[25];
    v3 = a1[13] - a1[27] - (_DWORD)result;
    v21 = a1[13] - a1[27] - (_DWORD)result;
    if ( (unsigned int)result >= a1[9] + v1 - 262 )
    {
      memcpy((void *)a1[12], (const void *)(a1[12] + v1), v1);
      v4 = a1[17];
      v5 = a1[15];
      a1[26] -= v1;
      a1[25] -= v1;
      a1[21] -= v1;
      v6 = (_WORD *)(v5 + 2 * v4);
      do
      {
        v7 = (unsigned __int16)*(v6 - 1);
        --v6;
        if ( v7 < v1 )
          v8 = 0;
        else
          v8 = v7 - v1;
        --v4;
        *v6 = v8;
      }
      while ( v4 );
      v9 = v1;
      v10 = (_WORD *)(a1[14] + 2 * v1);
      do
      {
        v11 = (unsigned __int16)*(v10 - 1);
        --v10;
        if ( v11 < v1 )
          result = 0;
        else
          result = (void *)(v11 - v1);
        --v9;
        *v10 = (_WORD)result;
      }
      while ( v9 );
      v21 = v1 + v3;
    }
    v12 = *a1;
    if ( !*(_DWORD *)(*a1 + 4) )
      break;
    result = (void *)(a1[12] + a1[25] + a1[27]);
    v13 = *(_DWORD *)(v12 + 4);
    v22 = a1[12] + a1[25] + a1[27];
    if ( v13 > v21 )
      v13 = v21;
    if ( !v13 )
      goto LABEL_24;
    v14 = *(_DWORD *)(v12 + 28);
    *(_DWORD *)(v12 + 4) -= v13;
    v15 = *(_DWORD *)(v14 + 24);
    if ( v15 == 1 )
    {
      v16 = sub_4BDE00(*(_DWORD *)(v12 + 48), *(unsigned __int8 **)v12, v13);
LABEL_22:
      *(_DWORD *)(v12 + 48) = v16;
      result = (void *)v22;
      goto LABEL_23;
    }
    if ( v15 == 2 )
    {
      v16 = sub_4BFFF0(*(_DWORD *)(v12 + 48), *(_DWORD *)v12, v13);
      goto LABEL_22;
    }
LABEL_23:
    result = memcpy(result, *(const void **)v12, v13);
    *(_DWORD *)v12 += v13;
    *(_DWORD *)(v12 + 8) += v13;
LABEL_24:
    a1[27] += v13;
    v17 = a1[27];
    if ( v17 >= 3 )
    {
      v18 = a1[20];
      v19 = (unsigned __int8 *)(a1[12] + a1[25]);
      v20 = *v19;
      a1[16] = v20;
      result = (void *)(a1[19] & (v19[1] ^ (v20 << v18)));
      a1[16] = (int)result;
    }
  }
  while ( v17 < 0x106 && *(_DWORD *)(*a1 + 4) );
  return result;
}

//----- (004BB370) --------------------------------------------------------
signed int __cdecl sub_4BB370(int *a1, int a2)
{
  unsigned int v2; // eax
  bool v3; // zf
  int v4; // ecx
  unsigned int v5; // edx
  unsigned int v6; // eax
  _BYTE *v7; // edx
  int v8; // edi
  int v9; // eax
  size_t v10; // ebx
  int v11; // eax
  _DWORD *v12; // edi
  int v13; // edx
  unsigned int v14; // ecx
  _BYTE *v15; // eax
  int v16; // edi
  int v17; // eax
  size_t v18; // ebx
  int v19; // eax
  _DWORD *v20; // edi
  int v22; // ecx
  _BYTE *v23; // eax
  int v24; // eax
  int v25; // [esp+Ch] [ebp-4h]

  v25 = 0xFFFF;
  if ( (unsigned int)(a1[3] - 5) < 0xFFFF )
    v25 = a1[3] - 5;
  while ( 1 )
  {
    v2 = a1[27];
    if ( v2 <= 1 )
    {
      sub_4BB220(a1);
      v2 = a1[27];
      if ( !v2 )
        break;
    }
    v3 = v2 + a1[25] == 0;
    a1[25] += v2;
    v4 = a1[21];
    v5 = a1[25];
    a1[27] = 0;
    v6 = v4 + v25;
    if ( !v3 && v5 < v6 )
      goto LABEL_36;
    a1[27] = v5 - v6;
    a1[25] = v6;
    if ( v4 < 0 )
      v7 = 0;
    else
      v7 = (_BYTE *)(v4 + a1[12]);
    sub_4BF860((int)a1, v7, v25, 0);
    v8 = *a1;
    a1[21] = a1[25];
    v9 = *(_DWORD *)(v8 + 28);
    v10 = *(_DWORD *)(v9 + 20);
    if ( v10 > *(_DWORD *)(v8 + 16) )
      v10 = *(_DWORD *)(v8 + 16);
    if ( v10 )
    {
      memcpy(*(void **)(v8 + 12), *(const void **)(v9 + 16), v10);
      v11 = *(_DWORD *)(v8 + 28);
      *(_DWORD *)(v8 + 12) += v10;
      *(_DWORD *)(v11 + 16) += v10;
      *(_DWORD *)(v8 + 20) += v10;
      *(_DWORD *)(v8 + 16) -= v10;
      *(_DWORD *)(*(_DWORD *)(v8 + 28) + 20) -= v10;
      v12 = *(_DWORD **)(v8 + 28);
      if ( !v12[5] )
        v12[4] = v12[2];
    }
    if ( *(_DWORD *)(*a1 + 16) )
    {
LABEL_36:
      v13 = a1[21];
      v14 = a1[25] - v13;
      if ( v14 < a1[9] - 262 )
        continue;
      if ( v13 < 0 )
        v15 = 0;
      else
        v15 = (_BYTE *)(v13 + a1[12]);
      sub_4BF860((int)a1, v15, v14, 0);
      v16 = *a1;
      a1[21] = a1[25];
      v17 = *(_DWORD *)(v16 + 28);
      v18 = *(_DWORD *)(v17 + 20);
      if ( v18 > *(_DWORD *)(v16 + 16) )
        v18 = *(_DWORD *)(v16 + 16);
      if ( v18 )
      {
        memcpy(*(void **)(v16 + 12), *(const void **)(v17 + 16), v18);
        v19 = *(_DWORD *)(v16 + 28);
        *(_DWORD *)(v16 + 12) += v18;
        *(_DWORD *)(v19 + 16) += v18;
        *(_DWORD *)(v16 + 20) += v18;
        *(_DWORD *)(v16 + 16) -= v18;
        *(_DWORD *)(*(_DWORD *)(v16 + 28) + 20) -= v18;
        v20 = *(_DWORD **)(v16 + 28);
        if ( !v20[5] )
          v20[4] = v20[2];
      }
      if ( *(_DWORD *)(*a1 + 16) )
        continue;
    }
    return 0;
  }
  if ( !a2 )
    return 0;
  v22 = a1[21];
  if ( v22 < 0 )
    v23 = 0;
  else
    v23 = (_BYTE *)(v22 + a1[12]);
  sub_4BF860((int)a1, v23, a1[25] - v22, a2 == 4);
  a1[21] = a1[25];
  sub_4BA820(*a1);
  v24 = 0;
  if ( !*(_DWORD *)(*a1 + 16) )
    return a2 != 4 ? 0 : 2;
  LOBYTE(v24) = a2 == 4;
  return 2 * v24 + 1;
}

//----- (004BBD40) --------------------------------------------------------
signed int __cdecl sub_4BBD40(_DWORD *a1)
{
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // eax
  int v4; // eax

  if ( !a1 )
    return -2;
  v1 = (_DWORD *)a1[7];
  if ( !v1 || !a1[8] || !a1[9] )
    return -2;
  a1[5] = 0;
  a1[2] = 0;
  a1[6] = 0;
  a1[11] = 2;
  v1[4] = v1[2];
  v2 = v1[6];
  v1[5] = 0;
  if ( v2 < 0 )
    v1[6] = -v2;
  v3 = v1[6];
  v1[1] = v1[6] != 0 ? 42 : 113;
  if ( v3 == 2 )
    v4 = sub_4BFFF0(0, 0, 0);
  else
    v4 = sub_4BDE00(0, 0, 0);
  a1[12] = v4;
  v1[8] = 0;
  sub_4BF200((int)v1);
  sub_4BAF50((int)v1);
  return 0;
}

//----- (004BC140) --------------------------------------------------------
signed int __cdecl sub_4BC140(_DWORD *a1, unsigned int a2, int a3, signed int a4, int a5, unsigned int a6, _BYTE *a7, int a8)
{
  signed int v8; // ebp
  bool v10; // zf
  int v11; // ebx
  _DWORD *v12; // eax
  _DWORD *v13; // esi
  signed int v14; // eax
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  int v18; // ecx
  int v19; // eax
  unsigned int v20; // ecx

  v8 = 1;
  if ( !a7 || *a7 != 49 || a8 != 56 )
    return -6;
  if ( !a1 )
    return -2;
  v10 = a1[8] == 0;
  a1[6] = 0;
  if ( v10 )
  {
    a1[8] = sub_4C0050;
    a1[10] = 0;
  }
  if ( !a1[9] )
    a1[9] = sub_4C0070;
  if ( a2 == -1 )
    a2 = 6;
  v11 = a4;
  if ( a4 >= 0 )
  {
    if ( a4 > 15 )
    {
      v8 = 2;
      v11 = a4 - 16;
    }
  }
  else
  {
    v8 = 0;
    v11 = -a4;
  }
  if ( (unsigned int)(a5 - 1) > 8 || a3 != 8 || (unsigned int)(v11 - 8) > 7 || a2 > 9 || a6 > 3 )
    return -2;
  if ( v11 == 8 )
    v11 = 9;
  v12 = (_DWORD *)((int (__cdecl *)(_DWORD, signed int, signed int))a1[8])(a1[10], 1, 5816);
  v13 = v12;
  if ( v12 )
  {
    a1[7] = v12;
    v12[6] = v8;
    v12[10] = v11;
    v12[11] = (1 << v11) - 1;
    v14 = 1 << (a5 + 7);
    v13[18] = a5 + 7;
    *v13 = a1;
    v13[17] = v14;
    v13[19] = v14 - 1;
    v13[9] = 1 << v11;
    v13[20] = (a5 + 9) / 3u;
    v15 = ((int (__cdecl *)(_DWORD, signed int, signed int))a1[8])(a1[10], 1 << v11, 2);
    v16 = v13[9];
    v13[12] = v15;
    v17 = ((int (__cdecl *)(_DWORD, int, signed int))a1[8])(a1[10], v16, 2);
    v18 = v13[17];
    v13[14] = v17;
    v13[15] = ((int (__cdecl *)(_DWORD, int, signed int))a1[8])(a1[10], v18, 2);
    v13[1445] = 1 << (a5 + 6);
    v19 = ((int (__cdecl *)(_DWORD, signed int, signed int))a1[8])(a1[10], 1 << (a5 + 6), 4);
    v20 = v13[1445];
    v10 = v13[12] == 0;
    v13[2] = v19;
    v13[3] = 4 * v20;
    if ( !v10 && v13[14] && v13[15] && v19 )
    {
      v13[1447] = v19 + 2 * (v20 >> 1);
      v13[1444] = v20 + v19 + 2 * v20;
      v13[31] = a2;
      v13[32] = a6;
      *((_BYTE *)v13 + 29) = 8;
      return sub_4BBD40(a1);
    }
    v13[1] = 666;
    a1[6] = aInsufficientMe;
    sub_4BAC80((int)a1);
  }
  return -4;
}

//----- (004BC360) --------------------------------------------------------
signed int __cdecl sub_4BC360(_DWORD *a1, unsigned int a2, _BYTE *a3, int a4)
{
  return sub_4BC140(a1, a2, 8, 15, 8, 0, a3, a4);
}

//----- (004BC390) --------------------------------------------------------
signed int __cdecl sub_4BC390(_DWORD *a1)
{
  _DWORD *v1; // eax

  if ( !a1 )
    return -2;
  v1 = (_DWORD *)a1[7];
  if ( !v1 )
    return -2;
  v1[6] = 0;
  a1[5] = 0;
  a1[2] = 0;
  a1[6] = 0;
  *v1 = 0;
  v1[1] = 0;
  v1[3] = 0;
  v1[8] = 0;
  v1[9] = 0;
  v1[12] = 0;
  v1[13] = 0;
  v1[25] = v1 + 330;
  v1[18] = v1 + 330;
  v1[17] = v1 + 330;
  return 0;
}

//----- (004BC3E0) --------------------------------------------------------
signed int __cdecl sub_4BC3E0(_DWORD *a1, signed int a2, _BYTE *a3, int a4)
{
  bool v4; // zf
  _DWORD *v5; // eax
  int v7; // ecx

  if ( !a3 || *a3 != byte_53B8CC || a4 != 56 )
    return -6;
  if ( a1 )
  {
    v4 = a1[8] == 0;
    a1[6] = 0;
    if ( v4 )
    {
      a1[8] = sub_4C0050;
      a1[10] = 0;
    }
    if ( !a1[9] )
      a1[9] = sub_4C0070;
    v5 = (_DWORD *)((int (__cdecl *)(_DWORD, signed int, signed int))a1[8])(a1[10], 1, 7080);
    if ( !v5 )
      return -4;
    v7 = a2;
    a1[7] = v5;
    if ( a2 >= 0 )
    {
      v5[2] = (a2 >> 4) + 1;
      if ( a2 < 48 )
        v7 = a2 & 0xF;
    }
    else
    {
      v5[2] = 0;
      v7 = -a2;
    }
    if ( (unsigned int)(v7 - 8) <= 7 )
    {
      v5[7] = v7;
      v5[11] = 0;
      return sub_4BC390(a1);
    }
    ((void (__cdecl *)(_DWORD, _DWORD *))a1[9])(a1[10], v5);
    a1[7] = 0;
  }
  return -2;
}
// 53B8CC: using guessed type char byte_53B8CC;

//----- (004BC4B0) --------------------------------------------------------
signed int __cdecl sub_4BC4B0(_DWORD *a1, _BYTE *a2, int a3)
{
  return sub_4BC3E0(a1, 15, a2, a3);
}

//----- (004BC4D0) --------------------------------------------------------
_DWORD *__usercall sub_4BC4D0@<eax>(_DWORD *result@<eax>)
{
  result[17] = &unk_51F278;
  result[19] = 9;
  result[18] = &unk_51FA78;
  result[20] = 5;
  return result;
}

//----- (004BC4F0) --------------------------------------------------------
signed int __usercall sub_4BC4F0@<eax>(int a1@<eax>, int a2@<ebx>)
{
  int v2; // esi
  int v3; // edi
  int v4; // eax
  signed int result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  unsigned int v8; // eax
  int v9; // eax
  size_t v10; // ebp
  size_t v11; // edi
  int v12; // edx
  unsigned int v13; // eax
  unsigned int v14; // ecx

  v2 = *(_DWORD *)(a2 + 28);
  v3 = a1;
  if ( !*(_DWORD *)(v2 + 44) )
  {
    v4 = (*(int (__cdecl **)(_DWORD, signed int, signed int))(a2 + 32))(
           *(_DWORD *)(a2 + 40),
           1 << *(_DWORD *)(v2 + 28),
           1);
    *(_DWORD *)(v2 + 44) = v4;
    if ( !v4 )
      return 1;
  }
  if ( !*(_DWORD *)(v2 + 32) )
  {
    v6 = *(_DWORD *)(v2 + 28);
    *(_DWORD *)(v2 + 40) = 0;
    *(_DWORD *)(v2 + 36) = 0;
    *(_DWORD *)(v2 + 32) = 1 << v6;
  }
  v7 = v3 - *(_DWORD *)(a2 + 16);
  v8 = *(_DWORD *)(v2 + 32);
  if ( v7 < v8 )
  {
    v10 = v8 - *(_DWORD *)(v2 + 40);
    if ( v10 > v7 )
      v10 = v7;
    memcpy((void *)(*(_DWORD *)(v2 + 40) + *(_DWORD *)(v2 + 44)), (const void *)(*(_DWORD *)(a2 + 12) - v7), v10);
    v11 = v7 - v10;
    if ( v11 )
    {
      memcpy(*(void **)(v2 + 44), (const void *)(*(_DWORD *)(a2 + 12) - v11), v11);
      v12 = *(_DWORD *)(v2 + 32);
      *(_DWORD *)(v2 + 40) = v11;
      *(_DWORD *)(v2 + 36) = v12;
      result = 0;
    }
    else
    {
      *(_DWORD *)(v2 + 40) += v10;
      v13 = *(_DWORD *)(v2 + 32);
      if ( *(_DWORD *)(v2 + 40) == v13 )
        *(_DWORD *)(v2 + 40) = 0;
      v14 = *(_DWORD *)(v2 + 36);
      if ( v14 < v13 )
        *(_DWORD *)(v2 + 36) = v10 + v14;
      result = 0;
    }
  }
  else
  {
    memcpy(*(void **)(v2 + 44), (const void *)(*(_DWORD *)(a2 + 12) - v8), *(_DWORD *)(v2 + 32));
    v9 = *(_DWORD *)(v2 + 32);
    *(_DWORD *)(v2 + 40) = 0;
    *(_DWORD *)(v2 + 36) = v9;
    result = 0;
  }
  return result;
}

//----- (004BC5E0) --------------------------------------------------------
signed int __cdecl sub_4BC5E0(int a1, int a2)
{
  int *v2; // edi
  unsigned int v3; // edx
  unsigned int v4; // ebx
  unsigned __int8 *v5; // ebp
  int v6; // eax
  unsigned int v7; // esi
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  bool v19; // zf
  int v20; // eax
  int v21; // ecx
  unsigned int v22; // eax
  int v23; // eax
  unsigned int v24; // eax
  int v25; // ecx
  int v26; // eax
  unsigned int v27; // eax
  int v28; // ecx
  int v29; // eax
  int v30; // eax
  int v31; // eax
  int v32; // eax
  unsigned __int16 v33; // ax
  int v34; // eax
  int v35; // eax
  int v36; // ecx
  int v37; // eax
  char v38; // cl
  unsigned int v39; // ebx
  int v40; // esi
  int v41; // ecx
  int v42; // eax
  int v43; // eax
  unsigned int v44; // eax
  int v45; // eax
  int v46; // ecx
  unsigned int v47; // ebx
  char v48; // al
  unsigned int v49; // eax
  int v50; // ecx
  bool v51; // cf
  int v52; // eax
  signed int v53; // eax
  unsigned int v54; // eax
  int v55; // eax
  int v56; // ecx
  int v57; // eax
  int v58; // eax
  int v59; // ecx
  int v60; // eax
  int v61; // ecx
  int v62; // eax
  unsigned int v63; // ebx
  signed int v64; // eax
  int v65; // eax
  unsigned int v66; // ebx
  __int16 v67; // ax
  int v68; // edx
  unsigned int v69; // ecx
  signed int v70; // eax
  void *v71; // edx
  int v72; // ecx
  unsigned int v73; // ecx
  size_t v74; // eax
  int v75; // eax
  int v76; // eax
  unsigned int v77; // eax
  int v78; // eax
  int v79; // ecx
  size_t v80; // eax
  int v81; // eax
  int v82; // eax
  unsigned int v83; // eax
  int v84; // eax
  int v85; // ecx
  unsigned int v86; // eax
  unsigned int v87; // eax
  unsigned int v88; // ecx
  int v89; // ecx
  char *v90; // ecx
  int v91; // ecx
  _BYTE *v92; // eax
  char v93; // cl
  char *v94; // eax
  int v95; // eax
  unsigned int v96; // eax
  int v97; // eax
  int v98; // eax
  unsigned __int16 v99; // cx
  int v100; // eax
  signed int result; // eax
  int v102; // esi
  int v103; // ebp
  unsigned int v104; // ebx
  int v105; // eax
  unsigned int v106; // [esp-18h] [ebp-48h]
  unsigned __int8 *v107; // [esp-14h] [ebp-44h]
  unsigned int v108; // [esp+4h] [ebp-2Ch]
  unsigned int Size; // [esp+8h] [ebp-28h]
  size_t Sizea; // [esp+8h] [ebp-28h]
  size_t Sizeb; // [esp+8h] [ebp-28h]
  size_t Sizec; // [esp+8h] [ebp-28h]
  size_t Sized; // [esp+8h] [ebp-28h]
  size_t Sizee; // [esp+8h] [ebp-28h]
  size_t Sizef; // [esp+8h] [ebp-28h]
  size_t Sizeg; // [esp+8h] [ebp-28h]
  size_t Sizeh; // [esp+8h] [ebp-28h]
  size_t Sizei; // [esp+8h] [ebp-28h]
  size_t Sizej; // [esp+8h] [ebp-28h]
  size_t v120; // [esp+Ch] [ebp-24h]
  size_t v121; // [esp+Ch] [ebp-24h]
  char v122; // [esp+Eh] [ebp-22h]
  unsigned int v123; // [esp+10h] [ebp-20h]
  __int16 v124; // [esp+14h] [ebp-1Ch]
  char v125; // [esp+16h] [ebp-1Ah]
  char v126; // [esp+17h] [ebp-19h]
  void *Dst; // [esp+18h] [ebp-18h]
  int v128; // [esp+1Ch] [ebp-14h]
  char *v129; // [esp+20h] [ebp-10h]
  int v130; // [esp+24h] [ebp-Ch]
  unsigned int v131; // [esp+28h] [ebp-8h]
  unsigned int v132; // [esp+2Ch] [ebp-4h]

  if ( !a1 )
    return -2;
  v2 = *(int **)(a1 + 28);
  if ( !v2 || !*(_DWORD *)(a1 + 12) || !*(_DWORD *)a1 && *(_DWORD *)(a1 + 4) )
    return -2;
  if ( *v2 == 11 )
    *v2 = 12;
  v3 = *(_DWORD *)(a1 + 4);
  v4 = v2[12];
  v5 = *(unsigned __int8 **)a1;
  Dst = *(void **)(a1 + 12);
  v6 = *v2;
  v7 = v2[13];
  v123 = *(_DWORD *)(a1 + 16);
  v108 = v3;
  v122 = BYTE2(v4);
  v132 = v3;
  v128 = v123;
  v130 = 0;
LABEL_9:
  switch ( v6 )
  {
    case 0:
      if ( !v2[2] )
      {
        *v2 = 12;
        goto LABEL_262;
      }
      for ( ; v7 < 0x10; v122 = BYTE2(v4) )
      {
        if ( !v3 )
          goto LABEL_270;
        v8 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v8;
        v108 = v3;
      }
      v9 = v2[2];
      if ( v9 & 2 && v4 == 35615 )
      {
        v2[5] = sub_4BFFF0(0, 0, 0);
        v124 = -29921;
        v10 = sub_4BFFF0(v2[5], (int)&v124, 2u);
        v3 = v108;
        v4 = 0;
        v2[5] = v10;
        v122 = 0;
        v7 = 0;
        *v2 = 1;
        goto LABEL_262;
      }
      v2[4] = 0;
      if ( !(v9 & 1) || ((v4 >> 8) + ((unsigned __int8)v4 << 8)) % 0x1F )
      {
        *(_DWORD *)(a1 + 24) = aIncorrectHeade;
        v3 = v108;
        goto LABEL_261;
      }
      if ( (v4 & 0xF) != 8 )
      {
        v3 = v108;
        *(_DWORD *)(a1 + 24) = aUnknownCompres;
        goto LABEL_261;
      }
      v4 >>= 4;
      v7 -= 4;
      v122 = BYTE2(v4);
      if ( (v4 & 0xF) + 8 > v2[7] )
      {
        *(_DWORD *)(a1 + 24) = aInvalidWindowS;
        v3 = v108;
        goto LABEL_261;
      }
      v11 = sub_4BDE00(0, 0, 0);
      v3 = v108;
      v2[5] = v11;
      *(_DWORD *)(a1 + 48) = v11;
      *v2 = ~BYTE1(v4) & 2 | 9;
      v4 = 0;
      v122 = 0;
      v7 = 0;
      goto LABEL_262;
    case 1:
      if ( v7 >= 0x10 )
        goto LABEL_29;
      do
      {
        if ( !v3 )
          goto LABEL_270;
        v12 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v12;
        v108 = v3;
        v122 = BYTE2(v4);
      }
      while ( v7 < 0x10 );
LABEL_29:
      v2[4] = v4;
      if ( (_BYTE)v4 != 8 )
      {
        *(_DWORD *)(a1 + 24) = aUnknownCompres_0;
        goto LABEL_261;
      }
      if ( v4 & 0xE000 )
      {
        *(_DWORD *)(a1 + 24) = aUnknownHeaderF;
        goto LABEL_261;
      }
      if ( v4 & 0x200 )
      {
        LOBYTE(v124) = 8;
        HIBYTE(v124) = BYTE1(v4);
        v13 = sub_4BFFF0(v2[5], (int)&v124, 2u);
        v3 = v108;
        v2[5] = v13;
      }
      v4 = 0;
      v7 = 0;
      *v2 = 2;
      do
      {
LABEL_37:
        if ( !v3 )
          goto LABEL_270;
        v14 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v14;
        v108 = v3;
      }
      while ( v7 < 0x20 );
LABEL_39:
      if ( v2[4] & 0x200 )
      {
        v124 = v4;
        v125 = BYTE2(v4);
        v126 = HIBYTE(v4);
        v15 = sub_4BFFF0(v2[5], (int)&v124, 4u);
        v3 = v108;
        v2[5] = v15;
      }
      v4 = 0;
      v7 = 0;
      *v2 = 3;
      do
      {
LABEL_43:
        if ( !v3 )
          goto LABEL_270;
        v16 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v16;
        v108 = v3;
      }
      while ( v7 < 0x10 );
LABEL_45:
      if ( v2[4] & 0x200 )
      {
        v124 = v4;
        v17 = sub_4BFFF0(v2[5], (int)&v124, 2u);
        v3 = v108;
        v2[5] = v17;
      }
      v4 = 0;
      v122 = 0;
      v7 = 0;
      *v2 = 4;
LABEL_48:
      if ( !(v2[4] & 0x400) )
        goto LABEL_55;
      if ( v7 >= 0x10 )
      {
LABEL_52:
        v19 = (v2[4] & 0x200) == 0;
        v2[14] = v4;
        if ( !v19 )
        {
          v124 = v4;
          v20 = sub_4BFFF0(v2[5], (int)&v124, 2u);
          v3 = v108;
          v2[5] = v20;
        }
        v4 = 0;
        v122 = 0;
        v7 = 0;
LABEL_55:
        *v2 = 5;
LABEL_56:
        v21 = v2[4];
        if ( !(v21 & 0x400) )
          goto LABEL_292;
        v22 = v2[14];
        Size = v2[14];
        if ( v22 > v3 )
        {
          v22 = v3;
          Size = v3;
        }
        if ( v22 )
        {
          if ( v21 & 0x200 )
          {
            v23 = sub_4BFFF0(v2[5], (int)v5, Size);
            v3 = v108;
            v2[5] = v23;
            v22 = Size;
          }
          v3 -= v22;
          v5 += v22;
          v2[14] -= v22;
          v108 = v3;
        }
        if ( !v2[14] )
        {
LABEL_292:
          *v2 = 6;
LABEL_65:
          if ( !(v2[4] & 0x800) )
            goto LABEL_293;
          if ( v3 )
          {
            v24 = 0;
            do
            {
              v25 = v5[v24++];
              v129 = (char *)v25;
            }
            while ( v25 && v24 < v3 );
            Sizea = v24;
            if ( v2[4] & 0x2000 )
            {
              v26 = sub_4BFFF0(v2[5], (int)v5, v24);
              v3 = v108;
              v2[5] = v26;
              v24 = Sizea;
            }
            v3 -= v24;
            v5 += v24;
            v108 = v3;
            if ( !v129 )
            {
LABEL_293:
              *v2 = 7;
LABEL_74:
              if ( !(v2[4] & 0x1000) )
                goto LABEL_291;
              if ( v3 )
              {
                v27 = 0;
                do
                {
                  v28 = v5[v27++];
                  v129 = (char *)v28;
                }
                while ( v28 && v27 < v3 );
                Sizeb = v27;
                if ( v2[4] & 0x2000 )
                {
                  v29 = sub_4BFFF0(v2[5], (int)v5, v27);
                  v3 = v108;
                  v2[5] = v29;
                  v27 = Sizeb;
                }
                v3 -= v27;
                v5 += v27;
                v108 = v3;
                if ( !v129 )
                {
LABEL_291:
                  *v2 = 8;
LABEL_83:
                  if ( v2[4] & 0x200 )
                  {
                    if ( v7 < 0x10 )
                    {
                      while ( v3 )
                      {
                        v30 = *v5 << v7;
                        --v3;
                        v7 += 8;
                        ++v5;
                        v4 += v30;
                        v108 = v3;
                        v122 = BYTE2(v4);
                        if ( v7 >= 0x10 )
                          goto LABEL_87;
                      }
                      goto LABEL_270;
                    }
LABEL_87:
                    if ( v4 != *((unsigned __int16 *)v2 + 10) )
                    {
                      *(_DWORD *)(a1 + 24) = aHeaderCrcMisma;
                      goto LABEL_261;
                    }
                    v4 = 0;
                    v122 = 0;
                    v7 = 0;
                  }
                  v31 = sub_4BFFF0(0, 0, 0);
                  v3 = v108;
                  v2[5] = v31;
                  *(_DWORD *)(a1 + 48) = v31;
                  *v2 = 11;
                  goto LABEL_262;
                }
              }
            }
          }
        }
      }
      else
      {
        while ( v3 )
        {
          v18 = *v5 << v7;
          --v3;
          v7 += 8;
          ++v5;
          v4 += v18;
          v108 = v3;
          if ( v7 >= 0x10 )
            goto LABEL_52;
        }
      }
      goto LABEL_270;
    case 2:
      if ( v7 < 0x20 )
        goto LABEL_37;
      goto LABEL_39;
    case 3:
      if ( v7 < 0x10 )
        goto LABEL_43;
      goto LABEL_45;
    case 4:
      goto LABEL_48;
    case 5:
      goto LABEL_56;
    case 6:
      goto LABEL_65;
    case 7:
      goto LABEL_74;
    case 8:
      goto LABEL_83;
    case 9:
      if ( v7 >= 0x20 )
        goto LABEL_94;
      do
      {
        if ( !v3 )
          goto LABEL_270;
        v32 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v32;
        v108 = v3;
        v122 = BYTE2(v4);
      }
      while ( v7 < 0x20 );
LABEL_94:
      LOBYTE(v33) = 0;
      HIBYTE(v33) = v122;
      v34 = v33 + (((v4 << 16) + (v4 & 0xFF00)) << 8) + (v4 >> 24);
      v2[5] = v34;
      *(_DWORD *)(a1 + 48) = v34;
      v4 = 0;
      v7 = 0;
      *v2 = 10;
LABEL_95:
      if ( !v2[3] )
      {
        *(_DWORD *)(a1 + 12) = Dst;
        *(_DWORD *)a1 = v5;
        *(_DWORD *)(a1 + 16) = v123;
        *(_DWORD *)(a1 + 4) = v3;
        v2[13] = v7;
        v2[12] = v4;
        return 2;
      }
      v35 = sub_4BDE00(0, 0, 0);
      v2[5] = v35;
      *(_DWORD *)(a1 + 48) = v35;
      v3 = v108;
      *v2 = 11;
LABEL_97:
      if ( a2 == 5 )
        goto LABEL_270;
LABEL_98:
      if ( v2[1] )
      {
        v36 = v7 & 7;
        v4 >>= v36;
        v7 -= v36;
        *v2 = 24;
        v122 = BYTE2(v4);
        goto LABEL_262;
      }
      if ( v7 < 3 )
      {
        while ( v3 )
        {
          v37 = *v5 << v7;
          --v3;
          v7 += 8;
          ++v5;
          v4 += v37;
          v108 = v3;
          if ( v7 >= 3 )
            goto LABEL_103;
        }
        goto LABEL_270;
      }
LABEL_103:
      v38 = v4;
      v39 = v4 >> 1;
      v40 = v7 - 1;
      v2[1] = v38 & 1;
      switch ( v39 & 3 )
      {
        case 0u:
          v4 = v39 >> 2;
          *v2 = 13;
          v122 = BYTE2(v4);
          v7 = v40 - 2;
          break;
        case 1u:
          sub_4BC4D0(v2);
          v4 = v39 >> 2;
          *v2 = 18;
          v122 = BYTE2(v4);
          v7 = v40 - 2;
          break;
        case 2u:
          v4 = v39 >> 2;
          *v2 = 15;
          v122 = BYTE2(v4);
          v7 = v40 - 2;
          break;
        case 3u:
          *(_DWORD *)(a1 + 24) = aInvalidBlockTy;
          *v2 = 27;
          goto LABEL_108;
        default:
LABEL_108:
          v4 = v39 >> 2;
          v122 = BYTE2(v4);
          v7 = v40 - 2;
          break;
      }
      goto LABEL_262;
    case 10:
      goto LABEL_95;
    case 11:
      goto LABEL_97;
    case 12:
      goto LABEL_98;
    case 13:
      v41 = v7 & 7;
      v4 >>= v41;
      v7 -= v41;
      v122 = BYTE2(v4);
      if ( v7 >= 0x20 )
        goto LABEL_112;
      do
      {
        if ( !v3 )
          goto LABEL_270;
        v42 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v42;
        v108 = v3;
        v122 = BYTE2(v4);
      }
      while ( v7 < 0x20 );
LABEL_112:
      v43 = (unsigned __int16)v4;
      if ( (unsigned __int16)v4 != ~v4 >> 16 )
      {
        *(_DWORD *)(a1 + 24) = aInvalidStoredB;
        goto LABEL_261;
      }
      v4 = 0;
      v2[14] = v43;
      v122 = 0;
      v7 = 0;
      *v2 = 14;
LABEL_115:
      v44 = v2[14];
      Sizec = v2[14];
      if ( !v44 )
        goto LABEL_193;
      if ( v44 > v3 )
      {
        v44 = v3;
        Sizec = v3;
      }
      if ( v44 > v123 )
      {
        v44 = v123;
        Sizec = v123;
      }
      if ( !v44 )
        goto LABEL_270;
      memcpy(Dst, v5, Sizec);
      v108 -= Sizec;
      v123 -= Sizec;
      Dst = (char *)Dst + Sizec;
      v3 = v108;
      v5 += Sizec;
      v2[14] -= Sizec;
      goto LABEL_262;
    case 14:
      goto LABEL_115;
    case 15:
      if ( v7 >= 0xE )
        goto LABEL_125;
      do
      {
        if ( !v3 )
          goto LABEL_270;
        v45 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v45;
        v108 = v3;
      }
      while ( v7 < 0xE );
LABEL_125:
      v46 = v4 & 0x1F;
      v47 = v4 >> 5;
      v48 = v47;
      v2[22] = v46 + 257;
      v47 >>= 5;
      v49 = (v48 & 0x1F) + 1;
      v50 = (v47 & 0xF) + 4;
      v4 = v47 >> 4;
      v7 -= 14;
      v51 = (unsigned int)v2[22] < 0x11E;
      v19 = v2[22] == 286;
      v2[23] = v49;
      v2[21] = v50;
      v122 = BYTE2(v4);
      if ( !v51 && !v19 || v49 > 0x1E )
      {
        *(_DWORD *)(a1 + 24) = aTooManyLengthO;
        goto LABEL_261;
      }
      v2[24] = 0;
      *v2 = 16;
LABEL_128:
      while ( v2[24] < (unsigned int)v2[21] )
      {
        for ( ; v7 < 3; v108 = v3 )
        {
          if ( !v3 )
            goto LABEL_270;
          v52 = *v5 << v7;
          --v3;
          v7 += 8;
          ++v5;
          v4 += v52;
        }
        *((_WORD *)v2 + (unsigned __int16)word_51FAF8[v2[24]++] + 52) = v4 & 7;
        v4 >>= 3;
        v7 -= 3;
        v122 = BYTE2(v4);
      }
      for ( ; (unsigned int)v2[24] < 0x13; ++v2[24] )
        *((_WORD *)v2 + (unsigned __int16)word_51FAF8[v2[24]] + 52) = 0;
      v2[25] = (int)(v2 + 330);
      v2[17] = (int)(v2 + 330);
      v2[19] = 7;
      v53 = sub_4C0540(0, (int)(v2 + 26), 0x13u, v2 + 25, (unsigned int *)v2 + 19, (_WORD *)v2 + 372);
      v3 = v108;
      v130 = v53;
      if ( v53 )
      {
        *(_DWORD *)(a1 + 24) = aInvalidCodeLen;
        goto LABEL_261;
      }
      v2[24] = 0;
      *v2 = 17;
LABEL_139:
      if ( v2[24] >= (unsigned int)(v2[22] + v2[23]) )
        goto LABEL_173;
      while ( 2 )
      {
        v54 = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
        Sized = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
        if ( (unsigned __int8)(*(_WORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1))) >> 8) <= v7 )
        {
LABEL_143:
          if ( v54 >> 16 < 0x10 )
          {
            if ( v7 < BYTE1(v54) )
            {
              while ( v3 )
              {
                v54 = *v5 << v7;
                --v3;
                v7 += 8;
                ++v5;
                v4 += v54;
                BYTE1(v54) = BYTE1(Sized);
                v108 = v3;
                if ( v7 >= BYTE1(Sized) )
                  goto LABEL_147;
              }
              goto LABEL_270;
            }
LABEL_147:
            v4 >>= SBYTE1(v54);
            v7 -= BYTE1(v54);
            *((_WORD *)v2 + v2[24]++ + 52) = HIWORD(Sized);
            v122 = BYTE2(v4);
LABEL_168:
            if ( v2[24] >= (unsigned int)(v2[22] + v2[23]) )
              goto LABEL_173;
            continue;
          }
          if ( HIWORD(Sized) == 16 )
          {
            v56 = BYTE1(v54);
            v129 = (char *)BYTE1(v54);
            if ( v7 < (unsigned int)BYTE1(v54) + 2 )
            {
              while ( v3 )
              {
                v57 = *v5 << v7;
                v56 = (int)v129;
                --v3;
                v7 += 8;
                v4 += v57;
                ++v5;
                v108 = v3;
                if ( v7 >= (unsigned int)(v129 + 2) )
                  goto LABEL_152;
              }
              goto LABEL_270;
            }
LABEL_152:
            v58 = v2[24];
            v4 >>= v56;
            v7 -= v56;
            v122 = BYTE2(v4);
            if ( !v58 )
            {
              *(_DWORD *)(a1 + 24) = aInvalidBitLeng;
              goto LABEL_172;
            }
            v59 = *((unsigned __int16 *)v2 + v58 + 51);
            v60 = (v4 & 3) + 3;
            v4 >>= 2;
            v129 = (char *)v59;
            Sizee = v60;
            v7 -= 2;
          }
          else
          {
            v61 = BYTE1(v54);
            v129 = (char *)BYTE1(v54);
            if ( HIWORD(Sized) == 17 )
            {
              if ( v7 < (unsigned int)BYTE1(v54) + 3 )
              {
                while ( v3 )
                {
                  v62 = *v5 << v7;
                  v61 = (int)v129;
                  --v3;
                  v7 += 8;
                  v4 += v62;
                  ++v5;
                  v108 = v3;
                  if ( v7 >= (unsigned int)(v129 + 3) )
                    goto LABEL_158;
                }
                goto LABEL_270;
              }
LABEL_158:
              v63 = v4 >> v61;
              Sizee = (v63 & 7) + 3;
              v4 = v63 >> 3;
              v64 = -3;
            }
            else
            {
              if ( v7 < (unsigned int)BYTE1(v54) + 7 )
              {
                while ( v3 )
                {
                  v65 = *v5 << v7;
                  v61 = (int)v129;
                  --v3;
                  v7 += 8;
                  v4 += v65;
                  ++v5;
                  v108 = v3;
                  if ( v7 >= (unsigned int)(v129 + 7) )
                    goto LABEL_162;
                }
                goto LABEL_270;
              }
LABEL_162:
              v66 = v4 >> v61;
              Sizee = (v66 & 0x7F) + 11;
              v4 = v66 >> 7;
              v64 = -7;
            }
            v7 += v64 - v61;
            v60 = Sizee;
            v129 = 0;
          }
          v122 = BYTE2(v4);
          if ( v60 + v2[24] <= (unsigned int)(v2[22] + v2[23]) )
          {
            if ( Sizee )
            {
              v67 = (signed __int16)v129;
              do
              {
                --Sizee;
                *((_WORD *)v2 + v2[24]++ + 52) = v67;
              }
              while ( Sizee );
            }
            goto LABEL_168;
          }
          *(_DWORD *)(a1 + 24) = aInvalidBitLeng_0;
LABEL_172:
          *v2 = 27;
LABEL_173:
          v2[25] = (int)(v2 + 330);
          v2[17] = (int)(v2 + 330);
          v2[19] = 9;
          v130 = sub_4C0540(1, (int)(v2 + 26), v2[22], v2 + 25, (unsigned int *)v2 + 19, (_WORD *)v2 + 372);
          if ( v130 )
          {
            *(_DWORD *)(a1 + 24) = aInvalidLiteral;
            v3 = v108;
            goto LABEL_261;
          }
          v2[18] = v2[25];
          v68 = v2[22];
          v69 = v2[23];
          v2[20] = 6;
          v70 = sub_4C0540(2, (int)v2 + 2 * v68 + 104, v69, v2 + 25, (unsigned int *)v2 + 20, (_WORD *)v2 + 372);
          v3 = v108;
          v130 = v70;
          if ( v70 )
          {
            *(_DWORD *)(a1 + 24) = aInvalidDistanc;
            goto LABEL_261;
          }
          *v2 = 18;
LABEL_178:
          if ( v3 >= 6 && v123 >= 0x102 )
          {
            v71 = Dst;
            *(_DWORD *)(a1 + 16) = v123;
            v72 = v128;
            *(_DWORD *)(a1 + 12) = v71;
            *(_DWORD *)a1 = v5;
            *(_DWORD *)(a1 + 4) = v108;
            v2[12] = v4;
            v2[13] = v7;
            sub_4C0080((_DWORD *)a1, v72);
            v73 = *(_DWORD *)(a1 + 16);
            v4 = v2[12];
            v5 = *(unsigned __int8 **)a1;
            v7 = v2[13];
            Dst = *(void **)(a1 + 12);
            v3 = *(_DWORD *)(a1 + 4);
            v123 = v73;
            v108 = *(_DWORD *)(a1 + 4);
            v122 = BYTE2(v4);
            goto LABEL_262;
          }
          v74 = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
          Sizef = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
          if ( (unsigned __int8)(*(_WORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1))) >> 8) > v7 )
          {
            while ( v3 )
            {
              v75 = *v5 << v7;
              --v3;
              v7 += 8;
              v4 += v75;
              ++v5;
              v108 = v3;
              v74 = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
              Sizef = v74;
              if ( BYTE1(v74) <= v7 )
                goto LABEL_184;
            }
            goto LABEL_270;
          }
LABEL_184:
          if ( (_BYTE)v74 && !(v74 & 0xF0) )
          {
            v131 = v74 >> 8;
            v129 = (char *)BYTE1(v74);
            v120 = v74;
            Sizeg = *(_DWORD *)(v2[17] + 4 * ((Sizef >> 16) + ((v4 & ((1 << (BYTE1(v74) + v74)) - 1)) >> SBYTE1(v74))));
            if ( BYTE1(v74) + (unsigned int)BYTE1(Sizeg) > v7 )
            {
              while ( v3 )
              {
                v76 = *v5 << v7;
                --v3;
                v7 += 8;
                v4 += v76;
                v129 = (char *)BYTE1(v120);
                ++v5;
                v108 = v3;
                Sizeg = *(_DWORD *)(v2[17]
                                  + 4 * (HIWORD(v120) + ((v4 & ((1 << (BYTE1(v120) + v120)) - 1)) >> SBYTE1(v120))));
                if ( BYTE1(v120) + (unsigned int)BYTE1(Sizeg) <= v7 )
                  goto LABEL_189;
              }
              goto LABEL_270;
            }
LABEL_189:
            v74 = Sizeg;
            v4 >>= SBYTE1(v120);
            v7 -= BYTE1(v120);
          }
          v4 >>= SBYTE1(v74);
          v7 -= BYTE1(v74);
          v129 = (char *)BYTE1(v74);
          v122 = BYTE2(v4);
          v2[14] = v74 >> 16;
          if ( (_BYTE)v74 )
          {
            if ( v74 & 0x20 )
            {
LABEL_193:
              *v2 = 11;
            }
            else
            {
              if ( v74 & 0x40 )
              {
                *(_DWORD *)(a1 + 24) = aInvalidLiteral_0;
              }
              else
              {
                v2[16] = v74 & 0xF;
                *v2 = 19;
LABEL_197:
                v77 = v2[16];
                if ( v77 )
                {
                  if ( v7 < v77 )
                  {
                    while ( v3 )
                    {
                      v78 = *v5 << v7;
                      --v3;
                      v7 += 8;
                      ++v5;
                      v4 += v78;
                      v108 = v3;
                      if ( v7 >= v2[16] )
                        goto LABEL_201;
                    }
                    goto LABEL_270;
                  }
LABEL_201:
                  v79 = v2[16];
                  v2[14] += v4 & ((1 << v79) - 1);
                  v4 >>= v79;
                  v7 -= v79;
                }
                *v2 = 20;
LABEL_203:
                v80 = *(_DWORD *)(v2[18] + 4 * (v4 & ((1 << v2[20]) - 1)));
                Sizeh = *(_DWORD *)(v2[18] + 4 * (v4 & ((1 << v2[20]) - 1)));
                if ( (unsigned __int8)(*(_WORD *)(v2[18] + 4 * (v4 & ((1 << v2[20]) - 1))) >> 8) > v7 )
                {
                  while ( v3 )
                  {
                    v81 = *v5 << v7;
                    --v3;
                    v7 += 8;
                    v4 += v81;
                    ++v5;
                    v108 = v3;
                    v80 = *(_DWORD *)(v2[18] + 4 * (v4 & ((1 << v2[20]) - 1)));
                    Sizeh = v80;
                    if ( BYTE1(v80) <= v7 )
                      goto LABEL_206;
                  }
                  goto LABEL_270;
                }
LABEL_206:
                if ( !(v80 & 0xF0) )
                {
                  v131 = v80 >> 8;
                  v129 = (char *)BYTE1(v80);
                  v121 = v80;
                  Sizei = *(_DWORD *)(v2[18]
                                    + 4 * ((Sizeh >> 16) + ((v4 & ((1 << (BYTE1(v80) + v80)) - 1)) >> SBYTE1(v80))));
                  if ( BYTE1(v80) + (unsigned int)BYTE1(Sizei) > v7 )
                  {
                    while ( v3 )
                    {
                      v82 = *v5 << v7;
                      --v3;
                      v7 += 8;
                      v4 += v82;
                      v129 = (char *)BYTE1(v121);
                      ++v5;
                      v108 = v3;
                      Sizei = *(_DWORD *)(v2[18]
                                        + 4
                                        * (HIWORD(v121) + ((v4 & ((1 << (BYTE1(v121) + v121)) - 1)) >> SBYTE1(v121))));
                      if ( BYTE1(v121) + (unsigned int)BYTE1(Sizei) <= v7 )
                        goto LABEL_210;
                    }
                    goto LABEL_270;
                  }
LABEL_210:
                  v80 = Sizei;
                  v4 >>= SBYTE1(v121);
                  v7 -= BYTE1(v121);
                }
                v4 >>= SBYTE1(v80);
                v7 -= BYTE1(v80);
                v129 = (char *)BYTE1(v80);
                v122 = BYTE2(v4);
                if ( v80 & 0x40 )
                {
                  *(_DWORD *)(a1 + 24) = aInvalidDistanc_0;
                }
                else
                {
                  v2[15] = v80 >> 16;
                  v2[16] = v80 & 0xF;
                  *v2 = 21;
LABEL_214:
                  v83 = v2[16];
                  if ( v83 )
                  {
                    if ( v7 < v83 )
                    {
                      while ( v3 )
                      {
                        v84 = *v5 << v7;
                        --v3;
                        v7 += 8;
                        ++v5;
                        v4 += v84;
                        v108 = v3;
                        if ( v7 >= v2[16] )
                          goto LABEL_218;
                      }
                      goto LABEL_270;
                    }
LABEL_218:
                    v85 = v2[16];
                    v2[15] += v4 & ((1 << v85) - 1);
                    v4 >>= v85;
                    v7 -= v85;
                    v122 = BYTE2(v4);
                  }
                  if ( v2[15] <= v128 + v2[9] - v123 )
                  {
                    *v2 = 22;
LABEL_222:
                    if ( !v123 )
                      goto LABEL_270;
                    v86 = v2[15];
                    if ( v86 <= v128 - v123 )
                    {
                      v90 = (char *)Dst - v86;
                      v87 = v2[14];
                      v129 = v90;
                      v131 = v87;
LABEL_230:
                      Sizej = v87;
                    }
                    else
                    {
                      v87 = v86 - (v128 - v123);
                      v88 = v2[10];
                      Sizej = v87;
                      if ( v87 <= v88 )
                      {
                        v89 = v2[10] + v2[11] - v87;
                      }
                      else
                      {
                        v87 -= v88;
                        Sizej = v87;
                        v89 = v2[8] + v2[11] - v87;
                      }
                      v129 = (char *)v89;
                      v131 = v2[14];
                      if ( v87 > v131 )
                      {
                        v87 = v131;
                        goto LABEL_230;
                      }
                    }
                    if ( v87 > v123 )
                    {
                      v87 = v123;
                      Sizej = v123;
                    }
                    v123 -= v87;
                    v91 = v131 - v87;
                    v92 = Dst;
                    v2[14] = v91;
                    do
                    {
                      v93 = *v129++;
                      *v92++ = v93;
                      --Sizej;
                    }
                    while ( Sizej );
                    v19 = v2[14] == 0;
                    Dst = v92;
                    if ( v19 )
                      *v2 = 18;
                    goto LABEL_262;
                  }
                  *(_DWORD *)(a1 + 24) = aInvalidDistanc_1;
                }
              }
LABEL_261:
              *v2 = 27;
            }
          }
          else
          {
            *v2 = 23;
          }
LABEL_262:
          v6 = *v2;
          if ( (unsigned int)*v2 > 0x1C )
            return -2;
          goto LABEL_9;
        }
        break;
      }
      while ( v3 )
      {
        v55 = *v5 << v7;
        --v3;
        v7 += 8;
        v4 += v55;
        ++v5;
        v108 = v3;
        v54 = *(_DWORD *)(v2[17] + 4 * (v4 & ((1 << v2[19]) - 1)));
        Sized = v54;
        if ( BYTE1(v54) <= v7 )
          goto LABEL_143;
      }
LABEL_270:
      *(_DWORD *)(a1 + 12) = Dst;
      *(_DWORD *)(a1 + 16) = v123;
      *(_DWORD *)a1 = v5;
      *(_DWORD *)(a1 + 4) = v3;
      v19 = v2[8] == 0;
      v2[12] = v4;
      v2[13] = v7;
      if ( v19 && (*v2 >= 24 || v128 == *(_DWORD *)(a1 + 16)) || !sub_4BC4F0(v128, a1) )
      {
        v102 = a1;
        v103 = v132 - *(_DWORD *)(a1 + 4);
        v104 = v128 - *(_DWORD *)(a1 + 16);
        *(_DWORD *)(v102 + 8) += v103;
        *(_DWORD *)(v102 + 20) += v104;
        v2[6] += v104;
        if ( v2[2] && v104 )
        {
          if ( v2[4] )
            v105 = sub_4BFFF0(v2[5], *(_DWORD *)(a1 + 12) - v104, v104);
          else
            v105 = sub_4BDE00(v2[5], (unsigned __int8 *)(*(_DWORD *)(a1 + 12) - v104), v104);
          v2[5] = v105;
          *(_DWORD *)(a1 + 48) = v105;
        }
        *(_DWORD *)(a1 + 44) = v2[13] + (*v2 != 11 ? 0 : 0x80) + (v2[1] != 0 ? 0x40 : 0);
        if ( (v103 || v104) && a2 != 4 )
        {
          result = v130;
        }
        else
        {
          result = v130;
          if ( !v130 )
            result = -5;
        }
      }
      else
      {
        *v2 = 28;
LABEL_275:
        result = -4;
      }
      return result;
    case 16:
      goto LABEL_128;
    case 17:
      goto LABEL_139;
    case 18:
      goto LABEL_178;
    case 19:
      goto LABEL_197;
    case 20:
      goto LABEL_203;
    case 21:
      goto LABEL_214;
    case 22:
      goto LABEL_222;
    case 23:
      if ( !v123 )
        goto LABEL_270;
      v94 = (char *)Dst;
      *(_BYTE *)Dst = *((_BYTE *)v2 + 56);
      --v123;
      Dst = v94 + 1;
      *v2 = 18;
      goto LABEL_262;
    case 24:
      if ( !v2[2] )
        goto LABEL_253;
      if ( v7 >= 0x20 )
        goto LABEL_243;
      do
      {
        if ( !v3 )
          goto LABEL_270;
        v95 = *v5 << v7;
        --v3;
        v7 += 8;
        ++v5;
        v4 += v95;
        v108 = v3;
        v122 = BYTE2(v4);
      }
      while ( v7 < 0x20 );
LABEL_243:
      v96 = v128 - v123;
      *(_DWORD *)(a1 + 20) += v128 - v123;
      v2[6] += v96;
      v128 = v96;
      if ( v96 )
      {
        v107 = (unsigned __int8 *)Dst - v96;
        v106 = v2[5];
        if ( v2[4] )
          v97 = sub_4BFFF0(v106, (int)v107, v96);
        else
          v97 = sub_4BDE00(v106, v107, v96);
        v3 = v108;
        v2[5] = v97;
        *(_DWORD *)(a1 + 48) = v97;
      }
      v19 = v2[4] == 0;
      v128 = v123;
      v98 = v4;
      if ( v19 )
      {
        LOBYTE(v99) = 0;
        HIBYTE(v99) = v122;
        v98 = (v4 >> 24) + v99 + (((v4 << 16) + (v4 & 0xFF00)) << 8);
      }
      if ( v98 == v2[5] )
      {
        v4 = 0;
        v122 = 0;
        v7 = 0;
LABEL_253:
        *v2 = 25;
LABEL_254:
        if ( !v2[2] || !v2[4] )
          goto LABEL_267;
        for ( ; v7 < 0x20; v122 = BYTE2(v4) )
        {
          if ( !v3 )
            goto LABEL_270;
          v100 = *v5 << v7;
          --v3;
          v7 += 8;
          ++v5;
          v4 += v100;
          v108 = v3;
        }
        if ( v4 == v2[6] )
        {
          v4 = 0;
          v7 = 0;
LABEL_267:
          *v2 = 26;
LABEL_268:
          v130 = 1;
          goto LABEL_270;
        }
        *(_DWORD *)(a1 + 24) = aIncorrectLengt;
      }
      else
      {
        *(_DWORD *)(a1 + 24) = aIncorrectDataC;
      }
      goto LABEL_261;
    case 25:
      goto LABEL_254;
    case 26:
      goto LABEL_268;
    case 27:
      v130 = -3;
      goto LABEL_270;
    case 28:
      goto LABEL_275;
    default:
      return -2;
  }
}

//----- (004BDA40) --------------------------------------------------------
signed int __cdecl sub_4BDA40(_DWORD *a1)
{
  int v1; // eax
  void (__cdecl *v2)(_DWORD, int); // ecx
  int v3; // eax

  if ( !a1 )
    return -2;
  v1 = a1[7];
  if ( !v1 )
    return -2;
  v2 = (void (__cdecl *)(_DWORD, int))a1[9];
  if ( !v2 )
    return -2;
  v3 = *(_DWORD *)(v1 + 44);
  if ( v3 )
    v2(a1[10], v3);
  ((void (__cdecl *)(_DWORD, _DWORD))a1[9])(a1[10], a1[7]);
  a1[7] = 0;
  return 0;
}

//----- (004BDB50) --------------------------------------------------------
unsigned int __usercall sub_4BDB50@<eax>(unsigned int *a1@<edi>, int a2@<esi>, unsigned int a3)
{
  unsigned int v3; // ecx
  unsigned int result; // eax
  unsigned __int8 v5; // dl

  v3 = *a1;
  result = 0;
  if ( a3 )
  {
    do
    {
      if ( v3 >= 4 )
        break;
      v5 = *(_BYTE *)(result + a2);
      if ( v5 == (v3 < 2 ? 0 : 255) )
        ++v3;
      else
        v3 = v5 ? 0 : 4 - v3;
      ++result;
    }
    while ( result < a3 );
  }
  *a1 = v3;
  return result;
}

//----- (004BDE00) --------------------------------------------------------
int __cdecl sub_4BDE00(unsigned int a1, unsigned __int8 *a2, unsigned int a3)
{
  unsigned __int8 *v3; // esi
  unsigned int v4; // ecx
  unsigned int v5; // edi
  unsigned int i; // ebx
  unsigned int v8; // eax
  unsigned int v9; // edx
  int v10; // ecx
  int v11; // edi
  int v12; // ecx
  int v13; // edi
  int v14; // ecx
  int v15; // edi
  int v16; // ecx
  int v17; // edi
  int v18; // ecx
  int v19; // edi
  int v20; // ecx
  int v21; // edi
  int v22; // ecx
  int v23; // edi
  int v24; // ecx
  int v25; // edi
  int v26; // ecx
  int v27; // edi
  int v28; // ecx
  int v29; // edi
  int v30; // ecx
  int v31; // edi
  int v32; // ecx
  int v33; // edi
  int v34; // ecx
  int v35; // edi
  int v36; // ecx
  int v37; // edi
  int v38; // ecx
  int v39; // edi

  v3 = a2;
  v4 = (unsigned __int16)a1;
  v5 = a1 >> 16;
  if ( !a2 )
    return (int)(a2 + 1);
  for ( i = a3; i; v5 %= 0xFFF1u )
  {
    v8 = i;
    if ( i >= 0x15B0 )
      v8 = 5552;
    i -= v8;
    if ( (signed int)v8 >= 16 )
    {
      v9 = v8 >> 4;
      v8 += -16 * (v8 >> 4);
      do
      {
        v10 = *v3 + v4;
        v11 = v10 + v5;
        v12 = v3[1] + v10;
        v13 = v12 + v11;
        v14 = v3[2] + v12;
        v15 = v14 + v13;
        v16 = v3[3] + v14;
        v17 = v16 + v15;
        v18 = v3[4] + v16;
        v19 = v18 + v17;
        v20 = v3[5] + v18;
        v21 = v20 + v19;
        v22 = v3[6] + v20;
        v23 = v22 + v21;
        v24 = v3[7] + v22;
        v25 = v24 + v23;
        v26 = v3[8] + v24;
        v27 = v26 + v25;
        v28 = v3[9] + v26;
        v29 = v28 + v27;
        v30 = v3[10] + v28;
        v31 = v30 + v29;
        v32 = v3[11] + v30;
        v33 = v32 + v31;
        v34 = v3[12] + v32;
        v35 = v34 + v33;
        v36 = v3[13] + v34;
        v37 = v36 + v35;
        v38 = v3[14] + v36;
        v39 = v38 + v37;
        v4 = v3[15] + v38;
        v5 = v4 + v39;
        v3 += 16;
        --v9;
      }
      while ( v9 );
    }
    for ( ; v8; --v8 )
    {
      v4 += *v3++;
      v5 += v4;
    }
    v4 %= 0xFFF1u;
  }
  return v4 | (v5 << 16);
}

//----- (004BDF50) --------------------------------------------------------
_WORD *__fastcall sub_4BDF50(int a1, int a2)
{
  _WORD *v2; // eax
  signed int v3; // ecx
  _WORD *v4; // eax
  signed int v5; // ecx
  _WORD *result; // eax
  signed int v7; // ecx

  v2 = (_WORD *)(a2 + 140);
  v3 = 286;
  do
  {
    *v2 = 0;
    v2 += 2;
    --v3;
  }
  while ( v3 );
  v4 = (_WORD *)(a2 + 2432);
  v5 = 30;
  do
  {
    *v4 = 0;
    v4 += 2;
    --v5;
  }
  while ( v5 );
  result = (_WORD *)(a2 + 2676);
  v7 = 19;
  do
  {
    *result = 0;
    result += 2;
    --v7;
  }
  while ( v7 );
  *(_DWORD *)(a2 + 5796) = 0;
  *(_DWORD *)(a2 + 5792) = 0;
  *(_DWORD *)(a2 + 5800) = 0;
  *(_DWORD *)(a2 + 5784) = 0;
  *(_WORD *)(a2 + 1164) = 1;
  return result;
}

//----- (004BDFC0) --------------------------------------------------------
int __usercall sub_4BDFC0@<eax>(int result@<eax>, int a2@<edi>, int a3)
{
  int v3; // edx
  int v4; // ebp
  int v5; // ecx
  bool v6; // sf
  unsigned __int8 v7; // of
  int v8; // esi
  int v9; // ebp
  unsigned __int16 v10; // dx
  unsigned __int16 v11; // bx
  int v12; // esi
  unsigned __int16 v13; // dx
  unsigned __int16 v14; // bx
  int v15; // edx
  int v16; // [esp+8h] [ebp-4h]

  v3 = *(_DWORD *)(result + 5192);
  v4 = *(_DWORD *)(result + 4 * a3 + 2900);
  v5 = 2 * a3;
  v7 = __OFSUB__(2 * a3, v3);
  v6 = 2 * a3 - v3 < 0;
  v16 = *(_DWORD *)(result + 4 * a3 + 2900);
  if ( 2 * a3 > v3 )
  {
    *(_DWORD *)(result + 4 * a3 + 2900) = v4;
  }
  else
  {
    while ( 1 )
    {
      if ( v6 ^ v7 )
      {
        v8 = *(_DWORD *)(result + 4 * v5 + 2904);
        v9 = *(_DWORD *)(result + 4 * v5 + 2900);
        v10 = *(_WORD *)(a2 + 4 * v8);
        v11 = *(_WORD *)(a2 + 4 * v9);
        if ( v10 < v11 || v10 == v11 && *(_BYTE *)(v8 + result + 5200) <= *(_BYTE *)(result + v9 + 5200) )
          ++v5;
        v4 = v16;
      }
      v12 = *(_DWORD *)(result + 4 * v5 + 2900);
      v13 = *(_WORD *)(a2 + 4 * v4);
      v14 = *(_WORD *)(a2 + 4 * v12);
      if ( v13 < v14 )
      {
LABEL_12:
        *(_DWORD *)(result + 4 * a3 + 2900) = v4;
        return result;
      }
      if ( v13 == v14 && *(_BYTE *)(result + v4 + 5200) <= *(_BYTE *)(v12 + result + 5200) )
        break;
      *(_DWORD *)(result + 4 * a3 + 2900) = v12;
      v15 = *(_DWORD *)(result + 5192);
      a3 = v5;
      v5 *= 2;
      v7 = __OFSUB__(v5, v15);
      v6 = v5 - v15 < 0;
      if ( v5 > v15 )
        goto LABEL_12;
    }
    *(_DWORD *)(result + 4 * a3 + 2900) = v4;
  }
  return result;
}

//----- (004BE090) --------------------------------------------------------
_DWORD *__usercall sub_4BE090@<eax>(_DWORD *result@<eax>, int *a2@<ecx>)
{
  int v2; // edx
  int v3; // ebx
  int *v4; // ecx
  int v5; // ebp
  int v6; // edx
  int v7; // esi
  int v8; // edi
  int v9; // ecx
  signed int v10; // edi
  int v11; // edx
  int v12; // ecx
  int v13; // esi
  int v14; // edi
  int v15; // ebp
  _WORD *v16; // esi
  int v17; // ecx
  _WORD *i; // edx
  int v19; // edx
  int v20; // esi
  int v21; // ebp
  int v22; // ecx
  int v23; // edi
  signed int v24; // [esp+10h] [ebp-20h]
  int *v25; // [esp+14h] [ebp-1Ch]
  int v26; // [esp+18h] [ebp-18h]
  int v27; // [esp+1Ch] [ebp-14h]
  int v28; // [esp+1Ch] [ebp-14h]
  int v29; // [esp+20h] [ebp-10h]
  int v30; // [esp+20h] [ebp-10h]
  int v31; // [esp+24h] [ebp-Ch]
  int v32; // [esp+28h] [ebp-8h]
  int v33; // [esp+2Ch] [ebp-4h]

  v2 = a2[1];
  v3 = *a2;
  v4 = (int *)a2[2];
  v31 = v2;
  v5 = *v4;
  v33 = v4[1];
  v6 = v4[2];
  v7 = v4[4];
  result[717] = 0;
  result[718] = 0;
  result[719] = 0;
  result[720] = 0;
  result[721] = 0;
  result[722] = 0;
  result[723] = 0;
  result[724] = 0;
  v32 = v6;
  *(_WORD *)(v3 + 4 * result[result[1299] + 725] + 2) = 0;
  v8 = result[1299] + 1;
  v27 = v7;
  v26 = 0;
  if ( v8 < 573 )
  {
    v25 = &result[v8 + 725];
    v9 = 573 - v8;
    v10 = 573;
    v29 = v9;
    v24 = 573;
    while ( 1 )
    {
      v11 = *v25;
      v12 = *(unsigned __int16 *)(v3 + 4 * *(unsigned __int16 *)(v3 + 4 * *v25 + 2) + 2) + 1;
      if ( v12 > v7 )
      {
        ++v26;
        v12 = v7;
      }
      *(_WORD *)(v3 + 4 * v11 + 2) = v12;
      if ( v11 <= v31 )
      {
        ++*((_WORD *)result + v12 + 1434);
        v13 = 0;
        if ( v11 >= v32 )
          v13 = *(_DWORD *)(v33 + 4 * (v11 - v32));
        v14 = *(unsigned __int16 *)(v3 + 4 * v11);
        result[1448] += v14 * (v13 + v12);
        if ( v5 )
          result[1449] += v14 * (v13 + *(unsigned __int16 *)(v5 + 4 * v11 + 2));
        v10 = 573;
      }
      ++v25;
      if ( !--v29 )
        break;
      v7 = v27;
    }
    v15 = v26;
    if ( v26 )
    {
      v16 = (_WORD *)((char *)result + 2 * v27 + 2868);
      do
      {
        v17 = v27 - 1;
        for ( i = (_WORD *)((char *)result + 2 * (v27 - 1) + 2868); !*i; --v17 )
          --i;
        --*((_WORD *)result + v17 + 1434);
        *((_WORD *)result + v17 + 1435) += 2;
        --*v16;
        v15 -= 2;
      }
      while ( v15 > 0 );
      v19 = v27;
      if ( v27 )
      {
        v30 = (int)result + 2 * v27 + 2868;
        do
        {
          v20 = (unsigned __int16)*v16;
          v28 = v20;
          if ( v20 )
          {
            v21 = (int)&result[v10 + 725];
            do
            {
              v22 = *(_DWORD *)(v21 - 4);
              --v24;
              v21 -= 4;
              if ( v22 <= v31 )
              {
                v23 = *(unsigned __int16 *)(v3 + 4 * v22 + 2);
                if ( v23 != v19 )
                {
                  result[1448] += *(unsigned __int16 *)(v3 + 4 * v22) * (v19 - v23);
                  *(_WORD *)(v3 + 4 * v22 + 2) = v19;
                }
                v20 = --v28;
              }
            }
            while ( v20 );
            v10 = v24;
          }
          --v19;
          v16 = (_WORD *)(v30 - 2);
          v30 -= 2;
        }
        while ( v19 );
      }
    }
  }
  return result;
}

//----- (004BE2B0) --------------------------------------------------------
signed int __usercall sub_4BE2B0@<eax>(signed int result@<eax>, int a2@<ecx>, _WORD *a3)
{
  signed int v3; // edi
  signed int v4; // edx
  int v5; // ebx
  signed int v6; // ecx
  signed int v7; // esi
  unsigned __int16 *v8; // [esp+10h] [ebp-Ch]
  signed int v9; // [esp+14h] [ebp-8h]
  int v10; // [esp+18h] [ebp-4h]

  v3 = *(unsigned __int16 *)(result + 2);
  v4 = 0;
  v5 = a2;
  v9 = -1;
  v6 = 7;
  v7 = 4;
  if ( !*(_WORD *)(result + 2) )
  {
    v6 = 138;
    v7 = 3;
  }
  *(_WORD *)(result + 4 * v5 + 6) = -1;
  if ( v5 >= 0 )
  {
    v10 = v5 + 1;
    v8 = (unsigned __int16 *)(result + 6);
    do
    {
      result = v3;
      v3 = *v8;
      if ( ++v4 >= v6 || result != v3 )
      {
        if ( v4 >= v7 )
        {
          if ( result )
          {
            if ( result != v9 )
              ++a3[2 * result + 1338];
            ++a3[1370];
          }
          else if ( v4 > 10 )
          {
            ++a3[1374];
          }
          else
          {
            ++a3[1372];
          }
        }
        else
        {
          a3[2 * result + 1338] += v4;
        }
        v4 = 0;
        v9 = result;
        if ( v3 )
        {
          if ( result == v3 )
          {
            v6 = 6;
            v7 = 3;
          }
          else
          {
            v6 = 7;
            v7 = 4;
          }
        }
        else
        {
          v6 = 138;
          v7 = 3;
        }
      }
      v8 += 2;
      --v10;
    }
    while ( v10 );
  }
  return result;
}

//----- (004BE3A0) --------------------------------------------------------
int __usercall sub_4BE3A0@<eax>(int result@<eax>, int a2@<edx>, int a3@<ecx>)
{
  signed int v3; // esi
  int v4; // ebx
  signed int v5; // ecx
  signed int v6; // edi
  signed int v7; // edx
  int v8; // edi
  int v9; // ecx
  unsigned __int16 v10; // si
  int v11; // edx
  int v12; // ecx
  int v13; // edx
  __int16 v14; // si
  int v15; // ecx
  int v16; // ecx
  unsigned __int16 v17; // si
  int v18; // edi
  int v19; // ecx
  int v20; // ebx
  int v21; // ecx
  int v22; // ecx
  unsigned __int16 v23; // si
  int v24; // edi
  int v25; // ecx
  int v26; // ebx
  int v27; // ecx
  int v28; // esi
  int v29; // edi
  int v30; // ecx
  int v31; // ebx
  int v32; // ecx
  int v33; // ecx
  unsigned __int16 v34; // si
  int v35; // edi
  int v36; // ecx
  int v37; // ebx
  int v38; // ecx
  int v39; // esi
  int v40; // edi
  int v41; // ecx
  int v42; // ebx
  unsigned __int16 v43; // si
  int v44; // edi
  int v45; // ecx
  int v46; // ebx
  int v47; // ecx
  int v48; // esi
  int v49; // edi
  int v50; // ecx
  int v51; // ebx
  signed int v52; // [esp+10h] [ebp-18h]
  signed int v53; // [esp+14h] [ebp-14h]
  unsigned __int16 *v54; // [esp+18h] [ebp-10h]
  signed int v55; // [esp+1Ch] [ebp-Ch]
  int v56; // [esp+1Ch] [ebp-Ch]
  int v57; // [esp+1Ch] [ebp-Ch]
  int v58; // [esp+1Ch] [ebp-Ch]
  int v59; // [esp+1Ch] [ebp-Ch]
  int v60; // [esp+20h] [ebp-8h]
  signed int v61; // [esp+24h] [ebp-4h]

  v3 = 0;
  v4 = a3;
  v55 = -1;
  v53 = *(unsigned __int16 *)(a2 + 2);
  v5 = 7;
  v6 = 4;
  if ( !*(_WORD *)(a2 + 2) )
  {
    v5 = 138;
    v6 = 3;
  }
  if ( v4 >= 0 )
  {
    v54 = (unsigned __int16 *)(a2 + 6);
    v60 = v4 + 1;
    do
    {
      v7 = v53;
      ++v3;
      v61 = v53;
      v53 = *v54;
      v52 = v3;
      if ( v3 < v5 && v7 == *v54 )
        goto LABEL_44;
      if ( v3 < v6 )
      {
        do
        {
          v8 = *(unsigned __int16 *)(result + 4 * v7 + 2678);
          v9 = *(_DWORD *)(result + 5812);
          if ( v9 <= 16 - v8 )
          {
            *(_WORD *)(result + 5808) |= *(_WORD *)(result + 4 * v7 + 2676) << v9;
            v15 = v8 + v9;
          }
          else
          {
            v10 = *(_WORD *)(result + 4 * v7 + 2676);
            v11 = *(unsigned __int16 *)(result + 4 * v7 + 2676) << v9;
            v12 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v11;
            *(_BYTE *)(v12 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v13 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            v14 = v10 >> (16 - v13);
            v15 = v13 + v8 - 16;
            v7 = v61;
            *(_WORD *)(result + 5808) = v14;
            v3 = v52;
          }
          --v3;
          *(_DWORD *)(result + 5812) = v15;
          v52 = v3;
        }
        while ( v3 );
        goto LABEL_39;
      }
      if ( v7 )
      {
        if ( v7 != v55 )
        {
          v16 = *(_DWORD *)(result + 5812);
          v56 = *(unsigned __int16 *)(result + 4 * v7 + 2678);
          if ( v16 <= 16 - v56 )
          {
            *(_WORD *)(result + 5808) |= *(_WORD *)(result + 4 * v7 + 2676) << v16;
            v21 = v56 + v16;
          }
          else
          {
            v17 = *(_WORD *)(result + 4 * v7 + 2676);
            v18 = *(unsigned __int16 *)(result + 4 * v7 + 2676) << v16;
            v19 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v18;
            *(_BYTE *)(v19 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v20 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            v21 = v20 + v56 - 16;
            *(_WORD *)(result + 5808) = v17 >> (16 - v20);
            v3 = v52;
          }
          --v3;
          *(_DWORD *)(result + 5812) = v21;
          v52 = v3;
        }
        v22 = *(_DWORD *)(result + 5812);
        v57 = *(unsigned __int16 *)(result + 2742);
        if ( v22 <= 16 - v57 )
        {
          *(_WORD *)(result + 5808) |= *(_WORD *)(result + 2740) << v22;
          v27 = v57 + v22;
        }
        else
        {
          v23 = *(_WORD *)(result + 2740);
          v24 = *(unsigned __int16 *)(result + 2740) << v22;
          v25 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v24;
          *(_BYTE *)(v25 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v26 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          v27 = v26 + v57 - 16;
          *(_WORD *)(result + 5808) = v23 >> (16 - v26);
          v3 = v52;
        }
        v28 = v3 - 3;
        *(_DWORD *)(result + 5812) = v27;
        if ( v27 > 14 )
        {
          v29 = v28 << v27;
          v30 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v29;
          *(_BYTE *)(v30 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v31 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          *(_DWORD *)(result + 5812) = v31 - 14;
          *(_WORD *)(result + 5808) = (unsigned __int16)v28 >> (16 - v31);
          goto LABEL_39;
        }
        *(_WORD *)(result + 5808) |= v28 << v27;
        v32 = v27 + 2;
      }
      else
      {
        v33 = *(_DWORD *)(result + 5812);
        if ( v3 > 10 )
        {
          v59 = *(unsigned __int16 *)(result + 2750);
          if ( v33 <= 16 - v59 )
          {
            *(_WORD *)(result + 5808) |= *(_WORD *)(result + 2748) << v33;
            v47 = v59 + v33;
          }
          else
          {
            v43 = *(_WORD *)(result + 2748);
            v44 = *(unsigned __int16 *)(result + 2748) << v33;
            v45 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v44;
            *(_BYTE *)(v45 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v46 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            v47 = v46 + v59 - 16;
            *(_WORD *)(result + 5808) = v43 >> (16 - v46);
            v3 = v52;
          }
          v48 = v3 - 11;
          *(_DWORD *)(result + 5812) = v47;
          if ( v47 > 9 )
          {
            v49 = v48 << v47;
            v50 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v49;
            *(_BYTE *)(v50 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v51 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            *(_DWORD *)(result + 5812) = v51 - 9;
            *(_WORD *)(result + 5808) = (unsigned __int16)v48 >> (16 - v51);
            goto LABEL_39;
          }
          *(_WORD *)(result + 5808) |= v48 << v47;
          v32 = v47 + 7;
        }
        else
        {
          v58 = *(unsigned __int16 *)(result + 2746);
          if ( v33 <= 16 - v58 )
          {
            *(_WORD *)(result + 5808) |= *(_WORD *)(result + 2744) << v33;
            v38 = v58 + v33;
          }
          else
          {
            v34 = *(_WORD *)(result + 2744);
            v35 = *(unsigned __int16 *)(result + 2744) << v33;
            v36 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v35;
            *(_BYTE *)(v36 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v37 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            v38 = v37 + v58 - 16;
            *(_WORD *)(result + 5808) = v34 >> (16 - v37);
            v3 = v52;
          }
          v39 = v3 - 3;
          *(_DWORD *)(result + 5812) = v38;
          if ( v38 > 13 )
          {
            v40 = v39 << v38;
            v41 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v40;
            *(_BYTE *)(v41 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v42 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            *(_DWORD *)(result + 5812) = v42 - 13;
            *(_WORD *)(result + 5808) = (unsigned __int16)v39 >> (16 - v42);
            goto LABEL_39;
          }
          *(_WORD *)(result + 5808) |= v39 << v38;
          v32 = v38 + 3;
        }
      }
      *(_DWORD *)(result + 5812) = v32;
LABEL_39:
      v3 = 0;
      v55 = v7;
      if ( v53 )
      {
        if ( v7 == v53 )
        {
          v5 = 6;
          v6 = 3;
        }
        else
        {
          v5 = 7;
          v6 = 4;
        }
      }
      else
      {
        v5 = 138;
        v6 = 3;
      }
LABEL_44:
      v54 += 2;
      --v60;
    }
    while ( v60 );
  }
  return result;
}

//----- (004BE8B0) --------------------------------------------------------
int __usercall sub_4BE8B0@<eax>(int a1@<eax>, int a2, int a3, int a4)
{
  signed int v4; // ecx
  int v5; // ebx
  int v6; // edx
  int v7; // ecx
  int v8; // edx
  signed int v9; // ecx
  int v10; // edx
  int v11; // ecx
  int v12; // edx
  signed int v13; // ecx
  int v14; // edx
  int v15; // ecx
  int v16; // edx
  int i; // edi
  signed int v18; // ecx
  int v19; // edx
  unsigned __int16 v20; // si
  int v21; // edx
  int v22; // ecx
  int v23; // edx
  int v24; // eax

  v4 = *(_DWORD *)(a1 + 5812);
  v5 = a4;
  if ( v4 <= 11 )
  {
    *(_WORD *)(a1 + 5808) |= (a2 - 257) << v4;
    *(_DWORD *)(a1 + 5812) = v4 + 5;
  }
  else
  {
    v6 = (a2 - 257) << v4;
    v7 = *(_DWORD *)(a1 + 20);
    *(_WORD *)(a1 + 5808) |= v6;
    *(_BYTE *)(v7 + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5808);
    *(_BYTE *)(++*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
    v8 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    v5 = a4;
    *(_DWORD *)(a1 + 5812) = v8 - 11;
    *(_WORD *)(a1 + 5808) = (unsigned __int16)(a2 - 257) >> (16 - v8);
  }
  v9 = *(_DWORD *)(a1 + 5812);
  if ( v9 <= 11 )
  {
    *(_WORD *)(a1 + 5808) |= (a3 - 1) << v9;
    *(_DWORD *)(a1 + 5812) = v9 + 5;
  }
  else
  {
    v10 = (a3 - 1) << v9;
    v11 = *(_DWORD *)(a1 + 20);
    *(_WORD *)(a1 + 5808) |= v10;
    *(_BYTE *)(v11 + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5808);
    *(_BYTE *)(++*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
    v12 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 5812) = v12 - 11;
    *(_WORD *)(a1 + 5808) = (unsigned __int16)(a3 - 1) >> (16 - v12);
  }
  v13 = *(_DWORD *)(a1 + 5812);
  if ( v13 <= 12 )
  {
    *(_WORD *)(a1 + 5808) |= (v5 - 4) << v13;
    *(_DWORD *)(a1 + 5812) = v13 + 4;
  }
  else
  {
    v14 = (v5 - 4) << v13;
    v15 = *(_DWORD *)(a1 + 20);
    *(_WORD *)(a1 + 5808) |= v14;
    *(_BYTE *)(v15 + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5808);
    *(_BYTE *)(++*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
    v16 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 5812) = v16 - 12;
    *(_WORD *)(a1 + 5808) = (unsigned __int16)(v5 - 4) >> (16 - v16);
  }
  for ( i = 0; i < v5; ++i )
  {
    v18 = *(_DWORD *)(a1 + 5812);
    v19 = (unsigned __int8)byte_51FB94[i];
    if ( v18 <= 13 )
    {
      *(_WORD *)(a1 + 5808) |= *(_WORD *)(a1 + 4 * v19 + 2678) << v18;
      *(_DWORD *)(a1 + 5812) = v18 + 3;
    }
    else
    {
      v20 = *(_WORD *)(a1 + 4 * v19 + 2678);
      v21 = *(unsigned __int16 *)(a1 + 4 * v19 + 2678) << v18;
      v22 = *(_DWORD *)(a1 + 20);
      *(_WORD *)(a1 + 5808) |= v21;
      *(_BYTE *)(v22 + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5808);
      *(_BYTE *)(++*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
      v23 = *(_DWORD *)(a1 + 5812);
      ++*(_DWORD *)(a1 + 20);
      v5 = a4;
      *(_DWORD *)(a1 + 5812) = v23 - 13;
      *(_WORD *)(a1 + 5808) = v20 >> (16 - v23);
    }
  }
  v24 = sub_4BE3A0(a1, a1 + 140, a2 - 1);
  return sub_4BE3A0(v24, v24 + 2432, a3 - 1);
}

//----- (004BEBB0) --------------------------------------------------------
int __usercall sub_4BEBB0@<eax>(int result@<eax>, int a2, int a3)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // ebp
  int v6; // esi
  int v7; // ecx
  int v8; // edi
  int v9; // esi
  int v10; // edx
  int v11; // ecx
  int v12; // edx
  int v13; // ecx
  int v14; // edx
  int v15; // edi
  int v16; // edx
  int v17; // ecx
  int v18; // edx
  int v19; // edi
  int v20; // esi
  int v21; // ecx
  int v22; // edx
  int v23; // ecx
  int v24; // edx
  int v25; // ecx
  unsigned int v26; // ebp
  int v27; // edi
  int v28; // edx
  int v29; // ecx
  unsigned __int16 v30; // si
  int v31; // edx
  int v32; // ecx
  int v33; // edx
  int v34; // esi
  int v35; // ecx
  int v36; // ebp
  int v37; // edx
  int v38; // ecx
  int v39; // edx
  int v40; // edi
  int v41; // ecx
  unsigned __int16 v42; // si
  int v43; // edx
  int v44; // ecx
  int v45; // edx
  int v46; // [esp+10h] [ebp-Ch]
  int v47; // [esp+14h] [ebp-8h]
  int v48; // [esp+14h] [ebp-8h]
  unsigned int v49; // [esp+18h] [ebp-4h]

  v3 = a2;
  v4 = 0;
  if ( *(_DWORD *)(result + 5784) )
  {
    do
    {
      v5 = *(unsigned __int16 *)(*(_DWORD *)(result + 5788) + 2 * v4);
      v6 = *(unsigned __int8 *)(v4 + *(_DWORD *)(result + 5776));
      v49 = v4 + 1;
      v7 = *(_DWORD *)(result + 5812);
      if ( v5 )
      {
        v14 = (unsigned __int8)byte_520368[v6];
        v46 = *(unsigned __int16 *)(v3 + 4 * v14 + 1030);
        v47 = (unsigned __int8)byte_520368[v6];
        if ( v7 <= 16 - v46 )
        {
          *(_WORD *)(result + 5808) |= *(_WORD *)(a2 + 4 * v14 + 1028) << v7;
          *(_DWORD *)(result + 5812) = v46 + v7;
        }
        else
        {
          v15 = *(unsigned __int16 *)(a2 + 4 * v14 + 1028);
          v16 = v15 << v7;
          v17 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v16;
          *(_BYTE *)(v17 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v18 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          LOWORD(v15) = (unsigned __int16)v15 >> (16 - v18);
          *(_DWORD *)(result + 5812) = v18 + v46 - 16;
          v14 = v47;
          *(_WORD *)(result + 5808) = v15;
        }
        v19 = dword_51FB20[v14];
        v3 = a2;
        if ( v19 )
        {
          v20 = v6 - dword_520468[v14];
          v21 = *(_DWORD *)(result + 5812);
          if ( v21 <= 16 - v19 )
          {
            *(_WORD *)(result + 5808) |= v20 << v21;
            v25 = v19 + v21;
          }
          else
          {
            v22 = v20 << v21;
            v23 = *(_DWORD *)(result + 8);
            *(_WORD *)(result + 5808) |= v22;
            *(_BYTE *)(v23 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
            *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
            v24 = *(_DWORD *)(result + 5812);
            ++*(_DWORD *)(result + 20);
            v3 = a2;
            v25 = v24 + v19 - 16;
            *(_WORD *)(result + 5808) = (unsigned __int16)v20 >> (16 - v24);
          }
          *(_DWORD *)(result + 5812) = v25;
        }
        v26 = v5 - 1;
        if ( v26 >= 0x100 )
          v27 = (unsigned __int8)byte_520268[v26 >> 7];
        else
          v27 = (unsigned __int8)byte_520168[v26];
        v28 = *(unsigned __int16 *)(a3 + 4 * v27 + 2);
        v29 = *(_DWORD *)(result + 5812);
        v48 = *(unsigned __int16 *)(a3 + 4 * v27 + 2);
        if ( v29 <= 16 - v28 )
        {
          *(_WORD *)(result + 5808) |= *(_WORD *)(a3 + 4 * v27) << v29;
          *(_DWORD *)(result + 5812) = v28 + v29;
        }
        else
        {
          v30 = *(_WORD *)(a3 + 4 * v27);
          v31 = *(unsigned __int16 *)(a3 + 4 * v27) << v29;
          v32 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v31;
          *(_BYTE *)(v32 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v33 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          v3 = a2;
          *(_DWORD *)(result + 5812) = v33 + v48 - 16;
          *(_WORD *)(result + 5808) = v30 >> (16 - v33);
        }
        v34 = dword_51FBA8[v27];
        if ( !v34 )
          goto LABEL_25;
        v35 = *(_DWORD *)(result + 5812);
        v36 = v26 - dword_5204E0[v27];
        if ( v35 <= 16 - v34 )
        {
          *(_WORD *)(result + 5808) |= v36 << v35;
          v13 = v34 + v35;
        }
        else
        {
          v37 = v36 << v35;
          v38 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v37;
          *(_BYTE *)(v38 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v39 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          v13 = v39 + v34 - 16;
          *(_WORD *)(result + 5808) = (unsigned __int16)v36 >> (16 - v39);
        }
      }
      else
      {
        v8 = *(unsigned __int16 *)(v3 + 4 * v6 + 2);
        if ( v7 <= 16 - v8 )
        {
          *(_WORD *)(result + 5808) |= *(_WORD *)(v3 + 4 * v6) << v7;
          v13 = v8 + v7;
        }
        else
        {
          v9 = *(unsigned __int16 *)(v3 + 4 * v6);
          v10 = v9 << v7;
          v11 = *(_DWORD *)(result + 8);
          *(_WORD *)(result + 5808) |= v10;
          *(_BYTE *)(v11 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
          *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
          v12 = *(_DWORD *)(result + 5812);
          ++*(_DWORD *)(result + 20);
          v13 = v12 + v8 - 16;
          *(_WORD *)(result + 5808) = (unsigned __int16)v9 >> (16 - v12);
        }
      }
      *(_DWORD *)(result + 5812) = v13;
LABEL_25:
      v4 = v49;
    }
    while ( v49 < *(_DWORD *)(result + 5784) );
  }
  v40 = *(unsigned __int16 *)(v3 + 1026);
  v41 = *(_DWORD *)(result + 5812);
  if ( v41 <= 16 - v40 )
  {
    *(_WORD *)(result + 5808) |= *(_WORD *)(v3 + 1024) << v41;
    *(_DWORD *)(result + 5812) = v40 + v41;
  }
  else
  {
    v42 = *(_WORD *)(v3 + 1024);
    v43 = *(unsigned __int16 *)(v3 + 1024) << v41;
    v44 = *(_DWORD *)(result + 8);
    *(_WORD *)(result + 5808) |= v43;
    *(_BYTE *)(v44 + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
    *(_BYTE *)(*(_DWORD *)(result + 8) + *(_DWORD *)(result + 20)) = *(_BYTE *)(result + 5809);
    v45 = *(_DWORD *)(result + 5812);
    ++*(_DWORD *)(result + 20);
    *(_DWORD *)(result + 5812) = v45 + v40 - 16;
    *(_WORD *)(result + 5808) = v42 >> (16 - v45);
  }
  *(_DWORD *)(result + 5804) = *(unsigned __int16 *)(v3 + 1026);
  return result;
}
// 51FB20: using guessed type int dword_51FB20[];

//----- (004BEFC0) --------------------------------------------------------
bool __thiscall sub_4BEFC0(int this)
{
  unsigned int v1; // esi
  unsigned int v2; // eax
  unsigned __int16 *v3; // edx
  signed int v4; // edi
  unsigned __int16 *v5; // edx
  signed int v6; // edi
  bool result; // al

  v1 = 0;
  v2 = *(unsigned __int16 *)(this + 140)
     + *(unsigned __int16 *)(this + 144)
     + *(unsigned __int16 *)(this + 148)
     + *(unsigned __int16 *)(this + 152)
     + *(unsigned __int16 *)(this + 156)
     + *(unsigned __int16 *)(this + 160)
     + *(unsigned __int16 *)(this + 164);
  v3 = (unsigned __int16 *)(this + 168);
  v4 = 121;
  do
  {
    v1 += *v3;
    v3 += 2;
    --v4;
  }
  while ( v4 );
  v5 = (unsigned __int16 *)(this + 652);
  v6 = 128;
  do
  {
    v2 += *v5;
    v5 += 2;
    --v6;
  }
  while ( v6 );
  result = v2 <= v1 >> 2;
  *(_BYTE *)(this + 28) = result;
  return result;
}

//----- (004BF070) --------------------------------------------------------
int __usercall sub_4BF070@<eax>(int result@<eax>)
{
  signed int v1; // ecx
  __int16 v2; // cx

  v1 = *(_DWORD *)(result + 5812);
  if ( v1 == 16 )
  {
    *(_BYTE *)(*(_DWORD *)(result + 8) + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
    *(_BYTE *)((*(_DWORD *)(result + 20))++ + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
    *(_DWORD *)(result + 5812) = 0;
    *(_WORD *)(result + 5808) = 0;
  }
  else if ( v1 >= 8 )
  {
    *(_BYTE *)(*(_DWORD *)(result + 8) + *(_DWORD *)(result + 20)) = *(_BYTE *)(result + 5808);
    v2 = *(unsigned __int8 *)(result + 5809);
    ++*(_DWORD *)(result + 20);
    *(_DWORD *)(result + 5812) -= 8;
    *(_WORD *)(result + 5808) = v2;
  }
  return result;
}

//----- (004BF0F0) --------------------------------------------------------
int __usercall sub_4BF0F0@<eax>(int result@<eax>)
{
  signed int v1; // edx
  char v2; // bl
  int v3; // edx

  v1 = *(_DWORD *)(result + 5812);
  if ( v1 <= 8 )
  {
    if ( v1 > 0 )
      *(_BYTE *)(*(_DWORD *)(result + 8) + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
    *(_WORD *)(result + 5808) = 0;
    *(_DWORD *)(result + 5812) = 0;
  }
  else
  {
    *(_BYTE *)(*(_DWORD *)(result + 8) + *(_DWORD *)(result + 20)) = *(_BYTE *)(result + 5808);
    v2 = *(_BYTE *)(result + 5809);
    v3 = *(_DWORD *)(result + 8);
    *(_BYTE *)(++*(_DWORD *)(result + 20) + v3) = v2;
    ++*(_DWORD *)(result + 20);
    *(_WORD *)(result + 5808) = 0;
    *(_DWORD *)(result + 5812) = 0;
  }
  return result;
}

//----- (004BF170) --------------------------------------------------------
_DWORD *__usercall sub_4BF170@<eax>(int a1@<eax>, _BYTE *a2@<edx>, int a3@<ecx>, int a4)
{
  int v4; // ebx
  _BYTE *v5; // esi
  _DWORD *result; // eax

  v4 = a3;
  v5 = a2;
  result = (_DWORD *)sub_4BF0F0(a1);
  result[1451] = 8;
  if ( a4 )
  {
    *(_BYTE *)(result[5]++ + result[2]) = v4;
    *(_BYTE *)(result[5]++ + result[2]) = BYTE1(v4);
    *(_BYTE *)(result[2] + result[5]++) = ~(_BYTE)v4;
    *(_BYTE *)(result[2] + result[5]++) = ~BYTE1(v4);
  }
  for ( ; v4; ++v5 )
  {
    *(_BYTE *)(result[5] + result[2]) = *v5;
    --v4;
    ++result[5];
  }
  return result;
}

//----- (004BF200) --------------------------------------------------------
_WORD *__cdecl sub_4BF200(int a1)
{
  int v1; // edx

  v1 = a1;
  *(_DWORD *)(a1 + 2832) = a1 + 140;
  *(_DWORD *)(v1 + 2856) = v1 + 2676;
  *(_DWORD *)(a1 + 2840) = &off_53BACC;
  *(_DWORD *)(v1 + 2844) = v1 + 2432;
  *(_DWORD *)(a1 + 2852) = &off_53BAE0;
  *(_DWORD *)(a1 + 2864) = &unk_53BAF4;
  *(_WORD *)(a1 + 5808) = 0;
  *(_DWORD *)(a1 + 5812) = 0;
  *(_DWORD *)(a1 + 5804) = 8;
  return sub_4BDF50(a1 + 2432, a1);
}
// 53BACC: using guessed type void *off_53BACC;
// 53BAE0: using guessed type void *off_53BAE0;

//----- (004BF270) --------------------------------------------------------
signed int __usercall sub_4BF270@<eax>(int a1@<edx>, int a2@<ebx>, int a3@<edi>)
{
  __int16 v3; // cx
  signed int result; // eax
  int v5; // edx
  int i; // esi
  int v7; // edx
  unsigned __int16 v8; // ax
  unsigned int v9; // ecx
  unsigned int v10; // eax
  int v11; // ebp
  __int16 v12; // [esp+4h] [ebp-24h]
  char v13; // [esp+6h] [ebp-22h]

  v3 = 0;
  result = 1;
  v5 = a1 - (_DWORD)&v13;
  do
  {
    v3 = 2 * (v3 + *(__int16 *)((char *)&v12 + 2 * result + v5));
    *(&v12 + result++) = v3;
  }
  while ( result <= 15 );
  for ( i = 0; i <= a2; ++i )
  {
    v7 = *(unsigned __int16 *)(a3 + 4 * i + 2);
    if ( *(_WORD *)(a3 + 4 * i + 2) )
    {
      v8 = *(&v12 + v7);
      v9 = v8;
      *(&v12 + v7) = v8 + 1;
      v10 = 0;
      do
      {
        v11 = v9 & 1;
        --v7;
        v9 >>= 1;
        v10 = 2 * (v11 | v10);
      }
      while ( v7 > 0 );
      result = v10 >> 1;
      *(_WORD *)(a3 + 4 * i) = result;
    }
  }
  return result;
}

//----- (004BF300) --------------------------------------------------------
signed int __usercall sub_4BF300@<eax>(_DWORD *a1@<esi>, int *a2)
{
  int v2; // edi
  int *v3; // eax
  int v4; // ecx
  int v5; // ebp
  signed int v6; // ebx
  int v7; // eax
  signed int v8; // eax
  signed int i; // ebp
  int v10; // ebx
  int v11; // eax
  int v12; // edx
  int v13; // ebp
  int v14; // eax
  unsigned __int8 v15; // cl
  int v17; // [esp+Ch] [ebp-8h]
  int v18; // [esp+10h] [ebp-4h]

  v2 = *a2;
  v3 = (int *)a2[2];
  v4 = v3[3];
  v5 = *v3;
  v6 = -1;
  v7 = 0;
  v18 = v4;
  v17 = -1;
  a1[1298] = 0;
  for ( a1[1299] = 573; v7 < v4; ++v7 )
  {
    if ( *(_WORD *)(v2 + 4 * v7) )
    {
      a1[++a1[1298] + 725] = v7;
      v17 = v7;
      *((_BYTE *)a1 + v7 + 5200) = 0;
      v6 = v7;
    }
    else
    {
      *(_WORD *)(v2 + 4 * v7 + 2) = 0;
    }
  }
  if ( a1[1298] < 2 )
  {
    do
    {
      if ( v6 >= 2 )
        v8 = 0;
      else
        v8 = ++v6;
      a1[++a1[1298] + 725] = v8;
      *(_WORD *)(v2 + 4 * v8) = 1;
      *((_BYTE *)a1 + v8 + 5200) = 0;
      --a1[1448];
      if ( v5 )
        a1[1449] -= *(unsigned __int16 *)(v5 + 4 * v8 + 2);
    }
    while ( a1[1298] < 2 );
    v17 = v6;
  }
  a2[1] = v6;
  for ( i = a1[1298] / 2; i >= 1; --i )
    sub_4BDFC0((int)a1, v2, i);
  v10 = v18;
  do
  {
    v11 = a1[1298];
    v12 = a1[v11 + 725];
    v13 = a1[726];
    a1[1298] = v11 - 1;
    a1[726] = v12;
    sub_4BDFC0((int)a1, v2, 1);
    v14 = a1[726];
    a1[--a1[1299] + 725] = v13;
    a1[--a1[1299] + 725] = v14;
    *(_WORD *)(v2 + 4 * v10) = *(_WORD *)(v2 + 4 * v13) + *(_WORD *)(v2 + 4 * v14);
    v15 = *((_BYTE *)a1 + v14 + 5200);
    if ( *((_BYTE *)a1 + v13 + 5200) >= v15 )
      v15 = *((_BYTE *)a1 + v13 + 5200);
    *((_BYTE *)a1 + v10 + 5200) = v15 + 1;
    *(_WORD *)(v2 + 4 * v14 + 2) = v10;
    *(_WORD *)(v2 + 4 * v13 + 2) = v10;
    a1[726] = v10++;
    sub_4BDFC0((int)a1, v2, 1);
  }
  while ( a1[1298] >= 2 );
  a1[--a1[1299] + 725] = a1[726];
  sub_4BE090(a1, a2);
  return sub_4BF270((int)(a1 + 717), v17, v2);
}

//----- (004BF500) --------------------------------------------------------
signed int __usercall sub_4BF500@<eax>(int a1@<eax>)
{
  int v1; // esi
  signed int result; // eax

  v1 = a1;
  sub_4BE2B0(a1 + 140, *(_DWORD *)(a1 + 2836), (_WORD *)a1);
  sub_4BE2B0(v1 + 2432, *(_DWORD *)(v1 + 2848), (_WORD *)v1);
  sub_4BF300((_DWORD *)v1, (int *)(v1 + 2856));
  result = 18;
  while ( !*(_WORD *)(v1 + 4 * (unsigned __int8)byte_51FB94[result] + 2678) )
  {
    if ( *(_WORD *)(v1 + 4 * (unsigned __int8)byte_51FB93[result] + 2678) )
    {
      *(_DWORD *)(v1 + 5792) += 3 * --result + 17;
      return result;
    }
    if ( *(_WORD *)(v1 + 4 * (unsigned __int8)byte_51FB92[result] + 2678) )
    {
      result -= 2;
      *(_DWORD *)(v1 + 5792) += 3 * result + 17;
      return result;
    }
    if ( *(_WORD *)(v1 + 4 * (unsigned __int8)byte_51FB91[result] + 2678) )
    {
      result -= 3;
      break;
    }
    result -= 4;
    if ( result < 3 )
    {
      *(_DWORD *)(v1 + 5792) += 3 * result + 17;
      return result;
    }
  }
  *(_DWORD *)(v1 + 5792) += 3 * result + 17;
  return result;
}

//----- (004BF5D0) --------------------------------------------------------
_DWORD *__cdecl sub_4BF5D0(int a1, _BYTE *a2, int a3, int a4)
{
  signed int v4; // ecx
  int v5; // edx
  int v6; // ecx
  char v7; // bl
  int v8; // edx

  v4 = *(_DWORD *)(a1 + 5812);
  if ( v4 <= 13 )
  {
    *(_DWORD *)(a1 + 5812) = v4 + 3;
    *(_WORD *)(a1 + 5808) |= a4 << v4;
  }
  else
  {
    v5 = a4 << v4;
    v6 = *(_DWORD *)(a1 + 8);
    *(_WORD *)(a1 + 5808) |= v5;
    *(_BYTE *)(v6 + *(_DWORD *)(a1 + 20)) = *(_BYTE *)(a1 + 5808);
    v7 = *(_BYTE *)(a1 + 5809);
    *(_BYTE *)(++*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = v7;
    v8 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 5812) = v8 - 13;
    *(_WORD *)(a1 + 5808) = (unsigned __int16)a4 >> (16 - v8);
  }
  return sub_4BF170(a1, a2, a3, 1);
}

//----- (004BF670) --------------------------------------------------------
int __cdecl sub_4BF670(int a1)
{
  signed int v1; // ecx
  int v2; // edx
  signed int v3; // ecx
  int v4; // edx
  int result; // eax
  signed int v6; // ecx
  int v7; // edx
  signed int v8; // ecx
  int v9; // edx

  v1 = *(_DWORD *)(a1 + 5812);
  *(_WORD *)(a1 + 5808) |= 2 << v1;
  if ( v1 <= 13 )
  {
    *(_DWORD *)(a1 + 5812) = v1 + 3;
  }
  else
  {
    *(_BYTE *)(*(_DWORD *)(a1 + 8) + (*(_DWORD *)(a1 + 20))++) = *(_BYTE *)(a1 + 5808);
    *(_BYTE *)(*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
    v2 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 5812) = v2 - 13;
    *(_WORD *)(a1 + 5808) = 2u >> (16 - v2);
  }
  v3 = *(_DWORD *)(a1 + 5812);
  *(_WORD *)(a1 + 5808) = *(_WORD *)(a1 + 5808);
  if ( v3 <= 9 )
  {
    *(_DWORD *)(a1 + 5812) = v3 + 7;
  }
  else
  {
    *(_BYTE *)(*(_DWORD *)(a1 + 8) + (*(_DWORD *)(a1 + 20))++) = *(_BYTE *)(a1 + 5808);
    *(_BYTE *)(*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
    v4 = *(_DWORD *)(a1 + 5812);
    ++*(_DWORD *)(a1 + 20);
    *(_DWORD *)(a1 + 5812) = v4 - 9;
    *(_WORD *)(a1 + 5808) = 0;
  }
  result = sub_4BF070(a1);
  v6 = *(_DWORD *)(result + 5812);
  if ( *(_DWORD *)(result + 5804) - v6 + 11 < 9 )
  {
    *(_WORD *)(result + 5808) |= 2 << v6;
    if ( v6 <= 13 )
    {
      *(_DWORD *)(result + 5812) = v6 + 3;
    }
    else
    {
      *(_BYTE *)(*(_DWORD *)(result + 8) + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
      *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
      v7 = *(_DWORD *)(result + 5812);
      ++*(_DWORD *)(result + 20);
      *(_DWORD *)(result + 5812) = v7 - 13;
      *(_WORD *)(result + 5808) = 2u >> (16 - v7);
    }
    v8 = *(_DWORD *)(result + 5812);
    *(_WORD *)(result + 5808) = *(_WORD *)(result + 5808);
    if ( v8 > 9 )
    {
      *(_BYTE *)(*(_DWORD *)(result + 8) + (*(_DWORD *)(result + 20))++) = *(_BYTE *)(result + 5808);
      *(_BYTE *)(*(_DWORD *)(result + 20) + *(_DWORD *)(result + 8)) = *(_BYTE *)(result + 5809);
      v9 = *(_DWORD *)(result + 5812);
      ++*(_DWORD *)(result + 20);
      *(_DWORD *)(result + 5812) = v9 - 9;
      *(_WORD *)(result + 5808) = 0;
      result = sub_4BF070(result);
      *(_DWORD *)(result + 5804) = 7;
      return result;
    }
    *(_DWORD *)(result + 5812) = v8 + 7;
    result = sub_4BF070(result);
  }
  *(_DWORD *)(result + 5804) = 7;
  return result;
}

//----- (004BF860) --------------------------------------------------------
_WORD *__cdecl sub_4BF860(int a1, _BYTE *a2, int a3, int a4)
{
  signed int v4; // eax
  unsigned int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  int v8; // ecx
  bool v9; // zf
  signed int v10; // ecx
  int v11; // eax
  int v12; // edx
  int v13; // ecx
  int v14; // edx
  int v15; // edx
  int v16; // eax
  int v17; // ecx
  int v18; // ebx
  _WORD *result; // eax
  signed int v20; // [esp+Ch] [ebp-4h]

  v20 = 0;
  if ( *(_DWORD *)(a1 + 124) <= 0 )
  {
    v6 = a3 + 5;
LABEL_7:
    v5 = v6;
    goto LABEL_8;
  }
  if ( *(_BYTE *)(a1 + 28) == 2 )
    sub_4BEFC0(a1);
  sub_4BF300((_DWORD *)a1, (int *)(a1 + 2832));
  sub_4BF300((_DWORD *)a1, (int *)(a1 + 2844));
  v4 = sub_4BF500(a1);
  v5 = (unsigned int)(*(_DWORD *)(a1 + 5792) + 10) >> 3;
  v6 = (unsigned int)(*(_DWORD *)(a1 + 5796) + 10) >> 3;
  v20 = v4;
  if ( v6 <= v5 )
    goto LABEL_7;
LABEL_8:
  if ( a3 + 4 <= v5 && a2 )
  {
    v7 = a4;
    sub_4BF5D0(a1, a2, a3, a4);
  }
  else
  {
    v7 = a4;
    v9 = v6 == v5;
    v10 = *(_DWORD *)(a1 + 5812);
    if ( v9 )
    {
      v11 = a4 + 2;
      if ( v10 <= 13 )
      {
        *(_WORD *)(a1 + 5808) |= v11 << v10;
        *(_DWORD *)(a1 + 5812) = v10 + 3;
      }
      else
      {
        v12 = v11 << v10;
        v13 = *(_DWORD *)(a1 + 8);
        *(_WORD *)(a1 + 5808) |= v12;
        *(_BYTE *)(v13 + (*(_DWORD *)(a1 + 20))++) = *(_BYTE *)(a1 + 5808);
        *(_BYTE *)(*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
        v14 = *(_DWORD *)(a1 + 5812);
        ++*(_DWORD *)(a1 + 20);
        *(_DWORD *)(a1 + 5812) = v14 - 13;
        *(_WORD *)(a1 + 5808) = (unsigned __int16)v11 >> (16 - v14);
      }
      sub_4BEBB0(a1, (int)&unk_51FC70, (int)&unk_5200F0);
    }
    else
    {
      v15 = a4 + 4;
      if ( v10 <= 13 )
      {
        *(_WORD *)(a1 + 5808) |= v15 << v10;
        *(_DWORD *)(a1 + 5812) = v10 + 3;
      }
      else
      {
        v16 = v15 << v10;
        v17 = *(_DWORD *)(a1 + 8);
        *(_WORD *)(a1 + 5808) |= v16;
        *(_BYTE *)(v17 + (*(_DWORD *)(a1 + 20))++) = *(_BYTE *)(a1 + 5808);
        *(_BYTE *)(*(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 8)) = *(_BYTE *)(a1 + 5809);
        v18 = *(_DWORD *)(a1 + 5812);
        ++*(_DWORD *)(a1 + 20);
        *(_DWORD *)(a1 + 5812) = v18 - 13;
        *(_WORD *)(a1 + 5808) = (unsigned __int16)v15 >> (16 - v18);
      }
      sub_4BE8B0(a1, *(_DWORD *)(a1 + 2836) + 1, *(_DWORD *)(a1 + 2848) + 1, v20 + 1);
      sub_4BEBB0(a1, a1 + 140, a1 + 2432);
    }
  }
  result = sub_4BDF50(v8, a1);
  if ( v7 )
    result = (_WORD *)sub_4BF0F0(a1);
  return result;
}

//----- (004BFFF0) --------------------------------------------------------
int __cdecl sub_4BFFF0(int a1, int a2, unsigned int a3)
{
  unsigned int v3; // esi
  unsigned int i; // eax
  unsigned int v5; // edi
  unsigned int v6; // eax
  _DWORD *v7; // ecx
  unsigned int v8; // edx
  unsigned int v9; // eax
  unsigned int v10; // edx
  unsigned int v11; // eax
  unsigned int v12; // edx
  unsigned int v13; // eax
  unsigned int v14; // edx
  unsigned int v15; // edx
  unsigned int v16; // eax
  int v17; // ecx

  v17 = a2;
  if ( !a2 )
    return 0;
  v3 = a3;
  for ( i = ~a1; v3; --v3 )
  {
    if ( !(v17 & 3) )
      break;
    i = dword_520558[(unsigned __int8)(i ^ *(_BYTE *)v17++)] ^ (i >> 8);
  }
  if ( v3 >= 0x20 )
  {
    v5 = v3 >> 5;
    do
    {
      v6 = *(_DWORD *)v17 ^ i;
      v7 = (_DWORD *)(v17 + 12);
      v8 = *(v7 - 2) ^ dword_521158[(unsigned __int8)v6] ^ dword_520558[v6 >> 24] ^ dword_520D58[BYTE1(v6)] ^ dword_520958[(v6 >> 16) & 0xFF];
      v7 += 3;
      v9 = *(v7 - 4) ^ dword_521158[(unsigned __int8)v8] ^ dword_520558[v8 >> 24] ^ dword_520D58[BYTE1(v8)] ^ dword_520958[(v8 >> 16) & 0xFF];
      v10 = *(v7 - 3) ^ dword_521158[(unsigned __int8)v9] ^ dword_520558[v9 >> 24] ^ dword_520D58[BYTE1(v9)] ^ dword_520958[(v9 >> 16) & 0xFF];
      v11 = *(v7 - 2) ^ dword_521158[(unsigned __int8)v10] ^ dword_520558[v10 >> 24] ^ dword_520D58[BYTE1(v10)] ^ dword_520958[(v10 >> 16) & 0xFF];
      v12 = *(v7 - 1) ^ dword_521158[(unsigned __int8)v11] ^ dword_520558[v11 >> 24] ^ dword_520D58[BYTE1(v11)] ^ dword_520958[(v11 >> 16) & 0xFF];
      v13 = *v7 ^ dword_521158[(unsigned __int8)v12] ^ dword_520558[v12 >> 24] ^ dword_520D58[BYTE1(v12)] ^ dword_520958[(v12 >> 16) & 0xFF];
      v17 = (int)(v7 + 2);
      v3 -= 32;
      v14 = *(_DWORD *)(v17 - 4) ^ dword_521158[(unsigned __int8)v13] ^ dword_520558[v13 >> 24] ^ dword_520D58[BYTE1(v13)] ^ dword_520958[(v13 >> 16) & 0xFF];
      i = dword_521158[(unsigned __int8)v14] ^ dword_520558[v14 >> 24] ^ dword_520D58[BYTE1(v14)] ^ dword_520958[(v14 >> 16) & 0xFF];
      --v5;
    }
    while ( v5 );
  }
  if ( v3 >= 4 )
  {
    v15 = v3 >> 2;
    do
    {
      v16 = *(_DWORD *)v17 ^ i;
      v17 += 4;
      v3 -= 4;
      --v15;
      i = dword_521158[(unsigned __int8)v16] ^ dword_520558[v16 >> 24] ^ dword_520D58[BYTE1(v16)] ^ dword_520958[(v16 >> 16) & 0xFF];
    }
    while ( v15 );
  }
  for ( ; v3; --v3 )
    i = dword_520558[(unsigned __int8)(i ^ *(_BYTE *)v17++)] ^ (i >> 8);
  return ~i;
}

//----- (004C0050) --------------------------------------------------------
void *__cdecl sub_4C0050(int a1, int a2, int a3)
{
  return malloc(a3 * a2);
}

//----- (004C0070) --------------------------------------------------------
void __cdecl sub_4C0070(int a1, void *Memory)
{
  free(Memory);
}

//----- (004C0080) --------------------------------------------------------
_DWORD *__cdecl sub_4C0080(_DWORD *a1, int a2)
{
  _DWORD *v2; // eax
  unsigned int v3; // ebx
  unsigned __int8 *v4; // ebp
  _BYTE *v5; // esi
  unsigned int v6; // edi
  int v7; // edx
  int v8; // eax
  int v9; // edi
  unsigned int v10; // eax
  int v11; // ecx
  char v12; // dl
  unsigned int v13; // edx
  int v14; // eax
  int v15; // edx
  int v16; // ebp
  int v17; // eax
  int v18; // edx
  int v19; // edi
  unsigned int v20; // edx
  int v21; // ecx
  char v22; // al
  int v23; // ecx
  unsigned int v24; // eax
  int v25; // edx
  int v26; // edx
  int v27; // edx
  unsigned int v28; // edx
  char v29; // cl
  int v30; // eax
  unsigned int v31; // ebp
  int v32; // ecx
  int v33; // ecx
  char v34; // al
  int v35; // edx
  unsigned int v36; // ebp
  char v37; // dl
  unsigned int v38; // ebp
  char v39; // al
  char v40; // al
  unsigned int v41; // ebp
  char v42; // al
  int v43; // ecx
  _BYTE *v44; // esi
  char v45; // dl
  char v46; // al
  char v47; // dl
  int v48; // ecx
  unsigned int v49; // edx
  int v50; // eax
  char v51; // cl
  int v52; // eax
  char v53; // dl
  _BYTE *v54; // esi
  char v55; // cl
  unsigned int v56; // ecx
  char v57; // dl
  int v58; // eax
  int v59; // ebp
  int v60; // edi
  _DWORD *result; // eax
  int v62; // [esp+10h] [ebp-3Ch]
  unsigned int v63; // [esp+14h] [ebp-38h]
  _DWORD *v64; // [esp+18h] [ebp-34h]
  unsigned int v65; // [esp+1Ch] [ebp-30h]
  unsigned int v66; // [esp+1Ch] [ebp-30h]
  unsigned __int16 v67; // [esp+1Eh] [ebp-2Eh]
  int v68; // [esp+20h] [ebp-2Ch]
  int v69; // [esp+24h] [ebp-28h]
  int v70; // [esp+28h] [ebp-24h]
  unsigned int v71; // [esp+2Ch] [ebp-20h]
  int v72; // [esp+30h] [ebp-1Ch]
  int v73; // [esp+38h] [ebp-14h]
  unsigned int v74; // [esp+3Ch] [ebp-10h]
  int v75; // [esp+40h] [ebp-Ch]
  unsigned int v76; // [esp+44h] [ebp-8h]
  int v77; // [esp+48h] [ebp-4h]
  unsigned int v78; // [esp+54h] [ebp+8h]

  v2 = (_DWORD *)a1[7];
  v3 = v2[12];
  v4 = (unsigned __int8 *)(*a1 - 1);
  v63 = (unsigned int)&v4[a1[1] - 5];
  v5 = (_BYTE *)(a1[3] - 1);
  v73 = (int)&v5[a1[4] - a2];
  v71 = (unsigned int)&v5[a1[4] - 257];
  v70 = v2[8];
  v74 = v2[9];
  v76 = v2[10];
  v75 = v2[11];
  v68 = v2[17];
  v69 = v2[18];
  v64 = (_DWORD *)a1[7];
  v6 = v2[13];
  v7 = (1 << v2[19]) - 1;
  v62 = *a1 - 1;
  v77 = (1 << v2[19]) - 1;
  v72 = (1 << v2[20]) - 1;
  while ( 1 )
  {
    if ( v6 < 0xF )
    {
      v8 = v4[1] << v6;
      v4 += 2;
      v9 = v6 + 8;
      v62 = (int)v4;
      v3 += (*v4 << v9) + v8;
      v6 = v9 + 8;
    }
    v10 = *(_DWORD *)(v68 + 4 * (v3 & v7));
    v11 = (unsigned __int8)(*(_WORD *)(v68 + 4 * (v3 & v7)) >> 8);
    v12 = v10;
    v3 >>= v11;
    v6 -= v11;
    if ( !(_BYTE)v10 )
    {
LABEL_8:
      *++v5 = BYTE2(v10);
      goto LABEL_47;
    }
    while ( !(v12 & 0x10) )
    {
      if ( v12 & 0x40 )
      {
        if ( v12 & 0x20 )
        {
          *v64 = 11;
          goto LABEL_61;
        }
        a1[6] = aInvalidLiteral_1;
LABEL_60:
        *v64 = 27;
        goto LABEL_61;
      }
      v10 = *(_DWORD *)(v68 + 4 * ((v10 >> 16) + (v3 & ((1 << v12) - 1))));
      v12 = v10;
      v3 >>= SBYTE1(v10);
      v6 -= BYTE1(v10);
      if ( !(_BYTE)v10 )
        goto LABEL_8;
    }
    v13 = v12 & 0xF;
    v78 = v10 >> 16;
    if ( v13 )
    {
      if ( v6 < v13 )
      {
        v14 = (v4++)[1];
        v62 = (int)v4;
        v3 += v14 << v6;
        v6 += 8;
      }
      v78 += v3 & ((1 << v13) - 1);
      v3 >>= v13;
      v6 -= v13;
    }
    if ( v6 < 0xF )
    {
      v15 = v4[1];
      v16 = (int)(v4 + 1);
      v17 = *(unsigned __int8 *)(v16 + 1);
      v4 = (unsigned __int8 *)(v16 + 1);
      v18 = v15 << v6;
      v19 = v6 + 8;
      v62 = (int)v4;
      v3 += (v17 << v19) + v18;
      v6 = v19 + 8;
    }
    v20 = *(_DWORD *)(v69 + 4 * (v3 & v72));
    v21 = (unsigned __int8)(*(_WORD *)(v69 + 4 * (v3 & v72)) >> 8);
    v22 = *(_DWORD *)(v69 + 4 * (v3 & v72));
    v3 >>= v21;
    v6 -= v21;
    v67 = HIWORD(v20);
    if ( !(v20 & 0x10) )
    {
      while ( !(v22 & 0x40) )
      {
        v20 = *(_DWORD *)(v69 + 4 * (v67 + (v3 & ((1 << v22) - 1))));
        v23 = (unsigned __int8)(*(_WORD *)(v69 + 4 * (v67 + (v3 & ((1 << v22) - 1)))) >> 8);
        v22 = *(_DWORD *)(v69 + 4 * (v67 + (v3 & ((1 << v22) - 1))));
        v3 >>= v23;
        v6 -= v23;
        v67 = HIWORD(v20);
        if ( v20 & 0x10 )
          goto LABEL_18;
      }
      a1[6] = aInvalidDistanc_3;
      goto LABEL_60;
    }
LABEL_18:
    v24 = v22 & 0xF;
    v65 = v20 >> 16;
    if ( v6 < v24 )
    {
      v25 = (v4++)[1];
      v26 = v25 << v6;
      v6 += 8;
      v62 = (int)v4;
      v3 += v26;
      if ( v6 < v24 )
      {
        v27 = (v4++)[1];
        v62 = (int)v4;
        v3 += v27 << v6;
        v6 += 8;
      }
    }
    v6 -= v24;
    v28 = (v3 & ((1 << v24) - 1)) + v65;
    v29 = v24;
    v30 = (int)&v5[-v73];
    v3 >>= v29;
    v66 = v28;
    if ( v28 > (unsigned int)&v5[-v73] )
    {
      v31 = v28 - v30;
      if ( v28 - v30 > v74 )
      {
        v4 = (unsigned __int8 *)v62;
        a1[6] = aInvalidDistanc_2;
        *v64 = 27;
LABEL_61:
        v49 = v63;
        break;
      }
      v32 = v75 - 1;
      if ( v76 )
      {
        if ( v76 < v31 )
        {
          v35 = v70 + v76 - v31;
          v36 = v31 - v76;
          v33 = v35 + v32;
          if ( v36 < v78 )
          {
            v78 -= v36;
            do
            {
              v37 = *(_BYTE *)(v33++ + 1);
              ++v5;
              --v36;
              *v5 = v37;
            }
            while ( v36 );
            v33 = v75 - 1;
            if ( v76 < v78 )
            {
              v78 -= v76;
              v38 = v76;
              do
              {
                v39 = *(_BYTE *)(v33++ + 1);
                ++v5;
                --v38;
                *v5 = v39;
              }
              while ( v38 );
              v33 = (int)&v5[-v66];
            }
          }
          goto LABEL_40;
        }
        v33 = v76 - v31 + v32;
        if ( v31 < v78 )
        {
          v78 -= v31;
          do
          {
            v40 = *(_BYTE *)(v33++ + 1);
            ++v5;
            --v31;
            *v5 = v40;
          }
          while ( v31 );
          goto LABEL_39;
        }
      }
      else
      {
        v33 = v70 - v31 + v32;
        if ( v31 < v78 )
        {
          v78 -= v31;
          do
          {
            v34 = *(_BYTE *)(v33++ + 1);
            ++v5;
            --v31;
            *v5 = v34;
          }
          while ( v31 );
LABEL_39:
          v33 = (int)&v5[-v28];
          goto LABEL_40;
        }
      }
LABEL_40:
      if ( v78 > 2 )
      {
        v41 = (v78 - 3) / 3 + 1;
        do
        {
          v42 = *(_BYTE *)(v33 + 1);
          v78 -= 3;
          v43 = v33 + 1;
          v44 = v5 + 1;
          *v44 = v42;
          v45 = *(_BYTE *)(v43++ + 1);
          *++v44 = v45;
          v46 = *(_BYTE *)(v43 + 1);
          v33 = v43 + 1;
          v5 = v44 + 1;
          --v41;
          *v5 = v46;
        }
        while ( v41 );
      }
      if ( v78 )
      {
        v47 = *(_BYTE *)(v33 + 1);
        v48 = v33 + 1;
        *++v5 = v47;
        if ( v78 > 1 )
          *++v5 = *(_BYTE *)(v48 + 1);
      }
      v4 = (unsigned __int8 *)v62;
      goto LABEL_47;
    }
    v50 = (int)&v5[-v28];
    do
    {
      v51 = *(_BYTE *)(v50 + 1);
      v52 = v50 + 1;
      v5[1] = v51;
      v53 = *(_BYTE *)(v52++ + 1);
      v54 = v5 + 2;
      *v54 = v53;
      v55 = *(_BYTE *)(v52 + 1);
      v50 = v52 + 1;
      v5 = v54 + 1;
      *v5 = v55;
      v56 = v78 - 3;
      v78 -= 3;
    }
    while ( v78 > 2 );
    if ( v56 )
    {
      v57 = *(_BYTE *)(v50 + 1);
      v58 = v50 + 1;
      *++v5 = v57;
      if ( v56 > 1 )
        *++v5 = *(_BYTE *)(v58 + 1);
    }
LABEL_47:
    v49 = v63;
    if ( (unsigned int)v4 >= v63 || (unsigned int)v5 >= v71 )
      break;
    v7 = v77;
  }
  v59 = (int)&v4[-(v6 >> 3)];
  v60 = v6 - 8 * (v6 >> 3);
  *a1 = v59 + 1;
  a1[3] = v5 + 1;
  a1[4] = v71 - (_DWORD)v5 + 257;
  result = v64;
  a1[1] = v49 - v59 + 5;
  v64[13] = v60;
  v64[12] = ((1 << v60) - 1) & v3;
  return result;
}

//----- (004C0540) --------------------------------------------------------
signed int __cdecl sub_4C0540(int a1, int a2, unsigned int a3, int *a4, unsigned int *a5, _WORD *a6)
{
  unsigned int v6; // eax
  unsigned int v7; // edx
  unsigned int v8; // eax
  unsigned int v10; // esi
  int v11; // edx
  unsigned int v12; // eax
  unsigned int v13; // eax
  __int16 v14; // dx
  unsigned int v15; // eax
  unsigned int v16; // ebp
  unsigned int v17; // ebx
  int v18; // eax
  signed int v19; // edx
  signed int v20; // eax
  _DWORD *v21; // ecx
  unsigned int v22; // edx
  unsigned int i; // eax
  int v24; // eax
  int v25; // esi
  char v26; // cl
  unsigned int v27; // edx
  signed int v28; // eax
  unsigned __int16 *v29; // esi
  int v30; // eax
  int v31; // esi
  unsigned int j; // eax
  int v33; // [esp+8h] [ebp-88h]
  int v34; // [esp+8h] [ebp-88h]
  unsigned int v35; // [esp+Ch] [ebp-84h]
  unsigned int v36; // [esp+10h] [ebp-80h]
  _WORD *v37; // [esp+14h] [ebp-7Ch]
  unsigned int v38; // [esp+18h] [ebp-78h]
  int v39; // [esp+1Ch] [ebp-74h]
  unsigned int v40; // [esp+24h] [ebp-6Ch]
  char *v41; // [esp+28h] [ebp-68h]
  char *v42; // [esp+2Ch] [ebp-64h]
  signed int v43; // [esp+30h] [ebp-60h]
  signed int v44; // [esp+34h] [ebp-5Ch]
  signed int v45; // [esp+38h] [ebp-58h]
  int v46; // [esp+3Ch] [ebp-54h]
  int v47; // [esp+4Ch] [ebp-44h]
  int v48; // [esp+50h] [ebp-40h]
  int v49; // [esp+54h] [ebp-3Ch]
  int v50; // [esp+58h] [ebp-38h]
  int v51; // [esp+5Ch] [ebp-34h]
  int v52; // [esp+60h] [ebp-30h]
  int v53; // [esp+64h] [ebp-2Ch]
  int v54; // [esp+68h] [ebp-28h]
  __int16 v55; // [esp+6Ch] [ebp-24h]
  __int16 v56; // [esp+6Eh] [ebp-22h]

  v6 = 0;
  v37 = a6;
  v47 = 0;
  v48 = 0;
  v49 = 0;
  v50 = 0;
  v51 = 0;
  v52 = 0;
  v53 = 0;
  v54 = 0;
  if ( a3 )
  {
    do
      ++*((_WORD *)&v47 + *(unsigned __int16 *)(a2 + 2 * v6++));
    while ( v6 < a3 );
  }
  v7 = *a5;
  v35 = *a5;
  v8 = 15;
  do
  {
    if ( *((_WORD *)&v47 + v8) )
      break;
    --v8;
  }
  while ( v8 >= 1 );
  v38 = v8;
  if ( v7 > v8 )
  {
    v35 = v8;
    v7 = v8;
  }
  if ( !v8 )
    return -1;
  v10 = 1;
  while ( !*((_WORD *)&v47 + v10) )
  {
    if ( *((_WORD *)&v47 + v10 + 1) )
    {
      ++v10;
      break;
    }
    if ( *((_WORD *)&v48 + v10) )
    {
      v10 += 2;
      break;
    }
    if ( *((_WORD *)&v48 + v10 + 1) )
    {
      v10 += 3;
      break;
    }
    if ( *((_WORD *)&v49 + v10) )
    {
      v10 += 4;
      break;
    }
    v10 += 5;
    if ( v10 > 0xF )
      break;
  }
  if ( v7 < v10 )
    v35 = v10;
  v11 = 1;
  v12 = 1;
  do
  {
    v11 = 2 * v11 - *((unsigned __int16 *)&v47 + v12);
    if ( v11 < 0 )
      return -1;
    ++v12;
  }
  while ( v12 <= 0xF );
  if ( v11 > 0 && (!a1 || a3 - (unsigned __int16)v47 != 1) )
    return -1;
  v56 = 0;
  v13 = 2;
  do
  {
    v14 = *(_WORD *)((char *)&v47 + v13) + *(__int16 *)((char *)&v55 + v13);
    v13 += 2;
    *(__int16 *)((char *)&v55 + v13) = v14;
  }
  while ( v13 < 0x1E );
  v15 = 0;
  if ( a3 )
  {
    do
    {
      if ( *(_WORD *)(a2 + 2 * v15) )
        a6[(unsigned __int16)(*(&v55 + *(unsigned __int16 *)(a2 + 2 * v15)))++] = v15;
      ++v15;
    }
    while ( v15 < a3 );
  }
  if ( a1 )
  {
    if ( a1 == 1 )
    {
      v42 = (char *)&unk_5225B0 - 514;
      v41 = (char *)&unk_5225F0 - 514;
      v44 = 256;
    }
    else
    {
      v42 = (char *)&unk_522630;
      v41 = (char *)&unk_522670;
      v44 = -1;
    }
  }
  else
  {
    v41 = (char *)a6;
    v42 = (char *)a6;
    v44 = 19;
  }
  v39 = *a4;
  v45 = -1;
  v16 = 0;
  v17 = 0;
  v36 = v10;
  v43 = 1 << v35;
  v40 = 1 << v35;
  v46 = (1 << v35) - 1;
  if ( a1 == 1 && (unsigned int)(1 << v35) >= 0x506 )
    return 1;
  while ( 1 )
  {
    if ( (unsigned __int16)*v37 >= v44 )
    {
      if ( (unsigned __int16)*v37 <= v44 )
      {
        LOBYTE(v33) = 96;
        HIWORD(v33) = 0;
      }
      else
      {
        v18 = 2 * (unsigned __int16)*v37;
        LOBYTE(v33) = v41[v18];
        HIWORD(v33) = *(_WORD *)&v42[v18];
      }
    }
    else
    {
      LOBYTE(v33) = 0;
      HIWORD(v33) = *v37;
    }
    v19 = v43;
    v20 = 1 << (v36 - v17);
    v21 = (_DWORD *)(v39 + 4 * (v43 + (v16 >> v17)));
    do
    {
      v19 -= v20;
      v21 -= v20;
      BYTE1(v33) = v36 - v17;
      *v21 = v33;
    }
    while ( v19 );
    v22 = v36;
    for ( i = 1 << (v36 - 1); i & v16; i >>= 1 )
      ;
    if ( i )
      v16 = i + (v16 & (i - 1));
    else
      v16 = 0;
    --*((_WORD *)&v47 + v36);
    ++v37;
    if ( *((_WORD *)&v47 + v36) )
      goto LABEL_60;
    if ( v36 == v38 )
      break;
    v24 = (unsigned __int16)*v37;
    v22 = *(unsigned __int16 *)(a2 + 2 * v24);
    v36 = *(unsigned __int16 *)(a2 + 2 * v24);
LABEL_60:
    if ( v22 > v35 )
    {
      v25 = v16 & v46;
      if ( (v16 & v46) != v45 )
      {
        if ( !v17 )
          v17 = v35;
        v26 = v36 - v17;
        v39 += 4 * v43;
        v27 = v36;
        v28 = 1 << (v36 - v17);
        if ( v36 < v38 )
        {
          v29 = (unsigned __int16 *)((char *)&v47 + 2 * v36);
          do
          {
            v30 = v28 - *v29;
            if ( v30 <= 0 )
              break;
            ++v27;
            ++v26;
            ++v29;
            v28 = 2 * v30;
          }
          while ( v27 < v38 );
          v25 = v16 & v46;
        }
        v40 += 1 << v26;
        v43 = 1 << v26;
        if ( a1 == 1 && v40 >= 0x506 )
          return 1;
        *(_BYTE *)(*a4 + 4 * v25) = v26;
        *(_BYTE *)(*a4 + 4 * v25 + 1) = v35;
        v45 = v25;
        *(_WORD *)(*a4 + 4 * v25 + 2) = (v39 - *a4) >> 2;
      }
    }
  }
  LOBYTE(v34) = 64;
  BYTE1(v34) = v36 - v17;
  HIWORD(v34) = 0;
  if ( v16 )
  {
    v31 = v39;
    do
    {
      if ( v17 && (v16 & v46) != v45 )
      {
        v31 = *a4;
        v17 = 0;
        BYTE1(v34) = v35;
        LOBYTE(v22) = v35;
      }
      *(_DWORD *)(v31 + 4 * (v16 >> v17)) = v34;
      for ( j = 1 << (v22 - 1); j & v16; j >>= 1 )
        ;
      if ( !j )
        break;
      v16 = j + (v16 & (j - 1));
    }
    while ( v16 );
  }
  *a4 += 4 * v40;
  *a5 = v35;
  return 0;
}

//----- (004C120A) --------------------------------------------------------
void __thiscall sub_4C120A(struct type_info *this)
{
  *(_DWORD *)this = &type_info::`vftable';
  type_info::_Type_info_dtor(this);
}
// 5226D8: using guessed type void *type_info::`vftable';

//----- (004C1218) --------------------------------------------------------
void *__thiscall sub_4C1218(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4C120A((struct type_info *)Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004C12A1) --------------------------------------------------------
int __thiscall sub_4C12A1(char *this)
{
  return (int)(this + 8);
}

//----- (004C1E5E) --------------------------------------------------------
void __thiscall sub_4C1E5E(void *this)
{
  *(_DWORD *)this = &std::bad_alloc::`vftable';
  sub_4CD364(this);
}
// 5226E0: using guessed type void *std::bad_alloc::`vftable';

//----- (004C1E69) --------------------------------------------------------
void *__thiscall sub_4C1E69(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &std::bad_alloc::`vftable';
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 5226E0: using guessed type void *std::bad_alloc::`vftable';

//----- (004C2474) --------------------------------------------------------
signed int __cdecl sub_4C2474(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 && dword_576B18 )
  {
    *a1 = dword_576B18;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576B18: using guessed type int dword_576B18;

//----- (004C24AB) --------------------------------------------------------
signed int __cdecl sub_4C24AB(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 && dword_576B18 )
  {
    *a1 = dword_576B1C;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576B18: using guessed type int dword_576B18;
// 576B1C: using guessed type int dword_576B1C;

//----- (004C2523) --------------------------------------------------------
signed int __cdecl sub_4C2523(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 && dword_576B18 )
  {
    *a1 = dword_576B24;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 576B18: using guessed type int dword_576B18;
// 576B24: using guessed type int dword_576B24;

//----- (004C2E5B) --------------------------------------------------------
int __cdecl sub_4C2E5B(FILE *File)
{
  int result; // eax
  _DWORD *v2; // edi
  _BYTE *v3; // eax
  _DWORD *v4; // edi
  _BYTE *v5; // eax
  bool v6; // sf
  int v7; // eax
  signed int v8; // [esp+10h] [ebp-1Ch]

  v8 = 0;
  if ( File != 0 )
  {
    _lock_file(File);
    if ( !(File->_flag & 0x40) )
    {
      if ( _fileno(File) == -1 || _fileno(File) == -2 )
      {
        v3 = &unk_53C9D8;
      }
      else
      {
        v2 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
        v3 = (_BYTE *)(*v2 + ((_fileno(File) & 0x1F) << 6));
      }
      if ( v3[36] & 0x7F
        || (_fileno(File) == -1 || _fileno(File) == -2 ? (v5 = &unk_53C9D8) : (v4 = (_DWORD *)(4 * (_fileno(File) >> 5)
                                                                                             + 5732000),
                                                                               v5 = (_BYTE *)(*v4
                                                                                            + ((_fileno(File) & 0x1F) << 6))),
            v5[36] < 0) )
      {
        *_errno() = 22;
        _invalid_parameter(0, 0, 0, 0, 0);
        v8 = -1;
      }
    }
    if ( !v8 )
    {
      v6 = File->_cnt-- - 1 < 0;
      if ( v6 )
        v7 = sub_4CC9E6(File);
      else
        v7 = *(unsigned __int8 *)File->_ptr++;
      v8 = v7;
    }
    _unlock_file();
    result = v8;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  return result;
}
// 4C7834: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C30C1) --------------------------------------------------------
int sub_4C30C1()
{
  return _unlock_file();
}

//----- (004C30E3) --------------------------------------------------------
int __cdecl sub_4C30E3(int a1, FILE *File)
{
  int result; // eax
  _DWORD *v3; // edi
  _BYTE *v4; // eax
  _DWORD *v5; // edi
  _BYTE *v6; // eax
  bool v7; // sf
  int v8; // eax
  signed int v9; // [esp+10h] [ebp-1Ch]

  v9 = 0;
  if ( File != 0 )
  {
    _lock_file(File);
    if ( !(File->_flag & 0x40) )
    {
      if ( _fileno(File) == -1 || _fileno(File) == -2 )
      {
        v4 = &unk_53C9D8;
      }
      else
      {
        v3 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
        v4 = (_BYTE *)(*v3 + ((_fileno(File) & 0x1F) << 6));
      }
      if ( v4[36] & 0x7F
        || (_fileno(File) == -1 || _fileno(File) == -2 ? (v6 = &unk_53C9D8) : (v5 = (_DWORD *)(4 * (_fileno(File) >> 5)
                                                                                             + 5732000),
                                                                               v6 = (_BYTE *)(*v5
                                                                                            + ((_fileno(File) & 0x1F) << 6))),
            v6[36] < 0) )
      {
        *_errno() = 22;
        _invalid_parameter(0, 0, 0, 0, 0);
        v9 = -1;
      }
    }
    if ( !v9 )
    {
      v7 = File->_cnt-- - 1 < 0;
      if ( v7 )
      {
        v8 = sub_4C9CA6(a1, File);
      }
      else
      {
        *File->_ptr = a1;
        v8 = (unsigned __int8)a1;
        ++File->_ptr;
      }
      v9 = v8;
    }
    _unlock_file();
    result = v9;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  return result;
}
// 4C7834: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C3359) --------------------------------------------------------
int sub_4C3359()
{
  return _unlock_file();
}

//----- (004C3361) --------------------------------------------------------
int sub_4C3361(FILE *File, int a2, ...)
{
  int result; // eax
  _DWORD *v3; // edi
  _BYTE *v4; // eax
  _DWORD *v5; // edi
  _BYTE *v6; // eax
  int v7; // edi
  int v8; // [esp+10h] [ebp-1Ch]
  va_list va; // [esp+3Ch] [ebp+10h]

  va_start(va, a2);
  v8 = 0;
  if ( File == 0 || a2 == 0 )
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  else
  {
    _lock_file(File);
    if ( !(File->_flag & 0x40) )
    {
      if ( _fileno(File) == -1 || _fileno(File) == -2 )
      {
        v4 = &unk_53C9D8;
      }
      else
      {
        v3 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
        v4 = (_BYTE *)(*v3 + ((_fileno(File) & 0x1F) << 6));
      }
      if ( v4[36] & 0x7F
        || (_fileno(File) == -1 || _fileno(File) == -2 ? (v6 = &unk_53C9D8) : (v5 = (_DWORD *)(4 * (_fileno(File) >> 5)
                                                                                             + 5732000),
                                                                               v6 = (_BYTE *)(*v5
                                                                                            + ((_fileno(File) & 0x1F) << 6))),
            v6[36] < 0) )
      {
        *_errno() = 22;
        _invalid_parameter(0, 0, 0, 0, 0);
        v8 = -1;
      }
    }
    if ( !v8 )
    {
      v7 = _stbuf(File);
      v8 = _output_l((int)File, a2, 0, (int)va);
      _ftbuf(v7, File);
    }
    _unlock_file();
    result = v8;
  }
  return result;
}
// 4C7834: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C352E) --------------------------------------------------------
int __cdecl sub_4C352E(int a1, int a2, FILE *File)
{
  FILE *v4; // edi
  _DWORD *v5; // edi
  _BYTE *v6; // eax
  _DWORD *v7; // edi
  _BYTE *v8; // eax
  bool v9; // sf
  int v10; // eax
  _BYTE *v11; // eax
  int v12; // [esp+18h] [ebp-20h]
  _BYTE *v13; // [esp+1Ch] [ebp-1Ch]

  v13 = (_BYTE *)a1;
  v12 = a1;
  if ( !a1 && a2 || a2 < 0 || File == 0 )
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return 0;
  }
  if ( !a2 )
    return 0;
  v4 = File;
  _lock_file(File);
  if ( !(File->_flag & 0x40) )
  {
    if ( _fileno(File) == -1 || _fileno(File) == -2 )
    {
      v6 = &unk_53C9D8;
    }
    else
    {
      v5 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
      v6 = (_BYTE *)(*v5 + ((_fileno(File) & 0x1F) << 6));
      v4 = File;
    }
    if ( v6[36] & 0x7F
      || (_fileno(File) == -1 || _fileno(File) == -2 ? (v8 = &unk_53C9D8) : (v7 = (_DWORD *)(4 * (_fileno(File) >> 5)
                                                                                           + 5732000),
                                                                             v8 = (_BYTE *)(*v7
                                                                                          + ((_fileno(File) & 0x1F) << 6)),
                                                                             v4 = File),
          v8[36] < 0) )
    {
      *_errno() = 22;
      _invalid_parameter(0, 0, 0, 0, 0);
      v12 = 0;
    }
  }
  if ( v12 )
  {
    while ( 1 )
    {
      if ( !--a2 )
      {
LABEL_29:
        v11 = v13;
        goto LABEL_30;
      }
      v9 = v4->_cnt-- - 1 < 0;
      if ( v9 )
        v10 = sub_4CC9E6(v4);
      else
        v10 = *(unsigned __int8 *)v4->_ptr++;
      if ( v10 == -1 )
        break;
      *v13++ = v10;
      if ( (_BYTE)v10 == 10 )
        goto LABEL_29;
    }
    v11 = v13;
    if ( v13 == (_BYTE *)a1 )
    {
      v12 = 0;
      goto LABEL_31;
    }
LABEL_30:
    *v11 = 0;
  }
LABEL_31:
  _unlock_file();
  return v12;
}
// 4C7834: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C444A) --------------------------------------------------------
int __thiscall sub_4C444A(void *this)
{
  return _cintrindisp2(this, &unk_53CC20);
}
// 4D2C10: using guessed type int __fastcall _cintrindisp2(_DWORD, _DWORD);

//----- (004C5DCA) --------------------------------------------------------
signed int __cdecl sub_4C5DCA(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 )
  {
    *a1 = dword_53BCA4;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53BCA4: using guessed type int dword_53BCA4;

//----- (004C5DFE) --------------------------------------------------------
signed int __cdecl sub_4C5DFE(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 )
  {
    *a1 = dword_53BCA8;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53BCA8: using guessed type int dword_53BCA8;

//----- (004C5E32) --------------------------------------------------------
signed int __cdecl sub_4C5E32(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 )
  {
    *a1 = dword_53BCA0;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53BCA0: using guessed type int dword_53BCA0;

//----- (004C5F08) --------------------------------------------------------
int *sub_4C5F08()
{
  return &dword_53BCA4;
}
// 53BCA4: using guessed type int dword_53BCA4;

//----- (004C5F0E) --------------------------------------------------------
int *sub_4C5F0E()
{
  return &dword_53BCA8;
}
// 53BCA8: using guessed type int dword_53BCA8;

//----- (004C5F14) --------------------------------------------------------
int *sub_4C5F14()
{
  return &dword_53BCA0;
}
// 53BCA0: using guessed type int dword_53BCA0;

//----- (004C5F1A) --------------------------------------------------------
void ***sub_4C5F1A()
{
  return off_53BD30;
}
// 53BD30: using guessed type void **off_53BD30[2];

//----- (004C60E2) --------------------------------------------------------
int __cdecl sub_4C60E2(char *DstBuf, char *Format, va_list ArgList)
{
  return _vsprintf_l(DstBuf, Format, 0, ArgList);
}

//----- (004C614E) --------------------------------------------------------
int __cdecl sub_4C614E(int a1, int a2)
{
  return _vscprintf_helper(_output_l, a1, 0, a2);
}
// 4C60F9: using guessed type _DWORD __cdecl _vscprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C6166) --------------------------------------------------------
int __cdecl sub_4C6166(int a1, int a2, int a3)
{
  return _vscprintf_helper(_output_l, a1, a2, a3);
}
// 4C60F9: using guessed type _DWORD __cdecl _vscprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C6180) --------------------------------------------------------
int __cdecl sub_4C6180(int a1, int a2)
{
  return _vscprintf_helper(_output_p_l, a1, 0, a2);
}
// 4C60F9: using guessed type _DWORD __cdecl _vscprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C6198) --------------------------------------------------------
int __cdecl sub_4C6198(int a1, int a2, int a3)
{
  return _vscprintf_helper(_output_p_l, a1, a2, a3);
}
// 4C60F9: using guessed type _DWORD __cdecl _vscprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C657A) --------------------------------------------------------
signed int __cdecl sub_4C657A(int a1, int a2)
{
  signed int result; // eax
  void **v3; // eax
  FILE *v4; // eax
  int v5; // edi
  void **v6; // eax
  int v7; // ST28_4
  FILE *v8; // eax
  void **v9; // eax

  if ( a1 != 0 )
  {
    v3 = sub_4C775D();
    _lock_file2(1, v3 + 8);
    v4 = (FILE *)sub_4C775D();
    v5 = _stbuf(v4 + 1);
    v6 = sub_4C775D();
    v7 = _output_l((int)(v6 + 8), a1, 0, (int)&a2);
    v8 = (FILE *)sub_4C775D();
    _ftbuf(v5, v8 + 1);
    v9 = sub_4C775D();
    _unlock_file2(1, v9 + 8);
    result = v7;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  return result;
}
// 4C7870: using guessed type _DWORD __cdecl _lock_file2(_DWORD, _DWORD);
// 4C78D4: using guessed type _DWORD __cdecl _unlock_file2(_DWORD, _DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004C6A07) --------------------------------------------------------
double __cdecl sub_4C6A07(char *String)
{
  return _atof_l(String, 0);
}

//----- (004C6CD0) --------------------------------------------------------
signed int __cdecl sub_4C6CD0(signed int a1)
{
  signed int v1; // edi
  void *v2; // eax
  DWORD v3; // edi

  if ( sub_4CD677(a1) == -1
    || (a1 == 1 && *(_BYTE *)(dword_5776A0[0] + 132) & 1 || a1 == 2 && *(_BYTE *)(dword_5776A0[0] + 68) & 1)
    && (v1 = sub_4CD677(2), sub_4CD677(1) == v1)
    || (v2 = (void *)sub_4CD677(a1), CloseHandle(v2)) )
  {
    v3 = 0;
  }
  else
  {
    v3 = GetLastError();
  }
  sub_4CD5F6(a1);
  *(_BYTE *)(dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6) + 4) = 0;
  if ( !v3 )
    return 0;
  _dosmaperr(v3);
  return -1;
}
// 4CAA42: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);

//----- (004C775D) --------------------------------------------------------
void **sub_4C775D()
{
  return &off_53BD58;
}
// 53BD58: using guessed type void *off_53BD58;

//----- (004C7A74) --------------------------------------------------------
void __thiscall sub_4C7A74(void *this)
{
  *(_DWORD *)this = &std::bad_exception::`vftable';
  sub_4CD364(this);
}
// 5227C8: using guessed type void *std::bad_exception::`vftable';

//----- (004C7A7F) --------------------------------------------------------
void *__thiscall sub_4C7A7F(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &std::bad_exception::`vftable';
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 5227C8: using guessed type void *std::bad_exception::`vftable';

//----- (004C8D83) --------------------------------------------------------
int sub_4C8D83()
{
  return dword_53BFFC;
}
// 53BFFC: using guessed type int dword_53BFFC;

//----- (004C9C9C) --------------------------------------------------------
int __cdecl sub_4C9C9C(int a1)
{
  int result; // eax

  result = a1;
  dword_5771F4 = a1;
  return result;
}
// 5771F4: using guessed type int dword_5771F4;

//----- (004C9CA6) --------------------------------------------------------
int __cdecl sub_4C9CA6(int a1, FILE *File)
{
  FILE *v2; // esi
  int v3; // eax
  unsigned int v5; // eax
  int v6; // eax
  char *v7; // edi
  signed int v8; // edi
  _BYTE *v9; // eax
  __int64 v10; // rax
  DWORD v11; // [esp+4h] [ebp-4h]

  v2 = File;
  File = (FILE *)_fileno(File);
  v3 = v2->_flag;
  if ( !(v3 & 0x82) )
  {
    *_errno() = 9;
LABEL_3:
    v2->_flag |= 0x20u;
    return -1;
  }
  if ( v3 & 0x40 )
  {
    *_errno() = 34;
    goto LABEL_3;
  }
  if ( v3 & 1 )
  {
    v2->_cnt = 0;
    if ( !(v3 & 0x10) )
    {
      v2->_flag = v3 | 0x20;
      return -1;
    }
    v2->_ptr = v2->_base;
    v2->_flag = v3 & 0xFFFFFFFE;
  }
  v5 = v2->_flag & 0xFFFFFFEF | 2;
  v2->_flag = v5;
  v2->_cnt = 0;
  v11 = 0;
  if ( !(v5 & 0x10C)
    && (v2 != (FILE *)(sub_4C775D() + 8) && v2 != (FILE *)(sub_4C775D() + 16) || !sub_4DF272((signed int)File)) )
  {
    _getbuf(v2);
  }
  if ( v2->_flag & 0x108 )
  {
    v6 = (int)v2->_base;
    v7 = v2->_ptr;
    v2->_ptr = (char *)(v6 + 1);
    v8 = (signed int)&v7[-v6];
    v2->_cnt = v2->_bufsiz - 1;
    if ( v8 <= 0 )
    {
      if ( File == (FILE *)-1 || File == (FILE *)-2 )
        v9 = &unk_53C9D8;
      else
        v9 = (_BYTE *)(dword_5776A0[(signed int)File >> 5] + (((unsigned __int8)File & 0x1F) << 6));
      if ( v9[4] & 0x20 )
      {
        v10 = _lseeki64((int)File, 0i64, 2);
        if ( (HIDWORD(v10) & (unsigned int)v10) == -1 )
          goto LABEL_27;
      }
    }
    else
    {
      v11 = sub_4D0CFA((int)File, v6, v8);
    }
    *v2->_base = a1;
  }
  else
  {
    v8 = 1;
    v11 = sub_4D0CFA((int)File, (int)&a1, 1u);
  }
  if ( v11 != v8 )
  {
LABEL_27:
    v2->_flag |= 0x20u;
    return -1;
  }
  return (unsigned __int8)a1;
}
// 4DF22E: using guessed type _DWORD __cdecl _getbuf(_DWORD);

//----- (004CA866) --------------------------------------------------------
int __cdecl sub_4CA866(int a1)
{
  int result; // eax

  result = a1;
  dword_5771F8 = a1;
  return result;
}
// 5771F8: using guessed type int dword_5771F8;

//----- (004CB808) --------------------------------------------------------
int sub_4CB808()
{
  return 0;
}

//----- (004CC7B5) --------------------------------------------------------
int sub_4CC7B5()
{
  return flsall(1);
}
// 4CC688: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (004CC9E6) --------------------------------------------------------
int __cdecl sub_4CC9E6(FILE *File)
{
  int v1; // eax
  int v2; // eax
  int v3; // ST10_4
  char *v4; // ST0C_4
  int v5; // eax
  int v6; // eax
  _DWORD *v7; // edi
  _BYTE *v8; // eax
  int v9; // eax
  char *v10; // ecx
  int result; // eax

  if ( !File )
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return -1;
  }
  v1 = File->_flag;
  if ( !(v1 & 0x83) || v1 & 0x40 )
    return -1;
  if ( v1 & 2 )
  {
    File->_flag = v1 | 0x20;
    return -1;
  }
  v2 = v1 | 1;
  File->_flag = v2;
  if ( v2 & 0x10C )
    File->_ptr = File->_base;
  else
    _getbuf(File);
  v3 = File->_bufsiz;
  v4 = File->_base;
  v5 = _fileno(File);
  v6 = _read(v5, v4, v3);
  File->_cnt = v6;
  if ( !v6 || v6 == -1 )
  {
    File->_flag |= v6 != 0 ? 32 : 16;
    File->_cnt = 0;
    return -1;
  }
  if ( !(File->_flag & 0x82) )
  {
    if ( _fileno(File) == -1 || _fileno(File) == -2 )
    {
      v8 = &unk_53C9D8;
    }
    else
    {
      v7 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
      v8 = (_BYTE *)(*v7 + ((_fileno(File) & 0x1F) << 6));
    }
    if ( (v8[4] & 0x82) == -126 )
      File->_flag |= 0x2000u;
  }
  if ( File->_bufsiz == 512 )
  {
    v9 = File->_flag;
    if ( v9 & 8 )
    {
      if ( !(v9 & 0x400) )
        File->_bufsiz = 4096;
    }
  }
  v10 = File->_ptr;
  --File->_cnt;
  result = (unsigned __int8)*v10;
  File->_ptr = v10 + 1;
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4DF22E: using guessed type _DWORD __cdecl _getbuf(_DWORD);

//----- (004CD364) --------------------------------------------------------
void __thiscall sub_4CD364(void *this)
{
  bool v1; // zf

  v1 = *((_DWORD *)this + 2) == 0;
  *(_DWORD *)this = &std::exception::`vftable';
  if ( !v1 )
    free(*((void **)this + 1));
}
// 522FAC: using guessed type void *std::exception::`vftable';

//----- (004CD3C3) --------------------------------------------------------
std::exception *__thiscall sub_4CD3C3(std::exception *this, char *a2)
{
  std::exception *v2; // esi

  v2 = this;
  std::exception::exception(this, (const char *const *)&a2);
  *(_DWORD *)v2 = &std::bad_typeid::`vftable';
  return v2;
}
// 522FD8: using guessed type void *std::bad_typeid::`vftable';

//----- (004CD3DC) --------------------------------------------------------
std::exception *__thiscall sub_4CD3DC(std::exception *this, struct std::exception *a2)
{
  std::exception *v2; // esi

  v2 = this;
  std::exception::exception(this, a2);
  *(_DWORD *)v2 = &std::bad_typeid::`vftable';
  return v2;
}
// 522FD8: using guessed type void *std::bad_typeid::`vftable';

//----- (004CD43A) --------------------------------------------------------
void *__thiscall sub_4CD43A(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}

//----- (004CD456) --------------------------------------------------------
void *__thiscall sub_4CD456(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &std::bad_cast::`vftable';
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 522FCC: using guessed type void *std::bad_cast::`vftable';

//----- (004CD478) --------------------------------------------------------
void *__thiscall sub_4CD478(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &std::bad_typeid::`vftable';
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 522FD8: using guessed type void *std::bad_typeid::`vftable';

//----- (004CD49A) --------------------------------------------------------
void *__thiscall sub_4CD49A(void *Memory, char a2)
{
  void *v2; // esi

  v2 = Memory;
  *(_DWORD *)Memory = &std::bad_typeid::`vftable';
  sub_4CD364(Memory);
  if ( a2 & 1 )
    j__free(v2);
  return v2;
}
// 522FD8: using guessed type void *std::bad_typeid::`vftable';

//----- (004CD4BC) --------------------------------------------------------
int __cdecl sub_4CD4BC(int a1)
{
  int result; // eax

  result = a1;
  dword_57723C = a1;
  return result;
}
// 57723C: using guessed type int dword_57723C;

//----- (004CD579) --------------------------------------------------------
int __cdecl sub_4CD579(int a1, HANDLE hHandle)
{
  int v2; // esi
  int result; // eax

  if ( a1 < 0 || a1 >= uNumber || (v2 = (a1 & 0x1F) << 6, *(_DWORD *)(v2 + dword_5776A0[a1 >> 5]) != -1) )
  {
    *_errno() = 9;
    *__doserrno() = 0;
    result = -1;
  }
  else
  {
    if ( dword_53BC98 == 1 )
    {
      if ( a1 )
      {
        if ( a1 == 1 )
        {
          SetStdHandle(0xFFFFFFF5, hHandle);
        }
        else if ( a1 == 2 )
        {
          SetStdHandle(0xFFFFFFF4, hHandle);
        }
      }
      else
      {
        SetStdHandle(0xFFFFFFF6, hHandle);
      }
    }
    *(_DWORD *)(v2 + dword_5776A0[a1 >> 5]) = hHandle;
    result = 0;
  }
  return result;
}
// 53BC98: using guessed type int dword_53BC98;

//----- (004CD5F6) --------------------------------------------------------
signed int __cdecl sub_4CD5F6(signed int a1)
{
  int v1; // esi
  int v2; // eax
  signed int result; // eax

  if ( a1 >= 0
    && a1 < uNumber
    && (v1 = (a1 & 0x1F) << 6, v2 = v1 + dword_5776A0[a1 >> 5], *(_BYTE *)(v2 + 4) & 1)
    && *(_DWORD *)v2 != -1 )
  {
    if ( dword_53BC98 == 1 )
    {
      if ( a1 )
      {
        if ( a1 == 1 )
        {
          SetStdHandle(0xFFFFFFF5, 0);
        }
        else if ( a1 == 2 )
        {
          SetStdHandle(0xFFFFFFF4, 0);
        }
      }
      else
      {
        SetStdHandle(0xFFFFFFF6, 0);
      }
    }
    *(_DWORD *)(v1 + dword_5776A0[a1 >> 5]) = -1;
    result = 0;
  }
  else
  {
    *_errno() = 9;
    *__doserrno() = 0;
    result = -1;
  }
  return result;
}
// 53BC98: using guessed type int dword_53BC98;

//----- (004CD677) --------------------------------------------------------
signed int __cdecl sub_4CD677(signed int a1)
{
  signed int result; // eax
  int v2; // eax

  if ( a1 == -2 )
  {
    *__doserrno() = 0;
    *_errno() = 9;
    result = -1;
  }
  else if ( a1 >= 0 && a1 < uNumber && (v2 = dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6), *(_BYTE *)(v2 + 4) & 1) )
  {
    result = *(_DWORD *)v2;
  }
  else
  {
    *__doserrno() = 0;
    *_errno() = 9;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004CD788) --------------------------------------------------------
void __cdecl sub_4CD788(int a1)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6) + 12));
}

//----- (004CDA31) --------------------------------------------------------
void __usercall sub_4CDA31(int a1@<ebp>, int a2@<edi>, int a3@<esi>)
{
  _BYTE *v3; // eax

  if ( *(_DWORD *)(a1 - 28) == a2 )
  {
    v3 = (_BYTE *)(dword_5776A0[a3 >> 5] + ((a3 & 0x1F) << 6) + 4);
    *v3 &= 0xFEu;
  }
  sub_4CD788(a3);
}

//----- (004CDA59) --------------------------------------------------------
DWORD __cdecl sub_4CDA59(int a1, LONG lDistanceToMove, DWORD dwMoveMethod)
{
  void *v3; // eax
  DWORD result; // eax
  DWORD v5; // edi
  DWORD v6; // eax
  _BYTE *v7; // eax

  v3 = (void *)sub_4CD677(a1);
  if ( v3 == (void *)-1 )
  {
    *_errno() = 9;
    result = -1;
  }
  else
  {
    v5 = SetFilePointer(v3, lDistanceToMove, 0, dwMoveMethod);
    if ( v5 == -1 )
      v6 = GetLastError();
    else
      v6 = 0;
    if ( v6 )
    {
      _dosmaperr(v6);
      result = -1;
    }
    else
    {
      v7 = (_BYTE *)(dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6) + 4);
      *v7 &= 0xFDu;
      result = v5;
    }
  }
  return result;
}
// 4CAA42: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);

//----- (004CDACB) --------------------------------------------------------
DWORD __cdecl sub_4CDACB(int a1, LONG lDistanceToMove, DWORD dwMoveMethod)
{
  int v4; // esi
  DWORD v5; // [esp+14h] [ebp-1Ch]

  if ( a1 == -2 )
  {
    *__doserrno() = 0;
    *_errno() = 9;
    return -1;
  }
  if ( a1 < 0 || a1 >= uNumber || (v4 = (a1 & 0x1F) << 6, !(*(_BYTE *)(dword_5776A0[a1 >> 5] + v4 + 4) & 1)) )
  {
    *__doserrno() = 0;
    *_errno() = 9;
    _invalid_parameter(0, 0, 0, 0, 0);
    return -1;
  }
  __lock_fhandle(a1);
  if ( *(_BYTE *)(dword_5776A0[a1 >> 5] + v4 + 4) & 1 )
  {
    v5 = sub_4CDA59(a1, lDistanceToMove, dwMoveMethod);
  }
  else
  {
    *_errno() = 9;
    *__doserrno() = 0;
    v5 = -1;
  }
  sub_4CD788(a1);
  return v5;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4CD6E8: using guessed type _DWORD __cdecl __lock_fhandle(_DWORD);

//----- (004CE0E7) --------------------------------------------------------
_DWORD *sub_4CE0E7()
{
  _DWORD *v0; // edi
  int i; // esi
  int v2; // eax
  int v3; // eax
  int v4; // esi

  v0 = 0;
  _lock(1);
  for ( i = 0; i < dword_578B20; ++i )
  {
    v2 = dword_5777C8 + 4 * i;
    if ( !*(_DWORD *)v2 )
    {
      v4 = 4 * i;
      *(_DWORD *)(v4 + dword_5777C8) = _malloc_crt(0x38u);
      if ( *(_DWORD *)(v4 + dword_5777C8) )
      {
        if ( __crtInitCritSecAndSpinCount(*(_DWORD *)(v4 + dword_5777C8) + 32, 4000) )
        {
          EnterCriticalSection((LPCRITICAL_SECTION)(*(_DWORD *)(v4 + dword_5777C8) + 32));
          v0 = *(_DWORD **)(v4 + dword_5777C8);
          v0[3] = 0;
        }
        else
        {
          free(*(void **)(v4 + dword_5777C8));
          *(_DWORD *)(v4 + dword_5777C8) = 0;
        }
      }
      break;
    }
    v3 = *(_DWORD *)(*(_DWORD *)v2 + 12);
    if ( !(v3 & 0x83) && (v3 & 0x8000u) == 0 )
    {
      if ( (unsigned int)(i - 3) <= 0x10 && !_mtinitlocknum(i + 16) )
        break;
      _lock_file2(i, *(_DWORD *)(dword_5777C8 + 4 * i));
      if ( !(*(_BYTE *)(*(_DWORD *)(dword_5777C8 + 4 * i) + 12) & 0x83) )
      {
        v0 = *(_DWORD **)(dword_5777C8 + 4 * i);
        break;
      }
      _unlock_file2(i, *(_DWORD *)(dword_5777C8 + 4 * i));
    }
  }
  if ( v0 )
  {
    v0[3] &= 0x8000u;
    v0[1] = 0;
    v0[2] = 0;
    *v0 = 0;
    v0[7] = 0;
    v0[4] = -1;
  }
  _unlock(1);
  return v0;
}
// 4C7870: using guessed type _DWORD __cdecl _lock_file2(_DWORD, _DWORD);
// 4C78D4: using guessed type _DWORD __cdecl _unlock_file2(_DWORD, _DWORD);
// 4CEB11: using guessed type _DWORD __cdecl _unlock(_DWORD);
// 4CEB3E: using guessed type _DWORD __cdecl _mtinitlocknum(_DWORD);
// 4CEC01: using guessed type _DWORD __cdecl _lock(_DWORD);
// 4D05A3: using guessed type _DWORD __cdecl __crtInitCritSecAndSpinCount(_DWORD, _DWORD);
// 5777C8: using guessed type int dword_5777C8;
// 578B20: using guessed type int dword_578B20;

//----- (004CE5C7) --------------------------------------------------------
unsigned int __cdecl sub_4CE5C7(char *a1, char **a2, int a3, struct localeinfo_struct *a4)
{
  return strtoxl(a4, a1, (const char **)a2, a3, 0);
}

//----- (004CE8E4) --------------------------------------------------------
unsigned __int64 __cdecl sub_4CE8E4(char *a1, char **a2, int a3, struct localeinfo_struct *a4)
{
  return strtoxq(a4, a1, (const char **)a2, a3, 0);
}

//----- (004CFC2B) --------------------------------------------------------
int (*sub_4CFC2B())(void)
{
  int (*result)(void); // eax
  int (**v1)(void); // esi

  result = (int (*)(void))&unk_532608;
  v1 = (int (**)(void))&unk_532608;
  if ( &unk_532608 < &unk_532708 )
  {
    do
    {
      result = *v1;
      if ( *v1 )
        result = (int (*)(void))result();
      ++v1;
    }
    while ( v1 < (int (**)(void))&unk_532708 );
  }
  return result;
}

//----- (004CFC4F) --------------------------------------------------------
void __cdecl sub_4CFC4F()
{
  void (**v0)(void); // esi

  v0 = (void (**)(void))&unk_532810;
  if ( &unk_532810 < &unk_532910 )
  {
    do
    {
      if ( *v0 )
        (*v0)();
      ++v0;
    }
    while ( v0 < (void (**)(void))&unk_532910 );
  }
}

//----- (004D006F) --------------------------------------------------------
int sub_4D006F()
{
  return _decode_pointer(dword_5773A8);
}
// 4C8CF7: using guessed type _DWORD __cdecl _decode_pointer(_DWORD);
// 5773A8: using guessed type int dword_5773A8;

//----- (004D047B) --------------------------------------------------------
int __cdecl sub_4D047B(int a1)
{
  int result; // eax

  result = a1;
  Target = a1;
  return result;
}

//----- (004D0589) --------------------------------------------------------
int __cdecl sub_4D0589(int a1)
{
  int result; // eax

  result = a1;
  dword_5773B8 = a1;
  return result;
}
// 5773B8: using guessed type int dword_5773B8;

//----- (004D06D8) --------------------------------------------------------
DWORD __cdecl sub_4D06D8(int a1, int a2, DWORD nNumberOfBytesToWrite)
{
  int *v4; // esi
  int v5; // edi
  int v6; // eax
  char v7; // bl
  int v8; // eax
  void *v9; // ST18_4
  DWORD v10; // eax
  const char *v11; // ebx
  char v12; // cl
  int *v13; // esi
  int v14; // eax
  int v15; // eax
  int v16; // eax
  signed int v17; // esi
  int v18; // eax
  int v19; // esi
  __int16 v20; // ax
  int v21; // ecx
  char v22; // dl
  int v23; // eax
  DWORD v24; // ecx
  char *v25; // eax
  char *v26; // edx
  char v27; // dl
  int v28; // ebx
  DWORD v29; // ecx
  char *v30; // eax
  __int16 *v31; // edx
  __int16 v32; // dx
  int v33; // ebx
  DWORD v34; // ecx
  WCHAR *v35; // eax
  WCHAR v36; // dx
  int v37; // esi
  int v38; // ebx
  DWORD Mode; // [esp+4h] [ebp-7Ch]
  BOOL v40; // [esp+8h] [ebp-78h]
  char v41; // [esp+Fh] [ebp-71h]
  int *v42; // [esp+10h] [ebp-70h]
  DWORD v43; // [esp+14h] [ebp-6Ch]
  int v44; // [esp+18h] [ebp-68h]
  LPCVOID lpBuffer; // [esp+1Ch] [ebp-64h]
  DWORD v46; // [esp+20h] [ebp-60h]
  DWORD NumberOfBytesWritten; // [esp+24h] [ebp-5Ch]
  WCHAR WideCharStr[2]; // [esp+28h] [ebp-58h]
  _WORD *v49; // [esp+2Ch] [ebp-54h]
  char Buffer; // [esp+30h] [ebp-50h]
  CHAR v51[688]; // [esp+184h] [ebp+104h]
  WCHAR v52; // [esp+434h] [ebp+3B4h]
  CHAR MultiByteStr; // [esp+588h] [ebp+508h]
  char v54; // [esp+589h] [ebp+509h]

  lpBuffer = (LPCVOID)a2;
  v46 = 0;
  v44 = 0;
  if ( !nNumberOfBytesToWrite )
    return 0;
  if ( !a2 )
  {
    *__doserrno() = 0;
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return -1;
  }
  v4 = (int *)(4 * (a1 >> 5) + 5732000);
  v5 = (a1 & 0x1F) << 6;
  v6 = v5 + dword_5776A0[a1 >> 5];
  v7 = (char)(2 * *(_BYTE *)(v6 + 36)) >> 1;
  v42 = (int *)(4 * (a1 >> 5) + 5732000);
  v41 = v7;
  if ( (v7 == 2 || v7 == 1) && !(~(_BYTE)nNumberOfBytesToWrite & 1) )
  {
    *__doserrno() = 0;
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return -1;
  }
  if ( *(_BYTE *)(v6 + 4) & 0x20 )
    sub_4D8ED2(a1, 0, 0, 2u);
  if ( sub_4DF272(a1) )
  {
    if ( *(_BYTE *)(v5 + dword_5776A0[a1 >> 5] + 4) < 0 )
    {
      v8 = _getptd();
      v9 = *(void **)(v5 + dword_5776A0[a1 >> 5]);
      v40 = *(_DWORD *)(*(_DWORD *)(v8 + 108) + 20) == 0;
      if ( GetConsoleMode(v9, &Mode) )
      {
        if ( !v40 || v7 )
        {
          v10 = GetConsoleCP();
          v11 = (const char *)lpBuffer;
          Mode = v10;
          NumberOfBytesWritten = 0;
          if ( nNumberOfBytesToWrite )
          {
            v49 = 0;
            while ( 1 )
            {
              if ( v41 )
              {
                if ( v41 == 1 || v41 == 2 )
                {
                  v19 = *(unsigned __int16 *)v11;
                  v11 += 2;
                  ++v49;
                  *(_DWORD *)WideCharStr = v19;
                  v40 = (_WORD)v19 == 10;
                }
                if ( v41 == 1 || v41 == 2 )
                {
                  v20 = _putwch_nolock(WideCharStr[0]);
                  if ( v20 != WideCharStr[0] )
                    goto LABEL_89;
                  ++v46;
                  if ( v40 )
                  {
                    *(_DWORD *)WideCharStr = 13;
                    if ( (unsigned __int16)_putwch_nolock(13) != 13 )
                      goto LABEL_89;
                    ++v46;
                    ++v44;
                  }
                }
                goto LABEL_43;
              }
              v12 = *v11;
              v13 = v42;
              v40 = *v11 == 10;
              v14 = v5 + *v42;
              if ( *(_DWORD *)(v14 + 56) )
              {
                MultiByteStr = *(_BYTE *)(v14 + 52);
                v54 = v12;
                *(_DWORD *)(v14 + 56) = 0;
                v15 = mbtowc(WideCharStr, &MultiByteStr, 2u);
              }
              else
              {
                if ( isleadbyte(v12) )
                {
                  if ( nNumberOfBytesToWrite + (_BYTE *)lpBuffer - v11 <= 1 )
                  {
                    v21 = *v13;
                    v22 = *v11;
                    ++v46;
                    *(_BYTE *)(v5 + v21 + 52) = v22;
                    *(_DWORD *)(v5 + *v13 + 56) = 1;
                    goto LABEL_90;
                  }
                  if ( mbtowc(WideCharStr, v11, 2u) == -1 )
                    goto LABEL_90;
                  ++v11;
                  v49 = (_WORD *)((char *)v49 + 1);
                  goto LABEL_27;
                }
                v15 = mbtowc(WideCharStr, v11, 1u);
              }
              if ( v15 == -1 )
                goto LABEL_90;
LABEL_27:
              ++v11;
              v49 = (_WORD *)((char *)v49 + 1);
              v16 = WideCharToMultiByte(Mode, 0, WideCharStr, 1, &MultiByteStr, 5, 0, 0);
              v17 = v16;
              if ( !v16 )
                goto LABEL_90;
              if ( !WriteFile(*(HANDLE *)(v5 + *v42), &MultiByteStr, v16, &NumberOfBytesWritten, 0) )
                goto LABEL_89;
              v46 = (DWORD)v49 + v44;
              if ( (signed int)NumberOfBytesWritten < v17 )
                goto LABEL_90;
              if ( v40 )
              {
                v18 = *v42;
                MultiByteStr = 13;
                if ( !WriteFile(*(HANDLE *)(v5 + v18), &MultiByteStr, 1u, &NumberOfBytesWritten, 0) )
                  goto LABEL_89;
                if ( (signed int)NumberOfBytesWritten < 1 )
                  goto LABEL_90;
                ++v44;
                ++v46;
              }
LABEL_43:
              if ( (unsigned int)v49 >= nNumberOfBytesToWrite )
                goto LABEL_90;
            }
          }
          goto LABEL_91;
        }
      }
    }
  }
  v23 = v5 + dword_5776A0[a1 >> 5];
  if ( *(_BYTE *)(v23 + 4) >= 0 )
  {
    if ( WriteFile(*(HANDLE *)v23, lpBuffer, nNumberOfBytesToWrite, &v43, 0) )
    {
      *(_DWORD *)WideCharStr = 0;
      v46 = v43;
      goto LABEL_90;
    }
  }
  else
  {
    *(_DWORD *)WideCharStr = 0;
    if ( v7 )
    {
      v49 = lpBuffer;
      if ( v7 == 2 )
      {
        if ( nNumberOfBytesToWrite <= 0 )
          goto LABEL_96;
        while ( 1 )
        {
          NumberOfBytesWritten = 0;
          v29 = (char *)v49 - (_BYTE *)lpBuffer;
          v30 = &Buffer;
          do
          {
            if ( v29 >= nNumberOfBytesToWrite )
              break;
            v31 = v49;
            ++v49;
            v32 = *v31;
            v29 += 2;
            if ( v32 == 10 )
            {
              v44 += 2;
              *(_WORD *)v30 = 13;
              v30 += 2;
              NumberOfBytesWritten += 2;
            }
            NumberOfBytesWritten += 2;
            *(_WORD *)v30 = v32;
            v30 += 2;
          }
          while ( NumberOfBytesWritten < 0x3FF );
          v33 = v30 - &Buffer;
          if ( !WriteFile(*(HANDLE *)(v5 + *v4), &Buffer, v30 - &Buffer, &v43, 0) )
            break;
          v46 += v43;
          if ( (signed int)v43 < v33 || (char *)v49 - (_BYTE *)lpBuffer >= nNumberOfBytesToWrite )
            goto LABEL_90;
          v4 = v42;
        }
      }
      else
      {
        if ( nNumberOfBytesToWrite <= 0 )
          goto LABEL_96;
        while ( 1 )
        {
          NumberOfBytesWritten = 0;
          v34 = (char *)v49 - (_BYTE *)lpBuffer;
          v35 = &v52;
          do
          {
            if ( v34 >= nNumberOfBytesToWrite )
              break;
            v36 = *v49;
            ++v49;
            v34 += 2;
            if ( v36 == 10 )
            {
              *v35 = 13;
              ++v35;
              NumberOfBytesWritten += 2;
            }
            NumberOfBytesWritten += 2;
            *v35 = v36;
            ++v35;
          }
          while ( NumberOfBytesWritten < 0x152 );
          v37 = 0;
          v38 = WideCharToMultiByte(0xFDE9u, 0, &v52, v35 - &v52, v51, 683, 0, 0);
          if ( !v38 )
            break;
          while ( WriteFile(*(HANDLE *)(v5 + *v42), &v51[v37], v38 - v37, &v43, 0) )
          {
            v37 += v43;
            if ( v38 <= v37 )
              goto LABEL_84;
          }
          *(_DWORD *)WideCharStr = GetLastError();
LABEL_84:
          if ( v38 <= v37 )
          {
            v46 = (char *)v49 - (_BYTE *)lpBuffer;
            if ( (char *)v49 - (_BYTE *)lpBuffer < nNumberOfBytesToWrite )
              continue;
          }
          goto LABEL_90;
        }
      }
    }
    else
    {
      NumberOfBytesWritten = (DWORD)lpBuffer;
      if ( nNumberOfBytesToWrite <= 0 )
        goto LABEL_96;
      while ( 1 )
      {
        v49 = 0;
        v24 = NumberOfBytesWritten - (_DWORD)lpBuffer;
        v25 = &Buffer;
        do
        {
          if ( v24 >= nNumberOfBytesToWrite )
            break;
          v26 = (char *)NumberOfBytesWritten++;
          v27 = *v26;
          ++v24;
          if ( v27 == 10 )
          {
            ++v44;
            *v25++ = 13;
            v49 = (_WORD *)((char *)v49 + 1);
          }
          *v25++ = v27;
          v49 = (_WORD *)((char *)v49 + 1);
        }
        while ( (unsigned int)v49 < 0x400 );
        v28 = v25 - &Buffer;
        if ( !WriteFile(*(HANDLE *)(v5 + *v4), &Buffer, v25 - &Buffer, &v43, 0) )
          break;
        v46 += v43;
        if ( (signed int)v43 < v28 || NumberOfBytesWritten - (unsigned int)lpBuffer >= nNumberOfBytesToWrite )
          goto LABEL_90;
        v4 = v42;
      }
    }
  }
LABEL_89:
  *(_DWORD *)WideCharStr = GetLastError();
LABEL_90:
  if ( !v46 )
  {
LABEL_91:
    if ( *(_DWORD *)WideCharStr )
    {
      if ( *(_DWORD *)WideCharStr == 5 )
      {
        *_errno() = 9;
        *__doserrno() = 5;
      }
      else
      {
        _dosmaperr(*(_DWORD *)WideCharStr);
      }
      return -1;
    }
    v4 = v42;
LABEL_96:
    if ( *(_BYTE *)(v5 + *v4 + 4) & 0x40 && *(_BYTE *)lpBuffer == 26 )
      return 0;
    *_errno() = 28;
    *__doserrno() = 0;
    return -1;
  }
  return v46 - v44;
}
// 4C8F47: using guessed type int _getptd(void);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4CAA42: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);
// 4D06D8: using guessed type CHAR var_410[688];

//----- (004D0CFA) --------------------------------------------------------
DWORD __cdecl sub_4D0CFA(int a1, int a2, DWORD nNumberOfBytesToWrite)
{
  int v4; // esi
  DWORD v5; // [esp+14h] [ebp-1Ch]

  if ( a1 == -2 )
  {
    *__doserrno() = 0;
    *_errno() = 9;
    return -1;
  }
  if ( a1 < 0 || a1 >= uNumber || (v4 = (a1 & 0x1F) << 6, !(*(_BYTE *)(dword_5776A0[a1 >> 5] + v4 + 4) & 1)) )
  {
    *__doserrno() = 0;
    *_errno() = 9;
    _invalid_parameter(0, 0, 0, 0, 0);
    return -1;
  }
  __lock_fhandle(a1);
  if ( *(_BYTE *)(dword_5776A0[a1 >> 5] + v4 + 4) & 1 )
  {
    v5 = sub_4D06D8(a1, a2, nNumberOfBytesToWrite);
  }
  else
  {
    *_errno() = 9;
    *__doserrno() = 0;
    v5 = -1;
  }
  sub_4CD788(a1);
  return v5;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4CD6E8: using guessed type _DWORD __cdecl __lock_fhandle(_DWORD);

//----- (004D1AD1) --------------------------------------------------------
int __cdecl sub_4D1AD1(int a1, FILE *File, int a3, int a4, int a5)
{
  int result; // eax
  _DWORD *v6; // edi
  _BYTE *v7; // eax
  _DWORD *v8; // edi
  _BYTE *v9; // eax
  int v10; // edi
  int v11; // [esp+10h] [ebp-1Ch]

  v11 = 0;
  if ( File == 0 || a3 == 0 )
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = -1;
  }
  else
  {
    _lock_file(File);
    if ( !(File->_flag & 0x40) )
    {
      if ( _fileno(File) == -1 || _fileno(File) == -2 )
      {
        v7 = &unk_53C9D8;
      }
      else
      {
        v6 = (_DWORD *)(4 * (_fileno(File) >> 5) + 5732000);
        v7 = (_BYTE *)(*v6 + ((_fileno(File) & 0x1F) << 6));
      }
      if ( v7[36] & 0x7F
        || (_fileno(File) == -1 || _fileno(File) == -2 ? (v9 = &unk_53C9D8) : (v8 = (_DWORD *)(4 * (_fileno(File) >> 5)
                                                                                             + 5732000),
                                                                               v9 = (_BYTE *)(*v8
                                                                                            + ((_fileno(File) & 0x1F) << 6))),
            v9[36] < 0) )
      {
        *_errno() = 22;
        _invalid_parameter(0, 0, 0, 0, 0);
        v11 = -1;
      }
    }
    if ( !v11 )
    {
      v10 = _stbuf(File);
      v11 = ((int (__cdecl *)(FILE *, int, int, int))a1)(File, a3, a4, a5);
      _ftbuf(v10, File);
    }
    _unlock_file();
    result = v11;
  }
  return result;
}
// 4C7834: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D1C1F) --------------------------------------------------------
int __cdecl sub_4D1C1F(FILE *File, int a2, int a3, int a4)
{
  return sub_4D1AD1((int)_output_l, File, a2, a3, a4);
}

//----- (004D1C3D) --------------------------------------------------------
int __cdecl sub_4D1C3D(FILE *File, int a2, int a3, int a4)
{
  return sub_4D1AD1((int)_output_s_l, File, a2, a3, a4);
}

//----- (004D1C5B) --------------------------------------------------------
int __cdecl sub_4D1C5B(FILE *File, int a2, int a3, int a4)
{
  return sub_4D1AD1((int)_output_p_l, File, a2, a3, a4);
}

//----- (004D5180) --------------------------------------------------------
int sub_4D5180()
{
  return _unlock(7);
}
// 4CEB11: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (004D5ACB) --------------------------------------------------------
BOOL __usercall sub_4D5ACB@<eax>(_DWORD *a1@<edi>)
{
  signed int v2; // edx
  signed int v3; // ecx
  int v4; // edx
  int v5; // eax
  BOOL v6; // ecx
  signed int v7; // [esp+8h] [ebp-8h]
  int v8; // [esp+Ch] [ebp-4h]

  v8 = 0;
  if ( sub_4C5DCA(&v8) )
    _invoke_watson(0, 0, 0, 0, 0);
  if ( !v8 )
    return 0;
  v2 = a1[5];
  if ( v2 != dword_53CC80 || v2 != dword_53CC8C )
  {
    if ( dword_57747C )
    {
      if ( TimeZoneInformation.DaylightDate.wYear )
        cvtdate(
          1,
          0,
          v2,
          0,
          0,
          TimeZoneInformation.DaylightDate.wDay,
          TimeZoneInformation.DaylightDate.wMinute,
          TimeZoneInformation.DaylightDate.wSecond,
          TimeZoneInformation.DaylightDate.wMilliseconds);
      else
        cvtdate(
          1,
          1,
          v2,
          TimeZoneInformation.DaylightDate.wDay,
          TimeZoneInformation.DaylightDate.wDayOfWeek,
          0,
          TimeZoneInformation.DaylightDate.wMinute,
          TimeZoneInformation.DaylightDate.wSecond,
          TimeZoneInformation.DaylightDate.wMilliseconds);
      if ( TimeZoneInformation.StandardDate.wYear )
        cvtdate(
          0,
          0,
          a1[5],
          0,
          0,
          TimeZoneInformation.StandardDate.wDay,
          TimeZoneInformation.StandardDate.wMinute,
          TimeZoneInformation.StandardDate.wSecond,
          TimeZoneInformation.StandardDate.wMilliseconds);
      else
        cvtdate(
          0,
          1,
          a1[5],
          TimeZoneInformation.StandardDate.wDay,
          TimeZoneInformation.StandardDate.wDayOfWeek,
          0,
          TimeZoneInformation.StandardDate.wMinute,
          TimeZoneInformation.StandardDate.wSecond,
          TimeZoneInformation.StandardDate.wMilliseconds);
    }
    else
    {
      v3 = 2;
      v7 = 1;
      if ( v2 < 107 )
      {
        v3 = 1;
        v7 = 5;
      }
      cvtdate(1, 1, v2, v3, 0, 0, 0, 0, 0);
      cvtdate(0, 1, a1[5], v7, 0, 0, 0, 0, 0);
    }
  }
  v4 = a1[7];
  if ( dword_53CC84 >= dword_53CC90 )
  {
    if ( v4 < dword_53CC90 || v4 > dword_53CC84 )
      return 1;
    if ( v4 <= dword_53CC90 || v4 >= dword_53CC84 )
      goto LABEL_30;
    return 0;
  }
  if ( v4 < dword_53CC84 || v4 > dword_53CC90 )
    return 0;
  if ( v4 > dword_53CC84 && v4 < dword_53CC90 )
    return 1;
LABEL_30:
  v5 = 1000 * (*a1 + 60 * (a1[1] + 60 * a1[2]));
  if ( v4 != dword_53CC84 )
    return v5 < dword_53CC94;
  v6 = v5 < dword_53CC88;
  LOBYTE(v6) = v5 >= dword_53CC88;
  return v6;
}
// 4CA870: using guessed type int __cdecl _invoke_watson(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D58D6: using guessed type _DWORD __cdecl cvtdate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 53CC80: using guessed type int dword_53CC80;
// 53CC84: using guessed type int dword_53CC84;
// 53CC88: using guessed type int dword_53CC88;
// 53CC8C: using guessed type int dword_53CC8C;
// 53CC90: using guessed type int dword_53CC90;
// 53CC94: using guessed type int dword_53CC94;
// 57747C: using guessed type int dword_57747C;

//----- (004D7CA9) --------------------------------------------------------
int __cdecl sub_4D7CA9(int a1, int a2, int a3)
{
  return vprintf_helper(_output_l, a1, a2, a3);
}
// 4D7C19: using guessed type _DWORD __cdecl vprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D7CC3) --------------------------------------------------------
int __cdecl sub_4D7CC3(int a1, int a2, int a3)
{
  return vprintf_helper(_output_s_l, a1, a2, a3);
}
// 4D7C19: using guessed type _DWORD __cdecl vprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D7CDD) --------------------------------------------------------
int __cdecl sub_4D7CDD(int a1, int a2, int a3)
{
  return vprintf_helper(_output_p_l, a1, a2, a3);
}
// 4D7C19: using guessed type _DWORD __cdecl vprintf_helper(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D7D3F) --------------------------------------------------------
char *__cdecl sub_4D7D3F(FILE *File)
{
  FILE *v1; // edi
  int v3; // eax
  signed int v4; // eax
  int v5; // edx
  char *v6; // eax
  char *v7; // ecx
  char *v8; // edx
  int v9; // edx
  int v10; // esi
  char *v11; // eax
  unsigned int v12; // ecx
  bool v13; // zf
  signed int v14; // eax
  int v15; // ecx
  char *v16; // [esp+8h] [ebp-Ch]
  LONG lDistanceToMove; // [esp+Ch] [ebp-8h]
  int v18; // [esp+10h] [ebp-4h]
  unsigned int Filea; // [esp+1Ch] [ebp+8h]

  v1 = File;
  if ( !File )
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return (char *)-1;
  }
  v3 = _fileno(File);
  v18 = v3;
  if ( File->_cnt < 0 )
    File->_cnt = 0;
  v4 = sub_4CDACB(v3, 0, 1u);
  lDistanceToMove = v4;
  if ( v4 < 0 )
    return (char *)-1;
  v5 = File->_flag;
  if ( !(v5 & 0x108) )
    return (char *)(v4 - File->_cnt);
  v6 = File->_ptr;
  v7 = File->_base;
  v16 = (char *)(File->_ptr - v7);
  if ( v5 & 3 )
  {
    if ( *(_BYTE *)(dword_5776A0[v18 >> 5] + ((v18 & 0x1F) << 6) + 4) < 0 )
    {
      v8 = File->_base;
      if ( v7 < v6 )
      {
        do
        {
          if ( *v8 == 10 )
            ++v16;
          ++v8;
        }
        while ( v8 < v6 );
      }
    }
  }
  else if ( (v5 & 0x80u) == 0 )
  {
    *_errno() = 22;
    return (char *)-1;
  }
  if ( !lDistanceToMove )
    return v16;
  if ( !(File->_flag & 1) )
    return &v16[lDistanceToMove];
  v9 = File->_cnt;
  if ( v9 )
  {
    Filea = v9 + v6 - v7;
    v10 = (v18 & 0x1F) << 6;
    if ( *(_BYTE *)(dword_5776A0[v18 >> 5] + v10 + 4) >= 0 )
    {
LABEL_39:
      lDistanceToMove -= Filea;
      return &v16[lDistanceToMove];
    }
    if ( sub_4CDACB(v18, 0, 2u) == lDistanceToMove )
    {
      v11 = v1->_base;
      v12 = (unsigned int)&v11[Filea];
      while ( (unsigned int)v11 < v12 )
      {
        if ( *v11 == 10 )
          ++Filea;
        ++v11;
      }
      v13 = (v1->_flag & 0x2000) == 0;
LABEL_37:
      if ( !v13 )
        ++Filea;
      goto LABEL_39;
    }
    if ( (sub_4CDACB(v18, lDistanceToMove, 0) & 0x80000000) == 0 )
    {
      v14 = 512;
      if ( Filea > 0x200 || (v15 = v1->_flag, !(v15 & 8)) || v15 & 0x400 )
        v14 = v1->_bufsiz;
      Filea = v14;
      v13 = (*(_BYTE *)(dword_5776A0[v18 >> 5] + v10 + 4) & 4) == 0;
      goto LABEL_37;
    }
    return (char *)-1;
  }
  v16 = 0;
  return &v16[lDistanceToMove];
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D8ED2) --------------------------------------------------------
DWORD __cdecl sub_4D8ED2(int a1, int a2, int a3, DWORD dwMoveMethod)
{
  void *v4; // eax
  DWORD v6; // eax
  _BYTE *v7; // eax
  DWORD lDistanceToMove; // [esp+8h] [ebp-8h]
  LONG DistanceToMoveHigh; // [esp+Ch] [ebp-4h]

  DistanceToMoveHigh = a3;
  v4 = (void *)sub_4CD677(a1);
  if ( v4 == (void *)-1 )
  {
    *_errno() = 9;
    return -1;
  }
  lDistanceToMove = SetFilePointer(v4, a2, &DistanceToMoveHigh, dwMoveMethod);
  if ( lDistanceToMove == -1 )
  {
    v6 = GetLastError();
    if ( v6 )
    {
      _dosmaperr(v6);
      return -1;
    }
  }
  v7 = (_BYTE *)(dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6) + 4);
  *v7 &= 0xFDu;
  return lDistanceToMove;
}
// 4CAA42: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);

//----- (004D9327) --------------------------------------------------------
signed int __cdecl sub_4D9327(int a1, int a2)
{
  _DWORD *v2; // edx
  int v3; // esi
  int v4; // ecx
  int v5; // eax
  _BYTE *v6; // ecx
  char v7; // dl
  signed int result; // eax
  int v9; // [esp+14h] [ebp+8h]

  v2 = (_DWORD *)(4 * (a1 >> 5) + 5732000);
  v3 = (a1 & 0x1F) << 6;
  v4 = dword_5776A0[a1 >> 5] + v3;
  v9 = *(_BYTE *)(v4 + 4) & 0x80;
  v5 = (char)(2 * *(_BYTE *)(v4 + 36)) >> 1;
  if ( a2 == 0x4000 )
  {
    *(_BYTE *)(v4 + 4) |= 0x80u;
    *(_BYTE *)(*v2 + v3 + 36) &= 0x80u;
  }
  else if ( a2 == 0x8000 )
  {
    *(_BYTE *)(v4 + 4) &= 0x7Fu;
  }
  else
  {
    if ( a2 == 0x10000 || a2 == 0x20000 )
    {
      *(_BYTE *)(v4 + 4) |= 0x80u;
      v6 = (_BYTE *)(*v2 + v3 + 36);
      v7 = *v6 & 0x82 | 2;
    }
    else
    {
      if ( a2 != 0x40000 )
        goto LABEL_11;
      *(_BYTE *)(v4 + 4) |= 0x80u;
      v6 = (_BYTE *)(*v2 + v3 + 36);
      v7 = *v6 & 0x81 | 1;
    }
    *v6 = v7;
  }
LABEL_11:
  if ( v9 )
    result = v5 != 0 ? 0x10000 : 0x4000;
  else
    result = 0x8000;
  return result;
}

//----- (004D9429) --------------------------------------------------------
signed int __cdecl sub_4D9429(_DWORD *a1)
{
  signed int result; // eax

  if ( a1 )
  {
    *a1 = dword_577600;
    result = 0;
  }
  else
  {
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 22;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D985B) --------------------------------------------------------
void sub_4D985B()
{
  dword_57760C = 0;
}
// 57760C: using guessed type int dword_57760C;

//----- (004DA120) --------------------------------------------------------
signed int sub_4DA120()
{
  return 1;
}

//----- (004DA124) --------------------------------------------------------
char __thiscall sub_4DA124(_BYTE *this)
{
  return this[8];
}

//----- (004DA143) --------------------------------------------------------
int __thiscall sub_4DA143(_DWORD *this)
{
  return this[3];
}

//----- (004DA19B) --------------------------------------------------------
int __thiscall sub_4DA19B(_DWORD *this)
{
  return this[3];
}

//----- (004DEC09) --------------------------------------------------------
int __cdecl sub_4DEC09(int a1, int a2, int a3)
{
  HMODULE v3; // eax
  HMODULE v4; // edi
  FARPROC v5; // eax
  FARPROC v6; // eax
  FARPROC v7; // eax
  FARPROC v8; // eax
  FARPROC v9; // eax
  int (*v10)(void); // esi
  int (__stdcall *v11)(int, signed int, char *, signed int, char *); // eax
  int (__stdcall *v12)(int, signed int, char *, signed int, char *); // edi
  int v13; // eax
  int (*v14)(void); // eax
  int (__stdcall *v15)(int); // eax
  int (__stdcall *v16)(int, int, int, int); // eax
  char v18; // [esp+10h] [ebp-20h]
  char v19; // [esp+18h] [ebp-18h]
  char v20; // [esp+1Ch] [ebp-14h]
  unsigned int v21; // [esp+20h] [ebp-10h]
  int v22; // [esp+24h] [ebp-Ch]
  int v23; // [esp+28h] [ebp-8h]
  int v24; // [esp+2Ch] [ebp-4h]

  v23 = _encoded_null();
  v24 = 0;
  v22 = 0;
  v21 = 0;
  if ( !dword_5775D8 )
  {
    v3 = LoadLibraryA("USER32.DLL");
    v4 = v3;
    if ( !v3 )
      return 0;
    v5 = GetProcAddress(v3, "MessageBoxA");
    if ( !v5 )
      return 0;
    dword_5775D8 = _encode_pointer(v5);
    v6 = GetProcAddress(v4, "GetActiveWindow");
    dword_5775DC = _encode_pointer(v6);
    v7 = GetProcAddress(v4, "GetLastActivePopup");
    dword_5775E0 = _encode_pointer(v7);
    if ( sub_4C2474(&v22) )
      _invoke_watson(0, 0, 0, 0, 0);
    if ( v22 == 2 )
    {
      v8 = GetProcAddress(v4, "GetUserObjectInformationA");
      dword_5775E8 = _encode_pointer(v8);
      if ( dword_5775E8 )
      {
        v9 = GetProcAddress(v4, "GetProcessWindowStation");
        dword_5775E4 = _encode_pointer(v9);
      }
    }
  }
  if ( dword_5775E4 == v23
    || dword_5775E8 == v23
    || (v10 = (int (*)(void))_decode_pointer(dword_5775E4),
        v11 = (int (__stdcall *)(int, signed int, char *, signed int, char *))_decode_pointer(dword_5775E8),
        v12 = v11,
        !v10)
    || !v11
    || (v13 = v10()) != 0 && v12(v13, 1, &v18, 12, &v20) && v19 & 1 )
  {
    if ( dword_5775DC != v23 )
    {
      v14 = (int (*)(void))_decode_pointer(dword_5775DC);
      if ( v14 )
      {
        v24 = v14();
        if ( v24 )
        {
          if ( dword_5775E0 != v23 )
          {
            v15 = (int (__stdcall *)(int))_decode_pointer(dword_5775E0);
            if ( v15 )
              v24 = v15(v24);
          }
        }
      }
    }
  }
  else
  {
    if ( sub_4C2523(&v21) )
      _invoke_watson(0, 0, 0, 0, 0);
    if ( v21 < 4 )
      a3 |= 0x40000u;
    else
      a3 |= 0x200000u;
  }
  v16 = (int (__stdcall *)(int, int, int, int))_decode_pointer(dword_5775D8);
  if ( v16 )
    return v16(v24, a1, a2, a3);
  return 0;
}
// 4C8C80: using guessed type _DWORD __cdecl _encode_pointer(_DWORD);
// 4C8CEE: using guessed type int _encoded_null(void);
// 4C8CF7: using guessed type _DWORD __cdecl _decode_pointer(_DWORD);
// 4CA870: using guessed type int __cdecl _invoke_watson(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 5775D8: using guessed type int dword_5775D8;
// 5775DC: using guessed type int dword_5775DC;
// 5775E0: using guessed type int dword_5775E0;
// 5775E4: using guessed type int dword_5775E4;
// 5775E8: using guessed type int dword_5775E8;

//----- (004DF272) --------------------------------------------------------
int __cdecl sub_4DF272(signed int a1)
{
  int result; // eax

  if ( a1 == -2 )
  {
    *_errno() = 9;
    result = 0;
  }
  else if ( a1 >= 0 && a1 < uNumber )
  {
    result = *(_BYTE *)(dword_5776A0[a1 >> 5] + ((a1 & 0x1F) << 6) + 4) & 0x40;
  }
  else
  {
    *_errno() = 9;
    _invalid_parameter(0, 0, 0, 0, 0);
    result = 0;
  }
  return result;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004E0866) --------------------------------------------------------
int sub_4E0866()
{
  return 0;
}

//----- (004E5371) --------------------------------------------------------
int sub_4E5371()
{
  return _unlock(3);
}
// 4CEB11: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (004E54A4) --------------------------------------------------------
int __cdecl sub_4E54A4(int a1, int a2, struct localeinfo_struct *a3)
{
  signed int v3; // eax
  char v6; // [esp+Ch] [ebp-28h]
  char v7; // [esp+10h] [ebp-24h]
  int v8; // [esp+18h] [ebp-1Ch]
  char v9; // [esp+1Ch] [ebp-18h]
  int v10; // [esp+20h] [ebp-14h]
  char v11; // [esp+24h] [ebp-10h]

  _LocaleUpdate::_LocaleUpdate((_LocaleUpdate *)&v7, a3);
  v10 = __strgtold12_l(&v11, &v6, a2, 0, 0, 0, 0, &v7);
  v3 = sub_4E6FC0((unsigned __int16 *)&v11, (int *)a1);
  if ( v10 & 3 )
  {
    if ( v10 & 1 )
      goto LABEL_8;
    if ( v10 & 2 )
      goto LABEL_3;
  }
  else
  {
    if ( v3 == 1 )
    {
LABEL_3:
      if ( v9 )
        *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
      return 3;
    }
    if ( v3 == 2 )
    {
LABEL_8:
      if ( v9 )
        *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
      return 4;
    }
  }
  if ( v9 )
    *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
  return 0;
}
// 4D87B9: using guessed type _DWORD __cdecl __strgtold12_l(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004E5617) --------------------------------------------------------
int __cdecl sub_4E5617(int a1, int a2, struct localeinfo_struct *a3)
{
  signed int v3; // eax
  char v6; // [esp+Ch] [ebp-28h]
  char v7; // [esp+10h] [ebp-24h]
  int v8; // [esp+18h] [ebp-1Ch]
  char v9; // [esp+1Ch] [ebp-18h]
  int v10; // [esp+20h] [ebp-14h]
  char v11; // [esp+24h] [ebp-10h]

  _LocaleUpdate::_LocaleUpdate((_LocaleUpdate *)&v7, a3);
  v10 = __strgtold12_l(&v11, &v6, a2, 0, 0, 0, 0, &v7);
  v3 = sub_4E7502((unsigned __int16 *)&v11, (int *)a1);
  if ( v10 & 3 )
  {
    if ( v10 & 1 )
      goto LABEL_8;
    if ( v10 & 2 )
      goto LABEL_3;
  }
  else
  {
    if ( v3 == 1 )
    {
LABEL_3:
      if ( v9 )
        *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
      return 3;
    }
    if ( v3 == 2 )
    {
LABEL_8:
      if ( v9 )
        *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
      return 4;
    }
  }
  if ( v9 )
    *(_DWORD *)(v8 + 112) &= 0xFFFFFFFD;
  return 0;
}
// 4D87B9: using guessed type _DWORD __cdecl __strgtold12_l(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004E60A6) --------------------------------------------------------
HANDLE __cdecl sub_4E60A6(int a1, LPCSTR lpApplicationName, int a3, LPVOID lpEnvironment)
{
  HANDLE v4; // ebx
  _BYTE *v5; // eax
  signed int v7; // esi
  signed int v8; // eax
  BYTE *v9; // eax
  LPBYTE v10; // eax
  LPBYTE v11; // ecx
  BYTE *v12; // edi
  int v13; // eax
  BYTE v14; // dl
  _BYTE *v15; // ecx
  signed int v16; // edx
  BYTE *i; // eax
  signed int v18; // edi
  BOOL v19; // esi
  DWORD v20; // edi
  struct _STARTUPINFOA StartupInfo; // [esp+8h] [ebp-68h]
  struct _PROCESS_INFORMATION ProcessInformation; // [esp+4Ch] [ebp-24h]
  DWORD ExitCode; // [esp+5Ch] [ebp-14h]
  LPSTR lpCommandLine; // [esp+60h] [ebp-10h]
  DWORD dwCreationFlags; // [esp+64h] [ebp-Ch]
  int v26; // [esp+68h] [ebp-8h]
  char v27; // [esp+6Fh] [ebp-1h]

  v4 = 0;
  dwCreationFlags = 0;
  v27 = 0;
  if ( !a1 || a1 == 1 )
    goto LABEL_7;
  if ( a1 <= 1 )
    goto LABEL_8;
  if ( a1 > 3 )
  {
    if ( a1 == 4 )
    {
      v27 = 1;
      goto LABEL_7;
    }
LABEL_8:
    *__doserrno() = 0;
    *_errno() = 22;
    _invalid_parameter(0, 0, 0, 0, 0);
    return (HANDLE)-1;
  }
LABEL_7:
  v5 = (_BYTE *)a3;
  lpCommandLine = (LPSTR)a3;
  while ( *v5 )
  {
    do
      ++v5;
    while ( *v5 );
    if ( v5[1] )
      *v5++ = 32;
  }
  memset(&StartupInfo, 0, 0x44u);
  StartupInfo.cb = 68;
  v7 = uNumber;
  if ( uNumber )
  {
    v8 = uNumber - 1;
    do
    {
      if ( *(_BYTE *)(dword_5776A0[v8 >> 5] + ((v8 & 0x1F) << 6) + 4) )
        break;
      --v7;
      --v8;
    }
    while ( v7 );
    if ( v7 < 0 )
      goto LABEL_48;
  }
  if ( (unsigned int)v7 >= 0x3332
    || (StartupInfo.cbReserved2 = 5 * v7 + 4,
        v9 = (BYTE *)_calloc_crt(StartupInfo.cbReserved2, 1),
        (StartupInfo.lpReserved2 = v9) == 0) )
  {
LABEL_48:
    *_errno() = 12;
    return (HANDLE)-1;
  }
  *(_DWORD *)v9 = v7;
  v10 = StartupInfo.lpReserved2;
  v11 = StartupInfo.lpReserved2 + 4;
  v12 = &StartupInfo.lpReserved2[v7 + 4];
  v26 = 0;
  if ( v7 > 0 )
  {
    do
    {
      v13 = dword_5776A0[v26 >> 5] + ((v26 & 0x1F) << 6);
      v14 = *(_BYTE *)(v13 + 4);
      if ( v14 & 0x10 )
      {
        *v11 = 0;
        *(_DWORD *)v12 = -1;
      }
      else
      {
        *v11 = v14;
        *(_DWORD *)v12 = *(_DWORD *)v13;
      }
      ++v26;
      ++v11;
      v12 += 4;
    }
    while ( v26 < v7 );
    v10 = StartupInfo.lpReserved2;
  }
  if ( v27 )
  {
    v15 = v10 + 4;
    v16 = 0;
    for ( i = &v10[v7 + 4]; ; i += 4 )
    {
      v18 = v7 >= 3 ? 3 : v7;
      if ( v16 >= v18 )
        break;
      *v15 = 0;
      *(_DWORD *)i = -1;
      ++v16;
      ++v15;
    }
    dwCreationFlags = 8;
  }
  *__doserrno() = 0;
  v19 = CreateProcessA(
          lpApplicationName,
          lpCommandLine,
          0,
          0,
          1,
          dwCreationFlags,
          lpEnvironment,
          0,
          &StartupInfo,
          &ProcessInformation);
  v20 = GetLastError();
  free(StartupInfo.lpReserved2);
  if ( v19 )
  {
    if ( a1 == 2 )
      _exit(0);
    if ( a1 )
    {
      if ( a1 != 4 )
      {
        v4 = ProcessInformation.hProcess;
        goto LABEL_43;
      }
    }
    else
    {
      WaitForSingleObject(ProcessInformation.hProcess, 0xFFFFFFFF);
      GetExitCodeProcess(ProcessInformation.hProcess, &ExitCode);
      v4 = (HANDLE)ExitCode;
    }
    CloseHandle(ProcessInformation.hProcess);
LABEL_43:
    CloseHandle(ProcessInformation.hThread);
    return v4;
  }
  _dosmaperr(v20);
  return (HANDLE)-1;
}
// 4CA9A4: using guessed type int __cdecl _invalid_parameter(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4CAA42: using guessed type _DWORD __cdecl _dosmaperr(_DWORD);

//----- (004E6FC0) --------------------------------------------------------
signed int __cdecl sub_4E6FC0(unsigned __int16 *a1, int *a2)
{
  unsigned __int16 v2; // bx
  int v3; // ebx
  int v4; // eax
  int v5; // ebx
  int v6; // eax
  signed int result; // eax
  int v8; // esi
  int v9; // edx
  int *v10; // edi
  int v11; // eax
  bool i; // zf
  int v13; // eax
  unsigned int v14; // edx
  int *v15; // ecx
  bool v16; // cf
  int v17; // eax
  int v18; // edx
  int *v19; // ebx
  unsigned int v20; // esi
  char v21; // cl
  signed int v22; // edx
  int *v23; // ecx
  int v24; // esi
  int v25; // eax
  int *v26; // ebx
  bool j; // zf
  int v28; // eax
  unsigned int v29; // edx
  int *v30; // ecx
  unsigned int v31; // edi
  signed int k; // ecx
  int *v33; // ecx
  unsigned int v34; // esi
  signed int v35; // edi
  int v36; // eax
  int v37; // edx
  int *v38; // ebx
  unsigned int v39; // esi
  char v40; // cl
  signed int v41; // edx
  int *v42; // ecx
  int v43; // eax
  int v44; // edx
  int *v45; // ebx
  unsigned int v46; // esi
  char v47; // cl
  signed int v48; // edx
  int *v49; // ecx
  int v50; // eax
  int v51; // edx
  unsigned int v52; // edi
  signed int v53; // edx
  int *v54; // ecx
  int v55; // ebx
  int v56; // edx
  int v57; // [esp+8h] [ebp-2Ch]
  int v58; // [esp+Ch] [ebp-28h]
  int v59; // [esp+10h] [ebp-24h]
  int v60; // [esp+14h] [ebp-20h]
  int v61; // [esp+18h] [ebp-1Ch]
  int v62; // [esp+1Ch] [ebp-18h]
  int v63; // [esp+20h] [ebp-14h]
  int v64; // [esp+24h] [ebp-10h]
  int v65; // [esp+28h] [ebp-Ch]
  int v66; // [esp+2Ch] [ebp-8h]
  int v67; // [esp+30h] [ebp-4h]
  int v68; // [esp+3Ch] [ebp+8h]
  unsigned int v69; // [esp+3Ch] [ebp+8h]
  signed int v70; // [esp+3Ch] [ebp+8h]
  signed int v71; // [esp+3Ch] [ebp+8h]
  signed int v72; // [esp+3Ch] [ebp+8h]
  signed int v73; // [esp+3Ch] [ebp+8h]
  signed int v74; // [esp+3Ch] [ebp+8h]

  v2 = a1[5];
  v63 = a1[5] & 0x8000;
  v60 = *(_DWORD *)(a1 + 3);
  v3 = (v2 & 0x7FFF) - 0x3FFF;
  v4 = *a1 << 16;
  v61 = *(_DWORD *)(a1 + 1);
  v62 = v4;
  if ( v3 != -16383 )
  {
    v68 = 0;
    v57 = v60;
    v58 = v61;
    v59 = v62;
    v8 = dword_53CF4C - 1;
    v64 = v3;
    v65 = dword_53CF4C / 32;
    v9 = dword_53CF4C % 32;
    v10 = &v60 + dword_53CF4C / 32;
    v66 = 31 - dword_53CF4C % 32;
    if ( (1 << (31 - dword_53CF4C % 32)) & *v10 )
    {
      v11 = v65;
      for ( i = (~(-1 << (31 - v9)) & *(&v60 + v65)) == 0; i; i = *(&v60 + v11) == 0 )
      {
        if ( ++v11 >= 3 )
          goto LABEL_22;
      }
      v13 = v8 / 32;
      v67 = 0;
      v14 = 1 << (31 - v8 % 32);
      v15 = &v60 + v8 / 32;
      v69 = v14 + *v15;
      if ( v69 >= *v15 )
      {
        v16 = v69 < v14;
        goto LABEL_18;
      }
LABEL_19:
      v67 = 1;
      while ( 1 )
      {
        --v13;
        *v15 = v69;
        if ( v13 < 0 || !v67 )
          break;
        v67 = 0;
        v15 = &v60 + v13;
        v69 = *v15 + 1;
        if ( v69 >= *v15 )
        {
          v16 = (unsigned int)*v15 >= 0xFFFFFFFF;
LABEL_18:
          if ( !v16 )
            continue;
        }
        goto LABEL_19;
      }
      v68 = v67;
    }
LABEL_22:
    *v10 &= -1 << v66;
    if ( v65 + 1 < 3 )
      memset(&v60 + v65 + 1, 0, 4 * (3 - (v65 + 1)));
    if ( v68 )
      ++v3;
    if ( v3 >= dword_53CF48 - dword_53CF4C )
    {
      if ( v3 > dword_53CF48 )
      {
        if ( v3 < dword_53CF44 )
        {
          v60 &= 0x7FFFFFFFu;
          v5 = dword_53CF58 + v3;
          v50 = dword_53CF50 / 32;
          v51 = dword_53CF50 % 32;
          v65 = 0;
          v74 = 0;
          v67 = 32 - dword_53CF50 % 32;
          do
          {
            v52 = *(&v60 + v74);
            v64 = ~(-1 << v51) & *(&v60 + v74);
            *(&v60 + v74++) = v65 | (v52 >> v51);
            v65 = v64 << v67;
          }
          while ( v74 < 3 );
          v53 = 2;
          v54 = &v62 - v50;
          do
          {
            if ( v53 < v50 )
              *(&v60 + v53) = 0;
            else
              *(&v60 + v53) = *v54;
            --v53;
            --v54;
          }
          while ( v53 >= 0 );
          result = 0;
        }
        else
        {
          v61 = 0;
          v62 = 0;
          v60 = 2147483648;
          v43 = dword_53CF50 / 32;
          v44 = dword_53CF50 % 32;
          v65 = 0;
          v73 = 0;
          v67 = 32 - dword_53CF50 % 32;
          do
          {
            v45 = &v60 + v73;
            v46 = *v45;
            v64 = ~(-1 << v44) & *v45;
            v47 = v67;
            *v45 = v65 | (v46 >> v44);
            ++v73;
            v65 = v64 << v47;
          }
          while ( v73 < 3 );
          v48 = 2;
          v49 = &v62 - v43;
          do
          {
            if ( v48 < v43 )
              *(&v60 + v48) = 0;
            else
              *(&v60 + v48) = *v49;
            --v48;
            --v49;
          }
          while ( v48 >= 0 );
          v5 = dword_53CF58 + dword_53CF44;
          result = 1;
        }
        goto LABEL_79;
      }
      v60 = v57;
      v61 = v58;
      v17 = (dword_53CF48 - v64) / 32;
      v62 = v59;
      v18 = (dword_53CF48 - v64) % 32;
      v65 = 0;
      v70 = 0;
      v67 = 32 - v18;
      do
      {
        v19 = &v60 + v70;
        v20 = *v19;
        v64 = ~(-1 << v18) & *v19;
        v21 = v67;
        *v19 = v65 | (v20 >> v18);
        ++v70;
        v65 = v64 << v21;
      }
      while ( v70 < 3 );
      v22 = 2;
      v23 = &v62 - v17;
      do
      {
        if ( v22 < v17 )
          *(&v60 + v22) = 0;
        else
          *(&v60 + v22) = *v23;
        --v22;
        --v23;
      }
      while ( v22 >= 0 );
      v24 = dword_53CF4C - 1;
      v25 = dword_53CF4C / 32;
      v65 = dword_53CF4C / 32;
      v26 = &v60 + dword_53CF4C / 32;
      v64 = 31 - dword_53CF4C % 32;
      if ( (1 << (31 - dword_53CF4C % 32)) & *v26 )
      {
        for ( j = (~(-1 << (31 - dword_53CF4C % 32)) & *(&v60 + v25)) == 0; j; j = *(&v60 + v25) == 0 )
        {
          if ( ++v25 >= 3 )
            goto LABEL_52;
        }
        v28 = v24 / 32;
        v71 = 0;
        v29 = 1 << (31 - v24 % 32);
        v30 = &v60 + v24 / 32;
        v31 = *v30 + v29;
        if ( v31 < *v30 || v31 < v29 )
          v71 = 1;
        *v30 = v31;
        for ( k = v71; --v28 >= 0 && k; k = v35 )
        {
          v33 = &v60 + v28;
          v34 = *v33 + 1;
          v35 = 0;
          if ( v34 < *v33 || v34 < 1 )
            v35 = 1;
          *v33 = v34;
        }
      }
LABEL_52:
      *v26 &= -1 << v64;
      if ( v65 + 1 < 3 )
        memset(&v60 + v65 + 1, 0, 4 * (3 - (v65 + 1)));
      v36 = (dword_53CF50 + 1) / 32;
      v37 = (dword_53CF50 + 1) % 32;
      v65 = 0;
      v72 = 0;
      v67 = 32 - v37;
      do
      {
        v38 = &v60 + v72;
        v39 = *v38;
        v64 = ~(-1 << v37) & *v38;
        v40 = v67;
        *v38 = v65 | (v39 >> v37);
        ++v72;
        v65 = v64 << v40;
      }
      while ( v72 < 3 );
      v41 = 2;
      v42 = &v62 - v36;
      do
      {
        if ( v41 < v36 )
          *(&v60 + v41) = 0;
        else
          *(&v60 + v41) = *v42;
        --v41;
        --v42;
      }
      while ( v41 >= 0 );
    }
    else
    {
      v60 = 0;
      v61 = 0;
      v62 = 0;
    }
    v5 = 0;
    result = 2;
    goto LABEL_79;
  }
  v5 = 0;
  v6 = 0;
  while ( !*(&v60 + v6) )
  {
    if ( ++v6 >= 3 )
    {
      result = 0;
      goto LABEL_79;
    }
  }
  v60 = 0;
  v61 = 0;
  v62 = 0;
  result = 2;
LABEL_79:
  v55 = v60 | (v63 != 0 ? 0x80000000 : 0) | (v5 << (31 - dword_53CF50));
  if ( dword_53CF54 == 64 )
  {
    v56 = v61;
    a2[1] = v55;
    *a2 = v56;
  }
  else if ( dword_53CF54 == 32 )
  {
    *a2 = v55;
  }
  return result;
}
// 53CF44: using guessed type int dword_53CF44;
// 53CF48: using guessed type int dword_53CF48;
// 53CF4C: using guessed type int dword_53CF4C;
// 53CF50: using guessed type int dword_53CF50;
// 53CF54: using guessed type int dword_53CF54;
// 53CF58: using guessed type int dword_53CF58;

//----- (004E7502) --------------------------------------------------------
signed int __cdecl sub_4E7502(unsigned __int16 *a1, int *a2)
{
  unsigned __int16 v2; // bx
  int v3; // ebx
  int v4; // eax
  int v5; // ebx
  int v6; // eax
  signed int result; // eax
  int v8; // esi
  int v9; // edx
  int *v10; // edi
  int v11; // eax
  bool i; // zf
  int v13; // eax
  unsigned int v14; // edx
  int *v15; // ecx
  bool v16; // cf
  int v17; // eax
  int v18; // edx
  int *v19; // ebx
  unsigned int v20; // esi
  char v21; // cl
  signed int v22; // edx
  int *v23; // ecx
  int v24; // esi
  int v25; // eax
  int *v26; // ebx
  bool j; // zf
  int v28; // eax
  unsigned int v29; // edx
  int *v30; // ecx
  unsigned int v31; // edi
  signed int k; // ecx
  int *v33; // ecx
  unsigned int v34; // esi
  signed int v35; // edi
  int v36; // eax
  int v37; // edx
  int *v38; // ebx
  unsigned int v39; // esi
  char v40; // cl
  signed int v41; // edx
  int *v42; // ecx
  int v43; // eax
  int v44; // edx
  int *v45; // ebx
  unsigned int v46; // esi
  char v47; // cl
  signed int v48; // edx
  int *v49; // ecx
  int v50; // eax
  int v51; // edx
  unsigned int v52; // edi
  signed int v53; // edx
  int *v54; // ecx
  int v55; // ebx
  int v56; // edx
  int v57; // [esp+8h] [ebp-2Ch]
  int v58; // [esp+Ch] [ebp-28h]
  int v59; // [esp+10h] [ebp-24h]
  int v60; // [esp+14h] [ebp-20h]
  int v61; // [esp+18h] [ebp-1Ch]
  int v62; // [esp+1Ch] [ebp-18h]
  int v63; // [esp+20h] [ebp-14h]
  int v64; // [esp+24h] [ebp-10h]
  int v65; // [esp+28h] [ebp-Ch]
  int v66; // [esp+2Ch] [ebp-8h]
  int v67; // [esp+30h] [ebp-4h]
  int v68; // [esp+3Ch] [ebp+8h]
  unsigned int v69; // [esp+3Ch] [ebp+8h]
  signed int v70; // [esp+3Ch] [ebp+8h]
  signed int v71; // [esp+3Ch] [ebp+8h]
  signed int v72; // [esp+3Ch] [ebp+8h]
  signed int v73; // [esp+3Ch] [ebp+8h]
  signed int v74; // [esp+3Ch] [ebp+8h]

  v2 = a1[5];
  v63 = a1[5] & 0x8000;
  v60 = *(_DWORD *)(a1 + 3);
  v3 = (v2 & 0x7FFF) - 0x3FFF;
  v4 = *a1 << 16;
  v61 = *(_DWORD *)(a1 + 1);
  v62 = v4;
  if ( v3 != -16383 )
  {
    v68 = 0;
    v57 = v60;
    v58 = v61;
    v59 = v62;
    v8 = dword_53CF64 - 1;
    v64 = v3;
    v65 = dword_53CF64 / 32;
    v9 = dword_53CF64 % 32;
    v10 = &v60 + dword_53CF64 / 32;
    v66 = 31 - dword_53CF64 % 32;
    if ( (1 << (31 - dword_53CF64 % 32)) & *v10 )
    {
      v11 = v65;
      for ( i = (~(-1 << (31 - v9)) & *(&v60 + v65)) == 0; i; i = *(&v60 + v11) == 0 )
      {
        if ( ++v11 >= 3 )
          goto LABEL_22;
      }
      v13 = v8 / 32;
      v67 = 0;
      v14 = 1 << (31 - v8 % 32);
      v15 = &v60 + v8 / 32;
      v69 = v14 + *v15;
      if ( v69 >= *v15 )
      {
        v16 = v69 < v14;
        goto LABEL_18;
      }
LABEL_19:
      v67 = 1;
      while ( 1 )
      {
        --v13;
        *v15 = v69;
        if ( v13 < 0 || !v67 )
          break;
        v67 = 0;
        v15 = &v60 + v13;
        v69 = *v15 + 1;
        if ( v69 >= *v15 )
        {
          v16 = (unsigned int)*v15 >= 0xFFFFFFFF;
LABEL_18:
          if ( !v16 )
            continue;
        }
        goto LABEL_19;
      }
      v68 = v67;
    }
LABEL_22:
    *v10 &= -1 << v66;
    if ( v65 + 1 < 3 )
      memset(&v60 + v65 + 1, 0, 4 * (3 - (v65 + 1)));
    if ( v68 )
      ++v3;
    if ( v3 >= dword_53CF60 - dword_53CF64 )
    {
      if ( v3 > dword_53CF60 )
      {
        if ( v3 < dword_53CF5C )
        {
          v60 &= 0x7FFFFFFFu;
          v5 = dword_53CF70 + v3;
          v50 = dword_53CF68 / 32;
          v51 = dword_53CF68 % 32;
          v65 = 0;
          v74 = 0;
          v67 = 32 - dword_53CF68 % 32;
          do
          {
            v52 = *(&v60 + v74);
            v64 = ~(-1 << v51) & *(&v60 + v74);
            *(&v60 + v74++) = v65 | (v52 >> v51);
            v65 = v64 << v67;
          }
          while ( v74 < 3 );
          v53 = 2;
          v54 = &v62 - v50;
          do
          {
            if ( v53 < v50 )
              *(&v60 + v53) = 0;
            else
              *(&v60 + v53) = *v54;
            --v53;
            --v54;
          }
          while ( v53 >= 0 );
          result = 0;
        }
        else
        {
          v61 = 0;
          v62 = 0;
          v60 = 2147483648;
          v43 = dword_53CF68 / 32;
          v44 = dword_53CF68 % 32;
          v65 = 0;
          v73 = 0;
          v67 = 32 - dword_53CF68 % 32;
          do
          {
            v45 = &v60 + v73;
            v46 = *v45;
            v64 = ~(-1 << v44) & *v45;
            v47 = v67;
            *v45 = v65 | (v46 >> v44);
            ++v73;
            v65 = v64 << v47;
          }
          while ( v73 < 3 );
          v48 = 2;
          v49 = &v62 - v43;
          do
          {
            if ( v48 < v43 )
              *(&v60 + v48) = 0;
            else
              *(&v60 + v48) = *v49;
            --v48;
            --v49;
          }
          while ( v48 >= 0 );
          v5 = dword_53CF70 + dword_53CF5C;
          result = 1;
        }
        goto LABEL_79;
      }
      v60 = v57;
      v61 = v58;
      v17 = (dword_53CF60 - v64) / 32;
      v62 = v59;
      v18 = (dword_53CF60 - v64) % 32;
      v65 = 0;
      v70 = 0;
      v67 = 32 - v18;
      do
      {
        v19 = &v60 + v70;
        v20 = *v19;
        v64 = ~(-1 << v18) & *v19;
        v21 = v67;
        *v19 = v65 | (v20 >> v18);
        ++v70;
        v65 = v64 << v21;
      }
      while ( v70 < 3 );
      v22 = 2;
      v23 = &v62 - v17;
      do
      {
        if ( v22 < v17 )
          *(&v60 + v22) = 0;
        else
          *(&v60 + v22) = *v23;
        --v22;
        --v23;
      }
      while ( v22 >= 0 );
      v24 = dword_53CF64 - 1;
      v25 = dword_53CF64 / 32;
      v65 = dword_53CF64 / 32;
      v26 = &v60 + dword_53CF64 / 32;
      v64 = 31 - dword_53CF64 % 32;
      if ( (1 << (31 - dword_53CF64 % 32)) & *v26 )
      {
        for ( j = (~(-1 << (31 - dword_53CF64 % 32)) & *(&v60 + v25)) == 0; j; j = *(&v60 + v25) == 0 )
        {
          if ( ++v25 >= 3 )
            goto LABEL_52;
        }
        v28 = v24 / 32;
        v71 = 0;
        v29 = 1 << (31 - v24 % 32);
        v30 = &v60 + v24 / 32;
        v31 = *v30 + v29;
        if ( v31 < *v30 || v31 < v29 )
          v71 = 1;
        *v30 = v31;
        for ( k = v71; --v28 >= 0 && k; k = v35 )
        {
          v33 = &v60 + v28;
          v34 = *v33 + 1;
          v35 = 0;
          if ( v34 < *v33 || v34 < 1 )
            v35 = 1;
          *v33 = v34;
        }
      }
LABEL_52:
      *v26 &= -1 << v64;
      if ( v65 + 1 < 3 )
        memset(&v60 + v65 + 1, 0, 4 * (3 - (v65 + 1)));
      v36 = (dword_53CF68 + 1) / 32;
      v37 = (dword_53CF68 + 1) % 32;
      v65 = 0;
      v72 = 0;
      v67 = 32 - v37;
      do
      {
        v38 = &v60 + v72;
        v39 = *v38;
        v64 = ~(-1 << v37) & *v38;
        v40 = v67;
        *v38 = v65 | (v39 >> v37);
        ++v72;
        v65 = v64 << v40;
      }
      while ( v72 < 3 );
      v41 = 2;
      v42 = &v62 - v36;
      do
      {
        if ( v41 < v36 )
          *(&v60 + v41) = 0;
        else
          *(&v60 + v41) = *v42;
        --v41;
        --v42;
      }
      while ( v41 >= 0 );
    }
    else
    {
      v60 = 0;
      v61 = 0;
      v62 = 0;
    }
    v5 = 0;
    result = 2;
    goto LABEL_79;
  }
  v5 = 0;
  v6 = 0;
  while ( !*(&v60 + v6) )
  {
    if ( ++v6 >= 3 )
    {
      result = 0;
      goto LABEL_79;
    }
  }
  v60 = 0;
  v61 = 0;
  v62 = 0;
  result = 2;
LABEL_79:
  v55 = v60 | (v63 != 0 ? 0x80000000 : 0) | (v5 << (31 - dword_53CF68));
  if ( dword_53CF6C == 64 )
  {
    v56 = v61;
    a2[1] = v55;
    *a2 = v56;
  }
  else if ( dword_53CF6C == 32 )
  {
    *a2 = v55;
  }
  return result;
}
// 53CF5C: using guessed type int dword_53CF5C;
// 53CF60: using guessed type int dword_53CF60;
// 53CF64: using guessed type int dword_53CF64;
// 53CF68: using guessed type int dword_53CF68;
// 53CF6C: using guessed type int dword_53CF6C;
// 53CF70: using guessed type int dword_53CF70;

//----- (004E7D60) --------------------------------------------------------
int sub_4E7D60()
{
  return 0;
}

//----- (00508C60) --------------------------------------------------------
void __usercall sub_508C60(int a1@<ebp>)
{
  sub_4808F0(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (00508C68) --------------------------------------------------------
int __cdecl SEH_404530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508C90) --------------------------------------------------------
void sub_508C90()
{
  JUMPOUT(&loc_404490);
}

//----- (00508C98) --------------------------------------------------------
int __cdecl SEH_404B00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508CC0) --------------------------------------------------------
void sub_508CC0()
{
  JUMPOUT(&loc_404490);
}

//----- (00508CC8) --------------------------------------------------------
int __cdecl SEH_404BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508CF0) --------------------------------------------------------
void sub_508CF0()
{
  JUMPOUT(&loc_404490);
}

//----- (00508CF8) --------------------------------------------------------
int __cdecl SEH_404CA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508D20) --------------------------------------------------------
int __userpurge sub_508D20@<eax>(int a1@<ebp>, int a2)
{
  return (*(int (__stdcall **)(int))(**(_DWORD **)(a1 - 20) + 4))(a2);
}

//----- (00508D28) --------------------------------------------------------
void sub_508D28()
{
  JUMPOUT(&loc_404490);
}

//----- (00508D30) --------------------------------------------------------
int __cdecl SEH_404DC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508D60) --------------------------------------------------------
void __usercall sub_508D60(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (00508D6B) --------------------------------------------------------
int __cdecl SEH_4082D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508D9B) --------------------------------------------------------
void __usercall sub_508D9B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 652));
}

//----- (00508DA9) --------------------------------------------------------
int __cdecl SEH_408670(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508DF0) --------------------------------------------------------
void __usercall sub_508DF0(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 72);
  JUMPOUT(CHttpFilter::~CHttpFilter);
}
// 404FD0: using guessed type _DWORD __thiscall CHttpFilter::~CHttpFilter(CHttpFilter *__hidden this);

//----- (00508DF8) --------------------------------------------------------
int __cdecl SEH_408C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508E20) --------------------------------------------------------
int __usercall sub_508E20@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (00508E28) --------------------------------------------------------
int __cdecl SEH_40A130(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508E5B) --------------------------------------------------------
void __usercall sub_508E5B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508E66) --------------------------------------------------------
void __usercall sub_508E66(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508E71) --------------------------------------------------------
void __usercall sub_508E71(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508E7C) --------------------------------------------------------
void __usercall sub_508E7C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508E92) --------------------------------------------------------
void __usercall sub_508E92(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508E9D) --------------------------------------------------------
void __usercall sub_508E9D(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508EA8) --------------------------------------------------------
void __usercall sub_508EA8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508EB3) --------------------------------------------------------
void __usercall sub_508EB3(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508EBE) --------------------------------------------------------
void __usercall sub_508EBE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508EC9) --------------------------------------------------------
void __usercall sub_508EC9(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508ED4) --------------------------------------------------------
int __cdecl SEH_40A1F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508F20) --------------------------------------------------------
void __usercall sub_508F20(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 192));
}

//----- (00508F2E) --------------------------------------------------------
int __cdecl SEH_40A8A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508F70) --------------------------------------------------------
void __usercall sub_508F70(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (00508F7B) --------------------------------------------------------
int __cdecl SEH_40BFB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508FA0) --------------------------------------------------------
void __usercall sub_508FA0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00508FAB) --------------------------------------------------------
int __cdecl SEH_40C2F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00508FD0) --------------------------------------------------------
void __usercall sub_508FD0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1532));
}

//----- (00508FDE) --------------------------------------------------------
int __cdecl SEH_40C860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509020) --------------------------------------------------------
void __usercall sub_509020(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 588));
}

//----- (0050902E) --------------------------------------------------------
void __usercall sub_50902E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 588));
}

//----- (0050903C) --------------------------------------------------------
void __usercall sub_50903C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 588));
}

//----- (0050904A) --------------------------------------------------------
void __usercall sub_50904A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 588));
}

//----- (00509058) --------------------------------------------------------
void __usercall sub_509058(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 588));
}

//----- (00509066) --------------------------------------------------------
int __cdecl SEH_40D1A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005090C0) --------------------------------------------------------
int __usercall sub_5090C0@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (005090C8) --------------------------------------------------------
int __cdecl SEH_40DC40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005090F0) --------------------------------------------------------
void __usercall sub_5090F0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (005090FB) --------------------------------------------------------
void __usercall sub_5090FB(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (00509106) --------------------------------------------------------
int __cdecl SEH_40F5B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509130) --------------------------------------------------------
int __usercall sub_509130@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (00509138) --------------------------------------------------------
int __cdecl SEH_40FC40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509160) --------------------------------------------------------
void __usercall sub_509160(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050916B) --------------------------------------------------------
int __cdecl SEH_410010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509190) --------------------------------------------------------
void __usercall sub_509190(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 16));
}

//----- (0050919B) --------------------------------------------------------
int __cdecl SEH_410590(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005091C0) --------------------------------------------------------
void __usercall sub_5091C0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 24));
}

//----- (005091CB) --------------------------------------------------------
void __usercall sub_5091CB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 24));
}

//----- (005091D6) --------------------------------------------------------
void __usercall sub_5091D6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005091E1) --------------------------------------------------------
void __usercall sub_5091E1(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005091EC) --------------------------------------------------------
void __usercall sub_5091EC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005091F7) --------------------------------------------------------
void __usercall sub_5091F7(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (00509202) --------------------------------------------------------
void __usercall sub_509202(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050920D) --------------------------------------------------------
int __cdecl SEH_410880(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509250) --------------------------------------------------------
int __usercall sub_509250@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (00509258) --------------------------------------------------------
int __cdecl SEH_410E30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509280) --------------------------------------------------------
void __usercall sub_509280(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050928B) --------------------------------------------------------
int __cdecl SEH_4112C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005092B0) --------------------------------------------------------
void __usercall sub_5092B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005092BB) --------------------------------------------------------
int __cdecl SEH_411790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005092E0) --------------------------------------------------------
void __usercall sub_5092E0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005092EB) --------------------------------------------------------
int __cdecl SEH_411D20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509310) --------------------------------------------------------
void __usercall sub_509310(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 56));
}

//----- (0050931B) --------------------------------------------------------
int __cdecl SEH_411E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050935E) --------------------------------------------------------
int __cdecl sub_50935E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005093A0) --------------------------------------------------------
void __userpurge sub_5093A0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (005093A8) --------------------------------------------------------
int __cdecl SEH_412760(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005093D0) --------------------------------------------------------
void __usercall sub_5093D0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 60));
}

//----- (005093DB) --------------------------------------------------------
void __usercall sub_5093DB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 60));
}

//----- (005093E6) --------------------------------------------------------
void __usercall sub_5093E6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 76));
}

//----- (005093F1) --------------------------------------------------------
int __cdecl SEH_412CB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509430) --------------------------------------------------------
void __userpurge sub_509430(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (00509438) --------------------------------------------------------
int __cdecl SEH_4134D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509460) --------------------------------------------------------
void __userpurge sub_509460(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (00509468) --------------------------------------------------------
int __cdecl SEH_413AC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509490) --------------------------------------------------------
void __userpurge sub_509490(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (00509498) --------------------------------------------------------
int __cdecl SEH_413F60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005094C0) --------------------------------------------------------
void __userpurge sub_5094C0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (005094C8) --------------------------------------------------------
int __cdecl SEH_4146D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005094F0) --------------------------------------------------------
void __userpurge sub_5094F0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (005094F8) --------------------------------------------------------
int __cdecl SEH_414D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509520) --------------------------------------------------------
void __usercall sub_509520(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050952B) --------------------------------------------------------
void __usercall sub_50952B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509536) --------------------------------------------------------
void __usercall sub_509536(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509541) --------------------------------------------------------
void __usercall sub_509541(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050954C) --------------------------------------------------------
int __cdecl SEH_415620(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509580) --------------------------------------------------------
void __userpurge sub_509580(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  **(_DWORD **)(a1 - 16) = &FloatBase::`vftable';
}
// 5117C0: using guessed type void *FloatBase::`vftable';

//----- (00509588) --------------------------------------------------------
int __cdecl SEH_415BC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005095B0) --------------------------------------------------------
void __userpurge sub_5095B0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (005095B8) --------------------------------------------------------
int __cdecl SEH_415D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005095E0) --------------------------------------------------------
void __userpurge sub_5095E0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 8724);
  JUMPOUT(&loc_412700);
}

//----- (005095EB) --------------------------------------------------------
void __usercall sub_5095EB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 8736));
}

//----- (005095F9) --------------------------------------------------------
void __usercall sub_5095F9(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 8736));
}

//----- (00509607) --------------------------------------------------------
int __cdecl SEH_415E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509650) --------------------------------------------------------
void __userpurge sub_509650(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (00509658) --------------------------------------------------------
int __cdecl SEH_4163D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509680) --------------------------------------------------------
void __userpurge sub_509680(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (00509688) --------------------------------------------------------
int __cdecl SEH_416500(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005096B0) --------------------------------------------------------
void __userpurge sub_5096B0(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ecx

  v9 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_412700);
}

//----- (005096B8) --------------------------------------------------------
int __cdecl SEH_4166A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509740) --------------------------------------------------------
void __usercall sub_509740(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 24));
}

//----- (0050974B) --------------------------------------------------------
int __cdecl SEH_41B390(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509770) --------------------------------------------------------
void __usercall sub_509770(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050977B) --------------------------------------------------------
int __cdecl SEH_41BE00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005097A0) --------------------------------------------------------
void __usercall sub_5097A0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005097AB) --------------------------------------------------------
int __cdecl SEH_41BF00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005097D0) --------------------------------------------------------
void __usercall sub_5097D0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005097DB) --------------------------------------------------------
void __usercall sub_5097DB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (005097E6) --------------------------------------------------------
int __cdecl SEH_41C050(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509810) --------------------------------------------------------
void __usercall sub_509810(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050981B) --------------------------------------------------------
int __cdecl SEH_41C2E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509840) --------------------------------------------------------
void __usercall sub_509840(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 12));
}

//----- (0050984B) --------------------------------------------------------
int __cdecl SEH_41C470(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509870) --------------------------------------------------------
void __usercall sub_509870(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (0050987E) --------------------------------------------------------
void __usercall sub_50987E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (0050988C) --------------------------------------------------------
void __usercall sub_50988C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (0050989A) --------------------------------------------------------
void __usercall sub_50989A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098A8) --------------------------------------------------------
void __usercall sub_5098A8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098B6) --------------------------------------------------------
void __usercall sub_5098B6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098C4) --------------------------------------------------------
void __usercall sub_5098C4(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098D2) --------------------------------------------------------
void __usercall sub_5098D2(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098E0) --------------------------------------------------------
void __usercall sub_5098E0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098EE) --------------------------------------------------------
void __usercall sub_5098EE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2076));
}

//----- (005098FC) --------------------------------------------------------
int __cdecl SEH_41F6B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509960) --------------------------------------------------------
void __usercall sub_509960(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2396));
}

//----- (0050996E) --------------------------------------------------------
int __cdecl SEH_4203D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (005099B0) --------------------------------------------------------
void __usercall sub_5099B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 3348));
}

//----- (005099BE) --------------------------------------------------------
int __cdecl SEH_421060(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509A00) --------------------------------------------------------
void __usercall sub_509A00(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00509A0B) --------------------------------------------------------
int __cdecl SEH_423B90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509A30) --------------------------------------------------------
void __usercall sub_509A30(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A3B) --------------------------------------------------------
void __usercall sub_509A3B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A46) --------------------------------------------------------
void __usercall sub_509A46(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A51) --------------------------------------------------------
void __usercall sub_509A51(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A5C) --------------------------------------------------------
void __usercall sub_509A5C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A67) --------------------------------------------------------
void __usercall sub_509A67(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A72) --------------------------------------------------------
void __usercall sub_509A72(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (00509A7D) --------------------------------------------------------
int __cdecl SEH_426170(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509AC0) --------------------------------------------------------
void __usercall sub_509AC0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 532));
}

//----- (00509ACE) --------------------------------------------------------
int __cdecl SEH_426900(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509B10) --------------------------------------------------------
void __usercall sub_509B10(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 296));
}

//----- (00509B1E) --------------------------------------------------------
void __usercall sub_509B1E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B2C) --------------------------------------------------------
void __usercall sub_509B2C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B3A) --------------------------------------------------------
void __usercall sub_509B3A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B48) --------------------------------------------------------
void __usercall sub_509B48(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B56) --------------------------------------------------------
void __usercall sub_509B56(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B64) --------------------------------------------------------
void __usercall sub_509B64(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B72) --------------------------------------------------------
void __usercall sub_509B72(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B80) --------------------------------------------------------
void __usercall sub_509B80(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B8E) --------------------------------------------------------
void __usercall sub_509B8E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (00509B9C) --------------------------------------------------------
int __cdecl SEH_426B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509C00) --------------------------------------------------------
void __usercall sub_509C00(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (00509C0B) --------------------------------------------------------
int __cdecl SEH_428090(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509C30) --------------------------------------------------------
void __usercall sub_509C30(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (00509C3B) --------------------------------------------------------
int __cdecl SEH_4281F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509C60) --------------------------------------------------------
void __usercall sub_509C60(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00509C6B) --------------------------------------------------------
int __cdecl SEH_428C70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509C90) --------------------------------------------------------
void __usercall sub_509C90(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1828));
}

//----- (00509C9E) --------------------------------------------------------
void __usercall sub_509C9E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1828));
}

//----- (00509CAC) --------------------------------------------------------
int __cdecl SEH_428E20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509CF0) --------------------------------------------------------
void __usercall sub_509CF0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (00509CFE) --------------------------------------------------------
int __cdecl SEH_429B40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509D40) --------------------------------------------------------
void __usercall sub_509D40(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (00509D4E) --------------------------------------------------------
int __cdecl SEH_429ED0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509D90) --------------------------------------------------------
void __usercall sub_509D90(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (00509D9B) --------------------------------------------------------
int __cdecl SEH_42A520(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509DC0) --------------------------------------------------------
void __usercall sub_509DC0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 308));
}

//----- (00509DCE) --------------------------------------------------------
void __usercall sub_509DCE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 308));
}

//----- (00509DDC) --------------------------------------------------------
void __usercall sub_509DDC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 308));
}

//----- (00509DEA) --------------------------------------------------------
void __usercall sub_509DEA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 308));
}

//----- (00509DF8) --------------------------------------------------------
int __cdecl SEH_42D110(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509E40) --------------------------------------------------------
void __usercall sub_509E40(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (00509E4B) --------------------------------------------------------
int __cdecl SEH_42D960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509E70) --------------------------------------------------------
void __usercall sub_509E70(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 40));
}

//----- (00509E7B) --------------------------------------------------------
int __cdecl SEH_42E660(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509EA0) --------------------------------------------------------
void __usercall sub_509EA0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509EAE) --------------------------------------------------------
void __usercall sub_509EAE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509EBC) --------------------------------------------------------
void __usercall sub_509EBC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509ECA) --------------------------------------------------------
void __usercall sub_509ECA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509ED8) --------------------------------------------------------
void __usercall sub_509ED8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509EE6) --------------------------------------------------------
void __usercall sub_509EE6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 568));
}

//----- (00509EF4) --------------------------------------------------------
int __cdecl SEH_42ED20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509F50) --------------------------------------------------------
void __usercall sub_509F50(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2932));
}

//----- (00509F5E) --------------------------------------------------------
void __usercall sub_509F5E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2932));
}

//----- (00509F6C) --------------------------------------------------------
void __usercall sub_509F6C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2932));
}

//----- (00509F7A) --------------------------------------------------------
int __cdecl SEH_42FBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (00509FC0) --------------------------------------------------------
void __usercall sub_509FC0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1100));
}

//----- (00509FCE) --------------------------------------------------------
void __usercall sub_509FCE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1100));
}

//----- (00509FDC) --------------------------------------------------------
int __cdecl SEH_431020(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A020) --------------------------------------------------------
void __usercall sub_50A020(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 852));
}

//----- (0050A02E) --------------------------------------------------------
void __usercall sub_50A02E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 852));
}

//----- (0050A03C) --------------------------------------------------------
int __cdecl SEH_435D80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A080) --------------------------------------------------------
int __usercall sub_50A080@<eax>(int a1@<ebp>)
{
  return sub_4027ED(*(_DWORD *)(a1 - 16));
}
// 4027ED: using guessed type int __thiscall sub_4027ED(_DWORD);

//----- (0050A088) --------------------------------------------------------
int __cdecl SEH_43AE00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A0B0) --------------------------------------------------------
void __usercall sub_50A0B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0BB) --------------------------------------------------------
void __usercall sub_50A0BB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0C6) --------------------------------------------------------
void __usercall sub_50A0C6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0D1) --------------------------------------------------------
void __usercall sub_50A0D1(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0DC) --------------------------------------------------------
void __usercall sub_50A0DC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0E7) --------------------------------------------------------
void __usercall sub_50A0E7(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0F2) --------------------------------------------------------
void __usercall sub_50A0F2(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A0FD) --------------------------------------------------------
void __usercall sub_50A0FD(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A108) --------------------------------------------------------
void __usercall sub_50A108(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A113) --------------------------------------------------------
void __usercall sub_50A113(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A11E) --------------------------------------------------------
int __cdecl SEH_43AF40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A160) --------------------------------------------------------
int __usercall sub_50A160@<eax>(int a1@<ebp>)
{
  return sub_4027ED(*(_DWORD *)(a1 - 276));
}
// 4027ED: using guessed type int __thiscall sub_4027ED(_DWORD);

//----- (0050A16B) --------------------------------------------------------
void __usercall sub_50A16B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A179) --------------------------------------------------------
void __usercall sub_50A179(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A187) --------------------------------------------------------
void __usercall sub_50A187(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A195) --------------------------------------------------------
void __usercall sub_50A195(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A1A3) --------------------------------------------------------
void __usercall sub_50A1A3(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A1B1) --------------------------------------------------------
void __usercall sub_50A1B1(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A1BF) --------------------------------------------------------
void __usercall sub_50A1BF(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A1CD) --------------------------------------------------------
void __usercall sub_50A1CD(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 284));
}

//----- (0050A1DB) --------------------------------------------------------
void __usercall sub_50A1DB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 280));
}

//----- (0050A1E9) --------------------------------------------------------
int __cdecl SEH_43C370(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A250) --------------------------------------------------------
int __usercall sub_50A250@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050A258) --------------------------------------------------------
int __cdecl SEH_43D130(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A280) --------------------------------------------------------
void __usercall sub_50A280(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050A28B) --------------------------------------------------------
int __cdecl SEH_43D1C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A2B0) --------------------------------------------------------
void __usercall sub_50A2B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1308));
}

//----- (0050A2BE) --------------------------------------------------------
void __usercall sub_50A2BE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1316));
}

//----- (0050A2CC) --------------------------------------------------------
int __cdecl SEH_43D2C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A310) --------------------------------------------------------
void __usercall sub_50A310(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 3356));
}

//----- (0050A31E) --------------------------------------------------------
void __usercall sub_50A31E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 3356));
}

//----- (0050A32C) --------------------------------------------------------
void __usercall sub_50A32C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 3348));
}

//----- (0050A33A) --------------------------------------------------------
int __cdecl SEH_43DF70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A380) --------------------------------------------------------
void __usercall sub_50A380(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 4604));
}

//----- (0050A38E) --------------------------------------------------------
void __usercall sub_50A38E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 4604));
}

//----- (0050A39C) --------------------------------------------------------
void __usercall sub_50A39C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 4604));
}

//----- (0050A3AA) --------------------------------------------------------
void __usercall sub_50A3AA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 4604));
}

//----- (0050A3B8) --------------------------------------------------------
int __cdecl SEH_43EB20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A400) --------------------------------------------------------
void __usercall sub_50A400(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 532));
}

//----- (0050A40E) --------------------------------------------------------
int __cdecl SEH_43FDC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A450) --------------------------------------------------------
void __userpurge sub_50A450(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_4027A2);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050A458) --------------------------------------------------------
int __cdecl SEH_440850(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A480) --------------------------------------------------------
void __usercall sub_50A480(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A48B) --------------------------------------------------------
void __usercall sub_50A48B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A496) --------------------------------------------------------
void __usercall sub_50A496(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050A4A1) --------------------------------------------------------
int __cdecl SEH_440AA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A4D0) --------------------------------------------------------
void __usercall sub_50A4D0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A4DB) --------------------------------------------------------
void __usercall sub_50A4DB(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A4E6) --------------------------------------------------------
int __cdecl SEH_440C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A510) --------------------------------------------------------
int __usercall sub_50A510@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050A518) --------------------------------------------------------
int __cdecl SEH_441860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A540) --------------------------------------------------------
void __userpurge sub_50A540(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_4027A2);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050A548) --------------------------------------------------------
int __cdecl SEH_442490(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A5A7) --------------------------------------------------------
void __usercall sub_50A5A7(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A5B2) --------------------------------------------------------
void __usercall sub_50A5B2(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A5BD) --------------------------------------------------------
void __usercall sub_50A5BD(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A5C8) --------------------------------------------------------
void __usercall sub_50A5C8(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A5D3) --------------------------------------------------------
void __usercall sub_50A5D3(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050A5DE) --------------------------------------------------------
int __cdecl SEH_445780(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A620) --------------------------------------------------------
void __usercall sub_50A620(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 16));
}

//----- (0050A62B) --------------------------------------------------------
int __cdecl SEH_445D20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A650) --------------------------------------------------------
void __usercall sub_50A650(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 812));
}

//----- (0050A65E) --------------------------------------------------------
void __usercall sub_50A65E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 812));
}

//----- (0050A66C) --------------------------------------------------------
int __cdecl SEH_449010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A6B0) --------------------------------------------------------
void __usercall sub_50A6B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 9356));
}

//----- (0050A6BE) --------------------------------------------------------
void __usercall sub_50A6BE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 9356));
}

//----- (0050A6CC) --------------------------------------------------------
int __cdecl SEH_449C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A710) --------------------------------------------------------
void __usercall sub_50A710(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 308));
}

//----- (0050A71E) --------------------------------------------------------
int __cdecl SEH_44E920(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050A760) --------------------------------------------------------
void __usercall sub_50A760(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1044));
}

//----- (0050A76E) --------------------------------------------------------
void __usercall sub_50A76E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1044));
}

//----- (0050A77C) --------------------------------------------------------
void __usercall sub_50A77C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A78A) --------------------------------------------------------
void __usercall sub_50A78A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A798) --------------------------------------------------------
void __usercall sub_50A798(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7A6) --------------------------------------------------------
void __usercall sub_50A7A6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7B4) --------------------------------------------------------
void __usercall sub_50A7B4(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7C2) --------------------------------------------------------
void __usercall sub_50A7C2(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7D0) --------------------------------------------------------
void __usercall sub_50A7D0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7DE) --------------------------------------------------------
void __usercall sub_50A7DE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7EC) --------------------------------------------------------
void __usercall sub_50A7EC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A7FA) --------------------------------------------------------
void __usercall sub_50A7FA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A808) --------------------------------------------------------
void __usercall sub_50A808(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A816) --------------------------------------------------------
void __usercall sub_50A816(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A824) --------------------------------------------------------
void __usercall sub_50A824(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A832) --------------------------------------------------------
void __usercall sub_50A832(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A840) --------------------------------------------------------
void __usercall sub_50A840(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A84E) --------------------------------------------------------
void __usercall sub_50A84E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A85C) --------------------------------------------------------
void __usercall sub_50A85C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A86A) --------------------------------------------------------
void __usercall sub_50A86A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A878) --------------------------------------------------------
void __usercall sub_50A878(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A886) --------------------------------------------------------
void __usercall sub_50A886(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A894) --------------------------------------------------------
void __usercall sub_50A894(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8A2) --------------------------------------------------------
void __usercall sub_50A8A2(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8B0) --------------------------------------------------------
void __usercall sub_50A8B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8BE) --------------------------------------------------------
void __usercall sub_50A8BE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8CC) --------------------------------------------------------
void __usercall sub_50A8CC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8DA) --------------------------------------------------------
void __usercall sub_50A8DA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8E8) --------------------------------------------------------
void __usercall sub_50A8E8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A8F6) --------------------------------------------------------
void __usercall sub_50A8F6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A904) --------------------------------------------------------
void __usercall sub_50A904(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A912) --------------------------------------------------------
void __usercall sub_50A912(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A920) --------------------------------------------------------
void __usercall sub_50A920(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A92E) --------------------------------------------------------
void __usercall sub_50A92E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A93C) --------------------------------------------------------
void __usercall sub_50A93C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A94A) --------------------------------------------------------
void __usercall sub_50A94A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A958) --------------------------------------------------------
void __usercall sub_50A958(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A966) --------------------------------------------------------
void __usercall sub_50A966(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A974) --------------------------------------------------------
void __usercall sub_50A974(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A982) --------------------------------------------------------
void __usercall sub_50A982(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A990) --------------------------------------------------------
void __usercall sub_50A990(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A99E) --------------------------------------------------------
void __usercall sub_50A99E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A9AC) --------------------------------------------------------
void __usercall sub_50A9AC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A9BA) --------------------------------------------------------
void __usercall sub_50A9BA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A9C8) --------------------------------------------------------
void __usercall sub_50A9C8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 1048));
}

//----- (0050A9D6) --------------------------------------------------------
int __cdecl SEH_44F580(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AAB0) --------------------------------------------------------
void __usercall sub_50AAB0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AABE) --------------------------------------------------------
void __usercall sub_50AABE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AACC) --------------------------------------------------------
void __usercall sub_50AACC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AADA) --------------------------------------------------------
void __usercall sub_50AADA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AAE8) --------------------------------------------------------
void __usercall sub_50AAE8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AAF6) --------------------------------------------------------
void __usercall sub_50AAF6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AB04) --------------------------------------------------------
void __usercall sub_50AB04(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AB12) --------------------------------------------------------
void __usercall sub_50AB12(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AB20) --------------------------------------------------------
void __usercall sub_50AB20(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AB2E) --------------------------------------------------------
void __usercall sub_50AB2E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 788));
}

//----- (0050AB3C) --------------------------------------------------------
int __cdecl SEH_4535A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050ABA0) --------------------------------------------------------
void __usercall sub_50ABA0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABAE) --------------------------------------------------------
void __usercall sub_50ABAE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABBC) --------------------------------------------------------
void __usercall sub_50ABBC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABCA) --------------------------------------------------------
void __usercall sub_50ABCA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABD8) --------------------------------------------------------
void __usercall sub_50ABD8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABE6) --------------------------------------------------------
void __usercall sub_50ABE6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ABF4) --------------------------------------------------------
void __usercall sub_50ABF4(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC02) --------------------------------------------------------
void __usercall sub_50AC02(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC10) --------------------------------------------------------
void __usercall sub_50AC10(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC1E) --------------------------------------------------------
void __usercall sub_50AC1E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC2C) --------------------------------------------------------
void __usercall sub_50AC2C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC3A) --------------------------------------------------------
void __usercall sub_50AC3A(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC48) --------------------------------------------------------
void __usercall sub_50AC48(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC56) --------------------------------------------------------
void __usercall sub_50AC56(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC64) --------------------------------------------------------
void __usercall sub_50AC64(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC72) --------------------------------------------------------
void __usercall sub_50AC72(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC80) --------------------------------------------------------
void __usercall sub_50AC80(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC8E) --------------------------------------------------------
void __usercall sub_50AC8E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050AC9C) --------------------------------------------------------
void __usercall sub_50AC9C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACAA) --------------------------------------------------------
void __usercall sub_50ACAA(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACB8) --------------------------------------------------------
void __usercall sub_50ACB8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACC6) --------------------------------------------------------
void __usercall sub_50ACC6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACD4) --------------------------------------------------------
void __usercall sub_50ACD4(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACE2) --------------------------------------------------------
void __usercall sub_50ACE2(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 2644));
}

//----- (0050ACF0) --------------------------------------------------------
int __cdecl SEH_454790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AD80) --------------------------------------------------------
void __userpurge sub_50AD80(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_4027A2);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050AD88) --------------------------------------------------------
int __cdecl SEH_457BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050ADB0) --------------------------------------------------------
int __usercall sub_50ADB0@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050ADB8) --------------------------------------------------------
int __cdecl SEH_457C90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050ADE0) --------------------------------------------------------
void __usercall sub_50ADE0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050ADEB) --------------------------------------------------------
void __usercall sub_50ADEB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050ADF6) --------------------------------------------------------
void __usercall sub_50ADF6(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050AE38) --------------------------------------------------------
int __cdecl SEH_457E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AE70) --------------------------------------------------------
void __usercall sub_50AE70(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050AE7B) --------------------------------------------------------
int __cdecl SEH_4583C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AEA0) --------------------------------------------------------
void __usercall sub_50AEA0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050AEAB) --------------------------------------------------------
int __cdecl SEH_458A80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AED0) --------------------------------------------------------
void __usercall sub_50AED0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 292));
}

//----- (0050AEDE) --------------------------------------------------------
int __cdecl SEH_458DD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AF20) --------------------------------------------------------
void __usercall sub_50AF20(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 532));
}

//----- (0050AF2E) --------------------------------------------------------
int __cdecl SEH_45BCF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AF70) --------------------------------------------------------
void __usercall sub_50AF70(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050AF7B) --------------------------------------------------------
int __cdecl SEH_45E7B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AFA0) --------------------------------------------------------
void __usercall sub_50AFA0(int a1@<ebp>)
{
  sub_4A71E0(*(_DWORD **)(a1 - 16));
}

//----- (0050AFA8) --------------------------------------------------------
int __cdecl SEH_45F320(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050AFD0) --------------------------------------------------------
void __usercall sub_50AFD0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 68));
}

//----- (0050AFDB) --------------------------------------------------------
int __cdecl SEH_45F3B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B000) --------------------------------------------------------
void __usercall sub_50B000(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 52));
}

//----- (0050B00B) --------------------------------------------------------
int __cdecl SEH_460220(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B030) --------------------------------------------------------
void __usercall sub_50B030(int a1@<ebp>)
{
  sub_4A71E0(*(_DWORD **)(a1 - 28));
}

//----- (0050B038) --------------------------------------------------------
void __usercall sub_50B038(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 40));
}

//----- (0050B043) --------------------------------------------------------
int __cdecl SEH_460F00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B070) --------------------------------------------------------
void __usercall sub_50B070(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 116));
}

//----- (0050B07B) --------------------------------------------------------
int __cdecl SEH_462BC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B0C0) --------------------------------------------------------
void __usercall sub_50B0C0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B0CB) --------------------------------------------------------
void __usercall sub_50B0CB(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B0D6) --------------------------------------------------------
void __usercall sub_50B0D6(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B0E1) --------------------------------------------------------
void __usercall sub_50B0E1(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B0EC) --------------------------------------------------------
void __usercall sub_50B0EC(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B0F7) --------------------------------------------------------
void __usercall sub_50B0F7(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B102) --------------------------------------------------------
void __usercall sub_50B102(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B10D) --------------------------------------------------------
void __usercall sub_50B10D(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B118) --------------------------------------------------------
void __usercall sub_50B118(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B123) --------------------------------------------------------
void __usercall sub_50B123(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B12E) --------------------------------------------------------
void __usercall sub_50B12E(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050B139) --------------------------------------------------------
int __cdecl SEH_463750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B180) --------------------------------------------------------
void __usercall sub_50B180(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050B18B) --------------------------------------------------------
void __usercall sub_50B18B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050B196) --------------------------------------------------------
void __usercall sub_50B196(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050B1A1) --------------------------------------------------------
void __usercall sub_50B1A1(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050B1AC) --------------------------------------------------------
void __usercall sub_50B1AC(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B1B7) --------------------------------------------------------
void __usercall sub_50B1B7(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B1C2) --------------------------------------------------------
int __cdecl SEH_464AE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B200) --------------------------------------------------------
void __usercall sub_50B200(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B20B) --------------------------------------------------------
void __usercall sub_50B20B(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B216) --------------------------------------------------------
int __cdecl SEH_464F20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B240) --------------------------------------------------------
void __usercall sub_50B240(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B24B) --------------------------------------------------------
int __cdecl SEH_465B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B270) --------------------------------------------------------
void __userpurge sub_50B270(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // ecx

  v4 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_4027A2);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B278) --------------------------------------------------------
int __cdecl SEH_466630(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B2A0) --------------------------------------------------------
int __usercall sub_50B2A0@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B2A8) --------------------------------------------------------
int __cdecl SEH_466750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B2D0) --------------------------------------------------------
int __usercall sub_50B2D0@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B2D8) --------------------------------------------------------
int __cdecl SEH_467400(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B300) --------------------------------------------------------
void __usercall sub_50B300(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 16));
}

//----- (0050B30B) --------------------------------------------------------
void __usercall sub_50B30B(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 16));
}

//----- (0050B316) --------------------------------------------------------
int __cdecl SEH_467510(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B340) --------------------------------------------------------
void __usercall sub_50B340(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 36));
}

//----- (0050B34B) --------------------------------------------------------
int __cdecl SEH_4680E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B370) --------------------------------------------------------
void __usercall sub_50B370(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B37B) --------------------------------------------------------
int __cdecl SEH_4693F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B3A0) --------------------------------------------------------
void __usercall sub_50B3A0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (0050B3AE) --------------------------------------------------------
int __cdecl SEH_46AA50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B3F0) --------------------------------------------------------
void __usercall sub_50B3F0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B3FB) --------------------------------------------------------
int __cdecl SEH_46AD50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B420) --------------------------------------------------------
int __usercall sub_50B420@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B428) --------------------------------------------------------
int __cdecl SEH_46B440(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B450) --------------------------------------------------------
void __usercall sub_50B450(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B45B) --------------------------------------------------------
void __usercall sub_50B45B(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B471) --------------------------------------------------------
void __usercall sub_50B471(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B47C) --------------------------------------------------------
void __usercall sub_50B47C(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B487) --------------------------------------------------------
void __usercall sub_50B487(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B492) --------------------------------------------------------
void __usercall sub_50B492(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B49D) --------------------------------------------------------
void __usercall sub_50B49D(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B4A8) --------------------------------------------------------
void __usercall sub_50B4A8(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B4B3) --------------------------------------------------------
void __usercall sub_50B4B3(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B4BE) --------------------------------------------------------
void __usercall sub_50B4BE(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B4C9) --------------------------------------------------------
void __usercall sub_50B4C9(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B4D4) --------------------------------------------------------
int __cdecl SEH_46B8B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B520) --------------------------------------------------------
void __usercall sub_50B520(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B52B) --------------------------------------------------------
int __cdecl SEH_46C180(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B550) --------------------------------------------------------
void __usercall sub_50B550(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 16));
}

//----- (0050B55B) --------------------------------------------------------
int __cdecl SEH_46C750(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B580) --------------------------------------------------------
int __usercall sub_50B580@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B588) --------------------------------------------------------
int __cdecl SEH_46CC80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B5B0) --------------------------------------------------------
void __usercall sub_50B5B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B5BB) --------------------------------------------------------
int __cdecl SEH_46D040(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B5E0) --------------------------------------------------------
void __usercall sub_50B5E0(int a1@<ebp>)
{
  sub_4A71E0(*(_DWORD **)(a1 - 16));
}

//----- (0050B5E8) --------------------------------------------------------
int __cdecl SEH_46D600(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B610) --------------------------------------------------------
void __usercall sub_50B610(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B61B) --------------------------------------------------------
int __cdecl SEH_46E940(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B640) --------------------------------------------------------
void __usercall sub_50B640(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B64B) --------------------------------------------------------
int __cdecl SEH_472960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B670) --------------------------------------------------------
void __usercall sub_50B670(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 12));
}

//----- (0050B67B) --------------------------------------------------------
int __cdecl SEH_472C80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B700) --------------------------------------------------------
void __usercall sub_50B700(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050B70B) --------------------------------------------------------
int __cdecl SEH_478160(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B730) --------------------------------------------------------
int __usercall sub_50B730@<eax>(int a1@<ebp>)
{
  return sub_4027B1(*(_DWORD *)(a1 - 16));
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);

//----- (0050B738) --------------------------------------------------------
int __cdecl SEH_478700(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B760) --------------------------------------------------------
void __usercall sub_50B760(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 36));
}

//----- (0050B76B) --------------------------------------------------------
void __usercall sub_50B76B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 64));
}

//----- (0050B776) --------------------------------------------------------
void __usercall sub_50B776(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 48));
}

//----- (0050B781) --------------------------------------------------------
void __usercall sub_50B781(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 56));
}

//----- (0050B78C) --------------------------------------------------------
int __cdecl SEH_479B30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B7C0) --------------------------------------------------------
int __usercall sub_50B7C0@<eax>(int a1@<ebp>)
{
  return sub_4027B1(*(_DWORD *)(a1 - 16));
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);

//----- (0050B7C8) --------------------------------------------------------
int __cdecl SEH_47C7B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B7F0) --------------------------------------------------------
int __usercall sub_50B7F0@<eax>(int a1@<ebp>)
{
  return sub_4027B1(*(_DWORD *)(a1 - 16));
}
// 4027B1: using guessed type int __thiscall sub_4027B1(_DWORD);

//----- (0050B7F8) --------------------------------------------------------
int __cdecl SEH_47E6A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B820) --------------------------------------------------------
void __usercall sub_50B820(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B82B) --------------------------------------------------------
void __usercall sub_50B82B(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B836) --------------------------------------------------------
void __usercall sub_50B836(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B841) --------------------------------------------------------
int __cdecl SEH_47E8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B870) --------------------------------------------------------
void __usercall sub_50B870(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050B87B) --------------------------------------------------------
int __cdecl SEH_47F4C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B8A0) --------------------------------------------------------
void __usercall sub_50B8A0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 12));
}

//----- (0050B8AB) --------------------------------------------------------
int __cdecl SEH_47F7C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B8D0) --------------------------------------------------------
int __usercall sub_50B8D0@<eax>(int a1@<ebp>)
{
  return sub_4027A2(*(_DWORD *)(a1 - 16));
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B8D8) --------------------------------------------------------
int __cdecl SEH_47F980(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B900) --------------------------------------------------------
void __userpurge sub_50B900(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ecx

  v5 = *(_DWORD *)(a1 - 36);
  JUMPOUT(sub_4027A2);
}
// 4027A2: using guessed type int __thiscall sub_4027A2(_DWORD);

//----- (0050B908) --------------------------------------------------------
int __cdecl SEH_47FA60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B940) --------------------------------------------------------
void __usercall sub_50B940(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 12));
}

//----- (0050B94B) --------------------------------------------------------
void __usercall sub_50B94B(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 36));
}

//----- (0050B956) --------------------------------------------------------
void __usercall sub_50B956(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 12));
}

//----- (0050B961) --------------------------------------------------------
int __cdecl SEH_47FD20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B990) --------------------------------------------------------
void __usercall sub_50B990(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0050B998) --------------------------------------------------------
int __cdecl SEH_480DB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B9C0) --------------------------------------------------------
void __usercall sub_50B9C0(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0050B9C8) --------------------------------------------------------
int __cdecl SEH_480E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050B9F0) --------------------------------------------------------
void __usercall sub_50B9F0(int a1@<ebp>)
{
  sub_480DB0(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050B9F8) --------------------------------------------------------
int __cdecl SEH_480B50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BA13) --------------------------------------------------------
void __usercall sub_50BA13(int a1@<ebp>)
{
  sub_480DB0(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050BA1B) --------------------------------------------------------
int __cdecl SEH_480BD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BA36) --------------------------------------------------------
void __usercall sub_50BA36(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 420) = &UdpLibrary::UdpDriver::`vftable';
}
// 51826C: using guessed type void *UdpLibrary::UdpDriver::`vftable';

//----- (0050BA41) --------------------------------------------------------
void __usercall sub_50BA41(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 424));
}

//----- (0050BA4F) --------------------------------------------------------
int __cdecl SEH_480C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BA7D) --------------------------------------------------------
void __usercall sub_50BA7D(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &UdpLibrary::UdpDriver::`vftable';
}
// 51826C: using guessed type void *UdpLibrary::UdpDriver::`vftable';

//----- (0050BA85) --------------------------------------------------------
int __cdecl SEH_480D30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BAA0) --------------------------------------------------------
void __usercall sub_50BAA0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050BAAB) --------------------------------------------------------
void __usercall sub_50BAAB(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050BAB6) --------------------------------------------------------
void __usercall sub_50BAB6(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050BAC1) --------------------------------------------------------
void __usercall sub_50BAC1(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050BACC) --------------------------------------------------------
void __usercall sub_50BACC(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050BAD7) --------------------------------------------------------
int __cdecl SEH_4811C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BB00) --------------------------------------------------------
int __cdecl sub_50BB00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BB29) --------------------------------------------------------
int __cdecl sub_50BB29(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BB51) --------------------------------------------------------
int __cdecl sub_50BB51(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BB70) --------------------------------------------------------
void sub_50BB70()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BB78) --------------------------------------------------------
int __cdecl SEH_481B90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BBA0) --------------------------------------------------------
void sub_50BBA0()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BBA8) --------------------------------------------------------
int __cdecl SEH_481C40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BBD0) --------------------------------------------------------
void sub_50BBD0()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BBD8) --------------------------------------------------------
int __cdecl SEH_481CF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BC00) --------------------------------------------------------
void sub_50BC00()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BC08) --------------------------------------------------------
int __cdecl SEH_481DA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BC30) --------------------------------------------------------
void sub_50BC30()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BC38) --------------------------------------------------------
int __cdecl SEH_481E80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BC60) --------------------------------------------------------
void sub_50BC60()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BC68) --------------------------------------------------------
int __cdecl SEH_481F90(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BC90) --------------------------------------------------------
void __stdcall sub_50BC90(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BC98) --------------------------------------------------------
int __cdecl SEH_482190(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BCB3) --------------------------------------------------------
void __stdcall sub_50BCB3(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BCBB) --------------------------------------------------------
int __cdecl SEH_4829F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BCE1) --------------------------------------------------------
int __cdecl sub_50BCE1(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BD0F) --------------------------------------------------------
void sub_50BD0F()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BD17) --------------------------------------------------------
int __cdecl SEH_482D50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BD32) --------------------------------------------------------
void sub_50BD32()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BD3A) --------------------------------------------------------
int __cdecl SEH_482DD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BD55) --------------------------------------------------------
void __stdcall sub_50BD55(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BD5D) --------------------------------------------------------
int __cdecl SEH_482E50(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BD78) --------------------------------------------------------
void __stdcall sub_50BD78(int a1, int a2, int a3)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BD80) --------------------------------------------------------
int __cdecl SEH_482EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BD9B) --------------------------------------------------------
void __usercall sub_50BD9B(int a1@<ebp>)
{
  sub_480DB0(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050BDA3) --------------------------------------------------------
void __usercall sub_50BDA3(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 548));
}

//----- (0050BDB1) --------------------------------------------------------
void __usercall sub_50BDB1(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 552));
}

//----- (0050BDBF) --------------------------------------------------------
void sub_50BDBF()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BDC7) --------------------------------------------------------
void __usercall sub_50BDC7(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0050BDCF) --------------------------------------------------------
int __cdecl SEH_483180(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BDEA) --------------------------------------------------------
void sub_50BDEA()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BDF2) --------------------------------------------------------
int __cdecl SEH_483560(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BE0D) --------------------------------------------------------
void __stdcall sub_50BE0D(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BE15) --------------------------------------------------------
int __cdecl SEH_483870(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BE30) --------------------------------------------------------
void __usercall sub_50BE30(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 8216));
}

//----- (0050BE3E) --------------------------------------------------------
int __cdecl SEH_483A00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BE6C) --------------------------------------------------------
void __stdcall sub_50BE6C(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BE74) --------------------------------------------------------
int __cdecl SEH_483D60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BE8F) --------------------------------------------------------
void __stdcall sub_50BE8F(int a1, int a2, int a3)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BE97) --------------------------------------------------------
int __cdecl SEH_483E60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BEB2) --------------------------------------------------------
void sub_50BEB2()
{
  JUMPOUT(&loc_404490);
}

//----- (0050BEBA) --------------------------------------------------------
int __cdecl SEH_483F30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BED5) --------------------------------------------------------
void __usercall sub_50BED5(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (0050BEE3) --------------------------------------------------------
int __cdecl SEH_484010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BF11) --------------------------------------------------------
void __stdcall sub_50BF11(int a1)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050BF1C) --------------------------------------------------------
void __stdcall sub_50BF1C(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BF27) --------------------------------------------------------
int __cdecl SEH_485030(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BF55) --------------------------------------------------------
void __stdcall sub_50BF55(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BF5D) --------------------------------------------------------
void __stdcall sub_50BF5D(int a1, int a2, int a3, int a4)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050BF65) --------------------------------------------------------
int __cdecl SEH_485440(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BF80) --------------------------------------------------------
void __userpurge sub_50BF80(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ecx

  v5 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_480DB0);
}

//----- (0050BF88) --------------------------------------------------------
void __userpurge sub_50BF88(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050BF96) --------------------------------------------------------
void __userpurge sub_50BF96(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050BFA4) --------------------------------------------------------
void __stdcall sub_50BFA4(int a1, int a2)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050BFAC) --------------------------------------------------------
void __stdcall sub_50BFAC(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050BFB4) --------------------------------------------------------
int __cdecl SEH_485510(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050BFCF) --------------------------------------------------------
void __userpurge sub_50BFCF(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 20);
  JUMPOUT(sub_480DB0);
}

//----- (0050BFD7) --------------------------------------------------------
void __userpurge sub_50BFD7(int a1@<ebp>, int a2)
{
  int v2; // ecx

  v2 = *(_DWORD *)(a1 - 20);
  JUMPOUT(sub_4808C0);
}

//----- (0050BFE5) --------------------------------------------------------
void __userpurge sub_50BFE5(int a1@<ebp>, int a2)
{
  int v2; // ecx

  v2 = *(_DWORD *)(a1 - 20);
  JUMPOUT(sub_4808C0);
}

//----- (0050BFF3) --------------------------------------------------------
void __stdcall sub_50BFF3(int a1)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050BFFB) --------------------------------------------------------
void sub_50BFFB()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C003) --------------------------------------------------------
void sub_50C003()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C00B) --------------------------------------------------------
void __stdcall sub_50C00B(int a1)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050C013) --------------------------------------------------------
int __cdecl SEH_485640(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C02E) --------------------------------------------------------
void __stdcall sub_50C02E(int a1)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050C036) --------------------------------------------------------
void sub_50C036()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C03E) --------------------------------------------------------
int __cdecl SEH_485840(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C060) --------------------------------------------------------
void sub_50C060()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C068) --------------------------------------------------------
int __cdecl SEH_486010(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C08E) --------------------------------------------------------
int __cdecl sub_50C08E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C0BC) --------------------------------------------------------
void __usercall sub_50C0BC(int a1@<ebp>)
{
  sub_480B50(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050C0C4) --------------------------------------------------------
int __cdecl SEH_486660(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C0DF) --------------------------------------------------------
void sub_50C0DF()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C0E7) --------------------------------------------------------
int __cdecl SEH_486770(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C102) --------------------------------------------------------
void __stdcall sub_50C102(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C10A) --------------------------------------------------------
int __cdecl SEH_486880(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C12D) --------------------------------------------------------
int __cdecl sub_50C12D(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C150) --------------------------------------------------------
int __cdecl sub_50C150(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C16B) --------------------------------------------------------
void __stdcall sub_50C16B(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C173) --------------------------------------------------------
int __cdecl SEH_486B10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C196) --------------------------------------------------------
int __cdecl sub_50C196(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C1B1) --------------------------------------------------------
void __stdcall sub_50C1B1(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C1B9) --------------------------------------------------------
int __cdecl SEH_486CF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C1D4) --------------------------------------------------------
void __stdcall sub_50C1D4(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C1DC) --------------------------------------------------------
int __cdecl SEH_486E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C1F7) --------------------------------------------------------
void __stdcall sub_50C1F7(int a1, int a2, int a3, int a4)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C1FF) --------------------------------------------------------
void __usercall sub_50C1FF(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 16));
}

//----- (0050C20A) --------------------------------------------------------
int __cdecl SEH_486EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C225) --------------------------------------------------------
void __stdcall sub_50C225(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C22D) --------------------------------------------------------
int __cdecl SEH_487070(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C25B) --------------------------------------------------------
int __cdecl sub_50C25B(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C27E) --------------------------------------------------------
int __cdecl sub_50C27E(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C299) --------------------------------------------------------
void __usercall sub_50C299(int a1@<ebp>)
{
  sub_480B50(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050C2A1) --------------------------------------------------------
int __cdecl SEH_487370(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C2BC) --------------------------------------------------------
void __userpurge sub_50C2BC(int a1@<ebp>, int a2)
{
  int v2; // ecx

  v2 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_480DB0);
}

//----- (0050C2C4) --------------------------------------------------------
void __usercall sub_50C2C4(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 440) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
}
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';

//----- (0050C2D2) --------------------------------------------------------
void __usercall sub_50C2D2(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 472) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
}
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';

//----- (0050C2E0) --------------------------------------------------------
void __userpurge sub_50C2E0(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C2EE) --------------------------------------------------------
void __userpurge sub_50C2EE(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C2FC) --------------------------------------------------------
void __userpurge sub_50C2FC(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C30A) --------------------------------------------------------
void __userpurge sub_50C30A(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C318) --------------------------------------------------------
void __userpurge sub_50C318(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C326) --------------------------------------------------------
void __userpurge sub_50C326(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C334) --------------------------------------------------------
void __userpurge sub_50C334(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C342) --------------------------------------------------------
void __userpurge sub_50C342(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C350) --------------------------------------------------------
void __userpurge sub_50C350(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C35E) --------------------------------------------------------
void __userpurge sub_50C35E(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C36C) --------------------------------------------------------
void __userpurge sub_50C36C(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 24);
  JUMPOUT(sub_4808C0);
}

//----- (0050C37A) --------------------------------------------------------
void __usercall sub_50C37A(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 840) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
}
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';

//----- (0050C388) --------------------------------------------------------
void __usercall sub_50C388(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 860) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
}
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';

//----- (0050C396) --------------------------------------------------------
void __usercall sub_50C396(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 880) = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
}
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';

//----- (0050C3A4) --------------------------------------------------------
void __usercall sub_50C3A4(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 900) = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
}
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';

//----- (0050C3B2) --------------------------------------------------------
void __usercall sub_50C3B2(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 920) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
}
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';

//----- (0050C3C0) --------------------------------------------------------
void __usercall sub_50C3C0(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 24) + 940) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
}
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';

//----- (0050C3CE) --------------------------------------------------------
void __usercall sub_50C3CE(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050C3D9) --------------------------------------------------------
void __usercall sub_50C3D9(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050C3E4) --------------------------------------------------------
void __usercall sub_50C3E4(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050C3EF) --------------------------------------------------------
void __usercall sub_50C3EF(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050C3FA) --------------------------------------------------------
void __usercall sub_50C3FA(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050C405) --------------------------------------------------------
void __usercall sub_50C405(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 20));
}

//----- (0050C410) --------------------------------------------------------
int __cdecl SEH_487400(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C42B) --------------------------------------------------------
void __stdcall sub_50C42B(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C433) --------------------------------------------------------
int __cdecl SEH_487A70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C44E) --------------------------------------------------------
void __stdcall sub_50C44E(int a1, int a2, int a3)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C459) --------------------------------------------------------
void __usercall sub_50C459(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 540));
}

//----- (0050C467) --------------------------------------------------------
int __cdecl SEH_487B20(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C495) --------------------------------------------------------
void __usercall sub_50C495(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 24));
}

//----- (0050C4A0) --------------------------------------------------------
int __cdecl SEH_487CB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C4BB) --------------------------------------------------------
void __stdcall sub_50C4BB(int a1, int a2, int a3, int a4)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C4C3) --------------------------------------------------------
void sub_50C4C3()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C4CB) --------------------------------------------------------
void __usercall sub_50C4CB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 28));
}

//----- (0050C4D6) --------------------------------------------------------
int __cdecl SEH_487F10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C4F1) --------------------------------------------------------
void sub_50C4F1()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C4F9) --------------------------------------------------------
int __cdecl SEH_4881B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C514) --------------------------------------------------------
void sub_50C514()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C51C) --------------------------------------------------------
int __cdecl SEH_488260(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C537) --------------------------------------------------------
void __stdcall sub_50C537(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C53F) --------------------------------------------------------
int __cdecl SEH_488530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C55A) --------------------------------------------------------
void __usercall sub_50C55A(int a1@<ebp>)
{
  sub_480DB0(*(LPCRITICAL_SECTION **)(a1 - 16));
}

//----- (0050C562) --------------------------------------------------------
void __usercall sub_50C562(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 440) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
}
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';

//----- (0050C570) --------------------------------------------------------
void __usercall sub_50C570(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 472) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';
}
// 518644: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpConnection>::`vftable';

//----- (0050C57E) --------------------------------------------------------
void __usercall sub_50C57E(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 576));
}

//----- (0050C58C) --------------------------------------------------------
void __usercall sub_50C58C(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 580));
}

//----- (0050C59A) --------------------------------------------------------
void __usercall sub_50C59A(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 584));
}

//----- (0050C5A8) --------------------------------------------------------
void __usercall sub_50C5A8(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 588));
}

//----- (0050C5B6) --------------------------------------------------------
void __usercall sub_50C5B6(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 592));
}

//----- (0050C5C4) --------------------------------------------------------
void __usercall sub_50C5C4(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 596));
}

//----- (0050C5D2) --------------------------------------------------------
void __usercall sub_50C5D2(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 600));
}

//----- (0050C5E0) --------------------------------------------------------
void __usercall sub_50C5E0(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 604));
}

//----- (0050C5EE) --------------------------------------------------------
void __usercall sub_50C5EE(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 608));
}

//----- (0050C5FC) --------------------------------------------------------
void __usercall sub_50C5FC(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 612));
}

//----- (0050C60A) --------------------------------------------------------
void __usercall sub_50C60A(int a1@<ebp>)
{
  sub_4808C0((LPCRITICAL_SECTION *)(*(_DWORD *)(a1 - 16) + 616));
}

//----- (0050C618) --------------------------------------------------------
void __usercall sub_50C618(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 840) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
}
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';

//----- (0050C626) --------------------------------------------------------
void __usercall sub_50C626(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 860) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';
}
// 51864C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::SimulateQueueEntry>::`vftable';

//----- (0050C634) --------------------------------------------------------
void __usercall sub_50C634(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 880) = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
}
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';

//----- (0050C642) --------------------------------------------------------
void __usercall sub_50C642(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 900) = &UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';
}
// 518654: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::PooledLogicalPacket>::`vftable';

//----- (0050C650) --------------------------------------------------------
void __usercall sub_50C650(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 920) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
}
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';

//----- (0050C65E) --------------------------------------------------------
void __usercall sub_50C65E(int a1@<ebp>)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 940) = &UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';
}
// 51865C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::UdpManager::CallbackEvent>::`vftable';

//----- (0050C66C) --------------------------------------------------------
void sub_50C66C()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C674) --------------------------------------------------------
void sub_50C674()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C67C) --------------------------------------------------------
void sub_50C67C()
{
  JUMPOUT(&loc_404490);
}

//----- (0050C684) --------------------------------------------------------
void __usercall sub_50C684(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &UdpLibrary::UdpRefCount::`vftable';
}
// 518254: using guessed type void *UdpLibrary::UdpRefCount::`vftable';

//----- (0050C68C) --------------------------------------------------------
int __cdecl SEH_488620(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C6A7) --------------------------------------------------------
void __usercall sub_50C6A7(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 32));
}

//----- (0050C6B2) --------------------------------------------------------
void __stdcall sub_50C6B2(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C6BA) --------------------------------------------------------
int __cdecl SEH_4889A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C6E2) --------------------------------------------------------
void __stdcall sub_50C6E2(int a1)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050C6EA) --------------------------------------------------------
void __stdcall sub_50C6EA(int a1, int a2)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C6F2) --------------------------------------------------------
int __cdecl SEH_488CA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C70D) --------------------------------------------------------
void __stdcall sub_50C70D(int a1, int a2)
{
  JUMPOUT(&loc_4044C0);
}

//----- (0050C715) --------------------------------------------------------
void __stdcall sub_50C715(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C71D) --------------------------------------------------------
void __stdcall sub_50C71D(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C725) --------------------------------------------------------
int __cdecl SEH_488ED0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C740) --------------------------------------------------------
void __stdcall sub_50C740(int a1)
{
  JUMPOUT(&loc_404490);
}

//----- (0050C748) --------------------------------------------------------
int __cdecl SEH_48A0A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C770) --------------------------------------------------------
void __userpurge sub_50C770(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_48A770);
}

//----- (0050C778) --------------------------------------------------------
int __cdecl SEH_48A780(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C793) --------------------------------------------------------
void __usercall sub_50C793(int a1@<ebp>)
{
  sub_48A770(*(_DWORD **)(a1 - 16));
}

//----- (0050C79B) --------------------------------------------------------
int __cdecl SEH_48A810(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C7B6) --------------------------------------------------------
void __usercall sub_50C7B6(int a1@<ebp>)
{
  sub_48A770(*(_DWORD **)(a1 - 16));
}

//----- (0050C7BE) --------------------------------------------------------
int __cdecl SEH_48A8A0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C7D9) --------------------------------------------------------
void __userpurge sub_50C7D9(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx

  v3 = *(_DWORD *)(a1 - 16);
  JUMPOUT(sub_48A770);
}

//----- (0050C7E1) --------------------------------------------------------
int __cdecl SEH_48A960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C7FC) --------------------------------------------------------
void __usercall sub_50C7FC(int a1@<ebp>)
{
  sub_48A770(*(_DWORD **)(a1 - 16));
}

//----- (0050C804) --------------------------------------------------------
int __cdecl SEH_48A9F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C820) --------------------------------------------------------
void __userpurge sub_50C820(int a1@<ebp>, int a2, int a3, int a4)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 148) = &UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';
}
// 51872C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';

//----- (0050C82E) --------------------------------------------------------
void __usercall sub_50C82E(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050C839) --------------------------------------------------------
void __usercall sub_50C839(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050C844) --------------------------------------------------------
int __cdecl SEH_48AD40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C85F) --------------------------------------------------------
void __userpurge sub_50C85F(int a1@<ebp>, int a2, int a3, int a4)
{
  *(_DWORD *)(*(_DWORD *)(a1 - 16) + 148) = &UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';
}
// 51872C: using guessed type void *UdpLibrary::UdpLinkedList<UdpLibrary::LogicalPacket>::`vftable';

//----- (0050C86D) --------------------------------------------------------
int __cdecl SEH_48B470(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C890) --------------------------------------------------------
void __usercall sub_50C890(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 8212));
}

//----- (0050C89E) --------------------------------------------------------
int __cdecl SEH_48EA00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C8D0) --------------------------------------------------------
int __usercall sub_50C8D0@<eax>(int a1@<ebp>)
{
  return nullsub_2(*(_DWORD *)(a1 - 16) + 12);
}
// 4AA7A0: using guessed type int __cdecl nullsub_2(_DWORD);

//----- (0050C8DB) --------------------------------------------------------
void __usercall sub_50C8DB(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C8E6) --------------------------------------------------------
void __usercall sub_50C8E6(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C8F1) --------------------------------------------------------
void __usercall sub_50C8F1(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C8FC) --------------------------------------------------------
int __cdecl SEH_48EDE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C920) --------------------------------------------------------
void __usercall sub_50C920(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C92B) --------------------------------------------------------
void __usercall sub_50C92B(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C936) --------------------------------------------------------
void __usercall sub_50C936(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C941) --------------------------------------------------------
void __usercall sub_50C941(int a1@<ebp>)
{
  int v1; // ecx

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_416BA0);
}

//----- (0050C94C) --------------------------------------------------------
int __cdecl SEH_48EEF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C970) --------------------------------------------------------
int __usercall sub_50C970@<eax>(int a1@<ebp>)
{
  return sub_48EEF0((char *)(*(_DWORD *)(a1 - 8272) + 244));
}

//----- (0050C981) --------------------------------------------------------
int __cdecl SEH_491B60(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C9AF) --------------------------------------------------------
int __usercall sub_50C9AF@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 276);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050C9BA) --------------------------------------------------------
int __cdecl SEH_491EE0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050C9E8) --------------------------------------------------------
int __usercall sub_50C9E8@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 16);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050C9F0) --------------------------------------------------------
int __cdecl SEH_491FD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CA0B) --------------------------------------------------------
int __usercall sub_50CA0B@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 80);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050CA13) --------------------------------------------------------
int __cdecl SEH_4920F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CA3B) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CA43) --------------------------------------------------------
int __cdecl SEH_492530(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CA5E) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CA66) --------------------------------------------------------
int __cdecl SEH_4926F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CA81) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CA89) --------------------------------------------------------
int __cdecl SEH_492820(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CAA4) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CAAC) --------------------------------------------------------
int __cdecl SEH_4929C0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CAC7) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CACF) --------------------------------------------------------
int __cdecl SEH_492B40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CAEA) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CAF2) --------------------------------------------------------
int __cdecl SEH_492BB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CB0D) --------------------------------------------------------
int __usercall sub_50CB0D@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 16);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050CB15) --------------------------------------------------------
int __cdecl SEH_492C30(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CB30) --------------------------------------------------------
int __usercall sub_50CB30@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 16);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050CB38) --------------------------------------------------------
int __cdecl SEH_492CD0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CB53) --------------------------------------------------------
#error "48F5E0: positive sp value has been found (funcsize=12)"

//----- (0050CB5B) --------------------------------------------------------
int __cdecl SEH_492DB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CB76) --------------------------------------------------------
int __usercall sub_50CB76@<eax>(int a1@<ebp>)
{
  int v1; // esi
  void *v2; // ST00_4

  v1 = *(_DWORD *)(a1 - 16);
  v2 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &Item::`vftable';
  free(v2);
  return sub_48EEF0((char *)(v1 + 244));
}
// 518D90: using guessed type void *Item::`vftable';

//----- (0050CB7E) --------------------------------------------------------
int __cdecl SEH_493580(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CB99) --------------------------------------------------------
void __usercall sub_50CB99(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBA4) --------------------------------------------------------
void __usercall sub_50CBA4(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBAF) --------------------------------------------------------
void __usercall sub_50CBAF(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBBA) --------------------------------------------------------
void __usercall sub_50CBBA(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBC5) --------------------------------------------------------
void __usercall sub_50CBC5(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBD0) --------------------------------------------------------
void __usercall sub_50CBD0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBDB) --------------------------------------------------------
void __usercall sub_50CBDB(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBE6) --------------------------------------------------------
void __usercall sub_50CBE6(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBF1) --------------------------------------------------------
void __usercall sub_50CBF1(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CBFC) --------------------------------------------------------
void __usercall sub_50CBFC(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CC07) --------------------------------------------------------
void __usercall sub_50CC07(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CC12) --------------------------------------------------------
void __usercall sub_50CC12(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CC1D) --------------------------------------------------------
void __usercall sub_50CC1D(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CC28) --------------------------------------------------------
int __cdecl SEH_493870(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CC50) --------------------------------------------------------
void __usercall sub_50CC50(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 420));
}

//----- (0050CC5E) --------------------------------------------------------
int __cdecl SEH_4955D0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CC90) --------------------------------------------------------
void __usercall sub_50CC90(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &HitTester::`vftable';
}
// 51D284: using guessed type void *HitTester::`vftable';

//----- (0050CC98) --------------------------------------------------------
int __cdecl SEH_49A640(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CCC0) --------------------------------------------------------
void __usercall sub_50CCC0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 232));
}

//----- (0050CCCE) --------------------------------------------------------
int __cdecl SEH_49CFB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CCEF) --------------------------------------------------------
void __userpurge sub_50CCEF(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  **(_DWORD **)(a1 - 276) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CCFA) --------------------------------------------------------
int __cdecl SEH_49D560(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CD28) --------------------------------------------------------
void __usercall sub_50CD28(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 16));
}

//----- (0050CD30) --------------------------------------------------------
int __cdecl SEH_49DAB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CD4B) --------------------------------------------------------
void __userpurge sub_50CD4B(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  **(_DWORD **)(a1 - 16) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CD53) --------------------------------------------------------
int __cdecl SEH_49EEA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CD6E) --------------------------------------------------------
void __userpurge sub_50CD6E(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  **(_DWORD **)(a1 - 16) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CD76) --------------------------------------------------------
int __cdecl SEH_49F860(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CD91) --------------------------------------------------------
void __usercall sub_50CD91(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CD99) --------------------------------------------------------
int __cdecl SEH_49FA40(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CDB4) --------------------------------------------------------
void __usercall sub_50CDB4(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 32));
}

//----- (0050CDBC) --------------------------------------------------------
int __cdecl SEH_49FBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CDD7) --------------------------------------------------------
void __usercall sub_50CDD7(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 32));
}

//----- (0050CDDF) --------------------------------------------------------
int __cdecl SEH_49FCA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CDFA) --------------------------------------------------------
void __userpurge sub_50CDFA(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7)
{
  **(_DWORD **)(a1 - 384) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CE05) --------------------------------------------------------
void __usercall sub_50CE05(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 388));
}

//----- (0050CE13) --------------------------------------------------------
int __cdecl SEH_4A04F0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CE41) --------------------------------------------------------
void __usercall sub_50CE41(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050CE4C) --------------------------------------------------------
void __usercall sub_50CE4C(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 8));
}

//----- (0050CE57) --------------------------------------------------------
int __cdecl SEH_4A0800(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CE72) --------------------------------------------------------
void __userpurge sub_50CE72(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  **(_DWORD **)(a1 - 16) = &Surface::`vftable';
}
// 51D684: using guessed type void *Surface::`vftable';

//----- (0050CE7A) --------------------------------------------------------
int __cdecl SEH_4A0990(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CEA0) --------------------------------------------------------
void __usercall sub_50CEA0(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 16));
}

//----- (0050CEA8) --------------------------------------------------------
int __cdecl SEH_4A4210(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CEC3) --------------------------------------------------------
void __usercall sub_50CEC3(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 1236));
}

//----- (0050CECE) --------------------------------------------------------
int __cdecl SEH_4A5420(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CEFC) --------------------------------------------------------
void __usercall sub_50CEFC(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 16));
}

//----- (0050CF04) --------------------------------------------------------
int __cdecl SEH_4A5790(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CF1F) --------------------------------------------------------
void __usercall sub_50CF1F(int a1@<ebp>)
{
  sub_49B710(*(_DWORD **)(a1 - 20));
}

//----- (0050CF27) --------------------------------------------------------
int __cdecl SEH_4A5890(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CF50) --------------------------------------------------------
void __usercall sub_50CF50(int a1@<ebp>)
{
  j_j__free(*(void **)(a1 - 36));
}

//----- (0050CF5B) --------------------------------------------------------
int __cdecl SEH_4A7C00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CF83) --------------------------------------------------------
void __usercall sub_50CF83(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050CF8E) --------------------------------------------------------
void __usercall sub_50CF8E(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 20));
}

//----- (0050CF99) --------------------------------------------------------
int __cdecl SEH_4A8280(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CFC0) --------------------------------------------------------
void __usercall sub_50CFC0(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050CFCB) --------------------------------------------------------
int __cdecl SEH_4A9D00(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050CFF0) --------------------------------------------------------
void __usercall sub_50CFF0(int a1@<ebp>)
{
  sub_4B4FE0(*(void ***)(a1 - 160020));
}

//----- (0050CFFB) --------------------------------------------------------
void __usercall sub_50CFFB(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160032));
}

//----- (0050D009) --------------------------------------------------------
void __usercall sub_50D009(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160032));
}

//----- (0050D017) --------------------------------------------------------
void __usercall sub_50D017(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160032));
}

//----- (0050D025) --------------------------------------------------------
void __usercall sub_50D025(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160044));
}

//----- (0050D033) --------------------------------------------------------
void __usercall sub_50D033(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160024));
}

//----- (0050D041) --------------------------------------------------------
void __usercall sub_50D041(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160024));
}

//----- (0050D04F) --------------------------------------------------------
void __usercall sub_50D04F(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 160024));
}

//----- (0050D05D) --------------------------------------------------------
int __cdecl SEH_4AC960(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D08B) --------------------------------------------------------
void __usercall sub_50D08B(int a1@<ebp>)
{
  sub_4B4FE0(*(void ***)(a1 - 16));
}

//----- (0050D093) --------------------------------------------------------
int __cdecl SEH_4ACEA0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D0B0) --------------------------------------------------------
void __userpurge sub_50D0B0(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 276) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D0BB) --------------------------------------------------------
int __cdecl SEH_4AD220(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D0E9) --------------------------------------------------------
void __userpurge sub_50D0E9(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D0F1) --------------------------------------------------------
int __cdecl SEH_4AD430(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D10C) --------------------------------------------------------
void __userpurge sub_50D10C(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D114) --------------------------------------------------------
int __cdecl SEH_4AD8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D12F) --------------------------------------------------------
void __userpurge sub_50D12F(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D137) --------------------------------------------------------
int __cdecl SEH_4ADDF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D152) --------------------------------------------------------
void __userpurge sub_50D152(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D15A) --------------------------------------------------------
int __cdecl SEH_4AE140(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D175) --------------------------------------------------------
void __userpurge sub_50D175(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D17D) --------------------------------------------------------
int __cdecl SEH_4AE600(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D198) --------------------------------------------------------
void __userpurge sub_50D198(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D1A0) --------------------------------------------------------
int __cdecl SEH_4AE8E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D1BB) --------------------------------------------------------
void __userpurge sub_50D1BB(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D1C3) --------------------------------------------------------
int __cdecl SEH_4AEBC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D1DE) --------------------------------------------------------
void __userpurge sub_50D1DE(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D1E6) --------------------------------------------------------
int __cdecl SEH_4AF320(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D201) --------------------------------------------------------
void __userpurge sub_50D201(int a1@<ebp>, int a2)
{
  **(_DWORD **)(a1 - 16) = &Lio::`vftable';
}
// 51E8F4: using guessed type void *Lio::`vftable';

//----- (0050D209) --------------------------------------------------------
int __cdecl SEH_4AF630(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D224) --------------------------------------------------------
void __usercall sub_50D224(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D22F) --------------------------------------------------------
void __usercall sub_50D22F(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D23A) --------------------------------------------------------
void __usercall sub_50D23A(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D245) --------------------------------------------------------
void __usercall sub_50D245(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D250) --------------------------------------------------------
void __usercall sub_50D250(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D25B) --------------------------------------------------------
void __usercall sub_50D25B(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D266) --------------------------------------------------------
void __usercall sub_50D266(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D271) --------------------------------------------------------
void __usercall sub_50D271(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D27C) --------------------------------------------------------
void __usercall sub_50D27C(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D287) --------------------------------------------------------
void __usercall sub_50D287(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D292) --------------------------------------------------------
int __cdecl SEH_4AF7E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D2B0) --------------------------------------------------------
void __userpurge sub_50D2B0(int a1@<ebp>, int a2)
{
  void *v2; // ST00_4
  _DWORD *v3; // ecx

  v3 = *(_DWORD **)(a1 - 16);
  v2 = (void *)v3[1];
  *v3 = &VItem::`vftable';
  free(v2);
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (0050D2B8) --------------------------------------------------------
int __cdecl SEH_4B0FB0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D2D3) --------------------------------------------------------
void __userpurge sub_50D2D3(int a1@<ebp>, int a2)
{
  void *v2; // ST00_4
  _DWORD *v3; // ecx

  v3 = *(_DWORD **)(a1 - 16);
  v2 = (void *)v3[1];
  *v3 = &VItem::`vftable';
  free(v2);
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (0050D2DB) --------------------------------------------------------
int __cdecl SEH_4B1B80(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D2F6) --------------------------------------------------------
void __userpurge sub_50D2F6(int a1@<ebp>, int a2)
{
  void *v2; // ST00_4
  _DWORD *v3; // ecx

  v3 = *(_DWORD **)(a1 - 16);
  v2 = (void *)v3[1];
  *v3 = &VItem::`vftable';
  free(v2);
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (0050D2FE) --------------------------------------------------------
int __cdecl SEH_4B20E0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D319) --------------------------------------------------------
void __userpurge sub_50D319(int a1@<ebp>, int a2)
{
  void *v2; // ST00_4
  _DWORD *v3; // ecx

  v3 = *(_DWORD **)(a1 - 276);
  v2 = (void *)v3[1];
  *v3 = &VItem::`vftable';
  free(v2);
}
// 51EFC8: using guessed type void *VItem::`vftable';

//----- (0050D324) --------------------------------------------------------
int __cdecl SEH_4B29B0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D352) --------------------------------------------------------
void __usercall sub_50D352(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D35D) --------------------------------------------------------
void __usercall sub_50D35D(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D368) --------------------------------------------------------
void __usercall sub_50D368(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D373) --------------------------------------------------------
void __usercall sub_50D373(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D37E) --------------------------------------------------------
void __usercall sub_50D37E(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D389) --------------------------------------------------------
int __cdecl SEH_4B2CC0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D3B0) --------------------------------------------------------
void __usercall sub_50D3B0(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (0050D3BE) --------------------------------------------------------
void __usercall sub_50D3BE(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 276));
}

//----- (0050D3CC) --------------------------------------------------------
int __cdecl SEH_4B3700(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D400) --------------------------------------------------------
void __usercall sub_50D400(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 280));
}

//----- (0050D40E) --------------------------------------------------------
void __usercall sub_50D40E(int a1@<ebp>)
{
  j__free(*(void **)(a1 - 280));
}

//----- (0050D41C) --------------------------------------------------------
int __cdecl SEH_4B3AF0(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D450) --------------------------------------------------------
void __usercall sub_50D450(int a1@<ebp>)
{
  j__free(*(void **)(a1 + 4));
}

//----- (0050D45B) --------------------------------------------------------
int __cdecl SEH_4B3E10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D480) --------------------------------------------------------
int __usercall sub_50D480@<eax>(int a1@<ebp>)
{
  return sub_4B4D60(*(_DWORD **)(a1 - 16));
}

//----- (0050D488) --------------------------------------------------------
int __cdecl SEH_4B4E70(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D4A3) --------------------------------------------------------
int __usercall sub_50D4A3@<eax>(int a1@<ebp>)
{
  return sub_4B4D60(*(_DWORD **)(a1 - 16));
}

//----- (0050D4AB) --------------------------------------------------------
int __cdecl SEH_4B4F10(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050D4C6) --------------------------------------------------------
int __cdecl sub_50D4C6(struct EHExceptionRecord *a1, struct EHRegistrationNode *a2, struct _CONTEXT *a3, void *a4)
{
  return __CxxFrameHandler3_0(a1, a2, a3, a4);
}
// 4C0E01: using guessed type _DWORD __cdecl __CxxFrameHandler3_0(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, void *);

//----- (0050EC90) --------------------------------------------------------
void sub_50EC90()
{
  sub_480D30(&unk_56C6A8);
}

//----- (0050ECA0) --------------------------------------------------------
void sub_50ECA0()
{
  sub_480D30(&unk_56C6B4);
}

//----- (0050ECB0) --------------------------------------------------------
void sub_50ECB0()
{
  sub_480D30(&unk_56C6C0);
}

//----- (0050ECBA) --------------------------------------------------------
void __cdecl sub_50ECBA()
{
  dword_576B04 = &std::bad_alloc::`vftable';
  sub_4CD364(&dword_576B04);
}
// 5226E0: using guessed type void *std::bad_alloc::`vftable';

#error "There were 8 decompilation failure(s) on 2879 function(s)"
